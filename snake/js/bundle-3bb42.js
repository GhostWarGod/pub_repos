"use strict";(()=>{var uC=Object.create;var id=Object.defineProperty;var dk=Object.getOwnPropertyDescriptor;var pC=Object.getOwnPropertyNames;var mC=Object.getPrototypeOf,hC=Object.prototype.hasOwnProperty;var oe=(i,e)=>()=>(i&&(e=i(i=0)),e);var fk=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),M1=(i,e)=>{for(var t in e)id(i,t,{get:e[t],enumerable:!0})},dC=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of pC(e))!hC.call(i,s)&&s!==t&&id(i,s,{get:()=>e[s],enumerable:!(r=dk(e,s))||r.enumerable});return i};var gk=(i,e,t)=>(t=i!=null?uC(mC(i)):{},dC(e||!i||!i.__esModule?id(t,"default",{value:i,enumerable:!0}):t,i));var U=(i,e,t,r)=>{for(var s=r>1?void 0:r?dk(e,t):e,a=i.length-1,l;a>=0;a--)(l=i[a])&&(s=(r?l(e,t,s):l(s))||s);return r&&s&&id(e,t,s),s};var fC=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var le=(i,e,t)=>(fC(i,e,"read from private field"),t?t.call(i):e.get(i)),ce=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)};var yk=fk((j1,G1)=>{"use strict";(function(i,e){typeof j1=="object"&&typeof G1<"u"?G1.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis<"u"?globalThis:i||self).jsSHA=e()})(j1,function(){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function e(P,S,N,O){var j,C,ne,ae=S||[0],pe=(N=N||0)>>>3,we=O===-1?3:0;for(j=0;j<P.length;j+=1)C=(ne=j+pe)>>>2,ae.length<=C&&ae.push(0),ae[C]|=P[j]<<8*(we+O*(ne%4));return{value:ae,binLen:8*P.length+N}}function t(P,S,N){switch(S){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(P){case"HEX":return function(O,j,C){return function(ne,ae,pe,we){var Ue,Se,Re,et;if(ne.length%2!=0)throw new Error("String of HEX type must be in byte increments");var ye=ae||[0],ct=(pe=pe||0)>>>3,at=we===-1?3:0;for(Ue=0;Ue<ne.length;Ue+=2){if(Se=parseInt(ne.substr(Ue,2),16),isNaN(Se))throw new Error("String of HEX type contains invalid characters");for(Re=(et=(Ue>>>1)+ct)>>>2;ye.length<=Re;)ye.push(0);ye[Re]|=Se<<8*(at+we*(et%4))}return{value:ye,binLen:4*ne.length+pe}}(O,j,C,N)};case"TEXT":return function(O,j,C){return function(ne,ae,pe,we,Ue){var Se,Re,et,ye,ct,at,gt,Mt,ur=0,xi=pe||[0],ji=(we=we||0)>>>3;if(ae==="UTF8")for(gt=Ue===-1?3:0,et=0;et<ne.length;et+=1)for(Re=[],128>(Se=ne.charCodeAt(et))?Re.push(Se):2048>Se?(Re.push(192|Se>>>6),Re.push(128|63&Se)):55296>Se||57344<=Se?Re.push(224|Se>>>12,128|Se>>>6&63,128|63&Se):(et+=1,Se=65536+((1023&Se)<<10|1023&ne.charCodeAt(et)),Re.push(240|Se>>>18,128|Se>>>12&63,128|Se>>>6&63,128|63&Se)),ye=0;ye<Re.length;ye+=1){for(ct=(at=ur+ji)>>>2;xi.length<=ct;)xi.push(0);xi[ct]|=Re[ye]<<8*(gt+Ue*(at%4)),ur+=1}else for(gt=Ue===-1?2:0,Mt=ae==="UTF16LE"&&Ue!==1||ae!=="UTF16LE"&&Ue===1,et=0;et<ne.length;et+=1){for(Se=ne.charCodeAt(et),Mt===!0&&(Se=(ye=255&Se)<<8|Se>>>8),ct=(at=ur+ji)>>>2;xi.length<=ct;)xi.push(0);xi[ct]|=Se<<8*(gt+Ue*(at%4)),ur+=2}return{value:xi,binLen:8*ur+we}}(O,S,j,C,N)};case"B64":return function(O,j,C){return function(ne,ae,pe,we){var Ue,Se,Re,et,ye,ct,at=0,gt=ae||[0],Mt=(pe=pe||0)>>>3,ur=we===-1?3:0,xi=ne.indexOf("=");if(ne.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(ne=ne.replace(/=/g,""),xi!==-1&&xi<ne.length)throw new Error("Invalid '=' found in base-64 string");for(Ue=0;Ue<ne.length;Ue+=4){for(et=ne.substr(Ue,4),Re=0,Se=0;Se<et.length;Se+=1)Re|=i.indexOf(et.charAt(Se))<<18-6*Se;for(Se=0;Se<et.length-1;Se+=1){for(ye=(ct=at+Mt)>>>2;gt.length<=ye;)gt.push(0);gt[ye]|=(Re>>>16-8*Se&255)<<8*(ur+we*(ct%4)),at+=1}}return{value:gt,binLen:8*at+pe}}(O,j,C,N)};case"BYTES":return function(O,j,C){return function(ne,ae,pe,we){var Ue,Se,Re,et,ye=ae||[0],ct=(pe=pe||0)>>>3,at=we===-1?3:0;for(Se=0;Se<ne.length;Se+=1)Ue=ne.charCodeAt(Se),Re=(et=Se+ct)>>>2,ye.length<=Re&&ye.push(0),ye[Re]|=Ue<<8*(at+we*(et%4));return{value:ye,binLen:8*ne.length+pe}}(O,j,C,N)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(O,j,C){return function(ne,ae,pe,we){return e(new Uint8Array(ne),ae,pe,we)}(O,j,C,N)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(O,j,C){return e(O,j,C,N)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function r(P,S,N,O){switch(P){case"HEX":return function(j){return function(C,ne,ae,pe){var we,Ue,Se="",Re=ne/8,et=ae===-1?3:0;for(we=0;we<Re;we+=1)Ue=C[we>>>2]>>>8*(et+ae*(we%4)),Se+="0123456789abcdef".charAt(Ue>>>4&15)+"0123456789abcdef".charAt(15&Ue);return pe.outputUpper?Se.toUpperCase():Se}(j,S,N,O)};case"B64":return function(j){return function(C,ne,ae,pe){var we,Ue,Se,Re,et,ye="",ct=ne/8,at=ae===-1?3:0;for(we=0;we<ct;we+=3)for(Re=we+1<ct?C[we+1>>>2]:0,et=we+2<ct?C[we+2>>>2]:0,Se=(C[we>>>2]>>>8*(at+ae*(we%4))&255)<<16|(Re>>>8*(at+ae*((we+1)%4))&255)<<8|et>>>8*(at+ae*((we+2)%4))&255,Ue=0;Ue<4;Ue+=1)ye+=8*we+6*Ue<=ne?i.charAt(Se>>>6*(3-Ue)&63):pe.b64Pad;return ye}(j,S,N,O)};case"BYTES":return function(j){return function(C,ne,ae){var pe,we,Ue="",Se=ne/8,Re=ae===-1?3:0;for(pe=0;pe<Se;pe+=1)we=C[pe>>>2]>>>8*(Re+ae*(pe%4))&255,Ue+=String.fromCharCode(we);return Ue}(j,S,N)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(j){return function(C,ne,ae){var pe,we=ne/8,Ue=new ArrayBuffer(we),Se=new Uint8Array(Ue),Re=ae===-1?3:0;for(pe=0;pe<we;pe+=1)Se[pe]=C[pe>>>2]>>>8*(Re+ae*(pe%4))&255;return Ue}(j,S,N)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(j){return function(C,ne,ae){var pe,we=ne/8,Ue=ae===-1?3:0,Se=new Uint8Array(we);for(pe=0;pe<we;pe+=1)Se[pe]=C[pe>>>2]>>>8*(Ue+ae*(pe%4))&255;return Se}(j,S,N)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],l=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],u="Chosen SHA variant is not supported";function m(P,S){var N,O,j=P.binLen>>>3,C=S.binLen>>>3,ne=j<<3,ae=4-j<<3;if(j%4!=0){for(N=0;N<C;N+=4)O=j+N>>>2,P.value[O]|=S.value[N>>>2]<<ne,P.value.push(0),P.value[O+1]|=S.value[N>>>2]>>>ae;return(P.value.length<<2)-4>=C+j&&P.value.pop(),{value:P.value,binLen:P.binLen+S.binLen}}return{value:P.value.concat(S.value),binLen:P.binLen+S.binLen}}function p(P){var S={outputUpper:!1,b64Pad:"=",outputLen:-1},N=P||{},O="Output length must be a multiple of 8";if(S.outputUpper=N.outputUpper||!1,N.b64Pad&&(S.b64Pad=N.b64Pad),N.outputLen){if(N.outputLen%8!=0)throw new Error(O);S.outputLen=N.outputLen}else if(N.shakeLen){if(N.shakeLen%8!=0)throw new Error(O);S.outputLen=N.shakeLen}if(typeof S.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof S.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return S}function h(P,S,N,O){var j=P+" must include a value and format";if(!S){if(!O)throw new Error(j);return O}if(S.value===void 0||!S.format)throw new Error(j);return t(S.format,S.encoding||"UTF8",N)(S.value)}var f=function(){function P(S,N,O){var j=O||{};if(this.t=N,this.i=j.encoding||"UTF8",this.numRounds=j.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=S,this.u=[],this.s=0,this.h=!1,this.v=0,this.A=!1,this.l=[],this.H=[]}return P.prototype.update=function(S){var N,O=0,j=this.S>>>5,C=this.p(S,this.u,this.s),ne=C.binLen,ae=C.value,pe=ne>>>5;for(N=0;N<pe;N+=j)O+this.S<=ne&&(this.m=this.R(ae.slice(N,N+j),this.m),O+=this.S);this.v+=O,this.u=ae.slice(O>>>5),this.s=ne%this.S,this.h=!0},P.prototype.getHash=function(S,N){var O,j,C=this.U,ne=p(N);if(this.T){if(ne.outputLen===-1)throw new Error("Output length must be specified in options");C=ne.outputLen}var ae=r(S,C,this.C,ne);if(this.A&&this.F)return ae(this.F(ne));for(j=this.K(this.u.slice(),this.s,this.v,this.B(this.m),C),O=1;O<this.numRounds;O+=1)this.T&&C%32!=0&&(j[j.length-1]&=16777215>>>24-C%32),j=this.K(j,C,0,this.L(this.o),C);return ae(j)},P.prototype.setHMACKey=function(S,N,O){if(!this.g)throw new Error("Variant does not support HMAC");if(this.h)throw new Error("Cannot set MAC key after calling update");var j=t(N,(O||{}).encoding||"UTF8",this.C);this.k(j(S))},P.prototype.k=function(S){var N,O=this.S>>>3,j=O/4-1;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(O<S.binLen/8&&(S.value=this.K(S.value,S.binLen,0,this.L(this.o),this.U));S.value.length<=j;)S.value.push(0);for(N=0;N<=j;N+=1)this.l[N]=909522486^S.value[N],this.H[N]=1549556828^S.value[N];this.m=this.R(this.l,this.m),this.v=this.S,this.A=!0},P.prototype.getHMAC=function(S,N){var O=p(N);return r(S,this.U,this.C,O)(this.Y())},P.prototype.Y=function(){var S;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");var N=this.K(this.u.slice(),this.s,this.v,this.B(this.m),this.U);return S=this.R(this.H,this.L(this.o)),S=this.K(N,this.U,this.S,S,this.U)},P}(),g=function(P,S){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,O){N.__proto__=O}||function(N,O){for(var j in O)Object.prototype.hasOwnProperty.call(O,j)&&(N[j]=O[j])})(P,S)};function b(P,S){function N(){this.constructor=P}g(P,S),P.prototype=S===null?Object.create(S):(N.prototype=S.prototype,new N)}function _(P,S){return P<<S|P>>>32-S}function I(P,S){return P>>>S|P<<32-S}function x(P,S){return P>>>S}function L(P,S,N){return P^S^N}function E(P,S,N){return P&S^~P&N}function T(P,S,N){return P&S^P&N^S&N}function R(P){return I(P,2)^I(P,13)^I(P,22)}function H(P,S){var N=(65535&P)+(65535&S);return(65535&(P>>>16)+(S>>>16)+(N>>>16))<<16|65535&N}function F(P,S,N,O){var j=(65535&P)+(65535&S)+(65535&N)+(65535&O);return(65535&(P>>>16)+(S>>>16)+(N>>>16)+(O>>>16)+(j>>>16))<<16|65535&j}function z(P,S,N,O,j){var C=(65535&P)+(65535&S)+(65535&N)+(65535&O)+(65535&j);return(65535&(P>>>16)+(S>>>16)+(N>>>16)+(O>>>16)+(j>>>16)+(C>>>16))<<16|65535&C}function V(P){return I(P,7)^I(P,18)^x(P,3)}function $(P){return I(P,6)^I(P,11)^I(P,25)}function Z(P){return[1732584193,4023233417,2562383102,271733878,3285377520]}function re(P,S){var N,O,j,C,ne,ae,pe,we=[];for(N=S[0],O=S[1],j=S[2],C=S[3],ne=S[4],pe=0;pe<80;pe+=1)we[pe]=pe<16?P[pe]:_(we[pe-3]^we[pe-8]^we[pe-14]^we[pe-16],1),ae=pe<20?z(_(N,5),E(O,j,C),ne,1518500249,we[pe]):pe<40?z(_(N,5),L(O,j,C),ne,1859775393,we[pe]):pe<60?z(_(N,5),T(O,j,C),ne,2400959708,we[pe]):z(_(N,5),L(O,j,C),ne,3395469782,we[pe]),ne=C,C=j,j=_(O,30),O=N,N=ae;return S[0]=H(N,S[0]),S[1]=H(O,S[1]),S[2]=H(j,S[2]),S[3]=H(C,S[3]),S[4]=H(ne,S[4]),S}function Me(P,S,N,O){for(var j,C=15+(S+65>>>9<<4),ne=S+N;P.length<=C;)P.push(0);for(P[S>>>5]|=128<<24-S%32,P[C]=4294967295&ne,P[C-1]=ne/4294967296|0,j=0;j<P.length;j+=16)O=re(P.slice(j,j+16),O);return O}var rt=function(P){function S(N,O,j){var C=this;if(N!=="SHA-1")throw new Error(u);var ne=j||{};return(C=P.call(this,N,O,j)||this).g=!0,C.F=C.Y,C.C=-1,C.p=t(C.t,C.i,C.C),C.R=re,C.B=function(ae){return ae.slice()},C.L=Z,C.K=Me,C.m=[1732584193,4023233417,2562383102,271733878,3285377520],C.S=512,C.U=160,C.T=!1,ne.hmacKey&&C.k(h("hmacKey",ne.hmacKey,C.C)),C}return b(S,P),S}(f);function be(P){return P=="SHA-224"?a.slice():l.slice()}function me(P,S){var N,O,j,C,ne,ae,pe,we,Ue,Se,Re,et,ye=[];for(N=S[0],O=S[1],j=S[2],C=S[3],ne=S[4],ae=S[5],pe=S[6],we=S[7],Re=0;Re<64;Re+=1)ye[Re]=Re<16?P[Re]:F(I(et=ye[Re-2],17)^I(et,19)^x(et,10),ye[Re-7],V(ye[Re-15]),ye[Re-16]),Ue=z(we,$(ne),E(ne,ae,pe),s[Re],ye[Re]),Se=H(R(N),T(N,O,j)),we=pe,pe=ae,ae=ne,ne=H(C,Ue),C=j,j=O,O=N,N=H(Ue,Se);return S[0]=H(N,S[0]),S[1]=H(O,S[1]),S[2]=H(j,S[2]),S[3]=H(C,S[3]),S[4]=H(ne,S[4]),S[5]=H(ae,S[5]),S[6]=H(pe,S[6]),S[7]=H(we,S[7]),S}var ve=function(P){function S(N,O,j){var C=this;if(N!=="SHA-224"&&N!=="SHA-256")throw new Error(u);var ne=j||{};return(C=P.call(this,N,O,j)||this).F=C.Y,C.g=!0,C.C=-1,C.p=t(C.t,C.i,C.C),C.R=me,C.B=function(ae){return ae.slice()},C.L=be,C.K=function(ae,pe,we,Ue){return function(Se,Re,et,ye,ct){for(var at,gt=15+(Re+65>>>9<<4),Mt=Re+et;Se.length<=gt;)Se.push(0);for(Se[Re>>>5]|=128<<24-Re%32,Se[gt]=4294967295&Mt,Se[gt-1]=Mt/4294967296|0,at=0;at<Se.length;at+=16)ye=me(Se.slice(at,at+16),ye);return ct==="SHA-224"?[ye[0],ye[1],ye[2],ye[3],ye[4],ye[5],ye[6]]:ye}(ae,pe,we,Ue,N)},C.m=be(N),C.S=512,C.U=N==="SHA-224"?224:256,C.T=!1,ne.hmacKey&&C.k(h("hmacKey",ne.hmacKey,C.C)),C}return b(S,P),S}(f),B=function(P,S){this.N=P,this.I=S};function Pe(P,S){var N;return S>32?(N=64-S,new B(P.I<<S|P.N>>>N,P.N<<S|P.I>>>N)):S!==0?(N=32-S,new B(P.N<<S|P.I>>>N,P.I<<S|P.N>>>N)):P}function fe(P,S){var N;return S<32?(N=32-S,new B(P.N>>>S|P.I<<N,P.I>>>S|P.N<<N)):(N=64-S,new B(P.I>>>S|P.N<<N,P.N>>>S|P.I<<N))}function $e(P,S){return new B(P.N>>>S,P.I>>>S|P.N<<32-S)}function St(P,S,N){return new B(P.N&S.N^~P.N&N.N,P.I&S.I^~P.I&N.I)}function Yt(P,S,N){return new B(P.N&S.N^P.N&N.N^S.N&N.N,P.I&S.I^P.I&N.I^S.I&N.I)}function pi(P){var S=fe(P,28),N=fe(P,34),O=fe(P,39);return new B(S.N^N.N^O.N,S.I^N.I^O.I)}function vt(P,S){var N,O;N=(65535&P.I)+(65535&S.I);var j=(65535&(O=(P.I>>>16)+(S.I>>>16)+(N>>>16)))<<16|65535&N;return N=(65535&P.N)+(65535&S.N)+(O>>>16),O=(P.N>>>16)+(S.N>>>16)+(N>>>16),new B((65535&O)<<16|65535&N,j)}function Hi(P,S,N,O){var j,C;j=(65535&P.I)+(65535&S.I)+(65535&N.I)+(65535&O.I);var ne=(65535&(C=(P.I>>>16)+(S.I>>>16)+(N.I>>>16)+(O.I>>>16)+(j>>>16)))<<16|65535&j;return j=(65535&P.N)+(65535&S.N)+(65535&N.N)+(65535&O.N)+(C>>>16),C=(P.N>>>16)+(S.N>>>16)+(N.N>>>16)+(O.N>>>16)+(j>>>16),new B((65535&C)<<16|65535&j,ne)}function Di(P,S,N,O,j){var C,ne;C=(65535&P.I)+(65535&S.I)+(65535&N.I)+(65535&O.I)+(65535&j.I);var ae=(65535&(ne=(P.I>>>16)+(S.I>>>16)+(N.I>>>16)+(O.I>>>16)+(j.I>>>16)+(C>>>16)))<<16|65535&C;return C=(65535&P.N)+(65535&S.N)+(65535&N.N)+(65535&O.N)+(65535&j.N)+(ne>>>16),ne=(P.N>>>16)+(S.N>>>16)+(N.N>>>16)+(O.N>>>16)+(j.N>>>16)+(C>>>16),new B((65535&ne)<<16|65535&C,ae)}function lr(P,S){return new B(P.N^S.N,P.I^S.I)}function cr(P){var S=fe(P,1),N=fe(P,8),O=$e(P,7);return new B(S.N^N.N^O.N,S.I^N.I^O.I)}function Lr(P){var S=fe(P,14),N=fe(P,18),O=fe(P,41);return new B(S.N^N.N^O.N,S.I^N.I^O.I)}var Xn=[new B(s[0],3609767458),new B(s[1],602891725),new B(s[2],3964484399),new B(s[3],2173295548),new B(s[4],4081628472),new B(s[5],3053834265),new B(s[6],2937671579),new B(s[7],3664609560),new B(s[8],2734883394),new B(s[9],1164996542),new B(s[10],1323610764),new B(s[11],3590304994),new B(s[12],4068182383),new B(s[13],991336113),new B(s[14],633803317),new B(s[15],3479774868),new B(s[16],2666613458),new B(s[17],944711139),new B(s[18],2341262773),new B(s[19],2007800933),new B(s[20],1495990901),new B(s[21],1856431235),new B(s[22],3175218132),new B(s[23],2198950837),new B(s[24],3999719339),new B(s[25],766784016),new B(s[26],2566594879),new B(s[27],3203337956),new B(s[28],1034457026),new B(s[29],2466948901),new B(s[30],3758326383),new B(s[31],168717936),new B(s[32],1188179964),new B(s[33],1546045734),new B(s[34],1522805485),new B(s[35],2643833823),new B(s[36],2343527390),new B(s[37],1014477480),new B(s[38],1206759142),new B(s[39],344077627),new B(s[40],1290863460),new B(s[41],3158454273),new B(s[42],3505952657),new B(s[43],106217008),new B(s[44],3606008344),new B(s[45],1432725776),new B(s[46],1467031594),new B(s[47],851169720),new B(s[48],3100823752),new B(s[49],1363258195),new B(s[50],3750685593),new B(s[51],3785050280),new B(s[52],3318307427),new B(s[53],3812723403),new B(s[54],2003034995),new B(s[55],3602036899),new B(s[56],1575990012),new B(s[57],1125592928),new B(s[58],2716904306),new B(s[59],442776044),new B(s[60],593698344),new B(s[61],3733110249),new B(s[62],2999351573),new B(s[63],3815920427),new B(3391569614,3928383900),new B(3515267271,566280711),new B(3940187606,3454069534),new B(4118630271,4000239992),new B(116418474,1914138554),new B(174292421,2731055270),new B(289380356,3203993006),new B(460393269,320620315),new B(685471733,587496836),new B(852142971,1086792851),new B(1017036298,365543100),new B(1126000580,2618297676),new B(1288033470,3409855158),new B(1501505948,4234509866),new B(1607167915,987167468),new B(1816402316,1246189591)];function Tr(P){return P==="SHA-384"?[new B(3418070365,a[0]),new B(1654270250,a[1]),new B(2438529370,a[2]),new B(355462360,a[3]),new B(1731405415,a[4]),new B(41048885895,a[5]),new B(3675008525,a[6]),new B(1203062813,a[7])]:[new B(l[0],4089235720),new B(l[1],2227873595),new B(l[2],4271175723),new B(l[3],1595750129),new B(l[4],2917565137),new B(l[5],725511199),new B(l[6],4215389547),new B(l[7],327033209)]}function Zi(P,S){var N,O,j,C,ne,ae,pe,we,Ue,Se,Re,et,ye,ct,at,gt,Mt=[];for(N=S[0],O=S[1],j=S[2],C=S[3],ne=S[4],ae=S[5],pe=S[6],we=S[7],Re=0;Re<80;Re+=1)Re<16?(et=2*Re,Mt[Re]=new B(P[et],P[et+1])):Mt[Re]=Hi((ye=Mt[Re-2],ct=void 0,at=void 0,gt=void 0,ct=fe(ye,19),at=fe(ye,61),gt=$e(ye,6),new B(ct.N^at.N^gt.N,ct.I^at.I^gt.I)),Mt[Re-7],cr(Mt[Re-15]),Mt[Re-16]),Ue=Di(we,Lr(ne),St(ne,ae,pe),Xn[Re],Mt[Re]),Se=vt(pi(N),Yt(N,O,j)),we=pe,pe=ae,ae=ne,ne=vt(C,Ue),C=j,j=O,O=N,N=vt(Ue,Se);return S[0]=vt(N,S[0]),S[1]=vt(O,S[1]),S[2]=vt(j,S[2]),S[3]=vt(C,S[3]),S[4]=vt(ne,S[4]),S[5]=vt(ae,S[5]),S[6]=vt(pe,S[6]),S[7]=vt(we,S[7]),S}var Qr=function(P){function S(N,O,j){var C=this;if(N!=="SHA-384"&&N!=="SHA-512")throw new Error(u);var ne=j||{};return(C=P.call(this,N,O,j)||this).F=C.Y,C.g=!0,C.C=-1,C.p=t(C.t,C.i,C.C),C.R=Zi,C.B=function(ae){return ae.slice()},C.L=Tr,C.K=function(ae,pe,we,Ue){return function(Se,Re,et,ye,ct){for(var at,gt=31+(Re+129>>>10<<5),Mt=Re+et;Se.length<=gt;)Se.push(0);for(Se[Re>>>5]|=128<<24-Re%32,Se[gt]=4294967295&Mt,Se[gt-1]=Mt/4294967296|0,at=0;at<Se.length;at+=32)ye=Zi(Se.slice(at,at+32),ye);return ct==="SHA-384"?[(ye=ye)[0].N,ye[0].I,ye[1].N,ye[1].I,ye[2].N,ye[2].I,ye[3].N,ye[3].I,ye[4].N,ye[4].I,ye[5].N,ye[5].I]:[ye[0].N,ye[0].I,ye[1].N,ye[1].I,ye[2].N,ye[2].I,ye[3].N,ye[3].I,ye[4].N,ye[4].I,ye[5].N,ye[5].I,ye[6].N,ye[6].I,ye[7].N,ye[7].I]}(ae,pe,we,Ue,N)},C.m=Tr(N),C.S=1024,C.U=N==="SHA-384"?384:512,C.T=!1,ne.hmacKey&&C.k(h("hmacKey",ne.hmacKey,C.C)),C}return b(S,P),S}(f),Ar=[new B(0,1),new B(0,32898),new B(2147483648,32906),new B(2147483648,2147516416),new B(0,32907),new B(0,2147483649),new B(2147483648,2147516545),new B(2147483648,32777),new B(0,138),new B(0,136),new B(0,2147516425),new B(0,2147483658),new B(0,2147516555),new B(2147483648,139),new B(2147483648,32905),new B(2147483648,32771),new B(2147483648,32770),new B(2147483648,128),new B(0,32778),new B(2147483648,2147483658),new B(2147483648,2147516545),new B(2147483648,32896),new B(0,2147483649),new B(2147483648,2147516424)],Ys=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function Qa(P){var S,N=[];for(S=0;S<5;S+=1)N[S]=[new B(0,0),new B(0,0),new B(0,0),new B(0,0),new B(0,0)];return N}function am(P){var S,N=[];for(S=0;S<5;S+=1)N[S]=P[S].slice();return N}function qs(P,S){var N,O,j,C,ne,ae,pe,we,Ue,Se=[],Re=[];if(P!==null)for(O=0;O<P.length;O+=2)S[(O>>>1)%5][(O>>>1)/5|0]=lr(S[(O>>>1)%5][(O>>>1)/5|0],new B(P[O+1],P[O]));for(N=0;N<24;N+=1){for(C=Qa(),O=0;O<5;O+=1)Se[O]=(ne=S[O][0],ae=S[O][1],pe=S[O][2],we=S[O][3],Ue=S[O][4],new B(ne.N^ae.N^pe.N^we.N^Ue.N,ne.I^ae.I^pe.I^we.I^Ue.I));for(O=0;O<5;O+=1)Re[O]=lr(Se[(O+4)%5],Pe(Se[(O+1)%5],1));for(O=0;O<5;O+=1)for(j=0;j<5;j+=1)S[O][j]=lr(S[O][j],Re[O]);for(O=0;O<5;O+=1)for(j=0;j<5;j+=1)C[j][(2*O+3*j)%5]=Pe(S[O][j],Ys[O][j]);for(O=0;O<5;O+=1)for(j=0;j<5;j+=1)S[O][j]=lr(C[O][j],new B(~C[(O+1)%5][j].N&C[(O+2)%5][j].N,~C[(O+1)%5][j].I&C[(O+2)%5][j].I));S[0][0]=lr(S[0][0],Ar[N])}return S}function Dl(P){var S,N,O=0,j=[0,0],C=[4294967295&P,P/4294967296&2097151];for(S=6;S>=0;S--)(N=C[S>>2]>>>8*S&255)===0&&O===0||(j[O+1>>2]|=N<<8*(O+1),O+=1);return O=O!==0?O:1,j[0]|=O,{value:O+1>4?j:[j[0]],binLen:8+8*O}}function Za(P){return m(Dl(P.binLen),P)}function Nl(P,S){var N,O=Dl(S),j=S>>>2,C=(j-(O=m(O,P)).value.length%j)%j;for(N=0;N<C;N++)O.value.push(0);return O.value}var om=function(P){function S(N,O,j){var C=this,ne=6,ae=0,pe=j||{};if((C=P.call(this,N,O,j)||this).numRounds!==1){if(pe.kmacKey||pe.hmacKey)throw new Error("Cannot set numRounds with MAC");if(C.o==="CSHAKE128"||C.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(C.C=1,C.p=t(C.t,C.i,C.C),C.R=qs,C.B=am,C.L=Qa,C.m=Qa(),C.T=!1,N){case"SHA3-224":C.S=ae=1152,C.U=224,C.g=!0,C.F=C.Y;break;case"SHA3-256":C.S=ae=1088,C.U=256,C.g=!0,C.F=C.Y;break;case"SHA3-384":C.S=ae=832,C.U=384,C.g=!0,C.F=C.Y;break;case"SHA3-512":C.S=ae=576,C.U=512,C.g=!0,C.F=C.Y;break;case"SHAKE128":ne=31,C.S=ae=1344,C.U=-1,C.T=!0,C.g=!1,C.F=null;break;case"SHAKE256":ne=31,C.S=ae=1088,C.U=-1,C.T=!0,C.g=!1,C.F=null;break;case"KMAC128":ne=4,C.S=ae=1344,C.M(j),C.U=-1,C.T=!0,C.g=!1,C.F=C.X;break;case"KMAC256":ne=4,C.S=ae=1088,C.M(j),C.U=-1,C.T=!0,C.g=!1,C.F=C.X;break;case"CSHAKE128":C.S=ae=1344,ne=C.O(j),C.U=-1,C.T=!0,C.g=!1,C.F=null;break;case"CSHAKE256":C.S=ae=1088,ne=C.O(j),C.U=-1,C.T=!0,C.g=!1,C.F=null;break;default:throw new Error(u)}return C.K=function(we,Ue,Se,Re,et){return function(ye,ct,at,gt,Mt,ur,xi){var ji,Xa,Qs=0,pr=[],Zs=Mt>>>5,lm=ct>>>5;for(ji=0;ji<lm&&ct>=Mt;ji+=Zs)gt=qs(ye.slice(ji,ji+Zs),gt),ct-=Mt;for(ye=ye.slice(ji),ct%=Mt;ye.length<Zs;)ye.push(0);for(ye[(ji=ct>>>3)>>2]^=ur<<ji%4*8,ye[Zs-1]^=2147483648,gt=qs(ye,gt);32*pr.length<xi&&(Xa=gt[Qs%5][Qs/5|0],pr.push(Xa.I),!(32*pr.length>=xi));)pr.push(Xa.N),64*(Qs+=1)%Mt==0&&(qs(null,gt),Qs=0);return pr}(we,Ue,0,Re,ae,ne,et)},pe.hmacKey&&C.k(h("hmacKey",pe.hmacKey,C.C)),C}return b(S,P),S.prototype.O=function(N,O){var j=function(pe){var we=pe||{};return{funcName:h("funcName",we.funcName,1,{value:[],binLen:0}),customization:h("Customization",we.customization,1,{value:[],binLen:0})}}(N||{});O&&(j.funcName=O);var C=m(Za(j.funcName),Za(j.customization));if(j.customization.binLen!==0||j.funcName.binLen!==0){for(var ne=Nl(C,this.S>>>3),ae=0;ae<ne.length;ae+=this.S>>>5)this.m=this.R(ne.slice(ae,ae+(this.S>>>5)),this.m),this.v+=this.S;return 4}return 31},S.prototype.M=function(N){var O=function(ne){var ae=ne||{};return{kmacKey:h("kmacKey",ae.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:h("Customization",ae.customization,1,{value:[],binLen:0})}}(N||{});this.O(N,O.funcName);for(var j=Nl(Za(O.kmacKey),this.S>>>3),C=0;C<j.length;C+=this.S>>>5)this.m=this.R(j.slice(C,C+(this.S>>>5)),this.m),this.v+=this.S;this.A=!0},S.prototype.X=function(N){var O=m({value:this.u.slice(),binLen:this.s},function(j){var C,ne,ae=0,pe=[0,0],we=[4294967295&j,j/4294967296&2097151];for(C=6;C>=0;C--)(ne=we[C>>2]>>>8*C&255)==0&&ae===0||(pe[ae>>2]|=ne<<8*ae,ae+=1);return pe[(ae=ae!==0?ae:1)>>2]|=ae<<8*ae,{value:ae+1>4?pe:[pe[0]],binLen:8+8*ae}}(N.outputLen));return this.K(O.value,O.binLen,this.v,this.B(this.m),N.outputLen)},S}(f);return function(){function P(S,N,O){if(S=="SHA-1")this.j=new rt(S,N,O);else if(S=="SHA-224"||S=="SHA-256")this.j=new ve(S,N,O);else if(S=="SHA-384"||S=="SHA-512")this.j=new Qr(S,N,O);else{if(S!="SHA3-224"&&S!="SHA3-256"&&S!="SHA3-384"&&S!="SHA3-512"&&S!="SHAKE128"&&S!="SHAKE256"&&S!="CSHAKE128"&&S!="CSHAKE256"&&S!="KMAC128"&&S!="KMAC256")throw new Error(u);this.j=new om(S,N,O)}}return P.prototype.update=function(S){this.j.update(S)},P.prototype.getHash=function(S,N){return this.j.getHash(S,N)},P.prototype.setHMACKey=function(S,N,O){this.j.setHMACKey(S,N,O)},P.prototype.getHMAC=function(S,N){return this.j.getHMAC(S,N)},P}()})});var _k,xk=oe(()=>{"use strict";_k="1.0.8"});var Jt,eo=oe(()=>{"use strict";xk();Jt=class i extends Error{constructor(e,t={}){let r=t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof i&&t.cause.docsPath||t.docsPath,a=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${_k}`].join(`
`);super(a),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.shortMessage=e}}});function Xi(i,e){return i.exec(e)?.groups}var V1,W1,vd,Tu=oe(()=>{"use strict";V1=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,W1=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,vd=/^\(.+?\).*?$/});function Id(i){let e=i.type;if(vk.test(i.type)&&"components"in i){e="(";let t=i.components.length;for(let s=0;s<t;s++){let a=i.components[s];e+=Id(a),s<t-1&&(e+=", ")}let r=Xi(vk,i.type);return e+=`)${r?.array??""}`,Id({...i,type:e})}return"indexed"in i&&i.indexed&&(e=`${e} indexed`),i.name?`${e} ${i.name}`:e}var vk,Ik=oe(()=>{"use strict";Tu();vk=/^tuple(?<array>(\[(\d*)\])*)$/});function to(i){let e="",t=i.length;for(let r=0;r<t;r++){let s=i[r];e+=Id(s),r!==t-1&&(e+=", ")}return e}var kk=oe(()=>{"use strict";Ik()});function ea(i){return i.type==="function"?`function ${i.name}(${to(i.inputs)})${i.stateMutability&&i.stateMutability!=="nonpayable"?` ${i.stateMutability}`:""}${i.outputs?.length?` returns (${to(i.outputs)})`:""}`:i.type==="event"?`event ${i.name}(${to(i.inputs)})`:i.type==="error"?`error ${i.name}(${to(i.inputs)})`:i.type==="constructor"?`constructor(${to(i.inputs)})${i.stateMutability==="payable"?" payable":""}`:i.type==="fallback"?`fallback() external${i.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var Sk=oe(()=>{"use strict";kk()});function Ek(i){return wk.test(i)}function Lk(i){return Xi(wk,i)}function Ak(i){return Tk.test(i)}function Ck(i){return Xi(Tk,i)}function Rk(i){return Mk.test(i)}function Bk(i){return Xi(Mk,i)}function io(i){return Dk.test(i)}function Nk(i){return Xi(Dk,i)}function Fk(i){return Ok.test(i)}function Pk(i){return Xi(Ok,i)}function zk(i){return Uk.test(i)}function Hk(i){return Xi(Uk,i)}function jk(i){return gC.test(i)}var wk,Tk,Mk,Dk,Ok,Uk,gC,Gk,kd,Au=oe(()=>{"use strict";Tu();wk=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;Tk=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;Mk=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;Dk=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;Ok=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;Uk=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;gC=/^receive\(\) external payable$/;Gk=new Set(["indexed"]),kd=new Set(["calldata","memory","storage"])});var Sd,wd,Ed,Ld=oe(()=>{"use strict";eo();Sd=class extends Jt{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},wd=class extends Jt{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},Ed=class extends Jt{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}});var Td,Ad,Cd,Md,Rd,K1=oe(()=>{"use strict";eo();Td=class extends Jt{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},Ad=class extends Jt{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},Cd=class extends Jt{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},Md=class extends Jt{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},Rd=class extends Jt{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}});var Xr,Bd,Dd,$1=oe(()=>{"use strict";eo();Xr=class extends Jt{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},Bd=class extends Jt{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},Dd=class extends Jt{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}});var Nd,Vk=oe(()=>{"use strict";eo();Nd=class extends Jt{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}});var Od,Wk=oe(()=>{"use strict";eo();Od=class extends Jt{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}});function Kk(i,e,t){let r="";if(t)for(let s of Object.entries(t)){if(!s)continue;let a="";for(let l of s[1])a+=`[${l.type}${l.name?`:${l.name}`:""}]`;r+=`(${s[0]}{${a}})`}return e?`${e}:${i}${r}`:i}var Fd,$k=oe(()=>{"use strict";Fd=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]])});function Cu(i,e={}){if(Rk(i))return bC(i,e);if(Ak(i))return yC(i,e);if(Ek(i))return _C(i,e);if(Fk(i))return xC(i,e);if(zk(i))return vC(i);if(jk(i))return{type:"receive",stateMutability:"payable"};throw new Bd({signature:i})}function bC(i,e={}){let t=Bk(i);if(!t)throw new Xr({signature:i,type:"function"});let r=Cr(t.parameters),s=[],a=r.length;for(let u=0;u<a;u++)s.push(ts(r[u],{modifiers:kd,structs:e,type:"function"}));let l=[];if(t.returns){let u=Cr(t.returns),m=u.length;for(let p=0;p<m;p++)l.push(ts(u[p],{modifiers:kd,structs:e,type:"function"}))}return{name:t.name,type:"function",stateMutability:t.stateMutability??"nonpayable",inputs:s,outputs:l}}function yC(i,e={}){let t=Ck(i);if(!t)throw new Xr({signature:i,type:"event"});let r=Cr(t.parameters),s=[],a=r.length;for(let l=0;l<a;l++)s.push(ts(r[l],{modifiers:Gk,structs:e,type:"event"}));return{name:t.name,type:"event",inputs:s}}function _C(i,e={}){let t=Lk(i);if(!t)throw new Xr({signature:i,type:"error"});let r=Cr(t.parameters),s=[],a=r.length;for(let l=0;l<a;l++)s.push(ts(r[l],{structs:e,type:"error"}));return{name:t.name,type:"error",inputs:s}}function xC(i,e={}){let t=Pk(i);if(!t)throw new Xr({signature:i,type:"constructor"});let r=Cr(t.parameters),s=[],a=r.length;for(let l=0;l<a;l++)s.push(ts(r[l],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:t.stateMutability??"nonpayable",inputs:s}}function vC(i){let e=Hk(i);if(!e)throw new Xr({signature:i,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}function ts(i,e){let t=Kk(i,e?.type,e?.structs);if(Fd.has(t))return Fd.get(t);let r=vd.test(i),s=Xi(r?kC:IC,i);if(!s)throw new Td({param:i});if(s.name&&EC(s.name))throw new Ad({param:i,name:s.name});let a=s.name?{name:s.name}:{},l=s.modifier==="indexed"?{indexed:!0}:{},u=e?.structs??{},m,p={};if(r){m="tuple";let f=Cr(s.type),g=[],b=f.length;for(let _=0;_<b;_++)g.push(ts(f[_],{structs:u}));p={components:g}}else if(s.type in u)m="tuple",p={components:u[s.type]};else if(SC.test(s.type))m=`${s.type}256`;else if(m=s.type,e?.type!=="struct"&&!Y1(m))throw new Ed({type:m});if(s.modifier){if(!e?.modifiers?.has?.(s.modifier))throw new Cd({param:i,type:e?.type,modifier:s.modifier});if(kd.has(s.modifier)&&!LC(m,!!s.array))throw new Md({param:i,type:e?.type,modifier:s.modifier})}let h={type:`${m}${s.array??""}`,...a,...l,...p};return Fd.set(t,h),h}function Cr(i,e=[],t="",r=0){let s=i.trim().length;for(let a=0;a<s;a++){let l=i[a],u=i.slice(a+1);switch(l){case",":return r===0?Cr(u,[...e,t.trim()]):Cr(u,e,`${t}${l}`,r);case"(":return Cr(u,e,`${t}${l}`,r+1);case")":return Cr(u,e,`${t}${l}`,r-1);default:return Cr(u,e,`${t}${l}`,r)}}if(t==="")return e;if(r!==0)throw new Od({current:t,depth:r});return e.push(t.trim()),e}function Y1(i){return i==="address"||i==="bool"||i==="function"||i==="string"||V1.test(i)||W1.test(i)}function EC(i){return i==="address"||i==="bool"||i==="function"||i==="string"||i==="tuple"||V1.test(i)||W1.test(i)||wC.test(i)}function LC(i,e){return e||i==="bytes"||i==="string"||i==="tuple"}var IC,kC,SC,wC,Pd=oe(()=>{"use strict";Tu();Ld();K1();$1();Wk();$k();Au();IC=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,kC=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,SC=/^u?int$/;wC=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/});function Ud(i){let e={},t=i.length;for(let l=0;l<t;l++){let u=i[l];if(!io(u))continue;let m=Nk(u);if(!m)throw new Xr({signature:u,type:"struct"});let p=m.properties.split(";"),h=[],f=p.length;for(let g=0;g<f;g++){let _=p[g].trim();if(!_)continue;let I=ts(_,{type:"struct"});h.push(I)}if(!h.length)throw new Dd({signature:u});e[m.name]=h}let r={},s=Object.entries(e),a=s.length;for(let l=0;l<a;l++){let[u,m]=s[l];r[u]=Yk(m,e)}return r}function Yk(i,e,t=new Set){let r=[],s=i.length;for(let a=0;a<s;a++){let l=i[a];if(vd.test(l.type))r.push(l);else{let m=Xi(TC,l.type);if(!m?.type)throw new Rd({abiParameter:l});let{array:p,type:h}=m;if(h in e){if(t.has(h))throw new Nd({type:h});r.push({...l,type:`tuple${p??""}`,components:Yk(e[h]??[],e,new Set([...t,h]))})}else if(Y1(h))r.push(l);else throw new wd({type:h})}}return r}var TC,q1=oe(()=>{"use strict";Tu();Ld();K1();$1();Vk();Au();Pd();TC=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/});function zd(i){let e=Ud(i),t=[],r=i.length;for(let s=0;s<r;s++){let a=i[s];io(a)||t.push(Cu(a,e))}return t}var qk=oe(()=>{"use strict";Au();q1();Pd()});function Hd(i){let e;if(typeof i=="string")e=Cu(i);else{let t=Ud(i),r=i.length;for(let s=0;s<r;s++){let a=i[s];if(!io(a)){e=Cu(a,t);break}}}if(!e)throw new Sd({signature:i});return e}var Qk=oe(()=>{"use strict";Ld();Au();q1();Pd()});var jd=oe(()=>{"use strict";Sk();qk();Qk()});function Ni(i,{includeName:e=!1}={}){if(i.type!=="function"&&i.type!=="event"&&i.type!=="error")throw new Gd(i.type);return`${i.name}(${Mu(i.inputs,{includeName:e})})`}function Mu(i,{includeName:e=!1}={}){return i?i.map(t=>CC(t,{includeName:e})).join(e?", ":","):""}function CC(i,{includeName:e}){return i.type.startsWith("tuple")?`(${Mu(i.components,{includeName:e})})${i.type.slice(5)}`:i.type+(e&&i.name?` ${i.name}`:"")}var ta=oe(()=>{"use strict";ii()});function Qt(i,{strict:e=!0}={}){return!i||typeof i!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(i):i.startsWith("0x")}var Mr=oe(()=>{"use strict"});function bt(i){return Qt(i,{strict:!1})?Math.ceil((i.length-2)/2):i.length}var Rr=oe(()=>{"use strict";Mr()});var Q1,Zk=oe(()=>{"use strict";Q1="2.26.3"});function Xk(i,e){return e?.(i)?i:i&&typeof i=="object"&&"cause"in i&&i.cause!==void 0?Xk(i.cause,e):e?null:i}var Z1,W,nt=oe(()=>{"use strict";Zk();Z1={getDocsUrl:({docsBaseUrl:i,docsPath:e="",docsSlug:t})=>e?`${i??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${Q1}`},W=class i extends Error{constructor(e,t={}){let r=(()=>t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details)(),s=(()=>t.cause instanceof i&&t.cause.docsPath||t.docsPath)(),a=Z1.getDocsUrl?.({...t,docsPath:s}),l=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...r?[`Details: ${r}`]:[],...Z1.version?[`Version: ${Z1.version}`]:[]].join(`
`);super(l,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=Q1}walk(e){return Xk(this,e)}}});var Vd,Ru,ro,mr,Wd,Kd,$d,no,Yd,so,Bu,is,qd,Qd,Zd,Br,Jr,Xd,Jd,ef,Gd,ii=oe(()=>{"use strict";ta();Rr();nt();Vd=class extends W{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}},Ru=class extends W{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}},ro=class extends W{constructor({data:e,params:t,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Mu(t,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=r}},mr=class extends W{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}},Wd=class extends W{constructor({expectedLength:e,givenLength:t,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${t}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},Kd=class extends W{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${bt(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},$d=class extends W{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},no=class extends W{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}},Yd=class extends W{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}},so=class extends W{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiEventSignatureNotFoundError"})}},Bu=class extends W{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:t,name:"AbiEventNotFoundError"})}},is=class extends W{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionNotFoundError"})}},qd=class extends W{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}},Qd=class extends W{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Ni(e.abiItem)}\`, and`,`\`${t.type}\` in \`${Ni(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},Zd=class extends W{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}},Br=class extends W{constructor({abiItem:e,data:t,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Mu(r,{includeName:!0})})`,`Data:   ${t} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=r,this.size=s}},Jr=class extends W{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${Ni(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}},Xd=class extends W{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiEncodingType"})}},Jd=class extends W{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiDecodingType"})}},ef=class extends W{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},Gd=class extends W{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}});var Du,Nu,Ou,rf=oe(()=>{"use strict";nt();Du=class extends W{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Nu=class extends W{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}},Ou=class extends W{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${t} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}});function rs(i,{dir:e,size:t=32}={}){return typeof i=="string"?Tn(i,{dir:e,size:t}):MC(i,{dir:e,size:t})}function Tn(i,{dir:e,size:t=32}={}){if(t===null)return i;let r=i.replace("0x","");if(r.length>t*2)throw new Nu({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function MC(i,{dir:e,size:t=32}={}){if(t===null)return i;if(i.length>t)throw new Nu({size:i.length,targetSize:t,type:"bytes"});let r=new Uint8Array(t);for(let s=0;s<t;s++){let a=e==="right";r[a?s:t-s-1]=i[a?s:i.length-s-1]}return r}var nf=oe(()=>{"use strict";rf()});var ao,sf,af,of,Fu=oe(()=>{"use strict";nt();ao=class extends W{constructor({max:e,min:t,signed:r,size:s,value:a}){super(`Number "${a}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},sf=class extends W{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}},af=class extends W{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}},of=class extends W{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}});function vi(i,{dir:e="left"}={}){let t=typeof i=="string"?i.replace("0x",""):i,r=0;for(let s=0;s<t.length-1&&t[e==="left"?s:t.length-s-1].toString()==="0";s++)r++;return t=e==="left"?t.slice(r):t.slice(0,t.length-r),typeof i=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}var oo=oe(()=>{"use strict"});function Gi(i,{size:e}){if(bt(i)>e)throw new of({givenSize:bt(i),maxSize:e})}function Ot(i,e={}){let{signed:t}=e;e.size&&Gi(i,{size:e.size});let r=BigInt(i);if(!t)return r;let s=(i.length-2)/2,a=(1n<<BigInt(s)*8n-1n)-1n;return r<=a?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function X1(i,e={}){let t=i;if(e.size&&(Gi(t,{size:e.size}),t=vi(t)),vi(t)==="0x00")return!1;if(vi(t)==="0x01")return!0;throw new af(t)}function ei(i,e={}){return Number(Ot(i,e))}var Ii=oe(()=>{"use strict";Fu();Rr();oo()});function De(i,e={}){return typeof i=="number"||typeof i=="bigint"?Ae(i,e):typeof i=="string"?Dr(i,e):typeof i=="boolean"?lf(i,e):pt(i,e)}function lf(i,e={}){let t=`0x${Number(i)}`;return typeof e.size=="number"?(Gi(t,{size:e.size}),rs(t,{size:e.size})):t}function pt(i,e={}){let t="";for(let s=0;s<i.length;s++)t+=RC[i[s]];let r=`0x${t}`;return typeof e.size=="number"?(Gi(r,{size:e.size}),rs(r,{dir:"right",size:e.size})):r}function Ae(i,e={}){let{signed:t,size:r}=e,s=BigInt(i),a;r?t?a=(1n<<BigInt(r)*8n-1n)-1n:a=2n**(BigInt(r)*8n)-1n:typeof i=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));let l=typeof a=="bigint"&&t?-a-1n:0;if(a&&s>a||s<l){let m=typeof i=="bigint"?"n":"";throw new ao({max:a?`${a}${m}`:void 0,min:`${l}${m}`,signed:t,size:r,value:`${i}${m}`})}let u=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?rs(u,{size:r}):u}function Dr(i,e={}){let t=BC.encode(i);return pt(t,e)}var RC,BC,We=oe(()=>{"use strict";Fu();nf();Ii();RC=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));BC=new TextEncoder});function hr(i,e={}){return typeof i=="number"||typeof i=="bigint"?OC(i,e):typeof i=="boolean"?NC(i,e):Qt(i)?ri(i,e):Nr(i,e)}function NC(i,e={}){let t=new Uint8Array(1);return t[0]=Number(i),typeof e.size=="number"?(Gi(t,{size:e.size}),rs(t,{size:e.size})):t}function Jk(i){if(i>=An.zero&&i<=An.nine)return i-An.zero;if(i>=An.A&&i<=An.F)return i-(An.A-10);if(i>=An.a&&i<=An.f)return i-(An.a-10)}function ri(i,e={}){let t=i;e.size&&(Gi(t,{size:e.size}),t=rs(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);let s=r.length/2,a=new Uint8Array(s);for(let l=0,u=0;l<s;l++){let m=Jk(r.charCodeAt(u++)),p=Jk(r.charCodeAt(u++));if(m===void 0||p===void 0)throw new W(`Invalid byte sequence ("${r[u-2]}${r[u-1]}" in "${r}").`);a[l]=m*16+p}return a}function OC(i,e){let t=Ae(i,e);return ri(t)}function Nr(i,e={}){let t=DC.encode(i);return typeof e.size=="number"?(Gi(t,{size:e.size}),rs(t,{dir:"right",size:e.size})):t}var DC,An,mi=oe(()=>{"use strict";nt();Mr();nf();Ii();We();DC=new TextEncoder;An={zero:48,nine:57,A:65,F:70,a:97,f:102}});function Pu(i){if(!Number.isSafeInteger(i)||i<0)throw new Error("positive integer expected, got "+i)}function FC(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function ns(i,...e){if(!FC(i))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(i.length))throw new Error("Uint8Array expected of length "+e+", got length="+i.length)}function eS(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Pu(i.outputLen),Pu(i.blockLen)}function Cn(i,e=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(e&&i.finished)throw new Error("Hash#digest() has already been called")}function cf(i,e){ns(i);let t=e.outputLen;if(i.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}var Uu=oe(()=>{"use strict"});function PC(i,e=!1){return e?{h:Number(i&uf),l:Number(i>>tS&uf)}:{h:Number(i>>tS&uf)|0,l:Number(i&uf)|0}}function iS(i,e=!1){let t=new Uint32Array(i.length),r=new Uint32Array(i.length);for(let s=0;s<i.length;s++){let{h:a,l}=PC(i[s],e);[t[s],r[s]]=[a,l]}return[t,r]}var uf,tS,rS,nS,sS,aS,oS=oe(()=>{"use strict";uf=BigInt(4294967295),tS=BigInt(32);rS=(i,e,t)=>i<<t|e>>>32-t,nS=(i,e,t)=>e<<t|i>>>32-t,sS=(i,e,t)=>e<<t-32|i>>>64-t,aS=(i,e,t)=>i<<t-32|e>>>64-t});var ia,lS=oe(()=>{"use strict";ia=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function cS(i){return new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4))}function pf(i){return new DataView(i.buffer,i.byteOffset,i.byteLength)}function Or(i,e){return i<<32-e|i>>>e}function UC(i){return i<<24&4278190080|i<<8&16711680|i>>>8&65280|i>>>24&255}function ex(i){for(let e=0;e<i.length;e++)i[e]=UC(i[e])}function zC(i){if(typeof i!="string")throw new Error("utf8ToBytes expected string, got "+typeof i);return new Uint8Array(new TextEncoder().encode(i))}function as(i){return typeof i=="string"&&(i=zC(i)),ns(i),i}function uS(...i){let e=0;for(let r=0;r<i.length;r++){let s=i[r];ns(s),e+=s.length}let t=new Uint8Array(e);for(let r=0,s=0;r<i.length;r++){let a=i[r];t.set(a,s),s+=a.length}return t}function mf(i){let e=r=>i().update(as(r)).digest(),t=i();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>i(),e}function pS(i){let e=(r,s)=>i(s).update(as(r)).digest(),t=i({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>i(r),e}function hf(i=32){if(ia&&typeof ia.getRandomValues=="function")return ia.getRandomValues(new Uint8Array(i));if(ia&&typeof ia.randomBytes=="function")return ia.randomBytes(i);throw new Error("crypto.getRandomValues must be defined")}var J1,ss,ra=oe(()=>{"use strict";lS();Uu();J1=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();ss=class{clone(){return this._cloneInto()}}});function YC(i,e=24){let t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let l=0;l<10;l++)t[l]=i[l]^i[l+10]^i[l+20]^i[l+30]^i[l+40];for(let l=0;l<10;l+=2){let u=(l+8)%10,m=(l+2)%10,p=t[m],h=t[m+1],f=mS(p,h,1)^t[u],g=hS(p,h,1)^t[u+1];for(let b=0;b<50;b+=10)i[l+b]^=f,i[l+b+1]^=g}let s=i[2],a=i[3];for(let l=0;l<24;l++){let u=fS[l],m=mS(s,a,u),p=hS(s,a,u),h=dS[l];s=i[h],a=i[h+1],i[h]=m,i[h+1]=p}for(let l=0;l<50;l+=10){for(let u=0;u<10;u++)t[u]=i[l+u];for(let u=0;u<10;u++)i[l+u]^=~t[(u+2)%10]&t[(u+4)%10]}i[0]^=KC[r],i[1]^=$C[r]}t.fill(0)}var dS,fS,gS,HC,zu,jC,GC,VC,WC,KC,$C,mS,hS,df,os,h8,d8,f8,g8,b8,ff,y8,_8,bS,x8,v8,tx=oe(()=>{"use strict";Uu();oS();ra();dS=[],fS=[],gS=[],HC=BigInt(0),zu=BigInt(1),jC=BigInt(2),GC=BigInt(7),VC=BigInt(256),WC=BigInt(113);for(let i=0,e=zu,t=1,r=0;i<24;i++){[t,r]=[r,(2*t+3*r)%5],dS.push(2*(5*r+t)),fS.push((i+1)*(i+2)/2%64);let s=HC;for(let a=0;a<7;a++)e=(e<<zu^(e>>GC)*WC)%VC,e&jC&&(s^=zu<<(zu<<BigInt(a))-zu);gS.push(s)}[KC,$C]=iS(gS,!0),mS=(i,e,t)=>t>32?sS(i,e,t):rS(i,e,t),hS=(i,e,t)=>t>32?aS(i,e,t):nS(i,e,t);df=class i extends ss{constructor(e,t,r,s=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Pu(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=cS(this.state)}keccak(){J1||ex(this.state32),YC(this.state32,this.rounds),J1||ex(this.state32),this.posOut=0,this.pos=0}update(e){Cn(this);let{blockLen:t,state:r}=this;e=as(e);let s=e.length;for(let a=0;a<s;){let l=Math.min(t-this.pos,s-a);for(let u=0;u<l;u++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,t&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Cn(this,!1),ns(e),this.finish();let t=this.state,{blockLen:r}=this;for(let s=0,a=e.length;s<a;){this.posOut>=r&&this.keccak();let l=Math.min(r-this.posOut,a-s);e.set(t.subarray(this.posOut,this.posOut+l),s),this.posOut+=l,s+=l}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Pu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(cf(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:s,rounds:a,enableXOF:l}=this;return e||(e=new i(t,r,s,l,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=s,e.enableXOF=l,e.destroyed=this.destroyed,e}},os=(i,e,t)=>mf(()=>new df(e,i,t)),h8=os(6,144,224/8),d8=os(6,136,256/8),f8=os(6,104,384/8),g8=os(6,72,512/8),b8=os(1,144,224/8),ff=os(1,136,256/8),y8=os(1,104,384/8),_8=os(1,72,512/8),bS=(i,e,t)=>pS((r={})=>new df(e,i,r.dkLen===void 0?t:r.dkLen,!0)),x8=bS(31,168,128/8),v8=bS(31,136,256/8)});function Rt(i,e){let t=e||"hex",r=ff(Qt(i,{strict:!1})?hr(i):i);return t==="bytes"?r:De(r)}var Fr=oe(()=>{"use strict";tx();Mr();mi();We()});function yS(i){return qC(i)}var qC,_S=oe(()=>{"use strict";mi();Fr();qC=i=>Rt(hr(i))});function xS(i){let e=!0,t="",r=0,s="",a=!1;for(let l=0;l<i.length;l++){let u=i[l];if(["(",")",","].includes(u)&&(e=!0),u==="("&&r++,u===")"&&r--,!!e){if(r===0){if(u===" "&&["event","function",""].includes(s))s="";else if(s+=u,u===")"){a=!0;break}continue}if(u===" "){i[l-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}s+=u,t+=u}}if(!a)throw new W("Unable to normalize signature.");return s}var vS=oe(()=>{"use strict";nt()});var IS,kS=oe(()=>{"use strict";jd();vS();IS=i=>{let e=(()=>typeof i=="string"?i:ea(i))();return xS(e)}});function gf(i){return yS(IS(i))}var ix=oe(()=>{"use strict";_S();kS()});var ls,Hu=oe(()=>{"use strict";ix();ls=gf});var Dt,en=oe(()=>{"use strict";nt();Dt=class extends W{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}});var tn,ju=oe(()=>{"use strict";tn=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let r=this.keys().next().value;r&&this.delete(r)}return this}}});function Mn(i,e){if(rx.has(`${i}.${e}`))return rx.get(`${i}.${e}`);let t=e?`${e}${i.toLowerCase()}`:i.substring(2).toLowerCase(),r=Rt(Nr(t),"bytes"),s=(e?t.substring(`${e}0x`.length):t).split("");for(let l=0;l<40;l+=2)r[l>>1]>>4>=8&&s[l]&&(s[l]=s[l].toUpperCase()),(r[l>>1]&15)>=8&&s[l+1]&&(s[l+1]=s[l+1].toUpperCase());let a=`0x${s.join("")}`;return rx.set(`${i}.${e}`,a),a}function bf(i,e){if(!At(i,{strict:!1}))throw new Dt({address:i});return Mn(i,e)}var rx,na=oe(()=>{"use strict";en();mi();Fr();ju();Pr();rx=new tn(8192)});function At(i,e){let{strict:t=!0}=e??{},r=`${i}.${t}`;if(nx.has(r))return nx.get(r);let s=(()=>QC.test(i)?i.toLowerCase()===i?!0:t?Mn(i)===i:!0:!1)();return nx.set(r,s),s}var QC,nx,Pr=oe(()=>{"use strict";ju();na();QC=/^0x[a-fA-F0-9]{40}$/,nx=new tn(8192)});function Oi(i){return typeof i[0]=="string"?ki(i):ZC(i)}function ZC(i){let e=0;for(let s of i)e+=s.length;let t=new Uint8Array(e),r=0;for(let s of i)t.set(s,r),r+=s.length;return t}function ki(i){return`0x${i.reduce((e,t)=>e+t.replace("0x",""),"")}`}var dr=oe(()=>{"use strict"});function Rn(i,e,t,{strict:r}={}){return Qt(i,{strict:!1})?ax(i,e,t,{strict:r}):sx(i,e,t,{strict:r})}function SS(i,e){if(typeof e=="number"&&e>0&&e>bt(i)-1)throw new Du({offset:e,position:"start",size:bt(i)})}function wS(i,e,t){if(typeof e=="number"&&typeof t=="number"&&bt(i)!==t-e)throw new Du({offset:t,position:"end",size:bt(i)})}function sx(i,e,t,{strict:r}={}){SS(i,e);let s=i.slice(e,t);return r&&wS(s,e,t),s}function ax(i,e,t,{strict:r}={}){SS(i,e);let s=`0x${i.replace("0x","").slice((e??0)*2,(t??i.length)*2)}`;return r&&wS(s,e,t),s}var sa=oe(()=>{"use strict";rf();Mr();Rr()});var ES,yf,ox=oe(()=>{"use strict";ES=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,yf=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/});function Ji(i,e){if(i.length!==e.length)throw new $d({expectedLength:i.length,givenLength:e.length});let t=XC({params:i,values:e}),r=cx(t);return r.length===0?"0x":r}function XC({params:i,values:e}){let t=[];for(let r=0;r<i.length;r++)t.push(lx({param:i[r],value:e[r]}));return t}function lx({param:i,value:e}){let t=_f(i.type);if(t){let[r,s]=t;return e2(e,{length:r,param:{...i,type:s}})}if(i.type==="tuple")return s2(e,{param:i});if(i.type==="address")return JC(e);if(i.type==="bool")return i2(e);if(i.type.startsWith("uint")||i.type.startsWith("int")){let r=i.type.startsWith("int"),[,,s="256"]=yf.exec(i.type)??[];return r2(e,{signed:r,size:Number(s)})}if(i.type.startsWith("bytes"))return t2(e,{param:i});if(i.type==="string")return n2(e);throw new Xd(i.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function cx(i){let e=0;for(let a=0;a<i.length;a++){let{dynamic:l,encoded:u}=i[a];l?e+=32:e+=bt(u)}let t=[],r=[],s=0;for(let a=0;a<i.length;a++){let{dynamic:l,encoded:u}=i[a];l?(t.push(Ae(e+s,{size:32})),r.push(u),s+=bt(u)):t.push(u)}return Oi([...t,...r])}function JC(i){if(!At(i))throw new Dt({address:i});return{dynamic:!1,encoded:Tn(i.toLowerCase())}}function e2(i,{length:e,param:t}){let r=e===null;if(!Array.isArray(i))throw new ef(i);if(!r&&i.length!==e)throw new Wd({expectedLength:e,givenLength:i.length,type:`${t.type}[${e}]`});let s=!1,a=[];for(let l=0;l<i.length;l++){let u=lx({param:t,value:i[l]});u.dynamic&&(s=!0),a.push(u)}if(r||s){let l=cx(a);if(r){let u=Ae(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Oi([u,l]):u}}if(s)return{dynamic:!0,encoded:l}}return{dynamic:!1,encoded:Oi(a.map(({encoded:l})=>l))}}function t2(i,{param:e}){let[,t]=e.type.split("bytes"),r=bt(i);if(!t){let s=i;return r%32!==0&&(s=Tn(s,{dir:"right",size:Math.ceil((i.length-2)/2/32)*32})),{dynamic:!0,encoded:Oi([Tn(Ae(r,{size:32})),s])}}if(r!==Number.parseInt(t))throw new Kd({expectedSize:Number.parseInt(t),value:i});return{dynamic:!1,encoded:Tn(i,{dir:"right"})}}function i2(i){if(typeof i!="boolean")throw new W(`Invalid boolean value: "${i}" (type: ${typeof i}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Tn(lf(i))}}function r2(i,{signed:e,size:t=256}){if(typeof t=="number"){let r=2n**(BigInt(t)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(i>r||i<s)throw new ao({max:r.toString(),min:s.toString(),signed:e,size:t/8,value:i.toString()})}return{dynamic:!1,encoded:Ae(i,{size:32,signed:e})}}function n2(i){let e=Dr(i),t=Math.ceil(bt(e)/32),r=[];for(let s=0;s<t;s++)r.push(Tn(Rn(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Oi([Tn(Ae(bt(e),{size:32})),...r])}}function s2(i,{param:e}){let t=!1,r=[];for(let s=0;s<e.components.length;s++){let a=e.components[s],l=Array.isArray(i)?s:a.name,u=lx({param:a,value:i[l]});r.push(u),u.dynamic&&(t=!0)}return{dynamic:t,encoded:t?cx(r):Oi(r.map(({encoded:s})=>s))}}function _f(i){let e=i.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}var cs=oe(()=>{"use strict";ii();en();nt();Fu();Pr();dr();nf();Rr();sa();We();ox()});var lo,xf=oe(()=>{"use strict";sa();ix();lo=i=>Rn(gf(i),0,4)});function rn(i){let{abi:e,args:t=[],name:r}=i,s=Qt(r,{strict:!1}),a=e.filter(u=>s?u.type==="function"?lo(u)===r:u.type==="event"?ls(u)===r:!1:"name"in u&&u.name===r);if(a.length===0)return;if(a.length===1)return a[0];let l;for(let u of a){if(!("inputs"in u))continue;if(!t||t.length===0){if(!u.inputs||u.inputs.length===0)return u;continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==t.length)continue;if(t.every((p,h)=>{let f="inputs"in u&&u.inputs[h];return f?ux(p,f):!1})){if(l&&"inputs"in l&&l.inputs){let p=LS(u.inputs,l.inputs,t);if(p)throw new Qd({abiItem:u,type:p[0]},{abiItem:l,type:p[1]})}l=u}}return l||a[0]}function ux(i,e){let t=typeof i,r=e.type;switch(r){case"address":return At(i,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,a)=>ux(Object.values(i)[a],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?t==="string"||i instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(i)&&i.every(s=>ux(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function LS(i,e,t){for(let r in i){let s=i[r],a=e[r];if(s.type==="tuple"&&a.type==="tuple"&&"components"in s&&"components"in a)return LS(s.components,a.components,t[r]);let l=[s.type,a.type];if((()=>l.includes("address")&&l.includes("bytes20")?!0:l.includes("address")&&l.includes("string")?At(t[r],{strict:!1}):l.includes("address")&&l.includes("bytes")?At(t[r],{strict:!1}):!1)())return l}}var co=oe(()=>{"use strict";ii();Mr();Pr();Hu();xf()});function ot(i){return typeof i=="string"?{address:i,type:"json-rpc"}:i}var ni=oe(()=>{"use strict"});function MS(i){let{abi:e,args:t,functionName:r}=i,s=e[0];if(r){let a=rn({abi:e,args:t,name:r});if(!a)throw new is(r,{docsPath:CS});s=a}if(s.type!=="function")throw new is(void 0,{docsPath:CS});return{abi:[s],functionName:lo(Ni(s))}}var CS,RS=oe(()=>{"use strict";ii();xf();ta();co();CS="/docs/contract/encodeFunctionData"});function Ft(i){let{args:e}=i,{abi:t,functionName:r}=(()=>i.abi.length===1&&i.functionName?.startsWith("0x")?i:MS(i))(),s=t[0],a=r,l="inputs"in s&&s.inputs?Ji(s.inputs,e??[]):void 0;return ki([a,l??"0x"])}var fr=oe(()=>{"use strict";dr();cs();RS()});var If,BS,DS,kf=oe(()=>{"use strict";If={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},BS={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},DS={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}});var Gu,uo,Sf,px=oe(()=>{"use strict";nt();Gu=class extends W{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},uo=class extends W{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},Sf=class extends W{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}});function po(i,{recursiveReadLimit:e=8192}={}){let t=Object.create(a2);return t.bytes=i,t.dataView=new DataView(i.buffer,i.byteOffset,i.byteLength),t.positionReadCount=new Map,t.recursiveReadLimit=e,t}var a2,wf=oe(()=>{"use strict";px();a2={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Sf({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(i){if(i<0||i>this.bytes.length-1)throw new uo({length:this.bytes.length,position:i})},decrementPosition(i){if(i<0)throw new Gu({offset:i});let e=this.position-i;this.assertPosition(e),this.position=e},getReadCount(i){return this.positionReadCount.get(i||this.position)||0},incrementPosition(i){if(i<0)throw new Gu({offset:i});let e=this.position+i;this.assertPosition(e),this.position=e},inspectByte(i){let e=i??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(i,e){let t=e??this.position;return this.assertPosition(t+i-1),this.bytes.subarray(t,t+i)},inspectUint8(i){let e=i??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(i){let e=i??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(i){let e=i??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(i){let e=i??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(i){this.assertPosition(this.position),this.bytes[this.position]=i,this.position++},pushBytes(i){this.assertPosition(this.position+i.length-1),this.bytes.set(i,this.position),this.position+=i.length},pushUint8(i){this.assertPosition(this.position),this.bytes[this.position]=i,this.position++},pushUint16(i){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,i),this.position+=2},pushUint24(i){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,i>>8),this.dataView.setUint8(this.position+2,i&255),this.position+=3},pushUint32(i){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,i),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let i=this.inspectByte();return this.position++,i},readBytes(i,e){this.assertReadLimit(),this._touch();let t=this.inspectBytes(i);return this.position+=e??i,t},readUint8(){this.assertReadLimit(),this._touch();let i=this.inspectUint8();return this.position+=1,i},readUint16(){this.assertReadLimit(),this._touch();let i=this.inspectUint16();return this.position+=2,i},readUint24(){this.assertReadLimit(),this._touch();let i=this.inspectUint24();return this.position+=3,i},readUint32(){this.assertReadLimit(),this._touch();let i=this.inspectUint32();return this.position+=4,i},get remaining(){return this.bytes.length-this.position},setPosition(i){let e=this.position;return this.assertPosition(i),this.position=i,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let i=this.getReadCount();this.positionReadCount.set(this.position,i+1),i>0&&this.recursiveReadCount++}}});function NS(i,e={}){typeof e.size<"u"&&Gi(i,{size:e.size});let t=pt(i,e);return Ot(t,e)}function OS(i,e={}){let t=i;if(typeof e.size<"u"&&(Gi(t,{size:e.size}),t=vi(t)),t.length>1||t[0]>1)throw new sf(t);return!!t[0]}function sn(i,e={}){typeof e.size<"u"&&Gi(i,{size:e.size});let t=pt(i,e);return ei(t,e)}function FS(i,e={}){let t=i;return typeof e.size<"u"&&(Gi(t,{size:e.size}),t=vi(t,{dir:"right"})),new TextDecoder().decode(t)}var PS=oe(()=>{"use strict";Fu();oo();Ii();We()});function aa(i,e){let t=typeof e=="string"?ri(e):e,r=po(t);if(bt(t)===0&&i.length>0)throw new mr;if(bt(e)&&bt(e)<32)throw new ro({data:typeof e=="string"?e:pt(e),params:i,size:bt(e)});let s=0,a=[];for(let l=0;l<i.length;++l){let u=i[l];r.setPosition(s);let[m,p]=mo(r,u,{staticPosition:0});s+=p,a.push(m)}return a}function mo(i,e,{staticPosition:t}){let r=_f(e.type);if(r){let[s,a]=r;return l2(i,{...e,type:a},{length:s,staticPosition:t})}if(e.type==="tuple")return m2(i,e,{staticPosition:t});if(e.type==="address")return o2(i);if(e.type==="bool")return c2(i);if(e.type.startsWith("bytes"))return u2(i,e,{staticPosition:t});if(e.type.startsWith("uint")||e.type.startsWith("int"))return p2(i,e);if(e.type==="string")return h2(i,{staticPosition:t});throw new Jd(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function o2(i){let e=i.readBytes(32);return[Mn(pt(sx(e,-20))),32]}function l2(i,e,{length:t,staticPosition:r}){if(!t){let l=sn(i.readBytes(mx)),u=r+l,m=u+US;i.setPosition(u);let p=sn(i.readBytes(US)),h=Vu(e),f=0,g=[];for(let b=0;b<p;++b){i.setPosition(m+(h?b*32:f));let[_,I]=mo(i,e,{staticPosition:m});f+=I,g.push(_)}return i.setPosition(r+32),[g,32]}if(Vu(e)){let l=sn(i.readBytes(mx)),u=r+l,m=[];for(let p=0;p<t;++p){i.setPosition(u+p*32);let[h]=mo(i,e,{staticPosition:u});m.push(h)}return i.setPosition(r+32),[m,32]}let s=0,a=[];for(let l=0;l<t;++l){let[u,m]=mo(i,e,{staticPosition:r+s});s+=m,a.push(u)}return[a,s]}function c2(i){return[OS(i.readBytes(32),{size:32}),32]}function u2(i,e,{staticPosition:t}){let[r,s]=e.type.split("bytes");if(!s){let l=sn(i.readBytes(32));i.setPosition(t+l);let u=sn(i.readBytes(32));if(u===0)return i.setPosition(t+32),["0x",32];let m=i.readBytes(u);return i.setPosition(t+32),[pt(m),32]}return[pt(i.readBytes(Number.parseInt(s),32)),32]}function p2(i,e){let t=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=i.readBytes(32);return[r>48?NS(s,{signed:t}):sn(s,{signed:t}),32]}function m2(i,e,{staticPosition:t}){let r=e.components.length===0||e.components.some(({name:l})=>!l),s=r?[]:{},a=0;if(Vu(e)){let l=sn(i.readBytes(mx)),u=t+l;for(let m=0;m<e.components.length;++m){let p=e.components[m];i.setPosition(u+a);let[h,f]=mo(i,p,{staticPosition:u});a+=f,s[r?m:p?.name]=h}return i.setPosition(t+32),[s,32]}for(let l=0;l<e.components.length;++l){let u=e.components[l],[m,p]=mo(i,u,{staticPosition:t});s[r?l:u?.name]=m,a+=p}return[s,a]}function h2(i,{staticPosition:e}){let t=sn(i.readBytes(32)),r=e+t;i.setPosition(r);let s=sn(i.readBytes(32));if(s===0)return i.setPosition(e+32),["",32];let a=i.readBytes(s,32),l=FS(vi(a));return i.setPosition(e+32),[l,32]}function Vu(i){let{type:e}=i;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return i.components?.some(Vu);let t=_f(i.type);return!!(t&&Vu({...i,type:t[1]}))}var US,mx,Ef=oe(()=>{"use strict";ii();na();wf();Rr();sa();oo();PS();mi();We();cs();US=32,mx=32});function Lf(i){let{abi:e,data:t}=i,r=Rn(t,0,4);if(r==="0x")throw new mr;let a=[...e||[],BS,DS].find(l=>l.type==="error"&&r===lo(Ni(l)));if(!a)throw new no(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:a,args:"inputs"in a&&a.inputs&&a.inputs.length>0?aa(a.inputs,Rn(t,4)):void 0,errorName:a.name}}var hx=oe(()=>{"use strict";kf();ii();sa();xf();Ef();ta()});var mt,Fi=oe(()=>{"use strict";mt=(i,e,t)=>JSON.stringify(i,(r,s)=>{let a=typeof s=="bigint"?s.toString():s;return typeof e=="function"?e(r,a):a},t)});function dx({abiItem:i,args:e,includeFunctionName:t=!0,includeName:r=!1}){if("name"in i&&"inputs"in i&&i.inputs)return`${t?i.name:""}(${i.inputs.map((s,a)=>`${r&&s.name?`${s.name}: `:""}${typeof e[a]=="object"?mt(e[a]):e[a]}`).join(", ")})`}var zS=oe(()=>{"use strict";Fi()});var HS,jS,fx=oe(()=>{"use strict";HS={gwei:9,wei:18},jS={ether:-9,wei:9}});function ps(i,e){let t=i.toString(),r=t.startsWith("-");r&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,a]=[t.slice(0,t.length-e),t.slice(t.length-e)];return a=a.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${a?`.${a}`:""}`}var Tf=oe(()=>{"use strict"});function ho(i,e="wei"){return ps(i,HS[e])}var Af=oe(()=>{"use strict";fx();Tf()});function si(i,e="wei"){return ps(i,jS[e])}var fo=oe(()=>{"use strict";fx();Tf()});function GS(i){return i.reduce((e,{slot:t,value:r})=>`${e}        ${t}: ${r}
`,"")}function VS(i){return i.reduce((e,{address:t,...r})=>{let s=`${e}    ${t}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=GS(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=GS(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}var Cf,Mf,gx=oe(()=>{"use strict";nt();Cf=class extends W{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}},Mf=class extends W{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}});function oa(i){let e=Object.entries(i).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),t=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(t+1)}  ${s}`).join(`
`)}var Rf,Bf,Df,Nf,Of,go,bo,Ff,Ur=oe(()=>{"use strict";Af();fo();nt();Rf=class extends W{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}},Bf=class extends W{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}},Df=class extends W{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",oa(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}},Nf=class extends W{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}},Of=class extends W{constructor(e,{account:t,docsPath:r,chain:s,data:a,gas:l,gasPrice:u,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:h,to:f,value:g}){let b=oa({chain:s&&`${s?.name} (id: ${s?.id})`,from:t?.address,to:f,value:typeof g<"u"&&`${ho(g)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:a,gas:l,gasPrice:typeof u<"u"&&`${si(u)} gwei`,maxFeePerGas:typeof m<"u"&&`${si(m)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${si(p)} gwei`,nonce:h});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",b].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},go=class extends W{constructor({blockHash:e,blockNumber:t,blockTag:r,hash:s,index:a}){let l="Transaction";r&&a!==void 0&&(l=`Transaction at block time "${r}" at index "${a}"`),e&&a!==void 0&&(l=`Transaction at block hash "${e}" at index "${a}"`),t&&a!==void 0&&(l=`Transaction at block number "${t}" at index "${a}"`),s&&(l=`Transaction with hash "${s}"`),super(`${l} could not be found.`,{name:"TransactionNotFoundError"})}},bo=class extends W{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}},Ff=class extends W{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}});var WS,la,Pf=oe(()=>{"use strict";WS=i=>i,la=i=>i});var yo,Uf,ca,zf,Hf,an,ms=oe(()=>{"use strict";ni();kf();hx();ta();zS();co();Af();fo();ii();nt();gx();Ur();Pf();yo=class extends W{constructor(e,{account:t,docsPath:r,chain:s,data:a,gas:l,gasPrice:u,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:h,to:f,value:g,stateOverride:b}){let _=t?ot(t):void 0,I=oa({from:_?.address,to:f,value:typeof g<"u"&&`${ho(g)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:a,gas:l,gasPrice:typeof u<"u"&&`${si(u)} gwei`,maxFeePerGas:typeof m<"u"&&`${si(m)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${si(p)} gwei`,nonce:h});b&&(I+=`
${VS(b)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",I].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},Uf=class extends W{constructor(e,{abi:t,args:r,contractAddress:s,docsPath:a,functionName:l,sender:u}){let m=rn({abi:t,args:r,name:l}),p=m?dx({abiItem:m,args:r,includeFunctionName:!1,includeName:!1}):void 0,h=m?Ni(m,{includeName:!0}):void 0,f=oa({address:s&&WS(s),function:h,args:p&&p!=="()"&&`${[...Array(l?.length??0).keys()].map(()=>" ").join("")}${p}`,sender:u});super(e.shortMessage||`An unknown error occurred while executing the contract function "${l}".`,{cause:e,docsPath:a,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],f&&"Contract Call:",f].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=l,this.sender=u}},ca=class extends W{constructor({abi:e,data:t,functionName:r,message:s}){let a,l,u,m;if(t&&t!=="0x")try{l=Lf({abi:e,data:t});let{abiItem:h,errorName:f,args:g}=l;if(f==="Error")m=g[0];else if(f==="Panic"){let[b]=g;m=If[b]}else{let b=h?Ni(h,{includeName:!0}):void 0,_=h&&g?dx({abiItem:h,args:g,includeFunctionName:!1,includeName:!1}):void 0;u=[b?`Error: ${b}`:"",_&&_!=="()"?`       ${[...Array(f?.length??0).keys()].map(()=>" ").join("")}${_}`:""]}}catch(h){a=h}else s&&(m=s);let p;a instanceof no&&(p=a.signature,u=[`Unable to decode signature "${p}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${p}.`]),super(m&&m!=="execution reverted"||p?[`The contract function "${r}" reverted with the following ${p?"signature":"reason"}:`,m||p].join(`
`):`The contract function "${r}" reverted.`,{cause:a,metaMessages:u,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=l,this.raw=t,this.reason=m,this.signature=p}},zf=class extends W{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}},Hf=class extends W{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}},an=class extends W{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}});var gr,hs,Wu,ua=oe(()=>{"use strict";Fi();nt();Pf();gr=class extends W{constructor({body:e,cause:t,details:r,headers:s,status:a,url:l}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[a&&`Status: ${a}`,`URL: ${la(l)}`,e&&`Request body: ${mt(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=a,this.url=l}},hs=class extends W{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${la(r)}`,`Request body: ${mt(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}},Wu=class extends W{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${la(t)}`,`Request body: ${mt(e)}`],name:"TimeoutError"})}}});var d2,Si,ds,_o,xo,vo,Io,Bn,on,ko,So,wo,fs,pa,Eo,ma,Lo,To,Ao,Co,Mo,jf,Ku=oe(()=>{"use strict";nt();ua();d2=-1,Si=class extends W{constructor(e,{code:t,docsPath:r,metaMessages:s,name:a,shortMessage:l}){super(l,{cause:e,docsPath:r,metaMessages:s||e?.metaMessages,name:a||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=a||e.name,this.code=e instanceof hs?e.code:t??d2}},ds=class extends Si{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}},_o=class i extends Si{constructor(e){super(e,{code:i.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(_o,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});xo=class i extends Si{constructor(e){super(e,{code:i.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(xo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});vo=class i extends Si{constructor(e,{method:t}={}){super(e,{code:i.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}};Object.defineProperty(vo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});Io=class i extends Si{constructor(e){super(e,{code:i.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Io,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});Bn=class i extends Si{constructor(e){super(e,{code:i.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(Bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});on=class i extends Si{constructor(e){super(e,{code:i.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(on,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});ko=class i extends Si{constructor(e){super(e,{code:i.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(ko,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});So=class i extends Si{constructor(e){super(e,{code:i.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(So,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});wo=class i extends Si{constructor(e){super(e,{code:i.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(wo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});fs=class i extends Si{constructor(e,{method:t}={}){super(e,{code:i.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}};Object.defineProperty(fs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});pa=class i extends Si{constructor(e){super(e,{code:i.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(pa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});Eo=class i extends Si{constructor(e){super(e,{code:i.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(Eo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});ma=class i extends ds{constructor(e){super(e,{code:i.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(ma,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});Lo=class i extends ds{constructor(e){super(e,{code:i.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(Lo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});To=class i extends ds{constructor(e,{method:t}={}){super(e,{code:i.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}};Object.defineProperty(To,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});Ao=class i extends ds{constructor(e){super(e,{code:i.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(Ao,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});Co=class i extends ds{constructor(e){super(e,{code:i.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(Co,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});Mo=class i extends ds{constructor(e){super(e,{code:i.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(Mo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});jf=class extends Si{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}});function g2(i,e,t,r){if(typeof i.setBigUint64=="function")return i.setBigUint64(e,t,r);let s=BigInt(32),a=BigInt(4294967295),l=Number(t>>s&a),u=Number(t&a),m=r?4:0,p=r?0:4;i.setUint32(e+m,l,r),i.setUint32(e+p,u,r)}function $S(i,e,t){return i&e^~i&t}function YS(i,e,t){return i&e^i&t^e&t}var Gf,qS=oe(()=>{"use strict";Uu();ra();Gf=class extends ss{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pf(this.buffer)}update(e){Cn(this);let{view:t,buffer:r,blockLen:s}=this;e=as(e);let a=e.length;for(let l=0;l<a;){let u=Math.min(s-this.pos,a-l);if(u===s){let m=pf(e);for(;s<=a-l;l+=s)this.process(m,l);continue}r.set(e.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Cn(this),cf(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:l}=this;t[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(r,0),l=0);for(let f=l;f<s;f++)t[f]=0;g2(r,s-8,BigInt(this.length*8),a),this.process(r,0);let u=pf(e),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=m/4,h=this.get();if(p>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<p;f++)u.setUint32(4*f,h[f],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:s,finished:a,destroyed:l,pos:u}=this;return e.length=s,e.pos=u,e.finished=a,e.destroyed=l,s%t&&e.buffer.set(r),e}}});var b2,gs,bs,bx,ha,yx=oe(()=>{"use strict";qS();ra();b2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bs=new Uint32Array(64),bx=class extends Gf{constructor(){super(64,32,8,!1),this.A=gs[0]|0,this.B=gs[1]|0,this.C=gs[2]|0,this.D=gs[3]|0,this.E=gs[4]|0,this.F=gs[5]|0,this.G=gs[6]|0,this.H=gs[7]|0}get(){let{A:e,B:t,C:r,D:s,E:a,F:l,G:u,H:m}=this;return[e,t,r,s,a,l,u,m]}set(e,t,r,s,a,l,u,m){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=a|0,this.F=l|0,this.G=u|0,this.H=m|0}process(e,t){for(let f=0;f<16;f++,t+=4)bs[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){let g=bs[f-15],b=bs[f-2],_=Or(g,7)^Or(g,18)^g>>>3,I=Or(b,17)^Or(b,19)^b>>>10;bs[f]=I+bs[f-7]+_+bs[f-16]|0}let{A:r,B:s,C:a,D:l,E:u,F:m,G:p,H:h}=this;for(let f=0;f<64;f++){let g=Or(u,6)^Or(u,11)^Or(u,25),b=h+g+$S(u,m,p)+b2[f]+bs[f]|0,I=(Or(r,2)^Or(r,13)^Or(r,22))+YS(r,s,a)|0;h=p,p=m,m=u,u=l+b|0,l=a,a=s,s=r,r=b+I|0}r=r+this.A|0,s=s+this.B|0,a=a+this.C|0,l=l+this.D|0,u=u+this.E|0,m=m+this.F|0,p=p+this.G|0,h=h+this.H|0,this.set(r,s,a,l,u,m,p,h)}roundClean(){bs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},ha=mf(()=>new bx)});var Vf,_x,QS=oe(()=>{"use strict";Uu();ra();Vf=class extends ss{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,eS(e);let r=as(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,a=new Uint8Array(s);a.set(r.length>s?e.create().update(r).digest():r);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=e.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),a.fill(0)}update(e){return Cn(this),this.iHash.update(e),this}digestInto(e){Cn(this),ns(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:s,destroyed:a,blockLen:l,outputLen:u}=this;return e=e,e.finished=s,e.destroyed=a,e.blockLen=l,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},_x=(i,e,t)=>new Vf(i,e).update(t).digest();_x.create=(i,e)=>new Vf(i,e)});var wx={};M1(wx,{aInRange:()=>ln,abool:()=>da,abytes:()=>br,bitGet:()=>I2,bitLen:()=>kx,bitMask:()=>Yu,bitSet:()=>k2,bytesToHex:()=>fa,bytesToNumberBE:()=>Vi,bytesToNumberLE:()=>$f,concatBytes:()=>wi,createHmacDrbg:()=>Sx,ensureBytes:()=>ai,equalBytes:()=>v2,hexToBytes:()=>ba,hexToNumber:()=>Ix,inRange:()=>_s,isBytes:()=>ys,memoized:()=>qf,notImplemented:()=>w2,numberToBytesBE:()=>zr,numberToBytesLE:()=>Yf,numberToHexUnpadded:()=>ga,numberToVarBytesBE:()=>x2,utf8ToBytes:()=>$u,validateObject:()=>cn});function ys(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function br(i){if(!ys(i))throw new Error("Uint8Array expected")}function da(i,e){if(typeof e!="boolean")throw new Error(i+" boolean expected, got "+e)}function fa(i){br(i);let e="";for(let t=0;t<i.length;t++)e+=_2[i[t]];return e}function ga(i){let e=i.toString(16);return e.length&1?"0"+e:e}function Ix(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);return i===""?Wf:BigInt("0x"+i)}function ZS(i){if(i>=Dn._0&&i<=Dn._9)return i-Dn._0;if(i>=Dn.A&&i<=Dn.F)return i-(Dn.A-10);if(i>=Dn.a&&i<=Dn.f)return i-(Dn.a-10)}function ba(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);let e=i.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(t);for(let s=0,a=0;s<t;s++,a+=2){let l=ZS(i.charCodeAt(a)),u=ZS(i.charCodeAt(a+1));if(l===void 0||u===void 0){let m=i[a]+i[a+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+a)}r[s]=l*16+u}return r}function Vi(i){return Ix(fa(i))}function $f(i){return br(i),Ix(fa(Uint8Array.from(i).reverse()))}function zr(i,e){return ba(i.toString(16).padStart(e*2,"0"))}function Yf(i,e){return zr(i,e).reverse()}function x2(i){return ba(ga(i))}function ai(i,e,t){let r;if(typeof e=="string")try{r=ba(e)}catch(a){throw new Error(i+" must be hex string or Uint8Array, cause: "+a)}else if(ys(e))r=Uint8Array.from(e);else throw new Error(i+" must be hex string or Uint8Array");let s=r.length;if(typeof t=="number"&&s!==t)throw new Error(i+" of length "+t+" expected, got "+s);return r}function wi(...i){let e=0;for(let r=0;r<i.length;r++){let s=i[r];br(s),e+=s.length}let t=new Uint8Array(e);for(let r=0,s=0;r<i.length;r++){let a=i[r];t.set(a,s),s+=a.length}return t}function v2(i,e){if(i.length!==e.length)return!1;let t=0;for(let r=0;r<i.length;r++)t|=i[r]^e[r];return t===0}function $u(i){if(typeof i!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(i))}function _s(i,e,t){return xx(i)&&xx(e)&&xx(t)&&e<=i&&i<t}function ln(i,e,t,r){if(!_s(e,t,r))throw new Error("expected valid "+i+": "+t+" <= n < "+r+", got "+e)}function kx(i){let e;for(e=0;i>Wf;i>>=Kf,e+=1);return e}function I2(i,e){return i>>BigInt(e)&Kf}function k2(i,e,t){return i|(t?Kf:Wf)<<BigInt(e)}function Sx(i,e,t){if(typeof i!="number"||i<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=vx(i),s=vx(i),a=0,l=()=>{r.fill(1),s.fill(0),a=0},u=(...f)=>t(s,r,...f),m=(f=vx())=>{s=u(XS([0]),f),r=u(),f.length!==0&&(s=u(XS([1]),f),r=u())},p=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0,g=[];for(;f<e;){r=u();let b=r.slice();g.push(b),f+=r.length}return wi(...g)};return(f,g)=>{l(),m(f);let b;for(;!(b=g(p()));)m();return l(),b}}function cn(i,e,t={}){let r=(s,a,l)=>{let u=S2[a];if(typeof u!="function")throw new Error("invalid validator function");let m=i[s];if(!(l&&m===void 0)&&!u(m,i))throw new Error("param "+String(s)+" is invalid. Expected "+a+", got "+m)};for(let[s,a]of Object.entries(e))r(s,a,!1);for(let[s,a]of Object.entries(t))r(s,a,!0);return i}function qf(i){let e=new WeakMap;return(t,...r)=>{let s=e.get(t);if(s!==void 0)return s;let a=i(t,...r);return e.set(t,a),a}}var Wf,Kf,y2,_2,Dn,xx,Yu,vx,XS,S2,w2,ya=oe(()=>{"use strict";Wf=BigInt(0),Kf=BigInt(1),y2=BigInt(2);_2=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));Dn={_0:48,_9:57,A:65,F:70,a:97,f:102};xx=i=>typeof i=="bigint"&&Wf<=i;Yu=i=>(y2<<BigInt(i-1))-Kf,vx=i=>new Uint8Array(i),XS=i=>Uint8Array.from(i);S2={bigint:i=>typeof i=="bigint",function:i=>typeof i=="function",boolean:i=>typeof i=="boolean",string:i=>typeof i=="string",stringOrUint8Array:i=>typeof i=="string"||ys(i),isSafeInteger:i=>Number.isSafeInteger(i),array:i=>Array.isArray(i),field:(i,e)=>e.Fp.isValid(i),hash:i=>typeof i=="function"&&Number.isSafeInteger(i.outputLen)};w2=()=>{throw new Error("not implemented")}});function Zt(i,e){let t=i%e;return t>=oi?t:e+t}function A2(i,e,t){if(e<oi)throw new Error("invalid exponent, negatives unsupported");if(t<=oi)throw new Error("invalid modulus");if(t===Ut)return oi;let r=Ut;for(;e>oi;)e&Ut&&(r=r*i%t),i=i*i%t,e>>=Ut;return r}function tr(i,e,t){let r=i;for(;e-- >oi;)r*=r,r%=t;return r}function Qf(i,e){if(i===oi)throw new Error("invert: expected non-zero number");if(e<=oi)throw new Error("invert: expected positive modulus, got "+e);let t=Zt(i,e),r=e,s=oi,a=Ut,l=Ut,u=oi;for(;t!==oi;){let p=r/t,h=r%t,f=s-l*p,g=a-u*p;r=t,t=h,s=l,a=u,l=f,u=g}if(r!==Ut)throw new Error("invert: does not exist");return Zt(s,e)}function C2(i){let e=(i-Ut)/_a,t,r,s;for(t=i-Ut,r=0;t%_a===oi;t/=_a,r++);for(s=_a;s<i&&A2(s,e,i)!==i-Ut;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){let l=(i+Ut)/Ex;return function(m,p){let h=m.pow(p,l);if(!m.eql(m.sqr(h),p))throw new Error("Cannot find square root");return h}}let a=(t+Ut)/_a;return function(u,m){if(u.pow(m,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let p=r,h=u.pow(u.mul(u.ONE,s),t),f=u.pow(m,a),g=u.pow(m,t);for(;!u.eql(g,u.ONE);){if(u.eql(g,u.ZERO))return u.ZERO;let b=1;for(let I=u.sqr(g);b<p&&!u.eql(I,u.ONE);b++)I=u.sqr(I);let _=u.pow(h,Ut<<BigInt(p-b-1));h=u.sqr(_),f=u.mul(f,_),g=u.mul(g,h),p=b}return f}}function M2(i){if(i%Ex===E2){let e=(i+Ut)/Ex;return function(r,s){let a=r.pow(s,e);if(!r.eql(r.sqr(a),s))throw new Error("Cannot find square root");return a}}if(i%ew===JS){let e=(i-JS)/ew;return function(r,s){let a=r.mul(s,_a),l=r.pow(a,e),u=r.mul(s,l),m=r.mul(r.mul(u,_a),l),p=r.mul(u,r.sub(m,r.ONE));if(!r.eql(r.sqr(p),s))throw new Error("Cannot find square root");return p}}return i%T2,C2(i)}function Zf(i){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=R2.reduce((r,s)=>(r[s]="function",r),e);return cn(i,t)}function B2(i,e,t){if(t<oi)throw new Error("invalid exponent, negatives unsupported");if(t===oi)return i.ONE;if(t===Ut)return e;let r=i.ONE,s=e;for(;t>oi;)t&Ut&&(r=i.mul(r,s)),s=i.sqr(s),t>>=Ut;return r}function D2(i,e){let t=new Array(e.length),r=e.reduce((a,l,u)=>i.is0(l)?a:(t[u]=a,i.mul(a,l)),i.ONE),s=i.inv(r);return e.reduceRight((a,l,u)=>i.is0(l)?a:(t[u]=i.mul(a,t[u]),i.mul(a,l)),s),t}function Lx(i,e){let t=e!==void 0?e:i.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Xf(i,e,t=!1,r={}){if(i<=oi)throw new Error("invalid field: expected ORDER > 0, got "+i);let{nBitLength:s,nByteLength:a}=Lx(i,e);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l,u=Object.freeze({ORDER:i,isLE:t,BITS:s,BYTES:a,MASK:Yu(s),ZERO:oi,ONE:Ut,create:m=>Zt(m,i),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return oi<=m&&m<i},is0:m=>m===oi,isOdd:m=>(m&Ut)===Ut,neg:m=>Zt(-m,i),eql:(m,p)=>m===p,sqr:m=>Zt(m*m,i),add:(m,p)=>Zt(m+p,i),sub:(m,p)=>Zt(m-p,i),mul:(m,p)=>Zt(m*p,i),pow:(m,p)=>B2(u,m,p),div:(m,p)=>Zt(m*Qf(p,i),i),sqrN:m=>m*m,addN:(m,p)=>m+p,subN:(m,p)=>m-p,mulN:(m,p)=>m*p,inv:m=>Qf(m,i),sqrt:r.sqrt||(m=>(l||(l=M2(i)),l(u,m))),invertBatch:m=>D2(u,m),cmov:(m,p,h)=>h?p:m,toBytes:m=>t?Yf(m,a):zr(m,a),fromBytes:m=>{if(m.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+m.length);return t?$f(m):Vi(m)}});return Object.freeze(u)}function tw(i){if(typeof i!="bigint")throw new Error("field order must be bigint");let e=i.toString(2).length;return Math.ceil(e/8)}function Tx(i){let e=tw(i);return e+Math.ceil(e/2)}function iw(i,e,t=!1){let r=i.length,s=tw(e),a=Tx(e);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);let l=t?$f(i):Vi(i),u=Zt(l,e-Ut)+Ut;return t?Yf(u,s):zr(u,s)}var oi,Ut,_a,E2,Ex,JS,ew,L2,T2,R2,qu=oe(()=>{"use strict";ya();oi=BigInt(0),Ut=BigInt(1),_a=BigInt(2),E2=BigInt(3),Ex=BigInt(4),JS=BigInt(5),ew=BigInt(8),L2=BigInt(9),T2=BigInt(16);R2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function Ax(i,e){let t=e.negate();return i?t:e}function nw(i,e){if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+i)}function Cx(i,e){nw(i,e);let t=Math.ceil(e/i)+1,r=2**(i-1);return{windows:t,windowSize:r}}function N2(i,e){if(!Array.isArray(i))throw new Error("array expected");i.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function O2(i,e){if(!Array.isArray(i))throw new Error("array of scalars expected");i.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}function Rx(i){return sw.get(i)||1}function aw(i,e){return{constTimeNegate:Ax,hasPrecomputes(t){return Rx(t)!==1},unsafeLadder(t,r,s=i.ZERO){let a=t;for(;r>rw;)r&Jf&&(s=s.add(a)),a=a.double(),r>>=Jf;return s},precomputeWindow(t,r){let{windows:s,windowSize:a}=Cx(r,e),l=[],u=t,m=u;for(let p=0;p<s;p++){m=u,l.push(m);for(let h=1;h<a;h++)m=m.add(u),l.push(m);u=m.double()}return l},wNAF(t,r,s){let{windows:a,windowSize:l}=Cx(t,e),u=i.ZERO,m=i.BASE,p=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let g=0;g<a;g++){let b=g*l,_=Number(s&p);s>>=f,_>l&&(_-=h,s+=Jf);let I=b,x=b+Math.abs(_)-1,L=g%2!==0,E=_<0;_===0?m=m.add(Ax(L,r[I])):u=u.add(Ax(E,r[x]))}return{p:u,f:m}},wNAFUnsafe(t,r,s,a=i.ZERO){let{windows:l,windowSize:u}=Cx(t,e),m=BigInt(2**t-1),p=2**t,h=BigInt(t);for(let f=0;f<l;f++){let g=f*u;if(s===rw)break;let b=Number(s&m);if(s>>=h,b>u&&(b-=p,s+=Jf),b===0)continue;let _=r[g+Math.abs(b)-1];b<0&&(_=_.negate()),a=a.add(_)}return a},getPrecomputes(t,r,s){let a=Mx.get(r);return a||(a=this.precomputeWindow(r,t),t!==1&&Mx.set(r,s(a))),a},wNAFCached(t,r,s){let a=Rx(t);return this.wNAF(a,this.getPrecomputes(a,t,s),r)},wNAFCachedUnsafe(t,r,s,a){let l=Rx(t);return l===1?this.unsafeLadder(t,r,a):this.wNAFUnsafe(l,this.getPrecomputes(l,t,s),r,a)},setWindowSize(t,r){nw(r,e),sw.set(t,r),Mx.delete(t)}}}function ow(i,e,t,r){if(N2(t,i),O2(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");let s=i.ZERO,a=kx(BigInt(t.length)),l=a>12?a-3:a>4?a-2:a?2:1,u=(1<<l)-1,m=new Array(u+1).fill(s),p=Math.floor((e.BITS-1)/l)*l,h=s;for(let f=p;f>=0;f-=l){m.fill(s);for(let b=0;b<r.length;b++){let _=r[b],I=Number(_>>BigInt(f)&BigInt(u));m[I]=m[I].add(t[b])}let g=s;for(let b=m.length-1,_=s;b>0;b--)_=_.add(m[b]),g=g.add(_);if(h=h.add(g),f!==0)for(let b=0;b<l;b++)h=h.double()}return h}function Bx(i){return Zf(i.Fp),cn(i,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Lx(i.n,i.nBitLength),...i,p:i.Fp.ORDER})}var rw,Jf,Mx,sw,lw=oe(()=>{"use strict";qu();ya();rw=BigInt(0),Jf=BigInt(1);Mx=new WeakMap,sw=new WeakMap});function cw(i){i.lowS!==void 0&&da("lowS",i.lowS),i.prehash!==void 0&&da("prehash",i.prehash)}function F2(i){let e=Bx(i);cn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}function z2(i){let e=F2(i),{Fp:t}=e,r=Xf(e.n,e.nBitLength),s=e.toBytes||((I,x,L)=>{let E=x.toAffine();return wi(Uint8Array.from([4]),t.toBytes(E.x),t.toBytes(E.y))}),a=e.fromBytes||(I=>{let x=I.subarray(1),L=t.fromBytes(x.subarray(0,t.BYTES)),E=t.fromBytes(x.subarray(t.BYTES,2*t.BYTES));return{x:L,y:E}});function l(I){let{a:x,b:L}=e,E=t.sqr(I),T=t.mul(E,I);return t.add(t.add(T,t.mul(I,x)),L)}if(!t.eql(t.sqr(e.Gy),l(e.Gx)))throw new Error("bad generator point: equation left != right");function u(I){return _s(I,Ct,e.n)}function m(I){let{allowedPrivateKeyLengths:x,nByteLength:L,wrapPrivateKey:E,n:T}=e;if(x&&typeof I!="bigint"){if(ys(I)&&(I=fa(I)),typeof I!="string"||!x.includes(I.length))throw new Error("invalid private key");I=I.padStart(L*2,"0")}let R;try{R=typeof I=="bigint"?I:Vi(ai("private key",I,L))}catch{throw new Error("invalid private key, expected hex or "+L+" bytes, got "+typeof I)}return E&&(R=Zt(R,T)),ln("private key",R,Ct,T),R}function p(I){if(!(I instanceof g))throw new Error("ProjectivePoint expected")}let h=qf((I,x)=>{let{px:L,py:E,pz:T}=I;if(t.eql(T,t.ONE))return{x:L,y:E};let R=I.is0();x==null&&(x=R?t.ONE:t.inv(T));let H=t.mul(L,x),F=t.mul(E,x),z=t.mul(T,x);if(R)return{x:t.ZERO,y:t.ZERO};if(!t.eql(z,t.ONE))throw new Error("invZ was invalid");return{x:H,y:F}}),f=qf(I=>{if(I.is0()){if(e.allowInfinityPoint&&!t.is0(I.py))return;throw new Error("bad point: ZERO")}let{x,y:L}=I.toAffine();if(!t.isValid(x)||!t.isValid(L))throw new Error("bad point: x or y not FE");let E=t.sqr(L),T=l(x);if(!t.eql(E,T))throw new Error("bad point: equation left != right");if(!I.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(x,L,E){if(this.px=x,this.py=L,this.pz=E,x==null||!t.isValid(x))throw new Error("x required");if(L==null||!t.isValid(L))throw new Error("y required");if(E==null||!t.isValid(E))throw new Error("z required");Object.freeze(this)}static fromAffine(x){let{x:L,y:E}=x||{};if(!x||!t.isValid(L)||!t.isValid(E))throw new Error("invalid affine point");if(x instanceof g)throw new Error("projective point not allowed");let T=R=>t.eql(R,t.ZERO);return T(L)&&T(E)?g.ZERO:new g(L,E,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){let L=t.invertBatch(x.map(E=>E.pz));return x.map((E,T)=>E.toAffine(L[T])).map(g.fromAffine)}static fromHex(x){let L=g.fromAffine(a(ai("pointHex",x)));return L.assertValidity(),L}static fromPrivateKey(x){return g.BASE.multiply(m(x))}static msm(x,L){return ow(g,r,x,L)}_setWindowSize(x){_.setWindowSize(this,x)}assertValidity(){f(this)}hasEvenY(){let{y:x}=this.toAffine();if(t.isOdd)return!t.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){p(x);let{px:L,py:E,pz:T}=this,{px:R,py:H,pz:F}=x,z=t.eql(t.mul(L,F),t.mul(R,T)),V=t.eql(t.mul(E,F),t.mul(H,T));return z&&V}negate(){return new g(this.px,t.neg(this.py),this.pz)}double(){let{a:x,b:L}=e,E=t.mul(L,eg),{px:T,py:R,pz:H}=this,F=t.ZERO,z=t.ZERO,V=t.ZERO,$=t.mul(T,T),Z=t.mul(R,R),re=t.mul(H,H),Me=t.mul(T,R);return Me=t.add(Me,Me),V=t.mul(T,H),V=t.add(V,V),F=t.mul(x,V),z=t.mul(E,re),z=t.add(F,z),F=t.sub(Z,z),z=t.add(Z,z),z=t.mul(F,z),F=t.mul(Me,F),V=t.mul(E,V),re=t.mul(x,re),Me=t.sub($,re),Me=t.mul(x,Me),Me=t.add(Me,V),V=t.add($,$),$=t.add(V,$),$=t.add($,re),$=t.mul($,Me),z=t.add(z,$),re=t.mul(R,H),re=t.add(re,re),$=t.mul(re,Me),F=t.sub(F,$),V=t.mul(re,Z),V=t.add(V,V),V=t.add(V,V),new g(F,z,V)}add(x){p(x);let{px:L,py:E,pz:T}=this,{px:R,py:H,pz:F}=x,z=t.ZERO,V=t.ZERO,$=t.ZERO,Z=e.a,re=t.mul(e.b,eg),Me=t.mul(L,R),rt=t.mul(E,H),be=t.mul(T,F),me=t.add(L,E),ve=t.add(R,H);me=t.mul(me,ve),ve=t.add(Me,rt),me=t.sub(me,ve),ve=t.add(L,T);let B=t.add(R,F);return ve=t.mul(ve,B),B=t.add(Me,be),ve=t.sub(ve,B),B=t.add(E,T),z=t.add(H,F),B=t.mul(B,z),z=t.add(rt,be),B=t.sub(B,z),$=t.mul(Z,ve),z=t.mul(re,be),$=t.add(z,$),z=t.sub(rt,$),$=t.add(rt,$),V=t.mul(z,$),rt=t.add(Me,Me),rt=t.add(rt,Me),be=t.mul(Z,be),ve=t.mul(re,ve),rt=t.add(rt,be),be=t.sub(Me,be),be=t.mul(Z,be),ve=t.add(ve,be),Me=t.mul(rt,ve),V=t.add(V,Me),Me=t.mul(B,ve),z=t.mul(me,z),z=t.sub(z,Me),Me=t.mul(me,rt),$=t.mul(B,$),$=t.add($,Me),new g(z,V,$)}subtract(x){return this.add(x.negate())}is0(){return this.equals(g.ZERO)}wNAF(x){return _.wNAFCached(this,x,g.normalizeZ)}multiplyUnsafe(x){let{endo:L,n:E}=e;ln("scalar",x,Hr,E);let T=g.ZERO;if(x===Hr)return T;if(this.is0()||x===Ct)return this;if(!L||_.hasPrecomputes(this))return _.wNAFCachedUnsafe(this,x,g.normalizeZ);let{k1neg:R,k1:H,k2neg:F,k2:z}=L.splitScalar(x),V=T,$=T,Z=this;for(;H>Hr||z>Hr;)H&Ct&&(V=V.add(Z)),z&Ct&&($=$.add(Z)),Z=Z.double(),H>>=Ct,z>>=Ct;return R&&(V=V.negate()),F&&($=$.negate()),$=new g(t.mul($.px,L.beta),$.py,$.pz),V.add($)}multiply(x){let{endo:L,n:E}=e;ln("scalar",x,Ct,E);let T,R;if(L){let{k1neg:H,k1:F,k2neg:z,k2:V}=L.splitScalar(x),{p:$,f:Z}=this.wNAF(F),{p:re,f:Me}=this.wNAF(V);$=_.constTimeNegate(H,$),re=_.constTimeNegate(z,re),re=new g(t.mul(re.px,L.beta),re.py,re.pz),T=$.add(re),R=Z.add(Me)}else{let{p:H,f:F}=this.wNAF(x);T=H,R=F}return g.normalizeZ([T,R])[0]}multiplyAndAddUnsafe(x,L,E){let T=g.BASE,R=(F,z)=>z===Hr||z===Ct||!F.equals(T)?F.multiplyUnsafe(z):F.multiply(z),H=R(this,L).add(R(x,E));return H.is0()?void 0:H}toAffine(x){return h(this,x)}isTorsionFree(){let{h:x,isTorsionFree:L}=e;if(x===Ct)return!0;if(L)return L(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:x,clearCofactor:L}=e;return x===Ct?this:L?L(g,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return da("isCompressed",x),this.assertValidity(),s(g,this,x)}toHex(x=!0){return da("isCompressed",x),fa(this.toRawBytes(x))}}g.BASE=new g(e.Gx,e.Gy,t.ONE),g.ZERO=new g(t.ZERO,t.ONE,t.ZERO);let b=e.nBitLength,_=aw(g,e.endo?Math.ceil(b/2):b);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:m,weierstrassEquation:l,isWithinCurveOrder:u}}function H2(i){let e=Bx(i);return cn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function pw(i){let e=H2(i),{Fp:t,n:r}=e,s=t.BYTES+1,a=2*t.BYTES+1;function l(be){return Zt(be,r)}function u(be){return Qf(be,r)}let{ProjectivePoint:m,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:f}=z2({...e,toBytes(be,me,ve){let B=me.toAffine(),Pe=t.toBytes(B.x),fe=wi;return da("isCompressed",ve),ve?fe(Uint8Array.from([me.hasEvenY()?2:3]),Pe):fe(Uint8Array.from([4]),Pe,t.toBytes(B.y))},fromBytes(be){let me=be.length,ve=be[0],B=be.subarray(1);if(me===s&&(ve===2||ve===3)){let Pe=Vi(B);if(!_s(Pe,Ct,t.ORDER))throw new Error("Point is not on curve");let fe=h(Pe),$e;try{$e=t.sqrt(fe)}catch(pi){let vt=pi instanceof Error?": "+pi.message:"";throw new Error("Point is not on curve"+vt)}let St=($e&Ct)===Ct;return(ve&1)===1!==St&&($e=t.neg($e)),{x:Pe,y:$e}}else if(me===a&&ve===4){let Pe=t.fromBytes(B.subarray(0,t.BYTES)),fe=t.fromBytes(B.subarray(t.BYTES,2*t.BYTES));return{x:Pe,y:fe}}else{let Pe=s,fe=a;throw new Error("invalid Point, expected length of "+Pe+", or uncompressed "+fe+", got "+me)}}}),g=be=>fa(zr(be,e.nByteLength));function b(be){let me=r>>Ct;return be>me}function _(be){return b(be)?l(-be):be}let I=(be,me,ve)=>Vi(be.slice(me,ve));class x{constructor(me,ve,B){this.r=me,this.s=ve,this.recovery=B,this.assertValidity()}static fromCompact(me){let ve=e.nByteLength;return me=ai("compactSignature",me,ve*2),new x(I(me,0,ve),I(me,ve,2*ve))}static fromDER(me){let{r:ve,s:B}=Nn.toSig(ai("DER",me));return new x(ve,B)}assertValidity(){ln("r",this.r,Ct,r),ln("s",this.s,Ct,r)}addRecoveryBit(me){return new x(this.r,this.s,me)}recoverPublicKey(me){let{r:ve,s:B,recovery:Pe}=this,fe=F(ai("msgHash",me));if(Pe==null||![0,1,2,3].includes(Pe))throw new Error("recovery id invalid");let $e=Pe===2||Pe===3?ve+e.n:ve;if($e>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let St=Pe&1?"03":"02",Yt=m.fromHex(St+g($e)),pi=u($e),vt=l(-fe*pi),Hi=l(B*pi),Di=m.BASE.multiplyAndAddUnsafe(Yt,vt,Hi);if(!Di)throw new Error("point at infinify");return Di.assertValidity(),Di}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return ba(this.toDERHex())}toDERHex(){return Nn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ba(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}let L={isValidPrivateKey(be){try{return p(be),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{let be=Tx(e.n);return iw(e.randomBytes(be),e.n)},precompute(be=8,me=m.BASE){return me._setWindowSize(be),me.multiply(BigInt(3)),me}};function E(be,me=!0){return m.fromPrivateKey(be).toRawBytes(me)}function T(be){let me=ys(be),ve=typeof be=="string",B=(me||ve)&&be.length;return me?B===s||B===a:ve?B===2*s||B===2*a:be instanceof m}function R(be,me,ve=!0){if(T(be))throw new Error("first arg must be private key");if(!T(me))throw new Error("second arg must be public key");return m.fromHex(me).multiply(p(be)).toRawBytes(ve)}let H=e.bits2int||function(be){if(be.length>8192)throw new Error("input is too large");let me=Vi(be),ve=be.length*8-e.nBitLength;return ve>0?me>>BigInt(ve):me},F=e.bits2int_modN||function(be){return l(H(be))},z=Yu(e.nBitLength);function V(be){return ln("num < 2^"+e.nBitLength,be,Hr,z),zr(be,e.nByteLength)}function $(be,me,ve=Z){if(["recovered","canonical"].some(cr=>cr in ve))throw new Error("sign() legacy options not supported");let{hash:B,randomBytes:Pe}=e,{lowS:fe,prehash:$e,extraEntropy:St}=ve;fe==null&&(fe=!0),be=ai("msgHash",be),cw(ve),$e&&(be=ai("prehashed msgHash",B(be)));let Yt=F(be),pi=p(me),vt=[V(pi),V(Yt)];if(St!=null&&St!==!1){let cr=St===!0?Pe(t.BYTES):St;vt.push(ai("extraEntropy",cr))}let Hi=wi(...vt),Di=Yt;function lr(cr){let Lr=H(cr);if(!f(Lr))return;let Xn=u(Lr),Tr=m.BASE.multiply(Lr).toAffine(),Zi=l(Tr.x);if(Zi===Hr)return;let Qr=l(Xn*l(Di+Zi*pi));if(Qr===Hr)return;let Ar=(Tr.x===Zi?0:2)|Number(Tr.y&Ct),Ys=Qr;return fe&&b(Qr)&&(Ys=_(Qr),Ar^=1),new x(Zi,Ys,Ar)}return{seed:Hi,k2sig:lr}}let Z={lowS:e.lowS,prehash:!1},re={lowS:e.lowS,prehash:!1};function Me(be,me,ve=Z){let{seed:B,k2sig:Pe}=$(be,me,ve),fe=e;return Sx(fe.hash.outputLen,fe.nByteLength,fe.hmac)(B,Pe)}m.BASE._setWindowSize(8);function rt(be,me,ve,B=re){let Pe=be;me=ai("msgHash",me),ve=ai("publicKey",ve);let{lowS:fe,prehash:$e,format:St}=B;if(cw(B),"strict"in B)throw new Error("options.strict was renamed to lowS");if(St!==void 0&&St!=="compact"&&St!=="der")throw new Error("format must be compact or der");let Yt=typeof Pe=="string"||ys(Pe),pi=!Yt&&!St&&typeof Pe=="object"&&Pe!==null&&typeof Pe.r=="bigint"&&typeof Pe.s=="bigint";if(!Yt&&!pi)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let vt,Hi;try{if(pi&&(vt=new x(Pe.r,Pe.s)),Yt){try{St!=="compact"&&(vt=x.fromDER(Pe))}catch(Ar){if(!(Ar instanceof Nn.Err))throw Ar}!vt&&St!=="der"&&(vt=x.fromCompact(Pe))}Hi=m.fromHex(ve)}catch{return!1}if(!vt||fe&&vt.hasHighS())return!1;$e&&(me=e.hash(me));let{r:Di,s:lr}=vt,cr=F(me),Lr=u(lr),Xn=l(cr*Lr),Tr=l(Di*Lr),Zi=m.BASE.multiplyAndAddUnsafe(Hi,Xn,Tr)?.toAffine();return Zi?l(Zi.x)===Di:!1}return{CURVE:e,getPublicKey:E,getSharedSecret:R,sign:Me,verify:rt,ProjectivePoint:m,Signature:x,utils:L}}function j2(i,e){let t=i.ORDER,r=Hr;for(let _=t-Ct;_%xs===Hr;_/=xs)r+=Ct;let s=r,a=xs<<s-Ct-Ct,l=a*xs,u=(t-Ct)/l,m=(u-Ct)/xs,p=l-Ct,h=a,f=i.pow(e,u),g=i.pow(e,(u+Ct)/xs),b=(_,I)=>{let x=f,L=i.pow(I,p),E=i.sqr(L);E=i.mul(E,I);let T=i.mul(_,E);T=i.pow(T,m),T=i.mul(T,L),L=i.mul(T,I),E=i.mul(T,_);let R=i.mul(E,L);T=i.pow(R,h);let H=i.eql(T,i.ONE);L=i.mul(E,g),T=i.mul(R,x),E=i.cmov(L,E,H),R=i.cmov(T,R,H);for(let F=s;F>Ct;F--){let z=F-xs;z=xs<<z-Ct;let V=i.pow(R,z),$=i.eql(V,i.ONE);L=i.mul(E,x),x=i.mul(x,x),V=i.mul(R,x),E=i.cmov(L,E,$),R=i.cmov(V,R,$)}return{isValid:H,value:E}};if(i.ORDER%uw===eg){let _=(i.ORDER-eg)/uw,I=i.sqrt(i.neg(e));b=(x,L)=>{let E=i.sqr(L),T=i.mul(x,L);E=i.mul(E,T);let R=i.pow(E,_);R=i.mul(R,T);let H=i.mul(R,I),F=i.mul(i.sqr(R),L),z=i.eql(F,x),V=i.cmov(H,R,z);return{isValid:z,value:V}}}return b}function mw(i,e){if(Zf(i),!i.isValid(e.A)||!i.isValid(e.B)||!i.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let t=j2(i,e.Z);if(!i.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,a,l,u,m,p,h,f;s=i.sqr(r),s=i.mul(s,e.Z),a=i.sqr(s),a=i.add(a,s),l=i.add(a,i.ONE),l=i.mul(l,e.B),u=i.cmov(e.Z,i.neg(a),!i.eql(a,i.ZERO)),u=i.mul(u,e.A),a=i.sqr(l),p=i.sqr(u),m=i.mul(p,e.A),a=i.add(a,m),a=i.mul(a,l),p=i.mul(p,u),m=i.mul(p,e.B),a=i.add(a,m),h=i.mul(s,l);let{isValid:g,value:b}=t(a,p);f=i.mul(s,r),f=i.mul(f,b),h=i.cmov(h,l,g),f=i.cmov(f,b,g);let _=i.isOdd(r)===i.isOdd(f);return f=i.cmov(i.neg(f),f,_),h=i.div(h,u),{x:h,y:f}}}var P2,U2,Dx,Nn,Hr,Ct,xs,eg,uw,Nx=oe(()=>{"use strict";lw();qu();ya();ya();({bytesToNumberBE:P2,hexToBytes:U2}=wx),Dx=class extends Error{constructor(e=""){super(e)}},Nn={Err:Dx,_tlv:{encode:(i,e)=>{let{Err:t}=Nn;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let r=e.length/2,s=ga(r);if(s.length/2&128)throw new t("tlv.encode: long form length too big");let a=r>127?ga(s.length/2|128):"";return ga(i)+a+s+e},decode(i,e){let{Err:t}=Nn,r=0;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==i)throw new t("tlv.decode: wrong tlv");let s=e[r++],a=!!(s&128),l=0;if(!a)l=s;else{let m=s&127;if(!m)throw new t("tlv.decode(long): indefinite length not supported");if(m>4)throw new t("tlv.decode(long): byte length is too big");let p=e.subarray(r,r+m);if(p.length!==m)throw new t("tlv.decode: length bytes not complete");if(p[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let h of p)l=l<<8|h;if(r+=m,l<128)throw new t("tlv.decode(long): not minimal encoding")}let u=e.subarray(r,r+l);if(u.length!==l)throw new t("tlv.decode: wrong value length");return{v:u,l:e.subarray(r+l)}}},_int:{encode(i){let{Err:e}=Nn;if(i<Hr)throw new e("integer: negative integers are not allowed");let t=ga(i);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(i){let{Err:e}=Nn;if(i[0]&128)throw new e("invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return P2(i)}},toSig(i){let{Err:e,_int:t,_tlv:r}=Nn,s=typeof i=="string"?U2(i):i;br(s);let{v:a,l}=r.decode(48,s);if(l.length)throw new e("invalid signature: left bytes after parsing");let{v:u,l:m}=r.decode(2,a),{v:p,l:h}=r.decode(2,m);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(u),s:t.decode(p)}},hexFromSig(i){let{_tlv:e,_int:t}=Nn,r=e.encode(2,t.encode(i.r)),s=e.encode(2,t.encode(i.s)),a=r+s;return e.encode(48,a)}},Hr=BigInt(0),Ct=BigInt(1),xs=BigInt(2),eg=BigInt(3),uw=BigInt(4)});function G2(i){return{hash:i,hmac:(e,...t)=>_x(i,e,uS(...t)),randomBytes:hf}}function hw(i,e){let t=r=>pw({...i,...G2(r)});return{...t(e),create:t}}var dw=oe(()=>{"use strict";QS();ra();Nx();});function vs(i,e){if(Qu(i),Qu(e),i<0||i>=1<<8*e)throw new Error("invalid I2OSP input: "+i);let t=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)t[r]=i&255,i>>>=8;return new Uint8Array(t)}function W2(i,e){let t=new Uint8Array(i.length);for(let r=0;r<i.length;r++)t[r]=i[r]^e[r];return t}function Qu(i){if(!Number.isSafeInteger(i))throw new Error("number expected")}function K2(i,e,t,r){br(i),br(e),Qu(t),e.length>255&&(e=r(wi($u("H2C-OVERSIZE-DST-"),e)));let{outputLen:s,blockLen:a}=r,l=Math.ceil(t/s);if(t>65535||l>255)throw new Error("expand_message_xmd: invalid lenInBytes");let u=wi(e,vs(e.length,1)),m=vs(0,a),p=vs(t,2),h=new Array(l),f=r(wi(m,i,p,vs(0,1),u));h[0]=r(wi(f,vs(1,1),u));for(let b=1;b<=l;b++){let _=[W2(f,h[b-1]),vs(b+1,1),u];h[b]=r(wi(..._))}return wi(...h).slice(0,t)}function $2(i,e,t,r,s){if(br(i),br(e),Qu(t),e.length>255){let a=Math.ceil(2*r/8);e=s.create({dkLen:a}).update($u("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:t}).update(i).update(vs(t,2)).update(e).update(vs(e.length,1)).digest()}function fw(i,e,t){cn(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:s,m:a,hash:l,expand:u,DST:m}=t;br(i),Qu(e);let p=typeof m=="string"?$u(m):m,h=r.toString(2).length,f=Math.ceil((h+s)/8),g=e*a*f,b;if(u==="xmd")b=K2(i,p,g,l);else if(u==="xof")b=$2(i,p,g,s,l);else if(u==="_internal_pass")b=i;else throw new Error('expand must be "xmd" or "xof"');let _=new Array(e);for(let I=0;I<e;I++){let x=new Array(a);for(let L=0;L<a;L++){let E=f*(L+I*a),T=b.subarray(E,E+f);x[L]=Zt(V2(T),r)}_[I]=x}return _}function gw(i,e){let t=e.map(r=>Array.from(r).reverse());return(r,s)=>{let[a,l,u,m]=t.map(p=>p.reduce((h,f)=>i.add(i.mul(h,r),f)));return r=i.div(a,l),s=i.mul(s,i.div(u,m)),{x:r,y:s}}}function bw(i,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){let a=fw(r,2,{...t,DST:t.DST,...s}),l=i.fromAffine(e(a[0])),u=i.fromAffine(e(a[1])),m=l.add(u).clearCofactor();return m.assertValidity(),m},encodeToCurve(r,s){let a=fw(r,1,{...t,DST:t.encodeDST,...s}),l=i.fromAffine(e(a[0])).clearCofactor();return l.assertValidity(),l},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let a of r)if(typeof a!="bigint")throw new Error("mapToCurve: expected array of bigints");let s=i.fromAffine(e(r)).clearCofactor();return s.assertValidity(),s}}}var V2,yw=oe(()=>{"use strict";qu();ya();V2=Vi});var Lw={};M1(Lw,{encodeToCurve:()=>tM,hashToCurve:()=>eM,schnorr:()=>Z2,secp256k1:()=>On});function vw(i){let e=Ju,t=BigInt(3),r=BigInt(6),s=BigInt(11),a=BigInt(22),l=BigInt(23),u=BigInt(44),m=BigInt(88),p=i*i*i%e,h=p*p*i%e,f=tr(h,t,e)*h%e,g=tr(f,t,e)*h%e,b=tr(g,ig,e)*p%e,_=tr(b,s,e)*b%e,I=tr(_,a,e)*_%e,x=tr(I,u,e)*I%e,L=tr(x,m,e)*x%e,E=tr(L,u,e)*I%e,T=tr(E,t,e)*h%e,R=tr(T,l,e)*_%e,H=tr(R,r,e)*p%e,F=tr(H,ig,e);if(!Is.eql(Is.sqr(F),i))throw new Error("Cannot find square root");return F}function rg(i,...e){let t=xw[i];if(t===void 0){let r=ha(Uint8Array.from(i,s=>s.charCodeAt(0)));t=wi(r,r),xw[i]=t}return ha(wi(t,...e))}function Px(i){let e=On.utils.normPrivateKeyToScalar(i),t=zx.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:Xu(-e),bytes:Ux(t)}}function kw(i){ln("x",i,Zu,Ju);let e=Ox(i*i),t=Ox(e*i+BigInt(7)),r=vw(t);r%ig!==Iw&&(r=Ox(-r));let s=new zx(i,r,Zu);return s.assertValidity(),s}function Sw(...i){return Xu(Ro(rg("BIP0340/challenge",...i)))}function q2(i){return Px(i).bytes}function Q2(i,e,t=hf(32)){let r=ai("message",i),{bytes:s,scalar:a}=Px(e),l=ai("auxRand",t,32),u=Fx(a^Ro(rg("BIP0340/aux",l))),m=rg("BIP0340/nonce",u,s,r),p=Xu(Ro(m));if(p===Iw)throw new Error("sign failed: k is zero");let{bytes:h,scalar:f}=Px(p),g=Sw(h,s,r),b=new Uint8Array(64);if(b.set(h,0),b.set(Fx(Xu(f+g*a)),32),!ww(b,r,s))throw new Error("sign: Invalid signature produced");return b}function ww(i,e,t){let r=ai("signature",i,64),s=ai("message",e),a=ai("publicKey",t,32);try{let l=kw(Ro(a)),u=Ro(r.subarray(0,32));if(!_s(u,Zu,Ju))return!1;let m=Ro(r.subarray(32,64));if(!_s(m,Zu,tg))return!1;let p=Sw(Fx(u),Ux(l),s),h=Y2(l,m,Xu(-p));return!(!h||!h.hasEvenY()||h.toAffine().x!==u)}catch{return!1}}var Ju,tg,Zu,ig,_w,Is,On,Iw,xw,Ux,Fx,Ox,Xu,zx,Y2,Ro,Z2,X2,J2,Ew,eM,tM,ng=oe(()=>{"use strict";yx();ra();dw();yw();qu();ya();Nx();Ju=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),tg=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Zu=BigInt(1),ig=BigInt(2),_w=(i,e)=>(i+e/ig)/e;Is=Xf(Ju,void 0,void 0,{sqrt:vw}),On=hw({a:BigInt(0),b:BigInt(7),Fp:Is,n:tg,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:i=>{let e=tg,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Zu*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=t,l=BigInt("0x100000000000000000000000000000000"),u=_w(a*i,e),m=_w(-r*i,e),p=Zt(i-u*t-m*s,e),h=Zt(-u*r-m*a,e),f=p>l,g=h>l;if(f&&(p=e-p),g&&(h=e-h),p>l||h>l)throw new Error("splitScalar: Endomorphism failed, k="+i);return{k1neg:f,k1:p,k2neg:g,k2:h}}}},ha),Iw=BigInt(0),xw={};Ux=i=>i.toRawBytes(!0).slice(1),Fx=i=>zr(i,32),Ox=i=>Zt(i,Ju),Xu=i=>Zt(i,tg),zx=On.ProjectivePoint,Y2=(i,e,t)=>zx.BASE.multiplyAndAddUnsafe(i,e,t);Ro=Vi;Z2=(()=>({getPublicKey:q2,sign:Q2,verify:ww,utils:{randomPrivateKey:On.utils.randomPrivateKey,lift_x:kw,pointToBytes:Ux,numberToBytesBE:zr,bytesToNumberBE:Vi,taggedHash:rg,mod:Zt}}))(),X2=(()=>gw(Is,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(i=>i.map(e=>BigInt(e)))))(),J2=(()=>mw(Is,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Is.create(BigInt("-11"))}))(),Ew=(()=>bw(On.ProjectivePoint,i=>{let{x:e,y:t}=J2(Is.create(i[0]));return X2(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Is.ORDER,m:1,k:128,expand:"xmd",hash:ha}))(),eM=(()=>Ew.hashToCurve)(),tM=(()=>Ew.encodeToCurve)()});var Fn,yr,Bo,Do,No,Oo,Fo,Po,Uo,zo,un,_r,ks=oe(()=>{"use strict";fo();nt();Fn=class extends W{constructor({cause:e,message:t}={}){let r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}};Object.defineProperty(Fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Fn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});yr=class extends W{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${si(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}};Object.defineProperty(yr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});Bo=class extends W{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${si(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}};Object.defineProperty(Bo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});Do=class extends W{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}};Object.defineProperty(Do,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});No=class extends W{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}};Object.defineProperty(No,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});Oo=class extends W{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}};Object.defineProperty(Oo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});Fo=class extends W{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(Fo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});Po=class extends W{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(Po,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});Uo=class extends W{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(Uo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});zo=class extends W{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(zo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});un=class extends W{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${si(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${si(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}};Object.defineProperty(un,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});_r=class extends W{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}});function Ss(i,e){let t=(i.details||"").toLowerCase(),r=i instanceof W?i.walk(s=>s?.code===Fn.code):i;return r instanceof W?new Fn({cause:i,message:r.details}):Fn.nodeMessage.test(t)?new Fn({cause:i,message:i.details}):yr.nodeMessage.test(t)?new yr({cause:i,maxFeePerGas:e?.maxFeePerGas}):Bo.nodeMessage.test(t)?new Bo({cause:i,maxFeePerGas:e?.maxFeePerGas}):Do.nodeMessage.test(t)?new Do({cause:i,nonce:e?.nonce}):No.nodeMessage.test(t)?new No({cause:i,nonce:e?.nonce}):Oo.nodeMessage.test(t)?new Oo({cause:i,nonce:e?.nonce}):Fo.nodeMessage.test(t)?new Fo({cause:i}):Po.nodeMessage.test(t)?new Po({cause:i,gas:e?.gas}):Uo.nodeMessage.test(t)?new Uo({cause:i,gas:e?.gas}):zo.nodeMessage.test(t)?new zo({cause:i}):un.nodeMessage.test(t)?new un({cause:i,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new _r({cause:i})}var ep=oe(()=>{"use strict";nt();ks()});function ws(i,{format:e}){if(!e)return{};let t={};function r(a){let l=Object.keys(a);for(let u of l)u in i&&(t[u]=i[u]),a[u]&&typeof a[u]=="object"&&!Array.isArray(a[u])&&r(a[u])}let s=e(i||{});return r(s),t}var tp=oe(()=>{"use strict"});function Ho(i,e){return({exclude:t,format:r})=>({exclude:t,format:s=>{let a=e(s);if(t)for(let l of t)delete a[l];return{...a,...r(s)}},type:i})}var lg=oe(()=>{"use strict"});function xr(i){let e={};return typeof i.authorizationList<"u"&&(e.authorizationList=sM(i.authorizationList)),typeof i.accessList<"u"&&(e.accessList=i.accessList),typeof i.blobVersionedHashes<"u"&&(e.blobVersionedHashes=i.blobVersionedHashes),typeof i.blobs<"u"&&(typeof i.blobs[0]!="string"?e.blobs=i.blobs.map(t=>pt(t)):e.blobs=i.blobs),typeof i.data<"u"&&(e.data=i.data),typeof i.from<"u"&&(e.from=i.from),typeof i.gas<"u"&&(e.gas=Ae(i.gas)),typeof i.gasPrice<"u"&&(e.gasPrice=Ae(i.gasPrice)),typeof i.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ae(i.maxFeePerBlobGas)),typeof i.maxFeePerGas<"u"&&(e.maxFeePerGas=Ae(i.maxFeePerGas)),typeof i.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ae(i.maxPriorityFeePerGas)),typeof i.nonce<"u"&&(e.nonce=Ae(i.nonce)),typeof i.to<"u"&&(e.to=i.to),typeof i.type<"u"&&(e.type=nM[i.type]),typeof i.value<"u"&&(e.value=Ae(i.value)),e}function sM(i){return i.map(e=>({address:e.address,r:e.r?Ae(BigInt(e.r)):e.r,s:e.s?Ae(BigInt(e.s)):e.s,chainId:Ae(e.chainId),nonce:Ae(e.nonce),...typeof e.yParity<"u"?{yParity:Ae(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ae(e.v)}:{}}))}var nM,xa=oe(()=>{"use strict";We();nM={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"}});function Dw(i){if(!(!i||i.length===0))return i.reduce((e,{slot:t,value:r})=>{if(t.length!==66)throw new Ou({size:t.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Ou({size:r.length,targetSize:66,type:"hex"});return e[t]=r,e},{})}function aM(i){let{balance:e,nonce:t,state:r,stateDiff:s,code:a}=i,l={};if(a!==void 0&&(l.code=a),e!==void 0&&(l.balance=Ae(e)),t!==void 0&&(l.nonce=Ae(t)),r!==void 0&&(l.state=Dw(r)),s!==void 0){if(l.state)throw new Mf;l.stateDiff=Dw(s)}return l}function jo(i){if(!i)return;let e={};for(let{address:t,...r}of i){if(!At(t,{strict:!1}))throw new Dt({address:t});if(e[t])throw new Cf({address:t});e[t]=aM(r)}return e}var cg=oe(()=>{"use strict";en();rf();gx();Pr();We()});var jz,Gz,Vz,Wz,Kz,$z,Yz,qz,Qz,Zz,Xz,Jz,eH,tH,iH,rH,nH,sH,aH,oH,lH,cH,uH,pH,mH,hH,dH,fH,gH,bH,yH,_H,xH,vH,IH,kH,SH,wH,EH,LH,TH,AH,CH,MH,RH,BH,DH,NH,OH,FH,PH,UH,zH,HH,jH,GH,VH,WH,KH,$H,YH,qH,QH,ZH,XH,JH,ej,tj,ij,rj,nj,sj,aj,oj,lj,cj,uj,pj,mj,hj,dj,fj,gj,bj,yj,_j,xj,vj,Ij,kj,Sj,wj,Ej,Lj,Tj,Go,Hx=oe(()=>{"use strict";jz=2n**(8n-1n)-1n,Gz=2n**(16n-1n)-1n,Vz=2n**(24n-1n)-1n,Wz=2n**(32n-1n)-1n,Kz=2n**(40n-1n)-1n,$z=2n**(48n-1n)-1n,Yz=2n**(56n-1n)-1n,qz=2n**(64n-1n)-1n,Qz=2n**(72n-1n)-1n,Zz=2n**(80n-1n)-1n,Xz=2n**(88n-1n)-1n,Jz=2n**(96n-1n)-1n,eH=2n**(104n-1n)-1n,tH=2n**(112n-1n)-1n,iH=2n**(120n-1n)-1n,rH=2n**(128n-1n)-1n,nH=2n**(136n-1n)-1n,sH=2n**(144n-1n)-1n,aH=2n**(152n-1n)-1n,oH=2n**(160n-1n)-1n,lH=2n**(168n-1n)-1n,cH=2n**(176n-1n)-1n,uH=2n**(184n-1n)-1n,pH=2n**(192n-1n)-1n,mH=2n**(200n-1n)-1n,hH=2n**(208n-1n)-1n,dH=2n**(216n-1n)-1n,fH=2n**(224n-1n)-1n,gH=2n**(232n-1n)-1n,bH=2n**(240n-1n)-1n,yH=2n**(248n-1n)-1n,_H=2n**(256n-1n)-1n,xH=-(2n**(8n-1n)),vH=-(2n**(16n-1n)),IH=-(2n**(24n-1n)),kH=-(2n**(32n-1n)),SH=-(2n**(40n-1n)),wH=-(2n**(48n-1n)),EH=-(2n**(56n-1n)),LH=-(2n**(64n-1n)),TH=-(2n**(72n-1n)),AH=-(2n**(80n-1n)),CH=-(2n**(88n-1n)),MH=-(2n**(96n-1n)),RH=-(2n**(104n-1n)),BH=-(2n**(112n-1n)),DH=-(2n**(120n-1n)),NH=-(2n**(128n-1n)),OH=-(2n**(136n-1n)),FH=-(2n**(144n-1n)),PH=-(2n**(152n-1n)),UH=-(2n**(160n-1n)),zH=-(2n**(168n-1n)),HH=-(2n**(176n-1n)),jH=-(2n**(184n-1n)),GH=-(2n**(192n-1n)),VH=-(2n**(200n-1n)),WH=-(2n**(208n-1n)),KH=-(2n**(216n-1n)),$H=-(2n**(224n-1n)),YH=-(2n**(232n-1n)),qH=-(2n**(240n-1n)),QH=-(2n**(248n-1n)),ZH=-(2n**(256n-1n)),XH=2n**8n-1n,JH=2n**16n-1n,ej=2n**24n-1n,tj=2n**32n-1n,ij=2n**40n-1n,rj=2n**48n-1n,nj=2n**56n-1n,sj=2n**64n-1n,aj=2n**72n-1n,oj=2n**80n-1n,lj=2n**88n-1n,cj=2n**96n-1n,uj=2n**104n-1n,pj=2n**112n-1n,mj=2n**120n-1n,hj=2n**128n-1n,dj=2n**136n-1n,fj=2n**144n-1n,gj=2n**152n-1n,bj=2n**160n-1n,yj=2n**168n-1n,_j=2n**176n-1n,xj=2n**184n-1n,vj=2n**192n-1n,Ij=2n**200n-1n,kj=2n**208n-1n,Sj=2n**216n-1n,wj=2n**224n-1n,Ej=2n**232n-1n,Lj=2n**240n-1n,Tj=2n**248n-1n,Go=2n**256n-1n});function Wi(i){let{account:e,gasPrice:t,maxFeePerGas:r,maxPriorityFeePerGas:s,to:a}=i,l=e?ot(e):void 0;if(l&&!At(l.address))throw new Dt({address:l.address});if(a&&!At(a))throw new Dt({address:a});if(typeof t<"u"&&(typeof r<"u"||typeof s<"u"))throw new Rf;if(r&&r>Go)throw new yr({maxFeePerGas:r});if(s&&r&&s>r)throw new un({maxFeePerGas:r,maxPriorityFeePerGas:s})}var Es=oe(()=>{"use strict";ni();Hx();en();ks();Ur();Pr()});function pn(i,e){if(!At(i,{strict:!1}))throw new Dt({address:i});if(!At(e,{strict:!1}))throw new Dt({address:e});return i.toLowerCase()===e.toLowerCase()}var Zo=oe(()=>{"use strict";en();Pr()});function Ki(i){let{abi:e,args:t,functionName:r,data:s}=i,a=e[0];if(r){let u=rn({abi:e,args:t,name:r});if(!u)throw new is(r,{docsPath:Wx});a=u}if(a.type!=="function")throw new is(void 0,{docsPath:Wx});if(!a.outputs)throw new qd(a.name,{docsPath:Wx});let l=aa(a.outputs,s);if(l&&l.length>1)return l;if(l&&l.length===1)return l[0]}var Wx,As=oe(()=>{"use strict";ii();Ef();co();Wx="/docs/contract/decodeFunctionResult"});var rp,Ww,vg,Kw,Kx,$x,Yx,Ia=oe(()=>{"use strict";rp=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Ww=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],vg=[...Ww,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Kw=[...Ww,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Kx=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],$x=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Yx=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}]});var $w,Yw=oe(()=>{"use strict";$w="0x82ad56cb"});var Ig,qw,Qw,kg=oe(()=>{"use strict";Ig="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",qw="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Qw="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"});var ka,Sg,wg,np,Sa,sp=oe(()=>{"use strict";nt();ka=class extends W{constructor({blockNumber:e,chain:t,contract:r}){super(`Chain "${t.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}},Sg=class extends W{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}},wg=class extends W{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}},np=class extends W{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}},Sa=class extends W{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}});function wa(i){let{abi:e,args:t,bytecode:r}=i;if(!t||t.length===0)return r;let s=e.find(l=>"type"in l&&l.type==="constructor");if(!s)throw new Vd({docsPath:qx});if(!("inputs"in s))throw new Ru({docsPath:qx});if(!s.inputs||s.inputs.length===0)throw new Ru({docsPath:qx});let a=Ji(s.inputs,t);return ki([r,a])}var qx,Eg=oe(()=>{"use strict";ii();dr();cs();qx="/docs/contract/encodeDeployData"});function Ir({blockNumber:i,chain:e,contract:t}){let r=e?.contracts?.[t];if(!r)throw new ka({chain:e,contract:{name:t}});if(i&&r.blockCreated&&r.blockCreated>i)throw new ka({blockNumber:i,chain:e,contract:{name:t,blockCreated:r.blockCreated}});return r.address}var Ea=oe(()=>{"use strict";sp()});function Lg(i,{docsPath:e,...t}){let r=(()=>{let s=Ss(i,t);return s instanceof _r?i:s})();return new yo(r,{docsPath:e,...t})}var Qx=oe(()=>{"use strict";ms();ks();ep()});function Tg(){let i=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{i=r,e=s}),resolve:i,reject:e}}var Zx=oe(()=>{"use strict"});function Ag({fn:i,id:e,shouldSplitBatch:t,wait:r=0,sort:s}){let a=async()=>{let h=m();l();let f=h.map(({args:g})=>g);f.length!==0&&i(f).then(g=>{s&&Array.isArray(g)&&g.sort(s);for(let b=0;b<h.length;b++){let{resolve:_}=h[b];_?.([g[b],g])}}).catch(g=>{for(let b=0;b<h.length;b++){let{reject:_}=h[b];_?.(g)}})},l=()=>Xx.delete(e),u=()=>m().map(({args:h})=>h),m=()=>Xx.get(e)||[],p=h=>Xx.set(e,[...m(),h]);return{flush:l,async schedule(h){let{promise:f,resolve:g,reject:b}=Tg();return t?.([...u(),h])&&a(),m().length>0?(p({args:h,resolve:g,reject:b}),f):(p({args:h,resolve:g,reject:b}),setTimeout(a,r),f)}}}var Xx,Jx=oe(()=>{"use strict";Zx();Xx=new Map});var Cg,Mg,Rg,Zw=oe(()=>{"use strict";Fi();nt();Pf();Cg=class extends W{constructor({callbackSelector:e,cause:t,data:r,extraData:s,sender:a,urls:l}){super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],t.metaMessages?.length?"":[],"Offchain Gateway Call:",l&&["  Gateway URL(s):",...l.map(u=>`    ${la(u)}`)],`  Sender: ${a}`,`  Data: ${r}`,`  Callback selector: ${e}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}},Mg=class extends W{constructor({result:e,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${la(t)}`,`Response: ${mt(e)}`],name:"OffchainLookupResponseMalformedError"})}},Rg=class extends W{constructor({sender:e,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}});var eE={};M1(eE,{ccipRequest:()=>Jw,offchainLookup:()=>hM,offchainLookupAbiItem:()=>Xw,offchainLookupSignature:()=>mM});async function hM(i,{blockNumber:e,blockTag:t,data:r,to:s}){let{args:a}=Lf({data:r,abi:[Xw]}),[l,u,m,p,h]=a,{ccipRead:f}=i,g=f&&typeof f?.request=="function"?f.request:Jw;try{if(!pn(s,l))throw new Rg({sender:l,to:s});let b=await g({data:m,sender:l,urls:u}),{data:_}=await mn(i,{blockNumber:e,blockTag:t,data:Oi([p,Ji([{type:"bytes"},{type:"bytes"}],[b,h])]),to:s});return _}catch(b){throw new Cg({callbackSelector:p,cause:b,data:r,extraData:h,sender:l,urls:u})}}async function Jw({data:i,sender:e,urls:t}){let r=new Error("An unknown error occurred.");for(let s=0;s<t.length;s++){let a=t[s],l=a.includes("{data}")?"GET":"POST",u=l==="POST"?{data:i,sender:e}:void 0,m=l==="POST"?{"Content-Type":"application/json"}:{};try{let p=await fetch(a.replace("{sender}",e.toLowerCase()).replace("{data}",i),{body:JSON.stringify(u),headers:m,method:l}),h;if(p.headers.get("Content-Type")?.startsWith("application/json")?h=(await p.json()).data:h=await p.text(),!p.ok){r=new gr({body:u,details:h?.error?mt(h.error):p.statusText,headers:p.headers,status:p.status,url:a});continue}if(!Qt(h)){r=new Mg({result:h,url:a});continue}return h}catch(p){r=new gr({body:u,details:p.message,url:a})}}throw r}var mM,Xw,tE=oe(()=>{"use strict";tl();Zw();ua();hx();cs();Zo();dr();Mr();Fi();mM="0x556f1830",Xw={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]}});async function mn(i,e){let{account:t=i.account,batch:r=!!i.batch?.multicall,blockNumber:s,blockTag:a="latest",accessList:l,blobs:u,code:m,data:p,factory:h,factoryData:f,gas:g,gasPrice:b,maxFeePerBlobGas:_,maxFeePerGas:I,maxPriorityFeePerGas:x,nonce:L,to:E,value:T,stateOverride:R,...H}=e,F=t?ot(t):void 0;if(m&&(h||f))throw new W("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(m&&E)throw new W("Cannot provide both `code` & `to` as parameters.");let z=m&&p,V=h&&f&&E&&p,$=z||V,Z=(()=>z?gM({code:m,data:p}):V?bM({data:p,factory:h,factoryData:f,to:E}):p)();try{Wi(e);let Me=(s?Ae(s):void 0)||a,rt=jo(R),be=i.chain?.formatters?.transactionRequest?.format,ve=(be||xr)({...ws(H,{format:be}),from:F?.address,accessList:l,blobs:u,data:Z,gas:g,gasPrice:b,maxFeePerBlobGas:_,maxFeePerGas:I,maxPriorityFeePerGas:x,nonce:L,to:$?void 0:E,value:T});if(r&&dM({request:ve})&&!rt)try{return await fM(i,{...ve,blockNumber:s,blockTag:a})}catch(Pe){if(!(Pe instanceof np)&&!(Pe instanceof ka))throw Pe}let B=await i.request({method:"eth_call",params:rt?[ve,Me,rt]:[ve,Me]});return B==="0x"?{data:void 0}:{data:B}}catch(re){let Me=yM(re),{offchainLookup:rt,offchainLookupSignature:be}=await Promise.resolve().then(()=>(tE(),eE));if(i.ccipRead!==!1&&Me?.slice(0,10)===be&&E)return{data:await rt(i,{data:Me,to:E})};throw $&&Me?.slice(0,10)==="0x101bb98d"?new Hf({factory:h}):Lg(re,{...e,account:F,chain:i.chain})}}function dM({request:i}){let{data:e,to:t,...r}=i;return!(!e||e.startsWith($w)||!t||Object.values(r).filter(s=>typeof s<"u").length>0)}async function fM(i,e){let{batchSize:t=1024,wait:r=0}=typeof i.batch?.multicall=="object"?i.batch.multicall:{},{blockNumber:s,blockTag:a="latest",data:l,multicallAddress:u,to:m}=e,p=u;if(!p){if(!i.chain)throw new np;p=Ir({blockNumber:s,chain:i.chain,contract:"multicall3"})}let f=(s?Ae(s):void 0)||a,{schedule:g}=Ag({id:`${i.uid}.${f}`,wait:r,shouldSplitBatch(I){return I.reduce((L,{data:E})=>L+(E.length-2),0)>t*2},fn:async I=>{let x=I.map(T=>({allowFailure:!0,callData:T.data,target:T.to})),L=Ft({abi:rp,args:[x],functionName:"aggregate3"}),E=await i.request({method:"eth_call",params:[{data:L,to:p},f]});return Ki({abi:rp,args:[x],functionName:"aggregate3",data:E||"0x"})}}),[{returnData:b,success:_}]=await g({data:l,to:m});if(!_)throw new an({data:b});return b==="0x"?{data:void 0}:{data:b}}function gM(i){let{code:e,data:t}=i;return wa({abi:zd(["constructor(bytes, bytes)"]),bytecode:Ig,args:[e,t]})}function bM(i){let{data:e,factory:t,factoryData:r,to:s}=i;return wa({abi:zd(["constructor(address, bytes, address, bytes)"]),bytecode:qw,args:[s,e,t,r]})}function yM(i){if(!(i instanceof W))return;let e=i.walk();return typeof e?.data=="object"?e.data?.data:e.data}var tl=oe(()=>{"use strict";jd();ni();Ia();Yw();kg();nt();sp();ms();As();Eg();fr();Ea();We();Qx();tp();xa();Jx();cg();Es()});var MT=fk(yi=>{"use strict";var Ev=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,e,t){i!=Array.prototype&&i!=Object.prototype&&(i[e]=t.value)},Ma=typeof window<"u"&&window===yi?yi:typeof global<"u"&&global!=null?global:yi;function TR(i,e){if(e){var t=Ma;i=i.split(".");for(var r=0;r<i.length-1;r++){var s=i[r];s in t||(t[s]={}),t=t[s]}i=i[i.length-1],r=t[i],e=e(r),e!=r&&e!=null&&Ev(t,i,{configurable:!0,writable:!0,value:e})}}function AR(i){var e=0;return function(){return e<i.length?{done:!1,value:i[e++]}:{done:!0}}}function iT(){iT=function(){},Ma.Symbol||(Ma.Symbol=CR)}function rT(i,e){this.a=i,Ev(this,"description",{configurable:!0,writable:!0,value:e})}rT.prototype.toString=function(){return this.a};var CR=function(){function i(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new rT("jscomp_symbol_"+(t||"")+"_"+e++,t)}var e=0;return i}();function Lv(){iT();var i=Ma.Symbol.iterator;i||(i=Ma.Symbol.iterator=Ma.Symbol("Symbol.iterator")),typeof Array.prototype[i]!="function"&&Ev(Array.prototype,i,{configurable:!0,writable:!0,value:function(){return MR(AR(this))}}),Lv=function(){}}function MR(i){return Lv(),i={next:i},i[Ma.Symbol.iterator]=function(){return this},i}function RR(i,e){Lv(),i instanceof String&&(i+="");var t=0,r={next:function(){if(t<i.length){var s=t++;return{value:e(s,i[s]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}TR("Array.prototype.entries",function(i){return i||function(){return RR(this,function(e,t){return[e,t]})}});var BR=yi||self;function Ne(i,e,t){i=i.split("."),t=t||BR,i[0]in t||typeof t.execScript>"u"||t.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||e===void 0?t[r]&&t[r]!==Object.prototype[r]?t=t[r]:t=t[r]={}:t[r]=e}function zn(i){var e=typeof i;if(e=="object")if(i){if(i instanceof Array)return"array";if(i instanceof Object)return e;var t=Object.prototype.toString.call(i);if(t=="[object Window]")return"object";if(t=="[object Array]"||typeof i.length=="number"&&typeof i.splice<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("splice"))return"array";if(t=="[object Function]"||typeof i.call<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("call"))return"function"}else return"null";else if(e=="function"&&typeof i.call>"u")return"object";return e}function ZL(i){var e=typeof i;return e=="object"&&i!=null||e=="function"}function DR(i,e,t){Ne(i,e,t)}function NR(i,e){function t(){}t.prototype=e.prototype,i.prototype=new t,i.prototype.constructor=i}var XL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function OR(i,e){for(var t,r,s=1;s<arguments.length;s++){r=arguments[s];for(t in r)i[t]=r[t];for(var a=0;a<XL.length;a++)t=XL[a],Object.prototype.hasOwnProperty.call(r,t)&&(i[t]=r[t])}}var FR=Array.prototype.forEach?function(i,e){Array.prototype.forEach.call(i,e,void 0)}:function(i,e){for(var t=i.length,r=typeof i=="string"?i.split(""):i,s=0;s<t;s++)s in r&&e.call(void 0,r[s],s,i)},wp=Array.prototype.map?function(i,e){return Array.prototype.map.call(i,e,void 0)}:function(i,e){for(var t=i.length,r=Array(t),s=typeof i=="string"?i.split(""):i,a=0;a<t;a++)a in s&&(r[a]=e.call(void 0,s[a],a,i));return r};function PR(i,e,t){return 2>=arguments.length?Array.prototype.slice.call(i,e):Array.prototype.slice.call(i,e,t)}function zb(i,e,t,r){var s="Assertion failed";if(t){s+=": "+t;var a=r}else i&&(s+=": "+i,a=e);throw Error(s,a||[])}function q(i,e,t){for(var r=[],s=2;s<arguments.length;++s)r[s-2]=arguments[s];return i||zb("",null,e,r),i}function UR(i,e,t){for(var r=[],s=2;s<arguments.length;++s)r[s-2]=arguments[s];typeof i!="string"&&zb("Expected string but got %s: %s.",[zn(i),i],e,r)}function zR(i,e,t){for(var r=[],s=2;s<arguments.length;++s)r[s-2]=arguments[s];Array.isArray(i)||zb("Expected array but got %s: %s.",[zn(i),i],e,r)}function li(i,e){for(var t=[],r=1;r<arguments.length;++r)t[r-1]=arguments[r];throw Error("Failure"+(i?": "+i:""),t)}function Wr(i,e,t,r){for(var s=[],a=3;a<arguments.length;++a)s[a-3]=arguments[a];i instanceof e||zb("Expected instanceof %s but got %s.",[JL(e),JL(i)],t,s)}function JL(i){return i instanceof Function?i.displayName||i.name||"unknown type name":i instanceof Object?i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i):i===null?"null":typeof i}function qe(i,e){if(this.c=i,this.b=e,this.a={},this.arrClean=!0,0<this.c.length){for(i=0;i<this.c.length;i++){e=this.c[i];var t=e[0];this.a[t.toString()]=new nT(t,e[1])}this.arrClean=!0}}Ne("jspb.Map",qe,void 0);qe.prototype.g=function(){if(this.arrClean){if(this.b){var i=this.a,e;for(e in i)if(Object.prototype.hasOwnProperty.call(i,e)){var t=i[e].a;t&&t.g()}}}else{for(this.c.length=0,i=Ns(this),i.sort(),e=0;e<i.length;e++){var r=this.a[i[e]];(t=r.a)&&t.g(),this.c.push([r.key,r.value])}this.arrClean=!0}return this.c};qe.prototype.toArray=qe.prototype.g;qe.prototype.Mc=function(i,e){for(var t=this.g(),r=[],s=0;s<t.length;s++){var a=this.a[t[s][0].toString()];_l(this,a);var l=a.a;l?(q(e),r.push([a.key,e(i,l)])):r.push([a.key,a.value])}return r};qe.prototype.toObject=qe.prototype.Mc;qe.fromObject=function(i,e,t){e=new qe([],e);for(var r=0;r<i.length;r++){var s=i[r][0],a=t(i[r][1]);e.set(s,a)}return e};function Ep(i){this.a=0,this.b=i}Ep.prototype.next=function(){return this.a<this.b.length?{done:!1,value:this.b[this.a++]}:{done:!0,value:void 0}};typeof Symbol<"u"&&(Ep.prototype[Symbol.iterator]=function(){return this});qe.prototype.Jb=function(){return Ns(this).length};qe.prototype.getLength=qe.prototype.Jb;qe.prototype.clear=function(){this.a={},this.arrClean=!1};qe.prototype.clear=qe.prototype.clear;qe.prototype.Cb=function(i){i=i.toString();var e=this.a.hasOwnProperty(i);return delete this.a[i],this.arrClean=!1,e};qe.prototype.del=qe.prototype.Cb;qe.prototype.Eb=function(){var i=[],e=Ns(this);e.sort();for(var t=0;t<e.length;t++){var r=this.a[e[t]];i.push([r.key,r.value])}return i};qe.prototype.getEntryList=qe.prototype.Eb;qe.prototype.entries=function(){var i=[],e=Ns(this);e.sort();for(var t=0;t<e.length;t++){var r=this.a[e[t]];i.push([r.key,_l(this,r)])}return new Ep(i)};qe.prototype.entries=qe.prototype.entries;qe.prototype.keys=function(){var i=[],e=Ns(this);e.sort();for(var t=0;t<e.length;t++)i.push(this.a[e[t]].key);return new Ep(i)};qe.prototype.keys=qe.prototype.keys;qe.prototype.values=function(){var i=[],e=Ns(this);e.sort();for(var t=0;t<e.length;t++)i.push(_l(this,this.a[e[t]]));return new Ep(i)};qe.prototype.values=qe.prototype.values;qe.prototype.forEach=function(i,e){var t=Ns(this);t.sort();for(var r=0;r<t.length;r++){var s=this.a[t[r]];i.call(e,_l(this,s),s.key,this)}};qe.prototype.forEach=qe.prototype.forEach;qe.prototype.set=function(i,e){var t=new nT(i);return this.b?(t.a=e,t.value=e.g()):t.value=e,this.a[i.toString()]=t,this.arrClean=!1,this};qe.prototype.set=qe.prototype.set;function _l(i,e){return i.b?(e.a||(e.a=new i.b(e.value)),e.a):e.value}qe.prototype.get=function(i){if(i=this.a[i.toString()])return _l(this,i)};qe.prototype.get=qe.prototype.get;qe.prototype.has=function(i){return i.toString()in this.a};qe.prototype.has=qe.prototype.has;qe.prototype.Jc=function(i,e,t,r,s){var a=Ns(this);a.sort();for(var l=0;l<a.length;l++){var u=this.a[a[l]];e.Va(i),t.call(e,1,u.key),this.b?r.call(e,2,_l(this,u),s):r.call(e,2,u.value),e.Ya()}};qe.prototype.serializeBinary=qe.prototype.Jc;qe.deserializeBinary=function(i,e,t,r,s,a,l){for(;e.oa()&&!e.bb();){var u=e.c;u==1?a=t.call(e):u==2&&(i.b?(q(s),l||(l=new i.b),r.call(e,l,s)):l=r.call(e))}q(a!=null),q(l!=null),i.set(a,l)};function Ns(i){i=i.a;var e=[],t;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.push(t);return e}function nT(i,e){this.key=i,this.value=e,this.a=void 0}function sT(i){if(8192>=i.length)return String.fromCharCode.apply(null,i);for(var e="",t=0;t<i.length;t+=8192)e+=String.fromCharCode.apply(null,PR(i,t,t+8192));return e}var Iv={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},Ub={"'":"\\'"},aT={},vp=null;function oT(i,e){e===void 0&&(e=0),cT(),e=aT[e];for(var t=[],r=0;r<i.length;r+=3){var s=i[r],a=r+1<i.length,l=a?i[r+1]:0,u=r+2<i.length,m=u?i[r+2]:0,p=s>>2;s=(s&3)<<4|l>>4,l=(l&15)<<2|m>>6,m&=63,u||(m=64,a||(l=64)),t.push(e[p],e[s],e[l]||"",e[m]||"")}return t.join("")}function lT(i){var e=i.length,t=3*e/4;t%3?t=Math.floor(t):"=.".indexOf(i[e-1])!=-1&&(t="=.".indexOf(i[e-2])!=-1?t-2:t-1);var r=new Uint8Array(t),s=0;return HR(i,function(a){r[s++]=a}),r.subarray(0,s)}function HR(i,e){function t(m){for(;r<i.length;){var p=i.charAt(r++),h=vp[p];if(h!=null)return h;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return m}cT();for(var r=0;;){var s=t(-1),a=t(0),l=t(64),u=t(64);if(u===64&&s===-1)break;e(s<<2|a>>4),l!=64&&(e(a<<4&240|l>>2),u!=64&&e(l<<6&192|u))}}function cT(){if(!vp){vp={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++){var r=i.concat(e[t].split(""));aT[t]=r;for(var s=0;s<r.length;s++){var a=r[s];vp[a]===void 0&&(vp[a]=s)}}}}Ne("jspb.ConstBinaryMessage",function(){},void 0);Ne("jspb.BinaryMessage",function(){},void 0);Ne("jspb.BinaryConstants.FieldType",{yb:-1,ee:1,FLOAT:2,ke:3,te:4,je:5,xb:6,wb:7,BOOL:8,re:9,ie:10,le:11,ce:12,se:13,ge:14,me:15,ne:16,oe:17,pe:18,he:30,ve:31},void 0);Ne("jspb.BinaryConstants.WireType",{yb:-1,ue:0,xb:1,de:2,qe:3,fe:4,wb:5},void 0);Ne("jspb.BinaryConstants.FieldTypeToWireType",function(i){switch(i){case 5:case 3:case 13:case 4:case 17:case 18:case 8:case 14:case 31:return 0;case 1:case 6:case 16:case 30:return 1;case 9:case 11:case 12:return 2;case 2:case 7:case 15:return 5;default:return-1}},void 0);Ne("jspb.BinaryConstants.INVALID_FIELD_NUMBER",-1,void 0);Ne("jspb.BinaryConstants.FLOAT32_EPS",1401298464324817e-60,void 0);Ne("jspb.BinaryConstants.FLOAT32_MIN",11754943508222875e-54,void 0);Ne("jspb.BinaryConstants.FLOAT32_MAX",34028234663852886e22,void 0);Ne("jspb.BinaryConstants.FLOAT64_EPS",5e-324,void 0);Ne("jspb.BinaryConstants.FLOAT64_MIN",22250738585072014e-324,void 0);Ne("jspb.BinaryConstants.FLOAT64_MAX",17976931348623157e292,void 0);Ne("jspb.BinaryConstants.TWO_TO_20",1048576,void 0);Ne("jspb.BinaryConstants.TWO_TO_23",8388608,void 0);Ne("jspb.BinaryConstants.TWO_TO_31",2147483648,void 0);Ne("jspb.BinaryConstants.TWO_TO_32",4294967296,void 0);Ne("jspb.BinaryConstants.TWO_TO_52",4503599627370496,void 0);Ne("jspb.BinaryConstants.TWO_TO_63",9223372036854776e3,void 0);Ne("jspb.BinaryConstants.TWO_TO_64",18446744073709552e3,void 0);Ne("jspb.BinaryConstants.ZERO_HASH","\0\0\0\0\0\0\0\0",void 0);var It=0,Et=0;Ne("jspb.utils.getSplit64Low",function(){return It},void 0);Ne("jspb.utils.getSplit64High",function(){return Et},void 0);function Tv(i){var e=i>>>0;i=Math.floor((i-e)/4294967296)>>>0,It=e,Et=i}Ne("jspb.utils.splitUint64",Tv,void 0);function Lp(i){var e=0>i;i=Math.abs(i);var t=i>>>0;i=Math.floor((i-t)/4294967296),i>>>=0,e&&(i=~i>>>0,t=(~t>>>0)+1,4294967295<t&&(t=0,i++,4294967295<i&&(i=0))),It=t,Et=i}Ne("jspb.utils.splitInt64",Lp,void 0);function uT(i){var e=0>i;i=2*Math.abs(i),Tv(i),i=It;var t=Et;e&&(i==0?t==0?t=i=4294967295:(t--,i=4294967295):i--),It=i,Et=t}Ne("jspb.utils.splitZigzag64",uT,void 0);function pT(i){var e=0>i?1:0;if(i=e?-i:i,i===0)0<1/i?It=Et=0:(Et=0,It=2147483648);else if(isNaN(i))Et=0,It=2147483647;else if(34028234663852886e22<i)Et=0,It=(e<<31|2139095040)>>>0;else if(11754943508222875e-54>i)i=Math.round(i/Math.pow(2,-149)),Et=0,It=(e<<31|i)>>>0;else{var t=Math.floor(Math.log(i)/Math.LN2);i*=Math.pow(2,-t),i=Math.round(8388608*i),16777216<=i&&++t,Et=0,It=(e<<31|t+127<<23|i&8388607)>>>0}}Ne("jspb.utils.splitFloat32",pT,void 0);function mT(i){var e=0>i?1:0;if(i=e?-i:i,i===0)Et=0<1/i?0:2147483648,It=0;else if(isNaN(i))Et=2147483647,It=4294967295;else if(17976931348623157e292<i)Et=(e<<31|2146435072)>>>0,It=0;else if(22250738585072014e-324>i)i/=Math.pow(2,-1074),Et=(e<<31|i/4294967296)>>>0,It=i>>>0;else{var t=i,r=0;if(2<=t)for(;2<=t&&1023>r;)r++,t/=2;else for(;1>t&&-1022<r;)t*=2,r--;i*=Math.pow(2,-r),Et=(e<<31|r+1023<<20|1048576*i&1048575)>>>0,It=4503599627370496*i>>>0}}Ne("jspb.utils.splitFloat64",mT,void 0);function Os(i){var e=i.charCodeAt(4),t=i.charCodeAt(5),r=i.charCodeAt(6),s=i.charCodeAt(7);It=i.charCodeAt(0)+(i.charCodeAt(1)<<8)+(i.charCodeAt(2)<<16)+(i.charCodeAt(3)<<24)>>>0,Et=e+(t<<8)+(r<<16)+(s<<24)>>>0}Ne("jspb.utils.splitHash64",Os,void 0);function xl(i,e){return 4294967296*e+(i>>>0)}Ne("jspb.utils.joinUint64",xl,void 0);function Tp(i,e){var t=e&2147483648;return t&&(i=~i+1>>>0,e=~e>>>0,i==0&&(e=e+1>>>0)),i=xl(i,e),t?-i:i}Ne("jspb.utils.joinInt64",Tp,void 0);function Hb(i,e,t){var r=e>>31;return t(i<<1^r,(e<<1|i>>>31)^r)}Ne("jspb.utils.toZigzag64",Hb,void 0);function hT(i,e){return jb(i,e,Tp)}Ne("jspb.utils.joinZigzag64",hT,void 0);function jb(i,e,t){var r=-(i&1);return t((i>>>1|e<<31)^r,e>>>1^r)}Ne("jspb.utils.fromZigzag64",jb,void 0);function dT(i){var e=2*(i>>31)+1,t=i>>>23&255;return i&=8388607,t==255?i?NaN:1/0*e:t==0?e*Math.pow(2,-149)*i:e*Math.pow(2,t-150)*(i+Math.pow(2,23))}Ne("jspb.utils.joinFloat32",dT,void 0);function fT(i,e){var t=2*(e>>31)+1,r=e>>>20&2047;return i=4294967296*(e&1048575)+i,r==2047?i?NaN:1/0*t:r==0?t*Math.pow(2,-1074)*i:t*Math.pow(2,r-1075)*(i+4503599627370496)}Ne("jspb.utils.joinFloat64",fT,void 0);function Gb(i,e){return String.fromCharCode(i>>>0&255,i>>>8&255,i>>>16&255,i>>>24&255,e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255)}Ne("jspb.utils.joinHash64",Gb,void 0);Ne("jspb.utils.DIGITS","0123456789abcdef".split(""),void 0);function Ap(i,e){function t(s,a){return s=s?String(s):"",a?"0000000".slice(s.length)+s:s}if(2097151>=e)return""+xl(i,e);var r=(i>>>24|e<<8)>>>0&16777215;return e=e>>16&65535,i=(i&16777215)+6777216*r+6710656*e,r+=8147497*e,e*=2,1e7<=i&&(r+=Math.floor(i/1e7),i%=1e7),1e7<=r&&(e+=Math.floor(r/1e7),r%=1e7),t(e,0)+t(r,e)+t(i,1)}Ne("jspb.utils.joinUnsignedDecimalString",Ap,void 0);function Cp(i,e){var t=e&2147483648;return t&&(i=~i+1>>>0,e=~e+(i==0?1:0)>>>0),i=Ap(i,e),t?"-"+i:i}Ne("jspb.utils.joinSignedDecimalString",Cp,void 0);function gT(i,e){Os(i),i=It;var t=Et;return e?Cp(i,t):Ap(i,t)}Ne("jspb.utils.hash64ToDecimalString",gT,void 0);Ne("jspb.utils.hash64ArrayToDecimalStrings",function(i,e){for(var t=Array(i.length),r=0;r<i.length;r++)t[r]=gT(i[r],e);return t},void 0);function Mp(i){function e(l,u){for(var m=0;8>m&&(l!==1||0<u);m++)u=l*s[m]+u,s[m]=u&255,u>>>=8}function t(){for(var l=0;8>l;l++)s[l]=~s[l]&255}q(0<i.length);var r=!1;i[0]==="-"&&(r=!0,i=i.slice(1));for(var s=[0,0,0,0,0,0,0,0],a=0;a<i.length;a++)e(10,i.charCodeAt(a)-48);return r&&(t(),e(1,1)),sT(s)}Ne("jspb.utils.decimalStringToHash64",Mp,void 0);Ne("jspb.utils.splitDecimalString",function(i){Os(Mp(i))},void 0);function eT(i){return String.fromCharCode(10>i?48+i:87+i)}function tT(i){return 97<=i?i-97+10:i-48}Ne("jspb.utils.hash64ToHexString",function(i){var e=Array(18);e[0]="0",e[1]="x";for(var t=0;8>t;t++){var r=i.charCodeAt(7-t);e[2*t+2]=eT(r>>4),e[2*t+3]=eT(r&15)}return e.join("")},void 0);Ne("jspb.utils.hexStringToHash64",function(i){i=i.toLowerCase(),q(i.length==18),q(i[0]=="0"),q(i[1]=="x");for(var e="",t=0;8>t;t++)e=String.fromCharCode(16*tT(i.charCodeAt(2*t+2))+tT(i.charCodeAt(2*t+3)))+e;return e},void 0);Ne("jspb.utils.hash64ToNumber",function(i,e){Os(i),i=It;var t=Et;return e?Tp(i,t):xl(i,t)},void 0);Ne("jspb.utils.numberToHash64",function(i){return Lp(i),Gb(It,Et)},void 0);Ne("jspb.utils.countVarints",function(i,e,t){for(var r=0,s=e;s<t;s++)r+=i[s]>>7;return t-e-r},void 0);Ne("jspb.utils.countVarintFields",function(i,e,t,r){var s=0;if(r*=8,128>r)for(;e<t&&i[e++]==r;)for(s++;;){var a=i[e++];if(!(a&128))break}else for(;e<t;){for(a=r;128<a;){if(i[e]!=(a&127|128))return s;e++,a>>=7}if(i[e++]!=a)break;for(s++;a=i[e++],(a&128)!=0;);}return s},void 0);function bT(i,e,t,r,s){var a=0;if(128>r)for(;e<t&&i[e++]==r;)a++,e+=s;else for(;e<t;){for(var l=r;128<l;){if(i[e++]!=(l&127|128))return a;l>>=7}if(i[e++]!=l)break;a++,e+=s}return a}Ne("jspb.utils.countFixed32Fields",function(i,e,t,r){return bT(i,e,t,8*r+5,4)},void 0);Ne("jspb.utils.countFixed64Fields",function(i,e,t,r){return bT(i,e,t,8*r+1,8)},void 0);Ne("jspb.utils.countDelimitedFields",function(i,e,t,r){var s=0;for(r=8*r+2;e<t;){for(var a=r;128<a;){if(i[e++]!=(a&127|128))return s;a>>=7}if(i[e++]!=a)break;s++;for(var l=0,u=1;a=i[e++],l+=(a&127)*u,u*=128,(a&128)!=0;);e+=l}return s},void 0);Ne("jspb.utils.debugBytesToTextFormat",function(i){var e='"';if(i){i=Vb(i);for(var t=0;t<i.length;t++)e+="\\x",16>i[t]&&(e+="0"),e+=i[t].toString(16)}return e+'"'},void 0);Ne("jspb.utils.debugScalarToTextFormat",function(i){if(typeof i=="string"){i=String(i);for(var e=['"'],t=0;t<i.length;t++){var r=i.charAt(t),s=r.charCodeAt(0),a=t+1,l;(l=Iv[r])||(31<s&&127>s||(s=r,s in Ub?r=Ub[s]:s in Iv?r=Ub[s]=Iv[s]:(l=s.charCodeAt(0),31<l&&127>l?r=s:(256>l?(r="\\x",(16>l||256<l)&&(r+="0")):(r="\\u",4096>l&&(r+="0")),r+=l.toString(16).toUpperCase()),r=Ub[s]=r)),l=r),e[a]=l}e.push('"'),i=e.join("")}else i=i.toString();return i},void 0);Ne("jspb.utils.stringToByteArray",function(i){for(var e=new Uint8Array(i.length),t=0;t<i.length;t++){var r=i.charCodeAt(t);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");e[t]=r}return e},void 0);function Vb(i){return i.constructor===Uint8Array?i:i.constructor===ArrayBuffer?new Uint8Array(i):i.constructor===Array?new Uint8Array(i):i.constructor===String?lT(i):i instanceof Uint8Array?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):(li("Type not convertible to Uint8Array."),new Uint8Array(0))}Ne("jspb.utils.byteSourceToUint8Array",Vb,void 0);function K(i,e,t){this.b=null,this.a=this.c=this.h=0,this.v=!1,i&&this.H(i,e,t)}Ne("jspb.BinaryDecoder",K,void 0);var Ip=[];K.getInstanceCacheLength=function(){return Ip.length};function Wb(i,e,t){if(Ip.length){var r=Ip.pop();return i&&r.H(i,e,t),r}return new K(i,e,t)}K.alloc=Wb;K.prototype.Ca=function(){this.clear(),100>Ip.length&&Ip.push(this)};K.prototype.free=K.prototype.Ca;K.prototype.clone=function(){return Wb(this.b,this.h,this.c-this.h)};K.prototype.clone=K.prototype.clone;K.prototype.clear=function(){this.b=null,this.a=this.c=this.h=0,this.v=!1};K.prototype.clear=K.prototype.clear;K.prototype.Y=function(){return this.b};K.prototype.getBuffer=K.prototype.Y;K.prototype.H=function(i,e,t){this.b=Vb(i),this.h=e!==void 0?e:0,this.c=t!==void 0?this.h+t:this.b.length,this.a=this.h};K.prototype.setBlock=K.prototype.H;K.prototype.Db=function(){return this.c};K.prototype.getEnd=K.prototype.Db;K.prototype.setEnd=function(i){this.c=i};K.prototype.setEnd=K.prototype.setEnd;K.prototype.reset=function(){this.a=this.h};K.prototype.reset=K.prototype.reset;K.prototype.B=function(){return this.a};K.prototype.getCursor=K.prototype.B;K.prototype.Ma=function(i){this.a=i};K.prototype.setCursor=K.prototype.Ma;K.prototype.advance=function(i){this.a+=i,q(this.a<=this.c)};K.prototype.advance=K.prototype.advance;K.prototype.ya=function(){return this.a==this.c};K.prototype.atEnd=K.prototype.ya;K.prototype.Qb=function(){return this.a>this.c};K.prototype.pastEnd=K.prototype.Qb;K.prototype.getError=function(){return this.v||0>this.a||this.a>this.c};K.prototype.getError=K.prototype.getError;K.prototype.w=function(i){for(var e=128,t=0,r=0,s=0;4>s&&128<=e;s++)e=this.b[this.a++],t|=(e&127)<<7*s;if(128<=e&&(e=this.b[this.a++],t|=(e&127)<<28,r|=(e&127)>>4),128<=e)for(s=0;5>s&&128<=e;s++)e=this.b[this.a++],r|=(e&127)<<7*s+3;if(128>e)return i(t>>>0,r>>>0);li("Failed to read varint, encoding is invalid."),this.v=!0};K.prototype.readSplitVarint64=K.prototype.w;K.prototype.ea=function(i){return this.w(function(e,t){return jb(e,t,i)})};K.prototype.readSplitZigzagVarint64=K.prototype.ea;K.prototype.ta=function(i){var e=this.b,t=this.a;this.a+=8;for(var r=0,s=0,a=t+7;a>=t;a--)r=r<<8|e[a],s=s<<8|e[a+4];return i(r,s)};K.prototype.readSplitFixed64=K.prototype.ta;K.prototype.kb=function(){for(;this.b[this.a]&128;)this.a++;this.a++};K.prototype.skipVarint=K.prototype.kb;K.prototype.mb=function(i){for(;128<i;)this.a--,i>>>=7;this.a--};K.prototype.unskipVarint=K.prototype.mb;K.prototype.o=function(){var i=this.b,e=i[this.a],t=e&127;return 128>e?(this.a+=1,q(this.a<=this.c),t):(e=i[this.a+1],t|=(e&127)<<7,128>e?(this.a+=2,q(this.a<=this.c),t):(e=i[this.a+2],t|=(e&127)<<14,128>e?(this.a+=3,q(this.a<=this.c),t):(e=i[this.a+3],t|=(e&127)<<21,128>e?(this.a+=4,q(this.a<=this.c),t):(e=i[this.a+4],t|=(e&15)<<28,128>e?(this.a+=5,q(this.a<=this.c),t>>>0):(this.a+=5,128<=i[this.a++]&&128<=i[this.a++]&&128<=i[this.a++]&&128<=i[this.a++]&&128<=i[this.a++]&&q(!1),q(this.a<=this.c),t)))))};K.prototype.readUnsignedVarint32=K.prototype.o;K.prototype.da=function(){return~~this.o()};K.prototype.readSignedVarint32=K.prototype.da;K.prototype.O=function(){return this.o().toString()};K.prototype.Ea=function(){return this.da().toString()};K.prototype.readSignedVarint32String=K.prototype.Ea;K.prototype.Ia=function(){var i=this.o();return i>>>1^-(i&1)};K.prototype.readZigzagVarint32=K.prototype.Ia;K.prototype.Ga=function(){return this.w(xl)};K.prototype.readUnsignedVarint64=K.prototype.Ga;K.prototype.Ha=function(){return this.w(Ap)};K.prototype.readUnsignedVarint64String=K.prototype.Ha;K.prototype.sa=function(){return this.w(Tp)};K.prototype.readSignedVarint64=K.prototype.sa;K.prototype.Fa=function(){return this.w(Cp)};K.prototype.readSignedVarint64String=K.prototype.Fa;K.prototype.Ja=function(){return this.w(hT)};K.prototype.readZigzagVarint64=K.prototype.Ja;K.prototype.fb=function(){return this.ea(Gb)};K.prototype.readZigzagVarintHash64=K.prototype.fb;K.prototype.Ka=function(){return this.ea(Cp)};K.prototype.readZigzagVarint64String=K.prototype.Ka;K.prototype.Gc=function(){var i=this.b[this.a];return this.a+=1,q(this.a<=this.c),i};K.prototype.readUint8=K.prototype.Gc;K.prototype.Ec=function(){var i=this.b[this.a],e=this.b[this.a+1];return this.a+=2,q(this.a<=this.c),i<<0|e<<8};K.prototype.readUint16=K.prototype.Ec;K.prototype.m=function(){var i=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,q(this.a<=this.c),(i<<0|e<<8|t<<16|r<<24)>>>0};K.prototype.readUint32=K.prototype.m;K.prototype.ga=function(){var i=this.m(),e=this.m();return xl(i,e)};K.prototype.readUint64=K.prototype.ga;K.prototype.ha=function(){var i=this.m(),e=this.m();return Ap(i,e)};K.prototype.readUint64String=K.prototype.ha;K.prototype.Xb=function(){var i=this.b[this.a];return this.a+=1,q(this.a<=this.c),i<<24>>24};K.prototype.readInt8=K.prototype.Xb;K.prototype.Vb=function(){var i=this.b[this.a],e=this.b[this.a+1];return this.a+=2,q(this.a<=this.c),(i<<0|e<<8)<<16>>16};K.prototype.readInt16=K.prototype.Vb;K.prototype.P=function(){var i=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,q(this.a<=this.c),i<<0|e<<8|t<<16|r<<24};K.prototype.readInt32=K.prototype.P;K.prototype.ba=function(){var i=this.m(),e=this.m();return Tp(i,e)};K.prototype.readInt64=K.prototype.ba;K.prototype.ca=function(){var i=this.m(),e=this.m();return Cp(i,e)};K.prototype.readInt64String=K.prototype.ca;K.prototype.aa=function(){var i=this.m();return dT(i,0)};K.prototype.readFloat=K.prototype.aa;K.prototype.Z=function(){var i=this.m(),e=this.m();return fT(i,e)};K.prototype.readDouble=K.prototype.Z;K.prototype.pa=function(){return!!this.b[this.a++]};K.prototype.readBool=K.prototype.pa;K.prototype.ra=function(){return this.da()};K.prototype.readEnum=K.prototype.ra;K.prototype.fa=function(i){var e=this.b,t=this.a;i=t+i;for(var r=[],s="";t<i;){var a=e[t++];if(128>a)r.push(a);else{if(192>a)continue;if(224>a){var l=e[t++];r.push((a&31)<<6|l&63)}else if(240>a){l=e[t++];var u=e[t++];r.push((a&15)<<12|(l&63)<<6|u&63)}else if(248>a){l=e[t++],u=e[t++];var m=e[t++];a=(a&7)<<18|(l&63)<<12|(u&63)<<6|m&63,a-=65536,r.push((a>>10&1023)+55296,(a&1023)+56320)}}8192<=r.length&&(s+=String.fromCharCode.apply(null,r),r.length=0)}return s+=sT(r),this.a=t,s};K.prototype.readString=K.prototype.fa;K.prototype.Dc=function(){var i=this.o();return this.fa(i)};K.prototype.readStringWithLength=K.prototype.Dc;K.prototype.qa=function(i){if(0>i||this.a+i>this.b.length)return this.v=!0,li("Invalid byte length!"),new Uint8Array(0);var e=this.b.subarray(this.a,this.a+i);return this.a+=i,q(this.a<=this.c),e};K.prototype.readBytes=K.prototype.qa;K.prototype.ia=function(){return this.w(Gb)};K.prototype.readVarintHash64=K.prototype.ia;K.prototype.$=function(){var i=this.b,e=this.a,t=i[e],r=i[e+1],s=i[e+2],a=i[e+3],l=i[e+4],u=i[e+5],m=i[e+6];return i=i[e+7],this.a+=8,String.fromCharCode(t,r,s,a,l,u,m,i)};K.prototype.readFixedHash64=K.prototype.$;function A(i,e,t){this.a=Wb(i,e,t),this.O=this.a.B(),this.b=this.c=-1,this.h=!1,this.v=null}Ne("jspb.BinaryReader",A,void 0);var yl=[];A.clearInstanceCache=function(){yl=[]};A.getInstanceCacheLength=function(){return yl.length};function yT(i,e,t){if(yl.length){var r=yl.pop();return i&&r.a.H(i,e,t),r}return new A(i,e,t)}A.alloc=yT;A.prototype.zb=yT;A.prototype.alloc=A.prototype.zb;A.prototype.Ca=function(){this.a.clear(),this.b=this.c=-1,this.h=!1,this.v=null,100>yl.length&&yl.push(this)};A.prototype.free=A.prototype.Ca;A.prototype.Fb=function(){return this.O};A.prototype.getFieldCursor=A.prototype.Fb;A.prototype.B=function(){return this.a.B()};A.prototype.getCursor=A.prototype.B;A.prototype.Y=function(){return this.a.Y()};A.prototype.getBuffer=A.prototype.Y;A.prototype.Hb=function(){return this.c};A.prototype.getFieldNumber=A.prototype.Hb;A.prototype.Lb=function(){return this.b};A.prototype.getWireType=A.prototype.Lb;A.prototype.Mb=function(){return this.b==2};A.prototype.isDelimited=A.prototype.Mb;A.prototype.bb=function(){return this.b==4};A.prototype.isEndGroup=A.prototype.bb;A.prototype.getError=function(){return this.h||this.a.getError()};A.prototype.getError=A.prototype.getError;A.prototype.H=function(i,e,t){this.a.H(i,e,t),this.b=this.c=-1};A.prototype.setBlock=A.prototype.H;A.prototype.reset=function(){this.a.reset(),this.b=this.c=-1};A.prototype.reset=A.prototype.reset;A.prototype.advance=function(i){this.a.advance(i)};A.prototype.advance=A.prototype.advance;A.prototype.oa=function(){if(this.a.ya())return!1;if(this.getError())return li("Decoder hit an error"),!1;this.O=this.a.B();var i=this.a.o(),e=i>>>3;return i&=7,i!=0&&i!=5&&i!=1&&i!=2&&i!=3&&i!=4?(li("Invalid wire type: %s (at position %s)",i,this.O),this.h=!0,!1):(this.c=e,this.b=i,!0)};A.prototype.nextField=A.prototype.oa;A.prototype.Oa=function(){this.a.mb(this.c<<3|this.b)};A.prototype.unskipHeader=A.prototype.Oa;A.prototype.Lc=function(){var i=this.c;for(this.Oa();this.oa()&&this.c==i;)this.C();this.a.ya()||this.Oa()};A.prototype.skipMatchingFields=A.prototype.Lc;A.prototype.lb=function(){this.b!=0?(li("Invalid wire type for skipVarintField"),this.C()):this.a.kb()};A.prototype.skipVarintField=A.prototype.lb;A.prototype.gb=function(){if(this.b!=2)li("Invalid wire type for skipDelimitedField"),this.C();else{var i=this.a.o();this.a.advance(i)}};A.prototype.skipDelimitedField=A.prototype.gb;A.prototype.hb=function(){this.b!=5?(li("Invalid wire type for skipFixed32Field"),this.C()):this.a.advance(4)};A.prototype.skipFixed32Field=A.prototype.hb;A.prototype.ib=function(){this.b!=1?(li("Invalid wire type for skipFixed64Field"),this.C()):this.a.advance(8)};A.prototype.skipFixed64Field=A.prototype.ib;A.prototype.jb=function(){var i=this.c;do{if(!this.oa()){li("Unmatched start-group tag: stream EOF"),this.h=!0;break}if(this.b==4){this.c!=i&&(li("Unmatched end-group tag"),this.h=!0);break}this.C()}while(1)};A.prototype.skipGroup=A.prototype.jb;A.prototype.C=function(){switch(this.b){case 0:this.lb();break;case 1:this.ib();break;case 2:this.gb();break;case 5:this.hb();break;case 3:this.jb();break;default:li("Invalid wire encoding for field.")}};A.prototype.skipField=A.prototype.C;A.prototype.Hc=function(i,e){this.v===null&&(this.v={}),q(!this.v[i]),this.v[i]=e};A.prototype.registerReadCallback=A.prototype.Hc;A.prototype.Ic=function(i){return q(this.v!==null),i=this.v[i],q(i),i(this)};A.prototype.runReadCallback=A.prototype.Ic;A.prototype.Yb=function(i,e){q(this.b==2);var t=this.a.c,r=this.a.o();r=this.a.B()+r,this.a.setEnd(r),e(i,this),this.a.Ma(r),this.a.setEnd(t)};A.prototype.readMessage=A.prototype.Yb;A.prototype.Ub=function(i,e,t){q(this.b==3),q(this.c==i),t(e,this),this.h||this.b==4||(li("Group submessage did not end with an END_GROUP tag"),this.h=!0)};A.prototype.readGroup=A.prototype.Ub;A.prototype.Gb=function(){q(this.b==2);var i=this.a.o(),e=this.a.B(),t=e+i;return i=Wb(this.a.Y(),e,i),this.a.Ma(t),i};A.prototype.getFieldDecoder=A.prototype.Gb;A.prototype.P=function(){return q(this.b==0),this.a.da()};A.prototype.readInt32=A.prototype.P;A.prototype.Wb=function(){return q(this.b==0),this.a.Ea()};A.prototype.readInt32String=A.prototype.Wb;A.prototype.ba=function(){return q(this.b==0),this.a.sa()};A.prototype.readInt64=A.prototype.ba;A.prototype.ca=function(){return q(this.b==0),this.a.Fa()};A.prototype.readInt64String=A.prototype.ca;A.prototype.m=function(){return q(this.b==0),this.a.o()};A.prototype.readUint32=A.prototype.m;A.prototype.Fc=function(){return q(this.b==0),this.a.O()};A.prototype.readUint32String=A.prototype.Fc;A.prototype.ga=function(){return q(this.b==0),this.a.Ga()};A.prototype.readUint64=A.prototype.ga;A.prototype.ha=function(){return q(this.b==0),this.a.Ha()};A.prototype.readUint64String=A.prototype.ha;A.prototype.zc=function(){return q(this.b==0),this.a.Ia()};A.prototype.readSint32=A.prototype.zc;A.prototype.Ac=function(){return q(this.b==0),this.a.Ja()};A.prototype.readSint64=A.prototype.Ac;A.prototype.Bc=function(){return q(this.b==0),this.a.Ka()};A.prototype.readSint64String=A.prototype.Bc;A.prototype.Rb=function(){return q(this.b==5),this.a.m()};A.prototype.readFixed32=A.prototype.Rb;A.prototype.Sb=function(){return q(this.b==1),this.a.ga()};A.prototype.readFixed64=A.prototype.Sb;A.prototype.Tb=function(){return q(this.b==1),this.a.ha()};A.prototype.readFixed64String=A.prototype.Tb;A.prototype.vc=function(){return q(this.b==5),this.a.P()};A.prototype.readSfixed32=A.prototype.vc;A.prototype.wc=function(){return q(this.b==5),this.a.P().toString()};A.prototype.readSfixed32String=A.prototype.wc;A.prototype.xc=function(){return q(this.b==1),this.a.ba()};A.prototype.readSfixed64=A.prototype.xc;A.prototype.yc=function(){return q(this.b==1),this.a.ca()};A.prototype.readSfixed64String=A.prototype.yc;A.prototype.aa=function(){return q(this.b==5),this.a.aa()};A.prototype.readFloat=A.prototype.aa;A.prototype.Z=function(){return q(this.b==1),this.a.Z()};A.prototype.readDouble=A.prototype.Z;A.prototype.pa=function(){return q(this.b==0),!!this.a.o()};A.prototype.readBool=A.prototype.pa;A.prototype.ra=function(){return q(this.b==0),this.a.sa()};A.prototype.readEnum=A.prototype.ra;A.prototype.fa=function(){q(this.b==2);var i=this.a.o();return this.a.fa(i)};A.prototype.readString=A.prototype.fa;A.prototype.qa=function(){q(this.b==2);var i=this.a.o();return this.a.qa(i)};A.prototype.readBytes=A.prototype.qa;A.prototype.ia=function(){return q(this.b==0),this.a.ia()};A.prototype.readVarintHash64=A.prototype.ia;A.prototype.Cc=function(){return q(this.b==0),this.a.fb()};A.prototype.readSintHash64=A.prototype.Cc;A.prototype.w=function(i){return q(this.b==0),this.a.w(i)};A.prototype.readSplitVarint64=A.prototype.w;A.prototype.ea=function(i){return q(this.b==0),this.a.w(function(e,t){return jb(e,t,i)})};A.prototype.readSplitZigzagVarint64=A.prototype.ea;A.prototype.$=function(){return q(this.b==1),this.a.$()};A.prototype.readFixedHash64=A.prototype.$;A.prototype.ta=function(i){return q(this.b==1),this.a.ta(i)};A.prototype.readSplitFixed64=A.prototype.ta;function Pt(i,e){q(i.b==2);var t=i.a.o();t=i.a.B()+t;for(var r=[];i.a.B()<t;)r.push(e.call(i.a));return r}A.prototype.gc=function(){return Pt(this,this.a.da)};A.prototype.readPackedInt32=A.prototype.gc;A.prototype.hc=function(){return Pt(this,this.a.Ea)};A.prototype.readPackedInt32String=A.prototype.hc;A.prototype.ic=function(){return Pt(this,this.a.sa)};A.prototype.readPackedInt64=A.prototype.ic;A.prototype.jc=function(){return Pt(this,this.a.Fa)};A.prototype.readPackedInt64String=A.prototype.jc;A.prototype.qc=function(){return Pt(this,this.a.o)};A.prototype.readPackedUint32=A.prototype.qc;A.prototype.rc=function(){return Pt(this,this.a.O)};A.prototype.readPackedUint32String=A.prototype.rc;A.prototype.sc=function(){return Pt(this,this.a.Ga)};A.prototype.readPackedUint64=A.prototype.sc;A.prototype.tc=function(){return Pt(this,this.a.Ha)};A.prototype.readPackedUint64String=A.prototype.tc;A.prototype.nc=function(){return Pt(this,this.a.Ia)};A.prototype.readPackedSint32=A.prototype.nc;A.prototype.oc=function(){return Pt(this,this.a.Ja)};A.prototype.readPackedSint64=A.prototype.oc;A.prototype.pc=function(){return Pt(this,this.a.Ka)};A.prototype.readPackedSint64String=A.prototype.pc;A.prototype.bc=function(){return Pt(this,this.a.m)};A.prototype.readPackedFixed32=A.prototype.bc;A.prototype.cc=function(){return Pt(this,this.a.ga)};A.prototype.readPackedFixed64=A.prototype.cc;A.prototype.dc=function(){return Pt(this,this.a.ha)};A.prototype.readPackedFixed64String=A.prototype.dc;A.prototype.kc=function(){return Pt(this,this.a.P)};A.prototype.readPackedSfixed32=A.prototype.kc;A.prototype.lc=function(){return Pt(this,this.a.ba)};A.prototype.readPackedSfixed64=A.prototype.lc;A.prototype.mc=function(){return Pt(this,this.a.ca)};A.prototype.readPackedSfixed64String=A.prototype.mc;A.prototype.fc=function(){return Pt(this,this.a.aa)};A.prototype.readPackedFloat=A.prototype.fc;A.prototype.$b=function(){return Pt(this,this.a.Z)};A.prototype.readPackedDouble=A.prototype.$b;A.prototype.Zb=function(){return Pt(this,this.a.pa)};A.prototype.readPackedBool=A.prototype.Zb;A.prototype.ac=function(){return Pt(this,this.a.ra)};A.prototype.readPackedEnum=A.prototype.ac;A.prototype.uc=function(){return Pt(this,this.a.ia)};A.prototype.readPackedVarintHash64=A.prototype.uc;A.prototype.ec=function(){return Pt(this,this.a.$)};A.prototype.readPackedFixedHash64=A.prototype.ec;function kp(i,e,t,r,s){this.ma=i,this.Ba=e,this.la=t,this.Na=r,this.na=s}Ne("jspb.ExtensionFieldInfo",kp,void 0);function _T(i,e,t,r,s,a){this.Za=i,this.za=e,this.Aa=t,this.Wa=r,this.Ab=s,this.Nb=a}Ne("jspb.ExtensionFieldBinaryInfo",_T,void 0);kp.prototype.F=function(){return!!this.la};kp.prototype.isMessageType=kp.prototype.F;function Te(){}Ne("jspb.Message",Te,void 0);Te.GENERATE_TO_OBJECT=!0;Te.GENERATE_FROM_OBJECT=!0;var Kb=typeof Uint8Array=="function";Te.prototype.Ib=function(){return this.b};Te.prototype.getJsPbMessageId=Te.prototype.Ib;Te.initialize=function(i,e,t,r,s,a){i.f=null,e||(e=t?[t]:[]),i.b=t?String(t):void 0,i.D=t===0?-1:0,i.u=e;e:{if(t=i.u.length,e=-1,t&&(e=t-1,t=i.u[e],!(t===null||typeof t!="object"||Array.isArray(t)||Kb&&t instanceof Uint8Array))){i.G=e-i.D,i.i=t;break e}-1<r?(i.G=Math.max(r,e+1-i.D),i.i=null):i.G=Number.MAX_VALUE}if(i.a={},s)for(r=0;r<s.length;r++)e=s[r],e<i.G?(e+=i.D,i.u[e]=i.u[e]||Sp):($b(i),i.i[e]=i.i[e]||Sp);if(a&&a.length)for(r=0;r<a.length;r++)Av(i,a[r])};var Sp=Object.freeze?Object.freeze([]):[];function $b(i){var e=i.G+i.D;i.u[e]||(i.i=i.u[e]={})}function xT(i,e,t){for(var r=[],s=0;s<i.length;s++)r[s]=e.call(i[s],t,i[s]);return r}Te.toObjectList=xT;Te.toObjectExtension=function(i,e,t,r,s){for(var a in t){var l=t[a],u=r.call(i,l);if(u!=null){for(var m in l.Ba)if(l.Ba.hasOwnProperty(m))break;e[m]=l.Na?l.na?xT(u,l.Na,s):l.Na(s,u):u}}};Te.serializeBinaryExtensions=function(i,e,t,r){for(var s in t){var a=t[s],l=a.Za;if(!a.Aa)throw Error("Message extension present that was generated without binary serialization support");var u=r.call(i,l);if(u!=null)if(l.F())if(a.Wa)a.Aa.call(e,l.ma,u,a.Wa);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else a.Aa.call(e,l.ma,u)}};Te.readBinaryExtension=function(i,e,t,r,s){var a=t[e.c];if(a){if(t=a.Za,!a.za)throw Error("Deserializing extension whose generated code does not support binary format");if(t.F()){var l=new t.la;a.za.call(e,l,a.Ab)}else l=a.za.call(e);t.na&&!a.Nb?(e=r.call(i,t))?e.push(l):s.call(i,t,[l]):s.call(i,t,l)}else e.C()};function ir(i,e){if(e<i.G){e+=i.D;var t=i.u[e];return t===Sp?i.u[e]=[]:t}if(i.i)return t=i.i[e],t===Sp?i.i[e]=[]:t}Te.getField=ir;Te.getRepeatedField=function(i,e){return ir(i,e)};function vT(i,e){return i=ir(i,e),i==null?i:+i}Te.getOptionalFloatingPointField=vT;function IT(i,e){return i=ir(i,e),i==null?i:!!i}Te.getBooleanField=IT;Te.getRepeatedFloatingPointField=function(i,e){var t=ir(i,e);if(i.a||(i.a={}),!i.a[e]){for(var r=0;r<t.length;r++)t[r]=+t[r];i.a[e]=!0}return t};Te.getRepeatedBooleanField=function(i,e){var t=ir(i,e);if(i.a||(i.a={}),!i.a[e]){for(var r=0;r<t.length;r++)t[r]=!!t[r];i.a[e]=!0}return t};function kT(i){return i==null||typeof i=="string"?i:Kb&&i instanceof Uint8Array?oT(i):(li("Cannot coerce to b64 string: "+zn(i)),null)}Te.bytesAsB64=kT;function ST(i){return i==null||i instanceof Uint8Array?i:typeof i=="string"?lT(i):(li("Cannot coerce to Uint8Array: "+zn(i)),null)}Te.bytesAsU8=ST;Te.bytesListAsB64=function(i){return wT(i),i.length&&typeof i[0]!="string"?wp(i,kT):i};Te.bytesListAsU8=function(i){return wT(i),!i.length||i[0]instanceof Uint8Array?i:wp(i,ST)};function wT(i){if(i&&1<i.length){var e=zn(i[0]);FR(i,function(t){zn(t)!=e&&li("Inconsistent type in JSPB repeated field array. Got "+zn(t)+" expected "+e)})}}function ET(i,e,t){return i=ir(i,e),i??t}Te.getFieldWithDefault=ET;Te.getBooleanFieldWithDefault=function(i,e,t){return i=IT(i,e),i??t};Te.getFloatingPointFieldWithDefault=function(i,e,t){return i=vT(i,e),i??t};Te.getFieldProto3=ET;Te.getMapField=function(i,e,t,r){if(i.f||(i.f={}),e in i.f)return i.f[e];var s=ir(i,e);if(!s){if(t)return;s=[],Hn(i,e,s)}return i.f[e]=new qe(s,r)};function Hn(i,e,t){return Wr(i,Te),e<i.G?i.u[e+i.D]=t:($b(i),i.i[e]=t),i}Te.setField=Hn;Te.setProto3IntField=function(i,e,t){return Ra(i,e,t,0)};Te.setProto3FloatField=function(i,e,t){return Ra(i,e,t,0)};Te.setProto3BooleanField=function(i,e,t){return Ra(i,e,t,!1)};Te.setProto3StringField=function(i,e,t){return Ra(i,e,t,"")};Te.setProto3BytesField=function(i,e,t){return Ra(i,e,t,"")};Te.setProto3EnumField=function(i,e,t){return Ra(i,e,t,0)};Te.setProto3StringIntField=function(i,e,t){return Ra(i,e,t,"0")};function Ra(i,e,t,r){return Wr(i,Te),t!==r?Hn(i,e,t):e<i.G?i.u[e+i.D]=null:($b(i),delete i.i[e]),i}Te.addToRepeatedField=function(i,e,t,r){return Wr(i,Te),e=ir(i,e),r!=null?e.splice(r,0,t):e.push(t),i};function LT(i,e,t,r){return Wr(i,Te),(t=Av(i,t))&&t!==e&&r!==void 0&&(i.f&&t in i.f&&(i.f[t]=void 0),Hn(i,t,void 0)),Hn(i,e,r)}Te.setOneofField=LT;function Av(i,e){for(var t,r,s=0;s<e.length;s++){var a=e[s],l=ir(i,a);l!=null&&(t=a,r=l,Hn(i,a,void 0))}return t?(Hn(i,t,r),t):0}Te.computeOneofCase=Av;Te.getWrapperField=function(i,e,t,r){if(i.f||(i.f={}),!i.f[t]){var s=ir(i,t);(r||s)&&(i.f[t]=new e(s))}return i.f[t]};Te.getRepeatedWrapperField=function(i,e,t){return TT(i,e,t),e=i.f[t],e==Sp&&(e=i.f[t]=[]),e};function TT(i,e,t){if(i.f||(i.f={}),!i.f[t]){for(var r=ir(i,t),s=[],a=0;a<r.length;a++)s[a]=new e(r[a]);i.f[t]=s}}Te.setWrapperField=function(i,e,t){Wr(i,Te),i.f||(i.f={});var r=t&&t.g();return i.f[e]=t,Hn(i,e,r)};Te.setOneofWrapperField=function(i,e,t,r){Wr(i,Te),i.f||(i.f={});var s=r&&r.g();return i.f[e]=r,LT(i,e,t,s)};Te.setRepeatedWrapperField=function(i,e,t){Wr(i,Te),i.f||(i.f={}),t=t||[];for(var r=[],s=0;s<t.length;s++)r[s]=t[s].g();return i.f[e]=t,Hn(i,e,r)};Te.addToRepeatedWrapperField=function(i,e,t,r,s){TT(i,r,e);var a=i.f[e];return a||(a=i.f[e]=[]),t=t||new r,i=ir(i,e),s!=null?(a.splice(s,0,t),i.splice(s,0,t.g())):(a.push(t),i.push(t.g())),t};Te.toMap=function(i,e,t,r){for(var s={},a=0;a<i.length;a++)s[e.call(i[a])]=t?t.call(i[a],r,i[a]):i[a];return s};function AT(i){if(i.f)for(var e in i.f){var t=i.f[e];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].g();else t&&t.g()}}Te.prototype.g=function(){return AT(this),this.u};Te.prototype.toArray=Te.prototype.g;Te.prototype.toString=function(){return AT(this),this.u.toString()};Te.prototype.getExtension=function(i){if(this.i){this.f||(this.f={});var e=i.ma;if(i.na){if(i.F())return this.f[e]||(this.f[e]=wp(this.i[e]||[],function(t){return new i.la(t)})),this.f[e]}else if(i.F())return!this.f[e]&&this.i[e]&&(this.f[e]=new i.la(this.i[e])),this.f[e];return this.i[e]}};Te.prototype.getExtension=Te.prototype.getExtension;Te.prototype.Kc=function(i,e){this.f||(this.f={}),$b(this);var t=i.ma;return i.na?(e=e||[],i.F()?(this.f[t]=e,this.i[t]=wp(e,function(r){return r.g()})):this.i[t]=e):i.F()?(this.f[t]=e,this.i[t]=e&&e.g()):this.i[t]=e,this};Te.prototype.setExtension=Te.prototype.Kc;Te.difference=function(i,e){if(!(i instanceof e.constructor))throw Error("Messages have different types.");var t=i.g();e=e.g();var r=[],s=0,a=t.length>e.length?t.length:e.length;for(i.b&&(r[0]=i.b,s=1);s<a;s++)Rp(t[s],e[s])||(r[s]=e[s]);return new i.constructor(r)};Te.equals=function(i,e){return i==e||!(!i||!e)&&i instanceof e.constructor&&Rp(i.g(),e.g())};function kv(i,e){i=i||{},e=e||{};var t={},r;for(r in i)t[r]=0;for(r in e)t[r]=0;for(r in t)if(!Rp(i[r],e[r]))return!1;return!0}Te.compareExtensions=kv;function Rp(i,e){if(i==e)return!0;if(!ZL(i)||!ZL(e))return typeof i=="number"&&isNaN(i)||typeof e=="number"&&isNaN(e)?String(i)==String(e):!1;if(i.constructor!=e.constructor)return!1;if(Kb&&i.constructor===Uint8Array){if(i.length!=e.length)return!1;for(var t=0;t<i.length;t++)if(i[t]!=e[t])return!1;return!0}if(i.constructor===Array){var r=void 0,s=void 0,a=Math.max(i.length,e.length);for(t=0;t<a;t++){var l=i[t],u=e[t];if(l&&l.constructor==Object&&(q(r===void 0),q(t===i.length-1),r=l,l=void 0),u&&u.constructor==Object&&(q(s===void 0),q(t===e.length-1),s=u,u=void 0),!Rp(l,u))return!1}return r||s?(r=r||{},s=s||{},kv(r,s)):!0}if(i.constructor===Object)return kv(i,e);throw Error("Invalid type in JSPB array")}Te.compareFields=Rp;Te.prototype.Bb=function(){return Yb(this)};Te.prototype.cloneMessage=Te.prototype.Bb;Te.prototype.clone=function(){return Yb(this)};Te.prototype.clone=Te.prototype.clone;Te.clone=function(i){return Yb(i)};function Yb(i){return new i.constructor(Sv(i.g()))}Te.copyInto=function(i,e){Wr(i,Te),Wr(e,Te),q(i.constructor==e.constructor,"Copy source and target message should have the same type."),i=Yb(i);for(var t=e.g(),r=i.g(),s=t.length=0;s<r.length;s++)t[s]=r[s];e.f=i.f,e.i=i.i};function Sv(i){if(Array.isArray(i)){for(var e=Array(i.length),t=0;t<i.length;t++){var r=i[t];r!=null&&(e[t]=typeof r=="object"?Sv(q(r)):r)}return e}if(Kb&&i instanceof Uint8Array)return new Uint8Array(i);e={};for(t in i)r=i[t],r!=null&&(e[t]=typeof r=="object"?Sv(q(r)):r);return e}Te.registerMessageType=function(i,e){e.we=i};var Vr={dump:function(i){return Wr(i,Te,"jspb.Message instance expected"),q(i.getExtension,"Only unobfuscated and unoptimized compilation modes supported."),Vr.X(i)}};Ne("jspb.debug.dump",Vr.dump,void 0);Vr.X=function(i){var e=zn(i);if(e=="number"||e=="string"||e=="boolean"||e=="null"||e=="undefined"||typeof Uint8Array<"u"&&i instanceof Uint8Array)return i;if(e=="array")return zR(i),wp(i,Vr.X);if(i instanceof qe){var t={};i=i.entries();for(var r=i.next();!r.done;r=i.next())t[r.value[0]]=Vr.X(r.value[1]);return t}Wr(i,Te,"Only messages expected: "+i),e=i.constructor;var s={$name:e.name||e.displayName};for(u in e.prototype){var a=/^get([A-Z]\w*)/.exec(u);if(a&&u!="getExtension"&&u!="getJsPbMessageId"){var l="has"+a[1];(!i[l]||i[l]())&&(l=i[u](),s[Vr.$a(a[1])]=Vr.X(l))}}if(i.extensionObject_)return s.$extensions="Recursive dumping of extensions not supported in compiled code. Switch to uncompiled or dump extension object directly",s;for(r in e.extensions)if(/^\d+$/.test(r)){l=e.extensions[r];var u=i.getExtension(l);a=void 0,l=l.Ba;var m=[],p=0;for(a in l)m[p++]=a;a=m[0],u!=null&&(t||(t=s.$extensions={}),t[Vr.$a(a)]=Vr.X(u))}return s};Vr.$a=function(i){return i.replace(/^[A-Z]/,function(e){return e.toLowerCase()})};function _e(){this.a=[]}Ne("jspb.BinaryEncoder",_e,void 0);_e.prototype.length=function(){return this.a.length};_e.prototype.length=_e.prototype.length;_e.prototype.end=function(){var i=this.a;return this.a=[],i};_e.prototype.end=_e.prototype.end;_e.prototype.l=function(i,e){for(q(i==Math.floor(i)),q(e==Math.floor(e)),q(0<=i&&4294967296>i),q(0<=e&&4294967296>e);0<e||127<i;)this.a.push(i&127|128),i=(i>>>7|e<<25)>>>0,e>>>=7;this.a.push(i)};_e.prototype.writeSplitVarint64=_e.prototype.l;_e.prototype.A=function(i,e){q(i==Math.floor(i)),q(e==Math.floor(e)),q(0<=i&&4294967296>i),q(0<=e&&4294967296>e),this.s(i),this.s(e)};_e.prototype.writeSplitFixed64=_e.prototype.A;_e.prototype.j=function(i){for(q(i==Math.floor(i)),q(0<=i&&4294967296>i);127<i;)this.a.push(i&127|128),i>>>=7;this.a.push(i)};_e.prototype.writeUnsignedVarint32=_e.prototype.j;_e.prototype.M=function(i){if(q(i==Math.floor(i)),q(-2147483648<=i&&2147483648>i),0<=i)this.j(i);else{for(var e=0;9>e;e++)this.a.push(i&127|128),i>>=7;this.a.push(1)}};_e.prototype.writeSignedVarint32=_e.prototype.M;_e.prototype.va=function(i){q(i==Math.floor(i)),q(0<=i&&18446744073709552e3>i),Lp(i),this.l(It,Et)};_e.prototype.writeUnsignedVarint64=_e.prototype.va;_e.prototype.ua=function(i){q(i==Math.floor(i)),q(-9223372036854776e3<=i&&9223372036854776e3>i),Lp(i),this.l(It,Et)};_e.prototype.writeSignedVarint64=_e.prototype.ua;_e.prototype.wa=function(i){q(i==Math.floor(i)),q(-2147483648<=i&&2147483648>i),this.j((i<<1^i>>31)>>>0)};_e.prototype.writeZigzagVarint32=_e.prototype.wa;_e.prototype.xa=function(i){q(i==Math.floor(i)),q(-9223372036854776e3<=i&&9223372036854776e3>i),uT(i),this.l(It,Et)};_e.prototype.writeZigzagVarint64=_e.prototype.xa;_e.prototype.Ta=function(i){this.W(Mp(i))};_e.prototype.writeZigzagVarint64String=_e.prototype.Ta;_e.prototype.W=function(i){var e=this;Os(i),Hb(It,Et,function(t,r){e.l(t>>>0,r>>>0)})};_e.prototype.writeZigzagVarintHash64=_e.prototype.W;_e.prototype.be=function(i){q(i==Math.floor(i)),q(0<=i&&256>i),this.a.push(i>>>0&255)};_e.prototype.writeUint8=_e.prototype.be;_e.prototype.ae=function(i){q(i==Math.floor(i)),q(0<=i&&65536>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255)};_e.prototype.writeUint16=_e.prototype.ae;_e.prototype.s=function(i){q(i==Math.floor(i)),q(0<=i&&4294967296>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255),this.a.push(i>>>16&255),this.a.push(i>>>24&255)};_e.prototype.writeUint32=_e.prototype.s;_e.prototype.V=function(i){q(i==Math.floor(i)),q(0<=i&&18446744073709552e3>i),Tv(i),this.s(It),this.s(Et)};_e.prototype.writeUint64=_e.prototype.V;_e.prototype.Qc=function(i){q(i==Math.floor(i)),q(-128<=i&&128>i),this.a.push(i>>>0&255)};_e.prototype.writeInt8=_e.prototype.Qc;_e.prototype.Pc=function(i){q(i==Math.floor(i)),q(-32768<=i&&32768>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255)};_e.prototype.writeInt16=_e.prototype.Pc;_e.prototype.S=function(i){q(i==Math.floor(i)),q(-2147483648<=i&&2147483648>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255),this.a.push(i>>>16&255),this.a.push(i>>>24&255)};_e.prototype.writeInt32=_e.prototype.S;_e.prototype.T=function(i){q(i==Math.floor(i)),q(-9223372036854776e3<=i&&9223372036854776e3>i),Lp(i),this.A(It,Et)};_e.prototype.writeInt64=_e.prototype.T;_e.prototype.ka=function(i){q(i==Math.floor(i)),q(-9223372036854776e3<=+i&&9223372036854776e3>+i),Os(Mp(i)),this.A(It,Et)};_e.prototype.writeInt64String=_e.prototype.ka;_e.prototype.L=function(i){q(i===1/0||i===-1/0||isNaN(i)||-34028234663852886e22<=i&&34028234663852886e22>=i),pT(i),this.s(It)};_e.prototype.writeFloat=_e.prototype.L;_e.prototype.J=function(i){q(i===1/0||i===-1/0||isNaN(i)||-17976931348623157e292<=i&&17976931348623157e292>=i),mT(i),this.s(It),this.s(Et)};_e.prototype.writeDouble=_e.prototype.J;_e.prototype.I=function(i){q(typeof i=="boolean"||typeof i=="number"),this.a.push(i?1:0)};_e.prototype.writeBool=_e.prototype.I;_e.prototype.R=function(i){q(i==Math.floor(i)),q(-2147483648<=i&&2147483648>i),this.M(i)};_e.prototype.writeEnum=_e.prototype.R;_e.prototype.ja=function(i){this.a.push.apply(this.a,i)};_e.prototype.writeBytes=_e.prototype.ja;_e.prototype.N=function(i){Os(i),this.l(It,Et)};_e.prototype.writeVarintHash64=_e.prototype.N;_e.prototype.K=function(i){Os(i),this.s(It),this.s(Et)};_e.prototype.writeFixedHash64=_e.prototype.K;_e.prototype.U=function(i){var e=this.a.length;UR(i);for(var t=0;t<i.length;t++){var r=i.charCodeAt(t);if(128>r)this.a.push(r);else if(2048>r)this.a.push(r>>6|192),this.a.push(r&63|128);else if(65536>r)if(55296<=r&&56319>=r&&t+1<i.length){var s=i.charCodeAt(t+1);56320<=s&&57343>=s&&(r=1024*(r-55296)+s-56320+65536,this.a.push(r>>18|240),this.a.push(r>>12&63|128),this.a.push(r>>6&63|128),this.a.push(r&63|128),t++)}else this.a.push(r>>12|224),this.a.push(r>>6&63|128),this.a.push(r&63|128)}return this.a.length-e};_e.prototype.writeString=_e.prototype.U;function Ge(i,e){this.lo=i,this.hi=e}Ne("jspb.arith.UInt64",Ge,void 0);Ge.prototype.cmp=function(i){return this.hi<i.hi||this.hi==i.hi&&this.lo<i.lo?-1:this.hi==i.hi&&this.lo==i.lo?0:1};Ge.prototype.cmp=Ge.prototype.cmp;Ge.prototype.La=function(){return new Ge((this.lo>>>1|(this.hi&1)<<31)>>>0,this.hi>>>1>>>0)};Ge.prototype.rightShift=Ge.prototype.La;Ge.prototype.Da=function(){return new Ge(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)};Ge.prototype.leftShift=Ge.prototype.Da;Ge.prototype.cb=function(){return!!(this.hi&2147483648)};Ge.prototype.msb=Ge.prototype.cb;Ge.prototype.Ob=function(){return!!(this.lo&1)};Ge.prototype.lsb=Ge.prototype.Ob;Ge.prototype.Ua=function(){return this.lo==0&&this.hi==0};Ge.prototype.zero=Ge.prototype.Ua;Ge.prototype.add=function(i){return new Ge((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)};Ge.prototype.add=Ge.prototype.add;Ge.prototype.sub=function(i){return new Ge((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)};Ge.prototype.sub=Ge.prototype.sub;function wv(i,e){var t=i&65535;i>>>=16;var r=e&65535,s=e>>>16;for(e=t*r+65536*(t*s&65535)+65536*(i*r&65535),t=i*s+(t*s>>>16)+(i*r>>>16);4294967296<=e;)e-=4294967296,t+=1;return new Ge(e>>>0,t>>>0)}Ge.mul32x32=wv;Ge.prototype.eb=function(i){var e=wv(this.lo,i);return i=wv(this.hi,i),i.hi=i.lo,i.lo=0,e.add(i)};Ge.prototype.mul=Ge.prototype.eb;Ge.prototype.Xa=function(i){if(i==0)return[];var e=new Ge(0,0),t=new Ge(this.lo,this.hi);i=new Ge(i,0);for(var r=new Ge(1,0);!i.cb();)i=i.Da(),r=r.Da();for(;!r.Ua();)0>=i.cmp(t)&&(e=e.add(r),t=t.sub(i)),i=i.La(),r=r.La();return[e,t]};Ge.prototype.div=Ge.prototype.Xa;Ge.prototype.toString=function(){for(var i="",e=this;!e.Ua();){e=e.Xa(10);var t=e[0];i=e[1].lo+i,e=t}return i==""&&(i="0"),i};Ge.prototype.toString=Ge.prototype.toString;function vl(i){for(var e=new Ge(0,0),t=new Ge(0,0),r=0;r<i.length;r++){if("0">i[r]||"9"<i[r])return null;t.lo=parseInt(i[r],10),e=e.eb(10).add(t)}return e}Ge.fromString=vl;Ge.prototype.clone=function(){return new Ge(this.lo,this.hi)};Ge.prototype.clone=Ge.prototype.clone;function di(i,e){this.lo=i,this.hi=e}Ne("jspb.arith.Int64",di,void 0);di.prototype.add=function(i){return new di((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)};di.prototype.add=di.prototype.add;di.prototype.sub=function(i){return new di((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)};di.prototype.sub=di.prototype.sub;di.prototype.clone=function(){return new di(this.lo,this.hi)};di.prototype.clone=di.prototype.clone;di.prototype.toString=function(){var i=(this.hi&2147483648)!=0,e=new Ge(this.lo,this.hi);return i&&(e=new Ge(0,0).sub(e)),(i?"-":"")+e.toString()};di.prototype.toString=di.prototype.toString;function qb(i){var e=0<i.length&&i[0]=="-";return e&&(i=i.substring(1)),i=vl(i),i===null?null:(e&&(i=new Ge(0,0).sub(i)),new di(i.lo,i.hi))}di.fromString=qb;function w(){this.c=[],this.b=0,this.a=new _e,this.h=[]}Ne("jspb.BinaryWriter",w,void 0);function CT(i,e){var t=i.a.end();i.c.push(t),i.c.push(e),i.b+=t.length+e.length}function Ht(i,e){return Ye(i,e,2),e=i.a.end(),i.c.push(e),i.b+=e.length,e.push(i.b),e}function jt(i,e){var t=e.pop();for(t=i.b+i.a.length()-t,q(0<=t);127<t;)e.push(t&127|128),t>>>=7,i.b++;e.push(t),i.b++}w.prototype.pb=function(i,e,t){CT(this,i.subarray(e,t))};w.prototype.writeSerializedMessage=w.prototype.pb;w.prototype.Pb=function(i,e,t){i!=null&&e!=null&&t!=null&&this.pb(i,e,t)};w.prototype.maybeWriteSerializedMessage=w.prototype.Pb;w.prototype.reset=function(){this.c=[],this.a.end(),this.b=0,this.h=[]};w.prototype.reset=w.prototype.reset;w.prototype.ab=function(){q(this.h.length==0);for(var i=new Uint8Array(this.b+this.a.length()),e=this.c,t=e.length,r=0,s=0;s<t;s++){var a=e[s];i.set(a,r),r+=a.length}return e=this.a.end(),i.set(e,r),r+=e.length,q(r==i.length),this.c=[i],i};w.prototype.getResultBuffer=w.prototype.ab;w.prototype.Kb=function(i){return oT(this.ab(),i)};w.prototype.getResultBase64String=w.prototype.Kb;w.prototype.Va=function(i){this.h.push(Ht(this,i))};w.prototype.beginSubMessage=w.prototype.Va;w.prototype.Ya=function(){q(0<=this.h.length),jt(this,this.h.pop())};w.prototype.endSubMessage=w.prototype.Ya;function Ye(i,e,t){q(1<=e&&e==Math.floor(e)),i.a.j(8*e+t)}w.prototype.Nc=function(i,e,t){switch(i){case 1:this.J(e,t);break;case 2:this.L(e,t);break;case 3:this.T(e,t);break;case 4:this.V(e,t);break;case 5:this.S(e,t);break;case 6:this.Qa(e,t);break;case 7:this.Pa(e,t);break;case 8:this.I(e,t);break;case 9:this.U(e,t);break;case 10:li("Group field type not supported in writeAny()");break;case 11:li("Message field type not supported in writeAny()");break;case 12:this.ja(e,t);break;case 13:this.s(e,t);break;case 14:this.R(e,t);break;case 15:this.Ra(e,t);break;case 16:this.Sa(e,t);break;case 17:this.rb(e,t);break;case 18:this.sb(e,t);break;case 30:this.K(e,t);break;case 31:this.N(e,t);break;default:li("Invalid field type in writeAny()")}};w.prototype.writeAny=w.prototype.Nc;function Cv(i,e,t){t!=null&&(Ye(i,e,0),i.a.j(t))}function Mv(i,e,t){t!=null&&(Ye(i,e,0),i.a.M(t))}w.prototype.S=function(i,e){e!=null&&(q(-2147483648<=e&&2147483648>e),Mv(this,i,e))};w.prototype.writeInt32=w.prototype.S;w.prototype.ob=function(i,e){e!=null&&(e=parseInt(e,10),q(-2147483648<=e&&2147483648>e),Mv(this,i,e))};w.prototype.writeInt32String=w.prototype.ob;w.prototype.T=function(i,e){e!=null&&(q(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(Ye(this,i,0),this.a.ua(e)))};w.prototype.writeInt64=w.prototype.T;w.prototype.ka=function(i,e){e!=null&&(e=qb(e),Ye(this,i,0),this.a.l(e.lo,e.hi))};w.prototype.writeInt64String=w.prototype.ka;w.prototype.s=function(i,e){e!=null&&(q(0<=e&&4294967296>e),Cv(this,i,e))};w.prototype.writeUint32=w.prototype.s;w.prototype.ub=function(i,e){e!=null&&(e=parseInt(e,10),q(0<=e&&4294967296>e),Cv(this,i,e))};w.prototype.writeUint32String=w.prototype.ub;w.prototype.V=function(i,e){e!=null&&(q(0<=e&&18446744073709552e3>e),e!=null&&(Ye(this,i,0),this.a.va(e)))};w.prototype.writeUint64=w.prototype.V;w.prototype.vb=function(i,e){e!=null&&(e=vl(e),Ye(this,i,0),this.a.l(e.lo,e.hi))};w.prototype.writeUint64String=w.prototype.vb;w.prototype.rb=function(i,e){e!=null&&(q(-2147483648<=e&&2147483648>e),e!=null&&(Ye(this,i,0),this.a.wa(e)))};w.prototype.writeSint32=w.prototype.rb;w.prototype.sb=function(i,e){e!=null&&(q(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(Ye(this,i,0),this.a.xa(e)))};w.prototype.writeSint64=w.prototype.sb;w.prototype.$d=function(i,e){e!=null&&e!=null&&(Ye(this,i,0),this.a.W(e))};w.prototype.writeSintHash64=w.prototype.$d;w.prototype.Zd=function(i,e){e!=null&&e!=null&&(Ye(this,i,0),this.a.Ta(e))};w.prototype.writeSint64String=w.prototype.Zd;w.prototype.Pa=function(i,e){e!=null&&(q(0<=e&&4294967296>e),Ye(this,i,5),this.a.s(e))};w.prototype.writeFixed32=w.prototype.Pa;w.prototype.Qa=function(i,e){e!=null&&(q(0<=e&&18446744073709552e3>e),Ye(this,i,1),this.a.V(e))};w.prototype.writeFixed64=w.prototype.Qa;w.prototype.nb=function(i,e){e!=null&&(e=vl(e),Ye(this,i,1),this.a.A(e.lo,e.hi))};w.prototype.writeFixed64String=w.prototype.nb;w.prototype.Ra=function(i,e){e!=null&&(q(-2147483648<=e&&2147483648>e),Ye(this,i,5),this.a.S(e))};w.prototype.writeSfixed32=w.prototype.Ra;w.prototype.Sa=function(i,e){e!=null&&(q(-9223372036854776e3<=e&&9223372036854776e3>e),Ye(this,i,1),this.a.T(e))};w.prototype.writeSfixed64=w.prototype.Sa;w.prototype.qb=function(i,e){e!=null&&(e=qb(e),Ye(this,i,1),this.a.A(e.lo,e.hi))};w.prototype.writeSfixed64String=w.prototype.qb;w.prototype.L=function(i,e){e!=null&&(Ye(this,i,5),this.a.L(e))};w.prototype.writeFloat=w.prototype.L;w.prototype.J=function(i,e){e!=null&&(Ye(this,i,1),this.a.J(e))};w.prototype.writeDouble=w.prototype.J;w.prototype.I=function(i,e){e!=null&&(q(typeof e=="boolean"||typeof e=="number"),Ye(this,i,0),this.a.I(e))};w.prototype.writeBool=w.prototype.I;w.prototype.R=function(i,e){e!=null&&(q(-2147483648<=e&&2147483648>e),Ye(this,i,0),this.a.M(e))};w.prototype.writeEnum=w.prototype.R;w.prototype.U=function(i,e){e!=null&&(i=Ht(this,i),this.a.U(e),jt(this,i))};w.prototype.writeString=w.prototype.U;w.prototype.ja=function(i,e){e!=null&&(e=Vb(e),Ye(this,i,2),this.a.j(e.length),CT(this,e))};w.prototype.writeBytes=w.prototype.ja;w.prototype.Rc=function(i,e,t){e!=null&&(i=Ht(this,i),t(e,this),jt(this,i))};w.prototype.writeMessage=w.prototype.Rc;w.prototype.Sc=function(i,e,t){e!=null&&(Ye(this,1,3),Ye(this,2,0),this.a.M(i),i=Ht(this,3),t(e,this),jt(this,i),Ye(this,1,4))};w.prototype.writeMessageSet=w.prototype.Sc;w.prototype.Oc=function(i,e,t){e!=null&&(Ye(this,i,3),t(e,this),Ye(this,i,4))};w.prototype.writeGroup=w.prototype.Oc;w.prototype.K=function(i,e){e!=null&&(q(e.length==8),Ye(this,i,1),this.a.K(e))};w.prototype.writeFixedHash64=w.prototype.K;w.prototype.N=function(i,e){e!=null&&(q(e.length==8),Ye(this,i,0),this.a.N(e))};w.prototype.writeVarintHash64=w.prototype.N;w.prototype.A=function(i,e,t){Ye(this,i,1),this.a.A(e,t)};w.prototype.writeSplitFixed64=w.prototype.A;w.prototype.l=function(i,e,t){Ye(this,i,0),this.a.l(e,t)};w.prototype.writeSplitVarint64=w.prototype.l;w.prototype.tb=function(i,e,t){Ye(this,i,0);var r=this.a;Hb(e,t,function(s,a){r.l(s>>>0,a>>>0)})};w.prototype.writeSplitZigzagVarint64=w.prototype.tb;w.prototype.Ed=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)Mv(this,i,e[t])};w.prototype.writeRepeatedInt32=w.prototype.Ed;w.prototype.Fd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ob(i,e[t])};w.prototype.writeRepeatedInt32String=w.prototype.Fd;w.prototype.Gd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Ye(this,i,0),this.a.ua(r))}};w.prototype.writeRepeatedInt64=w.prototype.Gd;w.prototype.Qd=function(i,e,t,r){if(e!=null)for(var s=0;s<e.length;s++)this.A(i,t(e[s]),r(e[s]))};w.prototype.writeRepeatedSplitFixed64=w.prototype.Qd;w.prototype.Rd=function(i,e,t,r){if(e!=null)for(var s=0;s<e.length;s++)this.l(i,t(e[s]),r(e[s]))};w.prototype.writeRepeatedSplitVarint64=w.prototype.Rd;w.prototype.Sd=function(i,e,t,r){if(e!=null)for(var s=0;s<e.length;s++)this.tb(i,t(e[s]),r(e[s]))};w.prototype.writeRepeatedSplitZigzagVarint64=w.prototype.Sd;w.prototype.Hd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ka(i,e[t])};w.prototype.writeRepeatedInt64String=w.prototype.Hd;w.prototype.Ud=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)Cv(this,i,e[t])};w.prototype.writeRepeatedUint32=w.prototype.Ud;w.prototype.Vd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ub(i,e[t])};w.prototype.writeRepeatedUint32String=w.prototype.Vd;w.prototype.Wd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Ye(this,i,0),this.a.va(r))}};w.prototype.writeRepeatedUint64=w.prototype.Wd;w.prototype.Xd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.vb(i,e[t])};w.prototype.writeRepeatedUint64String=w.prototype.Xd;w.prototype.Md=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Ye(this,i,0),this.a.wa(r))}};w.prototype.writeRepeatedSint32=w.prototype.Md;w.prototype.Nd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Ye(this,i,0),this.a.xa(r))}};w.prototype.writeRepeatedSint64=w.prototype.Nd;w.prototype.Od=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Ye(this,i,0),this.a.Ta(r))}};w.prototype.writeRepeatedSint64String=w.prototype.Od;w.prototype.Pd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Ye(this,i,0),this.a.W(r))}};w.prototype.writeRepeatedSintHash64=w.prototype.Pd;w.prototype.yd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Pa(i,e[t])};w.prototype.writeRepeatedFixed32=w.prototype.yd;w.prototype.zd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Qa(i,e[t])};w.prototype.writeRepeatedFixed64=w.prototype.zd;w.prototype.Ad=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.nb(i,e[t])};w.prototype.writeRepeatedFixed64String=w.prototype.Ad;w.prototype.Jd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Ra(i,e[t])};w.prototype.writeRepeatedSfixed32=w.prototype.Jd;w.prototype.Kd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Sa(i,e[t])};w.prototype.writeRepeatedSfixed64=w.prototype.Kd;w.prototype.Ld=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.qb(i,e[t])};w.prototype.writeRepeatedSfixed64String=w.prototype.Ld;w.prototype.Cd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.L(i,e[t])};w.prototype.writeRepeatedFloat=w.prototype.Cd;w.prototype.wd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.J(i,e[t])};w.prototype.writeRepeatedDouble=w.prototype.wd;w.prototype.ud=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.I(i,e[t])};w.prototype.writeRepeatedBool=w.prototype.ud;w.prototype.xd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.R(i,e[t])};w.prototype.writeRepeatedEnum=w.prototype.xd;w.prototype.Td=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.U(i,e[t])};w.prototype.writeRepeatedString=w.prototype.Td;w.prototype.vd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ja(i,e[t])};w.prototype.writeRepeatedBytes=w.prototype.vd;w.prototype.Id=function(i,e,t){if(e!=null)for(var r=0;r<e.length;r++){var s=Ht(this,i);t(e[r],this),jt(this,s)}};w.prototype.writeRepeatedMessage=w.prototype.Id;w.prototype.Dd=function(i,e,t){if(e!=null)for(var r=0;r<e.length;r++)Ye(this,i,3),t(e[r],this),Ye(this,i,4)};w.prototype.writeRepeatedGroup=w.prototype.Dd;w.prototype.Bd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.K(i,e[t])};w.prototype.writeRepeatedFixedHash64=w.prototype.Bd;w.prototype.Yd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.N(i,e[t])};w.prototype.writeRepeatedVarintHash64=w.prototype.Yd;w.prototype.ad=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.M(e[t]);jt(this,i)}};w.prototype.writePackedInt32=w.prototype.ad;w.prototype.bd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.M(parseInt(e[t],10));jt(this,i)}};w.prototype.writePackedInt32String=w.prototype.bd;w.prototype.cd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.ua(e[t]);jt(this,i)}};w.prototype.writePackedInt64=w.prototype.cd;w.prototype.md=function(i,e,t,r){if(e!=null){i=Ht(this,i);for(var s=0;s<e.length;s++)this.a.A(t(e[s]),r(e[s]));jt(this,i)}};w.prototype.writePackedSplitFixed64=w.prototype.md;w.prototype.nd=function(i,e,t,r){if(e!=null){i=Ht(this,i);for(var s=0;s<e.length;s++)this.a.l(t(e[s]),r(e[s]));jt(this,i)}};w.prototype.writePackedSplitVarint64=w.prototype.nd;w.prototype.od=function(i,e,t,r){if(e!=null){i=Ht(this,i);for(var s=this.a,a=0;a<e.length;a++)Hb(t(e[a]),r(e[a]),function(l,u){s.l(l>>>0,u>>>0)});jt(this,i)}};w.prototype.writePackedSplitZigzagVarint64=w.prototype.od;w.prototype.dd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++){var r=qb(e[t]);this.a.l(r.lo,r.hi)}jt(this,i)}};w.prototype.writePackedInt64String=w.prototype.dd;w.prototype.pd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.j(e[t]);jt(this,i)}};w.prototype.writePackedUint32=w.prototype.pd;w.prototype.qd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.j(parseInt(e[t],10));jt(this,i)}};w.prototype.writePackedUint32String=w.prototype.qd;w.prototype.rd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.va(e[t]);jt(this,i)}};w.prototype.writePackedUint64=w.prototype.rd;w.prototype.sd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++){var r=vl(e[t]);this.a.l(r.lo,r.hi)}jt(this,i)}};w.prototype.writePackedUint64String=w.prototype.sd;w.prototype.hd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.wa(e[t]);jt(this,i)}};w.prototype.writePackedSint32=w.prototype.hd;w.prototype.jd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.xa(e[t]);jt(this,i)}};w.prototype.writePackedSint64=w.prototype.jd;w.prototype.kd=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.W(Mp(e[t]));jt(this,i)}};w.prototype.writePackedSint64String=w.prototype.kd;w.prototype.ld=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.W(e[t]);jt(this,i)}};w.prototype.writePackedSintHash64=w.prototype.ld;w.prototype.Wc=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(4*e.length),i=0;i<e.length;i++)this.a.s(e[i])};w.prototype.writePackedFixed32=w.prototype.Wc;w.prototype.Xc=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.V(e[i])};w.prototype.writePackedFixed64=w.prototype.Xc;w.prototype.Yc=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++){var t=vl(e[i]);this.a.A(t.lo,t.hi)}};w.prototype.writePackedFixed64String=w.prototype.Yc;w.prototype.ed=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(4*e.length),i=0;i<e.length;i++)this.a.S(e[i])};w.prototype.writePackedSfixed32=w.prototype.ed;w.prototype.fd=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.T(e[i])};w.prototype.writePackedSfixed64=w.prototype.fd;w.prototype.gd=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.ka(e[i])};w.prototype.writePackedSfixed64String=w.prototype.gd;w.prototype.$c=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(4*e.length),i=0;i<e.length;i++)this.a.L(e[i])};w.prototype.writePackedFloat=w.prototype.$c;w.prototype.Uc=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.J(e[i])};w.prototype.writePackedDouble=w.prototype.Uc;w.prototype.Tc=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(e.length),i=0;i<e.length;i++)this.a.I(e[i])};w.prototype.writePackedBool=w.prototype.Tc;w.prototype.Vc=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.R(e[t]);jt(this,i)}};w.prototype.writePackedEnum=w.prototype.Vc;w.prototype.Zc=function(i,e){if(e!=null&&e.length)for(Ye(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.K(e[i])};w.prototype.writePackedFixedHash64=w.prototype.Zc;w.prototype.td=function(i,e){if(e!=null&&e.length){i=Ht(this,i);for(var t=0;t<e.length;t++)this.a.N(e[t]);jt(this,i)}};w.prototype.writePackedVarintHash64=w.prototype.td;typeof yi=="object"&&(yi.debug=Vr,yi.Map=qe,yi.Message=Te,yi.BinaryReader=A,yi.BinaryWriter=w,yi.ExtensionFieldInfo=kp,yi.ExtensionFieldBinaryInfo=_T,yi.exportSymbol=DR,yi.inherits=NR,yi.object={extend:OR},yi.typeOf=zn)});var R1=class i extends Laya.EventDispatcher{static getInstance(){return i._instance||(i._instance=new i),i._instance}},v=R1.getInstance();var k=class{};k.MOUSE_HOLDON="MOUSE_HOLDON",k.EVENT_OPEN_MODULE="EVENT_OPEN_MODULE",k.EVENT_MODULE_ADDED="EVENT_MODULE_ADDED",k.EVENT_CLOSE_MODULE="EVENT_CLOSE_MODULE",k.EVENT_CHECK_REMAIN="EVENT_CHECK_REMAIN",k.EVENT_LOADED_COMPLETE="EVENT_LOAD_COMPLETE",k.EVENT_LOADED_SCENE_BG_COM="EVENT_LOADED_SCENE_BG_COM",k.EVENT_LOAD_SKIN_COMPLETE="EVENT_LOAD_SKIN_COMPLETE",k.EVENT_LOAD_HEAD_SKIN_COMPLETE="EVENT_LOAD_HEAD_SKIN_COMPLETE",k.EVENT_LOADING_SUC="EVENT_LOADING_SUC",k.EVENT_BACK_TO_LOGIN="EVENT_BACK_TO_LOGIN",k.EVENT_LOGIN_GAME_END="EVENT_LOGIN_GAME_END",k.EVENT_ENTER_MAIN="EVENT_ENTER_MAIN",k.EVENT_CHANGE_HEAD="EVENT_CHANGE_HEAD",k.EVENT_MODIFY_HEAD="EVENT_MODIFY_HEAD",k.EVENT_ITEM_UPDATE="EVENT_ITEM_UPDATE",k.EVENT_SNAKE_UPDATE="EVENT_SNAKE_UPDATE",k.EVENT_ROLE_UPDATE="EVENT_ROLE_UPDATE",k.STAGE_ON_BLUR="STAGE_ON_BLUR",k.STAGE_ON_FOCUS="STAGE_ON_FOCUS",k.ACCOUNTVO_UPDATE="ACCOUNTVO_UPDATE",k.EVENT_WAIT_PLAYERINFO="EVENT_WAIT_PLAYERINFO",k.EVENT_END_HEROBUY="EVENT_END_HEROBUY",k.EVENT_END_HEROTRANSFER="EVENT_END_HEROTRANSFER",k.EVENT_REFRESH_HEROTRANSFER="EVENT_REFRESH_HEROTRANSFER",k.EVENT_REFRESH_QUAN_STATUS="EVENT_REFRESH_QUAN_STATUS",k.EVENT_REFRESH_ITEM_ONCHAIN_STATUS="EVENT_REFRESH_ITEM_ONCHAIN_STATUS",k.EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS="EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS",k.EVENT_REFRESH_NODE_ONCHAIN_STATUS="EVENT_REFRESH_NODE_ONCHAIN_STATUS",k.EVENT_REFRESH_UNIONMEMBER_TRANSFER="EVENT_REFRESH_UNIONMEMBER_TRANSFER",k.EVENT_REFRESH_KNAPSACK="EVENT_REFRESH_KNAPSACK",k.EVENT_ADD_UNIONMEMBER_ADDRESS="EVENT_ADD_UNIONMEMBER_ADDRESS",k.EVENT_ADD_TICKET_ADDRESS="EVENT_ADD_TICKET_ADDRESS",k.EVENT_EMOJI_ICON_SELECT="EVENT_EMOJI_ICON_SELECT",k.EVENT_COLOR_ICON_SELECT="EVENT_COLOR_ICON_SELECT",k.EVENT_CHECK_ICON_SELECT="EVENT_CHECK_ICON_SELECT",k.EVENT_CHECK_PLAYER_NUM_SELECT="EVENT_CHECK_PLAYER_NUM_SELECT",k.EVENT_CHECK_NODE_SELECT="EVENT_CHECK_NODE_SELECT",k.PACKAGE_UPDATE_ITEM="PACKAGE_UPDATE_ITEM",k.IMPROVE_SUCESS_EVENT="IMPROVE_SUCESS_EVENT",k.CHANG_POTRAIT="CHANG_POTRAIT",k.ROLE_INFO_CHANGE="ROLE_INFO_CHANGE",k.ROLE_INFO_UPDATE="ROLE_INFO_UPDATE",k.UPDATE_ASSETS="UPDATE_ASSETS",k.REFRESH_MAIN_TASK="REFRESH_MAIN_TASK",k.RECIVE_SUCESS_SERVICE="RECIVE_SUCESS_SERVICE",k.SCENE_ROLE_COMPELTE="SCENE_ROLE_COMPELTE",k.FITTING_CLOTH_BTN="FITTING_CLOTH_BTN",k.STORE_CLICKBG_EVENT="STORE_CLICKBG_EVENT",k.CLOSE_BG_VIEW="CLOSE_BG_VIEW",k.EVENT_UPDATE_ONLINE="EVENT_UPDATE_ONLINE",k.VIP_INFO_CHANGE="VIP_INFO_CHANGE",k.EVENT_FUNCTION_OPEN_UPDATE="EVENT_FUNCTION_OPEN_UPDATE",k.EVENT_ADD_ACTIVITY="EVENT_ADD_ACTIVITY",k.EVENT_REMOVE_ACTIVITY="EVENT_REMOVE_ACTIVITY",k.UPDATE_CHAO_PIAO="UPDATE_CHAO_PIAO",k.UPDATE_EXCHANGE_INFO="UPDATE_EXCHANGE_INFO",k.UPDATE_RED_STATE_EVENT="UPDATE_RED_STATE_EVENT",k.SYSTEM_OPEN_TIME_INITED="SYSTEM_OPEN_TIME_INITED",k.EVENT_OPEN_SHARE="EVENT_OPEN_SHARE",k.CHANGE_SCENE_BASE_ROLE_LAYER="CHANGE_SCENE_BASE_ROLE_LAYER",k.EVENT_CLICK_NUM="EVENT_CLICK_NUM",k.EVENT_CLICK_SPACE="EVENT_CLICK_SPACE",k.EVENT_HERO_DRAW_BACK="EVENT_HERO_DRAW_BACK",k.EVENT_Close_CreateRoom="EVENT_Close_CreateRoom",k.EVENT_ENTER_MATCH_ROOM="EVENT_ENTER_MATCH_ROOM",k.EVENT_UPDATE_MATCH_ROOM="EVENT_UPDATE_MATCH_ROOM",k.EVENT_CLICK_HERO="EVENT_CLICK_HERO",k.UPDATE_KILL_NUM="UPDATE_KILL_NUM",k.EVENT_PVP_INIT_DATA="EVENT_PVP_INIT_DATA",k.EVENT_PVP_RESTORE_DATA="EVENT_PVP_RESTORE_DATA",k.EVENT_FirstBlood="EVENT_FirstBlood",k.EVENT_MutiKill="EVENT_MutiKill",k.EVENT_GameScene_Gray="EVENT_GameScene_Gray",k.EVENT_Game_Delay="EVENT_Game_Delay",k.EVENT_Game_Room_Delay="EVENT_Game_Room_Delay",k.EVENT_UPDATE_ITEM_SKILL_COOL="UPDATE_SKILL_COOLTIME",k.EVENT_UPDATE_GLOBAL_COOL="EVENT_UPDATE_GLOBAL_COOL",k.EVENT_UPDATE_REDECE_COOL="EVENT_UPDATE_REDECE_COOL",k.EVENT_REFRESH_BAN_ACCOUNT="EVENT_REFRESH_BAN_ACCOUNT",k.EVENT_SUB_GUILD_UPDATE="EVENT_SUB_GUILD_UPDATE",k.EVENT_UNION_APPLY_MEMBER_UPDATE="EVENT_UNION_APPLY_MEMBER_UPDATE",k.EVENT_WELFARE_CLAIM="EVENT_WELFARE_CLAIM",k.EVENT_RECHARGE_GET="EVENT_RECHARGE_GET",k.CHANGE_WALLET_HERO="CHANGE_WALLET_HERO",k.CHANGE_ASSET_CHAIN="CHANGE_ASSET_CHAIN",k.CHANGE_WALLET_PROP="CHANGE_WALLET_PROP",k.CREATE_SUB_WALLET_SUCCESS="CREATE_SUB_WALLET_SUCCESS",k.REFRESH_ALL_WITHDRAW_DATA="REFRESH_ALL_WITHDRAW_DATA",k.CHANGE_FRIEND_APPLY_LIST="CHANGE_FRIEND_APPLY_LIST",k.CHANGE_FRIEND_LIST="CHANGE_FRIEND_LIST",k.REFRSH_RED="REFRSH_RED",k.REFRSH_APPLY_FRIEND_LIST="REFRSH_APPLY_FRIEND_LIST",k.ADD_AIR_WALLET_ITEM="ADD_AIR_WALLET_ITEM",k.ADD_AIR_SUB_WALLET_NAME="ADD_AIR_SUB_WALLET_NAME",k.AIR_SUB_WALLET_OPENHERO="AIR_SUB_WALLET_OPENHERO",k.CHANGE_WALLET_HERO_AIR="CHANGE_WALLET_HERO_AIR",k.UPDATE_UNION_MEMBER_LIST="UPDATE_UNION_MEMBER_LIST",k.EVENT_ADD_MONEY_ADDRESS="EVENT_ADD_MONEY_ADDRESS",k.REFRESH_MAINSCENE_HEAD_RED="REFRESH_MAINSCENE_HEAD_RED",k.REFRESH_ROLEINFO_RED="REFRESH_ROLEINFO_RED",k.REFRESH_ACTIVITY_RED="REFRESH_ACTIVITY_RED",k.SHOW_EQUIP_TIP="SHOW_EQUIP_TIP",k.REFRESH_RANK_DIALOG_RED="REFRESH_RANK_DIALOG_RED",k.REFRESH_MAIL_RED="REFRESH_MAIL_RED",k.SHOW_EQUIP_SHOP_TIP="SHOW_EQUIP_SHOP_TIP",k.ON_CONNECT_GAME_SERVER="ON_CONNECT_GAME_SERVER",k.LENGTH_CHANGE="LENGTH_CHANGE",k.KILL_SNAKE="KILL_SNAKE",k.UPDATE_LOCAL_WALLET_LIST_EVENT="UPDATE_LOCAL_WALLET_LIST_EVENT",k.UPDATE_TOKEN_BALANCE="UPDATE_TOKEN_BALANCE",k.UPDATE_BAG_INFO="UPDATE_BAG_INFO",k.EVENT_CHANGE_NODE="EVENT_CHANGE_NODE",k.EVENT_NEW_NOTICE="EVENT_NEW_NOTICE",k.EVENT_NEW_NOTICE_ADDED="EVENT_NEW_NOTICE_ADDED",k.EVENT_MARQUEE_EMPTY="EVENT_MARQUEE_EMPTY",k.EVENT_CHANGE_CLUB_RATE="EVENT_CHANGE_CLUB_RATE",k.EVENT_CLUB_INFO_CHANGE="EVENT_CLUB_INFO_CHANGE";var tt=class i{constructor(e=0,t=0){this.x=e,this.y=t}static create(e=0,t=0){return new i(e,t)}assign(e){return this.x=e.x,this.y=e.y,this}add(e){return new i(this.x+e.x,this.y+e.y)}sub(e){return new i(this.x-e.x,this.y-e.y)}mul(e){return new i(this.x*e,this.y*e)}getRotation(){let e=Math.atan2(this.y,this.x)*180/Math.PI;return e<0&&(e+=360),e}getRotationTo(e){let t=e.x-this.x,r=e.y-this.y,s=Math.atan2(r,-t)*180/Math.PI;return s<0&&(s+=360),s}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y);return e!==0&&(this.x/=e,this.y/=e),this}rotateCCW(e){let t=e*Math.PI/180,r=Math.sin(t),s=Math.cos(t),a=this.x,l=this.y;return this.x=a*s-l*r,this.y=a*r+l*s,this}dot(e){return this.x*e.x+this.y*e.y}multiplyScalar(e){this.x*=e,this.y*=e}equal(e){return this.x===e.x&&this.y===e.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}init(e=0,t=0){return this.x=e,this.y=t,this}clone(){return new i(this.x,this.y)}clamp(e,t){let r=this.length();return r>t&&this.normalize().mul(t),r<e&&this.normalize().mul(e),this}reset(){return this.x=0,this.y=0,this}toOneDecimal(){return this.x=this.NumtoOneDecimal(this.x),this.y=this.NumtoOneDecimal(this.y),this}NumtoOneDecimal(e){return Math.round(e*10)/10}toString(){return`(${this.x},${this.y})`}};var Ie=class Ie{constructor(){this._touchEnabled=!0;if(Ie._instance)throw new Error("LayerManager是单例,不可new.");Ie._instance=this}get m_sprPanelLayer(){return this._m_sprPanelLayer}set m_sprPanelLayer(e){this._m_sprPanelLayer=e}get m_sprMainUILayer(){return this._m_sprMainUILayer}set m_sprMainUILayer(e){this._m_sprMainUILayer=e}get m_sprTipLayer(){return this._m_sprTipLayer}set m_sprTipLayer(e){this._m_sprTipLayer=e}static get instence(){return Ie._instance||(Ie._instance=new Ie),Ie._instance}init(){this.m_sprSceneLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprSceneLayer),this.m_sprMainUILayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprMainUILayer),this.m_sprPanelLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprPanelLayer),this.m_sprPopLayer=new Laya.Sprite,this.m_sprPopLayer.mouseThrough=!0,Laya.stage.addChild(this.m_sprPopLayer),this.m_sprTipLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTipLayer),this.m_sprGuideLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprGuideLayer),this.m_sprTopLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTopLayer)}get touchEnabled(){return this._touchEnabled}set touchEnabled(e){this._touchEnabled!=e&&(this._touchEnabled=e,this.m_sprSceneLayer.mouseEnabled=this._touchEnabled,this.m_sprMainUILayer.mouseEnabled=this._touchEnabled,this.m_sprPanelLayer.mouseEnabled=this._touchEnabled,this.m_sprPopLayer.mouseEnabled=this._touchEnabled,this.m_sprTipLayer.mouseEnabled=this._touchEnabled,this.m_sprGuideLayer.mouseEnabled=this._touchEnabled,this.m_sprTopLayer.mouseEnabled=this._touchEnabled)}addToLayerAndSet(e,t=Ie.M_PANEL,r=Ie.CENTER){this.addToLayer(e,t),this.setPosition(e,r)}getLayerIndex(e,t=Ie.M_PANEL){let r;switch(t){case Ie.M_SCENE:r=this.m_sprSceneLayer.getChildIndex(e);break;case Ie.M_MAINUI:r=this.m_sprMainUILayer.getChildIndex(e);break;case Ie.M_PANEL:r=this.m_sprPanelLayer.getChildIndex(e);break;case Ie.M_POP:r=this.m_sprPopLayer.getChildIndex(e);break;case Ie.M_TIP:r=this.m_sprTipLayer.getChildIndex(e);break;case Ie.M_GUIDE:r=this.m_sprGuideLayer.getChildIndex(e);break;case Ie.M_TOP:r=this.m_sprTopLayer.getChildIndex(e);break}return r}addToLayerAt(e,t=Ie.M_PANEL,r=0){switch(t){case Ie.M_SCENE:this.m_sprSceneLayer.addChildAt(e,r);break;case Ie.M_MAINUI:this.m_sprMainUILayer.addChildAt(e,r);break;case Ie.M_PANEL:this.m_sprPanelLayer.addChildAt(e,r);break;case Ie.M_POP:this.m_sprPopLayer.addChildAt(e,r);break;case Ie.M_TIP:this.m_sprTipLayer.addChildAt(e,r);break;case Ie.M_GUIDE:this.m_sprGuideLayer.addChildAt(e,r);break;case Ie.M_TOP:this.m_sprTopLayer.addChildAt(e,r);break}}addToLayer(e,t=Ie.M_PANEL){switch(t){case Ie.M_SCENE:this.m_sprSceneLayer.addChild(e);break;case Ie.M_MAINUI:this.m_sprMainUILayer.addChild(e);break;case Ie.M_PANEL:this.m_sprPanelLayer.addChild(e);break;case Ie.M_POP:this.m_sprPopLayer.addChild(e);break;case Ie.M_TIP:this.m_sprTipLayer.addChild(e);break;case Ie.M_GUIDE:this.m_sprGuideLayer.addChild(e);break;case Ie.M_TOP:this.m_sprTopLayer.addChild(e);break}}removeFromLayer(e,t){switch(t){case Ie.M_SCENE:this.m_sprSceneLayer.removeChild(e);break;case Ie.M_MAINUI:this.m_sprMainUILayer.removeChild(e);break;case Ie.M_PANEL:this.m_sprPanelLayer.removeChild(e);break;case Ie.M_POP:this.m_sprPopLayer.removeChild(e);break;case Ie.M_GUIDE:this.m_sprGuideLayer.removeChild(e);break;case Ie.M_TOP:this.m_sprTopLayer.removeChild(e);break}}clearLayer(e){switch(e){case Ie.M_SCENE:this.m_sprSceneLayer.removeChildren();break;case Ie.M_MAINUI:this.m_sprSceneLayer.removeChildren();break;case Ie.M_PANEL:this.m_sprSceneLayer.removeChildren();break;case Ie.M_POP:this.m_sprSceneLayer.removeChildren();break;case Ie.M_TOP:this.m_sprSceneLayer.removeChildren();break}}get stageWidth(){let e;return e=Laya.stage.width,e}get stageHeight(){let e;return e=Laya.stage.height,e}setPosition(e,t,r=0,s=0,a=!1,l=!1){let u=Laya.stage.width,m=Laya.stage.height;switch(this.m_iStageWidth=u,this.m_iStageHeight=m,t){case Ie.UP:e.x=a?u/2:(u-e.width*e.scaleX)/2,e.y=0;break;case Ie.DOWN:e.x=a?u/2:(u-e.width*e.scaleX)/2,e.y=m-e.height*e.scaleY;break;case Ie.LEFT:e.x=0,e.y=l?m/2:(m-e.height*e.scaleY)/2;break;case Ie.RIGHT:e.x=u-e.width*e.scaleX,e.y=l?m/2:(m-e.height*e.scaleY)/2;break;case Ie.LEFTUP:e.x=0,e.y=0;break;case Ie.RIGHTUP:e.x=u-e.width*e.scaleX,e.y=0;break;case Ie.LEFTDOWN:e.x=0,e.y=m-e.height*e.scaleY;break;case Ie.RIGHTDOWN:e.x=u-e.width*e.scaleX,e.y=m-e.height*e.scaleY;break;case Ie.CENTERLEFT:e.x=u/2-e.width*e.scaleX,e.y=l?m/2:(m-e.height*e.scaleY)/2;break;case Ie.CENTERRIGHT:e.x=u/2,e.y=l?m/2:(m-e.height*e.scaleY)/2;break;case Ie.CENTER:e.x=a?u/2:(u-e.width*e.scaleX)/2,e.y=l?m/2:(m-e.height*e.scaleY)/2;break;default:break}e.x+=r,e.y+=s}setLayer(e,t,r){if(!e||!t||e.parent!=t.parent)return;let s=e.parent.getChildIndex(e),a=t.parent.getChildIndex(t);r?s>a&&(e.parent.setChildIndex(e,a),e.parent.setChildIndex(t,s)):s<a&&(e.parent.setChildIndex(e,a),e.parent.setChildIndex(t,s))}};Ie.M_SCENE=1,Ie.M_MAINUI=2,Ie.M_PANEL=3,Ie.M_POP=4,Ie.M_TIP=5,Ie.M_GUIDE=7,Ie.M_TOP=6,Ie.UP=1,Ie.DOWN=16,Ie.LEFT=256,Ie.RIGHT=4096,Ie.CENTER=65536,Ie.LEFTUP=Ie.LEFT|Ie.UP,Ie.RIGHTUP=Ie.RIGHT|Ie.UP,Ie.LEFTDOWN=Ie.LEFT|Ie.DOWN,Ie.RIGHTDOWN=Ie.RIGHT|Ie.DOWN,Ie.CENTERLEFT=Ie.CENTER|Ie.LEFT,Ie.CENTERRIGHT=Ie.CENTER|Ie.RIGHT,Ie.MOVE=-1;var te=Ie;var Oe=class{constructor(e=!1){this._cachedValues=[];this._dirty=!0;this._needCache=!1;this._map=new Map;this.SERIALIZATION_NUM=new Date().getTime(),this._needCache=e}get values(){return this._needCache?(this._dirty&&(this._cachedValues=[...this._map.values()],this._dirty=!1),this._cachedValues):[...this._map.values()]}get keys(){return[...this._map.keys()]}set(e,t){this._map.set(e,t),this._dirty=!0}get(e){return this._map.get(e)}remove(e){return this._dirty=!0,this._map.delete(e)}clear(){this._map.clear(),this._cachedValues.length=0,this._dirty=!0}has(e){return this._map.has(e)}get size(){return this._map.size}getValues(){return this._map.values()}getMap(){return this._map}};var it=class{constructor(){this._keys=[];this.THIS_ID="id"}init(e){for(let t in e){this._keys.push(t);let r=e[t];e[t]instanceof String&&String(e[t]).indexOf("[[")>=0&&(r=JSON.parse(e[t])),this[t]=r}}checkItems(){}};var Ln=class extends it{constructor(){super()}};var Jn=class Jn{constructor(){this._list=[];this._isNoticing=!1;this._isListener=!1}static getInstance(){return Jn._instance||(Jn._instance=new Jn),Jn._instance}notice(e){this._isNoticing?this._isListener||(this._isListener=!0,this._list.push(e),Laya.timer.loop(Jn.Tip_Interval,this,this.onInterVal)):(this._list.push(e),this.noticeOne())}noticeOne(){var e=ie.m_objModuleViews.TxtNoticeView;let t;Laya.loader.load(e).then(r=>{if(!r){console.log("noticeOne : "+e+"  res is null");return}t=Laya.Pool.getItemByCreateFun("txtNotice",r.create,r);let s=this._list.shift();t.notice(s),Laya.stage.addChild(t),t.x=te.instence.stageWidth*.5-t.width*.5,t.y=te.instence.stageHeight*.5-t.height*.5,Laya.Tween.to(t,{y:t.y-250,alpha:.5},1e3,null,Laya.Handler.create(this,this.onFinish,[t]),1e3)})}onFinish(e){e&&(e.visible=!1,e.removeSelf())}onInterVal(){this._list.length>=1?this.noticeOne():(this._isNoticing=!1,this._isListener=!1,Laya.timer.clear(this,this.onInterVal))}};Jn.Tip_Interval=1e3;var B1=Jn,Ce=B1.getInstance();var Xs=class extends it{};var Js=class{constructor(){}};Js.Lan_en=1,Js.Lan_zh=6,Js.Lan_tr=7;var Ze=class{};Ze.TYPE_EXP=3003,Ze.TYPE_GOLD=3005,Ze.TYPE_TOX=3001,Ze.TYPE_USDT=3004,Ze.TYPE_BTC=3006,Ze.TYPE_ETH=3007,Ze.TYPE_BTOX=3011,Ze.TYPE_GALA=3010,Ze.TYPE_BNB=3013,Ze.TYPE_GGG=3017,Ze.TYPE_KLAY=3015,Ze.TYPE_BNRY=3016,Ze.TYPE_LLE=3017,Ze.TYPE_PC=3022,Ze.TYPE_SOL=3023,Ze.TYPE_MNT=3024,Ze.TYPE_PAS=3025,Ze.TYPE_QUAN_PVE=1980,Ze.TYPE_QUAN_MNT=4001,Ze.TYPE_REWARD_TOKEN=-9999;var es=class{constructor(){this.coins={};this.needTip=!0}};var Ja=class{constructor(e,t){this._valuesObject={};this.sheetObject=e,this.BaseItemClass=t}get keys(){if(this._keys)return this._keys;this._keys=[];for(let e in this.sheetObject)!e||e==""||this._keys.push(e);return this._keys}get values(){if(this._values)return this._values;this._values=[];let e;for(let t in this.sheetObject)this._valuesObject[t]?e=this._valuesObject[t]:(e=new this.BaseItemClass,e.init(this.sheetObject[t]),this._valuesObject[t]=e),this._values.push(e);return this._values}get(e){return this._valuesObject[e]?this._valuesObject[e]:this.sheetObject[e]}get1(e){if(this._valuesObject[e])return this._valuesObject[e];let t=this.sheetObject[e];if(t)return t;let r;this.BaseItemClass&&(r=new this.BaseItemClass,r.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig()  class : "+this.BaseItemClass),r.init(t)),this._valuesObject;let s=r||t;return this._valuesObject[e]=s,s}indexOf(e){let t=this._keys.indexOf(e);return t>=0?t:(e=e instanceof String?Number(e):e instanceof Number?e.toString():e,this._keys.indexOf(e))}clear(){this.sheetObject=null}};var D1=class i{constructor(){}static getInstance(){return i._instance||(i._instance=new i),i._instance}initSpotCfgData(){if(this.spotDic==null){let e=ie.getResByURL("config/spot.json");this.spotDic=new Ja(e.data,Ln)}}getSpotById(e){return this.initSpotCfgData(),this.spotDic.get(e)}get getSpotDic(){return this.initSpotCfgData(),this.spotDic}},rd=D1.getInstance();var N1=class i{constructor(){}static getInstance(){return i._instance||(i._instance=new i),i._instance}registerCommCallBack(e=null){Laya.LayaEnv.isConch}sendCustumEvent(e,t=null,r=null){let s;if(r?s=r:s=rd.getSpotById(e),!s||!s.Event)return;let a=new Object;a.id=s.ID,a.eventKey=s.Event,a.type=s.type,this.sendWebEvent(a)}sendWebEvent(e){}dispose(){}reload(){Laya.Browser.window.location.reload()}},Xe=N1.getInstance();var O1=class i{constructor(){this.pools=new Map;this.configs=new Map}static getInstance(){return i._instance||(i._instance=new i),i._instance}register(e,t,r=0,s=1/0){this.configs.set(e,{factory:t,maxSize:s}),this.pools.set(e,[]);for(let a=0;a<r;a++)this.release(e,t())}get(e,...t){let r=this.pools.get(e);if(!r)throw new Error(`Type ${e.name} not registered`);let s=r.length>0?r.pop():this.configs.get(e).factory();return s.init&&s.init(...t),s}release(e,t){let r=this.configs.get(e);if(!r)throw new Error(`Type ${e.name} not registered`);let s=this.pools.get(e);t.reset&&t.reset(),s.length<r.maxSize&&s.push(t)}clear(e){this.pools.set(e,[])}clearAll(){this.pools.clear()}},bk=O1.getInstance();var nd=class extends it{constructor(){super()}};var sd=class extends it{realIcon(){return"https://cdn.bunnyswap.cc/images/items/"+this.icon}get starArr(){if(this._starArr)return this._starArr;if(this._starArr=[],this.max_quality==0)return this._starArr;let t=this.quality/this.max_quality*5;for(let r=1;r<=5;r++)t>=r?this._starArr.push(0):r-t<=.5?this._starArr.push(2):this._starArr.push(1);return this._starArr}};var ad=class extends it{};var od=class extends it{constructor(){super()}};var ld=class extends it{};var cd=class extends it{constructor(){super()}};var ud=class extends it{};var pd=class extends it{};var md=class extends it{};var F1=class i{constructor(){this.lastPingTime=0;this._inNodeList=!1;this.shouldAbortPing=!1}clearPingTime(){Laya.timer.clear(this,this.startPing)}startPingTime(){this.startPing(),Laya.timer.loop(1e4,this,this.startPing)}get inNodeList(){return this._inNodeList}set inNodeList(e){this._inNodeList=e,this._inNodeList&&this.startPing(!0)}static getInstance(){return i._instance||(i._instance=new i),i._instance}startPing(e=!1){let t=e?1e3:2e3;if(window.requestIdleCallback)window.requestIdleCallback(()=>this.executePing(e),{timeout:10});else{let r=0,s=a=>{requestAnimationFrame(()=>{++r>=3?a():s(a)})};s(()=>this.executePing(e))}}executePing(e=!1){if(this.shouldAbortPing)return;let t=Date.now();if(!(!e&&t-this.lastPingTime<15e3))if(this.lastPingTime=t,this.inNodeList){var r=X.m_dicNodes.getMap();for(let[s,a]of r)a.testUrl()}else G.nodeItem.testUrl()}abortAllPingTests(){this.shouldAbortPing=!0;var e=X.m_dicNodes.getMap();for(let[t,r]of e)r.abort();setTimeout(()=>{this.shouldAbortPing=!1},1e3)}getBestNode(){var e,t=X.m_dicNodes.getMap();for(let[r,s]of t)e?s.dT<e.dT&&(e=s):e=s;e&&(G.nodeItem=e)}getNodePoint(){let e="1_00",t=G.nodeItem;return t&&(e=t.point),e}},Tt=F1.getInstance();var hd=class extends it{constructor(){super(...arguments);this.dT=1e4;this.lastPingTimestamp=0;this.pingFailCount=0}setDelay(t){this.dT=t,t<9999?(this.lastPingTimestamp=Date.now(),this.pingFailCount=0):this.pingFailCount++}getDisplayDelay(){if(this.dT<9999)return this.dT;if(this.lastPingTimestamp===0||this.pingFailCount>2)return 9999;let t=Date.now(),r=3*60*1e3;return t-this.lastPingTimestamp<r?Math.min(this.dT+100,9998):9999}async testUrl(){let t=this;this.pingServerLite(this.url).then(r=>{t.setDelay(r),v.event(k.EVENT_Game_Delay,this)}).catch(r=>{t.setDelay(9999),v.event(k.EVENT_Game_Delay,this)})}pingServerLite(t){return new Promise((r,s)=>{if(Tt.shouldAbortPing||!t)return;this.controller=new AbortController;let a=this.controller.signal,u=setTimeout(()=>{this.controller.abort(),s(new Error("请求超时"))},3e3),m=Date.now(),p=Math.floor(Math.random()*1e5),h=`${t}?_t=${m}&r=${p}`,f=Date.now();try{fetch(h,{method:"GET",mode:"no-cors",cache:"no-cache",signal:a}).then(()=>{let g=Date.now()-f;clearTimeout(u),r(g)}).catch(g=>{if(g.name==="AbortError"){if(Tt.shouldAbortPing){s(new Error("用户操作中断"));return}}else s(g)})}catch{if(clearTimeout(u),Tt.shouldAbortPing){s(new Error("用户操作中断"));return}}})}abort(){this.controller&&this.controller.abort()}};var dd=class extends it{};var fd=class extends it{};var gd=class extends it{};var bd=class extends it{};var P1=class i{constructor(){this.IsRelease=!1;this.m_bInstantGame=!1;this.useWebVersion=!1;this.m_strVersionEX="V003";this.m_bIsMobWeb=!1;this.m_strWebTag="";this.Js_Version="1";this.Game_Version="20231227_01";this.App_Version="1.0.0";this.SDK_Version="1.0.0";this.M_strCountry="1";this.M_bAppData=!1;this.bookingId=0;this.teamId=0;this.referral="";this.showHeartLog=!1;this.ignoreLang=!1;this.ignoreSheetNo=!1;this.m_bIsIphoneX=!1;this.Debug=0;this.Res=0;this.isTest=!0;this.Server_URL="";this.IP_User="";this.Plantform_APPID="17";this.ServerId=22310001;this.Login_UID="-1";this._LoginType="gamecenter";this.isInto=!1;this.needDraw=!1;this.needFoodId=!1;this.isFull=!1;this.justFull=!1;this.Login_UDID="81BC19A8-B49B-47CC-BEFE-193E723B521A";this.Device_Info="";this.FCM_Token="";this.APP_IsRelease=!0;this.User_Lan="en";this.UserAgent="";this.Login_UserName="";this.isWhite=!0;this.APP_RES="";this.COOKIE_CF_LAN="COOKIE_GG_LAN";this.COOKIE_CF_LoginType="COOKIE_CF_LoginType";this.IPHONEX_SCARE=1.22;this.IPHONEX_TOP=44;this.IPHONEX_BUTTOM=34;this.DESIGN_WIDTH=1280;this.DESIGN_HEIGHT=720;this._m_iTimeFrame=0}get LoginType(){return i._instance._LoginType}set LoginType(e){i._instance._LoginType=e,i._instance._LoginType&&i._instance._LoginType!=""&&Laya.LocalStorage.setItem(i._instance.COOKIE_CF_LoginType,i._instance._LoginType)}get isWhiteList(){return!0}static getInstance(){return i._instance||(i._instance=new i),i._instance}get vType(){return getVType()}get requestTime(){return 0}get loginTime(){return 0}set m_iTimeFrame(e){if(e>1500){let t=function(){i._instance._m_iTimeFrame=0};i._instance._m_iTimeFrame=e,Laya.timer.clear(Laya.timer,t),Laya.timer.once(500,Laya.timer,t)}}get m_iTimeFrame(){return i._instance._m_iTimeFrame}},J=P1.getInstance();var yd=class extends it{};var _d=class extends it{};var xd=class extends it{};var U1=class i{constructor(){if(i._instance)throw new Error("SheetDataManager是单例,不可new.");i._instance=this}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){let e=Laya.Browser.now();this.m_dicItems=this.initConfigObject("item",sd),this.m_dicShops=new Oe,this.m_dicShopMulDic=this.initConfig("shop",["type","icon"],ad,!0,Laya.Handler.create(this,this.onSetShopItem,null,!1)),this.m_dicSnakes=this.initConfigObject("snake",gd),this.m_dicFoods=this.initConfigObject("foods",fd),this.m_dicClub=this.initConfig("club",["id"],xd),this.m_dicArenaDic=new Oe,this.m_dicArenaNumMulDic=new Oe,this.m_dicArenaMulDic=this.initConfig("arena",["type","lv","coinType"],ld,!0,Laya.Handler.create(this,this.onSetArena,null,!1)),this.m_dicArenaTypes=this.initConfig("arenaType",["id"],dd),this.m_dicSnakeLengthRules=this.initConfig("snakeLengthRules",["snakeId","segments"],bd);var t=this.initConfigWithData("node",getNodeData(),["id"],hd);this.m_dicNodes=this.initNodes(t),this.intiDefaultNodeId(),this.m_dicHead=this.initConfig("head",["id"],od),this.m_dicCountry=this.initConfig("country",["id"],cd),this.m_dicCurrencyAddressMulDic=new Oe,this.m_dicCurrencyAddress=this.initConfig("currencyAddress",["sn"],ud,!0,Laya.Handler.create(this,this.onSetCurrencyAddress,null,!1)),this.m_dicLanguage=this.initConfig("language",["id"],Xs),this.m_dicCoinAddress=this.initConfig("coinAddress",["id"],md),this.m_dicLevel=this.initConfigObject("level",yd),this.m_dicACoin=this.initConfigObject("aCoin",pd),this.m_dicGenerate=this.initConfigObject("general",nd),this.m_dicRoom=this.initConfig("room",["id"],_d),console.log("-----------------------sheetdata-time2:"+(Laya.Browser.now()-e))}getCharacterStars(e){e>4&&(e=4);for(let t of this.m_dicCharacterStars.values)if(t.starLv>e)return t;return null}getArenaTypesInSub(){var e=[];for(let t of this.m_dicArenaTypes.values)t.inSub==1&&e.push(t);return e}getArenaTypesInSubByType(e){for(let t of this.m_dicArenaTypes.values)if(t.arenaType==e)return t;return[]}getArenaTypesInSubByItemId(e,t){for(let r of this.m_dicArenaDic.values)if(r.type==e&&r.item[0]==t)return r}onSetShopItem(e){this.m_dicShops.set(e.id,e)}onSetCurrencyAddress(e){var t=e.token.toLowerCase();this.m_dicCurrencyAddressMulDic.set(this.getCompoundKey([e.isSN,t,e.chainId]),e)}onSetArena(e){this.m_dicArenaDic.set(e.id,e),this.m_dicArenaNumMulDic.set(this.getCompoundKey([e.type,e.lv,e.coinType]),e)}preInit(){}getGeneralValueById(e){return this.m_dicGenerate&&this.m_dicGenerate.get(e)?this.m_dicGenerate.get(e).value:0}initNodes(e){var t=new Oe;for(let s=0;s<e.values.length;s++){var r=e.values[s];r.open==1&&J.vType==r.type&&(t.set(r.id,r),r.testUrl())}return t}getNodeByType(e){for(let t=0;t<this.m_dicNodes.values.length;t++)if(this.m_dicNodes.values[t].id==e)return this.m_dicNodes.values[t]}intiDefaultNodeId(){G.nodeItem=this.m_dicNodes.values[0]}testNodes(){var e=this.m_dicNodes;for(let r=0;r<e.values.length;r++){var t=e.values[r];t.testUrl()}}getNodeByAddr(e){var t=this.m_dicNodes;for(let s=0;s<t.values.length;s++){var r=t.values[s];if(r&&r.socketUrl==e)return r}return null}getCurrencyAddress(e){let r=i._instance.m_dicCurrencyAddress.values;for(let a=0;a<r.length;a++){var s=r[a];if(J.vType==s.isSN&&e==s.id)return s.token}}getNodeRevenueCurrency(e){let r=i._instance.m_dicCurrencyAddress.values;for(let a=0;a<r.length;a++){var s=r[a];if(J.vType==s.isSN&&e==s.id&&s.nodeRevenueAddress)return s}return null}getNodeCurrencyByTokenAndChainId(e,t){e=e.toLowerCase();var r=i._instance.getSheetDataByMultiKey(i._instance.m_dicCurrencyAddressMulDic,[J.vType,e,t]);return r}getRentCurrency(e){let r=i._instance.m_dicCurrencyAddress.values;for(let a=0;a<r.length;a++){var s=r[a];if(J.vType==s.isSN&&e==s.id&&s.rentNftAddress)return s}return null}getCurrencyByChainType(e,t){let s=i._instance.m_dicCurrencyAddress.values;for(let l=0;l<s.length;l++){var a=s[l];if(J.vType==a.isSN&&e==a.id&&t==a.chainType)return a}}getCurrency(e,t){let s=i._instance.m_dicCurrencyAddress.values;for(let l=0;l<s.length;l++){var a=s[l];if(J.vType==a.isSN&&e==a.id&&t==a.chainId)return a}}getTokensByChainId(e,t){let s=i._instance.m_dicCurrencyAddress.values;var a=[];for(let u=0;u<s.length;u++){var l=s[u];t==1?J.vType==l.isSN&&l.openRecharge==1&&e==l.chainId&&a.push(l):t==2&&J.vType==l.isSN&&l.openExtract==1&&e==l.chainId&&a.push(l)}return a}getNetAddress(e){let r=i._instance.m_dicCoinAddress.values;for(let a=0;a<r.length;a++){var s=r[a];if(J.vType==s.type&&e==s.tokenid)return s.tokenAddress}}getACoin(e,t){let s=i._instance.m_dicACoin.values;for(let l=0;l<s.length;l++){var a=s[l];if(e==a.token&&t==a.currency)return a}}static getArrFromDictionary(e,t,r){let s=[];for(let a=0;a<e.values.length;a++)e.values[a][t]+""==r+""&&s.push(e.values[a]);return s}getArrFromDicItemByKey(e,t){let r=[];for(let s=0;s<this.m_dicItems.values.length;s++)this.m_dicItems.values[s][e]+""==t+""&&r.push(this.m_dicItems.values[s]);return r}initConfigObject(e,t=null,r=null){let s="config/"+e+".json";console.log("initConfigObject： url: "+s);let a=ie.getResByURL(s).data;return new Ja(a,t)}initConfig(e,t,r=null,s=!1,a=null){let l="config/"+e+".json";console.log("initConfig url: "+l);let u=ie.getResByURL(l).data,m=new Oe;if(!u)return console.log("ERROR : SheetDataManager -->initConfig()  url:"+l),m;let p;for(let h=0;h<u.length;h++){let f=this.compoundKey(u[h],t);r?(p=new r,p.init==null&&console.log("ERROR :BaseItem> SheetDataManager -->initConfig()  url:"+l),p.init(u[h]),m.set(f,p),a&&a.runWith(p)):(m.set(f,u[h]),a&&a.runWith(u[h]))}if(s){let h=ie.setResURL(l);Laya.Loader.clearRes(h)}return m}initConfigWithData(e,t,r,s=null,a=!1,l=null){let u=new Oe;if(!t)return console.log("ERROR : SheetDataManager -->initConfigWithData()  name:"+e),u;let m;for(let p=0;p<t.length;p++){let h=this.compoundKey(t[p],r);s?(m=new s,m.init==null&&console.log("ERROR :BaseItem> SheetDataManager -->initConfigWithData()  name:"+e),m.init(t[p]),u.set(h,m),l&&l.runWith(m)):(u.set(h,t[p]),l&&l.runWith(t[p]))}return u}compoundKey(e,t){let r="",s=t.length;if(s>1)for(let a=0;a<s;a++)r+=e[t[a]],a!=s-1&&(r+="_");else r=e[t[0]];return r}getCompoundKey(e){let t="",r=e.length;if(r>1)for(let s=0;s<r;s++)t+=e[s],s!=r-1&&(t+="_");else t=e[0];return t}initConfig2(e,t,r,s=!0){let a="config/"+e+".json",l=ie.getResByURL(a).data,u=new Oe;if(!l)return console.log("ERROR : SheetDataManager -->initConfig2()  url:"+a),u;let m;for(let p=0;p<l.length;p++){let h=l[p][t],f;u.get(h)==null?(f=[],u.set(h,f)):f=u.get(h),m=new r,m.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig2()  url:"+a),m.init(l[p]),f.push(m)}if(s&&e!="items"){let p=ie.setResURL(a);Laya.Loader.clearRes(p)}return u}getItemsBy(e,t){let r=this.getArrFromDicItemByKey("itm_type",e),s=[];for(let a of r)a.child_type.toString()==t.toString()&&s.push(a);return s}getSheetDataByMultiKey(e,t){let r=this.getCompoundKey(t);return e.get(r)}getLevelById(e){for(let t of this.m_dicLevel.values)if(t.id==e)return t}getClubById(e){for(let t of this.m_dicClub.values)if(t.id==e)return t}},X=U1.getInstance();var Fe=class{constructor(){}};Fe.NO_ALL=-1,Fe.YES=1,Fe.NO=2,Fe.SURE=4,Fe.CANCEL=8,Fe.CLOSE=16,Fe.RETURN_YES=1,Fe.RETURN_NO=2,Fe.RETURN_NONE=3,Fe.BASEALERTVIEW="BaseAlertDialog",Fe.MatchConfimDialog="MatchConfimDialog",Fe.InviteConfimDialog="InviteConfimDialog",Fe.ApplyConfimDialog="ApplyConfimDialog",Fe.BUYCONFIRMVIEW="BuyConfirmView",Fe.GUILDQUITVIEW="GuildQuitView",Fe.BuyItemConfirmView="BuyItemConfirmView",Fe.DOWNLOADALERT="DownLoadAlert";var he=class{};he.M_SCENE_MAIN="M_SCENE_MAIN",he.M_SCENE_SHOP="M_SCENE_SHOP",he.M_SCENE_AIRDROP="M_SCENE_AIRDROP",he.M_SCENE_HERO="M_SCENE_HERO",he.M_SCENE_RANK="M_SCENE_RANK",he.M_SCENE_CLUB="M_SCENE_CLUB",he.M_SCENE_PRE_LOAD="M_SCENE_PRE_LOAD",he.M_SCENE_MATCH_READY="M_SCENE_MATCH_READY",he.M_SCENE_MATCH="M_SCENE_MATCH",he.M_SCENE_SNAKE_MATCH="M_SCENE_SNAKE_MATCH",he.M_SCENE_AI_ARENA="M_SCENE_AI_ARENA",he.M_SCENE_MATCH_TOURNAMENT="M_SCENE_MATCH_TOURNAMENT",he.M_SCENE_OPEN_GAME="M_SCENE_OPEN_GAME",he.M_SCENE_ASSET="M_SCENE_ASSET",he.M_SCENE_DIG="M_SCENE_DIG",he.M_SCENE_MAIL="M_SCENE_MAIL",he.M_SCENE_KNAPSACK="M_SCENE_KNAPSACK",he.M_SCENE_UNION="M_SCENE_UNION",he.M_SCENE_MYUNION="M_SCENE_MYUNION",he.M_SCENE_LCPOOL="M_SCENE_LCPOOL",he.M_SCENE_ARENA="M_SCENE_ARENA",he.M_SCENE_FRIEND="M_SCENE_FRIEND",he.M_SCENE_IGO_PAGE="M_SCENE_IGO_PAGE",he.M_SCENE_DAILY_TASK="M_SCENE_DAILY_TASK",he.M_SCENE_PVE="M_SCENE_PVE",he.M_SCENE_ROLE="M_SCENE_ROLE",he.M_SCENE_SETTING="M_SCENE_SETTING";var z1=class i{constructor(){}static getInstance(){return i._instance||(i._instance=new i),i._instance}AlertByType(e,t=null,r=0,s=null,a=null,l=!1,u=null){r==0&&(r=Fe.YES|Fe.NO),this.onLoaded(r,e,t,s,a,l,u)}onLoaded(e,t,r,s=null,a=null,l=!1,u=null){Be.intance.openModule(t,{flag:e,okHandler:s,cancelHandler:a,data:r,destroyDoCancel:l,initHandler:u})}},gi=z1.getInstance();var H1=class i{constructor(){this.mainSceneX=10086;this.isCloseAll=!0;v.on(k.EVENT_MODULE_ADDED,this,this.onAdded)}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){}setup(){}onAdded(e){}getPreSceneData(){if(this.m_arrFromScenes.length<1)return[he.M_SCENE_MAIN,!0,1,null];{let e=this.m_arrFromScenes.pop();return console.log("pop-----------route："+this.m_arrFromScenes.join(" | ")),e}}removePreSceneData(){this.m_arrFromScenes=[]}setMainScene(e=1,t=null){this.setCurrentScene(he.M_SCENE_MAIN,t)}async setCurrentScene(e,t=null){if(console.log("setCurrentScene: ",e,t),this.preSceneName=e,this.m_sceneCurrent&&this.m_sceneCurrent.name==e){console.log("currentScene："+this.m_sceneCurrent.name+"  openScene：："+e);return}switch(this.isCloseAll?Be.intance.closeAll():this.isCloseAll=!0,this.m_sceneCurrent&&(this.m_arrFromScenes||(this.m_arrFromScenes=[]),console.log("open-----------scene："+this.m_arrFromScenes),this.fromScene=this.m_sceneCurrent.name,console.log("fromSceneName: "+this.fromScene)),e){case he.M_SCENE_MAIN:this.m_arrFromScenes=[],this.m_sceneCurrent=await Laya.Scene.open("scenes/mainView/MainScene.ls");break;case he.M_SCENE_SHOP:this.m_sceneCurrent=await Laya.Scene.open("scenes/shop/ShopScene.ls",!0,t);break;case he.M_SCENE_RANK:this.m_sceneCurrent=await Laya.Scene.open("scenes/rank/RankScene.ls");break;case he.M_SCENE_CLUB:this.m_sceneCurrent=await Laya.Scene.open("scenes/club/ClubScene.ls");break;case he.M_SCENE_FRIEND:this.m_sceneCurrent=await Laya.Scene.open("scenes/friend/FriendScene.ls");break;case he.M_SCENE_KNAPSACK:this.m_sceneCurrent=await Laya.Scene.open("scenes/knapsack/KnapsackScene.ls",!0,t);break;case he.M_SCENE_MAIL:this.m_sceneCurrent=await Laya.Scene.open("scenes/mail/MailScene.ls");break;case he.M_SCENE_SNAKE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/SnakeMatch.ls");break;case he.M_SCENE_AI_ARENA:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/AiArenaScene.ls");break;case he.M_SCENE_MATCH_TOURNAMENT:this.m_sceneCurrent=await Laya.Scene.open("scenes/matchTournament/MatchTournamentScene.ls");break;case he.M_SCENE_ASSET:this.m_sceneCurrent=await Laya.Scene.open("scenes/asset/AssetNewScene.ls",!0,t);break;case he.M_SCENE_ROLE:this.m_sceneCurrent=await Laya.Scene.open("scenes/createRole/RoleInfoScene.ls",!1,t);break;case he.M_SCENE_SETTING:this.m_sceneCurrent=await Laya.Scene.open("scenes/gameSetting/SettingScene.ls",!1,t);break;default:break}ee.logs("======================  打开Scene: "+e+"  ======================"),this.m_sceneCurrent.name=e}get currSceneName(){return this.m_sceneCurrent?this.m_sceneCurrent.name:""}},ze=H1.getInstance();var qt=class{static initConfig(e){this.configDic=new Oe;for(let t of e){let r=t.sstringvalue;t.sadditional==="JSON"&&(r=JSON.parse(r)),this.configDic.set(t.skey2,r),this[t.skey2]=r}}};qt.ADDRESS0="0x0000000000000000000000000000000000000000",qt.TOKEN_ERC20ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"miner",type:"address"}],name:"addMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_delMinter",type:"address"}],name:"delMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idx",type:"uint256"}],name:"getMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMinterLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],qt.WITHDRAW_AND_RECHARGE_ADDRESS="",qt.WITHDRAW_AND_RECHARGE_ABI="";var Zb=gk(yk());var Zr=class{static getInviteUrl(){return window.location.origin+"?invite="+this.encode(He.walletAddress)}static encode(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=t.length,s=t.split(""),a="",l,u,m,p,h=0;h<e.length;h++)l=e.charCodeAt(h),u=l%r,l=(l-u)/r,m=l%r,l=(l-m)/r,p=l%r,a+=s[p]+s[m]+s[u];return window.btoa(a)}static decode(e){e=window.atob(e);var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=t.length,s,a,l,u,m=0,p;p=new Array(Math.floor(e.length/3)),s=p.length;for(var h=0;h<s;h++)a=t.indexOf(e.charAt(m)),m++,l=t.indexOf(e.charAt(m)),m++,u=t.indexOf(e.charAt(m)),m++,p[h]=a*r*r+l*r+u;return s=decodeCharCode(p.join(",")),s}static getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(t);return r!=null?r[2]:""}static getInviteWalletAddress(){let e=this.getQueryString("invite");return e&&(e=this.decode(e)),e}static toWei(e,t){let r=e*10**parseInt(t);return window.web3.utils.toBN("0x"+r.toString(16)).toString()}static fromWei(e,t,r=0){if(!e)return 0;let s=e.length-t+r;if(s<=0)return 0;let a=e.toString().slice(0,s);if(r){let l=a.length-r;if(l<=0){let u="0.";for(let m=0;m<Math.abs(l);m++)u+="0";a=u+a}else a=a.slice(0,a.length-r)+"."+a.slice(a.length-r)}return a}static deepClone(e){let t=new Oe;for(let r in e)typeof e[r]=="function"?t[r]=e[r]:t[r]=JSON.parse(JSON.stringify(e[r]));return t}};function Le(i,e,t){let r=i[e.name];if(typeof r=="function")return r;let s=i[t];return typeof s=="function"?s:a=>e(i,a)}ii();nt();var tf=class extends W{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};mi();Fr();Hu();cs();ta();co();var TS="/docs/contract/encodeEventTopics";function nn(i){let{abi:e,eventName:t,args:r}=i,s=e[0];if(t){let m=rn({abi:e,name:t});if(!m)throw new Bu(t,{docsPath:TS});s=m}if(s.type!=="event")throw new Bu(void 0,{docsPath:TS});let a=Ni(s),l=ls(a),u=[];if(r&&"inputs"in s){let m=s.inputs?.filter(h=>"indexed"in h&&h.indexed),p=Array.isArray(r)?r:Object.values(r).length>0?m?.map(h=>r[h.name])??[]:[];p.length>0&&(u=m?.map((h,f)=>Array.isArray(p[f])?p[f].map((g,b)=>AS({param:h,value:p[f][b]})):typeof p[f]<"u"&&p[f]!==null?AS({param:h,value:p[f]}):null)??[])}return[l,...u]}function AS({param:i,value:e}){if(i.type==="string"||i.type==="bytes")return Rt(hr(e));if(i.type==="tuple"||i.type.match(/^(.*)\[(\d+)?\]$/))throw new tf(i.type);return Ji([i],[e])}We();function us(i,{method:e}){let t={};return i.transport.type==="fallback"&&i.transport.onResponse?.(({method:r,response:s,status:a,transport:l})=>{a==="success"&&e===r&&(t[s]=l.request)}),r=>t[r]||i.request}async function vf(i,e){let{address:t,abi:r,args:s,eventName:a,fromBlock:l,strict:u,toBlock:m}=e,p=us(i,{method:"eth_newFilter"}),h=a?nn({abi:r,args:s,eventName:a}):void 0,f=await i.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof l=="bigint"?Ae(l):l,toBlock:typeof m=="bigint"?Ae(m):m,topics:h}]});return{abi:r,args:s,eventName:a,id:f,request:p(f),strict:!!u,type:"event"}}ni();fr();ii();nt();ms();ua();Ku();var f2=3;function er(i,{abi:e,address:t,args:r,docsPath:s,functionName:a,sender:l}){let u=i instanceof an?i:i instanceof W?i.walk(_=>"data"in _)||i.walk():{},{code:m,data:p,details:h,message:f,shortMessage:g}=u,b=(()=>i instanceof mr?new zf({functionName:a}):[f2,Bn.code].includes(m)&&(p||h||f||g)?new ca({abi:e,data:typeof p=="object"?p.data:p,functionName:a,message:u instanceof hs?h:g??f}):i)();return new Uf(b,{abi:e,args:r,contractAddress:t,docsPath:s,functionName:a,sender:l})}ni();nt();na();Fr();function KS(i){let e=Rt(`0x${i.substring(4)}`).substring(26);return Mn(`0x${e}`)}Mr();Ii();We();async function Aw({hash:i,signature:e}){let t=Qt(i)?i:De(i),{secp256k1:r}=await Promise.resolve().then(()=>(ng(),Lw));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){let{r:p,s:h,v:f,yParity:g}=e,b=Number(g??f),_=Tw(b);return new r.Signature(Ot(p),Ot(h)).addRecoveryBit(_)}let l=Qt(e)?e:De(e),u=ei(`0x${l.slice(130)}`),m=Tw(u);return r.Signature.fromCompact(l.substring(2,130)).addRecoveryBit(m)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function Tw(i){if(i===0||i===1)return i;if(i===27)return 0;if(i===28)return 1;throw new Error("Invalid yParityOrV value")}async function sg({hash:i,signature:e}){return KS(await Aw({hash:i,signature:e}))}dr();mi();We();nt();wf();mi();We();function jr(i,e="hex"){let t=Cw(i),r=po(new Uint8Array(t.length));return t.encode(r),e==="hex"?pt(r.bytes):r.bytes}function Cw(i){return Array.isArray(i)?iM(i.map(e=>Cw(e))):rM(i)}function iM(i){let e=i.reduce((s,a)=>s+a.length,0),t=Mw(e);return{length:(()=>e<=55?1+e:1+t+e)(),encode(s){e<=55?s.pushByte(192+e):(s.pushByte(192+55+t),t===1?s.pushUint8(e):t===2?s.pushUint16(e):t===3?s.pushUint24(e):s.pushUint32(e));for(let{encode:a}of i)a(s)}}}function rM(i){let e=typeof i=="string"?ri(i):i,t=Mw(e.length);return{length:(()=>e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length)(),encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(128+55+t),t===1?s.pushUint8(e.length):t===2?s.pushUint16(e.length):t===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Mw(i){if(i<2**8)return 1;if(i<2**16)return 2;if(i<2**24)return 3;if(i<2**32)return 4;throw new W("Length is too large.")}Fr();function Rw(i){let{chainId:e,nonce:t,to:r}=i,s=i.contractAddress??i.address,a=Rt(ki(["0x05",jr([e?Ae(e):"0x",s,t?Ae(t):"0x"])]));return r==="bytes"?ri(a):a}async function ag(i){let{authorization:e,signature:t}=i;return sg({hash:Rw(e),signature:t??e})}We();Af();fo();nt();Ur();var og=class extends W{constructor(e,{account:t,docsPath:r,chain:s,data:a,gas:l,gasPrice:u,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:h,to:f,value:g}){let b=oa({from:t?.address,to:f,value:typeof g<"u"&&`${ho(g)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:a,gas:l,gasPrice:typeof u<"u"&&`${si(u)} gwei`,maxFeePerGas:typeof m<"u"&&`${si(m)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${si(p)} gwei`,nonce:h});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",b].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}};ks();ep();function Bw(i,{docsPath:e,...t}){let r=(()=>{let s=Ss(i,t);return s instanceof _r?i:s})();return new og(r,{docsPath:e,...t})}tp();xa();cg();Es();ni();fo();nt();var ug=class extends W{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},Ls=class extends W{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},pg=class extends W{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${si(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};Ii();nt();var Vo=class extends W{constructor({blockHash:e,blockNumber:t}){let r="Block";e&&(r=`Block at hash "${e}"`),t&&(r=`Block at number "${t}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}};We();lg();Ii();lg();var jx={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function va(i){let e={...i,blockHash:i.blockHash?i.blockHash:null,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,chainId:i.chainId?ei(i.chainId):void 0,gas:i.gas?BigInt(i.gas):void 0,gasPrice:i.gasPrice?BigInt(i.gasPrice):void 0,maxFeePerBlobGas:i.maxFeePerBlobGas?BigInt(i.maxFeePerBlobGas):void 0,maxFeePerGas:i.maxFeePerGas?BigInt(i.maxFeePerGas):void 0,maxPriorityFeePerGas:i.maxPriorityFeePerGas?BigInt(i.maxPriorityFeePerGas):void 0,nonce:i.nonce?ei(i.nonce):void 0,to:i.to?i.to:null,transactionIndex:i.transactionIndex?Number(i.transactionIndex):null,type:i.type?jx[i.type]:void 0,typeHex:i.type?i.type:void 0,value:i.value?BigInt(i.value):void 0,v:i.v?BigInt(i.v):void 0};return i.authorizationList&&(e.authorizationList=oM(i.authorizationList)),e.yParity=(()=>{if(i.yParity)return Number(i.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}var Nw=Ho("transaction",va);function oM(i){return i.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function ip(i){let e=(i.transactions??[]).map(t=>typeof t=="string"?t:va(t));return{...i,baseFeePerGas:i.baseFeePerGas?BigInt(i.baseFeePerGas):null,blobGasUsed:i.blobGasUsed?BigInt(i.blobGasUsed):void 0,difficulty:i.difficulty?BigInt(i.difficulty):void 0,excessBlobGas:i.excessBlobGas?BigInt(i.excessBlobGas):void 0,gasLimit:i.gasLimit?BigInt(i.gasLimit):void 0,gasUsed:i.gasUsed?BigInt(i.gasUsed):void 0,hash:i.hash?i.hash:null,logsBloom:i.logsBloom?i.logsBloom:null,nonce:i.nonce?i.nonce:null,number:i.number?BigInt(i.number):null,size:i.size?BigInt(i.size):void 0,timestamp:i.timestamp?BigInt(i.timestamp):void 0,transactions:e,totalDifficulty:i.totalDifficulty?BigInt(i.totalDifficulty):null}}var Ow=Ho("block",ip);async function Ei(i,{blockHash:e,blockNumber:t,blockTag:r,includeTransactions:s}={}){let a=r??"latest",l=s??!1,u=t!==void 0?Ae(t):void 0,m=null;if(e?m=await i.request({method:"eth_getBlockByHash",params:[e,l]},{dedupe:!0}):m=await i.request({method:"eth_getBlockByNumber",params:[u||a,l]},{dedupe:!!u}),!m)throw new Vo({blockHash:e,blockNumber:t});return(i.chain?.formatters?.block?.format||ip)(m)}async function Wo(i){let e=await i.request({method:"eth_gasPrice"});return BigInt(e)}async function Fw(i,e){return Gx(i,e)}async function Gx(i,e){let{block:t,chain:r=i.chain,request:s}=e||{};try{let a=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof a=="function"){let u=t||await Le(i,Ei,"getBlock")({}),m=await a({block:u,client:i,request:s});if(m===null)throw new Error;return m}if(typeof a<"u")return a;let l=await i.request({method:"eth_maxPriorityFeePerGas"});return Ot(l)}catch{let[a,l]=await Promise.all([t?Promise.resolve(t):Le(i,Ei,"getBlock")({}),Le(i,Wo,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Ls;let u=l-a.baseFeePerGas;return u<0n?0n:u}}async function Pw(i,e){return mg(i,e)}async function mg(i,e){let{block:t,chain:r=i.chain,request:s,type:a="eip1559"}=e||{},l=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:t,client:i,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(l<1)throw new ug;let m=10**(l.toString().split(".")[1]?.length??0),p=g=>g*BigInt(Math.ceil(l*m))/BigInt(m),h=t||await Le(i,Ei,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){let g=await r.fees.estimateFeesPerGas({block:t,client:i,multiply:p,request:s,type:a});if(g!==null)return g}if(a==="eip1559"){if(typeof h.baseFeePerGas!="bigint")throw new Ls;let g=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await Gx(i,{block:h,chain:r,request:s}),b=p(h.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??b+g,maxPriorityFeePerGas:g}}return{gasPrice:s?.gasPrice??p(await Le(i,Wo,"getGasPrice")({}))}}Ii();We();async function Ko(i,{address:e,blockTag:t="latest",blockNumber:r}){let s=await i.request({method:"eth_getTransactionCount",params:[e,r?Ae(r):t]},{dedupe:!!r});return ei(s)}mi();We();function $o(i){let{kzg:e}=i,t=i.to??(typeof i.blobs[0]=="string"?"hex":"bytes"),r=typeof i.blobs[0]=="string"?i.blobs.map(a=>ri(a)):i.blobs,s=[];for(let a of r)s.push(Uint8Array.from(e.blobToKzgCommitment(a)));return t==="bytes"?s:s.map(a=>pt(a))}mi();We();function Yo(i){let{kzg:e}=i,t=i.to??(typeof i.blobs[0]=="string"?"hex":"bytes"),r=typeof i.blobs[0]=="string"?i.blobs.map(l=>ri(l)):i.blobs,s=typeof i.commitments[0]=="string"?i.commitments.map(l=>ri(l)):i.commitments,a=[];for(let l=0;l<r.length;l++){let u=r[l],m=s[l];a.push(Uint8Array.from(e.computeBlobKzgProof(u,m)))}return t==="bytes"?a:a.map(l=>pt(l))}We();yx();Mr();mi();We();function Uw(i,e){let t=e||"hex",r=ha(Qt(i,{strict:!1})?hr(i):i);return t==="bytes"?r:De(r)}function zw(i){let{commitment:e,version:t=1}=i,r=i.to??(typeof e=="string"?"hex":"bytes"),s=Uw(e,"bytes");return s.set([t],0),r==="bytes"?s:pt(s)}function hg(i){let{commitments:e,version:t}=i,r=i.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(let a of e)s.push(zw({commitment:a,to:r,version:t}));return s}nt();var dg=class extends W{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}},qo=class extends W{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},fg=class extends W{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}},gg=class extends W{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}};wf();Rr();mi();We();function Hw(i){let e=i.to??(typeof i.data=="string"?"hex":"bytes"),t=typeof i.data=="string"?ri(i.data):i.data,r=bt(t);if(!r)throw new qo;if(r>761855)throw new dg({maxSize:761855,size:r});let s=[],a=!0,l=0;for(;a;){let u=po(new Uint8Array(131072)),m=0;for(;m<4096;){let p=t.slice(l,l+(32-1));if(u.pushByte(0),u.pushBytes(p),p.length<31){u.pushByte(128),a=!1;break}m++,l+=31}s.push(u)}return e==="bytes"?s.map(u=>u.bytes):s.map(u=>pt(u.bytes))}function bg(i){let{data:e,kzg:t,to:r}=i,s=i.blobs??Hw({data:e,to:r}),a=i.commitments??$o({blobs:s,kzg:t,to:r}),l=i.proofs??Yo({blobs:s,commitments:a,kzg:t,to:r}),u=[];for(let m=0;m<s.length;m++)u.push({blob:s[m],commitment:a[m],proof:l[m]});return u}Es();Ur();function yg(i){if(i.type)return i.type;if(typeof i.authorizationList<"u")return"eip7702";if(typeof i.blobs<"u"||typeof i.blobVersionedHashes<"u"||typeof i.maxFeePerBlobGas<"u"||typeof i.sidecars<"u")return"eip4844";if(typeof i.maxFeePerGas<"u"||typeof i.maxPriorityFeePerGas<"u")return"eip1559";if(typeof i.gasPrice<"u")return typeof i.accessList<"u"?"eip2930":"legacy";throw new Df({transaction:i})}Ii();async function vr(i){let e=await i.request({method:"eth_chainId"},{dedupe:!0});return ei(e)}var Vx=["blobVersionedHashes","chainId","fees","gas","nonce","type"],jw=new Map;async function Ts(i,e){let{account:t=i.account,blobs:r,chain:s,gas:a,kzg:l,nonce:u,nonceManager:m,parameters:p=Vx,type:h}=e,f=t&&ot(t),g={...e,...f?{from:f?.address}:{}},b;async function _(){return b||(b=await Le(i,Ei,"getBlock")({blockTag:"latest"}),b)}let I;async function x(){return I||(s?s.id:typeof e.chainId<"u"?e.chainId:(I=await Le(i,vr,"getChainId")({}),I))}if(p.includes("nonce")&&typeof u>"u"&&f)if(m){let L=await x();g.nonce=await m.consume({address:f.address,chainId:L,client:i})}else g.nonce=await Le(i,Ko,"getTransactionCount")({address:f.address,blockTag:"pending"});if((p.includes("blobVersionedHashes")||p.includes("sidecars"))&&r&&l){let L=$o({blobs:r,kzg:l});if(p.includes("blobVersionedHashes")){let E=hg({commitments:L,to:"hex"});g.blobVersionedHashes=E}if(p.includes("sidecars")){let E=Yo({blobs:r,commitments:L,kzg:l}),T=bg({blobs:r,commitments:L,proofs:E,to:"hex"});g.sidecars=T}}if(p.includes("chainId")&&(g.chainId=await x()),(p.includes("fees")||p.includes("type"))&&typeof h>"u")try{g.type=yg(g)}catch{let L=jw.get(i.uid);typeof L>"u"&&(L=typeof(await _())?.baseFeePerGas=="bigint",jw.set(i.uid,L)),g.type=L?"eip1559":"legacy"}if(p.includes("fees"))if(g.type!=="legacy"&&g.type!=="eip2930"){if(typeof g.maxFeePerGas>"u"||typeof g.maxPriorityFeePerGas>"u"){let L=await _(),{maxFeePerGas:E,maxPriorityFeePerGas:T}=await mg(i,{block:L,chain:s,request:g});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<T)throw new pg({maxPriorityFeePerGas:T});g.maxPriorityFeePerGas=T,g.maxFeePerGas=E}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Ls;if(typeof e.gasPrice>"u"){let L=await _(),{gasPrice:E}=await mg(i,{block:L,chain:s,request:g,type:"legacy"});g.gasPrice=E}}return p.includes("gas")&&typeof a>"u"&&(g.gas=await Le(i,Qo,"estimateGas")({...g,account:f&&{address:f.address,type:"json-rpc"}})),Wi(g),delete g.parameters,g}We();async function _g(i,{address:e,blockNumber:t,blockTag:r="latest"}){let s=t?Ae(t):void 0,a=await i.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(a)}async function Qo(i,e){let{account:t=i.account}=e,r=t?ot(t):void 0;try{let Me=function(be){let{block:me,request:ve,rpcStateOverride:B}=be;return i.request({method:"eth_estimateGas",params:B?[ve,me??"latest",B]:me?[ve,me]:[ve]})};var s=Me;let{accessList:a,authorizationList:l,blobs:u,blobVersionedHashes:m,blockNumber:p,blockTag:h,data:f,gas:g,gasPrice:b,maxFeePerBlobGas:_,maxFeePerGas:I,maxPriorityFeePerGas:x,nonce:L,value:E,stateOverride:T,...R}=await Ts(i,{...e,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),F=(p?Ae(p):void 0)||h,z=jo(T),V=await(async()=>{if(R.to)return R.to;if(l&&l.length>0)return await ag({authorization:l[0]}).catch(()=>{throw new W("`to` is required. Could not infer from `authorizationList`")})})();Wi(e);let $=i.chain?.formatters?.transactionRequest?.format,re=($||xr)({...ws(R,{format:$}),from:r?.address,accessList:a,authorizationList:l,blobs:u,blobVersionedHashes:m,data:f,gas:g,gasPrice:b,maxFeePerBlobGas:_,maxFeePerGas:I,maxPriorityFeePerGas:x,nonce:L,to:V,value:E}),rt=BigInt(await Me({block:F,request:re,rpcStateOverride:z}));if(l){let be=await _g(i,{address:re.from}),me=await Promise.all(l.map(async ve=>{let{address:B}=ve,Pe=await Me({block:F,request:{authorizationList:void 0,data:f,from:r?.address,to:B,value:Ae(be)},rpcStateOverride:z}).catch(()=>100000n);return 2n*BigInt(Pe)}));rt+=me.reduce((ve,B)=>ve+B,0n)}return rt}catch(a){throw Bw(a,{...e,account:r,chain:i.chain})}}async function Gw(i,e){let{abi:t,address:r,args:s,functionName:a,dataSuffix:l,...u}=e,m=Ft({abi:t,args:s,functionName:a});try{return await Le(i,Qo,"estimateGas")({data:`${m}${l?l.replace("0x",""):""}`,to:r,...u})}catch(p){let h=u.account?ot(u.account):void 0;throw er(p,{abi:t,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:a,sender:h?.address})}}co();ii();Zo();mi();Fr();Hu();ii();Rr();Hu();px();Ef();ta();var Vw="/docs/contract/decodeEventLog";function Xo(i){let{abi:e,data:t,strict:r,topics:s}=i,a=r??!0,[l,...u]=s;if(!l)throw new Yd({docsPath:Vw});let m=(()=>e.length===1?e[0]:e.find(I=>I.type==="event"&&l===ls(Ni(I))))();if(!(m&&"name"in m)||m.type!=="event")throw new so(l,{docsPath:Vw});let{name:p,inputs:h}=m,f=h?.some(I=>!("name"in I&&I.name)),g=f?[]:{},b=h.filter(I=>"indexed"in I&&I.indexed);for(let I=0;I<b.length;I++){let x=b[I],L=u[I];if(!L)throw new Jr({abiItem:m,param:x});g[f?I:x.name||I]=uM({param:x,value:L})}let _=h.filter(I=>!("indexed"in I&&I.indexed));if(_.length>0){if(t&&t!=="0x")try{let I=aa(_,t);if(I)if(f)g=[...g,...I];else for(let x=0;x<_.length;x++)g[_[x].name]=I[x]}catch(I){if(a)throw I instanceof ro||I instanceof uo?new Br({abiItem:m,data:t,params:_,size:bt(t)}):I}else if(a)throw new Br({abiItem:m,data:"0x",params:_,size:0})}return{eventName:p,args:Object.values(g).length>0?g:void 0}}function uM({param:i,value:e}){return i.type==="string"||i.type==="bytes"||i.type==="tuple"||i.type.match(/^(.*)\[(\d+)?\]$/)?e:(aa([i],e)||[])[0]}function Jo(i){let{abi:e,args:t,logs:r,strict:s=!0}=i,a=(()=>{if(i.eventName)return Array.isArray(i.eventName)?i.eventName:[i.eventName]})();return r.map(l=>{try{let u=e.find(p=>p.type==="event"&&l.topics[0]===ls(p));if(!u)return null;let m=Xo({...l,abi:[u],strict:s});return a&&!a.includes(m.eventName)||!pM({args:m.args,inputs:u.inputs,matchArgs:t})?null:{...m,...l}}catch(u){let m,p;if(u instanceof so)return null;if(u instanceof Br||u instanceof Jr){if(s)return null;m=u.abiItem.name,p=u.abiItem.inputs?.some(h=>!("name"in h&&h.name))}return{...l,args:p?[]:{},eventName:m}}}).filter(Boolean)}function pM(i){let{args:e,inputs:t,matchArgs:r}=i;if(!r)return!0;if(!e)return!1;function s(a,l,u){try{return a.type==="address"?pn(l,u):a.type==="string"||a.type==="bytes"?Rt(hr(l))===u:l===u}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((a,l)=>{if(a==null)return!0;let u=t[l];return u?(Array.isArray(a)?a:[a]).some(p=>s(u,p,e[l])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([a,l])=>{if(l==null)return!0;let u=t.find(p=>p.name===a);return u?(Array.isArray(l)?l:[l]).some(p=>s(u,p,e[a])):!1}):!1}We();function Li(i,{args:e,eventName:t}={}){return{...i,blockHash:i.blockHash?i.blockHash:null,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,logIndex:i.logIndex?Number(i.logIndex):null,transactionHash:i.transactionHash?i.transactionHash:null,transactionIndex:i.transactionIndex?Number(i.transactionIndex):null,...t?{args:e,eventName:t}:{}}}async function el(i,{address:e,blockHash:t,fromBlock:r,toBlock:s,event:a,events:l,args:u,strict:m}={}){let p=m??!1,h=l??(a?[a]:void 0),f=[];h&&(f=[h.flatMap(I=>nn({abi:[I],eventName:I.name,args:l?void 0:u}))],a&&(f=f[0]));let g;t?g=await i.request({method:"eth_getLogs",params:[{address:e,topics:f,blockHash:t}]}):g=await i.request({method:"eth_getLogs",params:[{address:e,topics:f,fromBlock:typeof r=="bigint"?Ae(r):r,toBlock:typeof s=="bigint"?Ae(s):s}]});let b=g.map(_=>Li(_));return h?Jo({abi:h,args:u,logs:b,strict:p}):b}async function xg(i,e){let{abi:t,address:r,args:s,blockHash:a,eventName:l,fromBlock:u,toBlock:m,strict:p}=e,h=l?rn({abi:t,name:l}):void 0,f=h?void 0:t.filter(g=>g.type==="event");return Le(i,el,"getLogs")({address:r,args:s,blockHash:a,event:h,events:f,fromBlock:u,toBlock:m,strict:p})}As();fr();tl();async function bi(i,e){let{abi:t,address:r,args:s,functionName:a,...l}=e,u=Ft({abi:t,args:s,functionName:a});try{let{data:m}=await Le(i,mn,"call")({...l,data:u,to:r});return Ki({abi:t,args:s,functionName:a,data:m||"0x"})}catch(m){throw er(m,{abi:t,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:a})}}ni();As();fr();tl();async function iE(i,e){let{abi:t,address:r,args:s,dataSuffix:a,functionName:l,...u}=e,m=u.account?ot(u.account):i.account,p=Ft({abi:t,args:s,functionName:l});try{let{data:h}=await Le(i,mn,"call")({batch:!1,data:`${p}${a?a.replace("0x",""):""}`,to:r,...u,account:m}),f=Ki({abi:t,args:s,functionName:l,data:h||"0x"}),g=t.filter(b=>"name"in b&&b.name===e.functionName);return{result:f,request:{abi:g,address:r,args:s,dataSuffix:a,functionName:l,...u,account:m}}}catch(h){throw er(h,{abi:t,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:l,sender:m?.address})}}ii();Ku();var ev=new Map,rE=new Map,_M=0;function $i(i,e,t){let r=++_M,s=()=>ev.get(i)||[],a=()=>{let h=s();ev.set(i,h.filter(f=>f.id!==r))},l=()=>{let h=s();if(!h.some(g=>g.id===r))return;let f=rE.get(i);h.length===1&&f&&f(),a()},u=s();if(ev.set(i,[...u,{id:r,fns:e}]),u&&u.length>0)return l;let m={};for(let h in e)m[h]=(...f)=>{let g=s();if(g.length!==0)for(let b of g)b.fns[h]?.(...f)};let p=t(m);return typeof p=="function"&&rE.set(i,p),l}async function ap(i){return new Promise(e=>setTimeout(e,i))}function hn(i,{emitOnBegin:e,initialWaitTime:t,interval:r}){let s=!0,a=()=>s=!1;return(async()=>{let u;e&&(u=await i({unpoll:a}));let m=await t?.(u)??r;await ap(m);let p=async()=>{s&&(await i({unpoll:a}),await ap(r),p())};p()})(),a}Fi();var xM=new Map,vM=new Map;function nE(i){let e=(s,a)=>({clear:()=>a.delete(s),get:()=>a.get(s),set:l=>a.set(s,l)}),t=e(i,xM),r=e(i,vM);return{clear:()=>{t.clear(),r.clear()},promise:t,response:r}}async function sE(i,{cacheKey:e,cacheTime:t=Number.POSITIVE_INFINITY}){let r=nE(e),s=r.response.get();if(s&&t>0&&new Date().getTime()-s.created.getTime()<t)return s.data;let a=r.promise.get();a||(a=i(),r.promise.set(a));try{let l=await a;return r.response.set({created:new Date,data:l}),l}finally{r.promise.clear()}}var IM=i=>`blockNumber.${i}`;async function dn(i,{cacheTime:e=i.cacheTime}={}){let t=await sE(()=>i.request({method:"eth_blockNumber"}),{cacheKey:IM(i.uid),cacheTime:e});return BigInt(t)}async function Cs(i,{filter:e}){let t="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;let s=r.map(a=>Li(a));return!("abi"in e)||!e.abi?s:Jo({abi:e.abi,logs:s,strict:t})}async function Ms(i,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function aE(i,e){let{abi:t,address:r,args:s,batch:a=!0,eventName:l,fromBlock:u,onError:m,onLogs:p,poll:h,pollingInterval:f=i.pollingInterval,strict:g}=e;return(()=>typeof h<"u"?h:typeof u=="bigint"?!0:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))()?(()=>{let x=g??!1,L=mt(["watchContractEvent",r,s,a,i.uid,l,f,x,u]);return $i(L,{onLogs:p,onError:m},E=>{let T;u!==void 0&&(T=u-1n);let R,H=!1,F=hn(async()=>{if(!H){try{R=await Le(i,vf,"createContractEventFilter")({abi:t,address:r,args:s,eventName:l,strict:x,fromBlock:u})}catch{}H=!0;return}try{let z;if(R)z=await Le(i,Cs,"getFilterChanges")({filter:R});else{let V=await Le(i,dn,"getBlockNumber")({});T&&T<V?z=await Le(i,xg,"getContractEvents")({abi:t,address:r,args:s,eventName:l,fromBlock:T+1n,toBlock:V,strict:x}):z=[],T=V}if(z.length===0)return;if(a)E.onLogs(z);else for(let V of z)E.onLogs([V])}catch(z){R&&z instanceof on&&(H=!1),E.onError?.(z)}},{emitOnBegin:!0,interval:f});return async()=>{R&&await Le(i,Ms,"uninstallFilter")({filter:R}),F()}})})():(()=>{let x=g??!1,L=mt(["watchContractEvent",r,s,a,i.uid,l,f,x]),E=!0,T=()=>E=!1;return $i(L,{onLogs:p,onError:m},R=>((async()=>{try{let H=(()=>{if(i.transport.type==="fallback"){let V=i.transport.transports.find($=>$.config.type==="webSocket");return V?V.value:i.transport}return i.transport})(),F=l?nn({abi:t,eventName:l,args:s}):[],{unsubscribe:z}=await H.subscribe({params:["logs",{address:r,topics:F}],onData(V){if(!E)return;let $=V.result;try{let{eventName:Z,args:re}=Xo({abi:t,data:$.data,topics:$.topics,strict:g}),Me=Li($,{args:re,eventName:Z});R.onLogs([Me])}catch(Z){let re,Me;if(Z instanceof Br||Z instanceof Jr){if(g)return;re=Z.abiItem.name,Me=Z.abiItem.inputs?.some(be=>!("name"in be&&be.name))}let rt=Li($,{args:Me?[]:{},eventName:re});R.onLogs([rt])}},onError(V){R.onError?.(V)}});T=z,E||T()}catch(H){m?.(H)}})(),()=>T()))})()}ni();nt();var Ti=class extends W{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}},Rs=class extends W{constructor({docsPath:e,metaMessages:t,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}};fr();ni();nt();sp();function Bg({chain:i,currentChainId:e}){if(!i)throw new wg;if(e!==i.id)throw new Sg({chain:i,currentChainId:e})}ks();Ur();ep();function oE(i,{docsPath:e,...t}){let r=(()=>{let s=Ss(i,t);return s instanceof _r?i:s})();return new Of(r,{docsPath:e,...t})}tp();xa();ju();Es();async function il(i,{serializedTransaction:e}){return i.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}var tv=new tn(128);async function rl(i,e){let{account:t=i.account,chain:r=i.chain,accessList:s,authorizationList:a,blobs:l,data:u,gas:m,gasPrice:p,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,value:_,...I}=e;if(typeof t>"u")throw new Ti({docsPath:"/docs/actions/wallet/sendTransaction"});let x=t?ot(t):null;try{Wi(e);let L=await(async()=>{if(e.to)return e.to;if(e.to!==null&&a&&a.length>0)return await ag({authorization:a[0]}).catch(()=>{throw new W("`to` is required. Could not infer from `authorizationList`.")})})();if(x?.type==="json-rpc"||x===null){let E;r!==null&&(E=await Le(i,vr,"getChainId")({}),Bg({currentChainId:E,chain:r}));let T=i.chain?.formatters?.transactionRequest?.format,H=(T||xr)({...ws(I,{format:T}),accessList:s,authorizationList:a,blobs:l,chainId:E,data:u,from:x?.address,gas:m,gasPrice:p,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,to:L,value:_}),F=tv.get(i.uid),z=F?"wallet_sendTransaction":"eth_sendTransaction";try{return await i.request({method:z,params:[H]},{retryCount:0})}catch(V){if(F===!1)throw V;let $=V;if($.name==="InvalidInputRpcError"||$.name==="InvalidParamsRpcError"||$.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError")return await i.request({method:"wallet_sendTransaction",params:[H]},{retryCount:0}).then(Z=>(tv.set(i.uid,!0),Z)).catch(Z=>{let re=Z;throw re.name==="MethodNotFoundRpcError"||re.name==="MethodNotSupportedRpcError"?(tv.set(i.uid,!1),$):re});throw $}}if(x?.type==="local"){let E=await Le(i,Ts,"prepareTransactionRequest")({account:x,accessList:s,authorizationList:a,blobs:l,chain:r,data:u,gas:m,gasPrice:p,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,nonceManager:x.nonceManager,parameters:[...Vx,"sidecars"],value:_,...I,to:L}),T=r?.serializers?.transaction,R=await x.signTransaction(E,{serializer:T});return await Le(i,il,"sendRawTransaction")({serializedTransaction:R})}throw x?.type==="smart"?new Rs({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Rs({docsPath:"/docs/actions/wallet/sendTransaction",type:x?.type})}catch(L){throw L instanceof Rs?L:oE(L,{...e,account:x,chain:e.chain||void 0})}}async function lE(i,e){let{abi:t,account:r=i.account,address:s,args:a,dataSuffix:l,functionName:u,...m}=e;if(typeof r>"u")throw new Ti({docsPath:"/docs/contract/writeContract"});let p=r?ot(r):null,h=Ft({abi:t,args:a,functionName:u});try{return await Le(i,rl,"sendTransaction")({data:`${h}${l?l.replace("0x",""):""}`,to:s,account:p,...m})}catch(f){throw er(f,{abi:t,address:s,args:a,docsPath:"/docs/contract/writeContract",functionName:u,sender:p?.address})}}nt();var Dg=class extends W{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function cE(i,e){let{address:t,factory:r,factoryData:s}=e;try{let[a,l,u,m,p,h,f]=await Le(i,bi,"readContract")({abi:kM,address:t,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:l,version:u,chainId:Number(m),verifyingContract:p,salt:h},extensions:f,fields:a}}catch(a){let l=a;throw l.name==="ContractFunctionExecutionError"&&l.cause.name==="ContractFunctionZeroDataError"?new Dg({address:t}):l}}var kM=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];We();async function uE(i,{chain:e}){let{id:t,name:r,nativeCurrency:s,rpcUrls:a,blockExplorers:l}=e;await i.request({method:"wallet_addEthereumChain",params:[{chainId:Ae(t),chainName:r,nativeCurrency:s,rpcUrls:a.default.http,blockExplorerUrls:l?Object.values(l).map(({url:u})=>u):void 0}]},{dedupe:!0,retryCount:0})}ni();var Ng=256,Og;function Fg(i=11){if(!Og||Ng+i>256*2){Og="",Ng=0;for(let e=0;e<256;e++)Og+=(256+Math.random()*256|0).toString(16).substring(1)}return Og.substring(Ng,Ng+++i)}function Pg(i){let{batch:e,cacheTime:t=i.pollingInterval??4e3,ccipRead:r,key:s="base",name:a="Base Client",pollingInterval:l=4e3,type:u="base"}=i,m=i.chain,p=i.account?ot(i.account):void 0,{config:h,request:f,value:g}=i.transport({chain:m,pollingInterval:l}),b={...h,...g},_={account:p,batch:e,cacheTime:t,ccipRead:r,chain:m,key:s,name:a,pollingInterval:l,request:f,transport:b,type:u,uid:Fg()};function I(x){return L=>{let E=L(x);for(let R in _)delete E[R];let T={...x,...E};return Object.assign(T,{extend:I(T)})}}return Object.assign(_,{extend:I(_)})}nt();ua();Ku();We();ju();var Ug=new tn(8192);function pE(i,{enabled:e=!0,id:t}){if(!e||!t)return i();if(Ug.get(t))return Ug.get(t);let r=i().finally(()=>Ug.delete(t));return Ug.set(t,r),r}function op(i,{delay:e=100,retryCount:t=2,shouldRetry:r=()=>!0}={}){return new Promise((s,a)=>{let l=async({count:u=0}={})=>{let m=async({error:p})=>{let h=typeof e=="function"?e({count:u,error:p}):e;h&&await ap(h),l({count:u+1})};try{let p=await i();s(p)}catch(p){if(u<t&&await r({count:u,error:p}))return m({error:p});a(p)}};l()})}Fi();function mE(i,e={}){return async(t,r={})=>{let{dedupe:s=!1,methods:a,retryDelay:l=150,retryCount:u=3,uid:m}={...e,...r},{method:p}=t;if(a?.exclude?.includes(p))throw new fs(new Error("method not supported"),{method:p});if(a?.include&&!a.include.includes(p))throw new fs(new Error("method not supported"),{method:p});let h=s?Dr(`${m}.${mt(t)}`):void 0;return pE(()=>op(async()=>{try{return await i(t)}catch(f){let g=f;switch(g.code){case _o.code:throw new _o(g);case xo.code:throw new xo(g);case vo.code:throw new vo(g,{method:t.method});case Io.code:throw new Io(g);case Bn.code:throw new Bn(g);case on.code:throw new on(g);case ko.code:throw new ko(g);case So.code:throw new So(g);case wo.code:throw new wo(g);case fs.code:throw new fs(g,{method:t.method});case pa.code:throw new pa(g);case Eo.code:throw new Eo(g);case ma.code:throw new ma(g);case Lo.code:throw new Lo(g);case To.code:throw new To(g);case Ao.code:throw new Ao(g);case Co.code:throw new Co(g);case Mo.code:throw new Mo(g);case 5e3:throw new ma(g);default:throw f instanceof W?f:new jf(g)}}},{delay:({count:f,error:g})=>{if(g&&g instanceof gr){let b=g?.headers?.get("Retry-After");if(b?.match(/\d/))return Number.parseInt(b)*1e3}return~~(1<<f)*l},retryCount:u,shouldRetry:({error:f})=>SM(f)}),{enabled:s,id:h})}}function SM(i){return"code"in i&&typeof i.code=="number"?i.code===-1||i.code===pa.code||i.code===Bn.code:i instanceof gr&&i.status?i.status===403||i.status===408||i.status===413||i.status===429||i.status===500||i.status===502||i.status===503||i.status===504:!0}function zg({key:i,methods:e,name:t,request:r,retryCount:s=3,retryDelay:a=150,timeout:l,type:u},m){let p=Fg();return{config:{key:i,methods:e,name:t,request:r,retryCount:s,retryDelay:a,timeout:l,type:u},request:mE(r,{methods:e,retryCount:s,retryDelay:a,uid:p}),value:m}}function nl(i,e={}){let{key:t="custom",methods:r,name:s="Custom Provider",retryDelay:a}=e;return({retryCount:l})=>zg({key:t,methods:r,name:s,request:i.request.bind(i),retryCount:e.retryCount??l,retryDelay:a,type:"custom"})}ua();nt();var Hg=class extends W{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};Jx();ua();function hE(i,{errorInstance:e=new Error("timed out"),timeout:t,signal:r}){return new Promise((s,a)=>{(async()=>{let l;try{let u=new AbortController;t>0&&(l=setTimeout(()=>{r?u.abort():a(e)},t)),s(await i({signal:u?.signal||null}))}catch(u){u?.name==="AbortError"&&a(e),a(u)}finally{clearTimeout(l)}})()})}Fi();function wM(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var iv=wM();function dE(i,e={}){return{async request(t){let{body:r,onRequest:s=e.onRequest,onResponse:a=e.onResponse,timeout:l=e.timeout??1e4}=t,u={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:m,method:p,signal:h}=u;try{let f=await hE(async({signal:b})=>{let _={...u,body:Array.isArray(r)?mt(r.map(E=>({jsonrpc:"2.0",id:E.id??iv.take(),...E}))):mt({jsonrpc:"2.0",id:r.id??iv.take(),...r}),headers:{"Content-Type":"application/json",...m},method:p||"POST",signal:h||(l>0?b:null)},I=new Request(i,_),x=await s?.(I,_)??{..._,url:i};return await fetch(x.url??i,x)},{errorInstance:new Wu({body:r,url:i}),timeout:l,signal:!0});a&&await a(f);let g;if(f.headers.get("Content-Type")?.startsWith("application/json"))g=await f.json();else{g=await f.text();try{g=JSON.parse(g||"{}")}catch(b){if(f.ok)throw b;g={error:g}}}if(!f.ok)throw new gr({body:r,details:mt(g.error)||f.statusText,headers:f.headers,status:f.status,url:i});return g}catch(f){throw f instanceof gr||f instanceof Wu?f:new gr({body:r,cause:f,url:i})}}}}function lp(i,e={}){let{batch:t,fetchOptions:r,key:s="http",methods:a,name:l="HTTP JSON-RPC",onFetchRequest:u,onFetchResponse:m,retryDelay:p,raw:h}=e;return({chain:f,retryCount:g,timeout:b})=>{let{batchSize:_=1e3,wait:I=0}=typeof t=="object"?t:{},x=e.retryCount??g,L=b??e.timeout??1e4,E=i||f?.rpcUrls.default.http[0];if(!E)throw new Hg;let T=dE(E,{fetchOptions:r,onRequest:u,onResponse:m,timeout:L});return zg({key:s,methods:a,name:l,async request({method:R,params:H}){let F={method:R,params:H},{schedule:z}=Ag({id:E,wait:I,shouldSplitBatch(re){return re.length>_},fn:re=>T.request({body:re}),sort:(re,Me)=>re.id-Me.id}),V=async re=>t?z(re):[await T.request({body:re})],[{error:$,result:Z}]=await V(F);if(h)return{error:$,result:Z};if($)throw new hs({body:F,error:$,url:E});return Z},retryCount:x,retryDelay:p,timeout:L,type:"http"},{fetchOptions:r,url:E})}}Ia();As();fr();Ea();oo();We();kf();nt();ms();function sl(i,e){if(!(i instanceof W))return!1;let t=i.walk(r=>r instanceof ca);return t instanceof ca?!!(t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ResolverWildcardNotSupported"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverError"||t.data?.errorName==="HttpError"||t.reason?.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&t.reason===If[50]):!1}dr();mi();We();Fr();Mr();function jg(i){if(i.length!==66||i.indexOf("[")!==0||i.indexOf("]")!==65)return null;let e=`0x${i.slice(1,65)}`;return Qt(e)?e:null}function al(i){let e=new Uint8Array(32).fill(0);if(!i)return pt(e);let t=i.split(".");for(let r=t.length-1;r>=0;r-=1){let s=jg(t[r]),a=s?hr(s):Rt(Nr(t[r]),"bytes");e=Rt(Oi([e,a]),"bytes")}return pt(e)}mi();function fE(i){return`[${i.slice(2)}]`}mi();We();Fr();function gE(i){let e=new Uint8Array(32).fill(0);return i?jg(i)||Rt(Nr(i)):pt(e)}function Bs(i){let e=i.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);let t=new Uint8Array(Nr(e).byteLength+2),r=0,s=e.split(".");for(let a=0;a<s.length;a++){let l=Nr(s[a]);l.byteLength>255&&(l=Nr(fE(gE(s[a])))),t[r]=l.length,t.set(l,r+1),r+=l.length+1}return t.byteLength!==r+1?t.slice(0,r+1):t}async function bE(i,e){let{blockNumber:t,blockTag:r,coinType:s,name:a,gatewayUrls:l,strict:u}=e,{chain:m}=i,p=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!m)throw new Error("client chain not configured. universalResolverAddress is required.");return Ir({blockNumber:t,chain:m,contract:"ensUniversalResolver"})})(),h=m?.ensTlds;if(h&&!h.some(f=>a.endsWith(f)))return null;try{let f=Ft({abi:$x,functionName:"addr",...s!=null?{args:[al(a),BigInt(s)]}:{args:[al(a)]}}),g={address:p,abi:vg,functionName:"resolve",args:[De(Bs(a)),f],blockNumber:t,blockTag:r},b=Le(i,bi,"readContract"),_=l?await b({...g,args:[...g.args,l]}):await b(g);if(_[0]==="0x")return null;let I=Ki({abi:$x,args:s!=null?[al(a),BigInt(s)]:void 0,functionName:"addr",data:_[0]});return I==="0x"||vi(I)==="0x00"?null:I}catch(f){if(u)throw f;if(sl(f,"resolve"))return null;throw f}}nt();var Gg=class extends W{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}},Ds=class extends W{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}},ol=class extends W{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},Vg=class extends W{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};var EM=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,LM=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,TM=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,AM=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function CM(i){try{let e=await fetch(i,{method:"HEAD"});return e.status===200?e.headers.get("content-type")?.startsWith("image/"):!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(t=>{let r=new Image;r.onload=()=>{t(!0)},r.onerror=()=>{t(!1)},r.src=i})}}function yE(i,e){return i?i.endsWith("/")?i.slice(0,-1):i:e}function rv({uri:i,gatewayUrls:e}){let t=TM.test(i);if(t)return{uri:i,isOnChain:!0,isEncoded:t};let r=yE(e?.ipfs,"https://ipfs.io"),s=yE(e?.arweave,"https://arweave.net"),a=i.match(EM),{protocol:l,subpath:u,target:m,subtarget:p=""}=a?.groups||{},h=l==="ipns:/"||u==="ipns/",f=l==="ipfs:/"||u==="ipfs/"||LM.test(i);if(i.startsWith("http")&&!h&&!f){let b=i;return e?.arweave&&(b=i.replace(/https:\/\/arweave.net/g,e?.arweave)),{uri:b,isOnChain:!1,isEncoded:!1}}if((h||f)&&m)return{uri:`${r}/${h?"ipns":"ipfs"}/${m}${p}`,isOnChain:!1,isEncoded:!1};if(l==="ar:/"&&m)return{uri:`${s}/${m}${p||""}`,isOnChain:!1,isEncoded:!1};let g=i.replace(AM,"");if(g.startsWith("<svg")&&(g=`data:image/svg+xml;base64,${btoa(g)}`),g.startsWith("data:")||g.startsWith("{"))return{uri:g,isOnChain:!0,isEncoded:!1};throw new ol({uri:i})}function nv(i){if(typeof i!="object"||!("image"in i)&&!("image_url"in i)&&!("image_data"in i))throw new Gg({data:i});return i.image||i.image_url||i.image_data}async function _E({gatewayUrls:i,uri:e}){try{let t=await fetch(e).then(s=>s.json());return await Wg({gatewayUrls:i,uri:nv(t)})}catch{throw new ol({uri:e})}}async function Wg({gatewayUrls:i,uri:e}){let{uri:t,isOnChain:r}=rv({uri:e,gatewayUrls:i});if(r||await CM(t))return t;throw new ol({uri:e})}function xE(i){let e=i;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));let[t,r,s]=e.split("/"),[a,l]=t.split(":"),[u,m]=r.split(":");if(!a||a.toLowerCase()!=="eip155")throw new Ds({reason:"Only EIP-155 supported"});if(!l)throw new Ds({reason:"Chain ID not found"});if(!m)throw new Ds({reason:"Contract address not found"});if(!s)throw new Ds({reason:"Token ID not found"});if(!u)throw new Ds({reason:"ERC namespace not found"});return{chainID:Number.parseInt(l),namespace:u.toLowerCase(),contractAddress:m,tokenID:s}}async function vE(i,{nft:e}){if(e.namespace==="erc721")return bi(i,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return bi(i,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Vg({namespace:e.namespace})}async function IE(i,{gatewayUrls:e,record:t}){return/eip155:/i.test(t)?MM(i,{gatewayUrls:e,record:t}):Wg({uri:t,gatewayUrls:e})}async function MM(i,{gatewayUrls:e,record:t}){let r=xE(t),s=await vE(i,{nft:r}),{uri:a,isOnChain:l,isEncoded:u}=rv({uri:s,gatewayUrls:e});if(l&&(a.includes("data:application/json;base64,")||a.startsWith("{"))){let p=u?atob(a.replace("data:application/json;base64,","")):a,h=JSON.parse(p);return Wg({uri:nv(h),gatewayUrls:e})}let m=r.tokenID;return r.namespace==="erc1155"&&(m=m.replace("0x","").padStart(64,"0")),_E({gatewayUrls:e,uri:a.replace(/(?:0x)?{id}/,m)})}Ia();As();fr();Ea();We();async function Kg(i,e){let{blockNumber:t,blockTag:r,key:s,name:a,gatewayUrls:l,strict:u}=e,{chain:m}=i,p=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!m)throw new Error("client chain not configured. universalResolverAddress is required.");return Ir({blockNumber:t,chain:m,contract:"ensUniversalResolver"})})(),h=m?.ensTlds;if(h&&!h.some(f=>a.endsWith(f)))return null;try{let f={address:p,abi:vg,functionName:"resolve",args:[De(Bs(a)),Ft({abi:Kx,functionName:"text",args:[al(a),s]})],blockNumber:t,blockTag:r},g=Le(i,bi,"readContract"),b=l?await g({...f,args:[...f.args,l]}):await g(f);if(b[0]==="0x")return null;let _=Ki({abi:Kx,functionName:"text",data:b[0]});return _===""?null:_}catch(f){if(u)throw f;if(sl(f,"resolve"))return null;throw f}}async function kE(i,{blockNumber:e,blockTag:t,assetGatewayUrls:r,name:s,gatewayUrls:a,strict:l,universalResolverAddress:u}){let m=await Le(i,Kg,"getEnsText")({blockNumber:e,blockTag:t,key:"avatar",name:s,universalResolverAddress:u,gatewayUrls:a,strict:l});if(!m)return null;try{return await IE(i,{record:m,gatewayUrls:r})}catch{return null}}Ia();Ea();We();async function SE(i,{address:e,blockNumber:t,blockTag:r,gatewayUrls:s,strict:a,universalResolverAddress:l}){let u=l;if(!u){if(!i.chain)throw new Error("client chain not configured. universalResolverAddress is required.");u=Ir({blockNumber:t,chain:i.chain,contract:"ensUniversalResolver"})}let m=`${e.toLowerCase().substring(2)}.addr.reverse`;try{let p={address:u,abi:Kw,functionName:"reverse",args:[De(Bs(m))],blockNumber:t,blockTag:r},h=Le(i,bi,"readContract"),[f,g]=s?await h({...p,args:[...p.args,s]}):await h(p);return e.toLowerCase()!==g.toLowerCase()?null:f}catch(p){if(a)throw p;if(sl(p,"reverse"))return null;throw p}}Ea();We();async function wE(i,e){let{blockNumber:t,blockTag:r,name:s}=e,{chain:a}=i,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return Ir({blockNumber:t,chain:a,contract:"ensUniversalResolver"})})(),u=a?.ensTlds;if(u&&!u.some(p=>s.endsWith(p)))throw new Error(`${s} is not a valid ENS TLD (${u?.join(", ")}) for chain "${a.name}" (id: ${a.id}).`);let[m]=await Le(i,bi,"readContract")({address:l,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[De(Bs(s))],blockNumber:t,blockTag:r});return m}tl();ni();We();Qx();tp();xa();Es();async function $g(i,e){let{account:t=i.account,blockNumber:r,blockTag:s="latest",blobs:a,data:l,gas:u,gasPrice:m,maxFeePerBlobGas:p,maxFeePerGas:h,maxPriorityFeePerGas:f,to:g,value:b,..._}=e,I=t?ot(t):void 0;try{Wi(e);let L=(r?Ae(r):void 0)||s,E=i.chain?.formatters?.transactionRequest?.format,R=(E||xr)({...ws(_,{format:E}),from:I?.address,blobs:a,data:l,gas:u,gasPrice:m,maxFeePerBlobGas:p,maxFeePerGas:h,maxPriorityFeePerGas:f,to:g,value:b}),H=await i.request({method:"eth_createAccessList",params:[R,L]});return{accessList:H.accessList,gasUsed:BigInt(H.gasUsed)}}catch(x){throw Lg(x,{...e,account:I,chain:i.chain})}}async function EE(i){let e=us(i,{method:"eth_newBlockFilter"}),t=await i.request({method:"eth_newBlockFilter"});return{id:t,request:e(t),type:"block"}}We();async function Yg(i,{address:e,args:t,event:r,events:s,fromBlock:a,strict:l,toBlock:u}={}){let m=s??(r?[r]:void 0),p=us(i,{method:"eth_newFilter"}),h=[];m&&(h=[m.flatMap(b=>nn({abi:[b],eventName:b.name,args:t}))],r&&(h=h[0]));let f=await i.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof a=="bigint"?Ae(a):a,toBlock:typeof u=="bigint"?Ae(u):u,...h.length?{topics:h}:{}}]});return{abi:m,args:t,eventName:r?r.name:void 0,fromBlock:a,id:f,request:p(f),strict:!!l,toBlock:u,type:"event"}}async function qg(i){let e=us(i,{method:"eth_newPendingTransactionFilter"}),t=await i.request({method:"eth_newPendingTransactionFilter"});return{id:t,request:e(t),type:"transaction"}}async function LE(i){let e=await i.request({method:"eth_blobBaseFee"});return BigInt(e)}Ii();We();async function TE(i,{blockHash:e,blockNumber:t,blockTag:r="latest"}={}){let s=t!==void 0?Ae(t):void 0,a;return e?a=await i.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):a=await i.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),ei(a)}We();async function sv(i,{address:e,blockNumber:t,blockTag:r="latest"}){let s=t!==void 0?Ae(t):void 0,a=await i.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(a!=="0x")return a}We();function AE(i){return{baseFeePerGas:i.baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:i.gasUsedRatio,oldestBlock:BigInt(i.oldestBlock),reward:i.reward?.map(e=>e.map(t=>BigInt(t)))}}async function CE(i,{blockCount:e,blockNumber:t,blockTag:r="latest",rewardPercentiles:s}){let a=t?Ae(t):void 0,l=await i.request({method:"eth_feeHistory",params:[Ae(e),a||r,s]},{dedupe:!!a});return AE(l)}async function ME(i,{filter:e}){let t=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(a=>Li(a));return e.abi?Jo({abi:e.abi,logs:s,strict:t}):s}We();function zt(i){return{formatters:void 0,fees:void 0,serializers:void 0,...i}}ii();en();Fi();nt();var Qg=class extends W{constructor({domain:e}){super(`Invalid domain "${mt(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},Zg=class extends W{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},Xg=class extends W{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};Pr();Rr();We();ox();cs();dr();We();Fr();function RE(i){let{domain:e={},message:t,primaryType:r}=i,s={EIP712Domain:eb({domain:e}),...i.types};Jg({domain:e,message:t,primaryType:r,types:s});let a=["0x1901"];return e&&a.push(RM({domain:e,types:s})),r!=="EIP712Domain"&&a.push(BE({data:t,primaryType:r,types:s})),Rt(Oi(a))}function RM({domain:i,types:e}){return BE({data:i,primaryType:"EIP712Domain",types:e})}function BE({data:i,primaryType:e,types:t}){let r=DE({data:i,primaryType:e,types:t});return Rt(r)}function DE({data:i,primaryType:e,types:t}){let r=[{type:"bytes32"}],s=[BM({primaryType:e,types:t})];for(let a of t[e]){let[l,u]=OE({types:t,name:a.name,type:a.type,value:i[a.name]});r.push(l),s.push(u)}return Ji(r,s)}function BM({primaryType:i,types:e}){let t=De(DM({primaryType:i,types:e}));return Rt(t)}function DM({primaryType:i,types:e}){let t="",r=NE({primaryType:i,types:e});r.delete(i);let s=[i,...Array.from(r).sort()];for(let a of s)t+=`${a}(${e[a].map(({name:l,type:u})=>`${u} ${l}`).join(",")})`;return t}function NE({primaryType:i,types:e},t=new Set){let s=i.match(/^\w*/u)?.[0];if(t.has(s)||e[s]===void 0)return t;t.add(s);for(let a of e[s])NE({primaryType:a.type,types:e},t);return t}function OE({types:i,name:e,type:t,value:r}){if(i[t]!==void 0)return[{type:"bytes32"},Rt(DE({data:r,primaryType:t,types:i}))];if(t==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Rt(r)];if(t==="string")return[{type:"bytes32"},Rt(De(r))];if(t.lastIndexOf("]")===t.length-1){let s=t.slice(0,t.lastIndexOf("[")),a=r.map(l=>OE({name:e,type:s,types:i,value:l}));return[{type:"bytes32"},Rt(Ji(a.map(([l])=>l),a.map(([,l])=>l)))]}return[{type:t},r]}Fi();function FE(i){let{domain:e,message:t,primaryType:r,types:s}=i,a=(m,p)=>{let h={...p};for(let f of m){let{name:g,type:b}=f;b==="address"&&(h[g]=h[g].toLowerCase())}return h},l=(()=>s.EIP712Domain?e?a(s.EIP712Domain,e):{}:{})(),u=(()=>{if(r!=="EIP712Domain")return a(s[r],t)})();return mt({domain:l,message:u,primaryType:r,types:s})}function Jg(i){let{domain:e,message:t,primaryType:r,types:s}=i,a=(l,u)=>{for(let m of l){let{name:p,type:h}=m,f=u[p],g=h.match(yf);if(g&&(typeof f=="number"||typeof f=="bigint")){let[I,x,L]=g;Ae(f,{signed:x==="int",size:Number.parseInt(L)/8})}if(h==="address"&&typeof f=="string"&&!At(f))throw new Dt({address:f});let b=h.match(ES);if(b){let[I,x]=b;if(x&&bt(f)!==Number.parseInt(x))throw new Zd({expectedSize:Number.parseInt(x),givenSize:bt(f)})}let _=s[h];_&&(NM(h),a(_,f))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Qg({domain:e});a(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])a(s[r],t);else throw new Zg({primaryType:r,types:s})}function eb({domain:i}){return[typeof i?.name=="string"&&{name:"name",type:"string"},i?.version&&{name:"version",type:"string"},(typeof i?.chainId=="number"||typeof i?.chainId=="bigint")&&{name:"chainId",type:"uint256"},i?.verifyingContract&&{name:"verifyingContract",type:"address"},i?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function NM(i){if(i==="address"||i==="bool"||i==="string"||i.startsWith("bytes")||i.startsWith("uint")||i.startsWith("int"))throw new Xg({type:i})}fr();We();Ur();dr();oo();We();Hx();en();nt();sp();ks();Pr();Rr();sa();Ii();function PE(i){let{authorizationList:e}=i;if(e)for(let t of e){let{chainId:r}=t,s=t.address;if(!At(s))throw new Dt({address:s});if(r<0)throw new Sa({chainId:r})}tb(i)}function UE(i){let{blobVersionedHashes:e}=i;if(e){if(e.length===0)throw new qo;for(let t of e){let r=bt(t),s=ei(Rn(t,0,1));if(r!==32)throw new fg({hash:t,size:r});if(s!==1)throw new gg({hash:t,version:s})}}tb(i)}function tb(i){let{chainId:e,maxPriorityFeePerGas:t,maxFeePerGas:r,to:s}=i;if(e<=0)throw new Sa({chainId:e});if(s&&!At(s))throw new Dt({address:s});if(r&&r>Go)throw new yr({maxFeePerGas:r});if(t&&r&&t>r)throw new un({maxFeePerGas:r,maxPriorityFeePerGas:t})}function zE(i){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:s,to:a}=i;if(e<=0)throw new Sa({chainId:e});if(a&&!At(a))throw new Dt({address:a});if(t||s)throw new W("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Go)throw new yr({maxFeePerGas:r})}function HE(i){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:s,to:a}=i;if(a&&!At(a))throw new Dt({address:a});if(typeof e<"u"&&e<=0)throw new Sa({chainId:e});if(t||s)throw new W("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Go)throw new yr({maxFeePerGas:r})}en();Ur();Pr();function cp(i){if(!i||i.length===0)return[];let e=[];for(let t=0;t<i.length;t++){let{address:r,storageKeys:s}=i[t];for(let a=0;a<s.length;a++)if(s[a].length-2!==64)throw new Nf({storageKey:s[a]});if(!At(r,{strict:!1}))throw new Dt({address:r});e.push([r,s])}return e}function jE(i,e){let t=yg(i);return t==="eip1559"?PM(i,e):t==="eip2930"?UM(i,e):t==="eip4844"?FM(i,e):t==="eip7702"?OM(i,e):zM(i,e)}function OM(i,e){let{authorizationList:t,chainId:r,gas:s,nonce:a,to:l,value:u,maxFeePerGas:m,maxPriorityFeePerGas:p,accessList:h,data:f}=i;PE(i);let g=cp(h),b=GE(t);return ki(["0x04",jr([De(r),a?De(a):"0x",p?De(p):"0x",m?De(m):"0x",s?De(s):"0x",l??"0x",u?De(u):"0x",f??"0x",g,b,...ll(i,e)])])}function FM(i,e){let{chainId:t,gas:r,nonce:s,to:a,value:l,maxFeePerBlobGas:u,maxFeePerGas:m,maxPriorityFeePerGas:p,accessList:h,data:f}=i;UE(i);let g=i.blobVersionedHashes,b=i.sidecars;if(i.blobs&&(typeof g>"u"||typeof b>"u")){let T=typeof i.blobs[0]=="string"?i.blobs:i.blobs.map(F=>pt(F)),R=i.kzg,H=$o({blobs:T,kzg:R});if(typeof g>"u"&&(g=hg({commitments:H})),typeof b>"u"){let F=Yo({blobs:T,commitments:H,kzg:R});b=bg({blobs:T,commitments:H,proofs:F})}}let _=cp(h),I=[De(t),s?De(s):"0x",p?De(p):"0x",m?De(m):"0x",r?De(r):"0x",a??"0x",l?De(l):"0x",f??"0x",_,u?De(u):"0x",g??[],...ll(i,e)],x=[],L=[],E=[];if(b)for(let T=0;T<b.length;T++){let{blob:R,commitment:H,proof:F}=b[T];x.push(R),L.push(H),E.push(F)}return ki(["0x03",b?jr([I,x,L,E]):jr(I)])}function PM(i,e){let{chainId:t,gas:r,nonce:s,to:a,value:l,maxFeePerGas:u,maxPriorityFeePerGas:m,accessList:p,data:h}=i;tb(i);let f=cp(p),g=[De(t),s?De(s):"0x",m?De(m):"0x",u?De(u):"0x",r?De(r):"0x",a??"0x",l?De(l):"0x",h??"0x",f,...ll(i,e)];return ki(["0x02",jr(g)])}function UM(i,e){let{chainId:t,gas:r,data:s,nonce:a,to:l,value:u,accessList:m,gasPrice:p}=i;zE(i);let h=cp(m),f=[De(t),a?De(a):"0x",p?De(p):"0x",r?De(r):"0x",l??"0x",u?De(u):"0x",s??"0x",h,...ll(i,e)];return ki(["0x01",jr(f)])}function zM(i,e){let{chainId:t=0,gas:r,data:s,nonce:a,to:l,value:u,gasPrice:m}=i;HE(i);let p=[a?De(a):"0x",m?De(m):"0x",r?De(r):"0x",l??"0x",u?De(u):"0x",s??"0x"];if(e){let h=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(t>0)return BigInt(t*2)+BigInt(35n+e.v-27n);let b=27n+(e.v===27n?0n:1n);if(e.v!==b)throw new Bf({v:e.v});return b})(),f=vi(e.r),g=vi(e.s);p=[...p,De(h),f==="0x00"?"0x":f,g==="0x00"?"0x":g]}else t>0&&(p=[...p,De(t),"0x","0x"]);return jr(p)}function ll(i,e){let t=e??i,{v:r,yParity:s}=t;if(typeof t.r>"u")return[];if(typeof t.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];let a=vi(t.r),l=vi(t.s);return[(()=>typeof s=="number"?s?De(1):"0x":r===0n?"0x":r===1n?De(1):r===27n?"0x":De(1))(),a==="0x00"?"0x":a,l==="0x00"?"0x":l]}function GE(i){if(!i||i.length===0)return[];let e=[];for(let t of i){let{chainId:r,nonce:s,...a}=t,l=t.address;e.push([r?De(r):"0x",l,s?De(s):"0x",...ll({},a)])}return e}Ii();lg();var HM={"0x0":"reverted","0x1":"success"};function av(i){let e={...i,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,contractAddress:i.contractAddress?i.contractAddress:null,cumulativeGasUsed:i.cumulativeGasUsed?BigInt(i.cumulativeGasUsed):null,effectiveGasPrice:i.effectiveGasPrice?BigInt(i.effectiveGasPrice):null,gasUsed:i.gasUsed?BigInt(i.gasUsed):null,logs:i.logs?i.logs.map(t=>Li(t)):null,to:i.to?i.to:null,transactionIndex:i.transactionIndex?ei(i.transactionIndex):null,status:i.status?HM[i.status]:null,type:i.type?jx[i.type]||i.type:null};return i.blobGasPrice&&(e.blobGasPrice=BigInt(i.blobGasPrice)),i.blobGasUsed&&(e.blobGasUsed=BigInt(i.blobGasUsed)),e}var VE=Ho("transactionReceipt",av);Ii();Fr();var WE=`Ethereum Signed Message:
`;dr();Rr();We();function KE(i){let e=(()=>typeof i=="string"?Dr(i):typeof i.raw=="string"?i.raw:pt(i.raw))(),t=Dr(`${WE}${bt(e)}`);return Oi([t,e])}function ib(i,e){return Rt(KE(i),e)}var rb="0x6492649264926492649264926492649264926492649264926492649264926492";sa();function $E(i){return ax(i,-32)===rb}cs();dr();mi();function YE(i){let{address:e,data:t,signature:r,to:s="hex"}=i,a=ki([Ji([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,t,r]),rb]);return s==="hex"?a:ri(a)}nt();var nb=class extends W{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function ov(i,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(i))throw new nb({value:i});let[t,r="0"]=i.split("."),s=t.startsWith("-");if(s&&(t=t.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(t=`${BigInt(t)+1n}`),r="";else if(r.length>e){let[a,l,u]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],m=Math.round(+`${l}.${u}`);m>9?r=`${BigInt(a)+BigInt(1)}0`.padStart(a.length+1,"0"):r=`${a}${m}`,r.length>e&&(r=r.slice(1),t=`${BigInt(t)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${t}${r}`)}function jM(i){return i.map(e=>({...e,value:BigInt(e.value)}))}function qE(i){return{...i,balance:i.balance?BigInt(i.balance):void 0,nonce:i.nonce?ei(i.nonce):void 0,storageProof:i.storageProof?jM(i.storageProof):void 0}}async function QE(i,{address:e,blockNumber:t,blockTag:r,storageKeys:s}){let a=r??"latest",l=t!==void 0?Ae(t):void 0,u=await i.request({method:"eth_getProof",params:[e,s,l||a]});return qE(u)}We();async function ZE(i,{address:e,blockNumber:t,blockTag:r="latest",slot:s}){let a=t!==void 0?Ae(t):void 0;return await i.request({method:"eth_getStorageAt",params:[e,s,a||r]})}Ur();We();async function cl(i,{blockHash:e,blockNumber:t,blockTag:r,hash:s,index:a}){let l=r||"latest",u=t!==void 0?Ae(t):void 0,m=null;if(s?m=await i.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?m=await i.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ae(a)]},{dedupe:!0}):(u||l)&&(m=await i.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||l,Ae(a)]},{dedupe:!!u})),!m)throw new go({blockHash:e,blockNumber:t,blockTag:l,hash:s,index:a});return(i.chain?.formatters?.transaction?.format||va)(m)}async function XE(i,{hash:e,transactionReceipt:t}){let[r,s]=await Promise.all([Le(i,dn,"getBlockNumber")({}),e?Le(i,cl,"getTransaction")({hash:e}):void 0]),a=t?.blockNumber||s?.blockNumber;return a?r-a+1n:0n}Ur();async function up(i,{hash:e}){let t=await i.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!t)throw new bo({hash:e});return(i.chain?.formatters?.transactionReceipt?.format||av)(t)}Ia();ii();nt();ms();As();fr();Ea();async function JE(i,e){let{allowFailure:t=!0,batchSize:r,blockNumber:s,blockTag:a,multicallAddress:l,stateOverride:u}=e,m=e.contracts,p=r??(typeof i.batch?.multicall=="object"&&i.batch.multicall.batchSize||1024),h=l;if(!h){if(!i.chain)throw new Error("client chain not configured. multicallAddress is required.");h=Ir({blockNumber:s,chain:i.chain,contract:"multicall3"})}let f=[[]],g=0,b=0;for(let x=0;x<m.length;x++){let{abi:L,address:E,args:T,functionName:R}=m[x];try{let H=Ft({abi:L,args:T,functionName:R});b+=(H.length-2)/2,p>0&&b>p&&f[g].length>0&&(g++,b=(H.length-2)/2,f[g]=[]),f[g]=[...f[g],{allowFailure:!0,callData:H,target:E}]}catch(H){let F=er(H,{abi:L,address:E,args:T,docsPath:"/docs/contract/multicall",functionName:R});if(!t)throw F;f[g]=[...f[g],{allowFailure:!0,callData:"0x",target:E}]}}let _=await Promise.allSettled(f.map(x=>Le(i,bi,"readContract")({abi:rp,address:h,args:[x],blockNumber:s,blockTag:a,functionName:"aggregate3",stateOverride:u}))),I=[];for(let x=0;x<_.length;x++){let L=_[x];if(L.status==="rejected"){if(!t)throw L.reason;for(let T=0;T<f[x].length;T++)I.push({status:"failure",error:L.reason,result:void 0});continue}let E=L.value;for(let T=0;T<E.length;T++){let{returnData:R,success:H}=E[T],{callData:F}=f[x][T],{abi:z,address:V,functionName:$,args:Z}=m[I.length];try{if(F==="0x")throw new mr;if(!H)throw new an({data:R});let re=Ki({abi:z,args:Z,data:R,functionName:$});I.push(t?{result:re,status:"success"}:re)}catch(re){let Me=er(re,{abi:z,address:V,args:Z,docsPath:"/docs/contract/multicall",functionName:$});if(!t)throw Me;I.push({error:Me,result:void 0,status:"failure"})}}}if(I.length!==m.length)throw new W("multicall results mismatch");return I}var eL="0.1.1";function tL(){return eL}var wt=class i extends Error{constructor(e,t={}){let r=(()=>{if(t.cause instanceof i){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),s=(()=>t.cause instanceof i&&t.cause.docsPath||t.docsPath)(),l=`https://oxlib.sh${s??""}`,u=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${l}`:void 0]:[]].filter(m=>typeof m=="string").join(`
`);super(u,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${tL()}`}),this.cause=t.cause,this.details=r,this.docs=l,this.docsPath=s,this.shortMessage=e}walk(e){return iL(this,e)}};function iL(i,e){return e?.(i)?i:i&&typeof i=="object"&&"cause"in i&&i.cause?iL(i.cause,e):e?null:i}var GM="#__bigint";function rL(i,e,t){return JSON.stringify(i,(r,s)=>typeof e=="function"?e(r,s):typeof s=="bigint"?s.toString()+GM:s,t)}function nL(i,e){if(lv(i)>e)throw new sb({givenSize:lv(i),maxSize:e})}var Pn={zero:48,nine:57,A:65,F:70,a:97,f:102};function cv(i){if(i>=Pn.zero&&i<=Pn.nine)return i-Pn.zero;if(i>=Pn.A&&i<=Pn.F)return i-(Pn.A-10);if(i>=Pn.a&&i<=Pn.f)return i-(Pn.a-10)}function sL(i,e={}){let{dir:t,size:r=32}=e;if(r===0)return i;if(i.length>r)throw new ab({size:i.length,targetSize:r,type:"Bytes"});let s=new Uint8Array(r);for(let a=0;a<r;a++){let l=t==="right";s[l?a:r-a-1]=i[l?a:i.length-a-1]}return s}function pp(i,e){if(hi(i)>e)throw new ob({givenSize:hi(i),maxSize:e})}function aL(i,e){if(typeof e=="number"&&e>0&&e>hi(i)-1)throw new mp({offset:e,position:"start",size:hi(i)})}function oL(i,e,t){if(typeof e=="number"&&typeof t=="number"&&hi(i)!==t-e)throw new mp({offset:t,position:"end",size:hi(i)})}function pv(i,e={}){let{dir:t,size:r=32}=e;if(r===0)return i;let s=i.replace("0x","");if(s.length>r*2)throw new lb({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[t==="right"?"padEnd":"padStart"](r*2,"0")}`}var KM=new TextEncoder;function cL(i){return i instanceof Uint8Array?i:typeof i=="string"?YM(i):$M(i)}function $M(i){return i instanceof Uint8Array?i:new Uint8Array(i)}function YM(i,e={}){let{size:t}=e,r=i;t&&(pp(i,t),r=gn(i,t));let s=r.slice(2);s.length%2&&(s=`0${s}`);let a=s.length/2,l=new Uint8Array(a);for(let u=0,m=0;u<a;u++){let p=cv(s.charCodeAt(m++)),h=cv(s.charCodeAt(m++));if(p===void 0||h===void 0)throw new wt(`Invalid byte sequence ("${s[m-2]}${s[m-1]}" in "${s}").`);l[u]=p*16+h}return l}function uL(i,e={}){let{size:t}=e,r=KM.encode(i);return typeof t=="number"?(nL(r,t),qM(r,t)):r}function qM(i,e){return sL(i,{dir:"right",size:e})}function lv(i){return i.length}var sb=class extends wt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}};var ab=class extends wt{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};var QM=new TextEncoder,ZM=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));function XM(i,e={}){let{strict:t=!1}=e;if(!i)throw new cb(i);if(typeof i!="string")throw new cb(i);if(t&&!/^0x[0-9a-fA-F]*$/.test(i))throw new ub(i);if(!i.startsWith("0x"))throw new ub(i)}function Yi(...i){return`0x${i.reduce((e,t)=>e+t.replace("0x",""),"")}`}function pb(i,e={}){let t=`0x${Number(i)}`;return typeof e.size=="number"?(pp(t,e.size),Un(t,e.size)):t}function ul(i,e={}){let t="";for(let s=0;s<i.length;s++)t+=ZM[i[s]];let r=`0x${t}`;return typeof e.size=="number"?(pp(r,e.size),gn(r,e.size)):r}function ti(i,e={}){let{signed:t,size:r}=e,s=BigInt(i),a;r?t?a=(1n<<BigInt(r)*8n-1n)-1n:a=2n**(BigInt(r)*8n)-1n:typeof i=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));let l=typeof a=="bigint"&&t?-a-1n:0;if(a&&s>a||s<l){let p=typeof i=="bigint"?"n":"";throw new hp({max:a?`${a}${p}`:void 0,min:`${l}${p}`,signed:t,size:r,value:`${i}${p}`})}let m=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Un(m,r):m}function pl(i,e={}){return ul(QM.encode(i),e)}function Un(i,e){return pv(i,{dir:"left",size:e})}function gn(i,e){return pv(i,{dir:"right",size:e})}function ml(i,e,t,r={}){let{strict:s}=r;aL(i,e);let a=`0x${i.replace("0x","").slice((e??0)*2,(t??i.length)*2)}`;return s&&oL(a,e,t),a}function hi(i){return Math.ceil((i.length-2)/2)}function mv(i,e={}){let{strict:t=!1}=e;try{return XM(i,{strict:t}),!0}catch{return!1}}var hp=class extends wt{constructor({max:e,min:t,signed:r,size:s,value:a}){super(`Number \`${a}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};var cb=class extends wt{constructor(e){super(`Value \`${typeof e=="object"?rL(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},ub=class extends wt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}};var ob=class extends wt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},mp=class extends wt{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},lb=class extends wt{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function pL(i){return{address:i.address,amount:ti(i.amount),index:ti(i.index),validatorIndex:ti(i.validatorIndex)}}function mL(i){return{...typeof i.baseFeePerGas=="bigint"&&{baseFeePerGas:ti(i.baseFeePerGas)},...typeof i.blobBaseFee=="bigint"&&{blobBaseFee:ti(i.blobBaseFee)},...typeof i.feeRecipient=="string"&&{feeRecipient:i.feeRecipient},...typeof i.gasLimit=="bigint"&&{gasLimit:ti(i.gasLimit)},...typeof i.number=="bigint"&&{number:ti(i.number)},...typeof i.prevRandao=="bigint"&&{prevRandao:ti(i.prevRandao)},...typeof i.time=="bigint"&&{time:ti(i.time)},...i.withdrawals&&{withdrawals:i.withdrawals.map(pL)}}}ni();ii();ms();ks();As();fr();We();ep();xa();cg();Es();async function dp(i,e){let{blockNumber:t,blockTag:r="latest",blocks:s,returnFullTransactions:a,traceTransfers:l,validation:u}=e;try{let m=[];for(let g of s){let b=g.blockOverrides?mL(g.blockOverrides):void 0,_=g.calls.map(x=>{let L=x,E=L.account?ot(L.account):void 0,T={...L,data:L.abi?Ft(L):L.data,from:L.from??E?.address};return Wi(T),xr(T)}),I=g.stateOverrides?jo(g.stateOverrides):void 0;m.push({blockOverrides:b,calls:_,stateOverrides:I})}let h=(t?Ae(t):void 0)||r;return(await i.request({method:"eth_simulateV1",params:[{blockStateCalls:m,returnFullTransactions:a,traceTransfers:l,validation:u},h]})).map((g,b)=>({...ip(g),calls:g.calls.map((_,I)=>{let{abi:x,args:L,functionName:E,to:T}=s[b].calls[I],R=_.error?.data??_.returnData,H=BigInt(_.gasUsed),F=_.logs?.map(Z=>Li(Z)),z=_.status==="0x1"?"success":"failure",V=x&&z==="success"&&R!=="0x"?Ki({abi:x,data:R,functionName:E}):null,$=(()=>{if(z==="success")return;let Z;if(_.error?.data==="0x"?Z=new mr:_.error&&(Z=new an(_.error)),!!Z)return er(Z,{abi:x??[],address:T,args:L,functionName:E??"<unknown>"})})();return{data:R,gasUsed:H,logs:F,status:z,...z==="success"?{result:V}:{error:$}}})}))}catch(m){let p=m,h=Ss(p,{});throw h instanceof _r?p:h}}jd();tx();function mb(i,e={}){let{as:t=typeof i=="string"?"Hex":"Bytes"}=e,r=ff(cL(i));return t==="Bytes"?r:ul(r)}var hb=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let r=this.keys().next().value;r&&this.delete(r)}return this}};var tR={checksum:new hb(8192)},db=tR.checksum;var rR=/^0x[a-fA-F0-9]{40}$/;function hl(i,e={}){let{strict:t=!0}=e;if(!rR.test(i))throw new fb({address:i,cause:new hv});if(t){if(i.toLowerCase()===i)return;if(dL(i)!==i)throw new fb({address:i,cause:new dv})}}function dL(i){if(db.has(i))return db.get(i);hl(i,{strict:!1});let e=i.substring(2).toLowerCase(),t=mb(uL(e),{as:"Bytes"}),r=e.split("");for(let a=0;a<40;a+=2)t[a>>1]>>4>=8&&r[a]&&(r[a]=r[a].toUpperCase()),(t[a>>1]&15)>=8&&r[a+1]&&(r[a+1]=r[a+1].toUpperCase());let s=`0x${r.join("")}`;return db.set(i,s),s}function gb(i,e={}){let{strict:t=!0}=e??{};try{return hl(i,{strict:t}),!0}catch{return!1}}var fb=class extends wt{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},hv=class extends wt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},dv=class extends wt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};function yb(i){let e=!0,t="",r=0,s="",a=!1;for(let l=0;l<i.length;l++){let u=i[l];if(["(",")",","].includes(u)&&(e=!0),u==="("&&r++,u===")"&&r--,!!e){if(r===0){if(u===" "&&["event","function","error",""].includes(s))s="";else if(s+=u,u===")"){a=!0;break}continue}if(u===" "){i[l-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}s+=u,t+=u}}if(!a)throw new wt("Unable to normalize signature.");return s}function bb(i,e){let t=typeof i,r=e.type;switch(r){case"address":return gb(i,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,a)=>bb(Object.values(i)[a],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?t==="string"||i instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(i)&&i.every(s=>bb(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function gv(i,e,t){for(let r in i){let s=i[r],a=e[r];if(s.type==="tuple"&&a.type==="tuple"&&"components"in s&&"components"in a)return gv(s.components,a.components,t[r]);let l=[s.type,a.type];if((()=>l.includes("address")&&l.includes("bytes20")?!0:l.includes("address")&&l.includes("string")?gb(t[r],{strict:!1}):l.includes("address")&&l.includes("bytes")?gb(t[r],{strict:!1}):!1)())return l}}function _b(i,e={}){let{prepare:t=!0}=e,r=(()=>Array.isArray(i)?Hd(i):typeof i=="string"?Hd(i):i)();return{...r,...t?{hash:dl(r)}:{}}}function fL(i,e,t){let{args:r=[],prepare:s=!0}=t??{},a=mv(e,{strict:!1}),l=i.filter(p=>a?p.type==="function"||p.type==="error"?yv(p)===ml(e,0,4):p.type==="event"?dl(p)===e:!1:"name"in p&&p.name===e);if(l.length===0)throw new Ta({name:e});if(l.length===1)return{...l[0],...s?{hash:dl(l[0])}:{}};let u;for(let p of l){if(!("inputs"in p))continue;if(!r||r.length===0){if(!p.inputs||p.inputs.length===0)return{...p,...s?{hash:dl(p)}:{}};continue}if(!p.inputs||p.inputs.length===0||p.inputs.length!==r.length)continue;if(r.every((f,g)=>{let b="inputs"in p&&p.inputs[g];return b?bb(f,b):!1})){if(u&&"inputs"in u&&u.inputs){let f=gv(p.inputs,u.inputs,r);if(f)throw new bv({abiItem:p,type:f[0]},{abiItem:u,type:f[1]})}u=p}}let m=(()=>{if(u)return u;let[p,...h]=l;return{...p,overloads:h}})();if(!m)throw new Ta({name:e});return{...m,...s?{hash:dl(m)}:{}}}function yv(i){return ml(dl(i),0,4)}function sR(i){let e=(()=>typeof i=="string"?i:ea(i))();return yb(e)}function dl(i){return typeof i!="string"&&"hash"in i&&i.hash?i.hash:mb(pl(sR(i)))}var bv=class extends wt{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${yb(ea(e.abiItem))}\`, and`,`\`${t.type}\` in \`${yb(ea(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},Ta=class extends wt{constructor({name:e,data:t,type:r="item"}){let s=(()=>e?` with name "${e}"`:t?` with data "${t}"`:"")();super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};var bL=/^(.*)\[([0-9]*)\]$/,yL=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,xb=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,DQ=2n**(8n-1n)-1n,NQ=2n**(16n-1n)-1n,OQ=2n**(24n-1n)-1n,FQ=2n**(32n-1n)-1n,PQ=2n**(40n-1n)-1n,UQ=2n**(48n-1n)-1n,zQ=2n**(56n-1n)-1n,HQ=2n**(64n-1n)-1n,jQ=2n**(72n-1n)-1n,GQ=2n**(80n-1n)-1n,VQ=2n**(88n-1n)-1n,WQ=2n**(96n-1n)-1n,KQ=2n**(104n-1n)-1n,$Q=2n**(112n-1n)-1n,YQ=2n**(120n-1n)-1n,qQ=2n**(128n-1n)-1n,QQ=2n**(136n-1n)-1n,ZQ=2n**(144n-1n)-1n,XQ=2n**(152n-1n)-1n,JQ=2n**(160n-1n)-1n,eZ=2n**(168n-1n)-1n,tZ=2n**(176n-1n)-1n,iZ=2n**(184n-1n)-1n,rZ=2n**(192n-1n)-1n,nZ=2n**(200n-1n)-1n,sZ=2n**(208n-1n)-1n,aZ=2n**(216n-1n)-1n,oZ=2n**(224n-1n)-1n,lZ=2n**(232n-1n)-1n,cZ=2n**(240n-1n)-1n,uZ=2n**(248n-1n)-1n,pZ=2n**(256n-1n)-1n,mZ=-(2n**(8n-1n)),hZ=-(2n**(16n-1n)),dZ=-(2n**(24n-1n)),fZ=-(2n**(32n-1n)),gZ=-(2n**(40n-1n)),bZ=-(2n**(48n-1n)),yZ=-(2n**(56n-1n)),_Z=-(2n**(64n-1n)),xZ=-(2n**(72n-1n)),vZ=-(2n**(80n-1n)),IZ=-(2n**(88n-1n)),kZ=-(2n**(96n-1n)),SZ=-(2n**(104n-1n)),wZ=-(2n**(112n-1n)),EZ=-(2n**(120n-1n)),LZ=-(2n**(128n-1n)),TZ=-(2n**(136n-1n)),AZ=-(2n**(144n-1n)),CZ=-(2n**(152n-1n)),MZ=-(2n**(160n-1n)),RZ=-(2n**(168n-1n)),BZ=-(2n**(176n-1n)),DZ=-(2n**(184n-1n)),NZ=-(2n**(192n-1n)),OZ=-(2n**(200n-1n)),FZ=-(2n**(208n-1n)),PZ=-(2n**(216n-1n)),UZ=-(2n**(224n-1n)),zZ=-(2n**(232n-1n)),HZ=-(2n**(240n-1n)),jZ=-(2n**(248n-1n)),GZ=-(2n**(256n-1n)),VZ=2n**8n-1n,WZ=2n**16n-1n,KZ=2n**24n-1n,$Z=2n**32n-1n,YZ=2n**40n-1n,qZ=2n**48n-1n,QZ=2n**56n-1n,ZZ=2n**64n-1n,XZ=2n**72n-1n,JZ=2n**80n-1n,eX=2n**88n-1n,tX=2n**96n-1n,iX=2n**104n-1n,rX=2n**112n-1n,nX=2n**120n-1n,sX=2n**128n-1n,aX=2n**136n-1n,oX=2n**144n-1n,lX=2n**152n-1n,cX=2n**160n-1n,uX=2n**168n-1n,pX=2n**176n-1n,mX=2n**184n-1n,hX=2n**192n-1n,dX=2n**200n-1n,fX=2n**208n-1n,gX=2n**216n-1n,bX=2n**224n-1n,yX=2n**232n-1n,_X=2n**240n-1n,xX=2n**248n-1n,vX=2n**256n-1n;function _L({checksumAddress:i,parameters:e,values:t}){let r=[];for(let s=0;s<e.length;s++)r.push(_v({checksumAddress:i,parameter:e[s],value:t[s]}));return r}function _v({checksumAddress:i=!1,parameter:e,value:t}){let r=e,s=dR(r.type);if(s){let[a,l]=s;return lR(t,{checksumAddress:i,length:a,parameter:{...r,type:l}})}if(r.type==="tuple")return hR(t,{checksumAddress:i,parameter:r});if(r.type==="address")return oR(t,{checksum:i});if(r.type==="bool")return uR(t);if(r.type.startsWith("uint")||r.type.startsWith("int")){let a=r.type.startsWith("int"),[,,l="256"]=xb.exec(r.type)??[];return pR(t,{signed:a,size:Number(l)})}if(r.type.startsWith("bytes"))return cR(t,{type:r.type});if(r.type==="string")return mR(t);throw new gp(r.type)}function vb(i){let e=0;for(let a=0;a<i.length;a++){let{dynamic:l,encoded:u}=i[a];l?e+=32:e+=hi(u)}let t=[],r=[],s=0;for(let a=0;a<i.length;a++){let{dynamic:l,encoded:u}=i[a];l?(t.push(ti(e+s,{size:32})),r.push(u),s+=hi(u)):t.push(u)}return Yi(...t,...r)}function oR(i,e){let{checksum:t=!1}=e;return hl(i,{strict:t}),{dynamic:!1,encoded:Un(i.toLowerCase())}}function lR(i,e){let{checksumAddress:t,length:r,parameter:s}=e,a=r===null;if(!Array.isArray(i))throw new kb(i);if(!a&&i.length!==r)throw new Ib({expectedLength:r,givenLength:i.length,type:`${s.type}[${r}]`});let l=!1,u=[];for(let m=0;m<i.length;m++){let p=_v({checksumAddress:t,parameter:s,value:i[m]});p.dynamic&&(l=!0),u.push(p)}if(a||l){let m=vb(u);if(a){let p=ti(u.length,{size:32});return{dynamic:!0,encoded:u.length>0?Yi(p,m):p}}if(l)return{dynamic:!0,encoded:m}}return{dynamic:!1,encoded:Yi(...u.map(({encoded:m})=>m))}}function cR(i,{type:e}){let[,t]=e.split("bytes"),r=hi(i);if(!t){let s=i;return r%32!==0&&(s=gn(s,Math.ceil((i.length-2)/2/32)*32)),{dynamic:!0,encoded:Yi(Un(ti(r,{size:32})),s)}}if(r!==Number.parseInt(t))throw new fp({expectedSize:Number.parseInt(t),value:i});return{dynamic:!1,encoded:gn(i)}}function uR(i){if(typeof i!="boolean")throw new wt(`Invalid boolean value: "${i}" (type: ${typeof i}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Un(pb(i))}}function pR(i,{signed:e,size:t}){if(typeof t=="number"){let r=2n**(BigInt(t)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(i>r||i<s)throw new hp({max:r.toString(),min:s.toString(),signed:e,size:t/8,value:i.toString()})}return{dynamic:!1,encoded:ti(i,{size:32,signed:e})}}function mR(i){let e=pl(i),t=Math.ceil(hi(e)/32),r=[];for(let s=0;s<t;s++)r.push(gn(ml(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Yi(gn(ti(hi(e),{size:32})),...r)}}function hR(i,e){let{checksumAddress:t,parameter:r}=e,s=!1,a=[];for(let l=0;l<r.components.length;l++){let u=r.components[l],m=Array.isArray(i)?l:u.name,p=_v({checksumAddress:t,parameter:u,value:i[m]});a.push(p),p.dynamic&&(s=!0)}return{dynamic:s,encoded:s?vb(a):Yi(...a.map(({encoded:l})=>l))}}function dR(i){let e=i.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function wb(i,e,t){let{checksumAddress:r=!1}=t??{};if(i.length!==e.length)throw new Sb({expectedLength:i.length,givenLength:e.length});let s=_L({checksumAddress:r,parameters:i,values:e}),a=vb(s);return a.length===0?"0x":a}function vv(i,e){if(i.length!==e.length)throw new Sb({expectedLength:i.length,givenLength:e.length});let t=[];for(let r=0;r<i.length;r++){let s=i[r],a=e[r];t.push(vv.encode(s,a))}return Yi(...t)}(function(i){function e(t,r,s=!1){if(t==="address"){let m=r;return hl(m),Un(m.toLowerCase(),s?32:0)}if(t==="string")return pl(r);if(t==="bytes")return r;if(t==="bool")return Un(pb(r),s?32:1);let a=t.match(xb);if(a){let[m,p,h="256"]=a,f=Number.parseInt(h)/8;return ti(r,{size:s?32:f,signed:p==="int"})}let l=t.match(yL);if(l){let[m,p]=l;if(Number.parseInt(p)!==(r.length-2)/2)throw new fp({expectedSize:Number.parseInt(p),value:r});return gn(r,s?32:0)}let u=t.match(bL);if(u&&Array.isArray(r)){let[m,p]=u,h=[];for(let f=0;f<r.length;f++)h.push(e(p,r[f],!0));return h.length===0?"0x":Yi(...h)}throw new gp(t)}i.encode=e})(vv||(vv={}));var Ib=class extends wt{constructor({expectedLength:e,givenLength:t,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},fp=class extends wt{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${hi(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},Sb=class extends wt{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${t}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},kb=class extends wt{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},gp=class extends wt{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function xL(i,e){let{bytecode:t,args:r}=e;return Yi(t,i.inputs?.length&&r?.length?wb(i.inputs,r):"0x")}function vL(i){return _b(i)}function IL(i,...e){let{overloads:t}=i,r=t?yR([i,...t],i.name,{args:e[0]}):i,s=_R(r),a=e.length>0?wb(r.inputs,e[0]):void 0;return a?Yi(s,a):s}function Aa(i,e={}){return _b(i,e)}function yR(i,e,t){let r=fL(i,e,t);if(r.type!=="function")throw new Ta({name:e,type:"function"});return r}function _R(i){return yv(i)}ni();var kL="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Gr="0x0000000000000000000000000000000000000000";kg();nt();fr();var vR="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function SL(i,e){let{blockNumber:t,blockTag:r,calls:s,stateOverrides:a,traceAssetChanges:l,traceTransfers:u,validation:m}=e,p=e.account?ot(e.account):void 0;if(l&&!p)throw new W("`account` is required when `traceAssetChanges` is true");let h=p?xL(vL("constructor(bytes, bytes)"),{bytecode:Ig,args:[vR,IL(Aa("function getBalance(address)"),[p.address])]}):void 0,f=l?await Promise.all(e.calls.map(async fe=>{if(!fe.data&&!fe.abi)return;let{accessList:$e}=await $g(i,{account:p.address,...fe,data:fe.abi?Ft(fe):fe.data});return $e.map(({address:St,storageKeys:Yt})=>Yt.length>0?St:null)})).then(fe=>fe.flat().filter(Boolean)):[],g=a?.map(fe=>fe.address===p?.address?{...fe,nonce:0}:fe),b=await dp(i,{blockNumber:t,blockTag:r,blocks:[...l?[{calls:[{data:h}],stateOverrides:a},{calls:f.map((fe,$e)=>({abi:[Aa("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[p.address],to:fe,from:Gr,nonce:$e})),stateOverrides:[{address:Gr,nonce:0}]}]:[],{calls:[...s,{}].map((fe,$e)=>({...fe,from:p?.address,nonce:$e})),stateOverrides:g},...l?[{calls:[{data:h}]},{calls:f.map((fe,$e)=>({abi:[Aa("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[p.address],to:fe,from:Gr,nonce:$e})),stateOverrides:[{address:Gr,nonce:0}]},{calls:f.map((fe,$e)=>({to:fe,abi:[Aa("function decimals() returns (uint256)")],functionName:"decimals",from:Gr,nonce:$e})),stateOverrides:[{address:Gr,nonce:0}]},{calls:f.map((fe,$e)=>({to:fe,abi:[Aa("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Gr,nonce:$e})),stateOverrides:[{address:Gr,nonce:0}]},{calls:f.map((fe,$e)=>({to:fe,abi:[Aa("function symbol() returns (string)")],functionName:"symbol",from:Gr,nonce:$e})),stateOverrides:[{address:Gr,nonce:0}]}]:[]],traceTransfers:u,validation:m}),_=l?b[2]:b[0],[I,x,,L,E,T,R,H]=l?b:[],{calls:F,...z}=_,V=F.slice(0,-1)??[],$=I?.calls??[],Z=x?.calls??[],re=[...$,...Z].map(fe=>fe.status==="success"?Ot(fe.data):null),Me=L?.calls??[],rt=E?.calls??[],be=[...Me,...rt].map(fe=>fe.status==="success"?Ot(fe.data):null),me=(T?.calls??[]).map(fe=>fe.status==="success"?fe.result:null),ve=(H?.calls??[]).map(fe=>fe.status==="success"?fe.result:null),B=(R?.calls??[]).map(fe=>fe.status==="success"?fe.result:null),Pe=[];for(let[fe,$e]of be.entries()){let St=re[fe];if(typeof $e!="bigint"||typeof St!="bigint")continue;let Yt=me[fe-1],pi=ve[fe-1],vt=B[fe-1],Hi=(()=>fe===0?{address:kL,decimals:18,symbol:"ETH"}:{address:f[fe-1],decimals:vt||Yt?Number(Yt??1):void 0,symbol:pi??void 0})();Pe.some(Di=>Di.token.address===Hi.address)||Pe.push({token:Hi,value:{pre:St,post:$e,diff:$e-St}})}return{assetChanges:Pe,block:z,results:V}}Ia();kg();ms();Eg();na();Zo();Mr();We();ng();Ii();mi();function wL({r:i,s:e,to:t="hex",v:r,yParity:s}){let a=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),l=`0x${new On.Signature(Ot(i),Ot(e)).toCompactHex()}${a===0?"1b":"1c"}`;return t==="hex"?l:ri(l)}tl();async function fl(i,e){let{address:t,factory:r,factoryData:s,hash:a,signature:l,universalSignatureVerifierAddress:u=i.chain?.contracts?.universalSignatureVerifier?.address,...m}=e,p=(()=>Qt(l)?l:typeof l=="object"&&"r"in l&&"s"in l?wL(l):pt(l))(),h=await(async()=>!r&&!s||$E(p)?p:YE({address:r,data:s,signature:p}))();try{let f=u?{to:u,data:Ft({abi:Yx,functionName:"isValidSig",args:[t,a,h]}),...m}:{data:wa({abi:Yx,args:[t,a,h],bytecode:Qw}),...m},{data:g}=await Le(i,mn,"call")(f);return X1(g??"0x0")}catch(f){try{if(pn(bf(t),await sg({hash:a,signature:l})))return!0}catch{}if(f instanceof yo)return!1;throw f}}async function EL(i,{address:e,message:t,factory:r,factoryData:s,signature:a,...l}){let u=ib(t);return fl(i,{address:e,factory:r,factoryData:s,hash:u,signature:a,...l})}async function LL(i,e){let{address:t,factory:r,factoryData:s,signature:a,message:l,primaryType:u,types:m,domain:p,...h}=e,f=RE({message:l,primaryType:u,types:m,domain:p});return fl(i,{address:t,factory:r,factoryData:s,hash:f,signature:a,...h})}Ur();Zx();Fi();Ii();Fi();function Eb(i,{emitOnBegin:e=!1,emitMissed:t=!1,onBlockNumber:r,onError:s,poll:a,pollingInterval:l=i.pollingInterval}){let u=(()=>typeof a<"u"?a:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))(),m;return u?(()=>{let f=mt(["watchBlockNumber",i.uid,e,t,l]);return $i(f,{onBlockNumber:r,onError:s},g=>hn(async()=>{try{let b=await Le(i,dn,"getBlockNumber")({cacheTime:0});if(m){if(b===m)return;if(b-m>1&&t)for(let _=m+1n;_<b;_++)g.onBlockNumber(_,m),m=_}(!m||b>m)&&(g.onBlockNumber(b,m),m=b)}catch(b){g.onError?.(b)}},{emitOnBegin:e,interval:l}))})():(()=>{let f=mt(["watchBlockNumber",i.uid,e,t]);return $i(f,{onBlockNumber:r,onError:s},g=>{let b=!0,_=()=>b=!1;return(async()=>{try{let I=(()=>{if(i.transport.type==="fallback"){let L=i.transport.transports.find(E=>E.config.type==="webSocket");return L?L.value:i.transport}return i.transport})(),{unsubscribe:x}=await I.subscribe({params:["newHeads"],onData(L){if(!b)return;let E=Ot(L.result?.number);g.onBlockNumber(E,m),m=E},onError(L){g.onError?.(L)}});_=x,b||_()}catch(I){s?.(I)}})(),()=>_()})})()}async function TL(i,{confirmations:e=1,hash:t,onReplaced:r,pollingInterval:s=i.pollingInterval,retryCount:a=6,retryDelay:l=({count:m})=>~~(1<<m)*200,timeout:u=18e4}){let m=mt(["waitForTransactionReceipt",i.uid,t]),p,h,f,g=!1,{promise:b,resolve:_,reject:I}=Tg(),x=u?setTimeout(()=>I(new Ff({hash:t})),u):void 0,L=$i(m,{onReplaced:r,resolve:_,reject:I},E=>{let T=Le(i,Eb,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(R){let H=z=>{clearTimeout(x),T(),z(),L()},F=R;if(!g)try{if(f){if(e>1&&(!f.blockNumber||F-f.blockNumber+1n<e))return;H(()=>E.resolve(f));return}if(p||(g=!0,await op(async()=>{p=await Le(i,cl,"getTransaction")({hash:t}),p.blockNumber&&(F=p.blockNumber)},{delay:l,retryCount:a}),g=!1),f=await Le(i,up,"getTransactionReceipt")({hash:t}),e>1&&(!f.blockNumber||F-f.blockNumber+1n<e))return;H(()=>E.resolve(f))}catch(z){if(z instanceof go||z instanceof bo){if(!p){g=!1;return}try{h=p,g=!0;let V=await op(()=>Le(i,Ei,"getBlock")({blockNumber:F,includeTransactions:!0}),{delay:l,retryCount:a,shouldRetry:({error:re})=>re instanceof Vo});g=!1;let $=V.transactions.find(({from:re,nonce:Me})=>re===h.from&&Me===h.nonce);if(!$||(f=await Le(i,up,"getTransactionReceipt")({hash:$.hash}),e>1&&(!f.blockNumber||F-f.blockNumber+1n<e)))return;let Z="replaced";$.to===h.to&&$.value===h.value&&$.input===h.input?Z="repriced":$.from===$.to&&$.value===0n&&(Z="cancelled"),H(()=>{E.onReplaced?.({reason:Z,replacedTransaction:h,transaction:$,transactionReceipt:f}),E.resolve(f)})}catch(V){H(()=>E.reject(V))}}else H(()=>E.reject(z))}}})});return b}Fi();function AL(i,{blockTag:e="latest",emitMissed:t=!1,emitOnBegin:r=!1,onBlock:s,onError:a,includeTransactions:l,poll:u,pollingInterval:m=i.pollingInterval}){let p=(()=>typeof u<"u"?u:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))(),h=l??!1,f;return p?(()=>{let _=mt(["watchBlocks",i.uid,e,t,r,h,m]);return $i(_,{onBlock:s,onError:a},I=>hn(async()=>{try{let x=await Le(i,Ei,"getBlock")({blockTag:e,includeTransactions:h});if(x.number&&f?.number){if(x.number===f.number)return;if(x.number-f.number>1&&t)for(let L=f?.number+1n;L<x.number;L++){let E=await Le(i,Ei,"getBlock")({blockNumber:L,includeTransactions:h});I.onBlock(E,f),f=E}}(!f?.number||e==="pending"&&!x?.number||x.number&&x.number>f.number)&&(I.onBlock(x,f),f=x)}catch(x){I.onError?.(x)}},{emitOnBegin:r,interval:m}))})():(()=>{let _=!0,I=!0,x=()=>_=!1;return(async()=>{try{r&&Le(i,Ei,"getBlock")({blockTag:e,includeTransactions:h}).then(T=>{_&&I&&(s(T,void 0),I=!1)});let L=(()=>{if(i.transport.type==="fallback"){let T=i.transport.transports.find(R=>R.config.type==="webSocket");return T?T.value:i.transport}return i.transport})(),{unsubscribe:E}=await L.subscribe({params:["newHeads"],async onData(T){if(!_)return;let R=await Le(i,Ei,"getBlock")({blockNumber:T.blockNumber,includeTransactions:h}).catch(()=>{});_&&(s(R,f),I=!1,f=R)},onError(T){a?.(T)}});x=E,_||x()}catch(L){a?.(L)}})(),()=>x()})()}Fi();ii();Ku();function CL(i,{address:e,args:t,batch:r=!0,event:s,events:a,fromBlock:l,onError:u,onLogs:m,poll:p,pollingInterval:h=i.pollingInterval,strict:f}){let g=(()=>typeof p<"u"?p:typeof l=="bigint"?!0:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))(),b=f??!1;return g?(()=>{let x=mt(["watchEvent",e,t,r,i.uid,s,h,l]);return $i(x,{onLogs:m,onError:u},L=>{let E;l!==void 0&&(E=l-1n);let T,R=!1,H=hn(async()=>{if(!R){try{T=await Le(i,Yg,"createEventFilter")({address:e,args:t,event:s,events:a,strict:b,fromBlock:l})}catch{}R=!0;return}try{let F;if(T)F=await Le(i,Cs,"getFilterChanges")({filter:T});else{let z=await Le(i,dn,"getBlockNumber")({});E&&E!==z?F=await Le(i,el,"getLogs")({address:e,args:t,event:s,events:a,fromBlock:E+1n,toBlock:z}):F=[],E=z}if(F.length===0)return;if(r)L.onLogs(F);else for(let z of F)L.onLogs([z])}catch(F){T&&F instanceof on&&(R=!1),L.onError?.(F)}},{emitOnBegin:!0,interval:h});return async()=>{T&&await Le(i,Ms,"uninstallFilter")({filter:T}),H()}})})():(()=>{let x=!0,L=()=>x=!1;return(async()=>{try{let E=(()=>{if(i.transport.type==="fallback"){let F=i.transport.transports.find(z=>z.config.type==="webSocket");return F?F.value:i.transport}return i.transport})(),T=a??(s?[s]:void 0),R=[];T&&(R=[T.flatMap(z=>nn({abi:[z],eventName:z.name,args:t}))],s&&(R=R[0]));let{unsubscribe:H}=await E.subscribe({params:["logs",{address:e,topics:R}],onData(F){if(!x)return;let z=F.result;try{let{eventName:V,args:$}=Xo({abi:T??[],data:z.data,topics:z.topics,strict:b}),Z=Li(z,{args:$,eventName:V});m([Z])}catch(V){let $,Z;if(V instanceof Br||V instanceof Jr){if(f)return;$=V.abiItem.name,Z=V.abiItem.inputs?.some(Me=>!("name"in Me&&Me.name))}let re=Li(z,{args:Z?[]:{},eventName:$});m([re])}},onError(F){u?.(F)}});L=H,x||L()}catch(E){u?.(E)}})(),()=>L()})()}Fi();function ML(i,{batch:e=!0,onError:t,onTransactions:r,poll:s,pollingInterval:a=i.pollingInterval}){return(typeof s<"u"?s:i.transport.type!=="webSocket")?(()=>{let p=mt(["watchPendingTransactions",i.uid,e,a]);return $i(p,{onTransactions:r,onError:t},h=>{let f,g=hn(async()=>{try{if(!f)try{f=await Le(i,qg,"createPendingTransactionFilter")({});return}catch(_){throw g(),_}let b=await Le(i,Cs,"getFilterChanges")({filter:f});if(b.length===0)return;if(e)h.onTransactions(b);else for(let _ of b)h.onTransactions([_])}catch(b){h.onError?.(b)}},{emitOnBegin:!0,interval:a});return async()=>{f&&await Le(i,Ms,"uninstallFilter")({filter:f}),g()}})})():(()=>{let p=!0,h=()=>p=!1;return(async()=>{try{let{unsubscribe:f}=await i.transport.subscribe({params:["newPendingTransactions"],onData(g){if(!p)return;let b=g.result;r([b])},onError(g){t?.(g)}});h=f,p||h()}catch(f){t?.(f)}})(),()=>h()})()}function RL(i){let{scheme:e,statement:t,...r}=i.match(IR)?.groups??{},{chainId:s,expirationTime:a,issuedAt:l,notBefore:u,requestId:m,...p}=i.match(kR)?.groups??{},h=i.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...p,...s?{chainId:Number(s)}:{},...a?{expirationTime:new Date(a)}:{},...l?{issuedAt:new Date(l)}:{},...u?{notBefore:new Date(u)}:{},...m?{requestId:m}:{},...h?{resources:h}:{},...e?{scheme:e}:{},...t?{statement:t}:{}}}var IR=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,kR=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;Zo();function BL(i){let{address:e,domain:t,message:r,nonce:s,scheme:a,time:l=new Date}=i;if(t&&r.domain!==t||s&&r.nonce!==s||a&&r.scheme!==a||r.expirationTime&&l>=r.expirationTime||r.notBefore&&l<r.notBefore)return!1;try{if(!r.address||e&&!pn(r.address,e))return!1}catch{return!1}return!0}async function DL(i,e){let{address:t,domain:r,message:s,nonce:a,scheme:l,signature:u,time:m=new Date,...p}=e,h=RL(s);if(!h.address||!BL({address:t,domain:r,message:h,nonce:a,scheme:l,time:m}))return!1;let g=ib(s);return fl(i,{address:h.address,hash:g,signature:u,...p})}function NL(i){return{call:e=>mn(i,e),createAccessList:e=>$g(i,e),createBlockFilter:()=>EE(i),createContractEventFilter:e=>vf(i,e),createEventFilter:e=>Yg(i,e),createPendingTransactionFilter:()=>qg(i),estimateContractGas:e=>Gw(i,e),estimateGas:e=>Qo(i,e),getBalance:e=>_g(i,e),getBlobBaseFee:()=>LE(i),getBlock:e=>Ei(i,e),getBlockNumber:e=>dn(i,e),getBlockTransactionCount:e=>TE(i,e),getBytecode:e=>sv(i,e),getChainId:()=>vr(i),getCode:e=>sv(i,e),getContractEvents:e=>xg(i,e),getEip712Domain:e=>cE(i,e),getEnsAddress:e=>bE(i,e),getEnsAvatar:e=>kE(i,e),getEnsName:e=>SE(i,e),getEnsResolver:e=>wE(i,e),getEnsText:e=>Kg(i,e),getFeeHistory:e=>CE(i,e),estimateFeesPerGas:e=>Pw(i,e),getFilterChanges:e=>Cs(i,e),getFilterLogs:e=>ME(i,e),getGasPrice:()=>Wo(i),getLogs:e=>el(i,e),getProof:e=>QE(i,e),estimateMaxPriorityFeePerGas:e=>Fw(i,e),getStorageAt:e=>ZE(i,e),getTransaction:e=>cl(i,e),getTransactionConfirmations:e=>XE(i,e),getTransactionCount:e=>Ko(i,e),getTransactionReceipt:e=>up(i,e),multicall:e=>JE(i,e),prepareTransactionRequest:e=>Ts(i,e),readContract:e=>bi(i,e),sendRawTransaction:e=>il(i,e),simulate:e=>dp(i,e),simulateBlocks:e=>dp(i,e),simulateCalls:e=>SL(i,e),simulateContract:e=>iE(i,e),verifyMessage:e=>EL(i,e),verifySiweMessage:e=>DL(i,e),verifyTypedData:e=>LL(i,e),uninstallFilter:e=>Ms(i,e),waitForTransactionReceipt:e=>TL(i,e),watchBlocks:e=>AL(i,e),watchBlockNumber:e=>Eb(i,e),watchContractEvent:e=>aE(i,e),watchEvent:e=>CL(i,e),watchPendingTransactions:e=>ML(i,e)}}function bp(i){let{key:e="public",name:t="Public Client"}=i;return Pg({...i,key:e,name:t,type:"publicClient"}).extend(NL)}Eg();function OL(i,e){let{abi:t,args:r,bytecode:s,...a}=e,l=wa({abi:t,args:r,bytecode:s});return rl(i,{...a,...a.authorizationList?{to:null}:{},data:l})}na();async function FL(i){return i.account?.type==="local"?[i.account.address]:(await i.request({method:"eth_accounts"},{dedupe:!0})).map(t=>Mn(t))}async function PL(i){return await i.request({method:"wallet_getPermissions"},{dedupe:!0})}ni();Zo();async function Lb(i,e){let{account:t=i.account,chainId:r,nonce:s}=e;if(!t)throw new Ti({docsPath:"/docs/eip7702/prepareAuthorization"});let a=ot(t),l=(()=>{if(e.executor)return e.executor==="self"?e.executor:ot(e.executor)})(),u={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof u.chainId>"u"&&(u.chainId=i.chain?.id??await Le(i,vr,"getChainId")({})),typeof u.nonce>"u"&&(u.nonce=await Le(i,Ko,"getTransactionCount")({address:a.address,blockTag:"pending"}),(l==="self"||l?.address&&pn(l.address,a.address))&&(u.nonce+=1)),u}na();async function UL(i){return(await i.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(t=>bf(t))}async function zL(i,e){return i.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}ni();async function HL(i,e){let{account:t=i.account}=e;if(!t)throw new Ti({docsPath:"/docs/eip7702/signAuthorization"});let r=ot(t);if(!r.signAuthorization)throw new Rs({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});let s=await Lb(i,e);return r.signAuthorization(s)}ni();We();async function jL(i,{account:e=i.account,message:t}){if(!e)throw new Ti({docsPath:"/docs/actions/wallet/signMessage"});let r=ot(e);if(r.signMessage)return r.signMessage({message:t});let s=(()=>typeof t=="string"?Dr(t):t.raw instanceof Uint8Array?De(t.raw):t.raw)();return i.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}ni();We();xa();Es();async function GL(i,e){let{account:t=i.account,chain:r=i.chain,...s}=e;if(!t)throw new Ti({docsPath:"/docs/actions/wallet/signTransaction"});let a=ot(t);Wi({account:a,...e});let l=await Le(i,vr,"getChainId")({});r!==null&&Bg({currentChainId:l,chain:r});let m=(r?.formatters||i.chain?.formatters)?.transactionRequest?.format||xr;return a.signTransaction?a.signTransaction({...s,chainId:l},{serializer:i.chain?.serializers?.transaction}):await i.request({method:"eth_signTransaction",params:[{...m(s),chainId:Ae(l),from:a.address}]},{retryCount:0})}ni();async function VL(i,e){let{account:t=i.account,domain:r,message:s,primaryType:a}=e;if(!t)throw new Ti({docsPath:"/docs/actions/wallet/signTypedData"});let l=ot(t),u={EIP712Domain:eb({domain:r}),...e.types};if(Jg({domain:r,message:s,primaryType:a,types:u}),l.signTypedData)return l.signTypedData({domain:r,message:s,primaryType:a,types:u});let m=FE({domain:r,message:s,primaryType:a,types:u});return i.request({method:"eth_signTypedData_v4",params:[l.address,m]},{retryCount:0})}We();async function WL(i,{id:e}){await i.request({method:"wallet_switchEthereumChain",params:[{chainId:Ae(e)}]},{retryCount:0})}async function KL(i,e){return await i.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function $L(i){return{addChain:e=>uE(i,e),deployContract:e=>OL(i,e),getAddresses:()=>FL(i),getChainId:()=>vr(i),getPermissions:()=>PL(i),prepareAuthorization:e=>Lb(i,e),prepareTransactionRequest:e=>Ts(i,e),requestAddresses:()=>UL(i),requestPermissions:e=>zL(i,e),sendRawTransaction:e=>il(i,e),sendTransaction:e=>rl(i,e),signAuthorization:e=>HL(i,e),signMessage:e=>jL(i,e),signTransaction:e=>GL(i,e),signTypedData:e=>VL(i,e),switchChain:e=>WL(i,e),watchAsset:e=>KL(i,e),writeContract:e=>lE(i,e)}}function gl(i){let{key:e="wallet",name:t="Wallet Client",transport:r}=i;return Pg({...i,key:e,name:t,transport:r,type:"walletClient"}).extend($L)}We();Tf();ng();We();function yp(){return De(On.utils.randomPrivateKey())}var YL={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}};Ii();var qL={block:Ow({format(i){return{transactions:i.transactions?.map(t=>{if(typeof t=="string")return t;let r=va(t);return r.typeHex==="0x7e"&&(r.isSystemTx=t.isSystemTx,r.mint=t.mint?Ot(t.mint):void 0,r.sourceHash=t.sourceHash,r.type="deposit"),r}),stateRoot:i.stateRoot}}}),transaction:Nw({format(i){let e={};return i.type==="0x7e"&&(e.isSystemTx=i.isSystemTx,e.mint=i.mint?Ot(i.mint):void 0,e.sourceHash=i.sourceHash,e.type="deposit"),e}}),transactionReceipt:VE({format(i){return{l1GasPrice:i.l1GasPrice?Ot(i.l1GasPrice):null,l1GasUsed:i.l1GasUsed?Ot(i.l1GasUsed):null,l1Fee:i.l1Fee?Ot(i.l1Fee):null,l1FeeScalar:i.l1FeeScalar?Number(i.l1FeeScalar):null}}})};en();Pr();dr();We();function SR(i,e){return ER(i)?wR(i):jE(i,e)}var QL={transaction:SR};function wR(i){LR(i);let{sourceHash:e,data:t,from:r,gas:s,isSystemTx:a,mint:l,to:u,value:m}=i,p=[e,r,u??"0x",l?De(l):"0x",m?De(m):"0x",s?De(s):"0x",a?"0x1":"0x",t??"0x"];return ki(["0x7e",jr(p)])}function ER(i){return i.type==="deposit"||typeof i.sourceHash<"u"}function LR(i){let{from:e,to:t}=i;if(e&&!At(e))throw new Dt({address:e});if(t&&!At(t))throw new Dt({address:t})}var Ca={contracts:YL,formatters:qL,serializers:QL};var _p=zt({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}});var Tb=zt({id:97,name:"Binance Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0});var Ab=zt({id:8217,name:"Klaytn",nativeCurrency:{decimals:18,name:"Klaytn",symbol:"KLAY"},rpcUrls:{default:{http:["https://public-en-cypress.klaytn.net"]}},blockExplorers:{default:{name:"KlaytnScope",url:"https://scope.klaytn.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:96002415}}});var Cb=zt({id:1890,name:"LightLink Phoenix Mainnet",network:"lightlink-phoenix",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://replicator.phoenix.lightlink.io/rpc/v1"]}},blockExplorers:{default:{name:"LightLink Phoenix Explorer",url:"https://phoenix.lightlink.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:125499184}},testnet:!1});var bl=zt({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});var Mb=zt({id:5e3,name:"Mantle",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Explorer",url:"https://mantlescan.xyz/",apiUrl:"https://api.mantlescan.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:304717}}});var Rb=zt({id:5003,name:"Mantle Sepolia Testnet",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.sepolia.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Testnet Explorer",url:"https://explorer.sepolia.mantle.xyz/",apiUrl:"https://explorer.sepolia.mantle.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:4584012}},testnet:!0});var Bb=56,Db=zt({id:204,name:"opBNB",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{default:{http:["https://opbnb-mainnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opBNB (BSCScan)",url:"https://opbnb.bscscan.com",apiUrl:"https://api-opbnb.bscscan.com/api"}},contracts:{...Ca.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:512881},l2OutputOracle:{[Bb]:{address:"0x153CAB79f4767E2ff862C94aa49573294B13D169"}},portal:{[Bb]:{address:"0x1876EA7702C0ad0C6A2ae6036DE7733edfBca519"}},l1StandardBridge:{[Bb]:{address:"0xF05F0e4362859c3331Cb9395CBC201E3Fa6757Ea"}}},sourceId:Bb});var Nb=97,Ob=zt({id:5611,name:"opBNB Testnet",nativeCurrency:{decimals:18,name:"tBNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://opbnb-testnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opbnbscan",url:"https://testnet.opbnbscan.com"}},contracts:{...Ca.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:3705108},l2OutputOracle:{[Nb]:{address:"0xFf2394Bb843012562f4349C6632a0EcB92fC8810"}},portal:{[Nb]:{address:"0x4386C8ABf2009aC0c263462Da568DD9d46e52a31"}},l1StandardBridge:{[Nb]:{address:"0x677311Fd2cCc511Bbc0f581E8d9a07B033D5E840"}}},testnet:!0,sourceId:Nb});var xp=1,Fb=zt({...Ca,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...Ca.contracts,disputeGameFactory:{[xp]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[xp]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[xp]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[xp]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:xp});var Pb=zt({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});var c=gk(MT());var y;(e=>{let i;(r=>{let t;(cm=>{var um,pm,mm,hm,dm,fm,gm,bm,ym,_m,xm,vm,Im,km,Sm,wm,Em,Lm,Tm,Am,Cm,Mm,Rm,Bm,Dm,Nm,Om,Fm,Pm,Um,zm,Hm,jm,Gm,Vm,Wm,Km,$m,Ym,qm,Qm,Zm,Xm,Jm,eh,th,ih,rh,nh,sh,ah,oh,lh,ch,uh,ph,mh,hh,dh,fh,gh,bh,yh,_h,xh,vh,Ih,kh,Sh,wh,Eh,Lh,Th,Ah,Ch,Mh,Rh,Bh,Dh,Nh,Oh,Fh,Ph,Uh,zh,Hh,jh,Gh,Vh,Wh,Kh,$h,Yh,qh,Qh,Zh,Xh,Jh,ed,td;let s;(Bt=>(Bt[Bt.SYS_NORMAL=1]="SYS_NORMAL",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.USER_NOT_EXIST=3]="USER_NOT_EXIST",Bt[Bt.SYS_DATA_ERROR=4]="SYS_DATA_ERROR",Bt[Bt.WALLET_ADDRESS_ERROR=5]="WALLET_ADDRESS_ERROR",Bt[Bt.NOT_ENOUGH_ITEM=6]="NOT_ENOUGH_ITEM",Bt[Bt.NOT_ENOUGH_TOKEN=7]="NOT_ENOUGH_TOKEN",Bt[Bt.MAX_INVITE=8]="MAX_INVITE",Bt[Bt.CREATE_ROOM_MAX=9]="CREATE_ROOM_MAX",Bt[Bt.USER_BAN=10]="USER_BAN",Bt[Bt.COLLISION_FAIL=11]="COLLISION_FAIL",Bt[Bt.ROOM_FULL=12]="ROOM_FULL",Bt[Bt.ROOM_CLOSING=13]="ROOM_CLOSING"))(s=cm.MessageCode||(cm.MessageCode={}));let a;(Y=>(Y[Y.MSG_HEART_BEAT=10001]="MSG_HEART_BEAT",Y[Y.MSG_REG_HALL=10002]="MSG_REG_HALL",Y[Y.MSG_REG_ROOM=10003]="MSG_REG_ROOM",Y[Y.MSG_REMOVE_HALL=11002]="MSG_REMOVE_HALL",Y[Y.MSG_REMOVE_ROOM=11003]="MSG_REMOVE_ROOM",Y[Y.MSG_USER_REGISTER=101]="MSG_USER_REGISTER",Y[Y.MSG_USER_LOGIN=102]="MSG_USER_LOGIN",Y[Y.MSG_REPEAT_LOGIN_NOTICE=103]="MSG_REPEAT_LOGIN_NOTICE",Y[Y.MSG_REQUEST_ROOM_ADDR=104]="MSG_REQUEST_ROOM_ADDR",Y[Y.MSG_ENTER_ROOM=105]="MSG_ENTER_ROOM",Y[Y.MSG_PLAYER_OPR=106]="MSG_PLAYER_OPR",Y[Y.MSG_GEN_FOOD=108]="MSG_GEN_FOOD",Y[Y.MSG_UPDATE_ROLE=109]="MSG_UPDATE_ROLE",Y[Y.MSG_NOTICE_ENTER=110]="MSG_NOTICE_ENTER",Y[Y.MSG_BATTLE_END=111]="MSG_BATTLE_END",Y[Y.MSG_EAT_FOOD=112]="MSG_EAT_FOOD",Y[Y.MSG_PLAYER_COLLISION=113]="MSG_PLAYER_COLLISION",Y[Y.MSG_REQUEST_SERVER_TIME=114]="MSG_REQUEST_SERVER_TIME",Y[Y.MSG_REQUEST_ROOM_DATA=115]="MSG_REQUEST_ROOM_DATA",Y[Y.MSG_INVITE_LIST=116]="MSG_INVITE_LIST",Y[Y.MSG_REQUEST_INFO=117]="MSG_REQUEST_INFO",Y[Y.MSG_SHOP_BUY=118]="MSG_SHOP_BUY",Y[Y.MSG_PUSH=119]="MSG_PUSH",Y[Y.MSG_QUERY_TOKEN=120]="MSG_QUERY_TOKEN",Y[Y.MSG_PLAYER_OUT=121]="MSG_PLAYER_OUT",Y[Y.MSG_CHARGE=122]="MSG_CHARGE",Y[Y.MSG_WITHDRAW=123]="MSG_WITHDRAW",Y[Y.MSG_PACK_INFO=124]="MSG_PACK_INFO",Y[Y.MSG_TRANSFER=125]="MSG_TRANSFER",Y[Y.MSG_WITHDRAW_INFO=126]="MSG_WITHDRAW_INFO",Y[Y.MSG_CHARGE_RECORD=127]="MSG_CHARGE_RECORD",Y[Y.MSG_WITHDRAW_RECORD=128]="MSG_WITHDRAW_RECORD",Y[Y.MSG_SNAKE_UPGRADE=129]="MSG_SNAKE_UPGRADE",Y[Y.MSG_SNAKE_FIGHT=130]="MSG_SNAKE_FIGHT",Y[Y.MSG_MAIL_CHECK=131]="MSG_MAIL_CHECK",Y[Y.MSG_MAIL_LIST=132]="MSG_MAIL_LIST",Y[Y.MSG_MAIL_GET=133]="MSG_MAIL_GET",Y[Y.MSG_MAIL_DELETE=134]="MSG_MAIL_DELETE",Y[Y.MSG_NEW_MAIL=135]="MSG_NEW_MAIL",Y[Y.MSG_SYS_NOTICE=136]="MSG_SYS_NOTICE",Y[Y.MSG_CHANGE_INFO=137]="MSG_CHANGE_INFO",Y[Y.MSG_AI_ENTER=138]="MSG_AI_ENTER",Y[Y.MSG_AI_END=139]="MSG_AI_END",Y[Y.MSG_OPEN_BOX=140]="MSG_OPEN_BOX",Y[Y.MSG_REQUEST_PRICE=141]="MSG_REQUEST_PRICE",Y[Y.MSG_REQUEST_RANK=142]="MSG_REQUEST_RANK",Y[Y.MSG_LVUP_NOTICE=143]="MSG_LVUP_NOTICE",Y[Y.MSG_CREATE_CLUB=144]="MSG_CREATE_CLUB",Y[Y.MSG_CLUB_INFO=145]="MSG_CLUB_INFO",Y[Y.MSG_SET_COMMISSION=146]="MSG_SET_COMMISSION",Y[Y.MSG_CLUB_CHANGE_INFO=147]="MSG_CLUB_CHANGE_INFO",Y[Y.MSG_CREATE_CUSTOM_ROOM=148]="MSG_CREATE_CUSTOM_ROOM",Y[Y.MSG_CLUB_ROOM=149]="MSG_CLUB_ROOM",Y[Y.MSG_REQUEST_PROFIT=150]="MSG_REQUEST_PROFIT",Y[Y.MSG_TOKEN_CHANGE_RECORD=151]="MSG_TOKEN_CHANGE_RECORD",Y[Y.MSG_CLUB_MEMBER=152]="MSG_CLUB_MEMBER",Y[Y.MSG_REQUEST_MY_PROFIT=153]="MSG_REQUEST_MY_PROFIT",Y[Y.MSG_REQUEST_PROFIT_LIST=154]="MSG_REQUEST_PROFIT_LIST",Y[Y.MSG_REQUEST_HALL_ADDR=155]="MSG_REQUEST_HALL_ADDR",Y[Y.MSG_DELETE_CLUB_ROOM=156]="MSG_DELETE_CLUB_ROOM",Y[Y.GM_SEND_SYS_NOTICE=2e3]="GM_SEND_SYS_NOTICE",Y[Y.GM_SEND_SYS_MAIL=2001]="GM_SEND_SYS_MAIL",Y[Y.GM_QUERY_ROLE=2002]="GM_QUERY_ROLE",Y[Y.GM_BAN_ROLE=2003]="GM_BAN_ROLE",Y[Y.GM_QUERY_CLUB=2004]="GM_QUERY_CLUB",Y[Y.GM_ROLE_CLUB_SET=2005]="GM_ROLE_CLUB_SET",Y[Y.GM_CREATE_CLUB=2006]="GM_CREATE_CLUB"))(a=cm.MessageType||(cm.MessageType={}));let Ol=class Ol extends c.Message{constructor(n){super();ce(this,um,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,um)),!Array.isArray(n)&&typeof n=="object"&&(this.msghead=n.msghead,"msgbody"in n&&n.msgbody!=null&&(this.msgbody=n.msgbody))}get msghead(){return c.Message.getWrapperField(this,u,1)}set msghead(n){c.Message.setWrapperField(this,1,n)}get has_msghead(){return c.Message.getField(this,1)!=null}get msgbody(){return c.Message.getFieldWithDefault(this,2,new Uint8Array(0))}set msgbody(n){c.Message.setField(this,2,n)}get has_msgbody(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new Ol({msghead:u.fromObject(n.msghead)});return n.msgbody!=null&&(o.msgbody=n.msgbody),o}toObject(){let n={};return this.msghead!=null&&(n.msghead=this.msghead.toObject()),this.msgbody!=null&&(n.msgbody=this.msgbody),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_msghead&&o.writeMessage(1,this.msghead,()=>this.msghead.serialize(o)),this.has_msgbody&&this.msgbody.length&&o.writeBytes(2,this.msgbody),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ol;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.msghead,()=>d.msghead=u.deserialize(o));break;case 2:d.msgbody=o.readBytes();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ol.deserialize(n)}};um=new WeakMap;let l=Ol;cm.CMsgBase=Ol;let Fl=class Fl extends c.Message{constructor(n){super();ce(this,pm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,pm)),!Array.isArray(n)&&typeof n=="object"&&(this.msgtype=n.msgtype,this.msgcode=n.msgcode,"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId))}get msgtype(){return c.Message.getField(this,1)}set msgtype(n){c.Message.setField(this,1,n)}get has_msgtype(){return c.Message.getField(this,1)!=null}get msgcode(){return c.Message.getField(this,2)}set msgcode(n){c.Message.setField(this,2,n)}get has_msgcode(){return c.Message.getField(this,2)!=null}get roleId(){return c.Message.getFieldWithDefault(this,3,"")}set roleId(n){c.Message.setField(this,3,n)}get has_roleId(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new Fl({msgtype:n.msgtype,msgcode:n.msgcode});return n.roleId!=null&&(o.roleId=n.roleId),o}toObject(){let n={};return this.msgtype!=null&&(n.msgtype=this.msgtype),this.msgcode!=null&&(n.msgcode=this.msgcode),this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_msgtype&&o.writeInt32(1,this.msgtype),this.has_msgcode&&o.writeInt32(2,this.msgcode),this.has_roleId&&this.roleId.length&&o.writeString(3,this.roleId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Fl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.msgtype=o.readInt32();break;case 2:d.msgcode=o.readInt32();break;case 3:d.roleId=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Fl.deserialize(n)}};pm=new WeakMap;let u=Fl;cm.CMsgHead=Fl;let Pl=class Pl extends c.Message{constructor(n){super();ce(this,mm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,mm)),!Array.isArray(n)&&typeof n=="object"&&(this.name=n.name,this.icon=n.icon,this.type=n.type,this.addr=n.addr)}get name(){return c.Message.getField(this,1)}set name(n){c.Message.setField(this,1,n)}get has_name(){return c.Message.getField(this,1)!=null}get icon(){return c.Message.getField(this,2)}set icon(n){c.Message.setField(this,2,n)}get has_icon(){return c.Message.getField(this,2)!=null}get type(){return c.Message.getField(this,3)}set type(n){c.Message.setField(this,3,n)}get has_type(){return c.Message.getField(this,3)!=null}get addr(){return c.Message.getField(this,4)}set addr(n){c.Message.setField(this,4,n)}get has_addr(){return c.Message.getField(this,4)!=null}static fromObject(n){return new Pl({name:n.name,icon:n.icon,type:n.type,addr:n.addr})}toObject(){let n={};return this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.type!=null&&(n.type=this.type),this.addr!=null&&(n.addr=this.addr),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_name&&this.name.length&&o.writeString(1,this.name),this.has_icon&&this.icon.length&&o.writeString(2,this.icon),this.has_type&&o.writeInt32(3,this.type),this.has_addr&&this.addr.length&&o.writeString(4,this.addr),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Pl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.name=o.readString();break;case 2:d.icon=o.readString();break;case 3:d.type=o.readInt32();break;case 4:d.addr=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Pl.deserialize(n)}};mm=new WeakMap;let m=Pl;cm.CS_GM_CREATE_CLUB=Pl;let Ul=class Ul extends c.Message{constructor(n){super();ce(this,hm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,hm)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type)}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Ul({clubId:n.clubId,type:n.type})}toObject(){let n={};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_clubId&&o.writeInt64(1,this.clubId),this.has_type&&o.writeInt32(2,this.type),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ul;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.clubId=o.readInt64();break;case 2:d.type=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ul.deserialize(n)}};hm=new WeakMap;let p=Ul;cm.SC_GM_CREATE_CLUB=Ul;let zl=class zl extends c.Message{constructor(n){super();ce(this,dm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,dm)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,this.clubId=n.clubId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get clubId(){return c.Message.getField(this,2)}set clubId(n){c.Message.setField(this,2,n)}get has_clubId(){return c.Message.getField(this,2)!=null}static fromObject(n){return new zl({roleId:n.roleId,clubId:n.clubId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.clubId!=null&&(n.clubId=this.clubId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_clubId&&o.writeInt64(2,this.clubId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new zl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:d.clubId=o.readInt64();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return zl.deserialize(n)}};dm=new WeakMap;let h=zl;cm.CS_GM_ROLE_CLUB_SET=zl;let Hl=class Hl extends c.Message{constructor(n){super();ce(this,fm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,fm)),!Array.isArray(n)&&typeof n=="object"&&"clubId"in n&&n.clubId!=null&&(this.clubId=n.clubId)}get clubId(){return c.Message.getFieldWithDefault(this,1,0)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}static fromObject(n){let o=new Hl({});return n.clubId!=null&&(o.clubId=n.clubId),o}toObject(){let n={};return this.clubId!=null&&(n.clubId=this.clubId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_clubId&&o.writeInt64(1,this.clubId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Hl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.clubId=o.readInt64();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Hl.deserialize(n)}};fm=new WeakMap;let f=Hl;cm.CS_GM_QUERY_CLUB=Hl;let jl=class jl extends c.Message{constructor(n){super();ce(this,gm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8],le(this,gm)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type,"name"in n&&n.name!=null&&(this.name=n.name),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"creater"in n&&n.creater!=null&&(this.creater=n.creater),"createTime"in n&&n.createTime!=null&&(this.createTime=n.createTime),this.rooms=n.rooms,"createrId"in n&&n.createrId!=null&&(this.createrId=n.createrId))}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}get name(){return c.Message.getFieldWithDefault(this,3,"")}set name(n){c.Message.setField(this,3,n)}get has_name(){return c.Message.getField(this,3)!=null}get icon(){return c.Message.getFieldWithDefault(this,4,"")}set icon(n){c.Message.setField(this,4,n)}get has_icon(){return c.Message.getField(this,4)!=null}get creater(){return c.Message.getFieldWithDefault(this,5,"")}set creater(n){c.Message.setField(this,5,n)}get has_creater(){return c.Message.getField(this,5)!=null}get createTime(){return c.Message.getFieldWithDefault(this,6,0)}set createTime(n){c.Message.setField(this,6,n)}get has_createTime(){return c.Message.getField(this,6)!=null}get rooms(){return c.Message.getFieldWithDefault(this,8,[])}set rooms(n){c.Message.setField(this,8,n)}get createrId(){return c.Message.getFieldWithDefault(this,9,"")}set createrId(n){c.Message.setField(this,9,n)}get has_createrId(){return c.Message.getField(this,9)!=null}static fromObject(n){let o=new jl({clubId:n.clubId,type:n.type,rooms:n.rooms});return n.name!=null&&(o.name=n.name),n.icon!=null&&(o.icon=n.icon),n.creater!=null&&(o.creater=n.creater),n.createTime!=null&&(o.createTime=n.createTime),n.createrId!=null&&(o.createrId=n.createrId),o}toObject(){let n={rooms:this.rooms};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.creater!=null&&(n.creater=this.creater),this.createTime!=null&&(n.createTime=this.createTime),this.createrId!=null&&(n.createrId=this.createrId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_clubId&&o.writeInt64(1,this.clubId),this.has_type&&o.writeInt32(2,this.type),this.has_name&&this.name.length&&o.writeString(3,this.name),this.has_icon&&this.icon.length&&o.writeString(4,this.icon),this.has_creater&&this.creater.length&&o.writeString(5,this.creater),this.has_createTime&&o.writeInt64(6,this.createTime),this.rooms.length&&o.writeRepeatedString(8,this.rooms),this.has_createrId&&this.createrId.length&&o.writeString(9,this.createrId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new jl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.clubId=o.readInt64();break;case 2:d.type=o.readInt32();break;case 3:d.name=o.readString();break;case 4:d.icon=o.readString();break;case 5:d.creater=o.readString();break;case 6:d.createTime=o.readInt64();break;case 8:c.Message.addToRepeatedField(d,8,o.readString());break;case 9:d.createrId=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return jl.deserialize(n)}};gm=new WeakMap;let g=jl;cm.SC_GM_QUERY_CLUB=jl;let Gl=class Gl extends c.Message{constructor(n){super();ce(this,bm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,bm)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Gl({roleId:n.roleId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Gl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Gl.deserialize(n)}};bm=new WeakMap;let b=Gl;cm.CS_BAN_ROLE=Gl;let Vl=class Vl extends c.Message{constructor(n){super();ce(this,ym,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,ym)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,this.type=n.type)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Vl({roleId:n.roleId,type:n.type})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.type!=null&&(n.type=this.type),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_type&&o.writeInt32(2,this.type),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Vl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:d.type=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Vl.deserialize(n)}};ym=new WeakMap;let _=Vl;cm.CS_QUERY_ROLE=Vl;let Wl=class Wl extends c.Message{constructor(n){super();ce(this,_m,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,_m)),!Array.isArray(n)&&typeof n=="object"&&"ro"in n&&n.ro!=null&&(this.ro=n.ro)}get ro(){return c.Message.getWrapperField(this,T,1)}set ro(n){c.Message.setWrapperField(this,1,n)}get has_ro(){return c.Message.getField(this,1)!=null}static fromObject(n){let o=new Wl({});return n.ro!=null&&(o.ro=T.fromObject(n.ro)),o}toObject(){let n={};return this.ro!=null&&(n.ro=this.ro.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_ro&&o.writeMessage(1,this.ro,()=>this.ro.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Wl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.ro,()=>d.ro=T.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Wl.deserialize(n)}};_m=new WeakMap;let I=Wl;cm.SC_QUERY_ROLE=Wl;let Kl=class Kl extends c.Message{constructor(n){super();ce(this,xm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,xm)),!Array.isArray(n)&&typeof n=="object"&&("content"in n&&n.content!=null&&(this.content=n.content),"dif"in n&&n.dif!=null&&(this.dif=n.dif),"times"in n&&n.times!=null&&(this.times=n.times))}get content(){return c.Message.getFieldWithDefault(this,1,"")}set content(n){c.Message.setField(this,1,n)}get has_content(){return c.Message.getField(this,1)!=null}get dif(){return c.Message.getFieldWithDefault(this,2,0)}set dif(n){c.Message.setField(this,2,n)}get has_dif(){return c.Message.getField(this,2)!=null}get times(){return c.Message.getFieldWithDefault(this,3,0)}set times(n){c.Message.setField(this,3,n)}get has_times(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new Kl({});return n.content!=null&&(o.content=n.content),n.dif!=null&&(o.dif=n.dif),n.times!=null&&(o.times=n.times),o}toObject(){let n={};return this.content!=null&&(n.content=this.content),this.dif!=null&&(n.dif=this.dif),this.times!=null&&(n.times=this.times),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_content&&this.content.length&&o.writeString(1,this.content),this.has_dif&&o.writeInt32(2,this.dif),this.has_times&&o.writeInt32(3,this.times),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Kl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.content=o.readString();break;case 2:d.dif=o.readInt32();break;case 3:d.times=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Kl.deserialize(n)}};xm=new WeakMap;let x=Kl;cm.CS_SEND_SYS_NOTICE=Kl;let $l=class $l extends c.Message{constructor(n){super();ce(this,vm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[4,5],le(this,vm)),!Array.isArray(n)&&typeof n=="object"&&("sendName"in n&&n.sendName!=null&&(this.sendName=n.sendName),"title"in n&&n.title!=null&&(this.title=n.title),"content"in n&&n.content!=null&&(this.content=n.content),this.items=n.items,this.recId=n.recId)}get sendName(){return c.Message.getFieldWithDefault(this,1,"")}set sendName(n){c.Message.setField(this,1,n)}get has_sendName(){return c.Message.getField(this,1)!=null}get title(){return c.Message.getFieldWithDefault(this,2,"")}set title(n){c.Message.setField(this,2,n)}get has_title(){return c.Message.getField(this,2)!=null}get content(){return c.Message.getFieldWithDefault(this,3,"")}set content(n){c.Message.setField(this,3,n)}get has_content(){return c.Message.getField(this,3)!=null}get items(){return c.Message.getFieldWithDefault(this,4,[])}set items(n){c.Message.setField(this,4,n)}get recId(){return c.Message.getFieldWithDefault(this,5,[])}set recId(n){c.Message.setField(this,5,n)}static fromObject(n){let o=new $l({items:n.items,recId:n.recId});return n.sendName!=null&&(o.sendName=n.sendName),n.title!=null&&(o.title=n.title),n.content!=null&&(o.content=n.content),o}toObject(){let n={items:this.items,recId:this.recId};return this.sendName!=null&&(n.sendName=this.sendName),this.title!=null&&(n.title=this.title),this.content!=null&&(n.content=this.content),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_sendName&&this.sendName.length&&o.writeString(1,this.sendName),this.has_title&&this.title.length&&o.writeString(2,this.title),this.has_content&&this.content.length&&o.writeString(3,this.content),this.items.length&&o.writeRepeatedString(4,this.items),this.recId.length&&o.writeRepeatedString(5,this.recId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new $l;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.sendName=o.readString();break;case 2:d.title=o.readString();break;case 3:d.content=o.readString();break;case 4:c.Message.addToRepeatedField(d,4,o.readString());break;case 5:c.Message.addToRepeatedField(d,5,o.readString());break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return $l.deserialize(n)}};vm=new WeakMap;let L=$l;cm.CS_SEND_SYS_MAIL=$l;let Yl=class Yl extends c.Message{constructor(n){super();ce(this,Im,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Im)),!Array.isArray(n)&&typeof n=="object"&&(this.hallId=n.hallId)}get hallId(){return c.Message.getField(this,1)}set hallId(n){c.Message.setField(this,1,n)}get has_hallId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Yl({hallId:n.hallId})}toObject(){let n={};return this.hallId!=null&&(n.hallId=this.hallId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_hallId&&this.hallId.length&&o.writeString(1,this.hallId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Yl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.hallId=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Yl.deserialize(n)}};Im=new WeakMap;let E=Yl;cm.SS_REG_HALL=Yl;let ql=class ql extends c.Message{constructor(n){super();ce(this,km,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[12,19,24,25],le(this,km)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,"userName"in n&&n.userName!=null&&(this.userName=n.userName),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"createTime"in n&&n.createTime!=null&&(this.createTime=n.createTime),"score"in n&&n.score!=null&&(this.score=n.score),"country"in n&&n.country!=null&&(this.country=n.country),"club"in n&&n.club!=null&&(this.club=n.club),"code"in n&&n.code!=null&&(this.code=n.code),"walletAddr"in n&&n.walletAddr!=null&&(this.walletAddr=n.walletAddr),"snakeId"in n&&n.snakeId!=null&&(this.snakeId=n.snakeId),"kills"in n&&n.kills!=null&&(this.kills=n.kills),this.items=n.items,"invite"in n&&n.invite!=null&&(this.invite=n.invite),"source"in n&&n.source!=null&&(this.source=n.source),"num"in n&&n.num!=null&&(this.num=n.num),"stage"in n&&n.stage!=null&&(this.stage=n.stage),"invNum"in n&&n.invNum!=null&&(this.invNum=n.invNum),"exp"in n&&n.exp!=null&&(this.exp=n.exp),this.reward=n.reward,"ticketValue"in n&&n.ticketValue!=null&&(this.ticketValue=n.ticketValue),"lv"in n&&n.lv!=null&&(this.lv=n.lv),"ticketId"in n&&n.ticketId!=null&&(this.ticketId=n.ticketId),this.snake=n.snake,this.attr=n.attr,"recored"in n&&n.recored!=null&&(this.recored=n.recored),"maxKill"in n&&n.maxKill!=null&&(this.maxKill=n.maxKill),"maxAlive"in n&&n.maxAlive!=null&&(this.maxAlive=n.maxAlive),"skin"in n&&n.skin!=null&&(this.skin=n.skin),"ban"in n&&n.ban!=null&&(this.ban=n.ban),"roomNum"in n&&n.roomNum!=null&&(this.roomNum=n.roomNum))}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getFieldWithDefault(this,2,"")}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get icon(){return c.Message.getFieldWithDefault(this,3,"")}set icon(n){c.Message.setField(this,3,n)}get has_icon(){return c.Message.getField(this,3)!=null}get createTime(){return c.Message.getFieldWithDefault(this,4,0)}set createTime(n){c.Message.setField(this,4,n)}get has_createTime(){return c.Message.getField(this,4)!=null}get score(){return c.Message.getFieldWithDefault(this,5,0)}set score(n){c.Message.setField(this,5,n)}get has_score(){return c.Message.getField(this,5)!=null}get country(){return c.Message.getFieldWithDefault(this,6,0)}set country(n){c.Message.setField(this,6,n)}get has_country(){return c.Message.getField(this,6)!=null}get club(){return c.Message.getFieldWithDefault(this,7,"")}set club(n){c.Message.setField(this,7,n)}get has_club(){return c.Message.getField(this,7)!=null}get code(){return c.Message.getFieldWithDefault(this,8,"")}set code(n){c.Message.setField(this,8,n)}get has_code(){return c.Message.getField(this,8)!=null}get walletAddr(){return c.Message.getFieldWithDefault(this,9,"")}set walletAddr(n){c.Message.setField(this,9,n)}get has_walletAddr(){return c.Message.getField(this,9)!=null}get snakeId(){return c.Message.getFieldWithDefault(this,10,0)}set snakeId(n){c.Message.setField(this,10,n)}get has_snakeId(){return c.Message.getField(this,10)!=null}get kills(){return c.Message.getFieldWithDefault(this,11,0)}set kills(n){c.Message.setField(this,11,n)}get has_kills(){return c.Message.getField(this,11)!=null}get items(){return c.Message.getRepeatedWrapperField(this,F,12)}set items(n){c.Message.setRepeatedWrapperField(this,12,n)}get invite(){return c.Message.getFieldWithDefault(this,13,"")}set invite(n){c.Message.setField(this,13,n)}get has_invite(){return c.Message.getField(this,13)!=null}get source(){return c.Message.getFieldWithDefault(this,14,"")}set source(n){c.Message.setField(this,14,n)}get has_source(){return c.Message.getField(this,14)!=null}get num(){return c.Message.getFieldWithDefault(this,15,0)}set num(n){c.Message.setField(this,15,n)}get has_num(){return c.Message.getField(this,15)!=null}get stage(){return c.Message.getFieldWithDefault(this,16,0)}set stage(n){c.Message.setField(this,16,n)}get has_stage(){return c.Message.getField(this,16)!=null}get invNum(){return c.Message.getFieldWithDefault(this,17,0)}set invNum(n){c.Message.setField(this,17,n)}get has_invNum(){return c.Message.getField(this,17)!=null}get exp(){return c.Message.getFieldWithDefault(this,18,0)}set exp(n){c.Message.setField(this,18,n)}get has_exp(){return c.Message.getField(this,18)!=null}get reward(){return c.Message.getFieldWithDefault(this,19,[])}set reward(n){c.Message.setField(this,19,n)}get ticketValue(){return c.Message.getFieldWithDefault(this,20,0)}set ticketValue(n){c.Message.setField(this,20,n)}get has_ticketValue(){return c.Message.getField(this,20)!=null}get lv(){return c.Message.getFieldWithDefault(this,22,0)}set lv(n){c.Message.setField(this,22,n)}get has_lv(){return c.Message.getField(this,22)!=null}get ticketId(){return c.Message.getFieldWithDefault(this,23,0)}set ticketId(n){c.Message.setField(this,23,n)}get has_ticketId(){return c.Message.getField(this,23)!=null}get snake(){return c.Message.getRepeatedWrapperField(this,H,24)}set snake(n){c.Message.setRepeatedWrapperField(this,24,n)}get attr(){return c.Message.getFieldWithDefault(this,25,[])}set attr(n){c.Message.setField(this,25,n)}get recored(){return c.Message.getFieldWithDefault(this,26,"")}set recored(n){c.Message.setField(this,26,n)}get has_recored(){return c.Message.getField(this,26)!=null}get maxKill(){return c.Message.getFieldWithDefault(this,27,0)}set maxKill(n){c.Message.setField(this,27,n)}get has_maxKill(){return c.Message.getField(this,27)!=null}get maxAlive(){return c.Message.getFieldWithDefault(this,28,0)}set maxAlive(n){c.Message.setField(this,28,n)}get has_maxAlive(){return c.Message.getField(this,28)!=null}get skin(){return c.Message.getFieldWithDefault(this,29,0)}set skin(n){c.Message.setField(this,29,n)}get has_skin(){return c.Message.getField(this,29)!=null}get ban(){return c.Message.getFieldWithDefault(this,30,!1)}set ban(n){c.Message.setField(this,30,n)}get has_ban(){return c.Message.getField(this,30)!=null}get roomNum(){return c.Message.getFieldWithDefault(this,31,0)}set roomNum(n){c.Message.setField(this,31,n)}get has_roomNum(){return c.Message.getField(this,31)!=null}static fromObject(n){let o=new ql({roleId:n.roleId,items:n.items.map(d=>F.fromObject(d)),reward:n.reward,snake:n.snake.map(d=>H.fromObject(d)),attr:n.attr});return n.userName!=null&&(o.userName=n.userName),n.icon!=null&&(o.icon=n.icon),n.createTime!=null&&(o.createTime=n.createTime),n.score!=null&&(o.score=n.score),n.country!=null&&(o.country=n.country),n.club!=null&&(o.club=n.club),n.code!=null&&(o.code=n.code),n.walletAddr!=null&&(o.walletAddr=n.walletAddr),n.snakeId!=null&&(o.snakeId=n.snakeId),n.kills!=null&&(o.kills=n.kills),n.invite!=null&&(o.invite=n.invite),n.source!=null&&(o.source=n.source),n.num!=null&&(o.num=n.num),n.stage!=null&&(o.stage=n.stage),n.invNum!=null&&(o.invNum=n.invNum),n.exp!=null&&(o.exp=n.exp),n.ticketValue!=null&&(o.ticketValue=n.ticketValue),n.lv!=null&&(o.lv=n.lv),n.ticketId!=null&&(o.ticketId=n.ticketId),n.recored!=null&&(o.recored=n.recored),n.maxKill!=null&&(o.maxKill=n.maxKill),n.maxAlive!=null&&(o.maxAlive=n.maxAlive),n.skin!=null&&(o.skin=n.skin),n.ban!=null&&(o.ban=n.ban),n.roomNum!=null&&(o.roomNum=n.roomNum),o}toObject(){let n={reward:this.reward,attr:this.attr};return this.roleId!=null&&(n.roleId=this.roleId),this.userName!=null&&(n.userName=this.userName),this.icon!=null&&(n.icon=this.icon),this.createTime!=null&&(n.createTime=this.createTime),this.score!=null&&(n.score=this.score),this.country!=null&&(n.country=this.country),this.club!=null&&(n.club=this.club),this.code!=null&&(n.code=this.code),this.walletAddr!=null&&(n.walletAddr=this.walletAddr),this.snakeId!=null&&(n.snakeId=this.snakeId),this.kills!=null&&(n.kills=this.kills),this.items!=null&&(n.items=this.items.map(o=>o.toObject())),this.invite!=null&&(n.invite=this.invite),this.source!=null&&(n.source=this.source),this.num!=null&&(n.num=this.num),this.stage!=null&&(n.stage=this.stage),this.invNum!=null&&(n.invNum=this.invNum),this.exp!=null&&(n.exp=this.exp),this.ticketValue!=null&&(n.ticketValue=this.ticketValue),this.lv!=null&&(n.lv=this.lv),this.ticketId!=null&&(n.ticketId=this.ticketId),this.snake!=null&&(n.snake=this.snake.map(o=>o.toObject())),this.recored!=null&&(n.recored=this.recored),this.maxKill!=null&&(n.maxKill=this.maxKill),this.maxAlive!=null&&(n.maxAlive=this.maxAlive),this.skin!=null&&(n.skin=this.skin),this.ban!=null&&(n.ban=this.ban),this.roomNum!=null&&(n.roomNum=this.roomNum),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_userName&&this.userName.length&&o.writeString(2,this.userName),this.has_icon&&this.icon.length&&o.writeString(3,this.icon),this.has_createTime&&o.writeInt64(4,this.createTime),this.has_score&&o.writeInt32(5,this.score),this.has_country&&o.writeInt32(6,this.country),this.has_club&&this.club.length&&o.writeString(7,this.club),this.has_code&&this.code.length&&o.writeString(8,this.code),this.has_walletAddr&&this.walletAddr.length&&o.writeString(9,this.walletAddr),this.has_snakeId&&o.writeInt32(10,this.snakeId),this.has_kills&&o.writeInt32(11,this.kills),this.items.length&&o.writeRepeatedMessage(12,this.items,d=>d.serialize(o)),this.has_invite&&this.invite.length&&o.writeString(13,this.invite),this.has_source&&this.source.length&&o.writeString(14,this.source),this.has_num&&o.writeInt32(15,this.num),this.has_stage&&o.writeInt32(16,this.stage),this.has_invNum&&o.writeInt32(17,this.invNum),this.has_exp&&o.writeInt32(18,this.exp),this.reward.length&&o.writeRepeatedString(19,this.reward),this.has_ticketValue&&o.writeDouble(20,this.ticketValue),this.has_lv&&o.writeInt32(22,this.lv),this.has_ticketId&&o.writeInt32(23,this.ticketId),this.snake.length&&o.writeRepeatedMessage(24,this.snake,d=>d.serialize(o)),this.attr.length&&o.writeRepeatedString(25,this.attr),this.has_recored&&this.recored.length&&o.writeString(26,this.recored),this.has_maxKill&&o.writeInt32(27,this.maxKill),this.has_maxAlive&&o.writeInt32(28,this.maxAlive),this.has_skin&&o.writeInt32(29,this.skin),this.has_ban&&o.writeBool(30,this.ban),this.has_roomNum&&o.writeInt32(31,this.roomNum),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ql;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:d.userName=o.readString();break;case 3:d.icon=o.readString();break;case 4:d.createTime=o.readInt64();break;case 5:d.score=o.readInt32();break;case 6:d.country=o.readInt32();break;case 7:d.club=o.readString();break;case 8:d.code=o.readString();break;case 9:d.walletAddr=o.readString();break;case 10:d.snakeId=o.readInt32();break;case 11:d.kills=o.readInt32();break;case 12:o.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,12,F.deserialize(o),F));break;case 13:d.invite=o.readString();break;case 14:d.source=o.readString();break;case 15:d.num=o.readInt32();break;case 16:d.stage=o.readInt32();break;case 17:d.invNum=o.readInt32();break;case 18:d.exp=o.readInt32();break;case 19:c.Message.addToRepeatedField(d,19,o.readString());break;case 20:d.ticketValue=o.readDouble();break;case 22:d.lv=o.readInt32();break;case 23:d.ticketId=o.readInt32();break;case 24:o.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,24,H.deserialize(o),H));break;case 25:c.Message.addToRepeatedField(d,25,o.readString());break;case 26:d.recored=o.readString();break;case 27:d.maxKill=o.readInt32();break;case 28:d.maxAlive=o.readInt32();break;case 29:d.skin=o.readInt32();break;case 30:d.ban=o.readBool();break;case 31:d.roomNum=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ql.deserialize(n)}};km=new WeakMap;let T=ql;cm.RoleObject=ql;let Ql=class Ql extends c.Message{constructor(n){super();ce(this,Sm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8],le(this,Sm)),!Array.isArray(n)&&typeof n=="object"&&("mailId"in n&&n.mailId!=null&&(this.mailId=n.mailId),"sendId"in n&&n.sendId!=null&&(this.sendId=n.sendId),"sendName"in n&&n.sendName!=null&&(this.sendName=n.sendName),"title"in n&&n.title!=null&&(this.title=n.title),"content"in n&&n.content!=null&&(this.content=n.content),"sendTime"in n&&n.sendTime!=null&&(this.sendTime=n.sendTime),"read"in n&&n.read!=null&&(this.read=n.read),this.items=n.items,"get"in n&&n.get!=null&&(this.get=n.get))}get mailId(){return c.Message.getFieldWithDefault(this,1,0)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}get sendId(){return c.Message.getFieldWithDefault(this,2,"")}set sendId(n){c.Message.setField(this,2,n)}get has_sendId(){return c.Message.getField(this,2)!=null}get sendName(){return c.Message.getFieldWithDefault(this,3,"")}set sendName(n){c.Message.setField(this,3,n)}get has_sendName(){return c.Message.getField(this,3)!=null}get title(){return c.Message.getFieldWithDefault(this,4,"")}set title(n){c.Message.setField(this,4,n)}get has_title(){return c.Message.getField(this,4)!=null}get content(){return c.Message.getFieldWithDefault(this,5,"")}set content(n){c.Message.setField(this,5,n)}get has_content(){return c.Message.getField(this,5)!=null}get sendTime(){return c.Message.getFieldWithDefault(this,6,0)}set sendTime(n){c.Message.setField(this,6,n)}get has_sendTime(){return c.Message.getField(this,6)!=null}get read(){return c.Message.getFieldWithDefault(this,7,!1)}set read(n){c.Message.setField(this,7,n)}get has_read(){return c.Message.getField(this,7)!=null}get items(){return c.Message.getRepeatedWrapperField(this,F,8)}set items(n){c.Message.setRepeatedWrapperField(this,8,n)}get get(){return c.Message.getFieldWithDefault(this,9,!1)}set get(n){c.Message.setField(this,9,n)}get has_get(){return c.Message.getField(this,9)!=null}static fromObject(n){let o=new Ql({items:n.items.map(d=>F.fromObject(d))});return n.mailId!=null&&(o.mailId=n.mailId),n.sendId!=null&&(o.sendId=n.sendId),n.sendName!=null&&(o.sendName=n.sendName),n.title!=null&&(o.title=n.title),n.content!=null&&(o.content=n.content),n.sendTime!=null&&(o.sendTime=n.sendTime),n.read!=null&&(o.read=n.read),n.get!=null&&(o.get=n.get),o}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),this.sendId!=null&&(n.sendId=this.sendId),this.sendName!=null&&(n.sendName=this.sendName),this.title!=null&&(n.title=this.title),this.content!=null&&(n.content=this.content),this.sendTime!=null&&(n.sendTime=this.sendTime),this.read!=null&&(n.read=this.read),this.items!=null&&(n.items=this.items.map(o=>o.toObject())),this.get!=null&&(n.get=this.get),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_mailId&&o.writeInt32(1,this.mailId),this.has_sendId&&this.sendId.length&&o.writeString(2,this.sendId),this.has_sendName&&this.sendName.length&&o.writeString(3,this.sendName),this.has_title&&this.title.length&&o.writeString(4,this.title),this.has_content&&this.content.length&&o.writeString(5,this.content),this.has_sendTime&&o.writeInt64(6,this.sendTime),this.has_read&&o.writeBool(7,this.read),this.items.length&&o.writeRepeatedMessage(8,this.items,d=>d.serialize(o)),this.has_get&&o.writeBool(9,this.get),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ql;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.mailId=o.readInt32();break;case 2:d.sendId=o.readString();break;case 3:d.sendName=o.readString();break;case 4:d.title=o.readString();break;case 5:d.content=o.readString();break;case 6:d.sendTime=o.readInt64();break;case 7:d.read=o.readBool();break;case 8:o.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,8,F.deserialize(o),F));break;case 9:d.get=o.readBool();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ql.deserialize(n)}};Sm=new WeakMap;let R=Ql;cm.MailObject=Ql;let Zl=class Zl extends c.Message{constructor(n){super();ce(this,wm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[3],le(this,wm)),!Array.isArray(n)&&typeof n=="object"&&("id"in n&&n.id!=null&&(this.id=n.id),"unkey"in n&&n.unkey!=null&&(this.unkey=n.unkey),this.attr=n.attr,"skin"in n&&n.skin!=null&&(this.skin=n.skin),"upgrade"in n&&n.upgrade!=null&&(this.upgrade=n.upgrade))}get id(){return c.Message.getFieldWithDefault(this,1,0)}set id(n){c.Message.setField(this,1,n)}get has_id(){return c.Message.getField(this,1)!=null}get unkey(){return c.Message.getFieldWithDefault(this,2,0)}set unkey(n){c.Message.setField(this,2,n)}get has_unkey(){return c.Message.getField(this,2)!=null}get attr(){return c.Message.getFieldWithDefault(this,3,[])}set attr(n){c.Message.setField(this,3,n)}get skin(){return c.Message.getFieldWithDefault(this,4,0)}set skin(n){c.Message.setField(this,4,n)}get has_skin(){return c.Message.getField(this,4)!=null}get upgrade(){return c.Message.getFieldWithDefault(this,5,!1)}set upgrade(n){c.Message.setField(this,5,n)}get has_upgrade(){return c.Message.getField(this,5)!=null}static fromObject(n){let o=new Zl({attr:n.attr});return n.id!=null&&(o.id=n.id),n.unkey!=null&&(o.unkey=n.unkey),n.skin!=null&&(o.skin=n.skin),n.upgrade!=null&&(o.upgrade=n.upgrade),o}toObject(){let n={attr:this.attr};return this.id!=null&&(n.id=this.id),this.unkey!=null&&(n.unkey=this.unkey),this.skin!=null&&(n.skin=this.skin),this.upgrade!=null&&(n.upgrade=this.upgrade),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_id&&o.writeInt32(1,this.id),this.has_unkey&&o.writeInt32(2,this.unkey),this.attr.length&&o.writeRepeatedString(3,this.attr),this.has_skin&&o.writeInt32(4,this.skin),this.has_upgrade&&o.writeBool(5,this.upgrade),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Zl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.id=o.readInt32();break;case 2:d.unkey=o.readInt32();break;case 3:c.Message.addToRepeatedField(d,3,o.readString());break;case 4:d.skin=o.readInt32();break;case 5:d.upgrade=o.readBool();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Zl.deserialize(n)}};wm=new WeakMap;let H=Zl;cm.SnakeDto=Zl;let Xl=class Xl extends c.Message{constructor(n){super();ce(this,Em,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Em)),!Array.isArray(n)&&typeof n=="object"&&("itemId"in n&&n.itemId!=null&&(this.itemId=n.itemId),"num"in n&&n.num!=null&&(this.num=n.num),"chainId"in n&&n.chainId!=null&&(this.chainId=n.chainId))}get itemId(){return c.Message.getFieldWithDefault(this,1,0)}set itemId(n){c.Message.setField(this,1,n)}get has_itemId(){return c.Message.getField(this,1)!=null}get num(){return c.Message.getFieldWithDefault(this,2,0)}set num(n){c.Message.setField(this,2,n)}get has_num(){return c.Message.getField(this,2)!=null}get chainId(){return c.Message.getFieldWithDefault(this,3,0)}set chainId(n){c.Message.setField(this,3,n)}get has_chainId(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new Xl({});return n.itemId!=null&&(o.itemId=n.itemId),n.num!=null&&(o.num=n.num),n.chainId!=null&&(o.chainId=n.chainId),o}toObject(){let n={};return this.itemId!=null&&(n.itemId=this.itemId),this.num!=null&&(n.num=this.num),this.chainId!=null&&(n.chainId=this.chainId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_itemId&&o.writeInt32(1,this.itemId),this.has_num&&o.writeDouble(2,this.num),this.has_chainId&&o.writeInt32(3,this.chainId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Xl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.itemId=o.readInt32();break;case 2:d.num=o.readDouble();break;case 3:d.chainId=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Xl.deserialize(n)}};Em=new WeakMap;let F=Xl;cm.ItemObject=Xl;let Jl=class Jl extends c.Message{constructor(n){super();ce(this,Lm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Lm)),!Array.isArray(n)&&typeof n=="object"&&(this.icon=n.icon,this.userName=n.userName,this.country=n.country,"walletAddr"in n&&n.walletAddr!=null&&(this.walletAddr=n.walletAddr),"invite"in n&&n.invite!=null&&(this.invite=n.invite),"source"in n&&n.source!=null&&(this.source=n.source),"randomHex"in n&&n.randomHex!=null&&(this.randomHex=n.randomHex),"time"in n&&n.time!=null&&(this.time=n.time),"r"in n&&n.r!=null&&(this.r=n.r),"s"in n&&n.s!=null&&(this.s=n.s),"v"in n&&n.v!=null&&(this.v=n.v),"clubId"in n&&n.clubId!=null&&(this.clubId=n.clubId),"path"in n&&n.path!=null&&(this.path=n.path))}get icon(){return c.Message.getField(this,1)}set icon(n){c.Message.setField(this,1,n)}get has_icon(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getField(this,2)}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get country(){return c.Message.getField(this,3)}set country(n){c.Message.setField(this,3,n)}get has_country(){return c.Message.getField(this,3)!=null}get walletAddr(){return c.Message.getFieldWithDefault(this,4,"")}set walletAddr(n){c.Message.setField(this,4,n)}get has_walletAddr(){return c.Message.getField(this,4)!=null}get invite(){return c.Message.getFieldWithDefault(this,5,"")}set invite(n){c.Message.setField(this,5,n)}get has_invite(){return c.Message.getField(this,5)!=null}get source(){return c.Message.getFieldWithDefault(this,6,"")}set source(n){c.Message.setField(this,6,n)}get has_source(){return c.Message.getField(this,6)!=null}get randomHex(){return c.Message.getFieldWithDefault(this,7,"")}set randomHex(n){c.Message.setField(this,7,n)}get has_randomHex(){return c.Message.getField(this,7)!=null}get time(){return c.Message.getFieldWithDefault(this,8,0)}set time(n){c.Message.setField(this,8,n)}get has_time(){return c.Message.getField(this,8)!=null}get r(){return c.Message.getFieldWithDefault(this,9,"")}set r(n){c.Message.setField(this,9,n)}get has_r(){return c.Message.getField(this,9)!=null}get s(){return c.Message.getFieldWithDefault(this,10,"")}set s(n){c.Message.setField(this,10,n)}get has_s(){return c.Message.getField(this,10)!=null}get v(){return c.Message.getFieldWithDefault(this,11,"")}set v(n){c.Message.setField(this,11,n)}get has_v(){return c.Message.getField(this,11)!=null}get clubId(){return c.Message.getFieldWithDefault(this,12,0)}set clubId(n){c.Message.setField(this,12,n)}get has_clubId(){return c.Message.getField(this,12)!=null}get path(){return c.Message.getFieldWithDefault(this,13,"")}set path(n){c.Message.setField(this,13,n)}get has_path(){return c.Message.getField(this,13)!=null}static fromObject(n){let o=new Jl({icon:n.icon,userName:n.userName,country:n.country});return n.walletAddr!=null&&(o.walletAddr=n.walletAddr),n.invite!=null&&(o.invite=n.invite),n.source!=null&&(o.source=n.source),n.randomHex!=null&&(o.randomHex=n.randomHex),n.time!=null&&(o.time=n.time),n.r!=null&&(o.r=n.r),n.s!=null&&(o.s=n.s),n.v!=null&&(o.v=n.v),n.clubId!=null&&(o.clubId=n.clubId),n.path!=null&&(o.path=n.path),o}toObject(){let n={};return this.icon!=null&&(n.icon=this.icon),this.userName!=null&&(n.userName=this.userName),this.country!=null&&(n.country=this.country),this.walletAddr!=null&&(n.walletAddr=this.walletAddr),this.invite!=null&&(n.invite=this.invite),this.source!=null&&(n.source=this.source),this.randomHex!=null&&(n.randomHex=this.randomHex),this.time!=null&&(n.time=this.time),this.r!=null&&(n.r=this.r),this.s!=null&&(n.s=this.s),this.v!=null&&(n.v=this.v),this.clubId!=null&&(n.clubId=this.clubId),this.path!=null&&(n.path=this.path),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_icon&&this.icon.length&&o.writeString(1,this.icon),this.has_userName&&this.userName.length&&o.writeString(2,this.userName),this.has_country&&o.writeInt32(3,this.country),this.has_walletAddr&&this.walletAddr.length&&o.writeString(4,this.walletAddr),this.has_invite&&this.invite.length&&o.writeString(5,this.invite),this.has_source&&this.source.length&&o.writeString(6,this.source),this.has_randomHex&&this.randomHex.length&&o.writeString(7,this.randomHex),this.has_time&&o.writeInt64(8,this.time),this.has_r&&this.r.length&&o.writeString(9,this.r),this.has_s&&this.s.length&&o.writeString(10,this.s),this.has_v&&this.v.length&&o.writeString(11,this.v),this.has_clubId&&o.writeInt64(12,this.clubId),this.has_path&&this.path.length&&o.writeString(13,this.path),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Jl;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.icon=o.readString();break;case 2:d.userName=o.readString();break;case 3:d.country=o.readInt32();break;case 4:d.walletAddr=o.readString();break;case 5:d.invite=o.readString();break;case 6:d.source=o.readString();break;case 7:d.randomHex=o.readString();break;case 8:d.time=o.readInt64();break;case 9:d.r=o.readString();break;case 10:d.s=o.readString();break;case 11:d.v=o.readString();break;case 12:d.clubId=o.readInt64();break;case 13:d.path=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Jl.deserialize(n)}};Lm=new WeakMap;let z=Jl;cm.CS_USER_REGISTER=Jl;let ec=class ec extends c.Message{constructor(n){super();ce(this,Tm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Tm)),!Array.isArray(n)&&typeof n=="object"&&(this.roleInfo=n.roleInfo)}get roleInfo(){return c.Message.getWrapperField(this,T,1)}set roleInfo(n){c.Message.setWrapperField(this,1,n)}get has_roleInfo(){return c.Message.getField(this,1)!=null}static fromObject(n){return new ec({roleInfo:T.fromObject(n.roleInfo)})}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleInfo&&o.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ec;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.roleInfo,()=>d.roleInfo=T.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ec.deserialize(n)}};Tm=new WeakMap;let V=ec;cm.SC_USER_REGISTER=ec;let tc=class tc extends c.Message{constructor(n){super();ce(this,Am,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Am)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,"randomHex"in n&&n.randomHex!=null&&(this.randomHex=n.randomHex),"time"in n&&n.time!=null&&(this.time=n.time),"r"in n&&n.r!=null&&(this.r=n.r),"s"in n&&n.s!=null&&(this.s=n.s),"v"in n&&n.v!=null&&(this.v=n.v),"path"in n&&n.path!=null&&(this.path=n.path))}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get randomHex(){return c.Message.getFieldWithDefault(this,2,"")}set randomHex(n){c.Message.setField(this,2,n)}get has_randomHex(){return c.Message.getField(this,2)!=null}get time(){return c.Message.getFieldWithDefault(this,3,0)}set time(n){c.Message.setField(this,3,n)}get has_time(){return c.Message.getField(this,3)!=null}get r(){return c.Message.getFieldWithDefault(this,4,"")}set r(n){c.Message.setField(this,4,n)}get has_r(){return c.Message.getField(this,4)!=null}get s(){return c.Message.getFieldWithDefault(this,5,"")}set s(n){c.Message.setField(this,5,n)}get has_s(){return c.Message.getField(this,5)!=null}get v(){return c.Message.getFieldWithDefault(this,6,"")}set v(n){c.Message.setField(this,6,n)}get has_v(){return c.Message.getField(this,6)!=null}get path(){return c.Message.getFieldWithDefault(this,7,"")}set path(n){c.Message.setField(this,7,n)}get has_path(){return c.Message.getField(this,7)!=null}static fromObject(n){let o=new tc({roleId:n.roleId});return n.randomHex!=null&&(o.randomHex=n.randomHex),n.time!=null&&(o.time=n.time),n.r!=null&&(o.r=n.r),n.s!=null&&(o.s=n.s),n.v!=null&&(o.v=n.v),n.path!=null&&(o.path=n.path),o}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.randomHex!=null&&(n.randomHex=this.randomHex),this.time!=null&&(n.time=this.time),this.r!=null&&(n.r=this.r),this.s!=null&&(n.s=this.s),this.v!=null&&(n.v=this.v),this.path!=null&&(n.path=this.path),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_randomHex&&this.randomHex.length&&o.writeString(2,this.randomHex),this.has_time&&o.writeInt64(3,this.time),this.has_r&&this.r.length&&o.writeString(4,this.r),this.has_s&&this.s.length&&o.writeString(5,this.s),this.has_v&&this.v.length&&o.writeString(6,this.v),this.has_path&&this.path.length&&o.writeString(7,this.path),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new tc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:d.randomHex=o.readString();break;case 3:d.time=o.readInt64();break;case 4:d.r=o.readString();break;case 5:d.s=o.readString();break;case 6:d.v=o.readString();break;case 7:d.path=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return tc.deserialize(n)}};Am=new WeakMap;let $=tc;cm.CS_USER_LOGIN=tc;let ic=class ic extends c.Message{constructor(n){super();ce(this,Cm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Cm)),!Array.isArray(n)&&typeof n=="object"&&("roleInfo"in n&&n.roleInfo!=null&&(this.roleInfo=n.roleInfo),"loginToken"in n&&n.loginToken!=null&&(this.loginToken=n.loginToken))}get roleInfo(){return c.Message.getWrapperField(this,T,1)}set roleInfo(n){c.Message.setWrapperField(this,1,n)}get has_roleInfo(){return c.Message.getField(this,1)!=null}get loginToken(){return c.Message.getFieldWithDefault(this,2,"")}set loginToken(n){c.Message.setField(this,2,n)}get has_loginToken(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new ic({});return n.roleInfo!=null&&(o.roleInfo=T.fromObject(n.roleInfo)),n.loginToken!=null&&(o.loginToken=n.loginToken),o}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),this.loginToken!=null&&(n.loginToken=this.loginToken),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleInfo&&o.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(o)),this.has_loginToken&&this.loginToken.length&&o.writeString(2,this.loginToken),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ic;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.roleInfo,()=>d.roleInfo=T.deserialize(o));break;case 2:d.loginToken=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ic.deserialize(n)}};Cm=new WeakMap;let Z=ic;cm.SC_USER_LOGIN=ic;let rc=class rc extends c.Message{constructor(n){super();ce(this,Mm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Mm)),!Array.isArray(n)&&typeof n=="object"&&("type"in n&&n.type!=null&&(this.type=n.type),"ticketId"in n&&n.ticketId!=null&&(this.ticketId=n.ticketId),"ticketValue"in n&&n.ticketValue!=null&&(this.ticketValue=n.ticketValue),"roomType"in n&&n.roomType!=null&&(this.roomType=n.roomType),"point"in n&&n.point!=null&&(this.point=n.point),"roomNo"in n&&n.roomNo!=null&&(this.roomNo=n.roomNo))}get type(){return c.Message.getFieldWithDefault(this,1,0)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get ticketId(){return c.Message.getFieldWithDefault(this,2,0)}set ticketId(n){c.Message.setField(this,2,n)}get has_ticketId(){return c.Message.getField(this,2)!=null}get ticketValue(){return c.Message.getFieldWithDefault(this,3,0)}set ticketValue(n){c.Message.setField(this,3,n)}get has_ticketValue(){return c.Message.getField(this,3)!=null}get roomType(){return c.Message.getFieldWithDefault(this,4,0)}set roomType(n){c.Message.setField(this,4,n)}get has_roomType(){return c.Message.getField(this,4)!=null}get point(){return c.Message.getFieldWithDefault(this,5,"")}set point(n){c.Message.setField(this,5,n)}get has_point(){return c.Message.getField(this,5)!=null}get roomNo(){return c.Message.getFieldWithDefault(this,6,"")}set roomNo(n){c.Message.setField(this,6,n)}get has_roomNo(){return c.Message.getField(this,6)!=null}static fromObject(n){let o=new rc({});return n.type!=null&&(o.type=n.type),n.ticketId!=null&&(o.ticketId=n.ticketId),n.ticketValue!=null&&(o.ticketValue=n.ticketValue),n.roomType!=null&&(o.roomType=n.roomType),n.point!=null&&(o.point=n.point),n.roomNo!=null&&(o.roomNo=n.roomNo),o}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.ticketId!=null&&(n.ticketId=this.ticketId),this.ticketValue!=null&&(n.ticketValue=this.ticketValue),this.roomType!=null&&(n.roomType=this.roomType),this.point!=null&&(n.point=this.point),this.roomNo!=null&&(n.roomNo=this.roomNo),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_type&&o.writeInt32(1,this.type),this.has_ticketId&&o.writeInt32(2,this.ticketId),this.has_ticketValue&&o.writeDouble(3,this.ticketValue),this.has_roomType&&o.writeInt32(4,this.roomType),this.has_point&&this.point.length&&o.writeString(5,this.point),this.has_roomNo&&this.roomNo.length&&o.writeString(6,this.roomNo),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new rc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.type=o.readInt32();break;case 2:d.ticketId=o.readInt32();break;case 3:d.ticketValue=o.readDouble();break;case 4:d.roomType=o.readInt32();break;case 5:d.point=o.readString();break;case 6:d.roomNo=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return rc.deserialize(n)}};Mm=new WeakMap;let re=rc;cm.CS_REQUEST_ROOM_ADDR=rc;let nc=class nc extends c.Message{constructor(n){super();ce(this,Rm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Rm)),!Array.isArray(n)&&typeof n=="object"&&(this.addr=n.addr,"roleInfo"in n&&n.roleInfo!=null&&(this.roleInfo=n.roleInfo),"info"in n&&n.info!=null&&(this.info=n.info))}get addr(){return c.Message.getField(this,1)}set addr(n){c.Message.setField(this,1,n)}get has_addr(){return c.Message.getField(this,1)!=null}get roleInfo(){return c.Message.getWrapperField(this,T,2)}set roleInfo(n){c.Message.setWrapperField(this,2,n)}get has_roleInfo(){return c.Message.getField(this,2)!=null}get info(){return c.Message.getFieldWithDefault(this,3,"")}set info(n){c.Message.setField(this,3,n)}get has_info(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new nc({addr:n.addr});return n.roleInfo!=null&&(o.roleInfo=T.fromObject(n.roleInfo)),n.info!=null&&(o.info=n.info),o}toObject(){let n={};return this.addr!=null&&(n.addr=this.addr),this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),this.info!=null&&(n.info=this.info),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_addr&&this.addr.length&&o.writeString(1,this.addr),this.has_roleInfo&&o.writeMessage(2,this.roleInfo,()=>this.roleInfo.serialize(o)),this.has_info&&this.info.length&&o.writeString(3,this.info),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new nc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.addr=o.readString();break;case 2:o.readMessage(d.roleInfo,()=>d.roleInfo=T.deserialize(o));break;case 3:d.info=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return nc.deserialize(n)}};Rm=new WeakMap;let Me=nc;cm.SC_REQUEST_ROOM_ADDR=nc;let sc=class sc extends c.Message{constructor(n){super();ce(this,Bm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Bm)),!Array.isArray(n)&&typeof n=="object"&&("tag"in n&&n.tag!=null&&(this.tag=n.tag),"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId))}get tag(){return c.Message.getFieldWithDefault(this,1,"")}set tag(n){c.Message.setField(this,1,n)}get has_tag(){return c.Message.getField(this,1)!=null}get roleId(){return c.Message.getFieldWithDefault(this,2,"")}set roleId(n){c.Message.setField(this,2,n)}get has_roleId(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new sc({});return n.tag!=null&&(o.tag=n.tag),n.roleId!=null&&(o.roleId=n.roleId),o}toObject(){let n={};return this.tag!=null&&(n.tag=this.tag),this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_tag&&this.tag.length&&o.writeString(1,this.tag),this.has_roleId&&this.roleId.length&&o.writeString(2,this.roleId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new sc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.tag=o.readString();break;case 2:d.roleId=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return sc.deserialize(n)}};Bm=new WeakMap;let rt=sc;cm.CS_ENTER_ROOM=sc;let ac=class ac extends c.Message{constructor(n){super();ce(this,Dm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],le(this,Dm)),!Array.isArray(n)&&typeof n=="object"&&(this.food=n.food,this.players=n.players,"roomNo"in n&&n.roomNo!=null&&(this.roomNo=n.roomNo))}get food(){return c.Message.getRepeatedWrapperField(this,me,1)}set food(n){c.Message.setRepeatedWrapperField(this,1,n)}get players(){return c.Message.getRepeatedWrapperField(this,ve,2)}set players(n){c.Message.setRepeatedWrapperField(this,2,n)}get roomNo(){return c.Message.getFieldWithDefault(this,3,"")}set roomNo(n){c.Message.setField(this,3,n)}get has_roomNo(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new ac({food:n.food.map(d=>me.fromObject(d)),players:n.players.map(d=>ve.fromObject(d))});return n.roomNo!=null&&(o.roomNo=n.roomNo),o}toObject(){let n={};return this.food!=null&&(n.food=this.food.map(o=>o.toObject())),this.players!=null&&(n.players=this.players.map(o=>o.toObject())),this.roomNo!=null&&(n.roomNo=this.roomNo),n}serialize(n){let o=n||new c.BinaryWriter;if(this.food.length&&o.writeRepeatedMessage(1,this.food,d=>d.serialize(o)),this.players.length&&o.writeRepeatedMessage(2,this.players,d=>d.serialize(o)),this.has_roomNo&&this.roomNo.length&&o.writeString(3,this.roomNo),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ac;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,1,me.deserialize(o),me));break;case 2:o.readMessage(d.players,()=>c.Message.addToRepeatedWrapperField(d,2,ve.deserialize(o),ve));break;case 3:d.roomNo=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ac.deserialize(n)}};Dm=new WeakMap;let be=ac;cm.SC_ENTER_ROOM=ac;let oc=class oc extends c.Message{constructor(n){super();ce(this,Nm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Nm)),!Array.isArray(n)&&typeof n=="object"&&("unkey"in n&&n.unkey!=null&&(this.unkey=n.unkey),"itemId"in n&&n.itemId!=null&&(this.itemId=n.itemId),"loc"in n&&n.loc!=null&&(this.loc=n.loc))}get unkey(){return c.Message.getFieldWithDefault(this,1,"")}set unkey(n){c.Message.setField(this,1,n)}get has_unkey(){return c.Message.getField(this,1)!=null}get itemId(){return c.Message.getFieldWithDefault(this,2,0)}set itemId(n){c.Message.setField(this,2,n)}get has_itemId(){return c.Message.getField(this,2)!=null}get loc(){return c.Message.getWrapperField(this,Pe,3)}set loc(n){c.Message.setWrapperField(this,3,n)}get has_loc(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new oc({});return n.unkey!=null&&(o.unkey=n.unkey),n.itemId!=null&&(o.itemId=n.itemId),n.loc!=null&&(o.loc=Pe.fromObject(n.loc)),o}toObject(){let n={};return this.unkey!=null&&(n.unkey=this.unkey),this.itemId!=null&&(n.itemId=this.itemId),this.loc!=null&&(n.loc=this.loc.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_unkey&&this.unkey.length&&o.writeString(1,this.unkey),this.has_itemId&&o.writeInt32(2,this.itemId),this.has_loc&&o.writeMessage(3,this.loc,()=>this.loc.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new oc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.unkey=o.readString();break;case 2:d.itemId=o.readInt32();break;case 3:o.readMessage(d.loc,()=>d.loc=Pe.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return oc.deserialize(n)}};Nm=new WeakMap;let me=oc;cm.FoodObject=oc;let lc=class lc extends c.Message{constructor(n){super();ce(this,Om,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[5,23],le(this,Om)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"userName"in n&&n.userName!=null&&(this.userName=n.userName),"snakeId"in n&&n.snakeId!=null&&(this.snakeId=n.snakeId),"speed"in n&&n.speed!=null&&(this.speed=n.speed),this.snake=n.snake,"kills"in n&&n.kills!=null&&(this.kills=n.kills),"state"in n&&n.state!=null&&(this.state=n.state),"score"in n&&n.score!=null&&(this.score=n.score),"wdTime"in n&&n.wdTime!=null&&(this.wdTime=n.wdTime),"dieTime"in n&&n.dieTime!=null&&(this.dieTime=n.dieTime),"direction"in n&&n.direction!=null&&(this.direction=n.direction),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"oprTime"in n&&n.oprTime!=null&&(this.oprTime=n.oprTime),"aimDir"in n&&n.aimDir!=null&&(this.aimDir=n.aimDir),"length"in n&&n.length!=null&&(this.length=n.length),"enterTime"in n&&n.enterTime!=null&&(this.enterTime=n.enterTime),"exp"in n&&n.exp!=null&&(this.exp=n.exp),"result"in n&&n.result!=null&&(this.result=n.result),"oprIndex"in n&&n.oprIndex!=null&&(this.oprIndex=n.oprIndex),this.attr=n.attr,"skin"in n&&n.skin!=null&&(this.skin=n.skin))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getFieldWithDefault(this,2,"")}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get snakeId(){return c.Message.getFieldWithDefault(this,3,0)}set snakeId(n){c.Message.setField(this,3,n)}get has_snakeId(){return c.Message.getField(this,3)!=null}get speed(){return c.Message.getFieldWithDefault(this,4,0)}set speed(n){c.Message.setField(this,4,n)}get has_speed(){return c.Message.getField(this,4)!=null}get snake(){return c.Message.getRepeatedWrapperField(this,B,5)}set snake(n){c.Message.setRepeatedWrapperField(this,5,n)}get kills(){return c.Message.getFieldWithDefault(this,6,0)}set kills(n){c.Message.setField(this,6,n)}get has_kills(){return c.Message.getField(this,6)!=null}get state(){return c.Message.getFieldWithDefault(this,7,!1)}set state(n){c.Message.setField(this,7,n)}get has_state(){return c.Message.getField(this,7)!=null}get score(){return c.Message.getFieldWithDefault(this,8,0)}set score(n){c.Message.setField(this,8,n)}get has_score(){return c.Message.getField(this,8)!=null}get wdTime(){return c.Message.getFieldWithDefault(this,9,0)}set wdTime(n){c.Message.setField(this,9,n)}get has_wdTime(){return c.Message.getField(this,9)!=null}get dieTime(){return c.Message.getFieldWithDefault(this,11,0)}set dieTime(n){c.Message.setField(this,11,n)}get has_dieTime(){return c.Message.getField(this,11)!=null}get direction(){return c.Message.getFieldWithDefault(this,14,0)}set direction(n){c.Message.setField(this,14,n)}get has_direction(){return c.Message.getField(this,14)!=null}get frame(){return c.Message.getFieldWithDefault(this,15,0)}set frame(n){c.Message.setField(this,15,n)}get has_frame(){return c.Message.getField(this,15)!=null}get oprTime(){return c.Message.getFieldWithDefault(this,16,0)}set oprTime(n){c.Message.setField(this,16,n)}get has_oprTime(){return c.Message.getField(this,16)!=null}get aimDir(){return c.Message.getFieldWithDefault(this,17,0)}set aimDir(n){c.Message.setField(this,17,n)}get has_aimDir(){return c.Message.getField(this,17)!=null}get length(){return c.Message.getFieldWithDefault(this,18,0)}set length(n){c.Message.setField(this,18,n)}get has_length(){return c.Message.getField(this,18)!=null}get enterTime(){return c.Message.getFieldWithDefault(this,19,0)}set enterTime(n){c.Message.setField(this,19,n)}get has_enterTime(){return c.Message.getField(this,19)!=null}get exp(){return c.Message.getFieldWithDefault(this,20,0)}set exp(n){c.Message.setField(this,20,n)}get has_exp(){return c.Message.getField(this,20)!=null}get result(){return c.Message.getWrapperField(this,l,21)}set result(n){c.Message.setWrapperField(this,21,n)}get has_result(){return c.Message.getField(this,21)!=null}get oprIndex(){return c.Message.getFieldWithDefault(this,22,0)}set oprIndex(n){c.Message.setField(this,22,n)}get has_oprIndex(){return c.Message.getField(this,22)!=null}get attr(){return c.Message.getFieldWithDefault(this,23,[])}set attr(n){c.Message.setField(this,23,n)}get skin(){return c.Message.getFieldWithDefault(this,24,0)}set skin(n){c.Message.setField(this,24,n)}get has_skin(){return c.Message.getField(this,24)!=null}static fromObject(n){let o=new lc({snake:n.snake.map(d=>B.fromObject(d)),attr:n.attr});return n.roleId!=null&&(o.roleId=n.roleId),n.userName!=null&&(o.userName=n.userName),n.snakeId!=null&&(o.snakeId=n.snakeId),n.speed!=null&&(o.speed=n.speed),n.kills!=null&&(o.kills=n.kills),n.state!=null&&(o.state=n.state),n.score!=null&&(o.score=n.score),n.wdTime!=null&&(o.wdTime=n.wdTime),n.dieTime!=null&&(o.dieTime=n.dieTime),n.direction!=null&&(o.direction=n.direction),n.frame!=null&&(o.frame=n.frame),n.oprTime!=null&&(o.oprTime=n.oprTime),n.aimDir!=null&&(o.aimDir=n.aimDir),n.length!=null&&(o.length=n.length),n.enterTime!=null&&(o.enterTime=n.enterTime),n.exp!=null&&(o.exp=n.exp),n.result!=null&&(o.result=l.fromObject(n.result)),n.oprIndex!=null&&(o.oprIndex=n.oprIndex),n.skin!=null&&(o.skin=n.skin),o}toObject(){let n={attr:this.attr};return this.roleId!=null&&(n.roleId=this.roleId),this.userName!=null&&(n.userName=this.userName),this.snakeId!=null&&(n.snakeId=this.snakeId),this.speed!=null&&(n.speed=this.speed),this.snake!=null&&(n.snake=this.snake.map(o=>o.toObject())),this.kills!=null&&(n.kills=this.kills),this.state!=null&&(n.state=this.state),this.score!=null&&(n.score=this.score),this.wdTime!=null&&(n.wdTime=this.wdTime),this.dieTime!=null&&(n.dieTime=this.dieTime),this.direction!=null&&(n.direction=this.direction),this.frame!=null&&(n.frame=this.frame),this.oprTime!=null&&(n.oprTime=this.oprTime),this.aimDir!=null&&(n.aimDir=this.aimDir),this.length!=null&&(n.length=this.length),this.enterTime!=null&&(n.enterTime=this.enterTime),this.exp!=null&&(n.exp=this.exp),this.result!=null&&(n.result=this.result.toObject()),this.oprIndex!=null&&(n.oprIndex=this.oprIndex),this.skin!=null&&(n.skin=this.skin),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_userName&&this.userName.length&&o.writeString(2,this.userName),this.has_snakeId&&o.writeInt32(3,this.snakeId),this.has_speed&&o.writeFloat(4,this.speed),this.snake.length&&o.writeRepeatedMessage(5,this.snake,d=>d.serialize(o)),this.has_kills&&o.writeInt32(6,this.kills),this.has_state&&o.writeBool(7,this.state),this.has_score&&o.writeInt32(8,this.score),this.has_wdTime&&o.writeInt64(9,this.wdTime),this.has_dieTime&&o.writeInt64(11,this.dieTime),this.has_direction&&o.writeFloat(14,this.direction),this.has_frame&&o.writeInt64(15,this.frame),this.has_oprTime&&o.writeInt64(16,this.oprTime),this.has_aimDir&&o.writeFloat(17,this.aimDir),this.has_length&&o.writeInt32(18,this.length),this.has_enterTime&&o.writeInt64(19,this.enterTime),this.has_exp&&o.writeInt32(20,this.exp),this.has_result&&o.writeMessage(21,this.result,()=>this.result.serialize(o)),this.has_oprIndex&&o.writeInt32(22,this.oprIndex),this.attr.length&&o.writeRepeatedString(23,this.attr),this.has_skin&&o.writeInt32(24,this.skin),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new lc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:d.userName=o.readString();break;case 3:d.snakeId=o.readInt32();break;case 4:d.speed=o.readFloat();break;case 5:o.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,5,B.deserialize(o),B));break;case 6:d.kills=o.readInt32();break;case 7:d.state=o.readBool();break;case 8:d.score=o.readInt32();break;case 9:d.wdTime=o.readInt64();break;case 11:d.dieTime=o.readInt64();break;case 14:d.direction=o.readFloat();break;case 15:d.frame=o.readInt64();break;case 16:d.oprTime=o.readInt64();break;case 17:d.aimDir=o.readFloat();break;case 18:d.length=o.readInt32();break;case 19:d.enterTime=o.readInt64();break;case 20:d.exp=o.readInt32();break;case 21:o.readMessage(d.result,()=>d.result=l.deserialize(o));break;case 22:d.oprIndex=o.readInt32();break;case 23:c.Message.addToRepeatedField(d,23,o.readString());break;case 24:d.skin=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return lc.deserialize(n)}};Om=new WeakMap;let ve=lc;cm.PlayerObject=lc;let cc=class cc extends c.Message{constructor(n){super();ce(this,Fm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Fm)),!Array.isArray(n)&&typeof n=="object"&&"loc"in n&&n.loc!=null&&(this.loc=n.loc)}get loc(){return c.Message.getWrapperField(this,Pe,2)}set loc(n){c.Message.setWrapperField(this,2,n)}get has_loc(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new cc({});return n.loc!=null&&(o.loc=Pe.fromObject(n.loc)),o}toObject(){let n={};return this.loc!=null&&(n.loc=this.loc.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_loc&&o.writeMessage(2,this.loc,()=>this.loc.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new cc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 2:o.readMessage(d.loc,()=>d.loc=Pe.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return cc.deserialize(n)}};Fm=new WeakMap;let B=cc;cm.SnakeObject=cc;let uc=class uc extends c.Message{constructor(n){super();ce(this,Pm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Pm)),!Array.isArray(n)&&typeof n=="object"&&("x"in n&&n.x!=null&&(this.x=n.x),"y"in n&&n.y!=null&&(this.y=n.y))}get x(){return c.Message.getFieldWithDefault(this,1,0)}set x(n){c.Message.setField(this,1,n)}get has_x(){return c.Message.getField(this,1)!=null}get y(){return c.Message.getFieldWithDefault(this,2,0)}set y(n){c.Message.setField(this,2,n)}get has_y(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new uc({});return n.x!=null&&(o.x=n.x),n.y!=null&&(o.y=n.y),o}toObject(){let n={};return this.x!=null&&(n.x=this.x),this.y!=null&&(n.y=this.y),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_x&&o.writeDouble(1,this.x),this.has_y&&o.writeDouble(2,this.y),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new uc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.x=o.readDouble();break;case 2:d.y=o.readDouble();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return uc.deserialize(n)}};Pm=new WeakMap;let Pe=uc;cm.PointObject=uc;let pc=class pc extends c.Message{constructor(n){super();ce(this,Um,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Um)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"opr"in n&&n.opr!=null&&(this.opr=n.opr),"value"in n&&n.value!=null&&(this.value=n.value),"head"in n&&n.head!=null&&(this.head=n.head),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"curDir"in n&&n.curDir!=null&&(this.curDir=n.curDir),"aimDir"in n&&n.aimDir!=null&&(this.aimDir=n.aimDir),"speed"in n&&n.speed!=null&&(this.speed=n.speed),"oprIndex"in n&&n.oprIndex!=null&&(this.oprIndex=n.oprIndex))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get opr(){return c.Message.getFieldWithDefault(this,2,0)}set opr(n){c.Message.setField(this,2,n)}get has_opr(){return c.Message.getField(this,2)!=null}get value(){return c.Message.getFieldWithDefault(this,3,0)}set value(n){c.Message.setField(this,3,n)}get has_value(){return c.Message.getField(this,3)!=null}get head(){return c.Message.getWrapperField(this,B,4)}set head(n){c.Message.setWrapperField(this,4,n)}get has_head(){return c.Message.getField(this,4)!=null}get frame(){return c.Message.getFieldWithDefault(this,5,0)}set frame(n){c.Message.setField(this,5,n)}get has_frame(){return c.Message.getField(this,5)!=null}get curDir(){return c.Message.getFieldWithDefault(this,6,0)}set curDir(n){c.Message.setField(this,6,n)}get has_curDir(){return c.Message.getField(this,6)!=null}get aimDir(){return c.Message.getFieldWithDefault(this,7,0)}set aimDir(n){c.Message.setField(this,7,n)}get has_aimDir(){return c.Message.getField(this,7)!=null}get speed(){return c.Message.getFieldWithDefault(this,8,0)}set speed(n){c.Message.setField(this,8,n)}get has_speed(){return c.Message.getField(this,8)!=null}get oprIndex(){return c.Message.getFieldWithDefault(this,10,0)}set oprIndex(n){c.Message.setField(this,10,n)}get has_oprIndex(){return c.Message.getField(this,10)!=null}static fromObject(n){let o=new pc({});return n.roleId!=null&&(o.roleId=n.roleId),n.opr!=null&&(o.opr=n.opr),n.value!=null&&(o.value=n.value),n.head!=null&&(o.head=B.fromObject(n.head)),n.frame!=null&&(o.frame=n.frame),n.curDir!=null&&(o.curDir=n.curDir),n.aimDir!=null&&(o.aimDir=n.aimDir),n.speed!=null&&(o.speed=n.speed),n.oprIndex!=null&&(o.oprIndex=n.oprIndex),o}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.opr!=null&&(n.opr=this.opr),this.value!=null&&(n.value=this.value),this.head!=null&&(n.head=this.head.toObject()),this.frame!=null&&(n.frame=this.frame),this.curDir!=null&&(n.curDir=this.curDir),this.aimDir!=null&&(n.aimDir=this.aimDir),this.speed!=null&&(n.speed=this.speed),this.oprIndex!=null&&(n.oprIndex=this.oprIndex),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_opr&&o.writeInt32(2,this.opr),this.has_value&&o.writeInt32(3,this.value),this.has_head&&o.writeMessage(4,this.head,()=>this.head.serialize(o)),this.has_frame&&o.writeInt64(5,this.frame),this.has_curDir&&o.writeFloat(6,this.curDir),this.has_aimDir&&o.writeFloat(7,this.aimDir),this.has_speed&&o.writeFloat(8,this.speed),this.has_oprIndex&&o.writeInt32(10,this.oprIndex),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new pc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:d.opr=o.readInt32();break;case 3:d.value=o.readInt32();break;case 4:o.readMessage(d.head,()=>d.head=B.deserialize(o));break;case 5:d.frame=o.readInt64();break;case 6:d.curDir=o.readFloat();break;case 7:d.aimDir=o.readFloat();break;case 8:d.speed=o.readFloat();break;case 10:d.oprIndex=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return pc.deserialize(n)}};Um=new WeakMap;let fe=pc;cm.CS_PLAYER_OPR=pc;let mc=class mc extends c.Message{constructor(n){super();ce(this,zm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,zm)),!Array.isArray(n)&&typeof n=="object"&&(this.food=n.food,"frame"in n&&n.frame!=null&&(this.frame=n.frame))}get food(){return c.Message.getRepeatedWrapperField(this,me,1)}set food(n){c.Message.setRepeatedWrapperField(this,1,n)}get frame(){return c.Message.getFieldWithDefault(this,2,0)}set frame(n){c.Message.setField(this,2,n)}get has_frame(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new mc({food:n.food.map(d=>me.fromObject(d))});return n.frame!=null&&(o.frame=n.frame),o}toObject(){let n={};return this.food!=null&&(n.food=this.food.map(o=>o.toObject())),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let o=n||new c.BinaryWriter;if(this.food.length&&o.writeRepeatedMessage(1,this.food,d=>d.serialize(o)),this.has_frame&&o.writeInt64(2,this.frame),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new mc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,1,me.deserialize(o),me));break;case 2:d.frame=o.readInt64();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return mc.deserialize(n)}};zm=new WeakMap;let $e=mc;cm.SC_GEN_FOOD=mc;let hc=class hc extends c.Message{constructor(n){super();ce(this,Hm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Hm)),!Array.isArray(n)&&typeof n=="object"&&"players"in n&&n.players!=null&&(this.players=n.players)}get players(){return c.Message.getWrapperField(this,ve,2)}set players(n){c.Message.setWrapperField(this,2,n)}get has_players(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new hc({});return n.players!=null&&(o.players=ve.fromObject(n.players)),o}toObject(){let n={};return this.players!=null&&(n.players=this.players.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_players&&o.writeMessage(2,this.players,()=>this.players.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new hc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 2:o.readMessage(d.players,()=>d.players=ve.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return hc.deserialize(n)}};Hm=new WeakMap;let St=hc;cm.SS_NOTICE_ENTER=hc;let dc=class dc extends c.Message{constructor(n){super();ce(this,jm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8,9],le(this,jm)),!Array.isArray(n)&&typeof n=="object"&&("res"in n&&n.res!=null&&(this.res=n.res),"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"rank"in n&&n.rank!=null&&(this.rank=n.rank),"score"in n&&n.score!=null&&(this.score=n.score),"kills"in n&&n.kills!=null&&(this.kills=n.kills),"length"in n&&n.length!=null&&(this.length=n.length),"alive"in n&&n.alive!=null&&(this.alive=n.alive),this.items=n.items,this.token=n.token)}get res(){return c.Message.getFieldWithDefault(this,1,!1)}set res(n){c.Message.setField(this,1,n)}get has_res(){return c.Message.getField(this,1)!=null}get roleId(){return c.Message.getFieldWithDefault(this,2,"")}set roleId(n){c.Message.setField(this,2,n)}get has_roleId(){return c.Message.getField(this,2)!=null}get rank(){return c.Message.getFieldWithDefault(this,3,0)}set rank(n){c.Message.setField(this,3,n)}get has_rank(){return c.Message.getField(this,3)!=null}get score(){return c.Message.getFieldWithDefault(this,4,0)}set score(n){c.Message.setField(this,4,n)}get has_score(){return c.Message.getField(this,4)!=null}get kills(){return c.Message.getFieldWithDefault(this,5,0)}set kills(n){c.Message.setField(this,5,n)}get has_kills(){return c.Message.getField(this,5)!=null}get length(){return c.Message.getFieldWithDefault(this,6,0)}set length(n){c.Message.setField(this,6,n)}get has_length(){return c.Message.getField(this,6)!=null}get alive(){return c.Message.getFieldWithDefault(this,7,0)}set alive(n){c.Message.setField(this,7,n)}get has_alive(){return c.Message.getField(this,7)!=null}get items(){return c.Message.getRepeatedWrapperField(this,F,8)}set items(n){c.Message.setRepeatedWrapperField(this,8,n)}get token(){return c.Message.getFieldWithDefault(this,9,[])}set token(n){c.Message.setField(this,9,n)}static fromObject(n){let o=new dc({items:n.items.map(d=>F.fromObject(d)),token:n.token});return n.res!=null&&(o.res=n.res),n.roleId!=null&&(o.roleId=n.roleId),n.rank!=null&&(o.rank=n.rank),n.score!=null&&(o.score=n.score),n.kills!=null&&(o.kills=n.kills),n.length!=null&&(o.length=n.length),n.alive!=null&&(o.alive=n.alive),o}toObject(){let n={token:this.token};return this.res!=null&&(n.res=this.res),this.roleId!=null&&(n.roleId=this.roleId),this.rank!=null&&(n.rank=this.rank),this.score!=null&&(n.score=this.score),this.kills!=null&&(n.kills=this.kills),this.length!=null&&(n.length=this.length),this.alive!=null&&(n.alive=this.alive),this.items!=null&&(n.items=this.items.map(o=>o.toObject())),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_res&&o.writeBool(1,this.res),this.has_roleId&&this.roleId.length&&o.writeString(2,this.roleId),this.has_rank&&o.writeInt32(3,this.rank),this.has_score&&o.writeInt32(4,this.score),this.has_kills&&o.writeInt32(5,this.kills),this.has_length&&o.writeInt32(6,this.length),this.has_alive&&o.writeInt32(7,this.alive),this.items.length&&o.writeRepeatedMessage(8,this.items,d=>d.serialize(o)),this.token.length&&o.writeRepeatedString(9,this.token),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new dc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.res=o.readBool();break;case 2:d.roleId=o.readString();break;case 3:d.rank=o.readInt32();break;case 4:d.score=o.readInt32();break;case 5:d.kills=o.readInt32();break;case 6:d.length=o.readInt32();break;case 7:d.alive=o.readInt32();break;case 8:o.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,8,F.deserialize(o),F));break;case 9:c.Message.addToRepeatedField(d,9,o.readString());break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return dc.deserialize(n)}};jm=new WeakMap;let Yt=dc;cm.SC_BATTLE_END=dc;let fc=class fc extends c.Message{constructor(n){super();ce(this,Gm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,Gm)),!Array.isArray(n)&&typeof n=="object"&&(this.fid=n.fid,"head"in n&&n.head!=null&&(this.head=n.head),this.roleId=n.roleId,"frame"in n&&n.frame!=null&&(this.frame=n.frame))}get fid(){return c.Message.getFieldWithDefault(this,1,[])}set fid(n){c.Message.setField(this,1,n)}get head(){return c.Message.getWrapperField(this,B,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get roleId(){return c.Message.getField(this,3)}set roleId(n){c.Message.setField(this,3,n)}get has_roleId(){return c.Message.getField(this,3)!=null}get frame(){return c.Message.getFieldWithDefault(this,4,0)}set frame(n){c.Message.setField(this,4,n)}get has_frame(){return c.Message.getField(this,4)!=null}static fromObject(n){let o=new fc({fid:n.fid,roleId:n.roleId});return n.head!=null&&(o.head=B.fromObject(n.head)),n.frame!=null&&(o.frame=n.frame),o}toObject(){let n={fid:this.fid};return this.head!=null&&(n.head=this.head.toObject()),this.roleId!=null&&(n.roleId=this.roleId),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let o=n||new c.BinaryWriter;if(this.fid.length&&o.writeRepeatedString(1,this.fid),this.has_head&&o.writeMessage(2,this.head,()=>this.head.serialize(o)),this.has_roleId&&this.roleId.length&&o.writeString(3,this.roleId),this.has_frame&&o.writeInt64(4,this.frame),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new fc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;case 2:o.readMessage(d.head,()=>d.head=B.deserialize(o));break;case 3:d.roleId=o.readString();break;case 4:d.frame=o.readInt64();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return fc.deserialize(n)}};Gm=new WeakMap;let pi=fc;cm.CS_EAT_FOOD=fc;let gc=class gc extends c.Message{constructor(n){super();ce(this,Vm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Vm)),!Array.isArray(n)&&typeof n=="object"&&("target"in n&&n.target!=null&&(this.target=n.target),"head"in n&&n.head!=null&&(this.head=n.head),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"body"in n&&n.body!=null&&(this.body=n.body),"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"thead"in n&&n.thead!=null&&(this.thead=n.thead),"point"in n&&n.point!=null&&(this.point=n.point))}get target(){return c.Message.getFieldWithDefault(this,1,"")}set target(n){c.Message.setField(this,1,n)}get has_target(){return c.Message.getField(this,1)!=null}get head(){return c.Message.getWrapperField(this,B,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get frame(){return c.Message.getFieldWithDefault(this,3,0)}set frame(n){c.Message.setField(this,3,n)}get has_frame(){return c.Message.getField(this,3)!=null}get body(){return c.Message.getFieldWithDefault(this,4,!1)}set body(n){c.Message.setField(this,4,n)}get has_body(){return c.Message.getField(this,4)!=null}get roleId(){return c.Message.getFieldWithDefault(this,5,"")}set roleId(n){c.Message.setField(this,5,n)}get has_roleId(){return c.Message.getField(this,5)!=null}get thead(){return c.Message.getWrapperField(this,B,6)}set thead(n){c.Message.setWrapperField(this,6,n)}get has_thead(){return c.Message.getField(this,6)!=null}get point(){return c.Message.getWrapperField(this,Pe,7)}set point(n){c.Message.setWrapperField(this,7,n)}get has_point(){return c.Message.getField(this,7)!=null}static fromObject(n){let o=new gc({});return n.target!=null&&(o.target=n.target),n.head!=null&&(o.head=B.fromObject(n.head)),n.frame!=null&&(o.frame=n.frame),n.body!=null&&(o.body=n.body),n.roleId!=null&&(o.roleId=n.roleId),n.thead!=null&&(o.thead=B.fromObject(n.thead)),n.point!=null&&(o.point=Pe.fromObject(n.point)),o}toObject(){let n={};return this.target!=null&&(n.target=this.target),this.head!=null&&(n.head=this.head.toObject()),this.frame!=null&&(n.frame=this.frame),this.body!=null&&(n.body=this.body),this.roleId!=null&&(n.roleId=this.roleId),this.thead!=null&&(n.thead=this.thead.toObject()),this.point!=null&&(n.point=this.point.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_target&&this.target.length&&o.writeString(1,this.target),this.has_head&&o.writeMessage(2,this.head,()=>this.head.serialize(o)),this.has_frame&&o.writeInt64(3,this.frame),this.has_body&&o.writeBool(4,this.body),this.has_roleId&&this.roleId.length&&o.writeString(5,this.roleId),this.has_thead&&o.writeMessage(6,this.thead,()=>this.thead.serialize(o)),this.has_point&&o.writeMessage(7,this.point,()=>this.point.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new gc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.target=o.readString();break;case 2:o.readMessage(d.head,()=>d.head=B.deserialize(o));break;case 3:d.frame=o.readInt64();break;case 4:d.body=o.readBool();break;case 5:d.roleId=o.readString();break;case 6:o.readMessage(d.thead,()=>d.thead=B.deserialize(o));break;case 7:o.readMessage(d.point,()=>d.point=Pe.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return gc.deserialize(n)}};Vm=new WeakMap;let vt=gc;cm.CS_PLAYER_COLLISION=gc;let bc=class bc extends c.Message{constructor(n){super();ce(this,Wm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[4],le(this,Wm)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"head"in n&&n.head!=null&&(this.head=n.head),this.food=n.food,"taret"in n&&n.taret!=null&&(this.taret=n.taret),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"die"in n&&n.die!=null&&(this.die=n.die))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get head(){return c.Message.getWrapperField(this,B,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get food(){return c.Message.getRepeatedWrapperField(this,me,4)}set food(n){c.Message.setRepeatedWrapperField(this,4,n)}get taret(){return c.Message.getFieldWithDefault(this,5,"")}set taret(n){c.Message.setField(this,5,n)}get has_taret(){return c.Message.getField(this,5)!=null}get frame(){return c.Message.getFieldWithDefault(this,6,0)}set frame(n){c.Message.setField(this,6,n)}get has_frame(){return c.Message.getField(this,6)!=null}get die(){return c.Message.getFieldWithDefault(this,10,"")}set die(n){c.Message.setField(this,10,n)}get has_die(){return c.Message.getField(this,10)!=null}static fromObject(n){let o=new bc({food:n.food.map(d=>me.fromObject(d))});return n.roleId!=null&&(o.roleId=n.roleId),n.head!=null&&(o.head=B.fromObject(n.head)),n.taret!=null&&(o.taret=n.taret),n.frame!=null&&(o.frame=n.frame),n.die!=null&&(o.die=n.die),o}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.head!=null&&(n.head=this.head.toObject()),this.food!=null&&(n.food=this.food.map(o=>o.toObject())),this.taret!=null&&(n.taret=this.taret),this.frame!=null&&(n.frame=this.frame),this.die!=null&&(n.die=this.die),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_head&&o.writeMessage(2,this.head,()=>this.head.serialize(o)),this.food.length&&o.writeRepeatedMessage(4,this.food,d=>d.serialize(o)),this.has_taret&&this.taret.length&&o.writeString(5,this.taret),this.has_frame&&o.writeInt64(6,this.frame),this.has_die&&this.die.length&&o.writeString(10,this.die),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new bc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:o.readMessage(d.head,()=>d.head=B.deserialize(o));break;case 4:o.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,4,me.deserialize(o),me));break;case 5:d.taret=o.readString();break;case 6:d.frame=o.readInt64();break;case 10:d.die=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return bc.deserialize(n)}};Wm=new WeakMap;let Hi=bc;cm.SC_PLAYER_COLLISION=bc;let yc=class yc extends c.Message{constructor(n){super();ce(this,Km,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Km)),!Array.isArray(n)&&typeof n=="object"&&"time"in n&&n.time!=null&&(this.time=n.time)}get time(){return c.Message.getFieldWithDefault(this,1,0)}set time(n){c.Message.setField(this,1,n)}get has_time(){return c.Message.getField(this,1)!=null}static fromObject(n){let o=new yc({});return n.time!=null&&(o.time=n.time),o}toObject(){let n={};return this.time!=null&&(n.time=this.time),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_time&&o.writeInt64(1,this.time),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new yc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.time=o.readInt64();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return yc.deserialize(n)}};Km=new WeakMap;let Di=yc;cm.SC_REQUEST_SERVER_TIME=yc;let _c=class _c extends c.Message{constructor(n){super();ce(this,$m,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,$m)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new _c({roleId:n.roleId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new _c;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return _c.deserialize(n)}};$m=new WeakMap;let lr=_c;cm.CS_REQUEST_ROOM_DATA=_c;let xc=class xc extends c.Message{constructor(n){super();ce(this,Ym,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],le(this,Ym)),!Array.isArray(n)&&typeof n=="object"&&(this.food=n.food,this.players=n.players)}get food(){return c.Message.getRepeatedWrapperField(this,me,1)}set food(n){c.Message.setRepeatedWrapperField(this,1,n)}get players(){return c.Message.getRepeatedWrapperField(this,ve,2)}set players(n){c.Message.setRepeatedWrapperField(this,2,n)}static fromObject(n){return new xc({food:n.food.map(d=>me.fromObject(d)),players:n.players.map(d=>ve.fromObject(d))})}toObject(){let n={};return this.food!=null&&(n.food=this.food.map(o=>o.toObject())),this.players!=null&&(n.players=this.players.map(o=>o.toObject())),n}serialize(n){let o=n||new c.BinaryWriter;if(this.food.length&&o.writeRepeatedMessage(1,this.food,d=>d.serialize(o)),this.players.length&&o.writeRepeatedMessage(2,this.players,d=>d.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new xc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,1,me.deserialize(o),me));break;case 2:o.readMessage(d.players,()=>c.Message.addToRepeatedWrapperField(d,2,ve.deserialize(o),ve));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return xc.deserialize(n)}};Ym=new WeakMap;let cr=xc;cm.SC_REQUEST_ROOM_DATA=xc;let vc=class vc extends c.Message{constructor(n){super();ce(this,qm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,qm)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize)}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}static fromObject(n){return new vc({pageNo:n.pageNo,pageSize:n.pageSize})}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_pageNo&&o.writeInt32(1,this.pageNo),this.has_pageSize&&o.writeInt32(2,this.pageSize),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new vc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.pageNo=o.readInt32();break;case 2:d.pageSize=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return vc.deserialize(n)}};qm=new WeakMap;let Lr=vc;cm.CS_INVITE_LIST=vc;let Ic=class Ic extends c.Message{constructor(n){super();ce(this,Qm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,Qm)),!Array.isArray(n)&&typeof n=="object"&&(this.info=n.info,"inviteCount"in n&&n.inviteCount!=null&&(this.inviteCount=n.inviteCount))}get info(){return c.Message.getFieldWithDefault(this,1,[])}set info(n){c.Message.setField(this,1,n)}get inviteCount(){return c.Message.getFieldWithDefault(this,2,0)}set inviteCount(n){c.Message.setField(this,2,n)}get has_inviteCount(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new Ic({info:n.info});return n.inviteCount!=null&&(o.inviteCount=n.inviteCount),o}toObject(){let n={info:this.info};return this.inviteCount!=null&&(n.inviteCount=this.inviteCount),n}serialize(n){let o=n||new c.BinaryWriter;if(this.info.length&&o.writeRepeatedString(1,this.info),this.has_inviteCount&&o.writeInt32(2,this.inviteCount),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ic;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;case 2:d.inviteCount=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ic.deserialize(n)}};Qm=new WeakMap;let Xn=Ic;cm.SC_INVITE_LIST=Ic;let kc=class kc extends c.Message{constructor(n){super();ce(this,Zm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Zm)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,"type"in n&&n.type!=null&&(this.type=n.type))}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getFieldWithDefault(this,2,0)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new kc({roleId:n.roleId});return n.type!=null&&(o.type=n.type),o}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.type!=null&&(n.type=this.type),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_type&&o.writeInt32(2,this.type),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new kc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:d.type=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return kc.deserialize(n)}};Zm=new WeakMap;let Tr=kc;cm.CS_REQUEST_INFO=kc;let Sc=class Sc extends c.Message{constructor(n){super();ce(this,Xm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Xm)),!Array.isArray(n)&&typeof n=="object"&&(this.roleInfo=n.roleInfo)}get roleInfo(){return c.Message.getWrapperField(this,T,1)}set roleInfo(n){c.Message.setWrapperField(this,1,n)}get has_roleInfo(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Sc({roleInfo:T.fromObject(n.roleInfo)})}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleInfo&&o.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Sc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.roleInfo,()=>d.roleInfo=T.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Sc.deserialize(n)}};Xm=new WeakMap;let Zi=Sc;cm.SC_REQUEST_INFO=Sc;let wc=class wc extends c.Message{constructor(n){super();ce(this,Jm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Jm)),!Array.isArray(n)&&typeof n=="object"&&(this.id=n.id,"symbolId"in n&&n.symbolId!=null&&(this.symbolId=n.symbolId),"num"in n&&n.num!=null&&(this.num=n.num))}get id(){return c.Message.getField(this,1)}set id(n){c.Message.setField(this,1,n)}get has_id(){return c.Message.getField(this,1)!=null}get symbolId(){return c.Message.getFieldWithDefault(this,2,0)}set symbolId(n){c.Message.setField(this,2,n)}get has_symbolId(){return c.Message.getField(this,2)!=null}get num(){return c.Message.getFieldWithDefault(this,3,0)}set num(n){c.Message.setField(this,3,n)}get has_num(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new wc({id:n.id});return n.symbolId!=null&&(o.symbolId=n.symbolId),n.num!=null&&(o.num=n.num),o}toObject(){let n={};return this.id!=null&&(n.id=this.id),this.symbolId!=null&&(n.symbolId=this.symbolId),this.num!=null&&(n.num=this.num),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_id&&o.writeInt32(1,this.id),this.has_symbolId&&o.writeInt32(2,this.symbolId),this.has_num&&o.writeInt32(3,this.num),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new wc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.id=o.readInt32();break;case 2:d.symbolId=o.readInt32();break;case 3:d.num=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return wc.deserialize(n)}};Jm=new WeakMap;let Qr=wc;cm.CS_SHOP_BUY=wc;let Ec=class Ec extends c.Message{constructor(n){super();ce(this,eh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],le(this,eh)),!Array.isArray(n)&&typeof n=="object"&&(this.cost=n.cost,this.items=n.items,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get cost(){return c.Message.getRepeatedWrapperField(this,F,1)}set cost(n){c.Message.setRepeatedWrapperField(this,1,n)}get items(){return c.Message.getRepeatedWrapperField(this,F,2)}set items(n){c.Message.setRepeatedWrapperField(this,2,n)}get snake(){return c.Message.getWrapperField(this,H,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new Ec({cost:n.cost.map(d=>F.fromObject(d)),items:n.items.map(d=>F.fromObject(d))});return n.snake!=null&&(o.snake=H.fromObject(n.snake)),o}toObject(){let n={};return this.cost!=null&&(n.cost=this.cost.map(o=>o.toObject())),this.items!=null&&(n.items=this.items.map(o=>o.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.cost.length&&o.writeRepeatedMessage(1,this.cost,d=>d.serialize(o)),this.items.length&&o.writeRepeatedMessage(2,this.items,d=>d.serialize(o)),this.has_snake&&o.writeMessage(3,this.snake,()=>this.snake.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ec;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,1,F.deserialize(o),F));break;case 2:o.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,2,F.deserialize(o),F));break;case 3:o.readMessage(d.snake,()=>d.snake=H.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ec.deserialize(n)}};eh=new WeakMap;let Ar=Ec;cm.SC_SHOP_BUY=Ec;let Lc=class Lc extends c.Message{constructor(n){super();ce(this,th,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,th)),!Array.isArray(n)&&typeof n=="object"&&(this.msgList=n.msgList,this.frame=n.frame)}get msgList(){return c.Message.getRepeatedWrapperField(this,l,1)}set msgList(n){c.Message.setRepeatedWrapperField(this,1,n)}get frame(){return c.Message.getField(this,2)}set frame(n){c.Message.setField(this,2,n)}get has_frame(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Lc({msgList:n.msgList.map(d=>l.fromObject(d)),frame:n.frame})}toObject(){let n={};return this.msgList!=null&&(n.msgList=this.msgList.map(o=>o.toObject())),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let o=n||new c.BinaryWriter;if(this.msgList.length&&o.writeRepeatedMessage(1,this.msgList,d=>d.serialize(o)),this.has_frame&&o.writeInt64(2,this.frame),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Lc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.msgList,()=>c.Message.addToRepeatedWrapperField(d,1,l.deserialize(o),l));break;case 2:d.frame=o.readInt64();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Lc.deserialize(n)}};th=new WeakMap;let Ys=Lc;cm.SC_PUSH=Lc;let Tc=class Tc extends c.Message{constructor(n){super();ce(this,ih,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,ih)),!Array.isArray(n)&&typeof n=="object"&&(this.token=n.token)}get token(){return c.Message.getFieldWithDefault(this,1,[])}set token(n){c.Message.setField(this,1,n)}static fromObject(n){return new Tc({token:n.token})}toObject(){return{token:this.token}}serialize(n){let o=n||new c.BinaryWriter;if(this.token.length&&o.writeRepeatedString(1,this.token),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Tc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Tc.deserialize(n)}};ih=new WeakMap;let Qa=Tc;cm.SC_QUERY_TOKEN=Tc;let Ac=class Ac extends c.Message{constructor(n){super();ce(this,rh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,rh)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Ac({roleId:n.roleId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ac;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ac.deserialize(n)}};rh=new WeakMap;let am=Ac;cm.SC_PLAYER_OUT=Ac;let Cc=class Cc extends c.Message{constructor(n){super();ce(this,nh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,nh)),!Array.isArray(n)&&typeof n=="object"&&"symbolId"in n&&n.symbolId!=null&&(this.symbolId=n.symbolId)}get symbolId(){return c.Message.getFieldWithDefault(this,2,0)}set symbolId(n){c.Message.setField(this,2,n)}get has_symbolId(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new Cc({});return n.symbolId!=null&&(o.symbolId=n.symbolId),o}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_symbolId&&o.writeInt32(2,this.symbolId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Cc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 2:d.symbolId=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Cc.deserialize(n)}};nh=new WeakMap;let qs=Cc;cm.CS_CHARGE=Cc;let Mc=class Mc extends c.Message{constructor(n){super();ce(this,sh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,sh)),!Array.isArray(n)&&typeof n=="object"&&("symbolId"in n&&n.symbolId!=null&&(this.symbolId=n.symbolId),"depositAddress"in n&&n.depositAddress!=null&&(this.depositAddress=n.depositAddress),"abi"in n&&n.abi!=null&&(this.abi=n.abi),"chainId"in n&&n.chainId!=null&&(this.chainId=n.chainId))}get symbolId(){return c.Message.getFieldWithDefault(this,1,0)}set symbolId(n){c.Message.setField(this,1,n)}get has_symbolId(){return c.Message.getField(this,1)!=null}get depositAddress(){return c.Message.getFieldWithDefault(this,2,"")}set depositAddress(n){c.Message.setField(this,2,n)}get has_depositAddress(){return c.Message.getField(this,2)!=null}get abi(){return c.Message.getFieldWithDefault(this,3,"")}set abi(n){c.Message.setField(this,3,n)}get has_abi(){return c.Message.getField(this,3)!=null}get chainId(){return c.Message.getFieldWithDefault(this,4,0)}set chainId(n){c.Message.setField(this,4,n)}get has_chainId(){return c.Message.getField(this,4)!=null}static fromObject(n){let o=new Mc({});return n.symbolId!=null&&(o.symbolId=n.symbolId),n.depositAddress!=null&&(o.depositAddress=n.depositAddress),n.abi!=null&&(o.abi=n.abi),n.chainId!=null&&(o.chainId=n.chainId),o}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),this.depositAddress!=null&&(n.depositAddress=this.depositAddress),this.abi!=null&&(n.abi=this.abi),this.chainId!=null&&(n.chainId=this.chainId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_symbolId&&o.writeInt32(1,this.symbolId),this.has_depositAddress&&this.depositAddress.length&&o.writeString(2,this.depositAddress),this.has_abi&&this.abi.length&&o.writeString(3,this.abi),this.has_chainId&&o.writeInt32(4,this.chainId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Mc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.symbolId=o.readInt32();break;case 2:d.depositAddress=o.readString();break;case 3:d.abi=o.readString();break;case 4:d.chainId=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Mc.deserialize(n)}};sh=new WeakMap;let Dl=Mc;cm.SC_CHARGE=Mc;let Rc=class Rc extends c.Message{constructor(n){super();ce(this,ah,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,ah)),!Array.isArray(n)&&typeof n=="object"&&(this.symbolId=n.symbolId,this.amount=n.amount)}get symbolId(){return c.Message.getField(this,1)}set symbolId(n){c.Message.setField(this,1,n)}get has_symbolId(){return c.Message.getField(this,1)!=null}get amount(){return c.Message.getField(this,2)}set amount(n){c.Message.setField(this,2,n)}get has_amount(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Rc({symbolId:n.symbolId,amount:n.amount})}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),this.amount!=null&&(n.amount=this.amount),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_symbolId&&o.writeInt32(1,this.symbolId),this.has_amount&&o.writeDouble(2,this.amount),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Rc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.symbolId=o.readInt32();break;case 2:d.amount=o.readDouble();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Rc.deserialize(n)}};ah=new WeakMap;let Za=Rc;cm.CS_WITHDRAW=Rc;let Bc=class Bc extends c.Message{constructor(n){super();ce(this,oh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,oh)),!Array.isArray(n)&&typeof n=="object"&&"resp"in n&&n.resp!=null&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,"")}set resp(n){c.Message.setField(this,1,n)}get has_resp(){return c.Message.getField(this,1)!=null}static fromObject(n){let o=new Bc({});return n.resp!=null&&(o.resp=n.resp),o}toObject(){let n={};return this.resp!=null&&(n.resp=this.resp),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_resp&&this.resp.length&&o.writeString(1,this.resp),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Bc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.resp=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Bc.deserialize(n)}};oh=new WeakMap;let Nl=Bc;cm.SC_WITHDRAW=Bc;let Dc=class Dc extends c.Message{constructor(n){super();ce(this,lh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,lh)),!Array.isArray(n)&&typeof n=="object"&&(this.roleInfo=n.roleInfo)}get roleInfo(){return c.Message.getRepeatedWrapperField(this,T,1)}set roleInfo(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new Dc({roleInfo:n.roleInfo.map(d=>T.fromObject(d))})}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.map(o=>o.toObject())),n}serialize(n){let o=n||new c.BinaryWriter;if(this.roleInfo.length&&o.writeRepeatedMessage(1,this.roleInfo,d=>d.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Dc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.roleInfo,()=>c.Message.addToRepeatedWrapperField(d,1,T.deserialize(o),T));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Dc.deserialize(n)}};lh=new WeakMap;let om=Dc;cm.SS_UPDATE_ROLE=Dc;let Nc=class Nc extends c.Message{constructor(n){super();ce(this,ch,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,ch)),!Array.isArray(n)&&typeof n=="object"&&(this.ids=n.ids)}get ids(){return c.Message.getFieldWithDefault(this,1,[])}set ids(n){c.Message.setField(this,1,n)}static fromObject(n){return new Nc({ids:n.ids})}toObject(){return{ids:this.ids}}serialize(n){let o=n||new c.BinaryWriter;if(this.ids.length&&o.writeRepeatedString(1,this.ids),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Nc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Nc.deserialize(n)}};ch=new WeakMap;let P=Nc;cm.SS_UPDATE_CALLBACK=Nc;let Oc=class Oc extends c.Message{constructor(n){super();ce(this,uh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],le(this,uh)),!Array.isArray(n)&&typeof n=="object"&&(this.items=n.items,this.snake=n.snake)}get items(){return c.Message.getRepeatedWrapperField(this,F,1)}set items(n){c.Message.setRepeatedWrapperField(this,1,n)}get snake(){return c.Message.getRepeatedWrapperField(this,H,2)}set snake(n){c.Message.setRepeatedWrapperField(this,2,n)}static fromObject(n){return new Oc({items:n.items.map(d=>F.fromObject(d)),snake:n.snake.map(d=>H.fromObject(d))})}toObject(){let n={};return this.items!=null&&(n.items=this.items.map(o=>o.toObject())),this.snake!=null&&(n.snake=this.snake.map(o=>o.toObject())),n}serialize(n){let o=n||new c.BinaryWriter;if(this.items.length&&o.writeRepeatedMessage(1,this.items,d=>d.serialize(o)),this.snake.length&&o.writeRepeatedMessage(2,this.snake,d=>d.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Oc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,1,F.deserialize(o),F));break;case 2:o.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,2,H.deserialize(o),H));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Oc.deserialize(n)}};uh=new WeakMap;let S=Oc;cm.SC_PACK_INFO=Oc;let Fc=class Fc extends c.Message{constructor(n){super();ce(this,ph,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,ph)),!Array.isArray(n)&&typeof n=="object"&&(this.toAddress=n.toAddress,this.symbolId=n.symbolId,this.amount=n.amount)}get toAddress(){return c.Message.getField(this,1)}set toAddress(n){c.Message.setField(this,1,n)}get has_toAddress(){return c.Message.getField(this,1)!=null}get symbolId(){return c.Message.getField(this,2)}set symbolId(n){c.Message.setField(this,2,n)}get has_symbolId(){return c.Message.getField(this,2)!=null}get amount(){return c.Message.getField(this,3)}set amount(n){c.Message.setField(this,3,n)}get has_amount(){return c.Message.getField(this,3)!=null}static fromObject(n){return new Fc({toAddress:n.toAddress,symbolId:n.symbolId,amount:n.amount})}toObject(){let n={};return this.toAddress!=null&&(n.toAddress=this.toAddress),this.symbolId!=null&&(n.symbolId=this.symbolId),this.amount!=null&&(n.amount=this.amount),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_toAddress&&this.toAddress.length&&o.writeString(1,this.toAddress),this.has_symbolId&&o.writeInt32(2,this.symbolId),this.has_amount&&o.writeDouble(3,this.amount),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Fc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.toAddress=o.readString();break;case 2:d.symbolId=o.readInt32();break;case 3:d.amount=o.readDouble();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Fc.deserialize(n)}};ph=new WeakMap;let N=Fc;cm.CS_TRANSFER=Fc;let Pc=class Pc extends c.Message{constructor(n){super();ce(this,mh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,mh)),!Array.isArray(n)&&typeof n=="object"&&(this.symbolId=n.symbolId)}get symbolId(){return c.Message.getField(this,1)}set symbolId(n){c.Message.setField(this,1,n)}get has_symbolId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Pc({symbolId:n.symbolId})}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_symbolId&&o.writeInt32(1,this.symbolId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Pc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.symbolId=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Pc.deserialize(n)}};mh=new WeakMap;let O=Pc;cm.CS_WITHDRAW_INFO=Pc;let Uc=class Uc extends c.Message{constructor(n){super();ce(this,hh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,hh)),!Array.isArray(n)&&typeof n=="object"&&"resp"in n&&n.resp!=null&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,"")}set resp(n){c.Message.setField(this,1,n)}get has_resp(){return c.Message.getField(this,1)!=null}static fromObject(n){let o=new Uc({});return n.resp!=null&&(o.resp=n.resp),o}toObject(){let n={};return this.resp!=null&&(n.resp=this.resp),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_resp&&this.resp.length&&o.writeString(1,this.resp),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Uc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.resp=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Uc.deserialize(n)}};hh=new WeakMap;let j=Uc;cm.SC_WITHDRAW_INFO=Uc;let zc=class zc extends c.Message{constructor(n){super();ce(this,dh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,dh)),!Array.isArray(n)&&typeof n=="object"&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,[])}set resp(n){c.Message.setField(this,1,n)}static fromObject(n){return new zc({resp:n.resp})}toObject(){return{resp:this.resp}}serialize(n){let o=n||new c.BinaryWriter;if(this.resp.length&&o.writeRepeatedString(1,this.resp),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new zc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return zc.deserialize(n)}};dh=new WeakMap;let C=zc;cm.SC_CHARGE_RECORD=zc;let Hc=class Hc extends c.Message{constructor(n){super();ce(this,fh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,fh)),!Array.isArray(n)&&typeof n=="object"&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,[])}set resp(n){c.Message.setField(this,1,n)}static fromObject(n){return new Hc({resp:n.resp})}toObject(){return{resp:this.resp}}serialize(n){let o=n||new c.BinaryWriter;if(this.resp.length&&o.writeRepeatedString(1,this.resp),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Hc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Hc.deserialize(n)}};fh=new WeakMap;let ne=Hc;cm.SC_WITHDRAW_RECORD=Hc;let jc=class jc extends c.Message{constructor(n){super();ce(this,gh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,gh)),!Array.isArray(n)&&typeof n=="object"&&(this.unkey=n.unkey)}get unkey(){return c.Message.getField(this,1)}set unkey(n){c.Message.setField(this,1,n)}get has_unkey(){return c.Message.getField(this,1)!=null}static fromObject(n){return new jc({unkey:n.unkey})}toObject(){let n={};return this.unkey!=null&&(n.unkey=this.unkey),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_unkey&&o.writeInt32(1,this.unkey),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new jc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.unkey=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return jc.deserialize(n)}};gh=new WeakMap;let ae=jc;cm.CS_SNAKE_UPGRADE=jc;let Gc=class Gc extends c.Message{constructor(n){super();ce(this,bh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,bh)),!Array.isArray(n)&&typeof n=="object"&&(this.cost=n.cost,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get cost(){return c.Message.getRepeatedWrapperField(this,F,1)}set cost(n){c.Message.setRepeatedWrapperField(this,1,n)}get snake(){return c.Message.getWrapperField(this,H,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new Gc({cost:n.cost.map(d=>F.fromObject(d))});return n.snake!=null&&(o.snake=H.fromObject(n.snake)),o}toObject(){let n={};return this.cost!=null&&(n.cost=this.cost.map(o=>o.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.cost.length&&o.writeRepeatedMessage(1,this.cost,d=>d.serialize(o)),this.has_snake&&o.writeMessage(3,this.snake,()=>this.snake.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Gc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,1,F.deserialize(o),F));break;case 3:o.readMessage(d.snake,()=>d.snake=H.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Gc.deserialize(n)}};bh=new WeakMap;let pe=Gc;cm.SC_SNAKE_UPGRADE=Gc;let Vc=class Vc extends c.Message{constructor(n){super();ce(this,yh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,yh)),!Array.isArray(n)&&typeof n=="object"&&(this.unkey=n.unkey)}get unkey(){return c.Message.getField(this,1)}set unkey(n){c.Message.setField(this,1,n)}get has_unkey(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Vc({unkey:n.unkey})}toObject(){let n={};return this.unkey!=null&&(n.unkey=this.unkey),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_unkey&&o.writeInt32(1,this.unkey),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Vc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.unkey=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Vc.deserialize(n)}};yh=new WeakMap;let we=Vc;cm.CS_SNAKE_FIGHT=Vc;let Wc=class Wc extends c.Message{constructor(n){super();ce(this,_h,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,_h)),!Array.isArray(n)&&typeof n=="object"&&(this.mailId=n.mailId)}get mailId(){return c.Message.getField(this,1)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Wc({mailId:n.mailId})}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_mailId&&o.writeInt32(1,this.mailId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Wc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.mailId=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Wc.deserialize(n)}};_h=new WeakMap;let Ue=Wc;cm.CS_MAIL_CHECK=Wc;let Kc=class Kc extends c.Message{constructor(n){super();ce(this,xh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,xh)),!Array.isArray(n)&&typeof n=="object"&&(this.mail=n.mail)}get mail(){return c.Message.getRepeatedWrapperField(this,R,1)}set mail(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new Kc({mail:n.mail.map(d=>R.fromObject(d))})}toObject(){let n={};return this.mail!=null&&(n.mail=this.mail.map(o=>o.toObject())),n}serialize(n){let o=n||new c.BinaryWriter;if(this.mail.length&&o.writeRepeatedMessage(1,this.mail,d=>d.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Kc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.mail,()=>c.Message.addToRepeatedWrapperField(d,1,R.deserialize(o),R));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Kc.deserialize(n)}};xh=new WeakMap;let Se=Kc;cm.SC_MAIL_LIST=Kc;let $c=class $c extends c.Message{constructor(n){super();ce(this,vh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,vh)),!Array.isArray(n)&&typeof n=="object"&&(this.mailId=n.mailId)}get mailId(){return c.Message.getField(this,1)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new $c({mailId:n.mailId})}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_mailId&&o.writeInt32(1,this.mailId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new $c;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.mailId=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return $c.deserialize(n)}};vh=new WeakMap;let Re=$c;cm.CS_MAIL_GET=$c;let Yc=class Yc extends c.Message{constructor(n){super();ce(this,Ih,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[2],le(this,Ih)),!Array.isArray(n)&&typeof n=="object"&&("mailId"in n&&n.mailId!=null&&(this.mailId=n.mailId),this.items=n.items,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get mailId(){return c.Message.getFieldWithDefault(this,1,0)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}get items(){return c.Message.getRepeatedWrapperField(this,F,2)}set items(n){c.Message.setRepeatedWrapperField(this,2,n)}get snake(){return c.Message.getWrapperField(this,H,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new Yc({items:n.items.map(d=>F.fromObject(d))});return n.mailId!=null&&(o.mailId=n.mailId),n.snake!=null&&(o.snake=H.fromObject(n.snake)),o}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),this.items!=null&&(n.items=this.items.map(o=>o.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_mailId&&o.writeInt32(1,this.mailId),this.items.length&&o.writeRepeatedMessage(2,this.items,d=>d.serialize(o)),this.has_snake&&o.writeMessage(3,this.snake,()=>this.snake.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Yc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.mailId=o.readInt32();break;case 2:o.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,2,F.deserialize(o),F));break;case 3:o.readMessage(d.snake,()=>d.snake=H.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Yc.deserialize(n)}};Ih=new WeakMap;let et=Yc;cm.SC_MAIL_GET=Yc;let qc=class qc extends c.Message{constructor(n){super();ce(this,kh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,kh)),!Array.isArray(n)&&typeof n=="object"&&(this.mailId=n.mailId)}get mailId(){return c.Message.getField(this,1)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new qc({mailId:n.mailId})}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_mailId&&o.writeInt32(1,this.mailId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new qc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.mailId=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return qc.deserialize(n)}};kh=new WeakMap;let ye=qc;cm.CS_MAIL_DELETE=qc;let Qc=class Qc extends c.Message{constructor(n){super();ce(this,Sh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Sh)),!Array.isArray(n)&&typeof n=="object"&&(this.msg=n.msg)}get msg(){return c.Message.getField(this,1)}set msg(n){c.Message.setField(this,1,n)}get has_msg(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Qc({msg:n.msg})}toObject(){let n={};return this.msg!=null&&(n.msg=this.msg),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_msg&&this.msg.length&&o.writeString(1,this.msg),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Qc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.msg=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Qc.deserialize(n)}};Sh=new WeakMap;let ct=Qc;cm.SC_SYS_NOTICE=Qc;let Zc=class Zc extends c.Message{constructor(n){super();ce(this,wh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,wh)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type,this.value=n.value)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get value(){return c.Message.getField(this,2)}set value(n){c.Message.setField(this,2,n)}get has_value(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Zc({type:n.type,value:n.value})}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.value!=null&&(n.value=this.value),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_type&&o.writeInt32(1,this.type),this.has_value&&this.value.length&&o.writeString(2,this.value),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Zc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.type=o.readInt32();break;case 2:d.value=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Zc.deserialize(n)}};wh=new WeakMap;let at=Zc;cm.CS_CHANGE_INFO=Zc;let Xc=class Xc extends c.Message{constructor(n){super();ce(this,Eh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Eh)),!Array.isArray(n)&&typeof n=="object"&&("kills"in n&&n.kills!=null&&(this.kills=n.kills),"score"in n&&n.score!=null&&(this.score=n.score))}get kills(){return c.Message.getFieldWithDefault(this,1,0)}set kills(n){c.Message.setField(this,1,n)}get has_kills(){return c.Message.getField(this,1)!=null}get score(){return c.Message.getFieldWithDefault(this,2,0)}set score(n){c.Message.setField(this,2,n)}get has_score(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new Xc({});return n.kills!=null&&(o.kills=n.kills),n.score!=null&&(o.score=n.score),o}toObject(){let n={};return this.kills!=null&&(n.kills=this.kills),this.score!=null&&(n.score=this.score),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_kills&&o.writeInt32(1,this.kills),this.has_score&&o.writeInt32(2,this.score),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Xc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.kills=o.readInt32();break;case 2:d.score=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Xc.deserialize(n)}};Eh=new WeakMap;let gt=Xc;cm.CS_AI_END=Xc;let Jc=class Jc extends c.Message{constructor(n){super();ce(this,Lh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,Lh)),!Array.isArray(n)&&typeof n=="object"&&(this.items=n.items)}get items(){return c.Message.getRepeatedWrapperField(this,F,1)}set items(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new Jc({items:n.items.map(d=>F.fromObject(d))})}toObject(){let n={};return this.items!=null&&(n.items=this.items.map(o=>o.toObject())),n}serialize(n){let o=n||new c.BinaryWriter;if(this.items.length&&o.writeRepeatedMessage(1,this.items,d=>d.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Jc;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,1,F.deserialize(o),F));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Jc.deserialize(n)}};Lh=new WeakMap;let Mt=Jc;cm.SC_AI_END=Jc;let eu=class eu extends c.Message{constructor(n){super();ce(this,Th,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Th)),!Array.isArray(n)&&typeof n=="object"&&(this.boxId=n.boxId)}get boxId(){return c.Message.getField(this,1)}set boxId(n){c.Message.setField(this,1,n)}get has_boxId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new eu({boxId:n.boxId})}toObject(){let n={};return this.boxId!=null&&(n.boxId=this.boxId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_boxId&&o.writeInt32(1,this.boxId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new eu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.boxId=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return eu.deserialize(n)}};Th=new WeakMap;let ur=eu;cm.CS_OPEN_BOX=eu;let tu=class tu extends c.Message{constructor(n){super();ce(this,Ah,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],le(this,Ah)),!Array.isArray(n)&&typeof n=="object"&&(this.cost=n.cost,this.items=n.items,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get cost(){return c.Message.getRepeatedWrapperField(this,F,1)}set cost(n){c.Message.setRepeatedWrapperField(this,1,n)}get items(){return c.Message.getRepeatedWrapperField(this,F,2)}set items(n){c.Message.setRepeatedWrapperField(this,2,n)}get snake(){return c.Message.getWrapperField(this,H,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new tu({cost:n.cost.map(d=>F.fromObject(d)),items:n.items.map(d=>F.fromObject(d))});return n.snake!=null&&(o.snake=H.fromObject(n.snake)),o}toObject(){let n={};return this.cost!=null&&(n.cost=this.cost.map(o=>o.toObject())),this.items!=null&&(n.items=this.items.map(o=>o.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let o=n||new c.BinaryWriter;if(this.cost.length&&o.writeRepeatedMessage(1,this.cost,d=>d.serialize(o)),this.items.length&&o.writeRepeatedMessage(2,this.items,d=>d.serialize(o)),this.has_snake&&o.writeMessage(3,this.snake,()=>this.snake.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new tu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,1,F.deserialize(o),F));break;case 2:o.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,2,F.deserialize(o),F));break;case 3:o.readMessage(d.snake,()=>d.snake=H.deserialize(o));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return tu.deserialize(n)}};Ah=new WeakMap;let xi=tu;cm.SC_OPEN_BOX=tu;let iu=class iu extends c.Message{constructor(n){super();ce(this,Ch,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,Ch)),!Array.isArray(n)&&typeof n=="object"&&(this.price=n.price)}get price(){return c.Message.getFieldWithDefault(this,1,[])}set price(n){c.Message.setField(this,1,n)}static fromObject(n){return new iu({price:n.price})}toObject(){return{price:this.price}}serialize(n){let o=n||new c.BinaryWriter;if(this.price.length&&o.writeRepeatedString(1,this.price),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new iu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return iu.deserialize(n)}};Ch=new WeakMap;let ji=iu;cm.SC_REQUEST_PRICE=iu;let ru=class ru extends c.Message{constructor(n){super();ce(this,Mh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Mh)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}static fromObject(n){return new ru({type:n.type})}toObject(){let n={};return this.type!=null&&(n.type=this.type),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_type&&o.writeInt32(1,this.type),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ru;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.type=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ru.deserialize(n)}};Mh=new WeakMap;let Xa=ru;cm.CS_RANK_LIST=ru;let nu=class nu extends c.Message{constructor(n){super();ce(this,Rh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,Rh)),!Array.isArray(n)&&typeof n=="object"&&(this.rank=n.rank)}get rank(){return c.Message.getRepeatedWrapperField(this,pr,1)}set rank(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new nu({rank:n.rank.map(d=>pr.fromObject(d))})}toObject(){let n={};return this.rank!=null&&(n.rank=this.rank.map(o=>o.toObject())),n}serialize(n){let o=n||new c.BinaryWriter;if(this.rank.length&&o.writeRepeatedMessage(1,this.rank,d=>d.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new nu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:o.readMessage(d.rank,()=>c.Message.addToRepeatedWrapperField(d,1,pr.deserialize(o),pr));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return nu.deserialize(n)}};Rh=new WeakMap;let Qs=nu;cm.SC_RANK_LIST=nu;let su=class su extends c.Message{constructor(n){super();ce(this,Bh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Bh)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"userName"in n&&n.userName!=null&&(this.userName=n.userName),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"num"in n&&n.num!=null&&(this.num=n.num),"addr"in n&&n.addr!=null&&(this.addr=n.addr),"country"in n&&n.country!=null&&(this.country=n.country))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getFieldWithDefault(this,2,"")}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get icon(){return c.Message.getFieldWithDefault(this,3,"")}set icon(n){c.Message.setField(this,3,n)}get has_icon(){return c.Message.getField(this,3)!=null}get num(){return c.Message.getFieldWithDefault(this,4,0)}set num(n){c.Message.setField(this,4,n)}get has_num(){return c.Message.getField(this,4)!=null}get addr(){return c.Message.getFieldWithDefault(this,5,"")}set addr(n){c.Message.setField(this,5,n)}get has_addr(){return c.Message.getField(this,5)!=null}get country(){return c.Message.getFieldWithDefault(this,6,0)}set country(n){c.Message.setField(this,6,n)}get has_country(){return c.Message.getField(this,6)!=null}static fromObject(n){let o=new su({});return n.roleId!=null&&(o.roleId=n.roleId),n.userName!=null&&(o.userName=n.userName),n.icon!=null&&(o.icon=n.icon),n.num!=null&&(o.num=n.num),n.addr!=null&&(o.addr=n.addr),n.country!=null&&(o.country=n.country),o}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.userName!=null&&(n.userName=this.userName),this.icon!=null&&(n.icon=this.icon),this.num!=null&&(n.num=this.num),this.addr!=null&&(n.addr=this.addr),this.country!=null&&(n.country=this.country),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_userName&&this.userName.length&&o.writeString(2,this.userName),this.has_icon&&this.icon.length&&o.writeString(3,this.icon),this.has_num&&o.writeInt64(4,this.num),this.has_addr&&this.addr.length&&o.writeString(5,this.addr),this.has_country&&o.writeInt32(6,this.country),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new su;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:d.userName=o.readString();break;case 3:d.icon=o.readString();break;case 4:d.num=o.readInt64();break;case 5:d.addr=o.readString();break;case 6:d.country=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return su.deserialize(n)}};Bh=new WeakMap;let pr=su;cm.RankObject=su;let au=class au extends c.Message{constructor(n){super();ce(this,Dh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[3],le(this,Dh)),!Array.isArray(n)&&typeof n=="object"&&("lv"in n&&n.lv!=null&&(this.lv=n.lv),"exp"in n&&n.exp!=null&&(this.exp=n.exp),this.items=n.items)}get lv(){return c.Message.getFieldWithDefault(this,1,0)}set lv(n){c.Message.setField(this,1,n)}get has_lv(){return c.Message.getField(this,1)!=null}get exp(){return c.Message.getFieldWithDefault(this,2,0)}set exp(n){c.Message.setField(this,2,n)}get has_exp(){return c.Message.getField(this,2)!=null}get items(){return c.Message.getRepeatedWrapperField(this,F,3)}set items(n){c.Message.setRepeatedWrapperField(this,3,n)}static fromObject(n){let o=new au({items:n.items.map(d=>F.fromObject(d))});return n.lv!=null&&(o.lv=n.lv),n.exp!=null&&(o.exp=n.exp),o}toObject(){let n={};return this.lv!=null&&(n.lv=this.lv),this.exp!=null&&(n.exp=this.exp),this.items!=null&&(n.items=this.items.map(o=>o.toObject())),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_lv&&o.writeInt32(1,this.lv),this.has_exp&&o.writeInt32(2,this.exp),this.items.length&&o.writeRepeatedMessage(3,this.items,d=>d.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new au;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.lv=o.readInt32();break;case 2:d.exp=o.readInt32();break;case 3:o.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,3,F.deserialize(o),F));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return au.deserialize(n)}};Dh=new WeakMap;let Zs=au;cm.SC_LVUP_NOTICE=au;let ou=class ou extends c.Message{constructor(n){super();ce(this,Nh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Nh)),!Array.isArray(n)&&typeof n=="object"&&(this.name=n.name,this.icon=n.icon,this.type=n.type)}get name(){return c.Message.getField(this,1)}set name(n){c.Message.setField(this,1,n)}get has_name(){return c.Message.getField(this,1)!=null}get icon(){return c.Message.getField(this,2)}set icon(n){c.Message.setField(this,2,n)}get has_icon(){return c.Message.getField(this,2)!=null}get type(){return c.Message.getField(this,3)}set type(n){c.Message.setField(this,3,n)}get has_type(){return c.Message.getField(this,3)!=null}static fromObject(n){return new ou({name:n.name,icon:n.icon,type:n.type})}toObject(){let n={};return this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.type!=null&&(n.type=this.type),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_name&&this.name.length&&o.writeString(1,this.name),this.has_icon&&this.icon.length&&o.writeString(2,this.icon),this.has_type&&o.writeInt32(3,this.type),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ou;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.name=o.readString();break;case 2:d.icon=o.readString();break;case 3:d.type=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ou.deserialize(n)}};Nh=new WeakMap;let lm=ou;cm.CS_CREATE_CLUB=ou;let lu=class lu extends c.Message{constructor(n){super();ce(this,Oh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Oh)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type)}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){return new lu({clubId:n.clubId,type:n.type})}toObject(){let n={};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_clubId&&o.writeInt64(1,this.clubId),this.has_type&&o.writeInt32(2,this.type),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new lu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.clubId=o.readInt64();break;case 2:d.type=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return lu.deserialize(n)}};Oh=new WeakMap;let YI=lu;cm.SC_CREATE_CLUB=lu;let cu=class cu extends c.Message{constructor(n){super();ce(this,Fh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Fh)),!Array.isArray(n)&&typeof n=="object"&&("point"in n&&n.point!=null&&(this.point=n.point),"clubId"in n&&n.clubId!=null&&(this.clubId=n.clubId))}get point(){return c.Message.getFieldWithDefault(this,1,"")}set point(n){c.Message.setField(this,1,n)}get has_point(){return c.Message.getField(this,1)!=null}get clubId(){return c.Message.getFieldWithDefault(this,2,0)}set clubId(n){c.Message.setField(this,2,n)}get has_clubId(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new cu({});return n.point!=null&&(o.point=n.point),n.clubId!=null&&(o.clubId=n.clubId),o}toObject(){let n={};return this.point!=null&&(n.point=this.point),this.clubId!=null&&(n.clubId=this.clubId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_point&&this.point.length&&o.writeString(1,this.point),this.has_clubId&&o.writeInt64(2,this.clubId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new cu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.point=o.readString();break;case 2:d.clubId=o.readInt64();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return cu.deserialize(n)}};Fh=new WeakMap;let qI=cu;cm.CS_CLUB_INFO=cu;let uu=class uu extends c.Message{constructor(n){super();ce(this,Ph,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8,10],le(this,Ph)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type,"name"in n&&n.name!=null&&(this.name=n.name),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"creater"in n&&n.creater!=null&&(this.creater=n.creater),"createTime"in n&&n.createTime!=null&&(this.createTime=n.createTime),this.rooms=n.rooms,this.community=n.community,"createrId"in n&&n.createrId!=null&&(this.createrId=n.createrId),"myRate"in n&&n.myRate!=null&&(this.myRate=n.myRate))}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}get name(){return c.Message.getFieldWithDefault(this,3,"")}set name(n){c.Message.setField(this,3,n)}get has_name(){return c.Message.getField(this,3)!=null}get icon(){return c.Message.getFieldWithDefault(this,4,"")}set icon(n){c.Message.setField(this,4,n)}get has_icon(){return c.Message.getField(this,4)!=null}get creater(){return c.Message.getFieldWithDefault(this,5,"")}set creater(n){c.Message.setField(this,5,n)}get has_creater(){return c.Message.getField(this,5)!=null}get createTime(){return c.Message.getFieldWithDefault(this,6,0)}set createTime(n){c.Message.setField(this,6,n)}get has_createTime(){return c.Message.getField(this,6)!=null}get rooms(){return c.Message.getFieldWithDefault(this,8,[])}set rooms(n){c.Message.setField(this,8,n)}get community(){return c.Message.getFieldWithDefault(this,10,[])}set community(n){c.Message.setField(this,10,n)}get createrId(){return c.Message.getFieldWithDefault(this,11,"")}set createrId(n){c.Message.setField(this,11,n)}get has_createrId(){return c.Message.getField(this,11)!=null}get myRate(){return c.Message.getFieldWithDefault(this,12,0)}set myRate(n){c.Message.setField(this,12,n)}get has_myRate(){return c.Message.getField(this,12)!=null}static fromObject(n){let o=new uu({clubId:n.clubId,type:n.type,rooms:n.rooms,community:n.community});return n.name!=null&&(o.name=n.name),n.icon!=null&&(o.icon=n.icon),n.creater!=null&&(o.creater=n.creater),n.createTime!=null&&(o.createTime=n.createTime),n.createrId!=null&&(o.createrId=n.createrId),n.myRate!=null&&(o.myRate=n.myRate),o}toObject(){let n={rooms:this.rooms,community:this.community};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.creater!=null&&(n.creater=this.creater),this.createTime!=null&&(n.createTime=this.createTime),this.createrId!=null&&(n.createrId=this.createrId),this.myRate!=null&&(n.myRate=this.myRate),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_clubId&&o.writeInt64(1,this.clubId),this.has_type&&o.writeInt32(2,this.type),this.has_name&&this.name.length&&o.writeString(3,this.name),this.has_icon&&this.icon.length&&o.writeString(4,this.icon),this.has_creater&&this.creater.length&&o.writeString(5,this.creater),this.has_createTime&&o.writeInt64(6,this.createTime),this.rooms.length&&o.writeRepeatedString(8,this.rooms),this.community.length&&o.writeRepeatedString(10,this.community),this.has_createrId&&this.createrId.length&&o.writeString(11,this.createrId),this.has_myRate&&o.writeFloat(12,this.myRate),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new uu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.clubId=o.readInt64();break;case 2:d.type=o.readInt32();break;case 3:d.name=o.readString();break;case 4:d.icon=o.readString();break;case 5:d.creater=o.readString();break;case 6:d.createTime=o.readInt64();break;case 8:c.Message.addToRepeatedField(d,8,o.readString());break;case 10:c.Message.addToRepeatedField(d,10,o.readString());break;case 11:d.createrId=o.readString();break;case 12:d.myRate=o.readFloat();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return uu.deserialize(n)}};Ph=new WeakMap;let QI=uu;cm.SC_CLUB_INFO=uu;let pu=class pu extends c.Message{constructor(n){super();ce(this,Uh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Uh)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,this.rate=n.rate)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get rate(){return c.Message.getField(this,2)}set rate(n){c.Message.setField(this,2,n)}get has_rate(){return c.Message.getField(this,2)!=null}static fromObject(n){return new pu({roleId:n.roleId,rate:n.rate})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.rate!=null&&(n.rate=this.rate),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&o.writeString(1,this.roleId),this.has_rate&&o.writeFloat(2,this.rate),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new pu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roleId=o.readString();break;case 2:d.rate=o.readFloat();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return pu.deserialize(n)}};Uh=new WeakMap;let ZI=pu;cm.CS_SET_COMMISION=pu;let mu=class mu extends c.Message{constructor(n){super();ce(this,zh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,zh)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type,this.value=n.value)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get value(){return c.Message.getField(this,2)}set value(n){c.Message.setField(this,2,n)}get has_value(){return c.Message.getField(this,2)!=null}static fromObject(n){return new mu({type:n.type,value:n.value})}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.value!=null&&(n.value=this.value),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_type&&o.writeInt32(1,this.type),this.has_value&&this.value.length&&o.writeString(2,this.value),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new mu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.type=o.readInt32();break;case 2:d.value=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return mu.deserialize(n)}};zh=new WeakMap;let XI=mu;cm.CS_CLUB_CHANGE_INFO=mu;let hu=class hu extends c.Message{constructor(n){super();ce(this,Hh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Hh)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type,this.ticketId=n.ticketId,this.ticketValue=n.ticketValue,this.map=n.map,this.fruit=n.fruit,this.bgm=n.bgm,this.point=n.point,this.itemId=n.itemId)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get ticketId(){return c.Message.getField(this,2)}set ticketId(n){c.Message.setField(this,2,n)}get has_ticketId(){return c.Message.getField(this,2)!=null}get ticketValue(){return c.Message.getField(this,3)}set ticketValue(n){c.Message.setField(this,3,n)}get has_ticketValue(){return c.Message.getField(this,3)!=null}get map(){return c.Message.getField(this,4)}set map(n){c.Message.setField(this,4,n)}get has_map(){return c.Message.getField(this,4)!=null}get fruit(){return c.Message.getField(this,5)}set fruit(n){c.Message.setField(this,5,n)}get has_fruit(){return c.Message.getField(this,5)!=null}get bgm(){return c.Message.getField(this,6)}set bgm(n){c.Message.setField(this,6,n)}get has_bgm(){return c.Message.getField(this,6)!=null}get point(){return c.Message.getField(this,7)}set point(n){c.Message.setField(this,7,n)}get has_point(){return c.Message.getField(this,7)!=null}get itemId(){return c.Message.getField(this,8)}set itemId(n){c.Message.setField(this,8,n)}get has_itemId(){return c.Message.getField(this,8)!=null}static fromObject(n){return new hu({type:n.type,ticketId:n.ticketId,ticketValue:n.ticketValue,map:n.map,fruit:n.fruit,bgm:n.bgm,point:n.point,itemId:n.itemId})}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.ticketId!=null&&(n.ticketId=this.ticketId),this.ticketValue!=null&&(n.ticketValue=this.ticketValue),this.map!=null&&(n.map=this.map),this.fruit!=null&&(n.fruit=this.fruit),this.bgm!=null&&(n.bgm=this.bgm),this.point!=null&&(n.point=this.point),this.itemId!=null&&(n.itemId=this.itemId),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_type&&o.writeInt32(1,this.type),this.has_ticketId&&o.writeInt32(2,this.ticketId),this.has_ticketValue&&o.writeDouble(3,this.ticketValue),this.has_map&&this.map.length&&o.writeString(4,this.map),this.has_fruit&&this.fruit.length&&o.writeString(5,this.fruit),this.has_bgm&&this.bgm.length&&o.writeString(6,this.bgm),this.has_point&&this.point.length&&o.writeString(7,this.point),this.has_itemId&&o.writeInt32(8,this.itemId),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new hu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.type=o.readInt32();break;case 2:d.ticketId=o.readInt32();break;case 3:d.ticketValue=o.readDouble();break;case 4:d.map=o.readString();break;case 5:d.fruit=o.readString();break;case 6:d.bgm=o.readString();break;case 7:d.point=o.readString();break;case 8:d.itemId=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return hu.deserialize(n)}};Hh=new WeakMap;let JI=hu;cm.CS_CREATE_CUSTOM_ROOM=hu;let du=class du extends c.Message{constructor(n){super();ce(this,jh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[2],le(this,jh)),!Array.isArray(n)&&typeof n=="object"&&(this.roomNo=n.roomNo,this.cost=n.cost)}get roomNo(){return c.Message.getField(this,1)}set roomNo(n){c.Message.setField(this,1,n)}get has_roomNo(){return c.Message.getField(this,1)!=null}get cost(){return c.Message.getRepeatedWrapperField(this,F,2)}set cost(n){c.Message.setRepeatedWrapperField(this,2,n)}static fromObject(n){return new du({roomNo:n.roomNo,cost:n.cost.map(d=>F.fromObject(d))})}toObject(){let n={};return this.roomNo!=null&&(n.roomNo=this.roomNo),this.cost!=null&&(n.cost=this.cost.map(o=>o.toObject())),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roomNo&&this.roomNo.length&&o.writeString(1,this.roomNo),this.cost.length&&o.writeRepeatedMessage(2,this.cost,d=>d.serialize(o)),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new du;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roomNo=o.readString();break;case 2:o.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,2,F.deserialize(o),F));break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return du.deserialize(n)}};jh=new WeakMap;let ek=du;cm.SC_CREATE_CUSTOM_ROOM=du;let fu=class fu extends c.Message{constructor(n){super();ce(this,Gh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,Gh)),!Array.isArray(n)&&typeof n=="object"&&(this.rooms=n.rooms,"dailyFight"in n&&n.dailyFight!=null&&(this.dailyFight=n.dailyFight),"totalFight"in n&&n.totalFight!=null&&(this.totalFight=n.totalFight))}get rooms(){return c.Message.getFieldWithDefault(this,1,[])}set rooms(n){c.Message.setField(this,1,n)}get dailyFight(){return c.Message.getFieldWithDefault(this,2,0)}set dailyFight(n){c.Message.setField(this,2,n)}get has_dailyFight(){return c.Message.getField(this,2)!=null}get totalFight(){return c.Message.getFieldWithDefault(this,3,0)}set totalFight(n){c.Message.setField(this,3,n)}get has_totalFight(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new fu({rooms:n.rooms});return n.dailyFight!=null&&(o.dailyFight=n.dailyFight),n.totalFight!=null&&(o.totalFight=n.totalFight),o}toObject(){let n={rooms:this.rooms};return this.dailyFight!=null&&(n.dailyFight=this.dailyFight),this.totalFight!=null&&(n.totalFight=this.totalFight),n}serialize(n){let o=n||new c.BinaryWriter;if(this.rooms.length&&o.writeRepeatedString(1,this.rooms),this.has_dailyFight&&o.writeInt32(2,this.dailyFight),this.has_totalFight&&o.writeInt32(3,this.totalFight),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new fu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;case 2:d.dailyFight=o.readInt32();break;case 3:d.totalFight=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return fu.deserialize(n)}};Gh=new WeakMap;let tk=fu;cm.SC_CLUB_ROOM=fu;let gu=class gu extends c.Message{constructor(n){super();ce(this,Vh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Vh)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize)}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}static fromObject(n){return new gu({pageNo:n.pageNo,pageSize:n.pageSize})}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_pageNo&&o.writeInt32(1,this.pageNo),this.has_pageSize&&o.writeInt32(2,this.pageSize),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new gu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.pageNo=o.readInt32();break;case 2:d.pageSize=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return gu.deserialize(n)}};Vh=new WeakMap;let ik=gu;cm.CS_REQUEST_PROFIT=gu;let bu=class bu extends c.Message{constructor(n){super();ce(this,Wh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[4],le(this,Wh)),!Array.isArray(n)&&typeof n=="object"&&("profitTotal"in n&&n.profitTotal!=null&&(this.profitTotal=n.profitTotal),"profitToday"in n&&n.profitToday!=null&&(this.profitToday=n.profitToday),"total"in n&&n.total!=null&&(this.total=n.total),this.profits=n.profits)}get profitTotal(){return c.Message.getFieldWithDefault(this,1,0)}set profitTotal(n){c.Message.setField(this,1,n)}get has_profitTotal(){return c.Message.getField(this,1)!=null}get profitToday(){return c.Message.getFieldWithDefault(this,2,0)}set profitToday(n){c.Message.setField(this,2,n)}get has_profitToday(){return c.Message.getField(this,2)!=null}get total(){return c.Message.getFieldWithDefault(this,3,0)}set total(n){c.Message.setField(this,3,n)}get has_total(){return c.Message.getField(this,3)!=null}get profits(){return c.Message.getFieldWithDefault(this,4,[])}set profits(n){c.Message.setField(this,4,n)}static fromObject(n){let o=new bu({profits:n.profits});return n.profitTotal!=null&&(o.profitTotal=n.profitTotal),n.profitToday!=null&&(o.profitToday=n.profitToday),n.total!=null&&(o.total=n.total),o}toObject(){let n={profits:this.profits};return this.profitTotal!=null&&(n.profitTotal=this.profitTotal),this.profitToday!=null&&(n.profitToday=this.profitToday),this.total!=null&&(n.total=this.total),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_profitTotal&&o.writeDouble(1,this.profitTotal),this.has_profitToday&&o.writeDouble(2,this.profitToday),this.has_total&&o.writeInt32(3,this.total),this.profits.length&&o.writeRepeatedString(4,this.profits),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new bu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.profitTotal=o.readDouble();break;case 2:d.profitToday=o.readDouble();break;case 3:d.total=o.readInt32();break;case 4:c.Message.addToRepeatedField(d,4,o.readString());break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return bu.deserialize(n)}};Wh=new WeakMap;let rk=bu;cm.SC_REQUEST_PROFIT=bu;let yu=class yu extends c.Message{constructor(n){super();ce(this,Kh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Kh)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize)}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}static fromObject(n){return new yu({pageNo:n.pageNo,pageSize:n.pageSize})}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_pageNo&&o.writeInt32(1,this.pageNo),this.has_pageSize&&o.writeInt32(2,this.pageSize),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new yu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.pageNo=o.readInt32();break;case 2:d.pageSize=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return yu.deserialize(n)}};Kh=new WeakMap;let nk=yu;cm.CS_TOKEN_CHANGE_RECORD=yu;let _u=class _u extends c.Message{constructor(n){super();ce(this,$h,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,$h)),!Array.isArray(n)&&typeof n=="object"&&(this.records=n.records,"total"in n&&n.total!=null&&(this.total=n.total))}get records(){return c.Message.getFieldWithDefault(this,1,[])}set records(n){c.Message.setField(this,1,n)}get total(){return c.Message.getFieldWithDefault(this,2,0)}set total(n){c.Message.setField(this,2,n)}get has_total(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new _u({records:n.records});return n.total!=null&&(o.total=n.total),o}toObject(){let n={records:this.records};return this.total!=null&&(n.total=this.total),n}serialize(n){let o=n||new c.BinaryWriter;if(this.records.length&&o.writeRepeatedString(1,this.records),this.has_total&&o.writeInt32(2,this.total),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new _u;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;case 2:d.total=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return _u.deserialize(n)}};$h=new WeakMap;let sk=_u;cm.SC_TOKEN_CHANGE_RECORD=_u;let xu=class xu extends c.Message{constructor(n){super();ce(this,Yh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Yh)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize,this.clubIb=n.clubIb)}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}get clubIb(){return c.Message.getField(this,3)}set clubIb(n){c.Message.setField(this,3,n)}get has_clubIb(){return c.Message.getField(this,3)!=null}static fromObject(n){return new xu({pageNo:n.pageNo,pageSize:n.pageSize,clubIb:n.clubIb})}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),this.clubIb!=null&&(n.clubIb=this.clubIb),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_pageNo&&o.writeInt32(1,this.pageNo),this.has_pageSize&&o.writeInt32(2,this.pageSize),this.has_clubIb&&o.writeInt64(3,this.clubIb),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new xu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.pageNo=o.readInt32();break;case 2:d.pageSize=o.readInt32();break;case 3:d.clubIb=o.readInt64();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return xu.deserialize(n)}};Yh=new WeakMap;let ak=xu;cm.CS_CLUB_MEMBER=xu;let vu=class vu extends c.Message{constructor(n){super();ce(this,qh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,qh)),!Array.isArray(n)&&typeof n=="object"&&(this.members=n.members,"total"in n&&n.total!=null&&(this.total=n.total))}get members(){return c.Message.getFieldWithDefault(this,1,[])}set members(n){c.Message.setField(this,1,n)}get total(){return c.Message.getFieldWithDefault(this,2,0)}set total(n){c.Message.setField(this,2,n)}get has_total(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new vu({members:n.members});return n.total!=null&&(o.total=n.total),o}toObject(){let n={members:this.members};return this.total!=null&&(n.total=this.total),n}serialize(n){let o=n||new c.BinaryWriter;if(this.members.length&&o.writeRepeatedString(1,this.members),this.has_total&&o.writeInt32(2,this.total),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new vu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;case 2:d.total=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return vu.deserialize(n)}};qh=new WeakMap;let ok=vu;cm.SC_CLUB_MEMBER=vu;let Iu=class Iu extends c.Message{constructor(n){super();ce(this,Qh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Qh)),!Array.isArray(n)&&typeof n=="object"&&("profitRatio"in n&&n.profitRatio!=null&&(this.profitRatio=n.profitRatio),"inviteCount"in n&&n.inviteCount!=null&&(this.inviteCount=n.inviteCount))}get profitRatio(){return c.Message.getFieldWithDefault(this,1,0)}set profitRatio(n){c.Message.setField(this,1,n)}get has_profitRatio(){return c.Message.getField(this,1)!=null}get inviteCount(){return c.Message.getFieldWithDefault(this,2,0)}set inviteCount(n){c.Message.setField(this,2,n)}get has_inviteCount(){return c.Message.getField(this,2)!=null}static fromObject(n){let o=new Iu({});return n.profitRatio!=null&&(o.profitRatio=n.profitRatio),n.inviteCount!=null&&(o.inviteCount=n.inviteCount),o}toObject(){let n={};return this.profitRatio!=null&&(n.profitRatio=this.profitRatio),this.inviteCount!=null&&(n.inviteCount=this.inviteCount),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_profitRatio&&o.writeFloat(1,this.profitRatio),this.has_inviteCount&&o.writeInt32(2,this.inviteCount),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Iu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.profitRatio=o.readFloat();break;case 2:d.inviteCount=o.readInt32();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Iu.deserialize(n)}};Qh=new WeakMap;let lk=Iu;cm.SC_MY_PROFIT=Iu;let ku=class ku extends c.Message{constructor(n){super();ce(this,Zh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Zh)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize,"childAddress"in n&&n.childAddress!=null&&(this.childAddress=n.childAddress))}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}get childAddress(){return c.Message.getFieldWithDefault(this,3,"")}set childAddress(n){c.Message.setField(this,3,n)}get has_childAddress(){return c.Message.getField(this,3)!=null}static fromObject(n){let o=new ku({pageNo:n.pageNo,pageSize:n.pageSize});return n.childAddress!=null&&(o.childAddress=n.childAddress),o}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),this.childAddress!=null&&(n.childAddress=this.childAddress),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_pageNo&&o.writeInt32(1,this.pageNo),this.has_pageSize&&o.writeInt32(2,this.pageSize),this.has_childAddress&&this.childAddress.length&&o.writeString(3,this.childAddress),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ku;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.pageNo=o.readInt32();break;case 2:d.pageSize=o.readInt32();break;case 3:d.childAddress=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ku.deserialize(n)}};Zh=new WeakMap;let ck=ku;cm.CS_REQUEST_PROFIT_LIST=ku;let Su=class Su extends c.Message{constructor(n){super();ce(this,Xh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],le(this,Xh)),!Array.isArray(n)&&typeof n=="object"&&(this.community=n.community)}get community(){return c.Message.getFieldWithDefault(this,1,[])}set community(n){c.Message.setField(this,1,n)}static fromObject(n){return new Su({community:n.community})}toObject(){return{community:this.community}}serialize(n){let o=n||new c.BinaryWriter;if(this.community.length&&o.writeRepeatedString(1,this.community),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Su;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,o.readString());break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Su.deserialize(n)}};Xh=new WeakMap;let uk=Su;cm.SC_REQUEST_PROFIT_LIST=Su;let wu=class wu extends c.Message{constructor(n){super();ce(this,Jh,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,Jh)),!Array.isArray(n)&&typeof n=="object"&&(this.address=n.address)}get address(){return c.Message.getField(this,1)}set address(n){c.Message.setField(this,1,n)}get has_address(){return c.Message.getField(this,1)!=null}static fromObject(n){return new wu({address:n.address})}toObject(){let n={};return this.address!=null&&(n.address=this.address),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_address&&this.address.length&&o.writeString(1,this.address),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new wu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.address=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return wu.deserialize(n)}};Jh=new WeakMap;let pk=wu;cm.CS_REQUEST_HALL_ADDR=wu;let Eu=class Eu extends c.Message{constructor(n){super();ce(this,ed,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,ed)),!Array.isArray(n)&&typeof n=="object"&&(this.hallAddr=n.hallAddr)}get hallAddr(){return c.Message.getField(this,1)}set hallAddr(n){c.Message.setField(this,1,n)}get has_hallAddr(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Eu({hallAddr:n.hallAddr})}toObject(){let n={};return this.hallAddr!=null&&(n.hallAddr=this.hallAddr),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_hallAddr&&this.hallAddr.length&&o.writeString(1,this.hallAddr),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Eu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.hallAddr=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Eu.deserialize(n)}};ed=new WeakMap;let mk=Eu;cm.SC_REQUEST_HALL_ADDR=Eu;let Lu=class Lu extends c.Message{constructor(n){super();ce(this,td,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],le(this,td)),!Array.isArray(n)&&typeof n=="object"&&(this.roomNo=n.roomNo)}get roomNo(){return c.Message.getField(this,1)}set roomNo(n){c.Message.setField(this,1,n)}get has_roomNo(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Lu({roomNo:n.roomNo})}toObject(){let n={};return this.roomNo!=null&&(n.roomNo=this.roomNo),n}serialize(n){let o=n||new c.BinaryWriter;if(this.has_roomNo&&this.roomNo.length&&o.writeString(1,this.roomNo),!n)return o.getResultBuffer()}static deserialize(n){let o=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Lu;for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:d.roomNo=o.readString();break;default:o.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Lu.deserialize(n)}};td=new WeakMap;let hk=Lu;cm.CS_DELETE_CLUB_ROOM=Lu})(t=r.socket||(r.socket={}))})(i=e.snake||(e.snake={}))})(y||(y={}));var bn=class{constructor(){}};bn.MONTH="months",bn.DAYS="days",bn.HOURS="hours",bn.MINUTES="minutes",bn.SECOUNDS="seconds",bn.MS="ms";var Gt=class Gt{constructor(){}static formatMM(e){if(e<=0)return"00:000";let t,r;t=e/1e3,r=e%1e3;let s="";return t<=9&&(s+="0"),s+=Math.floor(t),s+=":",r<=9?s+="00":r<=99&&(s+="0"),s+=r,s}static format(e,t=":",r=!0){if(e<=0)return r?"00:00:00":"00:00";let s,a,l,u,m;u=e/3600,l=e%3600,m=l/60,s=l%60;let p="";return r&&(u<=9&&(p+="0"),p+=Math.floor(u)+t),m<=9&&(p+="0"),p+=Math.floor(m)+t,Math.ceil(s)<=9&&(p+="0"),p+=Math.ceil(s),p}static formatWithDay(e,t=":",r=!1){if(e<=0)return"00:00";let s,a,l,u,m;a=e/86400,l=e%86400,u=l/3600,l=l%3600,m=l/60,s=l%60;let p="";return a>=1?(p=D.getLanguage(16,Math.floor(a))+" ",u<=9&&(p+="0"),r&&s%2!=0&&(t=ee.getColorText(t,"#412b20")),p+=Math.floor(u)+t,m<=9&&(p+="0"),p+=Math.floor(m)):(u<=9&&(p+="0"),p=Math.floor(u)+t,m<=9&&(p+="0"),p+=Math.floor(m)+t,Math.ceil(s)<=9&&(p+="0"),p+=Math.ceil(s)),p}static formatWithSecondByMs(e){return`${e/1e3}`}static getTimeByMs(e){let t=new Date(e);return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()}static formatWithDayByMs(e,t=":",r=!1){if(e<=0)return"00:00";let s,a,l,u,m,p;l=e/864e5,u=e%864e5,m=u/36e5,u=u%36e5,p=u/6e4,u=u%6e4,a=u/1e3,s=u%1e3;let h="";return l>=1&&(h=D.getLanguage(16,Math.floor(l))+" "),m<=9&&(h+="0"),h+=Math.floor(m)+t,p<=9&&(h+="0"),h+=Math.floor(p)+t,Math.ceil(a)<=9&&(h+="0"),h+=Math.floor(a)+" ",h+=Math.ceil(s),h}static getTimeArray(e,t="HH-MM-SS"){if(e=Math.max(0,e),t.indexOf("-")==-1)return[];let r=[],s=t.split("-");for(let a of s)a=="DD"?r.push(Math.floor(e/Gt.OneDaySceond)):a=="HH"?r.push(Math.floor(e%Gt.OneDaySceond/Gt.OneHourSceond)):a=="MM"?r.push(Math.floor(e%Gt.OneHourSceond/Gt.OneMiniuteSecond)):a=="SS"&&r.push(e%Gt.OneMiniuteSecond);return r}static getServerDate(e){return new Date(e)}static formatTimeStamp(e,t="YY-MT-DD HH:MM:SS",r=!1){let s=Gt.getServerDate(e),a="";if(t.indexOf("YY")>=0&&(a=(r?s.getUTCFullYear():s.getFullYear())+"",t=t.replace("YY",a)),t.indexOf("MT")>=0){let l=(r?s.getUTCMonth():s.getMonth())+1;l>9?a=l+"":a="0"+l,t=t.replace("MT",a)}if(t.indexOf("DD")>=0){let l=r?s.getUTCDate():s.getDate();l>9?a=l+"":a="0"+l,t=t.replace("DD",a)}if(t.indexOf("HH")>=0){let l=r?s.getUTCHours():s.getHours();l>9?a=l+"":a="0"+l,t=t.replace("HH",a)}if(t.indexOf("MM")>=0){let l=r?s.getUTCMinutes():s.getMinutes();l>9?a=l+"":a="0"+l,t=t.replace("MM",a)}if(t.indexOf("SS")>=0){let l=r?s.getUTCSeconds():s.getSeconds();l>9?a=l+"":a="0"+l,t=t.replace("SS",a)}return t}static formatTimeStamps(e,t="YY-MT-DD HH:MM:SS"){let r=Gt.getServerDate(e),s=t;return s=Gt.parseTimeDetail(r,s,"YY",!1),s=Gt.parseTimeDetail(r,s,"MT",!1),s=Gt.parseTimeDetail(r,s,"DD",!1),s=Gt.parseTimeDetail(r,s,"HH",!0),s=Gt.parseTimeDetail(r,s,"MM",!0),s=Gt.parseTimeDetail(r,s,"SS",!0),s}static parseTimeDetail(e,t,r,s){if(t.indexOf(r)>=0){let a,l;r=="YY"?l=e.getFullYear():r=="MT"?l=e.getMonth()+1:r=="DD"?l=e.getDate():r=="HH"?l=e.getHours():r=="MM"?l=e.getMinutes():r=="SS"&&(l=e.getSeconds()),l>9||!s?a=l.toString():a="0"+l,t=t.replace(r,a)}return t}static getServerTimeStr(){return Gt.formatTimeStamp(Laya.timer.currTimer)}static getTimeArr(){return Gt.getServerTimeStr().split("/")}static get getDay(){let t=Gt.getServerTimeStr().split("/");return parseInt(t[2])}static parseSheetTime(e){let t="";if(e){let r=e.length;for(let s=0;s<r;s++){let a="";e[s]<10?a="0"+e[s]:a=e[s],s!==r-1&&(a=a+":"),t+=a}}return t}static dateStringToTimestamp(e,t){let[r,s,a]=e.split("-").map(Number),l=Number(t),u=new Date(r,s-1,a,l).getTime();return Number(u)}static getTimestamp(e,t,r,s,a){return new Date(e,t-1,r,s,a).getTime()}static getCurrentDayTimestamp(){let e=new Date,t=e.getHours();return e.setHours(t,0,0,0),e.getTime()}static getYearMonthDat(e,t="-"){let r=new Date(e),s=r.getFullYear(),a=r.getMonth()+1<10?"0"+(r.getMonth()+1):""+(r.getMonth()+1),l=r.getDate()<10?"0"+r.getDate():""+r.getDate();return`${s}${t}${a}${t}${l}`}static formatDayAndTime(e,t="-"){let r=new Date(e),s=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0"),u=String(r.getHours()).padStart(2,"0"),m=String(r.getMinutes()).padStart(2,"0");return{date:`${s}${t}${a}${t}${l}`,time:`${u}:${m}`}}static formatTimeExpires(e){return e<60*1e3?D.getLanguage(1214,e):e<60*60*1e3?D.getLanguage(1215,Math.floor(e/6e4)):e<24*60*60*1e3?D.getLanguage(1216,Math.floor(e/36e5)):D.getLanguage(1217,Math.floor(e/(24*60*60*1e3)))}static getTimeDifference(e,t=bn.MONTH){let r=new Date,a=new Date(e*1e3).getTime()-r.getTime();if(a<0)return{months:0,days:0,hours:0,minutes:0,seconds:0,ms:0};let l=a,u=Math.floor(a/1e3),m=Math.floor(u/60),p=Math.floor(m/60),h=Math.floor(p/24),f=Math.floor(h/30);return t==="months"?(h%=30,p%=24,m%=60,u%=60,l%=1e3):t==="days"?(p%=24,m%=60,u%=60,l%=1e3,f=0):t==="hours"?(m%=60,u%=60,l%=1e3,f=0,h=0):t==="minutes"?(u%=60,l%=1e3,f=0,h=0,p=0):t==="seconds"?(l%=1e3,f=0,h=0,p=0,m=0):t==="ms"&&(f=0,h=0,p=0,m=0,u=0),{months:t==="months"?f:0,days:t==="months"||t==="days"?h:0,hours:t==="months"||t==="days"||t==="hours"?p:0,minutes:t==="months"||t==="days"||t==="hours"||t==="minutes"?m:0,seconds:t!=="ms"?u:0,ms:l}}static checkTimeValid(e){let t=Math.floor(Date.now()/1e3),r=24*60*60;return!(t-e>r)}static formatTimeAgoFromTimestamp(e){let r=new Date().getTime()-e,s=Math.floor(r/(60*1e3)),a="";if(s<60)a=D.getLanguage(17,s);else if(s<24*60){let l=Math.floor(s/60);a=D.getLanguage(15,l)}else{let l=Math.floor(s/1440);a=D.getLanguage(16,l)}return D.getLanguage(18,a)}static formatTimeAgo(e){if(e<60*1e3)return D.getLanguage(40);if(e<60*60*1e3){var t=D.getLanguage(17,Math.floor(e/6e4));return D.getLanguage(18,t)}else if(e<24*60*60*1e3){var t=D.getLanguage(15,Math.floor(e/36e5));return D.getLanguage(18,t)}else{var t=D.getLanguage(16,Math.floor(e/864e5));return D.getLanguage(18,t)}}static formatDateDDMMYYYY(e,t="/"){let r=new Date(e),s=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),l=r.getFullYear();return`${s}${t}${a}${t}${l}`}static getRestTime(e){let t=Math.floor(Date.now()/1e3),r=e-t;if(r<=0)return"00:00:00";let s=Math.floor(r/3600);r%=3600;let a=Math.floor(r/60),l=r%60,u=s<10?`0${s}`:`${s}`,m=a<10?`0${a}`:`${a}`,p=l<10?`0${l}`:`${l}`;return`${u}:${m}:${p}`}};Gt.OneDaySceond=24*3600,Gt.OneHourSceond=3600,Gt.OneMiniuteSecond=60;var ht=Gt;var Rv=class i{constructor(){this._isLoading=!1}static getInstance(){return i._instance||(i._instance=new i),i._instance}get isLoading(){return this._isLoading}init(){if(!this.txtLoadingView){var e=Laya.loader.getRes("scenes/notice/TxtLoadingView.lh");this.txtLoadingView=e.create()}}showLoading(e=!1){if(console.log("showLoading..."+e),this.txtLoadingView)e?(this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this._isLoading=!1):(this._isLoading=!0,this.showMaskLoading(),Laya.timer.once(3e3,this,this.showLazyLoading)),this.txtLoadingView.m_txtLabel&&(this.txtLoadingView.m_txtLabel.visible=!1);else return}showLoadingByInfo(e=""){console.log("showLoadingByInfo..."+e),this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this.txtLoadingView.zOrder=1000001,this.txtLoadingView.m_txtLabel.text=e,this.txtLoadingView.m_txtLabel.visible=!0}showMaskLoading(){this._isLoading&&(this.txtLoadingView.backLayer.name="backLayer",this.txtLoadingView.backLayer.mouseEnabled=!0,this.txtLoadingView.backLayer.mouseThrough=!1,this.txtLoadingView.backLayer.visible=!0)}showLazyLoading(){this._isLoading&&(console.log("showLazyLoading..."),this.txtLoadingView.visible=!0,this.txtLoadingView.zOrder=1000001,Laya.stage.addChild(this.txtLoadingView),this.txtLoadingView.x=(Laya.stage.width-this.txtLoadingView.width)/2,this.txtLoadingView.y=(Laya.stage.height-this.txtLoadingView.height)/2),Laya.timer.clear(this,this.showLazyLoading)}hideLoading(){if(console.log("hideLoading..."),this._isLoading=!1,this.txtLoadingView)this.txtLoadingView.removeSelf();else return}dispose(){this.txtLoadingView&&(this.txtLoadingView.destroy(),this.txtLoadingView.removeSelf(),this.txtLoadingView=null),this.txtLoadingView.backLayer&&(this.txtLoadingView.backLayer.destroy(),this.txtLoadingView.backLayer.removeSelf(),this.txtLoadingView.backLayer=null)}},lt=Rv.getInstance();var Bv=class i{constructor(){this.account_contract=null;this.tokenId=0}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){typeof window.ethereum>"u"}async getAccountVoFromServer(){let e=await Vt.requestPost("cybertron-sys-api/api/v1/account/find",{address:He.walletAddress},!1,!1);if(e){let t=new es;return Object.assign(t,e),console.log("info========"+JSON.stringify(t)),t}return e}async updateProfile(e,t,r){var s=G.playerDto.sex,a=G.playerDto;let l=await Vt.requestPost("wxgame/player/changeInfo",{name:e,sex:s,icon:t,country:r});return l?(a.icon=l.icon,a.country=l.country,a.createTime=l.createTime,a.name=l.name,a.sex=l.sex,a.snakeId=l.snakeId,a.skinId=l.skinId,a.maxKill=l.maxKill,a.maxAlive=l.maxAlive,a.score=l.score,a.lv=l.lv,a.club=l.club,a):null}async getTokenId(){return this.tokenId?this.tokenId:(this.tokenId=await this.account_contract.methods.tokenOfOwnerByIndex(He.walletAddress,0).call(),this.tokenId=parseInt(this.tokenId+""),this.tokenId)}},Qb=Bv.getInstance();var Dv=class i{constructor(){this.loginRequestInfo={time:0,randomHex:"",r:"",s:"",v:"",roleId:""}}get getloginRequestInfo(){return this.loginRequestInfo}static getInstance(){return i._instance||(i._instance=new i),i._instance}async init(){if(typeof window.ethereum>"u"){console.log(D.getLanguage(26)),J.Debug==0&&Ce.notice(D.getLanguage(26));return}if(J.Debug==2)return;Xe.sendCustumEvent(10),this.walletClient=gl({transport:nl(window.ethereum)});var e,t=await i._instance.walletClient.getChainId();e=this.getChain(t),e||(e=_p),this.publicClient=bp({chain:e,transport:lp()}),this.walletClient=gl({chain:e,transport:nl(window.ethereum)});let r=await i._instance.publicClient.getChainId();console.log("clientChainId",t,r),Xe.sendCustumEvent(12),this.registerProxy(),Xe.sendCustumEvent(17)}async registerProxy(){Qb.init()}async getWalletAddress(){if(this.walletAddress)return this.walletAddress;let[e]=await this.walletClient.requestAddresses();return e}async dappLogin(){console.log("dappLogin this.walletAddress: "+this.walletAddress),Xe.sendCustumEvent(13),this.walletAddress=await this.getWalletAddress(),Xe.sendCustumEvent(14),await this.signAndLogin()}async signAndLogin(e=!1){var t=!0;let r=new Date().getTime(),s="",a="",l="",u="";if(J.Debug!=0)t=!1;else{let h=localStorage.getItem("TOX-COOKIE-CODE"+i._instance.walletAddress);if(!e&&h){h=Zr.decode(h);let f=h.split("&");r=parseFloat(f[0]),s=f[1],a=f[2],l=f[3],u=f[4];let g=ht.checkTimeValid(r);h&&r&&g&&s&&a&&l&&u&&(t=!1),console.log("needSign: "+t)}}if(t){console.log("111");var m=yp().substring(0,32);s=De(m,{size:32}),r=new Date().getTime();let f=this.walletAddress+s+r,g=new Zb.default("SHA-256","TEXT",{encoding:"UTF8"});g.update(f);let b=g.getHash("HEX");if(console.log("进入签名",1),this.walletClient)try{let _=await this.walletClient.signMessage({account:this.walletAddress,message:b});console.log("签名结束",1);let I=_.substring(2);a="0x"+I.substring(0,64),l="0x"+I.substring(64,128),u="0x"+I.substring(128,130)}catch{Ce.notice(D.getLanguage(62)),Laya.timer.once(1e3,this,this.signAndLogin,[e]);return}}this.loginRequestInfo.time=r,this.loginRequestInfo.randomHex=s,this.loginRequestInfo.r=a,this.loginRequestInfo.s=l,this.loginRequestInfo.v=u,this.loginRequestInfo.roleId=this.walletAddress,Xe.sendCustumEvent(15);var p=Zr.encode(r+"&"+s+"&"+a+"&"+l+"&"+u);localStorage.setItem("TOX-COOKIE-CODE"+i._instance.walletAddress,p),ge.connect()}async main(){let e=bp({chain:bl,transport:lp()}),t=gl({chain:bl,transport:nl(window.ethereum)}),[r]=await t.requestAddresses(),s=await t.signMessage({account:r,message:"Hello world!"}),a=await e.verifyMessage({address:r,message:"Hello world!",signature:s});console.log("valid: "+a);let l=await fetch("http://localhost:3000/api/login",{method:"POST",body:JSON.stringify({address:t.account.address,signature:s})})}async refreshToken(){let e,t=localStorage.getItem("TOX-COOKIE-CODE"+i._instance.walletAddress);t=Zr.decode(t);let r=t.split("&"),s=parseFloat(r[0]),a=r[1],l=r[2],u=r[3],m=r[4];if(s&&a&&l&&u&&m){let p={debug:J.Debug,address:this.walletAddress,time:s,randomHex:a,r:l,s:u,v:m};e=await Vt.requestPost("wxgame/player/getJwt",p,!1,!1).catch(h=>{}),e&&localStorage.setItem("TOX-COOKIE"+i._instance.walletAddress,e.loginToken)}return e}async checkNickName(e){let t={name:e,address:this.walletAddress};return await Vt.requestPost("wxgame/player/nameCheck",t,!1,!1).catch(s=>{lt.hideLoading(),console.log("checkResult 失败")})}waitGetAccount(){Laya.timer.loop(2e3,this,this.getAcccount)}async getAcccount(){console.log("getAcccount");var e=!0;let t=new Date().getTime(),r="",s="",a="",l="";if(J.Debug!=0)e=!1;else{let h=localStorage.getItem("TOX-COOKIE-CODE"+i._instance.walletAddress);h=Zr.decode(h);let f=h.split("&");t=parseFloat(f[0]),r=f[1],s=f[2],a=f[3],l=f[4],t&&r&&s&&a&&l&&(e=!1),console.log("needSign: "+e)}if(e){var u=yp().substring(0,32);r=De(u,{size:32}),t=new Date().getTime();let f=this.walletAddress+r+t,g=new Zb.default("SHA-256","TEXT",{encoding:"UTF8"});g.update(f);let b=g.getHash("HEX");console.log("进入签名",1);let _=await this.walletClient.signMessage({account:this.walletAddress,message:b});console.log("签名结束",1);let I=_.substring(2);s="0x"+I.substring(0,64),a="0x"+I.substring(64,128),l="0x"+I.substring(128,130)}let m,p={address:this.walletAddress,time:t,randomHex:r,r:s,s:a,v:l};if(m=await Vt.requestPost("wxgame/player/getAccount",p,!1,!1).catch(h=>{}),m){Laya.timer.clear(this,this.getAcccount);let h=m.playerDto;localStorage.setItem("TOX-COOKIE"+i._instance.walletAddress,m.loginToken),v.event(k.EVENT_WAIT_PLAYERINFO,h)}}async createAcccount(e,t,r,s,a){console.log("createAcccount");var l=!0;let u=new Date().getTime(),m="",p="",h="",f="";if(J.Debug!=0)l=!1;else{let I=localStorage.getItem("TOX-COOKIE-CODE"+i._instance.walletAddress);I=Zr.decode(I);let x=I.split("&");u=parseFloat(x[0]),m=x[1],p=x[2],h=x[3],f=x[4],u&&m&&p&&h&&f&&(l=!1)}if(l){var g=yp().substring(0,32);m=De(g,{size:32}),u=new Date().getTime();let x=this.walletAddress+m+u,L=new Zb.default("SHA-256","TEXT",{encoding:"UTF8"});L.update(x);let E=L.getHash("HEX");if(console.log("进入签名",1),this.walletClient){let T=await this.walletClient.signMessage({account:this.walletAddress,message:E});console.log("签名结束",1);let R=T.substring(2);p="0x"+R.substring(0,64),h="0x"+R.substring(64,128),f="0x"+R.substring(128,130)}}var b=y.snake.socket.MessageType.MSG_USER_REGISTER,_=y.snake.socket.CS_USER_REGISTER.fromObject({icon:r,userName:e,country:s,walletAddr:this.walletAddress,invite:a,time:this.loginRequestInfo.time,randomHex:this.loginRequestInfo.randomHex,r:this.loginRequestInfo.r,s:this.loginRequestInfo.s,v:this.loginRequestInfo.v});return ge.send(b,_),null}async newAllowanceAddress(e,t){let r=i._instance.walletAddress,s=e;try{if(console.log("查看是否已经授权, owner:"+r+", spender:"+s+", publicClient.chain.id:"+this.publicClient.chain.id),t==0)return!0;let a=await i._instance.publicClient.readContract({address:t,abi:qt.TOKEN_ERC20ABI,functionName:"allowance",args:[r,s]});if(a=="0"){console.log("未授权，进行授权, owner:"+r+", allowance:"+a+", walletClient.chain.id:"+this.walletClient.chain.id);let l=await i._instance.walletClient.writeContract({address:t,abi:qt.TOKEN_ERC20ABI,functionName:"approve",args:[s,"100000000000000000000000000000000000000000000000"],account:r});console.log("授权hash============"+l);let u=await i._instance.publicClient.waitForTransactionReceipt({hash:l});return console.log(`Tx with hash: ${l}`,u),u&&u.status=="success"?(console.log(`Tx successful with hash: ${l}`),!0):!1}else return console.log("已授权, owner:"+r+", allowance:"+a),!0}catch(a){if(console.log("授权错误====》",a),a instanceof Error){let l=a.message;console.log("授权错误====》",l)}}}async allowanceAddressByTokenAddress(e,t){let r=new window.web3.eth.Contract(qt.TOKEN_ERC20ABI,t);return await r.methods.allowance(this.walletAddress,e).call()=="0"&&(console.log("ERC20 allowance!"),await r.methods.approve(e,"100000000000000000000000000000000000000000000000").send({from:this.walletAddress},(a,l)=>{if(a)return lt.hideLoading(),!1})),!0}async getERC20TokenBalance(e){return window.ethereum,await new window.web3.eth.Contract(qt.TOKEN_ERC20ABI,e).methods.balanceOf(this.walletAddress).call()}async getBalance2(e,t=void 0){let r=this.walletAddress;t&&(r=t);let s;return!e||e==qt.ADDRESS0?s=await i._instance.publicClient.getBalance({address:r}):s=await this.publicClient.readContract({address:e,abi:qt.TOKEN_ERC20ABI,functionName:"balanceOf",args:[r]}),console.log("getBalance2 publicClient.chain.id:"+this.publicClient.chain.id,"代币地址",e,"余额：",s),s}async getBankBalance(e,t,r){if(r=="WBNB"){let s=await i._instance.publicClient.getBalance({address:t});if(s)return s}else{let s=this.getBalance2(e,t);if(s)return s}}async switchChain(e){var t=this.getChainName(e);let r=await i._instance.walletClient.getChainId();if(J.isInto&&Laya.Browser.onIOS&&r!==e)return Ce.notice(D.getLanguage(37,t)),!1;try{console.log("switchChain id:"+e),await this.walletClient.switchChain({id:e})}catch(s){if(console.log(s),s instanceof Error){let a=s.message;console.log("切换错误====》",a)}return Ce.notice(D.getLanguage(37,t)),!1}return await this.resetPublicAndWallet(e),!0}async addChain(e){console.log(e);var t=this.getChain(e);return await this.walletClient.addChain({chain:t})}getChain(e){var t=null;switch(e){case _p.id:t=_p;break;case Tb.id:t=Tb;break;case bl.id:t=bl;break;case Fb.id:t=Fb;break;case Pb.id:t=Pb;break;case Ab.id:t=Ab;break;case Cb.id:t=Cb;break;case Db.id:t=Db;break;case Ob.id:t=Ob;break;case Mb.id:t=Mb;break;case Rb.id:t=Rb;break}return t}getChainName(e){var t="",r=this.getChain(e);return r&&(t=r.name),t}async resetPublicAndWallet(e){console.log("resetPublicAndWallet chain:"+e);var t=this.getChain(e);await i._instance.reInitPublicClient(t),await i._instance.reInitWalletClient(t)}reInitPublicClient(e){console.log("reInitPublicClient chain:"+e),this.publicClient=bp({chain:e,transport:lp()})}reInitWalletClient(e){console.log("reInitWalletClient chain:"+e),this.walletClient=gl({chain:e,transport:nl(window.ethereum)})}async getAuthStatus(){let e=i._instance.walletAddress;try{return await i._instance.publicClient.readContract({address:qt.SAT_ADDRESS,abi:qt.SAT_ABI,functionName:"getAuthStatus",args:[e]})}catch(t){if(console.log("授权错误====》",t),t instanceof Error){let r=t.message;console.log("授权错误====》",r)}}}},He=Dv.getInstance();var RT=Laya.HttpRequest,Ai=class Ai{static requestGet(e,t,r=!1){return new Promise((s,a)=>{var l=Laya.Pool.getItem("HttpRequest");l||(l=new RT),l.http.timeout=2e3,l.on(Laya.Event.COMPLETE,null,f),l.on(Laya.Event.ERROR,null,g),l.http.onreadystatechange=()=>{if(l.http.readyState===XMLHttpRequest.DONE){var _=l.http.status;_>=200&&_<400||(a(),b())}};let u=localStorage.getItem("TOX-COOKIE"+He.walletAddress),m=["Content-Type","application/json"];u&&(m=[...m,"Authorization",u]);let p;e.startsWith("http")?p=e+h(t):p=Ai.httpRoot+"/"+e+h(t),Ai.httpRoot!="https://api.phantomarena.co"&&console.log("REQUEST_GET "+p,1),l.send(p,null,"get","json",m);function h(_){if(typeof _=="string")return _;let I="";for(let x in _)I+="&"+x+"="+_[x];return I}function f(_){r?_.code==="0"?s(_.data):(ci.showErrorWord(parseInt(_.code)),a(_.code)):s(_),b()}function g(_,I){a(_),b()}function b(){l.off(Laya.Event.COMPLETE,null,f),l.off(Laya.Event.ERROR,null,g),Laya.Pool.recover("HttpRequest",l)}})}static startHeart(){Laya.stage.on(Laya.Event.BLUR,this,()=>{this.stopHeartInStage=!0,console.log("失去焦点, 停止心跳")}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.stopHeartInStage=!1,console.log("获取焦点, 开始心跳")}),Laya.timer.loop(3e3,this,this.onHeart)}static async onHeart(){console.log("onHeart")}static requestPost(e,t,r=!1,s=!0,a=!1){let l=localStorage.getItem("TOX-COOKIE"+He.walletAddress);return r&&!l?[]:new Promise((u,m)=>{var p=Laya.Pool.getItem("HttpRequest");p||(p=new RT),p.http.timeout=1e4,p.once(Laya.Event.COMPLETE,null,g),p.once(Laya.Event.ERROR,null,b);let h=[];l&&s&&(h=[...h,"Authorization",l]);var f=Ai.seq+1;Ai.seq=f,e=="wxgame/sys/ping"?J.showHeartLog&&console.log(ee.GetLogTime+" "+f+" >>> HTTP_POST "+Ai.httpRoot+"/"+e+" "+JSON.stringify(t),l):console.log(ee.GetLogTime+" "+f+" >>> HTTP_POST "+Ai.httpRoot+"/"+e+" "+JSON.stringify(t),l),e.startsWith("http")?p.send(e,t,"post","json",h):p.send(Ai.httpRoot+"/"+e,t,"post","json",h);async function g(I){if(e=="wxgame/sys/ping"?J.showHeartLog&&console.log(ee.GetLogTime+" "+f+" <<< hTTP_RCV data: "+JSON.stringify(I),1):console.log(ee.GetLogTime+" "+f+" <<< hTTP_RCV data: "+JSON.stringify(I),1),I.errorCode==0||I.errorCode==="0")u(I);else{if(I.errorCode===18)ee.titickNotEnought();else if(I.errorCode===26)ee.RemError();else if(I.errorCode!==29)if(I.errorCode===30)ee.alertYes(ci.get(I.errorCode));else if(I.errorCode===32)ee.alertYes(ci.get(I.errorCode));else if(I.errorCode===2||I.errorCode===21)ee.alertNoAll(ci.get(I.errorCode));else if(I.errorCode===5)if(J.Debug==0){localStorage.setItem("TOX-COOKIE"+He.walletAddress,"");var x=await He.refreshToken();x&&Ai.requestPost(e,t,r,s)}else localStorage.setItem("TOX-COOKIE"+He.walletAddress,""),ci.showErrorWord(parseInt(I.errorCode));else I.errorCode===17?J.Debug==0?(localStorage.setItem("TOX-COOKIE"+He.walletAddress,""),He.signAndLogin(),ci.showErrorWord(parseInt(I.errorCode))):(localStorage.setItem("TOX-COOKIE"+He.walletAddress,""),ci.showErrorWord(parseInt(I.errorCode))):I.errorCode===51?ee.commTipWithYes(ci.get(I.errorCode)):a||ci.showErrorWord(parseInt(I.errorCode),I.errorParams);m(I.errorCode)}_()}function b(I,x){console.log("errorHandler data: "+I,1),a||ci.showErrorWord(500),m(I),_()}function _(){p.off(Laya.Event.COMPLETE,null,g),p.off(Laya.Event.ERROR,null,b),Laya.Pool.recover("HttpRequest",p)}})}static async pingServer(e){return new Promise(t=>{if(!e){t(9999);return}e.startsWith("@")&&(e=e.substring(1));let r=e;r.includes("?")&&(r=r.split("?")[0]);let s=()=>{let l=Date.now(),u=!1,m=new XMLHttpRequest;m.onreadystatechange=function(){if(!u&&m.readyState>=1&&m.readyState<4){let p=Date.now()-l;p>0&&(u=!0,t(p))}},m.onload=function(){if(!u){let p=Date.now()-l;u=!0,t(p>0?p:1)}},m.onerror=function(p){if(!u){let h=Date.now()-l;u=!0,t(h>0?h:500)}},m.timeout=5e3,m.ontimeout=function(){u||(u=!0,t(5e3))};try{let p=Date.now(),h=Math.floor(Math.random()*1e4),f=`${r}?_t=${p}&r=${h}`;m.open("GET",f,!0),setTimeout(()=>{try{m.send()}catch{u||(u=!0,t(9999))}},10)}catch{u||(u=!0,t(9999))}setTimeout(()=>{u||(u=!0,t(9999))},5500)};(()=>{let l=Date.now(),u=!1,m=new Image;m.onload=function(){if(!u){let g=Date.now()-l;u=!0,t(g>0?g:1)}},m.onerror=function(){if(!u){let g=Date.now()-l;u=!0,g>0?t(g):s()}},setTimeout(()=>{u||(u=!0,s())},3e3);let p=Date.now(),h=Math.floor(Math.random()*1e4),f=`${r}?_t=${p}&r=${h}&type=image`;m.src=f})()})}};Ai.needHeart=!0,Ai.stopHeartInRoom=!1,Ai.stopHeartInStage=!1,Ai.lastPreContractstartRoomId=-1,Ai.lastPrecontractReadyRoomId=-1,Ai.seq=0;var Vt=Ai;var Ve=class Ve{static getColorText(e,t="#FFFF00"){return'<font color="'+t+'">'+e+"</font>"}static getChildByName(e,t,r="name"){if(e&&e.hasOwnProperty(r)&&e[r]==t)return e;let s=e;if(s){let a=s.numChildren,l;for(let u=0;u<a;++u)if(l=s.getChildAt(u),l instanceof Laya.Sprite&&(l=Ve.getChildByName(l,t,r)),l&&l.hasOwnProperty(r)&&l[r]==t)return l}return null}static getChildByAttri(e,t){if(e&&e.hasOwnProperty(t)&&e[t])return e[t];let r=e;if(r){let s=r.numChildren,a;for(let l=0;l<s;++l)if(a=r.getChildAt(l),a instanceof Laya.Sprite){if(a=Ve.getChildByAttri(a,t),a)return a}else if(a&&a.hasOwnProperty(t)&&a[t])return a[t]}return null}static logs(e,t=0,r=!0,s=16777215){if(e=Ve.GetLogTime+" "+e,r)switch(t){case 0:s=16777215;break;case 1:s=16777215;break;case 2:s=16711680;break;case 3:s=16777215;break;case 4:s=13434777;break;case 5:s=16742399;break}}static get GetLogTime(){let e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()}static get GRAY(){return Ve._GRAY||(Ve._GRAY=new Laya.ColorFilter([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])),Ve._GRAY}static get GRAY1(){if(!Ve._GRAY1){let e=[.3086,.16094,.082,0,0,.2086,.26094,.082,0,0,.1086,.36094,.082,0,0,0,0,0,1,0];Ve._GRAY1=new Laya.ColorFilter(e)}return Ve._GRAY1}static get GLOW(){return Ve._GLOW||(Ve._GLOW=new Laya.GlowFilter("#ffffff",12,0,0)),Ve._GLOW}static get YELLOWGLOW(){return Ve._YELLOWGLOW||(Ve._YELLOWGLOW=new Laya.GlowFilter("#ffff00",10,0,0)),Ve._YELLOWGLOW}static get BLUR(){if(!Ve._BLUR){let e=new Laya.BlurFilter;e.strength=5,Ve._BLUR=[e]}return Ve._BLUR}static get isParseWWhiteUser(){return Ve._isParseWWhiteUser}static get isWhiteName(){return J.isWhiteList}static itemListHandler(e,t){let r=e.dataSource,s=r[0],a=r[1],l=2,u=e.skin;u&&(u.indexOf("xinSmall")!=-1?l=1:u.indexOf("xinBig")!=-1&&(l=3));let m;l==1?m="common/common_clip/clip_xinSmall"+a+".png":l==3?m="common/common_clip/clip_xinBig"+a+".png":m="common/common_clip/clip_xinMiddle"+a+".png",e.skin=m,e.dataSource=s}static setStarList(e,t){e.renderHandler=new Laya.Handler(Ve,Ve.itemListHandler),e.dataSource=t}static get BLACK(){return Ve._BLACK||(Ve._BLACK=new Laya.ColorFilter,Ve._BLACK.setColor("#000000")),Ve._BLACK}static get YELLOW(){return Ve._YELLOW||(Ve._YELLOW=new Laya.ColorFilter,Ve._YELLOW.setColor("#ffe64b")),Ve._YELLOW}static get YELLOW1(){return Ve._YELLOW1||(Ve._YELLOW1=new Laya.ColorFilter,Ve._YELLOW1.setColor("#fee14e")),Ve._YELLOW1}static get RED1(){return Ve._RED1||(Ve._RED1=new Laya.ColorFilter,Ve._RED1.setColor("#ff4537")),Ve._RED1}static get BLUE(){return Ve._BLUE||(Ve._BLUE=new Laya.ColorFilter,Ve._BLUE.setColor("#2f72a7")),Ve._BLUE}static setColor(e="#13e2cf"){let t=new Laya.ColorFilter;return t.setColor(e),t}static heroNotEnought(e=1286){gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(e),Fe.YES,null)}static popTip(e){gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(e),Fe.YES,null)}static onGetHero(e=-1){ze.setCurrentScene(he.M_SCENE_SHOP,[1,e])}static popToMain(){var e="A network error occurred. Please check your connection and try again.";gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(e),Fe.YES,Laya.Handler.create(this,this.setToMainScene))}static setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}static isFightHero(e){return G.playerDto.fightHeroPk==e||e==G.playerDto.newFightHeroPk}static titickNotEnought(e=-1){var t=2,r=X.getSheetDataByMultiKey(X.m_dicShopMulDic,[t,e]);if(r)gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(1060),Fe.CANCEL,Laya.Handler.create(this,this.onGetTitck,[e]));else{var s=X.m_dicItems.get(e);s?Ce.notice(D.getLanguage(42,D.getLanguage(s.name))):ci.showErrorWord(18)}}static RemError(){gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(35),Fe.YES,null)}static alertYes(e){gi.AlertByType(Fe.BASEALERTVIEW,e,Fe.YES,null)}static TransactionErrorTip(){gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(41),Fe.YES,null)}static alertNoAll(e){gi.AlertByType(Fe.BASEALERTVIEW,e,Fe.NO_ALL)}static onGetTitck(e=-1){ze.setCurrentScene(he.M_SCENE_SHOP,[2,e])}static moneyNotEnought(e=Ze.TYPE_TOX){var t=X.m_dicItems.get(e),r=D.getLanguage(t.name);Ce.notice(D.getLanguage(36,r))}static onGetMoney(e){ze.setCurrentScene(he.M_SCENE_ASSET,[1,e])}static openSquidGame(){gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(6056),Fe.CANCEL,Laya.Handler.create(this,this.onOpenSquidGame))}static onOpenSquidGame(){window.location.href="https://squidgamefi.io/?invitationCode=2oi"}static onOpenSwapView(){window.open("https://swap.phantomarena.ai","_blank")}static otherLogin(){gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(32),Fe.YES,Laya.Handler.create(this,Xe.reload))}static netError(){var e="A network error occurred. Please check your connection and try again.";gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(e),Fe.YES,Laya.Handler.create(this,Xe.reload))}static popMatchErrorToMain(){if(!this.hasPopMatchErrorToMain){var e="A network error occurred. Please check your connection and try again.";gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(e)+"..",Fe.YES,Laya.Handler.create(this,this.clickPopMatchErrorToMain))}}static clickPopMatchErrorToMain(){this.setToMainScene(),this.hasPopMatchErrorToMain=!1}static commTipWithYes(e){gi.AlertByType(Fe.BASEALERTVIEW,e,Fe.YES)}static shakeSprs(e,t=2,r=4,s=32){if(Ve.isShake)return;Ve.isShake=!0;let a=e.length,l=[];for(let h=0;h<a;h++){let f=e[h];l.push([f.x,f.y])}let u=[0,0],m=0,p=function(){u[m%2]=m++%4<2?0:r,m>t*4+1&&(Laya.timer.clear(Laya.stage,p),m=0,Ve.isShake=!1);for(let h=0;h<a;h++){let f=e[h];f.x=u[0]+l[h][0],f.y=u[1]+l[h][1]}};Laya.timer.loop(s,Laya.stage,p)}static shake(e,t=2,r=4,s=32){if(Ve.isShake)return;Ve.isShake=!0;let a=new Laya.Point(e.x,e.y),l=[0,0],u=0,m=function(){l[u%2]=u++%4<2?0:r,u>t*4+1&&(Laya.timer.clear(Laya.stage,m),u=0,Ve.isShake=!1),e.x=l[0]+a.x,e.y=l[1]+a.y};Laya.timer.loop(s,Laya.stage,m)}static async getNpcNames(e=1){var t=D.getLanTypeById(G.m_strLanguage);t.indexOf("-")!=-1&&(t=t.split("-")[0]);var r=`https://wss-room-sg.queengame.io/get-names?lang=${t}&count=${e}`,s=await Vt.requestGet(r);return console.log("getNpcNames: ",s),s}static getInviteUrl(e){let t=new URL(window.location.href),r=t.searchParams;r.has("address")&&r.delete("address"),r.has("debug")&&r.delete("debug"),r.get("referral")&&r.delete("referral");let a=e;r.append("referral",a+""),r.get("lan")&&r.delete("lan");let u=G.m_strLanguage,m=D.getLanTypeById(u);return r.append("lan",m+""),t.search=r.toString(),t.toString()}static vibrate(e=200){navigator.vibrate?navigator.vibrate(e):console.warn("当前浏览器不支持震动功能")}};Ve._isParseWWhiteUser=!1,Ve.isWWhiteUser=!1,Ve.hasPopMatchErrorToMain=!1,Ve.isShake=!1;var ee=Ve;var Je=class extends Laya.Event{constructor(){super()}};Je.EVENT_GLOBAL_ERROR_CODE="EVENT_GLOBAL_ERROR_CODE",Je.EVENT_HALL_SOCKET_OPEN="EVENT_HALL_SOCKET_OPEN",Je.EVENT_HALL_SOCKET_ERROR="EVENT_HALL_SOCKET_ERROR",Je.EVENT_HALL_SOCKET_CLOSE="EVENT_HALL_SOCKET_CLOSE",Je.EVENT_HALL_STOP_HEART="EVENT_HALL_STOP_HEART",Je.EVENT_HALL_SHOW_TIP_DELAY="EVENT_HALL_SHOW_TIP_DELAY",Je.EVENT_ROOM_SOCKET_OPEN="EVENT_ROOM_SOCKET_OPEN",Je.EVENT_ROOM_SOCKET_ERROR="EVENT_ROOM_SOCKET_ERROR",Je.EVENT_ROOM_SOCKET_CLOSE="EVENT_ROOM_SOCKET_CLOSE",Je.EVENT_ROOM_STOP_HEART="EVENT_ROOM_STOP_HEART",Je.EVENT_ROOM_SHOW_TIP_DELAY="EVENT_ROOM_SHOW_TIP_DELAY",Je.EVENT_ROOM_HEART_BEAT="EVENT_ROOM_HEART_BEAT";var M=class{};M.RemGetDialog="RemGetDialog",M.QuickRechargeDialog="QuickRechargeDialog",M.CreateNameDialog="CreateNameDialog",M.DailyTaskDialog="DailyTaskDialog",M.ActivityTaskDialog="ActivityTaskDialog",M.ShareDialog="ShareDialog",M.InvitationCenterDialog="InvitationCenterDialog",M.DailyTaskDrawDialog="DailyTaskDrawDialog",M.GuideView="GuideView",M.GuideDialogView="GuideDialogView",M.ShareView="ShareView",M.MainTopView="MainTopView",M.GetMoreDialog="GetMoreDialog",M.ShopView="ShopView",M.ItemGetDialog="ItemGetDialog",M.EquipStarUpDialog="EquipStarUpDialog",M.RewardGetDialog="RewardGetDialog",M.AssetNewView="AssetNewView",M.GetTitleDialog="GetTitleDialog",M.NewFunUnLockDialog="NewFunUnLockDialog",M.DialogView="DialogView",M.MallView="MallView",M.MallCardView="MallCardView",M.MallBuyDialog="MallBuyDialog",M.FittingUiView="FittingUiView",M.TaskDialog="TaskDialog",M.CommentDialog="CommentDialog",M.PotraitChangDialog="PotraitChangDialog",M.ClothespressView="ClothespressView",M.ItemSellDialog="ItemSellDialog",M.ItemInfoDialog="ItemInfoDialog",M.OnlineAward="OnlineAward",M.MaillView="MailView",M.MailSendView="MailSendView",M.GameSettingDialog="GameSettingDialog",M.GamesettingSoundView="GamesettingSoundView",M.GameSettingLanguageDialog="GameSettingLanguageDialog",M.GameSettingVersionDialog="GameSettingVersionDialog",M.FriendMainView="FriendMainView",M.FriendSearchView="FriendSearchView",M.FriendGetRewardDialog="FriendGetRewardDialog",M.FriendRewardDialog="FriendRewardDialog",M.PreLoadingView="PreLoadingView",M.RechargeDialog="RechargeDialog",M.WalletChooseHeroDialog="WalletChooseHeroDialog",M.EmployInfoDialog="EmployInfoDialog",M.WalletChoosePropsDialog="WalletChoosePropsDialog",M.FirstRechargeDialog="FirstRechargeDialog",M.FirstWeekRechargeView="FirstWeekRechargeView",M.ClientErrView="ClientErrView",M.RoleUpgradeView="RoleUpgradeView",M.ActiveRechargeView="ActiveRechargeView",M.SmallSaleView="SmallSaleView",M.RechargeSelectDialog="RechargeSelectDialog",M.FBLikeView="FBLikeView",M.TurnSuitPreView="TurnSuitPreView",M.SlotMachineView="SlotMachineView",M.SlotMachineRewardPreDialog="SlotMachineRewardPreDialog",M.SlotMachineResultDialog="SlotMachineResultDialog",M.GashaponView="GashaponView",M.GashaponRewardView="GashaponRewardView",M.ActivityRankRewardView="ActivityRankRewardView",M.AddRechargeView="AddRechargeView",M.CupMatchStartDialog="CupMatchStartDialog",M.CupMatchEndDialog="CupMatchEndDialog",M.CreateLoginView="CreateLoginView",M.SelectHeadDialog="SelectHeadDialog",M.RoleInfoDialog="RoleInfoDialog",M.SelectHeroDialog="SelectHeroDialog",M.CreateSubWalletDialog="CreateSubWalletDialog",M.WalletDialog="WalletDialog",M.WalletTransferDialog="WalletTransferDialog",M.CardPayView="CardPayView",M.SwapView="SwapView",M.GamesettingView="GamesettingView",M.GameSettingGameAccountView="GameSettingGameAccountView",M.NoticeDialog="NoticeDialog",M.HelpDialog="HelpDialog",M.ImgDialog="ImgDialog",M.ChampDetailDialog="ChampDetailDialog",M.ChampRecordDialog="ChampRecordDialog",M.GuildInfoDialog="GuildInfoDialog",M.CreateUnionDialog="CreateUnionDialog",M.UnionInfoView="UnionInfoView",M.UnionEarningView="UnionEarningView",M.UnionRevenueDetailDialog="UnionRevenueDetailDialog",M.UnionSetRevenueDialog="UnionSetRevenueDialog",M.UnionBattleRecordDialog="UnionBattleRecordDialog",M.UnionRevenueRecordDialog="UnionRevenueRecordDialog",M.LoadDialog="LoadDialog",M.ChangeHeadDialog="ChangeHeadDialog",M.CreateRoomDialog="CreateRoomDialog",M.CreateRentalDialog="CreateRentalDialog",M.MyLeasedDialog="MyLeasedDialog",M.MyRentedDialog="MyRentedDialog",M.MyRentalBuyDialog="MyRentalBuyDialog",M.BuyTicketDialog="BuyTicketDialog",M.EnterRoomView="EnterRoomView",M.MatchEndRankView="MatchEndRankView",M.MatchEndTeamRankView="MatchEndTeamRankView",M.MatchReadyView="MatchReadyView",M.MatchEndView="MatchEndView",M.MatchEndRewardTokensDialog="MatchEndRewardTokensDialog",M.HeroGetDialog="HeroGetDialog",M.InputPwdDialog="InputPwdDialog",M.RoomInfoDialog="RoomInfoDialog",M.MailDialog="MailDialog",M.TeamCreateShareDialog="TeamCreateShareDialog",M.TeamShareDialog="TeamShareDialog",M.TeamJoinUsingDialog="TeamJoinUsingDialog",M.MyTeamDialog="MyTeamDialog",M.TeamInfoDialog="TeamInfoDialog",M.MyFriendDialog="MyFriendDialog",M.BuyPropDialog="BuyPropDialog",M.UnionAttrView="UnionAttrView",M.UnionAttrLvUpDialog="UnionAttrLvUpDialog",M.UnionAttributeDetailsDialog="UnionAttributeDetailsDialog",M.NoServerView="NoServerView",M.UnionMemberMoreDialog="UnionMemberMoreDialog",M.HeroUpgradeDialog="HeroUpgradeDialog",M.HeroDetailDialog="HeroDetailDialog",M.SkillTipDialog="SkillTipDialog",M.TransferRecordDialog="TransferRecordDialog",M.JoinRoomDialog="JoinRoomDialog",M.SnakeUpgradeDialog="SnakeUpgradeDialog",M.SnakeUpgradeSuccessDialog="SnakeUpgradeSuccessDialog",M.PlayerUpgradeSuccessDialog="PlayerUpgradeSuccessDialog",M.Knapsack="Knapsack",M.KnapsackTipDialog="KnapsackTipDialog",M.HeroFormationDialog="HeroFormationDialog",M.SignInDialog="SignInDialog",M.InviteRewardDialog="InviteRewardDialog",M.ChallengLoseDialog="ChallengLoseDialog",M.ChallengWinDialog="ChallengWinDialog",M.ChallengBossDialog="ChallengBossDialog",M.ThirbleDropDialog="ThirbleDropDialog",M.LevelDropDialog="LevelDropDialog",M.UseCardDialog="UseCardDialog",M.ArenaView="ArenaView",M.MyBookingView="MyBookingView",M.ArenaLoseDialog="ArenaLoseDialog",M.ArenaBattleDialog="ArenaBattleDialog",M.ArenaWinDialog="ArenaWinDialog",M.ArenaWarNotesView="ArenaWarNotesView",M.ArenaRuleDialog="ArenaRuleDialog",M.EquipSelectDialog="EquipSelectDialog",M.EquipDetailDialog="EquipDetailDialog",M.HireDetailDialog="HireDetailDialog",M.ProxyDetailDialog="ProxyDetailDialog",M.WithDrawRecordDialog="WithDrawRecordDialog",M.NodeRevenueRecordDialog="NodeRevenueRecordDialog",M.RentalRecordDialog="RentalRecordDialog",M.PrivateChatDialog="PrivateChatDialog",M.AirdropRecordDialog="AirdropRecordDialog",M.ActivityInfoDialog="ActivityInfoDialog",M.CharacterStarDialog="CharacterStarDialog",M.LastDrawDialog="LastDrawDialog",M.IgoPageView="IgoPageView",M.IgoJoinDialog="IgoJoinDialog",M.IgoRecordDialog="IgoRecordDialog",M.PveChoosePropsDialog="PveChoosePropsDialog",M.ReferralDialog="ReferralDialog",M.ReferralL2Dialog="ReferralL2Dialog",M.TotalBattlesDialog="TotalBattlesDialog",M.DepositDialog="DepositDialog",M.WithdrawDialog="WithdrawDialog",M.CreateClubDialog="CreateClubDialog",M.CreateClubRoomDialog="CreateClubRoomDialog",M.SettingRateDialog="SettingRateDialog",M.ChangeClubHeadDialog="ChangeClubHeadDialog",M.JoinClubRoomDialog="JoinClubRoomDialog";function Ll(i){let e=i.length;for(;--e>=0;)i[e]=0}var jR=0,bA=1,GR=2,VR=3,WR=258,nI=29,$p=256,Up=$p+1+nI,Sl=30,sI=19,yA=2*Up+1,Ba=15,Nv=16,KR=7,aI=256,_A=16,xA=17,vA=18,qv=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ry=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),$R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),IA=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YR=512,Gn=new Array((Up+2)*2);Ll(Gn);var Op=new Array(Sl*2);Ll(Op);var zp=new Array(YR);Ll(zp);var Hp=new Array(WR-VR+1);Ll(Hp);var oI=new Array(nI);Ll(oI);var ny=new Array(Sl);Ll(ny);function Ov(i,e,t,r,s){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=s,this.has_stree=i&&i.length}var kA,SA,wA;function Fv(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}var EA=i=>i<256?zp[i]:zp[256+(i>>>7)],jp=(i,e)=>{i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255},qi=(i,e,t)=>{i.bi_valid>Nv-t?(i.bi_buf|=e<<i.bi_valid&65535,jp(i,i.bi_buf),i.bi_buf=e>>Nv-i.bi_valid,i.bi_valid+=t-Nv):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)},_n=(i,e,t)=>{qi(i,t[e*2],t[e*2+1])},LA=(i,e)=>{let t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1},qR=i=>{i.bi_valid===16?(jp(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)},QR=(i,e)=>{let t=e.dyn_tree,r=e.max_code,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,m=e.stat_desc.max_length,p,h,f,g,b,_,I=0;for(g=0;g<=Ba;g++)i.bl_count[g]=0;for(t[i.heap[i.heap_max]*2+1]=0,p=i.heap_max+1;p<yA;p++)h=i.heap[p],g=t[t[h*2+1]*2+1]+1,g>m&&(g=m,I++),t[h*2+1]=g,!(h>r)&&(i.bl_count[g]++,b=0,h>=u&&(b=l[h-u]),_=t[h*2],i.opt_len+=_*(g+b),a&&(i.static_len+=_*(s[h*2+1]+b)));if(I!==0){do{for(g=m-1;i.bl_count[g]===0;)g--;i.bl_count[g]--,i.bl_count[g+1]+=2,i.bl_count[m]--,I-=2}while(I>0);for(g=m;g!==0;g--)for(h=i.bl_count[g];h!==0;)f=i.heap[--p],!(f>r)&&(t[f*2+1]!==g&&(i.opt_len+=(g-t[f*2+1])*t[f*2],t[f*2+1]=g),h--)}},TA=(i,e,t)=>{let r=new Array(Ba+1),s=0,a,l;for(a=1;a<=Ba;a++)s=s+t[a-1]<<1,r[a]=s;for(l=0;l<=e;l++){let u=i[l*2+1];u!==0&&(i[l*2]=LA(r[u]++,u))}},ZR=()=>{let i,e,t,r,s,a=new Array(Ba+1);for(t=0,r=0;r<nI-1;r++)for(oI[r]=t,i=0;i<1<<qv[r];i++)Hp[t++]=r;for(Hp[t-1]=r,s=0,r=0;r<16;r++)for(ny[r]=s,i=0;i<1<<ry[r];i++)zp[s++]=r;for(s>>=7;r<Sl;r++)for(ny[r]=s<<7,i=0;i<1<<ry[r]-7;i++)zp[256+s++]=r;for(e=0;e<=Ba;e++)a[e]=0;for(i=0;i<=143;)Gn[i*2+1]=8,i++,a[8]++;for(;i<=255;)Gn[i*2+1]=9,i++,a[9]++;for(;i<=279;)Gn[i*2+1]=7,i++,a[7]++;for(;i<=287;)Gn[i*2+1]=8,i++,a[8]++;for(TA(Gn,Up+1,a),i=0;i<Sl;i++)Op[i*2+1]=5,Op[i*2]=LA(i,5);kA=new Ov(Gn,qv,$p+1,Up,Ba),SA=new Ov(Op,ry,0,Sl,Ba),wA=new Ov(new Array(0),$R,0,sI,KR)},AA=i=>{let e;for(e=0;e<Up;e++)i.dyn_ltree[e*2]=0;for(e=0;e<Sl;e++)i.dyn_dtree[e*2]=0;for(e=0;e<sI;e++)i.bl_tree[e*2]=0;i.dyn_ltree[aI*2]=1,i.opt_len=i.static_len=0,i.sym_next=i.matches=0},CA=i=>{i.bi_valid>8?jp(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},BT=(i,e,t,r)=>{let s=e*2,a=t*2;return i[s]<i[a]||i[s]===i[a]&&r[e]<=r[t]},Pv=(i,e,t)=>{let r=i.heap[t],s=t<<1;for(;s<=i.heap_len&&(s<i.heap_len&&BT(e,i.heap[s+1],i.heap[s],i.depth)&&s++,!BT(e,r,i.heap[s],i.depth));)i.heap[t]=i.heap[s],t=s,s<<=1;i.heap[t]=r},DT=(i,e,t)=>{let r,s,a=0,l,u;if(i.sym_next!==0)do r=i.pending_buf[i.sym_buf+a++]&255,r+=(i.pending_buf[i.sym_buf+a++]&255)<<8,s=i.pending_buf[i.sym_buf+a++],r===0?_n(i,s,e):(l=Hp[s],_n(i,l+$p+1,e),u=qv[l],u!==0&&(s-=oI[l],qi(i,s,u)),r--,l=EA(r),_n(i,l,t),u=ry[l],u!==0&&(r-=ny[l],qi(i,r,u)));while(a<i.sym_next);_n(i,aI,e)},Qv=(i,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.elems,l,u,m=-1,p;for(i.heap_len=0,i.heap_max=yA,l=0;l<a;l++)t[l*2]!==0?(i.heap[++i.heap_len]=m=l,i.depth[l]=0):t[l*2+1]=0;for(;i.heap_len<2;)p=i.heap[++i.heap_len]=m<2?++m:0,t[p*2]=1,i.depth[p]=0,i.opt_len--,s&&(i.static_len-=r[p*2+1]);for(e.max_code=m,l=i.heap_len>>1;l>=1;l--)Pv(i,t,l);p=a;do l=i.heap[1],i.heap[1]=i.heap[i.heap_len--],Pv(i,t,1),u=i.heap[1],i.heap[--i.heap_max]=l,i.heap[--i.heap_max]=u,t[p*2]=t[l*2]+t[u*2],i.depth[p]=(i.depth[l]>=i.depth[u]?i.depth[l]:i.depth[u])+1,t[l*2+1]=t[u*2+1]=p,i.heap[1]=p++,Pv(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],QR(i,e),TA(t,m,i.bl_count)},NT=(i,e,t)=>{let r,s=-1,a,l=e[0*2+1],u=0,m=7,p=4;for(l===0&&(m=138,p=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)a=l,l=e[(r+1)*2+1],!(++u<m&&a===l)&&(u<p?i.bl_tree[a*2]+=u:a!==0?(a!==s&&i.bl_tree[a*2]++,i.bl_tree[_A*2]++):u<=10?i.bl_tree[xA*2]++:i.bl_tree[vA*2]++,u=0,s=a,l===0?(m=138,p=3):a===l?(m=6,p=3):(m=7,p=4))},OT=(i,e,t)=>{let r,s=-1,a,l=e[0*2+1],u=0,m=7,p=4;for(l===0&&(m=138,p=3),r=0;r<=t;r++)if(a=l,l=e[(r+1)*2+1],!(++u<m&&a===l)){if(u<p)do _n(i,a,i.bl_tree);while(--u!==0);else a!==0?(a!==s&&(_n(i,a,i.bl_tree),u--),_n(i,_A,i.bl_tree),qi(i,u-3,2)):u<=10?(_n(i,xA,i.bl_tree),qi(i,u-3,3)):(_n(i,vA,i.bl_tree),qi(i,u-11,7));u=0,s=a,l===0?(m=138,p=3):a===l?(m=6,p=3):(m=7,p=4)}},XR=i=>{let e;for(NT(i,i.dyn_ltree,i.l_desc.max_code),NT(i,i.dyn_dtree,i.d_desc.max_code),Qv(i,i.bl_desc),e=sI-1;e>=3&&i.bl_tree[IA[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e},JR=(i,e,t,r)=>{let s;for(qi(i,e-257,5),qi(i,t-1,5),qi(i,r-4,4),s=0;s<r;s++)qi(i,i.bl_tree[IA[s]*2+1],3);OT(i,i.dyn_ltree,e-1),OT(i,i.dyn_dtree,t-1)},eB=i=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return 0;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return 1;for(t=32;t<$p;t++)if(i.dyn_ltree[t*2]!==0)return 1;return 0},FT=!1,tB=i=>{FT||(ZR(),FT=!0),i.l_desc=new Fv(i.dyn_ltree,kA),i.d_desc=new Fv(i.dyn_dtree,SA),i.bl_desc=new Fv(i.bl_tree,wA),i.bi_buf=0,i.bi_valid=0,AA(i)},MA=(i,e,t,r)=>{qi(i,(jR<<1)+(r?1:0),3),CA(i),jp(i,t),jp(i,~t),t&&i.pending_buf.set(i.window.subarray(e,e+t),i.pending),i.pending+=t},iB=i=>{qi(i,bA<<1,3),_n(i,aI,Gn),qR(i)},rB=(i,e,t,r)=>{let s,a,l=0;i.level>0?(i.strm.data_type===2&&(i.strm.data_type=eB(i)),Qv(i,i.l_desc),Qv(i,i.d_desc),l=XR(i),s=i.opt_len+3+7>>>3,a=i.static_len+3+7>>>3,a<=s&&(s=a)):s=a=t+5,t+4<=s&&e!==-1?MA(i,e,t,r):i.strategy===4||a===s?(qi(i,(bA<<1)+(r?1:0),3),DT(i,Gn,Op)):(qi(i,(GR<<1)+(r?1:0),3),JR(i,i.l_desc.max_code+1,i.d_desc.max_code+1,l+1),DT(i,i.dyn_ltree,i.dyn_dtree)),AA(i),r&&CA(i)},nB=(i,e,t)=>(i.pending_buf[i.sym_buf+i.sym_next++]=e,i.pending_buf[i.sym_buf+i.sym_next++]=e>>8,i.pending_buf[i.sym_buf+i.sym_next++]=t,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(Hp[t]+$p+1)*2]++,i.dyn_dtree[EA(e)*2]++),i.sym_next===i.sym_end),sB=tB,aB=MA,oB=rB,lB=nB,cB=iB,uB={_tr_init:sB,_tr_stored_block:aB,_tr_flush_block:oB,_tr_tally:lB,_tr_align:cB},pB=(i,e,t,r)=>{let s=i&65535|0,a=i>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do s=s+e[r++]|0,a=a+s|0;while(--l);s%=65521,a%=65521}return s|a<<16|0},Gp=pB,mB=()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var r=0;r<8;r++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e},hB=new Uint32Array(mB()),dB=(i,e,t,r)=>{let s=hB,a=r+t;i^=-1;for(let l=r;l<a;l++)i=i>>>8^s[(i^e[l])&255];return i^-1},fi=dB,Oa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ua={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:fB,_tr_stored_block:Zv,_tr_flush_block:gB,_tr_tally:Us,_tr_align:bB}=uB,{Z_NO_FLUSH:zs,Z_PARTIAL_FLUSH:yB,Z_FULL_FLUSH:_B,Z_FINISH:kr,Z_BLOCK:PT,Z_OK:_i,Z_STREAM_END:UT,Z_STREAM_ERROR:xn,Z_DATA_ERROR:xB,Z_BUF_ERROR:Uv,Z_DEFAULT_COMPRESSION:vB,Z_FILTERED:IB,Z_HUFFMAN_ONLY:Xb,Z_RLE:kB,Z_FIXED:SB,Z_DEFAULT_STRATEGY:wB,Z_UNKNOWN:EB,Z_DEFLATED:oy}=Ua,LB=9,TB=15,AB=8,CB=29,MB=256,Xv=MB+1+CB,RB=30,BB=19,DB=2*Xv+1,NB=15,ut=3,Ps=258,vn=Ps+ut+1,OB=32,wl=42,lI=57,Jv=69,eI=73,tI=91,iI=103,Da=113,Dp=666,Pi=1,Tl=2,Fa=3,Al=4,FB=3,Na=(i,e)=>(i.msg=Oa[e],e),zT=i=>i*2-(i>4?9:0),Fs=i=>{let e=i.length;for(;--e>=0;)i[e]=0},PB=i=>{let e,t,r,s=i.w_size;e=i.hash_size,r=e;do t=i.head[--r],i.head[r]=t>=s?t-s:0;while(--e);e=s,r=e;do t=i.prev[--r],i.prev[r]=t>=s?t-s:0;while(--e)},UB=(i,e,t)=>(e<<i.hash_shift^t)&i.hash_mask,Hs=UB,rr=i=>{let e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(i.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},nr=(i,e)=>{gB(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,rr(i.strm)},kt=(i,e)=>{i.pending_buf[i.pending++]=e},Bp=(i,e)=>{i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255},rI=(i,e,t,r)=>{let s=i.avail_in;return s>r&&(s=r),s===0?0:(i.avail_in-=s,e.set(i.input.subarray(i.next_in,i.next_in+s),t),i.state.wrap===1?i.adler=Gp(i.adler,e,s,t):i.state.wrap===2&&(i.adler=fi(i.adler,e,s,t)),i.next_in+=s,i.total_in+=s,s)},RA=(i,e)=>{let t=i.max_chain_length,r=i.strstart,s,a,l=i.prev_length,u=i.nice_match,m=i.strstart>i.w_size-vn?i.strstart-(i.w_size-vn):0,p=i.window,h=i.w_mask,f=i.prev,g=i.strstart+Ps,b=p[r+l-1],_=p[r+l];i.prev_length>=i.good_match&&(t>>=2),u>i.lookahead&&(u=i.lookahead);do if(s=e,!(p[s+l]!==_||p[s+l-1]!==b||p[s]!==p[r]||p[++s]!==p[r+1])){r+=2,s++;do;while(p[++r]===p[++s]&&p[++r]===p[++s]&&p[++r]===p[++s]&&p[++r]===p[++s]&&p[++r]===p[++s]&&p[++r]===p[++s]&&p[++r]===p[++s]&&p[++r]===p[++s]&&r<g);if(a=Ps-(g-r),r=g-Ps,a>l){if(i.match_start=e,l=a,a>=u)break;b=p[r+l-1],_=p[r+l]}}while((e=f[e&h])>m&&--t!==0);return l<=i.lookahead?l:i.lookahead},El=i=>{let e=i.w_size,t,r,s;do{if(r=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-vn)&&(i.window.set(i.window.subarray(e,e+e-r),0),i.match_start-=e,i.strstart-=e,i.block_start-=e,i.insert>i.strstart&&(i.insert=i.strstart),PB(i),r+=e),i.strm.avail_in===0)break;if(t=rI(i.strm,i.window,i.strstart+i.lookahead,r),i.lookahead+=t,i.lookahead+i.insert>=ut)for(s=i.strstart-i.insert,i.ins_h=i.window[s],i.ins_h=Hs(i,i.ins_h,i.window[s+1]);i.insert&&(i.ins_h=Hs(i,i.ins_h,i.window[s+ut-1]),i.prev[s&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=s,s++,i.insert--,!(i.lookahead+i.insert<ut)););}while(i.lookahead<vn&&i.strm.avail_in!==0)},BA=(i,e)=>{let t=i.pending_buf_size-5>i.w_size?i.w_size:i.pending_buf_size-5,r,s,a,l=0,u=i.strm.avail_in;do{if(r=65535,a=i.bi_valid+42>>3,i.strm.avail_out<a||(a=i.strm.avail_out-a,s=i.strstart-i.block_start,r>s+i.strm.avail_in&&(r=s+i.strm.avail_in),r>a&&(r=a),r<t&&(r===0&&e!==kr||e===zs||r!==s+i.strm.avail_in)))break;l=e===kr&&r===s+i.strm.avail_in?1:0,Zv(i,0,0,l),i.pending_buf[i.pending-4]=r,i.pending_buf[i.pending-3]=r>>8,i.pending_buf[i.pending-2]=~r,i.pending_buf[i.pending-1]=~r>>8,rr(i.strm),s&&(s>r&&(s=r),i.strm.output.set(i.window.subarray(i.block_start,i.block_start+s),i.strm.next_out),i.strm.next_out+=s,i.strm.avail_out-=s,i.strm.total_out+=s,i.block_start+=s,r-=s),r&&(rI(i.strm,i.strm.output,i.strm.next_out,r),i.strm.next_out+=r,i.strm.avail_out-=r,i.strm.total_out+=r)}while(l===0);return u-=i.strm.avail_in,u&&(u>=i.w_size?(i.matches=2,i.window.set(i.strm.input.subarray(i.strm.next_in-i.w_size,i.strm.next_in),0),i.strstart=i.w_size,i.insert=i.strstart):(i.window_size-i.strstart<=u&&(i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,i.insert>i.strstart&&(i.insert=i.strstart)),i.window.set(i.strm.input.subarray(i.strm.next_in-u,i.strm.next_in),i.strstart),i.strstart+=u,i.insert+=u>i.w_size-i.insert?i.w_size-i.insert:u),i.block_start=i.strstart),i.high_water<i.strstart&&(i.high_water=i.strstart),l?Al:e!==zs&&e!==kr&&i.strm.avail_in===0&&i.strstart===i.block_start?Tl:(a=i.window_size-i.strstart,i.strm.avail_in>a&&i.block_start>=i.w_size&&(i.block_start-=i.w_size,i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,a+=i.w_size,i.insert>i.strstart&&(i.insert=i.strstart)),a>i.strm.avail_in&&(a=i.strm.avail_in),a&&(rI(i.strm,i.window,i.strstart,a),i.strstart+=a,i.insert+=a>i.w_size-i.insert?i.w_size-i.insert:a),i.high_water<i.strstart&&(i.high_water=i.strstart),a=i.bi_valid+42>>3,a=i.pending_buf_size-a>65535?65535:i.pending_buf_size-a,t=a>i.w_size?i.w_size:a,s=i.strstart-i.block_start,(s>=t||(s||e===kr)&&e!==zs&&i.strm.avail_in===0&&s<=a)&&(r=s>a?a:s,l=e===kr&&i.strm.avail_in===0&&r===s?1:0,Zv(i,i.block_start,r,l),i.block_start+=r,rr(i.strm)),l?Fa:Pi)},zv=(i,e)=>{let t,r;for(;;){if(i.lookahead<vn){if(El(i),i.lookahead<vn&&e===zs)return Pi;if(i.lookahead===0)break}if(t=0,i.lookahead>=ut&&(i.ins_h=Hs(i,i.ins_h,i.window[i.strstart+ut-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-vn&&(i.match_length=RA(i,t)),i.match_length>=ut)if(r=Us(i,i.strstart-i.match_start,i.match_length-ut),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=ut){i.match_length--;do i.strstart++,i.ins_h=Hs(i,i.ins_h,i.window[i.strstart+ut-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=Hs(i,i.ins_h,i.window[i.strstart+1]);else r=Us(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(r&&(nr(i,!1),i.strm.avail_out===0))return Pi}return i.insert=i.strstart<ut-1?i.strstart:ut-1,e===kr?(nr(i,!0),i.strm.avail_out===0?Fa:Al):i.sym_next&&(nr(i,!1),i.strm.avail_out===0)?Pi:Tl},Il=(i,e)=>{let t,r,s;for(;;){if(i.lookahead<vn){if(El(i),i.lookahead<vn&&e===zs)return Pi;if(i.lookahead===0)break}if(t=0,i.lookahead>=ut&&(i.ins_h=Hs(i,i.ins_h,i.window[i.strstart+ut-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=ut-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-vn&&(i.match_length=RA(i,t),i.match_length<=5&&(i.strategy===IB||i.match_length===ut&&i.strstart-i.match_start>4096)&&(i.match_length=ut-1)),i.prev_length>=ut&&i.match_length<=i.prev_length){s=i.strstart+i.lookahead-ut,r=Us(i,i.strstart-1-i.prev_match,i.prev_length-ut),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=s&&(i.ins_h=Hs(i,i.ins_h,i.window[i.strstart+ut-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=ut-1,i.strstart++,r&&(nr(i,!1),i.strm.avail_out===0))return Pi}else if(i.match_available){if(r=Us(i,0,i.window[i.strstart-1]),r&&nr(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return Pi}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(r=Us(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<ut-1?i.strstart:ut-1,e===kr?(nr(i,!0),i.strm.avail_out===0?Fa:Al):i.sym_next&&(nr(i,!1),i.strm.avail_out===0)?Pi:Tl},zB=(i,e)=>{let t,r,s,a,l=i.window;for(;;){if(i.lookahead<=Ps){if(El(i),i.lookahead<=Ps&&e===zs)return Pi;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=ut&&i.strstart>0&&(s=i.strstart-1,r=l[s],r===l[++s]&&r===l[++s]&&r===l[++s])){a=i.strstart+Ps;do;while(r===l[++s]&&r===l[++s]&&r===l[++s]&&r===l[++s]&&r===l[++s]&&r===l[++s]&&r===l[++s]&&r===l[++s]&&s<a);i.match_length=Ps-(a-s),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=ut?(t=Us(i,1,i.match_length-ut),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=Us(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(nr(i,!1),i.strm.avail_out===0))return Pi}return i.insert=0,e===kr?(nr(i,!0),i.strm.avail_out===0?Fa:Al):i.sym_next&&(nr(i,!1),i.strm.avail_out===0)?Pi:Tl},HB=(i,e)=>{let t;for(;;){if(i.lookahead===0&&(El(i),i.lookahead===0)){if(e===zs)return Pi;break}if(i.match_length=0,t=Us(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(nr(i,!1),i.strm.avail_out===0))return Pi}return i.insert=0,e===kr?(nr(i,!0),i.strm.avail_out===0?Fa:Al):i.sym_next&&(nr(i,!1),i.strm.avail_out===0)?Pi:Tl};function yn(i,e,t,r,s){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=s}var Np=[new yn(0,0,0,0,BA),new yn(4,4,8,4,zv),new yn(4,5,16,8,zv),new yn(4,6,32,32,zv),new yn(4,4,16,16,Il),new yn(8,16,32,32,Il),new yn(8,16,128,128,Il),new yn(8,32,128,256,Il),new yn(32,128,258,1024,Il),new yn(32,258,258,4096,Il)],jB=i=>{i.window_size=2*i.w_size,Fs(i.head),i.max_lazy_match=Np[i.level].max_lazy,i.good_match=Np[i.level].good_length,i.nice_match=Np[i.level].nice_length,i.max_chain_length=Np[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=ut-1,i.match_available=0,i.ins_h=0};function GB(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=oy,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(DB*2),this.dyn_dtree=new Uint16Array((2*RB+1)*2),this.bl_tree=new Uint16Array((2*BB+1)*2),Fs(this.dyn_ltree),Fs(this.dyn_dtree),Fs(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(NB+1),this.heap=new Uint16Array(2*Xv+1),Fs(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Xv+1),Fs(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Yp=i=>{if(!i)return 1;let e=i.state;return!e||e.strm!==i||e.status!==wl&&e.status!==lI&&e.status!==Jv&&e.status!==eI&&e.status!==tI&&e.status!==iI&&e.status!==Da&&e.status!==Dp?1:0},DA=i=>{if(Yp(i))return Na(i,xn);i.total_in=i.total_out=0,i.data_type=EB;let e=i.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?lI:e.wrap?wl:Da,i.adler=e.wrap===2?0:1,e.last_flush=-2,fB(e),_i},NA=i=>{let e=DA(i);return e===_i&&jB(i.state),e},VB=(i,e)=>Yp(i)||i.state.wrap!==2?xn:(i.state.gzhead=e,_i),OA=(i,e,t,r,s,a)=>{if(!i)return xn;let l=1;if(e===vB&&(e=6),r<0?(l=0,r=-r):r>15&&(l=2,r-=16),s<1||s>LB||t!==oy||r<8||r>15||e<0||e>9||a<0||a>SB||r===8&&l!==1)return Na(i,xn);r===8&&(r=9);let u=new GB;return i.state=u,u.strm=i,u.status=wl,u.wrap=l,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=s+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+ut-1)/ut),u.window=new Uint8Array(u.w_size*2),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<s+6,u.pending_buf_size=u.lit_bufsize*4,u.pending_buf=new Uint8Array(u.pending_buf_size),u.sym_buf=u.lit_bufsize,u.sym_end=(u.lit_bufsize-1)*3,u.level=e,u.strategy=a,u.method=t,NA(i)},WB=(i,e)=>OA(i,e,oy,TB,AB,wB),KB=(i,e)=>{if(Yp(i)||e>PT||e<0)return i?Na(i,xn):xn;let t=i.state;if(!i.output||i.avail_in!==0&&!i.input||t.status===Dp&&e!==kr)return Na(i,i.avail_out===0?Uv:xn);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(rr(i),i.avail_out===0)return t.last_flush=-1,_i}else if(i.avail_in===0&&zT(e)<=zT(r)&&e!==kr)return Na(i,Uv);if(t.status===Dp&&i.avail_in!==0)return Na(i,Uv);if(t.status===wl&&t.wrap===0&&(t.status=Da),t.status===wl){let s=oy+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=Xb||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,s|=a<<6,t.strstart!==0&&(s|=OB),s+=31-s%31,Bp(t,s),t.strstart!==0&&(Bp(t,i.adler>>>16),Bp(t,i.adler&65535)),i.adler=1,t.status=Da,rr(i),t.pending!==0)return t.last_flush=-1,_i}if(t.status===lI){if(i.adler=0,kt(t,31),kt(t,139),kt(t,8),t.gzhead)kt(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),kt(t,t.gzhead.time&255),kt(t,t.gzhead.time>>8&255),kt(t,t.gzhead.time>>16&255),kt(t,t.gzhead.time>>24&255),kt(t,t.level===9?2:t.strategy>=Xb||t.level<2?4:0),kt(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(kt(t,t.gzhead.extra.length&255),kt(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(i.adler=fi(i.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Jv;else if(kt(t,0),kt(t,0),kt(t,0),kt(t,0),kt(t,0),kt(t,t.level===9?2:t.strategy>=Xb||t.level<2?4:0),kt(t,FB),t.status=Da,rr(i),t.pending!==0)return t.last_flush=-1,_i}if(t.status===Jv){if(t.gzhead.extra){let s=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let u=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+u),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>s&&(i.adler=fi(i.adler,t.pending_buf,t.pending-s,s)),t.gzindex+=u,rr(i),t.pending!==0)return t.last_flush=-1,_i;s=0,a-=u}let l=new Uint8Array(t.gzhead.extra);t.pending_buf.set(l.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>s&&(i.adler=fi(i.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=eI}if(t.status===eI){if(t.gzhead.name){let s=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(i.adler=fi(i.adler,t.pending_buf,t.pending-s,s)),rr(i),t.pending!==0)return t.last_flush=-1,_i;s=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,kt(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>s&&(i.adler=fi(i.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=tI}if(t.status===tI){if(t.gzhead.comment){let s=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(i.adler=fi(i.adler,t.pending_buf,t.pending-s,s)),rr(i),t.pending!==0)return t.last_flush=-1,_i;s=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,kt(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>s&&(i.adler=fi(i.adler,t.pending_buf,t.pending-s,s))}t.status=iI}if(t.status===iI){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(rr(i),t.pending!==0))return t.last_flush=-1,_i;kt(t,i.adler&255),kt(t,i.adler>>8&255),i.adler=0}if(t.status=Da,rr(i),t.pending!==0)return t.last_flush=-1,_i}if(i.avail_in!==0||t.lookahead!==0||e!==zs&&t.status!==Dp){let s=t.level===0?BA(t,e):t.strategy===Xb?HB(t,e):t.strategy===kB?zB(t,e):Np[t.level].func(t,e);if((s===Fa||s===Al)&&(t.status=Dp),s===Pi||s===Fa)return i.avail_out===0&&(t.last_flush=-1),_i;if(s===Tl&&(e===yB?bB(t):e!==PT&&(Zv(t,0,0,!1),e===_B&&(Fs(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),rr(i),i.avail_out===0))return t.last_flush=-1,_i}return e!==kr?_i:t.wrap<=0?UT:(t.wrap===2?(kt(t,i.adler&255),kt(t,i.adler>>8&255),kt(t,i.adler>>16&255),kt(t,i.adler>>24&255),kt(t,i.total_in&255),kt(t,i.total_in>>8&255),kt(t,i.total_in>>16&255),kt(t,i.total_in>>24&255)):(Bp(t,i.adler>>>16),Bp(t,i.adler&65535)),rr(i),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?_i:UT)},$B=i=>{if(Yp(i))return xn;let e=i.state.status;return i.state=null,e===Da?Na(i,xB):_i},YB=(i,e)=>{let t=e.length;if(Yp(i))return xn;let r=i.state,s=r.wrap;if(s===2||s===1&&r.status!==wl||r.lookahead)return xn;if(s===1&&(i.adler=Gp(i.adler,e,t,0)),r.wrap=0,t>=r.w_size){s===0&&(Fs(r.head),r.strstart=0,r.block_start=0,r.insert=0);let m=new Uint8Array(r.w_size);m.set(e.subarray(t-r.w_size,t),0),e=m,t=r.w_size}let a=i.avail_in,l=i.next_in,u=i.input;for(i.avail_in=t,i.next_in=0,i.input=e,El(r);r.lookahead>=ut;){let m=r.strstart,p=r.lookahead-(ut-1);do r.ins_h=Hs(r,r.ins_h,r.window[m+ut-1]),r.prev[m&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=m,m++;while(--p);r.strstart=m,r.lookahead=ut-1,El(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=ut-1,r.match_available=0,i.next_in=l,i.input=u,i.avail_in=a,r.wrap=s,_i},qB=WB,QB=OA,ZB=NA,XB=DA,JB=VB,eD=KB,tD=$B,iD=YB,rD="pako deflate (from Nodeca project)",Fp={deflateInit:qB,deflateInit2:QB,deflateReset:ZB,deflateResetKeep:XB,deflateSetHeader:JB,deflate:eD,deflateEnd:tD,deflateSetDictionary:iD,deflateInfo:rD},nD=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),sD=function(i){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)nD(t,r)&&(i[r]=t[r])}}return i},aD=i=>{let e=0;for(let r=0,s=i.length;r<s;r++)e+=i[r].length;let t=new Uint8Array(e);for(let r=0,s=0,a=i.length;r<a;r++){let l=i[r];t.set(l,s),s+=l.length}return t},ly={assign:sD,flattenChunks:aD},FA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{FA=!1}var Vp=new Uint8Array(256);for(let i=0;i<256;i++)Vp[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;Vp[254]=Vp[254]=1;var oD=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,r,s,a,l=i.length,u=0;for(s=0;s<l;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<l&&(r=i.charCodeAt(s+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),s++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),a=0,s=0;a<u;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<l&&(r=i.charCodeAt(s+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),s++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e},lD=(i,e)=>{if(e<65534&&i.subarray&&FA)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(i[r]);return t},cD=(i,e)=>{let t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let r,s,a=new Array(t*2);for(s=0,r=0;r<t;){let l=i[r++];if(l<128){a[s++]=l;continue}let u=Vp[l];if(u>4){a[s++]=65533,r+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&r<t;)l=l<<6|i[r++]&63,u--;if(u>1){a[s++]=65533;continue}l<65536?a[s++]=l:(l-=65536,a[s++]=55296|l>>10&1023,a[s++]=56320|l&1023)}return lD(a,s)},uD=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+Vp[i[t]]>e?t:e},Wp={string2buf:oD,buf2string:cD,utf8border:uD};function pD(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var PA=pD,UA=Object.prototype.toString,{Z_NO_FLUSH:mD,Z_SYNC_FLUSH:hD,Z_FULL_FLUSH:dD,Z_FINISH:fD,Z_OK:sy,Z_STREAM_END:gD,Z_DEFAULT_COMPRESSION:bD,Z_DEFAULT_STRATEGY:yD,Z_DEFLATED:_D}=Ua;function qp(i){this.options=ly.assign({level:bD,method:_D,chunkSize:16384,windowBits:15,memLevel:8,strategy:yD},i||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new PA,this.strm.avail_out=0;let t=Fp.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==sy)throw new Error(Oa[t]);if(e.header&&Fp.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=Wp.string2buf(e.dictionary):UA.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=Fp.deflateSetDictionary(this.strm,r),t!==sy)throw new Error(Oa[t]);this._dict_set=!0}}qp.prototype.push=function(i,e){let t=this.strm,r=this.options.chunkSize,s,a;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?fD:mD,typeof i=="string"?t.input=Wp.string2buf(i):UA.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(a===hD||a===dD)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(s=Fp.deflate(t,a),s===gD)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),s=Fp.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===sy;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};qp.prototype.onData=function(i){this.chunks.push(i)};qp.prototype.onEnd=function(i){i===sy&&(this.result=ly.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function cI(i,e){let t=new qp(e);if(t.push(i,!0),t.err)throw t.msg||Oa[t.err];return t.result}function xD(i,e){return e=e||{},e.raw=!0,cI(i,e)}function vD(i,e){return e=e||{},e.gzip=!0,cI(i,e)}var ID=qp,kD=cI,SD=xD,wD=vD,ED=Ua,LD={Deflate:ID,deflate:kD,deflateRaw:SD,gzip:wD,constants:ED},Jb=16209,TD=16191,AD=function(e,t){let r,s,a,l,u,m,p,h,f,g,b,_,I,x,L,E,T,R,H,F,z,V,$,Z,re=e.state;r=e.next_in,$=e.input,s=r+(e.avail_in-5),a=e.next_out,Z=e.output,l=a-(t-e.avail_out),u=a+(e.avail_out-257),m=re.dmax,p=re.wsize,h=re.whave,f=re.wnext,g=re.window,b=re.hold,_=re.bits,I=re.lencode,x=re.distcode,L=(1<<re.lenbits)-1,E=(1<<re.distbits)-1;e:do{_<15&&(b+=$[r++]<<_,_+=8,b+=$[r++]<<_,_+=8),T=I[b&L];t:for(;;){if(R=T>>>24,b>>>=R,_-=R,R=T>>>16&255,R===0)Z[a++]=T&65535;else if(R&16){H=T&65535,R&=15,R&&(_<R&&(b+=$[r++]<<_,_+=8),H+=b&(1<<R)-1,b>>>=R,_-=R),_<15&&(b+=$[r++]<<_,_+=8,b+=$[r++]<<_,_+=8),T=x[b&E];i:for(;;){if(R=T>>>24,b>>>=R,_-=R,R=T>>>16&255,R&16){if(F=T&65535,R&=15,_<R&&(b+=$[r++]<<_,_+=8,_<R&&(b+=$[r++]<<_,_+=8)),F+=b&(1<<R)-1,F>m){e.msg="invalid distance too far back",re.mode=Jb;break e}if(b>>>=R,_-=R,R=a-l,F>R){if(R=F-R,R>h&&re.sane){e.msg="invalid distance too far back",re.mode=Jb;break e}if(z=0,V=g,f===0){if(z+=p-R,R<H){H-=R;do Z[a++]=g[z++];while(--R);z=a-F,V=Z}}else if(f<R){if(z+=p+f-R,R-=f,R<H){H-=R;do Z[a++]=g[z++];while(--R);if(z=0,f<H){R=f,H-=R;do Z[a++]=g[z++];while(--R);z=a-F,V=Z}}}else if(z+=f-R,R<H){H-=R;do Z[a++]=g[z++];while(--R);z=a-F,V=Z}for(;H>2;)Z[a++]=V[z++],Z[a++]=V[z++],Z[a++]=V[z++],H-=3;H&&(Z[a++]=V[z++],H>1&&(Z[a++]=V[z++]))}else{z=a-F;do Z[a++]=Z[z++],Z[a++]=Z[z++],Z[a++]=Z[z++],H-=3;while(H>2);H&&(Z[a++]=Z[z++],H>1&&(Z[a++]=Z[z++]))}}else if(R&64){e.msg="invalid distance code",re.mode=Jb;break e}else{T=x[(T&65535)+(b&(1<<R)-1)];continue i}break}}else if(R&64)if(R&32){re.mode=TD;break e}else{e.msg="invalid literal/length code",re.mode=Jb;break e}else{T=I[(T&65535)+(b&(1<<R)-1)];continue t}break}}while(r<s&&a<u);H=_>>3,r-=H,_-=H<<3,b&=(1<<_)-1,e.next_in=r,e.next_out=a,e.avail_in=r<s?5+(s-r):5-(r-s),e.avail_out=a<u?257+(u-a):257-(a-u),re.hold=b,re.bits=_},kl=15,HT=852,jT=592,GT=0,Hv=1,VT=2,CD=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),MD=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),RD=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),BD=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),DD=(i,e,t,r,s,a,l,u)=>{let m=u.bits,p=0,h=0,f=0,g=0,b=0,_=0,I=0,x=0,L=0,E=0,T,R,H,F,z,V=null,$,Z=new Uint16Array(kl+1),re=new Uint16Array(kl+1),Me=null,rt,be,me;for(p=0;p<=kl;p++)Z[p]=0;for(h=0;h<r;h++)Z[e[t+h]]++;for(b=m,g=kl;g>=1&&Z[g]===0;g--);if(b>g&&(b=g),g===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,u.bits=1,0;for(f=1;f<g&&Z[f]===0;f++);for(b<f&&(b=f),x=1,p=1;p<=kl;p++)if(x<<=1,x-=Z[p],x<0)return-1;if(x>0&&(i===GT||g!==1))return-1;for(re[1]=0,p=1;p<kl;p++)re[p+1]=re[p]+Z[p];for(h=0;h<r;h++)e[t+h]!==0&&(l[re[e[t+h]]++]=h);if(i===GT?(V=Me=l,$=20):i===Hv?(V=CD,Me=MD,$=257):(V=RD,Me=BD,$=0),E=0,h=0,p=f,z=a,_=b,I=0,H=-1,L=1<<b,F=L-1,i===Hv&&L>HT||i===VT&&L>jT)return 1;for(;;){rt=p-I,l[h]+1<$?(be=0,me=l[h]):l[h]>=$?(be=Me[l[h]-$],me=V[l[h]-$]):(be=32+64,me=0),T=1<<p-I,R=1<<_,f=R;do R-=T,s[z+(E>>I)+R]=rt<<24|be<<16|me|0;while(R!==0);for(T=1<<p-1;E&T;)T>>=1;if(T!==0?(E&=T-1,E+=T):E=0,h++,--Z[p]===0){if(p===g)break;p=e[t+l[h]]}if(p>b&&(E&F)!==H){for(I===0&&(I=b),z+=f,_=p-I,x=1<<_;_+I<g&&(x-=Z[_+I],!(x<=0));)_++,x<<=1;if(L+=1<<_,i===Hv&&L>HT||i===VT&&L>jT)return 1;H=E&F,s[H]=b<<24|_<<16|z-a|0}}return E!==0&&(s[z+E]=p-I<<24|64<<16|0),u.bits=b,0},Pp=DD,ND=0,zA=1,HA=2,{Z_FINISH:WT,Z_BLOCK:OD,Z_TREES:ey,Z_OK:Pa,Z_STREAM_END:FD,Z_NEED_DICT:PD,Z_STREAM_ERROR:Sr,Z_DATA_ERROR:jA,Z_MEM_ERROR:GA,Z_BUF_ERROR:UD,Z_DEFLATED:KT}=Ua,cy=16180,$T=16181,YT=16182,qT=16183,QT=16184,ZT=16185,XT=16186,JT=16187,eA=16188,tA=16189,ay=16190,jn=16191,jv=16192,iA=16193,Gv=16194,rA=16195,nA=16196,sA=16197,aA=16198,ty=16199,iy=16200,oA=16201,lA=16202,cA=16203,uA=16204,pA=16205,Vv=16206,mA=16207,hA=16208,Nt=16209,VA=16210,WA=16211,zD=852,HD=592,jD=15,GD=jD,dA=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function VD(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var za=i=>{if(!i)return 1;let e=i.state;return!e||e.strm!==i||e.mode<cy||e.mode>WA?1:0},KA=i=>{if(za(i))return Sr;let e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=cy,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(zD),e.distcode=e.distdyn=new Int32Array(HD),e.sane=1,e.back=-1,Pa},$A=i=>{if(za(i))return Sr;let e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,KA(i)},YA=(i,e)=>{let t;if(za(i))return Sr;let r=i.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Sr:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,$A(i))},qA=(i,e)=>{if(!i)return Sr;let t=new VD;i.state=t,t.strm=i,t.window=null,t.mode=cy;let r=YA(i,e);return r!==Pa&&(i.state=null),r},WD=i=>qA(i,GD),fA=!0,Wv,Kv,KD=i=>{if(fA){Wv=new Int32Array(512),Kv=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(Pp(zA,i.lens,0,288,Wv,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;Pp(HA,i.lens,0,32,Kv,0,i.work,{bits:5}),fA=!1}i.lencode=Wv,i.lenbits=9,i.distcode=Kv,i.distbits=5},QA=(i,e,t,r)=>{let s,a=i.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>r&&(s=r),a.window.set(e.subarray(t-r,t-r+s),a.wnext),r-=s,r?(a.window.set(e.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0},$D=(i,e)=>{let t,r,s,a,l,u,m,p,h,f,g,b,_,I,x=0,L,E,T,R,H,F,z,V,$=new Uint8Array(4),Z,re,Me=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(za(i)||!i.output||!i.input&&i.avail_in!==0)return Sr;t=i.state,t.mode===jn&&(t.mode=jv),l=i.next_out,s=i.output,m=i.avail_out,a=i.next_in,r=i.input,u=i.avail_in,p=t.hold,h=t.bits,f=u,g=m,V=Pa;e:for(;;)switch(t.mode){case cy:if(t.wrap===0){t.mode=jv;break}for(;h<16;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if(t.wrap&2&&p===35615){t.wbits===0&&(t.wbits=15),t.check=0,$[0]=p&255,$[1]=p>>>8&255,t.check=fi(t.check,$,2,0),p=0,h=0,t.mode=$T;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((p&255)<<8)+(p>>8))%31){i.msg="incorrect header check",t.mode=Nt;break}if((p&15)!==KT){i.msg="unknown compression method",t.mode=Nt;break}if(p>>>=4,h-=4,z=(p&15)+8,t.wbits===0&&(t.wbits=z),z>15||z>t.wbits){i.msg="invalid window size",t.mode=Nt;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=p&512?tA:jn,p=0,h=0;break;case $T:for(;h<16;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if(t.flags=p,(t.flags&255)!==KT){i.msg="unknown compression method",t.mode=Nt;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=Nt;break}t.head&&(t.head.text=p>>8&1),t.flags&512&&t.wrap&4&&($[0]=p&255,$[1]=p>>>8&255,t.check=fi(t.check,$,2,0)),p=0,h=0,t.mode=YT;case YT:for(;h<32;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}t.head&&(t.head.time=p),t.flags&512&&t.wrap&4&&($[0]=p&255,$[1]=p>>>8&255,$[2]=p>>>16&255,$[3]=p>>>24&255,t.check=fi(t.check,$,4,0)),p=0,h=0,t.mode=qT;case qT:for(;h<16;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}t.head&&(t.head.xflags=p&255,t.head.os=p>>8),t.flags&512&&t.wrap&4&&($[0]=p&255,$[1]=p>>>8&255,t.check=fi(t.check,$,2,0)),p=0,h=0,t.mode=QT;case QT:if(t.flags&1024){for(;h<16;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}t.length=p,t.head&&(t.head.extra_len=p),t.flags&512&&t.wrap&4&&($[0]=p&255,$[1]=p>>>8&255,t.check=fi(t.check,$,2,0)),p=0,h=0}else t.head&&(t.head.extra=null);t.mode=ZT;case ZT:if(t.flags&1024&&(b=t.length,b>u&&(b=u),b&&(t.head&&(z=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+b),z)),t.flags&512&&t.wrap&4&&(t.check=fi(t.check,r,b,a)),u-=b,a+=b,t.length-=b),t.length))break e;t.length=0,t.mode=XT;case XT:if(t.flags&2048){if(u===0)break e;b=0;do z=r[a+b++],t.head&&z&&t.length<65536&&(t.head.name+=String.fromCharCode(z));while(z&&b<u);if(t.flags&512&&t.wrap&4&&(t.check=fi(t.check,r,b,a)),u-=b,a+=b,z)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=JT;case JT:if(t.flags&4096){if(u===0)break e;b=0;do z=r[a+b++],t.head&&z&&t.length<65536&&(t.head.comment+=String.fromCharCode(z));while(z&&b<u);if(t.flags&512&&t.wrap&4&&(t.check=fi(t.check,r,b,a)),u-=b,a+=b,z)break e}else t.head&&(t.head.comment=null);t.mode=eA;case eA:if(t.flags&512){for(;h<16;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if(t.wrap&4&&p!==(t.check&65535)){i.msg="header crc mismatch",t.mode=Nt;break}p=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=jn;break;case tA:for(;h<32;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}i.adler=t.check=dA(p),p=0,h=0,t.mode=ay;case ay:if(t.havedict===0)return i.next_out=l,i.avail_out=m,i.next_in=a,i.avail_in=u,t.hold=p,t.bits=h,PD;i.adler=t.check=1,t.mode=jn;case jn:if(e===OD||e===ey)break e;case jv:if(t.last){p>>>=h&7,h-=h&7,t.mode=Vv;break}for(;h<3;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}switch(t.last=p&1,p>>>=1,h-=1,p&3){case 0:t.mode=iA;break;case 1:if(KD(t),t.mode=ty,e===ey){p>>>=2,h-=2;break e}break;case 2:t.mode=nA;break;case 3:i.msg="invalid block type",t.mode=Nt}p>>>=2,h-=2;break;case iA:for(p>>>=h&7,h-=h&7;h<32;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if((p&65535)!==(p>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Nt;break}if(t.length=p&65535,p=0,h=0,t.mode=Gv,e===ey)break e;case Gv:t.mode=rA;case rA:if(b=t.length,b){if(b>u&&(b=u),b>m&&(b=m),b===0)break e;s.set(r.subarray(a,a+b),l),u-=b,a+=b,m-=b,l+=b,t.length-=b;break}t.mode=jn;break;case nA:for(;h<14;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if(t.nlen=(p&31)+257,p>>>=5,h-=5,t.ndist=(p&31)+1,p>>>=5,h-=5,t.ncode=(p&15)+4,p>>>=4,h-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Nt;break}t.have=0,t.mode=sA;case sA:for(;t.have<t.ncode;){for(;h<3;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}t.lens[Me[t.have++]]=p&7,p>>>=3,h-=3}for(;t.have<19;)t.lens[Me[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,Z={bits:t.lenbits},V=Pp(ND,t.lens,0,19,t.lencode,0,t.work,Z),t.lenbits=Z.bits,V){i.msg="invalid code lengths set",t.mode=Nt;break}t.have=0,t.mode=aA;case aA:for(;t.have<t.nlen+t.ndist;){for(;x=t.lencode[p&(1<<t.lenbits)-1],L=x>>>24,E=x>>>16&255,T=x&65535,!(L<=h);){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if(T<16)p>>>=L,h-=L,t.lens[t.have++]=T;else{if(T===16){for(re=L+2;h<re;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if(p>>>=L,h-=L,t.have===0){i.msg="invalid bit length repeat",t.mode=Nt;break}z=t.lens[t.have-1],b=3+(p&3),p>>>=2,h-=2}else if(T===17){for(re=L+3;h<re;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}p>>>=L,h-=L,z=0,b=3+(p&7),p>>>=3,h-=3}else{for(re=L+7;h<re;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}p>>>=L,h-=L,z=0,b=11+(p&127),p>>>=7,h-=7}if(t.have+b>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Nt;break}for(;b--;)t.lens[t.have++]=z}}if(t.mode===Nt)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Nt;break}if(t.lenbits=9,Z={bits:t.lenbits},V=Pp(zA,t.lens,0,t.nlen,t.lencode,0,t.work,Z),t.lenbits=Z.bits,V){i.msg="invalid literal/lengths set",t.mode=Nt;break}if(t.distbits=6,t.distcode=t.distdyn,Z={bits:t.distbits},V=Pp(HA,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Z),t.distbits=Z.bits,V){i.msg="invalid distances set",t.mode=Nt;break}if(t.mode=ty,e===ey)break e;case ty:t.mode=iy;case iy:if(u>=6&&m>=258){i.next_out=l,i.avail_out=m,i.next_in=a,i.avail_in=u,t.hold=p,t.bits=h,AD(i,g),l=i.next_out,s=i.output,m=i.avail_out,a=i.next_in,r=i.input,u=i.avail_in,p=t.hold,h=t.bits,t.mode===jn&&(t.back=-1);break}for(t.back=0;x=t.lencode[p&(1<<t.lenbits)-1],L=x>>>24,E=x>>>16&255,T=x&65535,!(L<=h);){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if(E&&!(E&240)){for(R=L,H=E,F=T;x=t.lencode[F+((p&(1<<R+H)-1)>>R)],L=x>>>24,E=x>>>16&255,T=x&65535,!(R+L<=h);){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}p>>>=R,h-=R,t.back+=R}if(p>>>=L,h-=L,t.back+=L,t.length=T,E===0){t.mode=pA;break}if(E&32){t.back=-1,t.mode=jn;break}if(E&64){i.msg="invalid literal/length code",t.mode=Nt;break}t.extra=E&15,t.mode=oA;case oA:if(t.extra){for(re=t.extra;h<re;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}t.length+=p&(1<<t.extra)-1,p>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=lA;case lA:for(;x=t.distcode[p&(1<<t.distbits)-1],L=x>>>24,E=x>>>16&255,T=x&65535,!(L<=h);){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if(!(E&240)){for(R=L,H=E,F=T;x=t.distcode[F+((p&(1<<R+H)-1)>>R)],L=x>>>24,E=x>>>16&255,T=x&65535,!(R+L<=h);){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}p>>>=R,h-=R,t.back+=R}if(p>>>=L,h-=L,t.back+=L,E&64){i.msg="invalid distance code",t.mode=Nt;break}t.offset=T,t.extra=E&15,t.mode=cA;case cA:if(t.extra){for(re=t.extra;h<re;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}t.offset+=p&(1<<t.extra)-1,p>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Nt;break}t.mode=uA;case uA:if(m===0)break e;if(b=g-m,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Nt;break}b>t.wnext?(b-=t.wnext,_=t.wsize-b):_=t.wnext-b,b>t.length&&(b=t.length),I=t.window}else I=s,_=l-t.offset,b=t.length;b>m&&(b=m),m-=b,t.length-=b;do s[l++]=I[_++];while(--b);t.length===0&&(t.mode=iy);break;case pA:if(m===0)break e;s[l++]=t.length,m--,t.mode=iy;break;case Vv:if(t.wrap){for(;h<32;){if(u===0)break e;u--,p|=r[a++]<<h,h+=8}if(g-=m,i.total_out+=g,t.total+=g,t.wrap&4&&g&&(i.adler=t.check=t.flags?fi(t.check,s,g,l-g):Gp(t.check,s,g,l-g)),g=m,t.wrap&4&&(t.flags?p:dA(p))!==t.check){i.msg="incorrect data check",t.mode=Nt;break}p=0,h=0}t.mode=mA;case mA:if(t.wrap&&t.flags){for(;h<32;){if(u===0)break e;u--,p+=r[a++]<<h,h+=8}if(t.wrap&4&&p!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=Nt;break}p=0,h=0}t.mode=hA;case hA:V=FD;break e;case Nt:V=jA;break e;case VA:return GA;case WA:default:return Sr}return i.next_out=l,i.avail_out=m,i.next_in=a,i.avail_in=u,t.hold=p,t.bits=h,(t.wsize||g!==i.avail_out&&t.mode<Nt&&(t.mode<Vv||e!==WT))&&QA(i,i.output,i.next_out,g-i.avail_out),f-=i.avail_in,g-=i.avail_out,i.total_in+=f,i.total_out+=g,t.total+=g,t.wrap&4&&g&&(i.adler=t.check=t.flags?fi(t.check,s,g,i.next_out-g):Gp(t.check,s,g,i.next_out-g)),i.data_type=t.bits+(t.last?64:0)+(t.mode===jn?128:0)+(t.mode===ty||t.mode===Gv?256:0),(f===0&&g===0||e===WT)&&V===Pa&&(V=UD),V},YD=i=>{if(za(i))return Sr;let e=i.state;return e.window&&(e.window=null),i.state=null,Pa},qD=(i,e)=>{if(za(i))return Sr;let t=i.state;return t.wrap&2?(t.head=e,e.done=!1,Pa):Sr},QD=(i,e)=>{let t=e.length,r,s,a;return za(i)||(r=i.state,r.wrap!==0&&r.mode!==ay)?Sr:r.mode===ay&&(s=1,s=Gp(s,e,t,0),s!==r.check)?jA:(a=QA(i,e,t,t),a?(r.mode=VA,GA):(r.havedict=1,Pa))},ZD=$A,XD=YA,JD=KA,eN=WD,tN=qA,iN=$D,rN=YD,nN=qD,sN=QD,aN="pako inflate (from Nodeca project)",Vn={inflateReset:ZD,inflateReset2:XD,inflateResetKeep:JD,inflateInit:eN,inflateInit2:tN,inflate:iN,inflateEnd:rN,inflateGetHeader:nN,inflateSetDictionary:sN,inflateInfo:aN};function oN(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var lN=oN,ZA=Object.prototype.toString,{Z_NO_FLUSH:cN,Z_FINISH:uN,Z_OK:Kp,Z_STREAM_END:$v,Z_NEED_DICT:Yv,Z_STREAM_ERROR:pN,Z_DATA_ERROR:gA,Z_MEM_ERROR:mN}=Ua;function Qp(i){this.options=ly.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new PA,this.strm.avail_out=0;let t=Vn.inflateInit2(this.strm,e.windowBits);if(t!==Kp)throw new Error(Oa[t]);if(this.header=new lN,Vn.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Wp.string2buf(e.dictionary):ZA.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Vn.inflateSetDictionary(this.strm,e.dictionary),t!==Kp)))throw new Error(Oa[t])}Qp.prototype.push=function(i,e){let t=this.strm,r=this.options.chunkSize,s=this.options.dictionary,a,l,u;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?uN:cN,ZA.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=Vn.inflate(t,l),a===Yv&&s&&(a=Vn.inflateSetDictionary(t,s),a===Kp?a=Vn.inflate(t,l):a===gA&&(a=Yv));t.avail_in>0&&a===$v&&t.state.wrap>0&&i[t.next_in]!==0;)Vn.inflateReset(t),a=Vn.inflate(t,l);switch(a){case pN:case gA:case Yv:case mN:return this.onEnd(a),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||a===$v))if(this.options.to==="string"){let m=Wp.utf8border(t.output,t.next_out),p=t.next_out-m,h=Wp.buf2string(t.output,m);t.next_out=p,t.avail_out=r-p,p&&t.output.set(t.output.subarray(m,m+p),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Kp&&u===0)){if(a===$v)return a=Vn.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Qp.prototype.onData=function(i){this.chunks.push(i)};Qp.prototype.onEnd=function(i){i===Kp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ly.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function uI(i,e){let t=new Qp(e);if(t.push(i),t.err)throw t.msg||Oa[t.err];return t.result}function hN(i,e){return e=e||{},e.raw=!0,uI(i,e)}var dN=Qp,fN=uI,gN=hN,bN=uI,yN=Ua,_N={Inflate:dN,inflate:fN,inflateRaw:gN,ungzip:bN,constants:yN},{Deflate:xN,deflate:vN,deflateRaw:IN,gzip:kN}=LD,{Inflate:SN,inflate:wN,inflateRaw:EN,ungzip:LN}=_N,TN=xN,AN=vN,CN=IN,MN=kN,RN=SN,BN=wN,DN=EN,NN=LN,ON=Ua,pI={Deflate:TN,deflate:AN,deflateRaw:CN,gzip:MN,Inflate:RN,inflate:BN,inflateRaw:DN,ungzip:NN,constants:ON};var de=class i{static encodeMessage(e,t,r){var s=i.createHeadMessage(e,r),a=i.createMessageBase(s,t),l=a.serializeBinary(),u=pI.gzip(l,{windowBits:15,memLevel:8}),m=u.length,p=new Uint8Array([(m&4278190080)>>>24,(m&16711680)>>>16,(m&65280)>>>8,(m&255)>>>0]),h=new Uint8Array(p.byteLength+u.byteLength);return h.set(new Uint8Array(p),0),h.set(new Uint8Array(u),p.byteLength),h}static encodeMessage1(e,t,r){var s=i.createHeadMessage(e,r),a=i.createMessageBase(s,t),l=a.serializeBinary(),u=l.length,m=new Uint8Array([(u&4278190080)>>>24,(u&16711680)>>>16,(u&65280)>>>8,(u&255)>>>0]),p=new Uint8Array(m.byteLength+l.byteLength);return p.set(new Uint8Array(m),0),p.set(new Uint8Array(l),m.byteLength),p}static decodeMessage(e){var t=e,r=new pI.Inflate;r.push(t,!0),r.err&&console.error(r.msg);var s=r.result,a=y.snake.socket.CMsgBase.deserializeBinary(s);return a}static createHeadMessage(e,t,r,s){t||(r=!0),!s&&G.playerDto&&(s=G.playerDto.pid);var a=y.snake.socket.CMsgHead.fromObject({msgtype:e,msgcode:1,roleId:s});return a}static createMessageBase(e,t){var r=y.snake.socket.CMsgBase.fromObject({msghead:e,msgbody:t});return r}static getMsgBody(e,t=null){var r=null,s=e.msghead.msgtype,a=e.msghead.msgcode;return t||(t=Laya.ClassUtils.getClass(s+"")),t?(r=t.deserializeBinary(e.msgbody).toObject(),J.Debug==2&&console.log(ee.GetLogTime,"[DataUtil]  ------<<<<<<<< RECV CMD:"+s+", CODE:",a+", DATA:",r)):console.warn(ee.GetLogTime,"[DataUtil]  ------<<<<<<<< RECV CMD:"+s+", CODE:",a+", className解析失败!"),r}};var Wn=class{};var In=class{};var Ci=class Ci{constructor(){this._m_bPlayMusic=!0;this._m_bPlayeSound=!0;this._musicVolume=1;this._soundVolume=1;this.soundName_bg="bgm";this.soundName_hit="hit.mp3";this.soundName_snakeBuy="snakeBuy.mp3";this.soundName_snakeUpdate="snakeUpdate.mp3";this.soundName_win="result_win.mp3";this.soundName_fail="result_fail.mp3";this.soundName_kill_1="kill_1.mp3";this.soundName_kill_2="kill_2.mp3";this.soundName_kill_3="kill_3.mp3";this.soundName_kill_4="kill_4.mp3";this.soundName_kill_5="kill_5.mp3";this.soundName_kill_t_3="kill_t_3.mp3";this.soundName_kill_t_5="kill_t_5.mp3";this.soundName_kill_t_8="kill_t_8.mp3";this.soundName_eat_food_1="eat_food1.mp3";this.soundName_eat_food_2="eat_food2.mp3";this.soundName_eat_food_3="eat_food3.mp3";this.soundName_kill_die="kill_die.mp3";this.soundName32="ui32.ogg"}static getInstance(){return Ci._instance||(Ci._instance=new Ci),Ci._instance}get m_bPlayMusic(){return this._m_bPlayMusic}set m_bPlayMusic(e){this._m_bPlayMusic=e,e?this.m_strMusicURL!=null&&this.playMusicByURL(this.m_strMusicURL):this.musicChannel&&this.musicChannel.stop()}getMusicVolume(){return this._musicVolume}setMusicVolume(e){this._musicVolume=e,Laya.SoundManager.setMusicVolume(e),this.saveMusicVolume()}getSoundVolume(){return this._soundVolume}setSoundVolume(e){this._soundVolume=e,Laya.SoundManager.setSoundVolume(e),this.saveSoundVolume()}saveMusicVolume(){Laya.LocalStorage.setItem(Ci.COOKIE_CF_MUSIC,this._musicVolume.toString())}saveSoundVolume(){Laya.LocalStorage.setItem(Ci.COOKIE_CF_SOUND,this._soundVolume.toString())}loadVolumeSettings(){let e=Laya.LocalStorage.getItem(Ci.COOKIE_CF_MUSIC);e!=null&&e!==""&&(this._musicVolume=parseFloat(e),Laya.SoundManager.setMusicVolume(this._musicVolume));let t=Laya.LocalStorage.getItem(Ci.COOKIE_CF_SOUND);t!=null&&t!==""&&(this._soundVolume=parseFloat(t),Laya.SoundManager.setSoundVolume(this._soundVolume))}init(){this.loadVolumeSettings();let e=Laya.LocalStorage.getItem(Ci.COOKIE_CF_MUSIC);e!=null&&e!=""&&(this.m_bPlayMusic=parseFloat(e)>0);let t=Laya.LocalStorage.getItem(Ci.COOKIE_CF_SOUND);t!=null&&t!=""&&(this.m_bPlayeSound=parseFloat(t)>0),this.switchMusic(this.m_bPlayMusic),this.switchSound(this.m_bPlayeSound)}get m_bPlayeSound(){return this._m_bPlayeSound}set m_bPlayeSound(e){this._m_bPlayeSound=e}playMusicByURL(e){this.m_bPlayMusic&&(this.m_strMusicURL,this.m_strMusicURL==e&&this.musicChannel,this.m_strMusicURL=e,Laya.SoundManager.stopMusic(),this.musicChannel=Laya.SoundManager.playMusic(e,0,new Laya.Handler(this,this.onComplete)))}playMusicByName(e,t=".ogg"){let r=ie.getSoundURL(e,t);this.playMusicByURL(r)}playSound(e,t=1){this.m_bPlayeSound&&Laya.SoundManager.playSound(e,t,new Laya.Handler(this,this.onComplete))}playSoundByName(e,t=1){let r=ie.getSoundURLogg(e);this.playSound(r,t)}stopSoundByName(e){let t=ie.getSoundURLogg(e);Laya.SoundManager.stopSound(t)}switchMusic(e){let t=e?this._musicVolume:0;Laya.SoundManager.setMusicVolume(t),Ci.getInstance().m_bPlayMusic=e}switchSound(e){let t=e?this._soundVolume:0;Laya.SoundManager.setSoundVolume(t),Ci.getInstance().m_bPlayeSound=e}onComplete(){}};Ci.COOKIE_CF_MUSIC="COOKIE_CF_MUSIC",Ci.COOKIE_CF_SOUND="COOKIE_CF_SOUND";var mI=Ci,Ke=mI.getInstance();var Q=class{};Q.GameConfig={debug:!1,version:"1.0.0",frameRate:"30",defaultVolume:.7,skills:{speedUp:{duration:5,cooldown:10},shield:{duration:3,cooldown:15},magnet:{duration:8,cooldown:20},invisible:{duration:4,cooldown:25}}},Q.uiZOrder={common:1e3,hint:2e3,loading:2001},Q.closeType={cancel:1,close:2,ok:3,keyback:4},Q.JoystickMODE={FIXED:1,MOVED:2},Q.JoystickEventType={JET_TOUCH_BEGIN:1,JET_TOUCH_MOVE:2,JET_TOUCH_END:3},Q.JoystickSize={JoyStickBg:80,JoyStickHandleBg:40},Q.snakeType={SELF:1,OTHERS:2},Q.roomType={1:{1:{1:2,2:3,3:4},2:5,3:6},2:7,3:1,4:8},Q.snakeSpeedRate={default:1,speedUp:2},Q.mapSize={offsetDistance:200,width:64+1280*3+64,height:60+720*4+60,offsetX:64,offsetY:60,movableWidth:3904,movableHeight:2880,defaultMapRes:{width:1280,height:720,resPath:"res/snake/manual/game/img_back.png"}},Q.collision={quadTree:{maxObjects:10,maxLevels:5},snake:{headRadius:18,bodyRadius:14},food:{radius:25,maxRadius:25}},Q.food={size:50,initCount:200,maxCount:300,spawnInterval:1e3},Q.res={snakeRingImg:"res/match2/img_ring.png"},Q.snake={defaultSpeed:6,defaultRotateSpeed:500,defaultLen:20,intervalBoneToDrawSkin:4,defaultRotation:270,defaultRadio:35/2,defaultMoveInterval:.033,defaultInvincibleTime:3,defaultShineInterval:.1,skinFlag:{head:1,body:2},initCount:15,maxCount:25,spawnInterval:1e3,aiMinLen:5,aiMidLen:10,aiMaxLen:80,aiPrefix:"AI",battleCd:10*60*1e3,skinIds:[101,102,103,104,105]},Q.SYNC_CONFIG={MAX_ALLOWED_ERROR:50,CORRECTION_TIME:300,SYNC_INTERVAL:100,PREDICTION_MULTIPLIER:1.2},Q.invincibleRing={margin:2,minScale:.5};var yt=class{static clamp(e,t,r){return Math.max(t,Math.min(r,e))}static lerp(e,t,r){return e+(t-e)*r}static angleToRadian(e){return e*Math.PI/180}static radianToAngle(e){return e*180/Math.PI}static randomRange(e,t){return e+Math.random()*(t-e)}static randomInt(e,t){return Math.floor(this.randomRange(e,t+1))}static getDistance(e,t){let r=e.x-t.x,s=e.y-t.y;return Math.sqrt(r*r+s*s)}static getVecDistance(e,t){let r=e.x-t.x,s=e.y-t.y;return Math.sqrt(r*r+s*s)}static distance(e,t,r,s){let a=e-r,l=t-s;return Math.sqrt(a*a+l*l)}static getAngle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}};yt.PI2=Math.PI*2;var FN=20,PN=8,Zp=class i{constructor(e,t=0,r){this.bounds=e;this.level=t;this.objects=[];this.nodes=[];this.root=r||this}insert(e){if(this.nodes.length>0){let t=this.getIndex(e);if(t!==void 0&&t!==-1){this.nodes[t].insert(e);return}}this.objects.push(e),this.shouldSplit()&&this.splitAndRedistribute()}retrieve(e){let t=new Set,r=this.getIndexes(e);if(this.nodes.length>0)for(let s of r)s===-1?this.nodes.forEach(a=>{a.retrieve(e).forEach(l=>t.add(l))}):this.nodes[s]?.retrieve(e).forEach(a=>t.add(a));return this.objects.forEach(s=>{s!==e&&t.add(s)}),Array.from(t)}refresh(){let e=[];for(let t=this.objects.length-1;t>=0;t--){let r=this.objects[t];this.isInBounds(r)||(e.push(r),this.objects.splice(t,1))}e.forEach(t=>this.root.insert(t)),this.nodes.forEach(t=>t.refresh())}remove(e){let t=this.objects.indexOf(e);if(t>-1)return this.objects.splice(t,1),!0;if(this.nodes.length>0){for(let r of this.nodes)if(r.remove(e))return!0}return!1}isInBounds(e){return i.checkBounds(this.bounds,e.getBoundingBox())}shouldSplit(){return this.nodes.length===0&&this.objects.length>FN&&this.level<PN}splitAndRedistribute(){this.split();for(let e=this.objects.length-1;e>=0;e--){let t=this.objects[e],r=this.getIndex(t);r!==void 0&&r!==-1&&(this.nodes[r].insert(t),this.objects.splice(e,1))}}split(){if(this.nodes.length>0)return;let e=this.bounds.x,t=this.bounds.y,r=this.bounds.width/2,s=this.bounds.height/2;this.nodes=[new i(new Laya.Rectangle(e+r,t+s,r,s),this.level+1,this.root),new i(new Laya.Rectangle(e,t+s,r,s),this.level+1,this.root),new i(new Laya.Rectangle(e,t,r,s),this.level+1,this.root),new i(new Laya.Rectangle(e+r,t,r,s),this.level+1,this.root)]}getIndex(e){let t=e.getBoundingBox();if(!i.checkBounds(this.bounds,t))return;let r=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,a=t.y<s,l=t.y+t.height>s,u=t.x<r,m=t.x+t.width>r;return u&&m||a&&l?-1:t.x>=r?t.y>=s?0:3:t.y>=s?1:2}getIndexes(e){let t=e.getBoundingBox(),r=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,a=t.y<s,l=t.y+t.height>s,u=t.x<r,m=t.x+t.width>r,p=[];return u&&a&&p.push(2),m&&a&&p.push(3),u&&l&&p.push(1),m&&l&&p.push(0),u&&m&&(a?(p.push(2),p.push(3)):l&&(p.push(1),p.push(0))),a&&l&&(u?(p.push(2),p.push(1)):m&&(p.push(3),p.push(0))),p.length===4&&p.push(-1),p}static checkBounds(e,t){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}raycast(e,t,r){if(!this.intersectsRay(e,t))return!1;for(let s of this.objects)if(r(s)&&this.checkRayCollision(e,t,s.getBoundingBox()))return!0;return this.nodes.some(s=>s.raycast(e,t,r))}intersectsRay(e,t){return i.rayIntersectsAABB(e.x,e.y,t.x-e.x,t.y-e.y,this.bounds)}checkRayCollision(e,t,r){return i.rayIntersectsAABB(e.x,e.y,t.x-e.x,t.y-e.y,r)}static rayIntersectsAABB(e,t,r,s,a){if(e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height)return!0;let l=0,u=1;if(Math.abs(r)>1e-6){let m=(a.x-e)/r,p=(a.x+a.width-e)/r;l=Math.max(l,Math.min(m,p)),u=Math.min(u,Math.max(m,p))}else if(e<a.x||e>a.x+a.width)return!1;if(Math.abs(s)>1e-6){let m=(a.y-t)/s,p=(a.y+a.height-t)/s;l=Math.max(l,Math.min(m,p)),u=Math.min(u,Math.max(m,p))}else if(t<a.y||t>a.y+a.height)return!1;return u>=l&&l<=1&&u>=0}clear(){this.objects=[],this.nodes.forEach(e=>e.clear()),this.nodes=[]}drawDebug(e){this.bounds.width<3e3&&(e.drawRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height,this.level%2===0?"#ff0000":"#00ff00",this.level%2===0?"#ff0000":"#00ff00",this.level),e.fillText(`L: ${this.level}`,this.bounds.x+this.bounds.width/2,this.bounds.y+this.bounds.height/2,"16px Arial","#ffffff","center")),this.objects.forEach(t=>{let r=t.getBoundingBox();e.drawRect(r.x,r.y,r.width,r.height,this.level%2===0?"#0000ff":"#00ff00",this.level%2===0?"#ff0000":"#00ff00",this.level),e.fillText(`L: ${this.level}`,r.x+r.width/2,r.y+r.height/2,"14px Arial","#ffffff","center")}),this.nodes.forEach(t=>t.drawDebug(e))}};var Ha=class Ha{static getInstance(e=null){return Ha.instance||(e||(e=new Laya.Rectangle(0,0,Q.mapSize.width,Q.mapSize.height)),Ha.instance=new Ha(e)),Ha.instance}constructor(e){this.quadTree=new Zp(e)}addSnake(e){e.forEach(t=>{this.quadTree.insert(t)})}addBodySkin(e){this.quadTree.insert(e)}removeSnake(e){e.forEach(t=>{this.quadTree.remove(t)})}removeBodySkin(e){this.quadTree.remove(e)}refresh(){this.quadTree.refresh()}drawDebug(e){this.quadTree.drawDebug(e)}retrieve(e){return this.quadTree.retrieve(e)}raycast(e,t,r){return this.quadTree.raycast(e,t,r)}getAllCollidables(){return this._getAllFromQuadTree(this.quadTree)}_getAllFromQuadTree(e){let t=[...e.objects];return e.nodes.forEach(r=>{t=t.concat(this._getAllFromQuadTree(r))}),t}};Ha.instance=null;var wr=Ha;var xe=class{};xe.matchType=0,xe.MATCH_TYPE_PVP=1,xe.MATCH_TYPE_PVE=3,xe.arenaType=0,xe.ARENA_TYPE_PVP=1,xe.ARENA_TYPE_JULEBU=2,xe.ARENA_TYPE_PVE=3,xe.ARENA_TYPE_TEAM=4,xe.ROOM_TYPE_AI=1,xe.ROOM_TYPE_SHEQU=2,xe.ROOM_TYPE_VIP=3,xe.ROOM_TYPE_JINGYING=4,xe.ROOM_TYPE_JULEBU=5,xe.ROOM_TYPE_CUSTOM=6,xe.ROOM_TYPE_MATCH=7,xe.ACTION_CREATE=1,xe.ACTION_JOIN=2,xe.ACTION_SIGNUP=3,xe.ACTION_WATCH=4,xe.ACTION_CREATE_BOOKING=5,xe.ACTION_JOIN_BOOKING=6,xe.STATE_WAIT=0,xe.STATE_SIGNUP=2,xe.STATE_GROUPED=3,xe.STATE_START=10,xe.CAMERA_IDLE=0,xe.CAMERA_FOLLOW_ME=1,xe.CAMERA_MAP_CLICK=2,xe.CAMERA_DIRECT_OPERATE=3,xe.CAMERA_FOLLOW_OTHER=4,xe.MATCHEND_REWARD=1,xe.MATCHEND_QUAN=2,xe.MATCHEND_DIEJIA=3,xe.PREDICT_TYPE_ROLLBACK=1,xe.PREDICT_TYPE_NO_ROLLBACK=2,xe.TARGET_TYPE_NULL=0,xe.TARGET_TYPE_POS=1,xe.TARGET_TYPE_SNAKE=2,xe.TARGET_TYPE_FOOD=3;var uy=class extends Laya.Image{};var{regClass:UN}=Laya,Kr=class extends uy{set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&(this.skin=ie.getSnakeBodyIcon(this.roomPlayerDto.skin))}setRotation(t){this.rotation=t}setScale(t){let r=this.width,s=this.height,a=t*2/r,l=t*2/s;this.scaleX=a,this.scaleY=l}setAlpha(t){this.alpha=t}setGray(t){this.gray=t}getRadio(){return this.width*this.scaleX/2}onDisable(){this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(Kr.POOL_NAME,this)}};Kr.POOL_NAME="MatchSnakeBodySpr",Kr=U([UN("Aeyt_emSSaCC6Np5nR_evQ")],Kr);var $r=class $r{constructor(){}static trim(e,t=null){t||(t=[" ","\r",`
`,"	",String.fromCharCode(65279)]);var r,s,a;for(r=e,a=t.length,s=0;s<a;s++)r=$r.getReplace(r,t[s],"");return r}static getReplace(e,t,r){if(!e)return"";var s;return s=e.replace(new RegExp(t,"g"),r),s}static isEmpty(e){return e.length<1?!0:$r.emptyStrDic.hasOwnProperty(e)}static trimLeft(e){var t;t=0;var r;for(r=e.length;$r.isEmpty(e.charAt(t))&&t<r;)t++;return t<r?e.substr(t):""}static trimRight(e){var t;for(t=e.length-1;$r.isEmpty(e.charAt(t))&&t>=0;)t--;var r;return r=e.substring(0,t),t>=0?e.substring(0,t+1):""}static trimSide(e){var t;return t=$r.trimLeft(e),t=$r.trimRight(t),t}static shortStr(e,t){return e.length>t?e.substr(0,t)+"...":e}static shortHeroStr(e,t=10){return $r.abbreviateString(e,t)}static abbreviateString(e,t=11){if(e.length<=t)return e;{let r=Math.floor((t-3)/2);return e.slice(0,r)+"..."+e.slice(-r)}}static caseInsensitiveSearchWithRegex(e,t){return new RegExp(t,"i").test(e)}static formatWalletAddress(e){let s="...";return e.length<=12+10?e:`${e.substring(0,12)}${s}${e.substring(e.length-10)}`}};$r.ANONYMOUS_NAME="***",$r.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"	":!0};var Yr=$r;var py=class extends Laya.Sprite{};var{regClass:zN}=Laya,qr=class extends py{constructor(){super();this.isMe=!1;this.inGround=!1;this.speedRate=1;this.moveSpeed=10;this._speed=10;this.biasSpeed=0;this._roleDirection=-1;this.lastX=0}get speed(){return this._speed}set speed(t){this._speed=t,this.biasSpeed=Math.round(this.speed*Math.sin(45*Math.PI/180))}get roleDirection(){return this._roleDirection}set roleDirection(t){t!==-4&&(this._roleDirection=t)}set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&(this.heroSk.skin=ie.getSnakeHeadIcon(this.roomPlayerDto.skin),this.tf_name.text=Yr.abbreviateString(this.roomPlayerDto.userName),this.roomPlayerDto.roleId==G.playerDto.pid&&(this.tf_name.color="#00FF00"))}set x(t){super.x=t}get x(){return super.x}set visible(t){super.visible=t,this.smallHeroImg&&(this.smallHeroImg.visible=t)}get visible(){return super.visible}set alpha(t){super.alpha=t,this.smallHeroImg&&(this.smallHeroImg.alpha=t)}onAwake(){}showDamageLabelDetailDelay(t,r,s){Laya.timer.once(r,this,this.showDamageLabelDetail,[t,s],!1)}showDamageLabelDetail(t,r){var s=Laya.Pool.getItemByCreateFun("damageNumber",ie.damageNumPrefab.create,ie.damageNumPrefab);s.init(t,r),this.addChild(s)}setRotation(t){this.heroSk.rotation=t}setScale(t){let r=this.heroSk.width,s=this.heroSk.height,a=t*2/r,l=t*2/s;this.heroSk.scaleX=a,this.heroSk.scaleY=l}setAlpha(t){this.heroSk.alpha=t}setGray(t){this.heroSk.gray=t}getRadio(){return this.heroSk.width*this.heroSk.scaleX/2}onDisable(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(qr.POOL_NAME,this)}setClientScore(t){this.tf_pos.text=`${t}`}setServerPosLog(t,r,s,a,l){J.Debug==2&&console.log(ee.GetLogTime+` ${this.roomPlayerDto.roleId} S：(${r.loc.x}, ${r.loc.y}, ${s}, dir：${a}, aimDir：${l}, ${t})`)}showLogInHead(t){this.tf_server_pos.text=`${t}`}destroy(t){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.owner=null,this.roomPlayerDto=null,super.destroy(t)}};qr.POOL_NAME="MatchSnakeSpr",qr=U([zN("tWPXV-AGQQ2kGHES5HnI0w")],qr);var ja=class ja{get gameMap(){return this._gameMap}set gameMap(e){this._gameMap=e}static getInstance(){return ja._instance||(ja._instance=new ja),ja._instance}constructor(){}init(){}destroy(){this._gameMap=null,this.img_smallMap=null}move(e){if(!e)return;let t=Q.mapSize,r=Laya.stage.width,s=Laya.stage.height;var a=0,l=0;e.x>r/2&&e.x<t.width-.5*r?a=-(e.x-r/2):e.x<=r/2?a=0:e.x>=t.width-.5*r&&(a=-(t.width-r)),e.y>s/2&&e.y<t.height-.5*s?l=-(e.y-s/2):e.y<=s/2?l=0:e.y>=t.height-.5*s&&(l=-(t.height-s));var u=ft.distancePoint(a,l,this.gameMap.x,this.gameMap.y);u<200&&(a=ft.lerp(this.gameMap.x,a,.3),l=ft.lerp(this.gameMap.y,l,.3)),this.gameMap.pos(a,l)}};ja._instance=null;var hI=ja,Ui=hI.getInstance();var Kn=class Kn{constructor(e,t,r,s,a){this.alpha=.3;this.lastX=0;this.lastY=0;this._manualVisible=!0;this.updateData(e,t,r,s,a)}getCollisionPoint(){var e=new y.snake.socket.PointObject;return e.x=this.logicPos.x,e.y=this.logicPos.y,e}getThead(){var e=new y.snake.socket.SnakeObject,t=new y.snake.socket.PointObject,r=this.owner.getCollisionHeadPosition();return t.x=r.x,t.y=r.y,e.loc=t,e}updateData(e,t,r,s,a){if(this.pos=new tt(Kn.INIT_POS,Kn.INIT_POS),this.logicPos=new tt(Kn.INIT_POS,Kn.INIT_POS),this.tag=s,this.owner=a,this.owner.isLogicSnake?this.alpha=1:this.alpha=.3,e===Q.snake.skinFlag.head){let l=Laya.Pool.getItemByCreateFun(qr.POOL_NAME,ie.roleAniPrefab.create,ie.roleAniPrefab);l.owner=this,this.node=l,l.dataSource=s,this.owner.isLogicSnake||(this.smallHeroImg=new Laya.Image,this.updateSmallHeroImg(),Ui.img_smallMap.addChild(this.smallHeroImg))}else{let l=Laya.Pool.getItemByCreateFun(Kr.POOL_NAME,ie.matchSnakeBodyPrefab.create,ie.matchSnakeBodyPrefab);this.node=l,l.dataSource=s}this.skinFlag=e,this.node.tag=s,this.owner.isLogicSnake||t.addChild(this.node)}reset(e,t,r,s,a){this.updateData(e,t,r,s,a)}resetForPool(){this.destroy()}destroy(){se.getInstance().removeBodySkin(this),this.node&&(Laya.Tween.clearAll(this.node),this.node.removeSelf()),this.smallHeroImg&&this.smallHeroImg.removeSelf(),this.pos=null,this.logicPos=null,this.node=null,this.owner=null,this.tag=null}updateSmallHeroImg(){if(this.smallHeroImg)if(this.owner.isSelf){this.smallHeroImg.skin="res/match2/img_dian1.png";var e=15,t=15;this.smallHeroImg.size(e,t),this.smallHeroImg.pivot(e/2,t/2)}else if(this.owner.tag.roleId==se.getInstance().kingId){this.smallHeroImg.skin="res/match2/img_phb_icon2.png";var r=21,s=19;this.smallHeroImg.size(r,s),this.smallHeroImg.pivot(r/2,s/2)}else{this.smallHeroImg.skin="res/match2/img_dian2.png";var a=4,l=4;this.smallHeroImg.size(a,l),this.smallHeroImg.pivot(a/2,l/2)}}setPosition(e){if(this.smallHeroImg){var t=ft.fromBigToSmall(e.x,e.y),r=t[0],s=t[1];this.smallHeroImg.pos(r,s)}var a,l;if(this.pos.x!=Kn.INIT_POS||this.pos.y!=Kn.INIT_POS)if(this.isHead){var u=ft.distancePoint(e.x,e.y,this.node.x,this.node.y);a=ft.lerp(this.node.x,e.x,this.alpha),l=ft.lerp(this.node.y,e.y,this.alpha)}else a=ft.lerp(this.node.x,e.x,this.alpha),l=ft.lerp(this.node.y,e.y,this.alpha);else a=e.x,l=e.y;this.node.pos(a,l),this.pos.x=a,this.pos.y=l,this.logicPos.x=e.x,this.logicPos.y=e.y,J.Debug==2&&this.skinFlag===Q.snake.skinFlag.head&&this.owner.isLogicSnake,this.updateFinalVisibility()}getPosition(){return this.pos}getLoogicPosition(){return this.logicPos}gotoDiePos(){return;if(this.smallHeroImg){var e,t,r;this.smallHeroImg.pos(t,r)}}setRotation(e){this.node.setRotation(e)}setLocalZOrder(e){this.node.zOrder=e}updateAlpha(e,t){let r=t==1?1:.75;this.node.setAlpha(r)}updateScale(e,t){let r=e*(1+.1*t);this.setScale(r)}setScale(e){this.node.setScale(e)}getRadio(){return this.node.getRadio()}setGray(e){this.node.setGray(e)}isVisible(){return this.node.visible}getBoundingBox(){let e;return this.isHead?e=this.owner.suctionRadius:e=this.getRadio(),this.owner.isLogicSnake?new Laya.Rectangle(this.logicPos.x-e,this.logicPos.y-e,e*2,e*2):new Laya.Rectangle(this.pos.x-e,this.pos.y-e,e*2,e*2)}getSkinFlag(){return this.skinFlag}checkCollision(e,t,r,s){let a=s?this.getLoogicPosition():this.getPosition();return yt.distance(a.x,a.y,e,t)<r+this.getRadio()}get isHead(){return this.skinFlag===Q.snake.skinFlag.head}setServerPosLog(e,t,r,s,a){this.skinFlag===Q.snake.skinFlag.head&&this.node.setServerPosLog(e,t,r,s,a)}showLogInHead(e){this.skinFlag===Q.snake.skinFlag.head&&this.node.showLogInHead(e)}setClientScore(e){this.skinFlag===Q.snake.skinFlag.head&&this.node.setClientScore(e)}setVisible(e){this._manualVisible=e,this.updateFinalVisibility(),this.smallHeroImg&&(this.smallHeroImg.visible=e)}updateFinalVisibility(){let e=this.checkInScreen(),t=this._manualVisible&&e;this.node.visible=t}checkInScreen(){let e=Ui.gameMap;if(!e)return!1;let t=-e.x,r=-e.y,s=this.pos.x-t,a=this.pos.y-r,l=Laya.stage.width,u=Laya.stage.height,m=this.isHead?this.owner.suctionRadius:this.getRadio()*this.node.scaleX,p=m*1.5;return s+m+p>0&&s-m-p<l&&a+m+p>0&&a-m-p<u}};Kn.INIT_POS=-1e6;var Qi=Kn;var Ga=class{static checkCollisions(e,t,r,s){var a=!1;if(e.getIsSend(a))return;let l=Q.mapSize;if(e&&e.tag){let x=e.getHeadCollisionBounds(a);if(x&&(x.x<l.offsetX||x.x+x.width>l.width-l.offsetX||x.y<l.offsetY||x.y+x.height>l.height-l.offsetY)){e.isAlive(a)&&(e.readyDie(),e.setIsSend(!0,a));return}if(e.isAlive(a)&&!e.getIsStop(a)){if(!e.getHeadCollisionBounds(a))return;{let T=_t.getAllFoods();var u=[],m=0;if(T.forEach(R=>{if(!R.getHaveEaten(s)&&e.checkFoodCollision(R,a)){J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST 显示蛇 吃 foodId：",R.foodObject.unkey,"currentFrame:"+ke.getClientRuningFrame(a),"isLogicSnake:"+a,"hasConfirmed:"+s),R.beEattenByPlayerSnake(e,a,s),u.push(R.foodObject.unkey);var H=R.getScore();m+=H}}),u&&u.length>0){var p=new Wn;p.fid=u,p.score=m;var h=e.getScore(a)+m,f=e.getSkinLength(a),g=e.tag.snakeId,b=se.getInstance().countSnakeLen(g,f,h,e.intervalBoneToDrawSkin(a));p.lenght=b,p.roleId=e.tag.roleId,p.score=h,p.remain=[],se.getInstance().eatFoodAndAddScore(p,a),J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST 显示蛇 吃到了食物","roleId:"+e.tag.roleId,"foodIds:["+u+"], totalScore:"+h,"newLen:"+b,"currentFrame:"+ke.getClientRuningFrame(a),"isLogicSnake:"+a,"hasConfirmed:"+s)}}}let L=se.getInstance().getBodySkinsWithOutOne(e,a);for(let E of L)if(E.owner.owner!==e&&e.checkBodyCollision(E,a))if(!e.isInvincible(a)&&!E.owner.owner.isInvincible(a)){if(e.isAlive(a)&&E.owner.owner.isAlive(a)&&!e.isViewReadyDie&&!E.owner.owner.isViewReadyDie){var _=!1,I=!E.isHead;if((I||e.len(a)<E.owner.owner.len(a)||e.len(a)==E.owner.owner.len(a)&&e.tag.enterTime>=e.tag.enterTime)&&(_=!0),_){e.readyDie(),e.setIsSend(!0,a);return}}}else console.log(e.tag.roleId+" 或者 "+E.owner.tag.roleId+" 处于无敌状态！")}}static checkCollisionsWithConfirm(e,t,r,s){var a=!0;if(e.getIsSend(a)||!s)return;let l=Q.mapSize;if(e&&e.tag){let F=e.getHeadCollisionBounds(a);if(F&&(F.x<l.offsetX||F.x+F.width>l.width-l.offsetX||F.y<l.offsetY||F.y+F.height>l.height-l.offsetY)){if(e.isAlive(a)){e.sendDie();var u=e.getToLoogicServerHead(a),m=y.snake.socket.MessageType.MSG_PLAYER_COLLISION,p=y.snake.socket.CS_PLAYER_COLLISION.fromObject({roleId:e.tag.roleId,head:u,frame:ke.getClientRuningFrame(a),body:!1});je.sendData(m,p),e.setIsSend(!0,a)}return}if(e.isAlive(a)&&!e.getIsStop(a)){if(!e.getHeadCollisionBounds(a))return;if(s){let $=_t.getAllFoods();var h=[],f=0;if($.forEach(Z=>{if(!Z.getHaveEaten(s)&&e.checkFoodCollision(Z,a)){J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST 逻辑蛇 确认帧 吃 foodId：",Z.foodObject.unkey,"currentFrame:"+ke.getClientRuningFrame(a),"isLogicSnake:"+a,"hasConfirmed:"+s),Z.beEattenByPlayerSnake(e,a,s),h.push(Z.foodObject.unkey);var re=Z.getScore();f+=re}}),h&&h.length>0){var g=new Wn;g.fid=h,g.score=f;var b=e.getScore(a)+f,_=e.getSkinLength(a),I=e.tag.snakeId,x=se.getInstance().countSnakeLen(I,_,b,e.intervalBoneToDrawSkin(a));g.lenght=x,g.roleId=e.tag.roleId,g.score=b,g.remain=[],se.getInstance().eatFoodAndAddScore(g,a),J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST SEND 112 逻辑蛇 确认帧 吃到了食物","roleId:"+e.tag.roleId,"foodIds:["+h+"], totalScore:"+b,"newLen:"+x,"currentFrame:"+ke.getClientRuningFrame(a),"isLogicSnake:"+a,"hasConfirmed:"+s);var L=e.tag.roleId,u=e.getToServerHead(a),m=y.snake.socket.MessageType.MSG_EAT_FOOD,E=y.snake.socket.CS_EAT_FOOD.fromObject({roleId:L,fid:h,head:u,frame:ke.getClientRuningFrame(a)});je.sendData(m,E)}}}if(!s)return;let z=se.getInstance().getBodySkinsWithOutOne(e,a);for(let V of z)if(V.owner.owner!==e&&e.checkBodyCollision(V,a))if(!e.isInvincible(a)&&!V.owner.owner.isInvincible(a)){if(e.isAlive(a)&&V.owner.owner.isAlive(a)&&!e.isLogicReadyDie&&!V.owner.owner.isLogicReadyDie){var T=!1,R=!V.isHead;if((R||e.len(a)<V.owner.owner.len(a)||e.len(a)==V.owner.owner.len(a)&&e.tag.enterTime>=e.tag.enterTime)&&(T=!0),T){e.sendDie();var R=!V.isHead,H=V.owner.tag.roleId,u=e.getToLoogicServerHead(a),m=y.snake.socket.MessageType.MSG_PLAYER_COLLISION,p=y.snake.socket.CS_PLAYER_COLLISION.fromObject({roleId:e.tag.roleId,target:H,head:u,frame:ke.getClientRuningFrame(a),body:R,point:V.getCollisionPoint(),thead:V.getThead()});je.sendData(m,p),console.warn(ee.GetLogTime+"Snake DIE CMD:113 发送了 玩家 "+p.roleId+" 碰撞 数据",p),e.setIsSend(!0,a);return}}}else console.log(e.tag.roleId+" 或者 "+V.owner.tag.roleId+" 处于无敌状态！")}}static checkCollisionsWithPve(e,t,r,s){var a=!1;let l=Q.mapSize;if(e&&e.tag){J.Debug==2&&console.log("碰撞检测",e.tag.roleId);let F=e.getHeadCollisionBounds(a);if(F){var u=l.offsetX,m=l.offsetY;if(e.isAi&&(u+=50,m+=50),F.x<u||F.x+F.width>l.width-u||F.y<m||F.y+F.height>l.height-m){if(e.isAlive(a))if(e.isAi){var p=tt.create(l.width/2,l.height/2);e.goTargetPos(p)}else e.pveDie();return}}if(e.isAlive(a)&&!e.getIsStop(a)){if(!e.getHeadCollisionBounds(a))return;if(s){let $=r.retrieve(e.getHead(a)).filter(Z=>Z instanceof kn);var h=[],f=[],g=0;if($.forEach(Z=>{if(f.push(Z.foodObject.unkey),!Z.getHaveEaten(s)&&e.checkFoodCollision(Z,a)){Z.beEattenByPlayerSnake(e,a,s),h.push(Z.foodObject.unkey);var re=Z.getScore();g+=re}}),h&&h.length>0){var b=new Wn;b.fid=h,b.score=g;var _=e.getScore(a)+g,I=e.getSkinLength(a),x=e.tag.snakeId,L=se.getInstance().countSnakeLen(x,I,_,e.intervalBoneToDrawSkin(a));b.lenght=L,b.roleId=e.tag.roleId,b.score=_,b.remain=[],se.getInstance().eatFoodAndAddScore(b,a)}}}let z=r.retrieve(e.getHead(a)).filter(V=>V instanceof Qi);for(let V of z)if(V.owner.owner!==e&&e.checkBodyCollision(V,a))if(!e.isInvincible(a)&&!V.owner.owner.isInvincible(a)){if(e.isAlive(a)&&V.owner.owner.isAlive(a)&&!e.isViewReadyDie&&!V.owner.owner.isViewReadyDie){var E=!1,T=!V.isHead;if((T||e.len(a)<V.owner.owner.len(a)||e.len(a)==V.owner.owner.len(a)&&e.tag.enterTime>=V.owner.tag.enterTime)&&(E=!0),E){e.pveDie(),V.owner.owner.addKill(1);var R=V.owner.owner,H=X.getSheetDataByMultiKey(X.m_dicSnakeLengthRules,[R.tag.snakeId,R.getSkinLength(!1)]),g=Math.ceil(H.consumePoints/3),b=new Wn;b.fid=[],b.score=g;var _=R.getScore(a)+g,I=R.getSkinLength(a),x=R.tag.snakeId,L=se.getInstance().countSnakeLen(x,I,_,R.intervalBoneToDrawSkin(a));b.lenght=L,b.roleId=R.tag.roleId,b.score=_,b.remain=[],se.getInstance().eatFoodAndAddScore(b,a);break}}}else console.log(e.tag.roleId+" 或者 "+V.owner.tag.roleId+" 处于无敌状态！")}}};var my=class{constructor(e){this.state="searching";this.target=null;this.targetType=0;this.dangerDistance=100;this.viewDistance=300;this.ATTACK_OFFSET=30;this.PREDICT_FACTOR=.8;this.SAFE_ANGLE=45;this.DANGER_CHECK_DIST=150;this.CAN_ATTACK_DIST=300;this.escapeTarget=null;this.lastEscapeTime=0;this.ESCAPE_COOLDOWN=2;this.snake=e,this.collision=wr.getInstance(null)}update(){if(!this.snake.isAlive(!1))return;if(this.checkImmediateDanger()){this.escapeBehavior(null);return}let e=this.findNearestFood(),t=this.findNearestThreat();if(this.updateState(e,t),J.Debug==2){var r=e&&e.foodObject.unkey,s=t&&t.tag&&t.tag.roleId,a=t&&t.isAlive(!1),l=this.target&&this.target.x+", "+this.target.y,u=this.state+"_"+r+"_"+s+"_"+a+"_"+l+"_"+this.targetType;console.debug("AI_TEST: roleId: "+this.snake.tag.roleId+", tip: "+u),this.snake.showLogInHead(u,!1)}switch(this.state){case"searching":this.searchBehavior(e);break;case"pursuing":this.pursueBehavior();break;case"escaping":this.escapeBehavior(t);break;case"attacking":let m=this.findNearestAttackSelf();this.attackBehavior(m);break}}checkImmediateDanger(){let e=this.snake.getCollisionHeadPosition(!1);return this.collision.retrieve(this.snake.getHead(!1)).filter(r=>r instanceof Qi&&r.owner.owner!==this.snake&&r.owner.owner.isAlive(!1)&&yt.getVecDistance(e,r.getPosition())<this.snake.getRadio(!1)*3).length>0}updateState(e,t){let r=this.findNearestAttackSelf(),s=r&&this.snake.getLength(!1)>r.getLength(!1)*1.2&&this.isPathSafe(r);t&&this.isInDangerRange(t)?this.state="escaping":s?(this.state="attacking",this.setTarget(null,xe.TARGET_TYPE_NULL)):e?this.state="pursuing":this.state="searching"}isPathSafe(e){let t=this.predictTargetPosition(e);return!this.collision.raycast(this.snake.getCollisionHeadPosition(!1),t,r=>r instanceof Qi&&r.owner.owner!==this.snake)}isInAttackRange(e){return yt.getVecDistance(this.snake.getCollisionHeadPosition(!1),e.getCollisionHeadPosition(!1))<this.viewDistance}findNearestFood(){let e=this.snake.getHead(!1),t=this.collision.retrieve(e).filter(l=>l instanceof kn),r=null,s=this.viewDistance,a=this.snake.getCollisionHeadPosition(!1);for(let l of t){let u=yt.distance(a.x,a.y,l.getPosition().x,l.getPosition().y);u<s&&(s=u,r=l)}return r}findNearestThreat(){let e=this.snake.getHead(!1),t=this.collision.retrieve(e).filter(l=>l instanceof Qi&&l.getSkinFlag()===Q.snake.skinFlag.head).map(l=>l.owner.owner).filter(l=>l!==this.snake&&l.isAlive(!1)&&l.getLength(!1)>=this.snake.getLength(!1)),r=null,s=this.viewDistance,a=this.snake.getCollisionHeadPosition(!1);for(let l of t){let u=yt.distance(a.x,a.y,l.getCollisionHeadPosition(!1).x,l.getCollisionHeadPosition(!1).y);u<s&&(s=u,r=l)}return r}findNearestAttackSelf(){var e=se.getInstance().selfSnake,t=e!==this.snake&&e.isAlive(!1)&&!e.isInvincible(!1)&&e.getLength(!1)<this.snake.getLength(!1);let r=null,s=this.snake.getCollisionHeadPosition(!1),a=e.getCollisionHeadPosition(!1),l=yt.distance(s.x,s.y,a.x,a.y);return t&&l<this.CAN_ATTACK_DIST&&(r=e),J.Debug==2&&console.debug("AI_TEST: roleId: "+this.snake.tag.roleId+", findNearestAttackSelf: distance: ",l+", headPos: ",s,", selfHeadPos:",a),r}findNearestAttackTarget(){let e=this.snake.getHead(!1),t=this.collision.retrieve(e).filter(l=>l instanceof Qi&&l.getSkinFlag()===Q.snake.skinFlag.head).map(l=>l.owner.owner).filter(l=>l!==this.snake&&l.isAlive(!1)&&!l.isInvincible(!1)&&l.getLength(!1)<this.snake.getLength(!1)),r=null,s=this.viewDistance,a=this.snake.getCollisionHeadPosition(!1);for(let l of t){let u=yt.distance(a.x,a.y,l.getCollisionHeadPosition(!1).x,l.getCollisionHeadPosition(!1).y);u<s&&(s=u,r=l)}return r}attackBehavior(e){if(!e||!e.isAlive(!1)){this.state="searching";return}let t=this.predictTargetPosition(e),r=this.calculateInterceptPosition(t,e),s=this.getSafeDirection(r);this.goAttackTargetPos(s),yt.getVecDistance(this.snake.getCollisionHeadPosition(!1),e.getCollisionHeadPosition(!1))>this.viewDistance&&(this.state="searching")}predictTargetPosition(e){let t=e.getCollisionHeadPosition(!1),r=e.getSpeed(!1)*e.getSpeedRate(!1),s=ft.getAngleToVec(e.getCurDir()),l=yt.getVecDistance(this.snake.getCollisionHeadPosition(!1),t)/r;return new tt(t.x+s.x*r*l,t.y+s.y*r*l)}calculateInterceptPosition(e,t){let r=ft.getAngleToVec(t.getCurDir()),s=new tt(-r.y,r.x),a=Math.random()>.5?this.ATTACK_OFFSET:-this.ATTACK_OFFSET;return new tt(e.x+s.x*a,e.y+s.y*a)}getSafeDirection(e){let t=this.getDirectionToTarget(e),r=this.detectFrontalObstacles(t);return r.length===0?t:this.findAlternativeDirection(t,r)||t}detectFrontalObstacles(e){let t=this.snake.getCollisionHeadPosition(!1);return this.collision.retrieve(this.snake.getHead(!1)).filter(r=>{if(r instanceof Qi&&r.owner.owner!==this.snake){let s=r.getPosition().sub(t),a=e.getRotationTo(s);return Math.abs(a)<this.SAFE_ANGLE&&s.length()<this.DANGER_CHECK_DIST}return!1})}findAlternativeDirection(e,t){let r=[-45,45];for(let s of r){e.rotateCCW(s);let a=e.normalize();if(!t.some(u=>{let m=u.getPosition().sub(this.snake.getCollisionHeadPosition(!1));return a.getRotationTo(m)<this.SAFE_ANGLE}))return a}return null}goAttackTargetPos(e){this.setTarget(e,xe.TARGET_TYPE_SNAKE);let r=this.getDirectionToTarget(this.target).getRotation();this.snake.rotate(r,!1),J.Debug==2&&console.debug("AI_TEST: roleId: "+this.snake.tag.roleId+", goAttackTargetPos: dirAngle: ",r,", _targetType: "+this.targetType)}setTarget(e,t){this.target=e,this.targetType=t,J.Debug==2&&this.snake&&this.snake.tag&&console.debug("AI_TEST: roleId: "+this.snake.tag.roleId+", setTarget: ",e,", _targetType: "+t)}searchBehavior(e){if(e){var t=e.getPosition();this.setTarget(t,xe.TARGET_TYPE_FOOD),this.state="pursuing"}else if(!this.target||yt.getVecDistance(this.snake.getCollisionHeadPosition(!1),this.target)<50){var r=100,s=new tt(yt.randomRange(Q.mapSize.offsetX+r,Q.mapSize.width-Q.mapSize.offsetX+r),yt.randomRange(Q.mapSize.offsetY+r,Q.mapSize.height-Q.mapSize.offsetY+r));this.setTarget(s,xe.TARGET_TYPE_POS)}}goTargetPos(e){this.setTarget(e,xe.TARGET_TYPE_POS);var r=this.getDirectionToTarget(this.target).getRotation();this.snake.rotate(r,!1),this.state="pursuing",J.Debug==2&&console.debug("AI_TEST: roleId: "+this.snake.tag.roleId+", goTargetPos: dirAngle: ",r,", _targetType: "+this.targetType)}pursueBehavior(){if(this.target){var e=this.getDirectionToTarget(this.target).getRotation(),t=yt.getVecDistance(this.snake.getCollisionHeadPosition(!1),this.target),r=this.snake.getRadio(!1)*8;if(J.Debug==2&&console.debug("AI_TEST: roleId: "+this.snake.tag.roleId+", pursueBehavior: dirAngle: ",e,", targetDistance: "+t+", bodyLen: "+r,t<r),t<r)return;this.snake.rotate(e,!1)}}escapeBehavior(e){let t=Date.now()/1e3,r;if(e){let s=this.getDirectionToTarget(e.getCollisionHeadPosition(!1));s.multiplyScalar(-1),this.escapeTarget=null,r=s.getRotation(),this.snake.rotate(r,!1),this.lastEscapeTime=t}else{if(!this.escapeTarget||t-this.lastEscapeTime>this.ESCAPE_COOLDOWN){let a=ft.getAngleToVec(this.snake.getCurDir()),l=180,u=a.rotateCCW(l).normalize(),m=this.snake.getCollisionHeadPosition(!1);this.escapeTarget=new tt(m.x+u.x*this.dangerDistance*2,m.y+u.y*this.dangerDistance*2),this.lastEscapeTime=t}r=this.getDirectionToTarget(this.escapeTarget).getRotation(),this.snake.rotate(r,!1)}J.Debug==2&&console.debug("AI_TEST: roleId: "+this.snake.tag.roleId+", escapeBehavior: dirAngle: ",r,", threat: "+e,", _targetType: "+this.targetType)}getDirectionToTarget(e){let t=this.snake.getCollisionHeadPosition(!1),r=e.x-t.x,s=e.y-t.y,a=new tt(r,s);if(Math.abs(a.getRotation()-this.snake.getCurDir())<5){var u=this.snake.getCurDir(),m=ft.getAngleToVec(u);return m}if(a.length()<.1){var u=this.snake.getCurDir(),m=ft.getAngleToVec(u);return m}return a.normalize(),a}isInDangerRange(e){return yt.getVecDistance(this.snake.getCollisionHeadPosition(!1),e.getCollisionHeadPosition(!1))<this.dangerDistance}destroy(){this.setTarget(null,xe.TARGET_TYPE_NULL),this.snake=null,this.collision=null}};var sr=class i extends Laya.Sprite{constructor(){super(...arguments);this.collidables=[];this.isVisible=!1}static getInstance(){return i._instance||(i._instance=new i,i._instance.zOrder=9999,i._instance.mouseEnabled=!1),i._instance}toggleVisible(){this.isVisible=!this.isVisible,console.log("DebugLayer.toggleVisible",this.isVisible),this.graphics.clear()}updateCollidables(t){this.collidables=t}clearDraw(){this.graphics.clear(),this.graphics.alpha(.5)}draw(){this.isVisible&&(this.graphics.clear(),this.graphics.alpha(.5),this.collidables.forEach(t=>{t instanceof Qi?this.drawSnakeBody(t):t instanceof kn&&this.drawFood(t)}))}drawSnakeBody(t){let r=t.getPosition(),s=t.getRadio();this.graphics.drawCircle(r.x,r.y,s,"#FF0000",2,.5)}drawFood(t){let r=t.getBoundingBox();this.graphics.drawRect(r.x,r.y,r.width,r.height,"#00FF00",2,.5)}};var Va=class Va{static getInstance(){return Va.instance||(Va.instance=new Va),Va.instance}init(e){if(!e)throw new Error("gameLayer Must Be Not Null");se.getInstance().init(),_t.init();let t=se.getInstance().container,r=_t.container,s=new Laya.Sprite;e.addChild(r),e.addChild(t),e.addChild(s),s.addChild(sr.getInstance()),_t.init()}createData(){se.getInstance().createSnakes(),_t.createFoodsByData()}startGame(){ar.start()}clearTimer(){}endTimer(){ar.end()}update(e,t,r){if(se.getInstance().updateSnakes(Laya.timer.delta,t,r,!0),!t&&(Ui.move(se.getInstance().getSelfSnakePos(t)),J.needDraw)){let s=sr.getInstance();s&&(s.clearDraw(),wr.getInstance(null).drawDebug(s.graphics))}}clear(){this.clearTimer()}};Va.instance=null;var dI=Va,js=dI.getInstance();var fI=class i{constructor(){this._frameInterval=33;this._currentFrame=0;this.isStart=!1}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){this.stop(),this._currentFrame=0}start(){Laya.timer.loop(this._frameInterval,this,this.update)}stop(){Laya.timer.clear(this,this.update)}end(){this.stop(),this.isStart=!1}update(){this._currentFrame++,this.executeFrame(this._currentFrame)}executeFrame(e,t=!0){se.getInstance().selfSnake&&se.getInstance().selfSnake.tag==null||(js.update(e,!1,t),_t.update(Laya.timer.delta),se.getInstance().update(Laya.timer.delta))}get currentFrame(){return this._currentFrame}sendAiEnter(){var e=y.snake.socket.MessageType.MSG_AI_ENTER;ge.send(e,null)}sendAiEnd(e,t){var r=y.snake.socket.MessageType.MSG_AI_END,s=y.snake.socket.CS_AI_END.fromObject({kills:e,score:t});ge.send(r,s)}onPveEnd(){var e=new y.snake.socket.SC_BATTLE_END,t=se.getInstance().selfSnake;e.res=!1,e.roleId=t.tag.roleId,e.score=t.viewSnake.score,e.kills=t.tag.kills,e.length=t.viewSnake.getSkinLength(),e.alive=Q.snake.battleCd/1e3-Ee.matchCoolDownTime,e.rank=t.rankNum,e.items=[],console.log("onPveEnd",e),Ee.onAiSetMatchEnd(e)}},ar=fI.getInstance();var Cl=class{constructor(e,t,r,s){this.clientFrame=1;this.serverFrame=1;this.dFrame=0;this.oprIndex=-1;this.serverHeadPoss=[];this.ringCenter=new tt;this.baseRingSize=100;this.isSend=!1;this.isStop=!1;this.lastRingUpdate=0;this.isOutSide=!1;this.lastX=0;this.lastY=0;this.lastFrame=0;this.lastSendFrame=-1;this.lastDir=-1;this.lastSendDir=-1;this.isLogicSnake=e,this.pnl=t,this.owner=s,this.bodySkinPool=se.getInstance().getBodySkinPool(),this.updateData(r),this.showLogInHead(e+"")}updateData(e){if(this.skins)for(let t=0;t<this.skins.length;t++){let r=this.skins[t];r&&this.bodySkinPool.returnBodySkin(r)}this.skins=[],this._initData(e),this._initSnake(),this._updateSkinRadio()}_initData(e){this.snakeItem=X.m_dicSnakes.get(e.snakeId),this.radio=this.snakeItem.bodyRadius,this.collisionHeadRadius=this.snakeItem.collisionHeadRadius,this.suctionRadius=this.snakeItem.suctionRadius,this.speed=this.snakeItem.baseSpeed,this.maxLength=this.snakeItem.maxLength,this.maxBoneLength=this.maxLength*this.snakeItem.intervalBoneToDrawSkin,this.tag=e||null,this.score=e.score,this.speedRate=e.speed;var t=e.direction;this.dir=t,this.lastDir=t;var r=e.aimDir;this.aimDir=r,this.rotateSpeed=Q.snake.defaultRotateSpeed;let s=e.attr;for(let _=0;_<s.length;_++)if(s[_]){let I=s[_].split(","),x=I[0],L=I[1];if(x=="1"){var a=parseInt(L),l=e.length;console.log("ATTR: 计算长度：后端len: "+l+", newLen: "+a)}else if(x=="2"){var u=parseInt(L);this.maxLength=u,this.maxBoneLength=this.maxLength*this.snakeItem.intervalBoneToDrawSkin,console.log("ATTR: 计算最大长度：maxLen: "+this.maxLength+", maxLength: "+u)}else if(x=="3"){var m=parseInt(L),p=m/100*this.speed;this.speed+=p,console.log("ATTR: 计算速度：speed: "+this.speed+", addSpeed: "+p)}else if(x!="4"){if(x=="5"){var h=parseInt(L),f=h/100*this.suctionRadius;this.suctionRadius+=f,this.suctionRadius=Math.floor(this.suctionRadius),console.log("ATTR: 计算吸食半径：suctionRadius: "+this.suctionRadius+", addSuctionRadius: "+f)}}}this.boneLength=e.snake.length,this.intervalBoneToDrawSkin=this.snakeItem.intervalBoneToDrawSkin,this.skins=[],this.bones=[],this.alive=!0;var g=e.wdTime-e.oprTime;this.defaultInvincibleTime=Date.now()+g,this.isInvincible=g>0;let b=Math.random()+.5;b=b>1?b-.5:b;for(let _=0;_<this.boneLength;_++){let I=e.snake[_].loc,x=tt.create(I.x,I.y);this.bones[_]=x}this.isLogicSnake||this.bodyRing||(this.bodyRing=new Laya.Image,this.bodyRing.skin=Q.res.snakeRingImg,this.bodyRing.width=this.bodyRing.height=this.baseRingSize,this.bodyRing.anchorX=this.bodyRing.anchorY=.5,this.bodyRing.visible=!1,this.pnl.addChild(this.bodyRing))}_updateBodyRing(){if(this.lastRingUpdate=Date.now(),!!this.isInvincible&&this.bodyRing){var e=this.getHeadPosition();this.bodyRing.pos(e.x,e.y)}}_initSnake(){console.log(ee.GetLogTime,"初始化蛇的皮肤","isLogicSnake: "+this.isLogicSnake);let e=this.getSkinLength();for(let t=0;t<e;t++){t===0?this.skins[t]=this.bodySkinPool.getBodySkin(Q.snake.skinFlag.head,this.color,this.tag,this):this.skins[t]=this.bodySkinPool.getBodySkin(Q.snake.skinFlag.body,this.color,this.tag,this);let r=t*this.intervalBoneToDrawSkin;if(this.bones[r]){this.skins[t].setPosition(this.bones[r]),se.getInstance().addBodySkin(this.skins[t]),this.skins[t].setLocalZOrder(-(t+1));let s;r+1<this.bones.length?s=this.bones[r+1]:r-1>=0?s=this.bones[r-1]:s=this.bones[r];let a=this.bones[r].getRotationTo(s),l=Q.snake.defaultRotation-a;this.skins[t].setRotation(l),this.skins[t].setVisible(!0)}else console.error("_initSnake error",e,t),this.skins[t].setVisible(!1)}}move(e,t,r){if(this.alive){if(this.isLogicSnake){if(!t&&this.getIsStop())return}else if(this.getIsStop())return;if(J.Debug==2){var s=ee.GetLogTime+" C 坐标: ======== "+this.tag.roleId+" frame: "+(ke.getClientRuningFrame(!0)-1)+", logicPos: "+this.bones[0].x+", "+this.bones[0].y+",  pos: "+this.getHeadPosition().x+", "+this.getHeadPosition().y+",  dir: "+this.dir+", aimDir: "+this.aimDir+", hasConfirmed: "+t+", isLogicSnake: "+this.isLogicSnake;console.debug(s),J.Debug==2&&!this.isOutSide&&this.isLogicSnake&&t&&!this.owner.isLogicReadyDie&&ke.checkClientAndServerFrame(ke.clientRuningFrame,this.tag.roleId,this.bones[0])}if(this.tempBones=null,r)for(let I=0;I<this.speedRate;I++){let x=this.aimDir-this.dir,L=this.rotateSpeed*Q.snake.defaultMoveInterval;if(Math.abs(x)<L)this.dir=this.aimDir;else{x=(x+360)%360,x>180&&(x-=360);var a=Math.abs(x)<L?x:L*(x>0?1:-1);this.dir+=a,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360)}let E=ft.getAngleToVec(this.dir);J.Debug==3&&console.log(ee.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC BEFORE ==== "+ke.getClientRuningFrame(!0)+" 当前方向：",this.dir,"向量：",E.x,E.y,"bones[0]：",this.bones[0].x,this.bones[0].y,"speed："+this.speed+", speedRate: "+this.speedRate,"needMove: "+r);var l=this.getHeadPosition(),u=10,m=Q.mapSize;if(l.x<m.offsetX-u||l.x>m.width-m.offsetX+u||l.y<m.offsetY-u||l.y>m.height-m.offsetY+u){this.isOutSide=!0;return}var p=this.bones[0].add(E.mul(this.speed));p.toOneDecimal(),this.bones[0].assign(p);var h=10;J.Debug==2&&!this.isLogicSnake&&this.lastX!=0&&this.lastY!=0&&this.lastFrame!=0&&(this.dir==180&&(this.lastX-p.x<=0||Math.abs(this.lastX-p.x)>h)||this.dir==0&&(this.lastX-p.x>=0||Math.abs(this.lastX-p.x)>h)||this.dir==270&&(this.lastY-p.y<=0||Math.abs(this.lastY-p.y)>h)||this.dir==90&&(this.lastY-p.y>=0||Math.abs(this.lastY-p.y)>h))&&console.error(ee.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC AFTER =====1 "+ke.getClientRuningFrame(!0)+" clientLoc1: 0",p.x,p.y,"lastX: "+this.lastX,"lastY: "+this.lastY,"lastFrame: "+this.lastFrame,"needMove: "+r),this.lastX=p.x,this.lastY=p.y,this.lastFrame=ke.getClientRuningFrame(!0),J.Debug==2&&console.log(ee.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC AFTER =====1 "+ke.getClientRuningFrame(!0)+" clientLoc1: 0",p.x,p.y,"needMove: "+r);for(let T=1;T<this.bones.length;T++){let R=this.bones[T-1],H=this.bones[T],F=.6,z=H.add(R.sub(H).mul(F));this.bones[T].x=z.x,this.bones[T].y=z.y}I===this.speedRate-1&&(this._processGrowth(),this._moveBody(),this._updateSkinRadio())}else{var p=this.bones[0];if(!this.isLogicSnake&&this.lastX!=0&&this.lastY!=0&&this.lastFrame!=0){let x=ft.getAngleToVec(this.dir);var f=this.speed*this.speedRate,g,b=yt.distance(p.x,p.y,this.lastX,this.lastY),_;if(b==0?(_=f>>1,g=this.bones[0].add(x.mul(_))):b>f&&(_=(b-f)/2,_=-_,g=this.bones[0].add(x.mul(_))),g){J.Debug==2&&console.log(ee.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC AFTER =====2 "+ke.getClientRuningFrame(!0)+" clientLoc1: 0",p.x,p.y,"lastX: "+this.lastX,"lastY: "+this.lastY,"lastFrame: "+this.lastFrame,"needMove: "+r),this.tempBones=[],this.tempBones.push(g);for(let L=1;L<this.bones.length;L++){let E=this.bones[L].add(x.mul(_));this.tempBones.push(E)}}}this.lastX=p.x,this.lastY=p.y,this.lastFrame=ke.getClientRuningFrame(!0),J.Debug==2&&console.log(ee.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC AFTER =====2 "+ke.getClientRuningFrame(!0)+" clientLoc1: 0",p.x,p.y,"needMove: "+r),this._processGrowth(),this._moveBody(),this._updateSkinRadio()}this.isInvincible&&(this.bodyRing&&(this.bodyRing.visible||(this.bodyRing.visible=!0),this._updateBodyRing()),Date.now()>this.defaultInvincibleTime&&(this.isInvincible=!1,this.bodyRing&&(this.bodyRing.visible=!1)))}}getCurDir(){return this.dir}getAimDir(){return this.aimDir}rorateReadySend(){this.isSelf&&this.lastSendFrame!=ke.currentFrame&&(this.rotateSend(),this.lastSendFrame=ke.currentFrame)}showServerPos(e,t,r,s,a){this.getHead().setServerPosLog(e,t,r,s,a)}showLogInHead(e){this.getHead()&&this.getHead().showLogInHead(e)}setClientScore(e){this.getHead()&&this.getHead().setClientScore(e)}setLength(e){this.boneLength=e}setScore(e){this.score=e}_processGrowth(){var e=this.boneLength,t=this.bones.length;if(!(e==t&&e>=this.maxBoneLength)){if(e>t){let h=this.bones[this.bones.length-1];var r;this.tempBones&&(r=this.tempBones[this.tempBones.length-1]);for(var s,a=t+1;a<=e;a++)s=tt.create(h.x,h.y),this.bones.push(s),r&&this.tempBones.push(tt.create(r.x,r.y))}else e<t&&this.bones.splice(e);var l=this.getSkinLength(),u=this.skins.length;if(l>u)for(var m=u+1;m<=l;m++){let h=(m-1)*this.intervalBoneToDrawSkin,f=this.bodySkinPool.getBodySkin(Q.snake.skinFlag.body,this.color,this.tag,this);f.setPosition(this.bones[h]),se.getInstance().addBodySkin(f),f.setLocalZOrder(-(m+1));let g=this.bones[h],b=this.bones[h].getRotationTo(g);f.setRotation(Q.snake.defaultRotation-b),this.skins.push(f)}else if(l<u){for(var m=l+1;m<=u;m++){var p=this.skins[m-1];this.bodySkinPool.returnBodySkin(p)}this.skins.splice(l)}this._updateSkinRadio()}}_moveBody(){let e=this.getSkinLength();for(let t=0;t<e;t++){let r=t*this.intervalBoneToDrawSkin;if(this.skins[t])if(this.bones[r]){this.tempBones?this.skins[t].setPosition(this.tempBones[r]):this.skins[t].setPosition(this.bones[r]);let s;r+1<this.bones.length?s=this.bones[r+1]:r-1>=0?s=this.bones[r-1]:s=this.bones[r];let a=this.bones[r].getRotationTo(s);this.skins[t].setRotation(Q.snake.defaultRotation-a),this.skins[t].setVisible(!0)}else this.skins[t].setVisible(!1)}}_updateSkinRadio(){let e=this.getSkinLength();for(let t=0;t<e;t++)this.skins[t]&&this.skins[t].updateAlpha(this.radio,this.speedRate)}showAddScore(e){this.isSelf&&this.getHead().node.showDamageLabelDetailDelay(e,100,!1)}get isSelf(){return this.tag&&this.tag.roleId==G.playerDto.pid}getHeadCollisionBounds(){let e=this.collisionHeadRadius,t=this.getCollisionHeadPosition();return t?new Laya.Rectangle(t.x-e,t.y-e,e*2,e*2):null}checkBodyCollision(e){let t=this.getCollisionHeadPosition();return t?e.checkCollision(t.x,t.y,this.collisionHeadRadius,this.isLogicSnake):!1}checkFoodCollision(e){let t=this.getCollisionHeadPosition();return t?e.checkCollision(t.x,t.y,this.suctionRadius):!1}rotateControl(e,t=!1){this.lastDir!=e&&(this.lastDir=e)}rotateSend(){if(ke.clientRuningFrame!=ke.startFrame){var e=G.playerDto.pid,t=this.getToServerHead(),r=y.snake.socket.MessageType.MSG_PLAYER_OPR,s=y.snake.socket.CS_PLAYER_OPR.fromObject({roleId:e,opr:1,value:this.lastDir,head:t,frame:ke.getClientCurrentFrame(),curDir:this.getCurDir(),aimDir:this.getAimDir()});je.sendData(r,s),this.lastDir!=-1&&this.lastSendDir!=this.lastDir&&(s.frame=ke.getPredictFrameHalf(),ke.frameNetQueue.addLocalOperation(s),this.lastSendDir=this.lastDir)}}rotate(e,t=!1){this.aimDir=e}updateSpeedRate(e){this.speedRate=e}getCollisionHeadPosition(){return this.getHead()?this.isLogicSnake?this.getHead().getLoogicPosition():this.getHead().getPosition():null}getHeadPosition(){return this.getHead()?this.getHead().getPosition():null}gotoDiePos(){if(this.skins)for(let e=0;e<this.skins.length;e++){let t=this.skins[e];t&&t.gotoDiePos()}}getHead(){return this.skins?this.skins[0]:null}getSpeed(){return this.speed}getSpeedRate(){return this.speedRate}getIsSend(){return this.isSend}setIsSend(e){this.isSend=e}getIsStop(){return this.isStop}setIsStop(e){this.isStop=e}getToServerHead(){var e=new y.snake.socket.SnakeObject,t=new y.snake.socket.PointObject;return t.x=this.bones[0].x,t.y=this.bones[0].y,e.loc=t,e}getToLoogicServerHead(){var e=new y.snake.socket.SnakeObject,t=new y.snake.socket.PointObject,r=this.getCollisionHeadPosition();return t.x=r.x,t.y=r.y,e.loc=t,e}updateHead106(e,t,r,s){if(this.isAlive()&&r){if(this.oprIndex!=-1&&s!=this.oprIndex+1){var a=this.tag.roleId,l=ee.GetLogTime+" 检测到106 操作序号异常（"+a+"），保留控制台日志。 "+a+" 当前序号："+this.oprIndex+" 收到序号："+s+", C: ("+this.bones[0].x+", "+this.bones[0].y+"), "+this.clientFrame+" S:("+t.loc.x+", "+t.loc.y+"), "+e+", hasConfirmed: "+r;console.error(l),J.Debug==2&&s-this.oprIndex>1&&ee.alertYes(l);return}this.oprIndex=s}}shine(e){let t=this.skins.length;for(let r=0;r<t;r++)this.skins[r].setVisible(!this.skins[r].isVisible())}show(){let e=this.skins.length;for(let t=0;t<e;t++)this.skins[t].setVisible(!0)}getSkins(){return this.skins}getRadio(){return this.radio}setAlive(e){this.alive=e}setGray(e){for(let t=0;t<this.skins.length;t++)this.skins[t].setGray(e)}isAlive(){return this.alive}getLength(){return this.boneLength}getScore(){return this.score}getSkinLength(){return Math.floor(this.boneLength/this.intervalBoneToDrawSkin)}recordBones(){var e=[];for(let t=0;t<this.bones.length;t++){let r=this.bones[t];e.push(r.clone())}return e}getState(){return{dir:this.dir,aimDir:this.aimDir,bones:this.recordBones(),speedRate:this.speedRate,oprIndex:this.oprIndex,alive:this.isAlive()}}restoreState(e){J.Debug>2&&console.log("============= restoreState: ","roleId:"+this.tag.roleId,"lastOprIndex:"+this.oprIndex,"oprIndex:"+e.oprIndex,"lastLen:"+this.boneLength,"confirmLen:"+e.len,"lastScore:"+this.score,"confirmScore:"+e.score,"lastBoneLen:"+this.bones.length,"confirmBoneLen:"+e.bones.length,"isLogicSnake:"+this.isLogicSnake),this.dir=e.dir,this.aimDir=e.aimDir,this.bones=this.deepCopyBones(e.bones),this.speedRate=e.speedRate,this.oprIndex=e.oprIndex}deepCopyBones(e){var t=[];for(let r=0;r<e.length;r++){let s=e[r];t.push(s.clone())}return t}getDoublePointsProbability(){return this.snakeItem.doublePointsProbability}adjustVisualState(e){this.dir=e.dir,this.aimDir=e.aimDir,this.bones=this.deepCopyBones(e.bones),this.speedRate=e.speedRate,this.oprIndex=e.oprIndex,this.boneLength=e.boneLength,this.score=e.score}destroy(){Laya.timer.clearAll(this),this.isSelf&&(se.getInstance().skinLen=this.getSkinLength(),se.getInstance().kills=this.tag.kills),this.skins.forEach(e=>this.bodySkinPool.returnBodySkin(e)),this.skins=[],this.bodyRing&&this.bodyRing.removeSelf(),this.bodyRing=null,this.snakeItem=null,this.tag=null,this.owner=null}};var Wa=class{constructor(e,t){this.isViewReadyDie=!1;this.isLogicReadyDie=!1;this.isStartShineed=!1;this.isShineed=!1;this.isConfirmDied=!1;this.dieRuningFrame=0;this.logicDieRuningFrame=0;this.logicDieTime=0;this.viewSnake=new Cl(!1,e,t,this),Ee.matchDto.matchType!=xe.MATCH_TYPE_PVE&&(this.logicSnake=new Cl(!0,e,t,this)),this.tag=t}updateData(e){this.logicSnake.updateData(e),this.viewSnake.updateData(e),this.tag=e}getCurDir(){return this.viewSnake.dir}getAimDir(){return this.viewSnake.aimDir}getHead(e){return e?this.logicSnake.getHead():this.viewSnake.getHead()}showLogInHead(e,t){t?this.logicSnake.showLogInHead(e):this.viewSnake.showLogInHead(e)}setClientScore(e,t){t?this.logicSnake.setClientScore(e):this.viewSnake.setClientScore(e)}get isSelf(){return this.tag&&this.tag.roleId==G.playerDto.pid}move(e,t,r,s){if(t){if(r){if(this.dieRuningFrame!=0&&this.isViewReadyDie&&ke.clientRuningFrame>this.dieRuningFrame+10&&!this.isLogicReadyDie&&this.isAlive(!0)){var a=ee.GetLogTime+" Snake DIE "+this.tag.roleId+" ==== 死亡恢复: clientRuningFrame: "+ke.clientRuningFrame+", dieRuningFrame: "+this.dieRuningFrame;console.warn(a),this.relive(),this.dieRuningFrame=0}var l=Laya.Browser.now();if(this.logicDieTime!=0&&this.isLogicReadyDie&&l>this.logicDieTime+8e3&&this.isAlive(!0)){var a=ee.GetLogTime+" Snake DIE "+this.tag.roleId+" ==== 死亡异常: now: "+ht.getTimeByMs(l)+", logicDieTime: "+ht.getTimeByMs(this.logicDieTime)+", clientRuningFrame: "+ke.clientRuningFrame+", logicDieRuningFrame: "+this.logicDieRuningFrame;console.warn(a),J.vType==0&&ee.alertYes(a)}}this.logicSnake.move(e,r,s)}else this.viewSnake.move(e,r,s),this.updateOther()}setLength(e,t){t?this.logicSnake.setLength(e):this.viewSnake.setLength(e)}setScore(e,t){t?this.logicSnake.setScore(e):this.viewSnake.setScore(e)}showAddScore(e,t){t?this.logicSnake.showAddScore(e):this.viewSnake.showAddScore(e)}rotateControl(e,t=!1){this.viewSnake&&this.viewSnake.rotateControl(e,t)}rotateSend(){this.viewSnake.rotateSend()}rotate(e,t){t?this.logicSnake.rotate(e):this.viewSnake.rotate(e)}updateSpeedRate(e,t){t?this.logicSnake.updateSpeedRate(e):this.viewSnake.updateSpeedRate(e)}getToServerHead(e){return e?this.logicSnake.getToServerHead():this.viewSnake.getToServerHead()}getToLoogicServerHead(e){return e?this.logicSnake.getToLoogicServerHead():this.viewSnake.getToLoogicServerHead()}getSpeed(e){return e?this.logicSnake.getSpeed():this.viewSnake.getSpeed()}getSpeedRate(e){return e?this.logicSnake.getSpeedRate():this.viewSnake.getSpeedRate()}getHeadPosition(e){return e?this.logicSnake.getHeadPosition():this.viewSnake.getHeadPosition()}getCollisionHeadPosition(e){return e?this.logicSnake.getCollisionHeadPosition():this.viewSnake.getCollisionHeadPosition()}addKill(e){if(this.tag&&(this.tag.kills+=e),this.isSelf){var t;this.tag.kills<=5?t=`soundName_kill_${this.tag.kills}`:this.tag.kills<8?t="soundName_kill_t_3":this.tag.kills<10?t="soundName_kill_t_5":t="soundName_kill_t_8",Ke[t]?Ke.playSoundByName(Ke[t]):console.warn(`音效 ${t} 不存在`),this.getHead(!1).node.showDamageLabelDetailDelay(e,100,!0)}}sendDie(){this.isLogicReadyDie=!0;var e=Laya.Browser.now();console.warn(`Snake DIE ${this.tag.roleId} `,"sendDie now: "+e,this.logicDieTime,"clientRuningFrame: "+ke.clientRuningFrame,this.logicDieRuningFrame,this.getHeadPosition(!1)),this.logicDieTime=e,this.logicDieRuningFrame=ke.clientRuningFrame,this.setIsStop(!0,!0)}readyDie(){console.warn(ee.GetLogTime+` Snake DIE ${this.tag.roleId} `,this.isStartShineed,"readyDie "+ke.clientRuningFrame,this.dieRuningFrame),!this.isStartShineed&&(this.dieRuningFrame=ke.clientRuningFrame+1,this.isStartShineed=!0,this.isViewReadyDie=!0,this.isShineed=!1,this.setIsStop(!0,!1),this.viewSnake.gotoDiePos(),this.startShine())}startShine(){console.log(`Snake ${this.tag.roleId} `,"startShine"),Laya.timer.clear(this,this.shine),Laya.timer.frameLoop(5,this,this.shine),Laya.timer.once(2e3,this,this.haveShined)}shine(e){this.viewSnake.shine(e),this.logicSnake&&this.logicSnake.shine(e)}haveShined(){console.log(`Snake ${this.tag.roleId} `,"haveShined"),this.isStartShineed=!1,this.isShineed=!0,this.stopShine(),this.isConfirmDied&&this.die()}stopShine(){console.log(`Snake ${this.tag.roleId} `,"stopShine"),this.viewSnake.show(),this.logicSnake&&this.logicSnake.show(),Laya.timer.clear(this,this.shine)}relive(){console.log(`Snake ${this.tag.roleId} `,"relive","this.isConfirmReadyDie: "+this.isLogicReadyDie),this.setIsStop(!1,!1),this.isViewReadyDie=!1,this.setIsSend(!1,!1),this.stopShine()}confirmDie(){console.log(`Snake ${this.tag.roleId} `,"confirmDie","this.isShineed: "+this.isShineed),this.stopShine(),this.die()}die(){console.log(`Snake ${this.tag.roleId} has died.`),this.viewSnake.setAlive(!1),this.logicSnake&&this.logicSnake.setAlive(!1),this.isSelf?(this.viewSnake.setGray(!0),this.logicSnake&&this.logicSnake.setGray(!0),Ke.playSoundByName(Ke.soundName_kill_die),Laya.timer.once(1e3,this,this.goMatchEnd)):se.getInstance().removeSnake(this.tag.roleId)}goMatchEnd(){Ee.matchDto.matchType==xe.MATCH_TYPE_PVE?ar.onPveEnd():(se.getInstance().removeSnake(this.tag.roleId),Ee.onMockMatchEnd())}isAlive(e){return e?this.logicSnake.isAlive():this.viewSnake.isAlive()}getSkinLength(e){return e?this.logicSnake.getSkinLength():this.viewSnake.getSkinLength()}getScore(e){return e?this.logicSnake.getScore():this.viewSnake.getScore()}getHeadCollisionBounds(e){return e?this.logicSnake.getHeadCollisionBounds():this.viewSnake.getHeadCollisionBounds()}isInvincible(e){return e?this.logicSnake.isInvincible:this.viewSnake.isInvincible}len(e){return e?this.logicSnake.boneLength:this.viewSnake.boneLength}intervalBoneToDrawSkin(e){return e?this.logicSnake.intervalBoneToDrawSkin:this.viewSnake.intervalBoneToDrawSkin}getSkins(e){return e?this.logicSnake.getSkins():this.viewSnake.getSkins()}getLength(e){return e?this.logicSnake.getLength():this.viewSnake.getLength()}getRadio(e){return e?this.logicSnake.getRadio():this.viewSnake.getRadio()}checkFoodCollision(e,t){return t?this.logicSnake.checkFoodCollision(e):this.viewSnake.checkFoodCollision(e)}getIsSend(e){return e?this.logicSnake.getIsSend():this.viewSnake.getIsSend()}setIsSend(e,t){t?this.logicSnake.setIsSend(e):this.viewSnake.setIsSend(e)}getIsStop(e){return this.tag?e?this.logicSnake.getIsStop():this.viewSnake.getIsStop():!0}setIsStop(e,t){t?this.logicSnake.setIsStop(e):this.viewSnake.setIsStop(e)}checkBodyCollision(e,t){return t?this.logicSnake.checkBodyCollision(e):this.viewSnake.checkBodyCollision(e)}updateOther(){}destroy(){console.log(`Snake ${this.tag.roleId} has been destroyed.`),Laya.timer.clearAll(this),this.viewSnake.destroy(),this.logicSnake&&this.logicSnake.destroy(),this.viewSnake=null,this.logicSnake=null,this.tag=null}};var Xp=class extends Wa{constructor(t,r){super(t,r);this.isAi=!1;this.tag.roleId&&this.tag.roleId.startsWith(Q.snake.aiPrefix)&&(this.aiController=new my(this),this.isAi=!0)}pveDie(){this.isSelf?(this.viewSnake.setAlive(!1),this.isConfirmDied=!0,this.readyDie()):(this.toFood(),this.die())}toFood(){var t=this.getSkins(!1);for(let r=4;r<t.length;r+=5){let s=t[r],a=(Math.random()-.5)*20,l=(Math.random()-.5)*20,u=s.getPosition().x+a,m=s.getPosition().y+l;_t.addFoodByPosWithDie(u,m)}}goMatchEnd(){ar.onPveEnd()}updateOther(){this.aiController&&this.aiController.update()}goTargetPos(t){this.aiController&&this.aiController.goTargetPos(t)}destroy(){super.destroy(),this.aiController&&(this.aiController.destroy(),this.aiController=null)}};var hy=class{constructor(e){this.pool=[];this.pnl=e}getBodySkin(e,t,r,s){if(this.pool.length>0){let a=this.pool.pop();return a.reset(e,this.pnl,t,r,s),a}else return new Qi(e,this.pnl,t,r,s)}returnBodySkin(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}};var dy=class{constructor(){this.selfSnake=null;this.isControl=!1}init(){this.container||(this.container=new Laya.Sprite),this.matchHeroSprDic=new Oe(!0),this.selfSnake=null,this.collision=wr.getInstance(null),this.bodySkinPool=new hy(this.container)}updateSnake(e,t){return console.log("updateSnake: "+t.roleId,G.playerDto.pid),e.updateData(t),G.playerDto.pid==t.roleId&&(this.selfSnake=e),e}addBodySkin(e){this.collision.addBodySkin(e)}removeBodySkin(e){this.collision.removeBodySkin(e)}updateSnakes(e,t,r,s){this.moveSnakes(e,t,r,s),this.collision.refresh(),this.checkAllSnakeCollision(t,r)}getSnake(e){return this.matchHeroSprDic.get(e)}removeSnake(e){var t=this.matchHeroSprDic.get(e);t?(t.destroy(),this.matchHeroSprDic.remove(e)):console.log("removeSnake error: "+e)}removeAllSnakes(){var e=this.matchHeroSprDic.getValues();for(let t of e)t.destroy();this.matchHeroSprDic=new Oe(!0)}moveSnakes(e,t,r,s){var a=this.matchHeroSprDic.getValues();for(let l of a)l.isAlive(t)&&l.move(e,t,r,s)}getSelfSnakePos(e){return this.selfSnake?this.selfSnake.getHeadPosition(e):null}createSnakes(){this.matchHeroSprDic=new Oe(!0);let e=Ee.matchDto.members.length;for(var t=0;t<e;t++)var r=Ee.matchDto.members[t],s=this.createSnake(r)}newAddSnake(e){var t=this.matchHeroSprDic.get(e.roleId);t?this.updateSnake(t,e):t=this.createSnake(e)}restoreSnakes(){this.removeAllSnakes(),this.matchHeroSprDic=new Oe(!0);let e=Ee.matchDto.members.length;for(var t=0;t<e;t++){var r=Ee.matchDto.members[t];try{var s=this.createSnake(r)}catch(a){console.warn(a)}}}getBodySkinsWithOutOne(e,t){var r=[],s=this.matchHeroSprDic.getValues();for(let l of s){var a=l;a.tag&&e.tag.roleId!=a.tag.roleId&&(r=r.concat(a.getSkins(t)))}return r}getBodySkinPool(){return this.bodySkinPool}showLogInHead(e,t){this.selfSnake&&this.selfSnake.tag&&this.selfSnake.showLogInHead(e,t)}countSnakeLen(e,t,r,s){var a=t+1,l=X.getSheetDataByMultiKey(X.m_dicSnakeLengthRules,[e,t+1]);return l&&r>=l.accumulatePoints?this.countSnakeLen(e,a,r,s):t*s}getRoleById(e){return this.matchHeroSprDic?this.matchHeroSprDic.get(e):null}setMyHeroDirection(e){this.selfSnake&&(e!=-4?(this.rorate(Q.snakeType.SELF,e),this.isControl=!0):this.isControl=!1)}eatFoodAndAddScore(e,t){var r=e.fid,s=e.score,a=e.lenght,l=e.roleId,u=this.getRoleById(l);u&&(u.setLength(a,t),_t.eateFoodIds(u,r,s,t),u.setScore(s,t))}clear(){this.removeAllSnakes(),this.container.removeSelf(),this.container=null,this.selfSnake=null,this.matchHeroSprDic=null,this.bodySkinPool.clear(),this.collision=null}};dy._instance=null;var fy=dy;var gy=class extends y.snake.socket.ItemObject{};var gI=class i{constructor(){this._isPop=!1;v.on(k.EVENT_CHECK_REMAIN,this,this.onCheckRemain)}static getInstance(){return i._instance||(i._instance=new i),i._instance}get model(){return Wt}get isPop(){return this._isPop}startShow(){console.log("startShow");var e=this.model.hasRemain();!this._isPop&&e&&(this._isPop=!0,e instanceof zi?v.event(k.EVENT_OPEN_MODULE,M.ItemGetDialog):v.event(k.EVENT_OPEN_MODULE,M.HeroGetDialog))}onCheckRemain(e){if(e==M.ItemGetDialog||e==M.HeroGetDialog){var t=this.model.hasRemain();t?t instanceof zi?v.event(k.EVENT_OPEN_MODULE,M.ItemGetDialog):v.event(k.EVENT_OPEN_MODULE,M.HeroGetDialog):this._isPop=!1}}};var Sn=gI.getInstance();var by=class{constructor(){this.m_dicItemList=new Oe,this.m_dicTypeList=new Oe,this.m_dicSubTypeList=new Oe,this.m_dicBackList=new Oe}initData(e){this.m_dicItemList=new Oe,this.m_dicTypeList=new Oe,this.m_dicSubTypeList=new Oe,this.m_dicBackList=new Oe;let t;for(let s=0;s<e.length;s++){t=new zi;var r=e[s];t.id=r.itemId,r.pk&&(t.m_iPk=r.pk),t.num=r.num,t.num>0&&this.pushItem(t)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------PackageData: ")}getCountById(e,t=!0){return X.m_dicItems.get(e)==null?0:this.getItemCountById(e,t)}pushItem(e){this.m_dicItemList.set(e.id,e),this.m_dicTypeList.get(e.type)==null&&this.m_dicTypeList.set(e.type,new Oe),this.m_dicSubTypeList.get(e.subType)==null&&this.m_dicSubTypeList.set(e.subType,new Oe),this.m_dicBackList.get(e.backType)==null&&this.m_dicBackList.set(e.backType,new Oe),this.m_dicTypeList.get(e.type).set(e.id,e),this.m_dicSubTypeList.get(e.subType).set(e.id,e),this.m_dicBackList.get(e.backType).set(e.id,e)}removeItem(e){this.m_dicItemList.remove(e.id),this.m_dicTypeList.get(e.type).remove(e.id),this.m_dicSubTypeList.get(e.subType).remove(e.id),this.m_dicBackList.get(e.backType).remove(e.id)}updateData(e,t=!1,r=!0){console.log("updateData: ",e,t,r);let s=[],a=!1,l;for(let u=0;u<e.length;u++){e[u]instanceof Array?(l=new gy,l.itemId=e[u][0],l.num=e[u][1]):l=e[u];let m=this.m_dicItemList.get(l.itemId);m==null&&(m=new zi(l.itemId),this.pushItem(m),m.m_bNew=!0),t?m.num=l.num:(m.newAddCnt=l.num,m.num=m.num+l.num),s.push(m.id),m.num<=0&&this.removeItem(m),m.newAddCnt>0&&Wt.needPop&&r&&(Wt.addItem(m),a=!0)}a&&Wt.needPop&&Wt.autoPop&&Sn.startShow(),s.length>0&&v.event(k.PACKAGE_UPDATE_ITEM,[s])}getItemById(e){return this.m_dicItemList.get(e)}getItemsBySubType(e){let t=this.m_dicSubTypeList.get(e);return t==null&&(t=[]),t}getListByType(e){let t=[];return this.m_dicTypeList.get(e)&&(t=this.m_dicTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}getBackByType(e){let t=[];return this.m_dicBackList.get(e)&&(t=this.m_dicBackList.get(e).values.slice()),t.sort(this.sortOnQa),t}getListBySubType(e){let t=[];return this.m_dicSubTypeList.get(e)&&(t=this.m_dicSubTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}sortOnQa(e,t){let r=e.itemItem.sort,s=t.itemItem.sort;return r<s?-1:r>s?1:0}sortOnExpTime(e,t){let r=e.expTime,s=t.expTime;return r<s?1:r>s?-1:0}getItemCountById(e,t=!0){let r=this.getItemById(e);return r?r.num:0}};var Jp=class i{constructor(e=0){this._m_iLevel=0;this.isShopEntry=!1;this.m_bIsSetId=!1;e!=0&&(this.id=e)}get m_iLevel(){return this._m_iLevel>0?this._m_iLevel:1}set m_iLevel(e){this._m_iLevel=e||0}set snakeName(e){this._snakeName=e}get snakeName(){return this._snakeName?this._snakeName:D.getLanguage(this.snakeItem.name)}get id(){return this._m_iId}set id(e){this._m_iId=e,this.m_bIsSetId||(this.m_bIsSetId=!0,this.m_iOriginalId=e),this.setConfigData()}setConfigData(){if(this.id!=0&&(this.snakeItem=X.m_dicSnakes.get(this.id.toString()),!this.snakeItem)){console.log("[          <snakes> find out id:"+this.id+"             ]");return}}copy(){let e=new i(this.id);return e.m_iLevel=this.m_iLevel,e}compareName(){return D.getLanguage(this.snakeItem.name)}compareLevel(){return parseFloat(this.m_iLevel+"")}compareId(){return parseInt(this.id+"")}};var yy=class{constructor(){this.m_dicSnakeList=new Oe}initData(e){this.m_dicSnakeList=new Oe;let t;for(let s=0;s<e.length;s++){t=new Jp;var r=e[s];t.id=r.id,t.unkey=r.unkey,t.attr=r.attr,t.skin=r.skin,t.upgrade=r.upgrade,t&&this.pushSnake(t)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------SnakePackageData: ")}getCountById(e,t=!0){return this.getSnakeCountById(e,t)}pushSnake(e){this.m_dicSnakeList.set(e.unkey,e)}removeSnake(e){this.m_dicSnakeList.remove(e.unkey)}updateData(e,t=!1,r=!0){console.log("updateData: ",e,t,r);let s=[],a=!1,l;for(let u=0;u<e.length;u++){l=e[u];let m=this.m_dicSnakeList.get(l.unkey);m==null&&(m=new Jp(l.id),m.unkey=l.unkey,this.pushSnake(m)),m.attr=l.attr,m.skin=l.skin,m.upgrade=l.upgrade,s.push(m.unkey),Wt.needPop&&r&&(Wt.addSnakeItem(m),a=!0)}a&&Wt.needPop&&Wt.autoPop&&Sn.startShow(),s.length>0&&v.event(k.PACKAGE_UPDATE_ITEM,[s])}getSnakeById(e){return this.m_dicSnakeList.get(e)}getSnakeCountById(e,t=!0){return this.getSnakeById(e)?1:0}};var bI=class i{constructor(){this.m_packageData=new by,this.m_snakePackageData=new yy}static getInstance(){return i._instance||(i._instance=new i),i._instance}initKnapsackData(e){this.m_packageData.initData(e),v.event(k.EVENT_ITEM_UPDATE)}updateKnapsackItems(e){this.m_packageData.updateData(e)}getAllKnapsackItems(){return this.m_packageData.m_dicItemList?this.m_packageData.m_dicItemList.values:[]}getKnapsackItemById(e){return this.m_packageData.m_dicItemList?this.m_packageData.getItemById(e):null}getKnapsackItemCount(e){return this.m_packageData.getCountById(e)}hasKnapsackItem(e){return this.getKnapsackItemCount(e)>0}initSnakeData(e){this.m_snakePackageData.initData(e),v.event(k.EVENT_SNAKE_UPDATE)}updateSnakeItems(e){this.m_snakePackageData.updateData(e)}getAllSnakeItems(){return this.m_snakePackageData.m_dicSnakeList?this.m_snakePackageData.m_dicSnakeList.values:[]}getSnakeItemById(e){return this.m_snakePackageData.m_dicSnakeList?this.m_snakePackageData.getSnakeById(e):null}getSnakeItemCount(e){return this.m_snakePackageData.getCountById(e)}hasSnakeItem(e){return this.getSnakeItemCount(e)>0}isSnakeItemEnough(e,t){return this.getSnakeItemCount(e)>=t}},ui=bI.getInstance();var Ka=class Ka extends fy{constructor(){super(...arguments);this.spawnTimer=0;this.snakeUnKey=0}static getInstance(){return Ka._instance||(Ka._instance=new Ka),Ka._instance}createSnake(t){if(this.container==null){console.log(t.roleId+" 无法添加 container is null");return}let r=new Xp(this.container,t);if(this.matchHeroSprDic.get(t.roleId))throw new Error(t.roleId+" 被重复添加！");return this.matchHeroSprDic.set(t.roleId,r),console.log("createSnake: "+t.roleId,G.playerDto.pid),G.playerDto.pid==t.roleId&&(this.selfSnake=r),r}rorate(t,r){t===Q.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.rotate(r,!1)}updateSpeedRate(t,r){t===Q.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.updateSpeedRate(r,!1)}checkAllSnakeCollision(t,r){var s=this.matchHeroSprDic.getValues();for(let l of s){var a=l;a&&a.tag&&Ga.checkCollisionsWithPve(a,null,this.collision,r)}}async spawnSnakes(){var t=[],r=Q.snake.initCount-1,s=await ee.getNpcNames(r);for(let u=1;u<=r;u++){var a=s[u-1],l=this.spawnRandomPlayerObject(a,!1,!1);t.push(l)}return t}spawnRandomPlayerObject(t,r=!0,s=!1){let a=Q.mapSize.width,l=Q.mapSize.height;var u=Q.mapSize.offsetDistance,m=yt.randomRange(u,a-u),p=yt.randomRange(u,l-u),h=yt.randomInt(Q.snake.aiMinLen,Q.snake.aiMaxLen);if(!s&&se.getInstance().selfSnake){var f=se.getInstance().selfSnake.getHeadPosition(!1),g=100;m>f.x-Laya.stage.width/2-g&&m<f.x+Laya.stage.width/2+g&&p>f.y-Laya.stage.height/2-g&&p>f.y+Laya.stage.height/2+g&&h>Q.snake.aiMidLen&&(h=yt.randomInt(Q.snake.aiMinLen,Q.snake.aiMidLen))}let b=m,_=a-m,I=p,x=l-p,L=Math.min(b,_,I,x);console.debug("spawnRandomPlayerObject playerName: ",t+", leftDist: ",b+", rightDist: ",_+", topDist: ",I+", bottomDist: ",x+", minDist: ",L);let E;L===b?I<x?E=Math.random()*45:I>x?E=Math.random()*45+315:E=Math.random()*90-45:L===_?I<x?E=135+Math.random()*45:I>x?E=180+Math.random()*45:E=180+Math.random()*90-45:L===I?b<_?E=45+Math.random()*45:b>_?E=90+Math.random()*45:E=90+Math.random()*90-45:b<_?E=270+Math.random()*45:b>_?E=225+Math.random()*45:E=270+Math.random()*90-45,E=(E+360)%360,E=Math.floor(E);var T=this.getPlayerObjectByPos(t,h,m,p,E,r,s);return T}playerLen(){var t=this.matchHeroSprDic.size;return t}async spawnSnake(){var t=yt.randomInt(Q.snake.initCount,Q.snake.maxCount);if(!(this.playerLen()>=t)){var r=await ee.getNpcNames(1),s=r[0],a=this.spawnRandomPlayerObject(s,!0,!1);this.createSnake(a)}}update(t){this.spawnTimer+=t,this.spawnTimer>=Q.snake.spawnInterval&&(this.spawnTimer=0,this.spawnSnake())}getPlayerObjectByPos(t,r,s,a,l,u=!0,m=!1){console.debug("getPlayerObjectByPos: ",t," born: ( "+s,a+" ), dir: "+l);var p=new tt(s,a),h="",f,g=0,b=0,_=new y.snake.socket.PlayerObject;if(_.aimDir=_.direction=l,_.speed=1,_.state=!0,_.enterTime=Laya.timer.currTimer,_.oprTime=Laya.timer.currTimer,u?_.wdTime=Laya.timer.currTimer+3e3:_.wdTime=Laya.timer.currTimer,m){var I=G.playerDto,x=I.snakeId,L=ui.getSnakeItemById(x);g=L.id,b=I.skinId,r=L.snakeItem.initLength,h=I.name,f=I.pid,_.roleId=f+"";var E=L.attr;_.attr=E;for(let fe=0;fe<E.length;fe++)if(E[fe]){let $e=E[fe].split(","),St=$e[0],Yt=$e[1];if(St=="1"){var T=parseInt(Yt),R=r;r=T,console.log("ATTR: 计算长度：后端len: "+R+", newLen: "+T)}}}else{this.snakeUnKey+=1,f=this.snakeUnKey;var H=X.m_dicSnakes.keys.length,F=Math.floor(Math.random()*H);g=X.m_dicSnakes.keys[F];var z=Q.snake.skinIds.length,V=Math.floor(Math.random()*z);b=Q.snake.skinIds[V],_.roleId=Q.snake.aiPrefix+f,h=t,J.Debug==2&&(h=_.roleId)}var $=X.m_dicSnakes.get(g);r>$.maxLength&&(r=$.maxLength),_.userName=h,_.snakeId=g,_.skin=b;var Z=$.baseSpeed;_.length=r*$.intervalBoneToDrawSkin;var re=X.getSheetDataByMultiKey(X.m_dicSnakeLengthRules,[g,r]);_.score=re.accumulatePoints,_.kills=0;var Me=[],rt=_.direction*Math.PI/180;let be=tt.create(Math.cos(rt),-Math.sin(rt));for(let fe=0;fe<_.length;fe++){let $e;if(fe===0)$e=p||tt.create(0,0);else{var me=Me[fe-1],ve=tt.create(me.loc.x,me.loc.y);let St=.6;$e=ve.add(be.mul(Z*St))}var B=new y.snake.socket.SnakeObject,Pe=new y.snake.socket.PointObject;if(!m&&($e.x<Q.mapSize.offsetX+$.bodyRadius||$e.x>Q.mapSize.width-(Q.mapSize.offsetX+$.bodyRadius)||$e.y<Q.mapSize.offsetY+$.bodyRadius||$e.y>Q.mapSize.height-(Q.mapSize.offsetY+$.bodyRadius))){_.length=fe,r=Math.floor(_.length/$.intervalBoneToDrawSkin);var re=X.getSheetDataByMultiKey(X.m_dicSnakeLengthRules,[g,r]);if(!re){console.log("player.length: "+_.length+", totalLen: "+r);break}_.score=re.accumulatePoints;break}Pe.x=$e.x,Pe.y=$e.y,B.loc=Pe,Me[fe]=B}return _.snake=Me,_}calculateMaxLength(t,r,s,a,l,u,m){let p=Q.mapSize.offsetX+u,h=Q.mapSize.width-Q.mapSize.offsetX-u,f=Q.mapSize.offsetY+u,g=Q.mapSize.height-Q.mapSize.offsetY-u,b=s*Math.PI/180,_=Math.cos(b),I=Math.sin(b),x=-_,L=-I;function E(Z,re,Me,rt){return Z===0?null:Z>0?(rt-re)/Z:(Me-re)/Z}let T=E(x,t,p,h),R=E(L,r,f,g),H=[];if(T!==null&&T>0&&H.push(T),R!==null&&R>0&&H.push(R),H.length===0)return 0;let F=Math.min(...H),z=a*l,V=Math.floor(F/z);return Math.floor(V/m)}};Ka._instance=null;var yI=Ka,XA=yI;var em=class extends Wa{constructor(t,r){super(t,r);this.lastSendFrame=-1}rorateReadySend(){this.isSelf&&this.viewSnake&&this.lastSendFrame!=ke.currentFrame&&(this.rotateSend(),this.lastSendFrame=ke.currentFrame)}rotateSend(){this.viewSnake.rotateSend()}goMatchEnd(){se.getInstance().removeSnake(this.tag.roleId),Ee.onMockMatchEnd()}adjustVisualState(){this.viewSnake.adjustVisualState(this.logicSnake)}updateOther(){}};var $a=class $a extends fy{static getInstance(){return $a._instance||($a._instance=new $a),$a._instance}createSnake(e){let t=new em(this.container,e);if(this.matchHeroSprDic.get(e.roleId))throw new Error(e.roleId+" 被重复添加！");return this.matchHeroSprDic.set(e.roleId,t),console.log("createSnake: "+e.roleId,G.playerDto.pid),G.playerDto.pid==e.roleId&&(this.selfSnake=t),t}adjustVisualState(){var e=this.matchHeroSprDic.getValues();for(let t of e)t.tag&&t.adjustVisualState()}rorate(e,t){e===Q.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.rotateControl(t,!0)}rorateReadySend(){this.selfSnake&&(this.selfSnake.tag==null||!this.selfSnake.isAlive(!1))||this.selfSnake.rorateReadySend()}updateSpeedRate(e,t){if(e===Q.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.isAlive(!1)){var r=G.playerDto.pid,s=this.selfSnake.getToServerHead(!1),a=y.snake.socket.MessageType.MSG_PLAYER_OPR,l=y.snake.socket.CS_PLAYER_OPR.fromObject({roleId:r,opr:2,value:t,head:s,frame:ke.getClientCurrentFrame(),curDir:this.selfSnake.getCurDir(),aimDir:this.selfSnake.getAimDir()});je.sendData(a,l),l.frame=ke.getPredictFrameHalf(),ke.frameNetQueue.addLocalOperation(l)}}checkAllSnakeCollision(e,t){var r=this.matchHeroSprDic.getValues();for(let a of r){var s=a;s&&s.tag&&(e?Ga.checkCollisionsWithConfirm(s,null,this.collision,t):Ga.checkCollisions(s,null,this.collision,t))}}restoreSnakes(){this.removeAllSnakes(),this.matchHeroSprDic=new Oe(!0);let e=Ee.matchDto.members.length;for(var t=0;t<e;t++){var r=Ee.matchDto.members[t];try{var s=this.createSnake(r)}catch(a){console.warn(a)}}}getSnakesState(){let e={snakes:{}};var t=this.matchHeroSprDic.getValues();for(let s of t){var r=s;let a=r.tag.roleId;e.snakes[a]=r.logicSnake.getState()}return e}restoreState(e){for(let r in e.snakes){var t=this.matchHeroSprDic.get(r);t&&t.logicSnake.restoreState(e.snakes[r])}}};$a._instance=null;var _I=$a,JA=_I;var se=class{static getInstance(){return xe.matchType===xe.MATCH_TYPE_PVE?XA.getInstance():JA.getInstance()}};var Ya=class Ya{static getInstance(){return Ya.instance||(Ya.instance=new Ya),Ya.instance}init(e=null){if(!e)throw new Error("gameLayer Must Be Not Null");se.getInstance().init(),_t.init();let t=se.getInstance().container,r=_t.container,s=new Laya.Sprite;e.addChild(r),e.addChild(t),e.addChild(s),s.addChild(sr.getInstance()),_t.init(),this.onConnectRoom()}onConnectRoom(){je.initSocket()}createData(){se.getInstance().createSnakes(),_t.createFoodsByData()}startGame(){ke.start()}clearTimer(){ke.stop()}endTimer(){ke.end()}update(e,t,r,s=!0){if(se.getInstance().updateSnakes(Laya.timer.delta,t,r,s),!t&&(Ui.move(se.getInstance().getSelfSnakePos(t)),J.needDraw)){let a=sr.getInstance();a&&(a.clearDraw(),wr.getInstance(null).drawDebug(a.graphics))}}restoreData(){se.getInstance().restoreSnakes(),_t.restoreFoods()}clear(){this.clearTimer()}};Ya.instance=null;var xI=Ya,or=xI.getInstance();var vI=class{constructor(){this.arenaId=0;this.coinType=0;this.members=[];this.item=[];this.remainderCd=0;this.startTime=0;this.nowTime=0;this.matchType=0;this.watch=[];this.anonymous=0}},tm=vI;var _y=class{constructor(){this.isStart=!1;this.eatFoodDic=new Oe;this._operationQueue={};this._localOperationQueue={};this.latestEventFrame=-1}enterRoom(e){var t=e.food,r=e.players;ke.init();var s=1e12,a=0,l=null;r.sort((p,h)=>p.enterTime-h.enterTime),r.forEach(p=>{if(J.Debug==2){var h="INIT 坐标: ======== "+p.roleId+" frame: "+p.frame+", pos: "+p.snake[0].loc.x+", "+p.snake[0].loc.y;console.table(h)}p.roleId==G.playerDto.pid&&(l=p,a=l.enterTime,s=l.frame)}),ke.setStartFrame(s,a);var u=[];r.forEach(p=>{if(p.state){var h=p.frame;if(h==s)u.push(p);else if(h>s){var f=new In;f.msgtype=y.snake.socket.MessageType.MSG_NOTICE_ENTER,f.msgBody=p,this.addOperation(f)}}});var m=new tm;m.members=u,m.myPlayerObject=l,m.roomId=e.roomNo,m.item=t,m.matchType=xe.MATCH_TYPE_PVP,Ee.matchDto=m,v.event(k.EVENT_PVP_INIT_DATA),Ee.stopAll=!1}pushMsg(e){var t=e.frame,r=e.msgList,s=[],a=1e12;r.forEach(l=>{var u=l.msghead.msgtype,m=l.msghead.msgcode,p,h=Laya.ClassUtils.getClass(u+"");if(h){var f=Date.now();if(p=h.deserializeBinary(l.msgbody).toObject(),J.Debug>=1){var g=Date.now();console.log(ee.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+u+", CODE:",m+", DATA:",p," dt:",g-f)}}else J.Debug>=1&&console.warn(ee.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+u+", CODE:",m+", className解析失败!");if(u==y.snake.socket.MessageType.MSG_PLAYER_COLLISION)this.confirmPlayerCollision(p,!0);else{var b=new In;b.msgtype=u,b.msgBody=p;var _=p.frame;_<a&&(a=_),s.push(b)}}),s&&s.length&&this.addFrameOperations(s)}noticeEnter(e,t){var r=t.players,s=r.frame,a=[],l=s,u=new In;u.msgtype=e,u.msgBody=r,a.push(u),this.addFrameOperations(a)}handleOperationDetail(e,t,r){switch(J.Debug>2&&console.log("======handleOperationDetail=====",e.msgBody.frame,e,"isLogicSnake: "+t),e.msgtype){case y.snake.socket.MessageType.MSG_PLAYER_OPR:var s=e.msgBody;this.onRevOprPush(s,t,r);break;case y.snake.socket.MessageType.MSG_EAT_FOOD:let l=e.msgBody;break;case y.snake.socket.MessageType.MSG_PLAYER_COLLISION:let u=e.msgBody;break;case y.snake.socket.MessageType.MSG_NOTICE_ENTER:var a=e.msgBody;se.getInstance().newAddSnake(a);break}}confirmPlayerCollision(e,t){var r=e.roleId,s=e.food,a=e.taret,l=e.head,u=e.frame,m=e.die,p=se.getInstance().getRoleById(r);if(p&&m!="-1"){var h=se.getInstance().getRoleById(a);m==r?(p.confirmDie(),h&&h.addKill(1)):(h&&h.confirmDie(),p.addKill(1)),s&&s.length&&_t.addFoods(s)}}addLocalOperation(e){if(ke.frameNetQueue.isStart){var t=new In,r=y.snake.socket.MessageType.MSG_PLAYER_OPR;t.msgtype=r,t.msgBody=e;var s=t.msgBody.frame+1;J.Debug>2&&console.log("addLocalOperation (frame): ",e.frame," (frame+1): "+s,t),this._localOperationQueue[s]||(this._localOperationQueue[s]=[]),this._localOperationQueue[s].push(t)}}addFrameOperations(e){J.Debug>2&&console.log(ee.GetLogTime,"addFrameOperations: latestEventFrame: ",this.latestEventFrame,e,"confirmedFrame: "+ke.confirmedFrame,"clientRuningFrame: "+ke.clientRuningFrame);for(let t of e)this.addOperation(t)}addOperation(e){var t=e.msgBody.frame+1;if(e.msgBody.frame<ke.startFrame){console.log(ee.GetLogTime,"addOperation: 收到帧小于开始帧，直接丢弃","frame: "+e.msgBody.frame,"startFrame: "+ke.startFrame);return}J.Debug>2&&console.log("addOperation (frame+1): ",t,e),this._operationQueue[t]||(this._operationQueue[t]=[]),this._operationQueue[t].push(e),t>this.latestEventFrame&&(this.latestEventFrame=t);var r=0;J.Debug>2&&console.debug("addOperation 收到帧 (frame+1): "+t+", confirmedFrame: "+ke.confirmedFrame+", rollBackConfirmedFrame: "+ke.rollBackConfirmedFrame+", tempFrame: "+r+", dFrame: "+(t-ke.confirmedFrame)),t<=ke.confirmedFrame&&(r=t),r!=0&&r<ke.rollBackConfirmedFrame&&(ke.rollBackConfirmedFrame=r)}addEatOperation(e,t){if(ke.frameNetQueue.isStart){var r=t+1;J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST  addEatOperation foodId: "+e+", (frame): ",t," (frame+1): "+r),this.eatFoodDic.set(e,r)}}removeEatOperation(e){this.eatFoodDic.remove(e)}onRevOprPush(e,t,r){if(e!=null){var s=se.getInstance().getRoleById(e.roleId);if(s){if(t&&s.logicSnake.updateHead106(e.frame,e.head,r,e.oprIndex),e.opr==1){var a=e.value;s.rotate(a,t)}else if(e.opr==2){var l=e.value;s.updateSpeedRate(l,t)}}else console.log(e.roleId+" snake is null")}}onUpdatePlayerObject(e,t){if(e!=null){var r=se.getInstance().getRoleById(e.roleId);r?e.state==!1:console.log(e.roleId+" snake is null")}}sendRestoreData(){if(Ee.msgEndbody==null&&se.getInstance().selfSnake&&se.getInstance().selfSnake.isAlive(!1)){var e=G.playerDto.pid,t=y.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA,r=y.snake.socket.CS_REQUEST_ROOM_DATA.fromObject({roleId:e});je.sendData(t,r)}}requestRoomData(e){var t=e.food,r=e.players;ke.init();var s=1e12,a=0,l=null;r.sort((E,T)=>E.enterTime-T.enterTime),r.forEach(E=>{if(J.Debug==2){var T="REINIT 坐标: ======== "+E.roleId+" frame: "+E.frame+", pos: "+E.snake[0].loc.x+", "+E.snake[0].loc.y;console.table(T)}if(E.roleId==G.playerDto.pid&&(l=E,a=l.oprTime),E.state){var R=E.frame;R<s&&(s=R)}}),ke.setStartFrame(s,a);var u=[];r.forEach(E=>{if(E.state){var T=E.frame;if(T==s)u.push(E);else if(T>s){var R=new In;R.msgtype=y.snake.socket.MessageType.MSG_NOTICE_ENTER,R.msgBody=E,this.addOperation(R)}}});var m=new tm;if(m.members=u,m.myPlayerObject=l,m.item=t,l&&l.state)this.onRevRestorePush(m);else if(l.result){var p=l.result,h=p.msghead.msgtype,f=p.msghead.msgcode,g,b=Laya.ClassUtils.getClass(h+"");if(b){var _=Date.now();if(g=b.deserializeBinary(p.msgbody).toObject(),J.Debug>=1){var I=Date.now();console.log(ee.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+h+", CODE:",f+", DATA:",g," dt:",I-_)}}else J.Debug>=1&&console.warn(ee.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+h+", CODE:",f+", className解析失败!");var x=g;Ee.onSetMatchEnd(x,!0)}else{var x=new y.snake.socket.SC_BATTLE_END;x.res=!1,x.roleId=l.roleId,x.score=l.score,x.kills=l.kills;var L=X.m_dicSnakes.get(l.snakeId);x.length=l.length/L.intervalBoneToDrawSkin,x.alive=Ee.matchCoolDownTime,x.items=[],Ee.onSetMatchEnd(x,!0)}}onRevRestorePush(e){e.matchType=xe.MATCH_TYPE_PVP,Ee.matchDto=e,v.event(k.EVENT_PVP_RESTORE_DATA)}};var II=class i{constructor(){this._frameInterval=33;this.startFrameTime=0;this.startFrame=0;this._currentFrame=0;this.clientPredictFrame=0;this.clientRuningFrame=0;this.lastClearupFrame=0;this.confirmedFrame=0;this.rollBackConfirmedFrame=0;this.quickConfirmedFrame=0;this._snakeStates={};this.type=0;this.lastLatestFrame=0;this.frameNetQueue=new _y}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){this.stop(),this.frameNetQueue._operationQueue={},this.frameNetQueue._localOperationQueue={},this.frameNetQueue.eatFoodDic=new Oe,this._snakeStates={},this._currentFrame=0,this.startFrame=0,this.startFrameTime=Laya.Browser.now()}setStartFrame(e,t){this.lastLatestFrame=0,this.clientPredictFrame=e,this.clientRuningFrame=e,this.lastClearupFrame=e,this.confirmedFrame=e,this.rollBackConfirmedFrame=this.confirmedFrame+1,this._currentFrame=e,this.startFrame=e,this.frameNetQueue.isStart=!0,this.startFrameTime=t+je.serverTimeOffset,console.log(ee.GetLogTime,"TEST_TIME: setStartFrame: this.startFrameTime: "+this.startFrameTime,"server enterTime: "+t,"serverTimeOffset: "+je.serverTimeOffset)}start(){this.saveSnapshot(this.startFrame),Laya.timer.loop(33,this,this.update),this.initTimer()}initTimer(){Laya.timer.frameLoop(2,this,this.onFrameLoop)}clearTimer(){Laya.timer.clear(this,this.onFrameLoop)}onFrameLoop(){se.getInstance().rorateReadySend()}stop(){Laya.timer.clear(this,this.update),this.clearTimer()}end(){this.stop(),this.frameNetQueue.isStart=!1}update(){if(this.frameNetQueue.isStart==!1)return;J.Debug==2&&Date.now()%5e3<33&&je.logLatencyStats();let e=Laya.Browser.now(),t=Math.floor((e-this.startFrameTime)/this._frameInterval);var r=this.startFrame+t;let s=this.frameNetQueue.latestEventFrame;J.Debug==2&&console.log(ee.GetLogTime," ======================update: ","latestFrame: "+r,"confirmedFrame: "+this.confirmedFrame,"rollBackConfirmedFrame: "+this.rollBackConfirmedFrame,"latestEventFrame: "+s,"startFrame: "+this.startFrame,"addFrame: "+t,"_currentFrame: "+this._currentFrame,"clientConfirmedFrame: "+this.clientRuningFrame,"type: "+this.type,this.confirmedFrame<s),this._currentFrame++;let a=3;var l=Math.min(r,s);if(this.rollBackConfirmedFrame<=l){var u=this.rollBackConfirmedFrame<=l;this.rollbackAndRedo(this.rollBackConfirmedFrame,l);var m=l+1,p=r-1;this.predictFrameToNow(m,p,xe.PREDICT_TYPE_ROLLBACK),m<=p?(this.render(),this.executeFrame(r,!1),this.type=12):u?m-p>1?(this.clientRuningFrame==p?(this.render(),this.executeFrame(p,!1),this.type=13):this.clientRuningFrame<p&&(this.render(),this.executeFrame(p,!0),this.type=14),this.render(),this.executeFrame(p,!1),this.type=15):this.clientRuningFrame==p?(this.render(),this.executeFrame(p,!1),this.type=16):(this.render(),this.executeFrame(m,!0),this.type=17):(this.render(),this.executeFrame(m,!0),this.type=18)}else{var m=this.clientRuningFrame+1,p=r-1;this.predictFrameToNow(m,p,xe.PREDICT_TYPE_NO_ROLLBACK),s==-1?(this.render(),this.executeFrame(r,!1),this.type=22):m<=p?m==p?this.type==27||this.type==23||this.type==17?(this.executeFrame(m,!0),this.type=23):(this.render(),this.executeFrame(m,!1),this.type=24):(this.render(),this.executeFrame(p,!1),this.type=25):m-p>1?(this.executeFrame(m,!0),this.type=26):(this.executeFrame(m,!0),this.type=27)}}executeFrame(e,t){se.getInstance().selfSnake&&(se.getInstance().selfSnake.getIsStop(!1)||se.getInstance().selfSnake.tag==null)||(t&&(this.clientRuningFrame=e),or.update(e,!1,!1,t))}saveSnapshot(e){this._snakeStates[e]==null?this._snakeStates[e]=se.getInstance().getSnakesState():this._snakeStates[e]=se.getInstance().getSnakesState()}cleanupOldData(e){if(this.lastClearupFrame!=-1){J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST executeConfirmFrame: 清理旧数据 从 [","lastClearupFrame: "+this.lastClearupFrame,"newSnapshotFrame: "+e+" )");var t=this.frameNetQueue.eatFoodDic.getMap();for(let[s,a]of t)a<e&&(_t.restoreViewFood(s),this.frameNetQueue.eatFoodDic.remove(s));for(var r=this.lastClearupFrame;r<e;r++)delete this.frameNetQueue._localOperationQueue[r];for(var r=this.lastClearupFrame;r<e;r++)delete this.frameNetQueue._operationQueue[r];for(var r=this.lastClearupFrame;r<e;r++)delete this._snakeStates[r]}this.lastClearupFrame=e}get currentFrame(){return this._currentFrame}getClientRuningFrame(e){return this.clientRuningFrame}getPredictFrame(){let e=Laya.Browser.now(),t=Math.floor((e-this.startFrameTime+je.delaT)/this._frameInterval);return this.startFrame+t}getPredictFrameHalf(){let e=Date.now(),t=je.delaT,r=e-this.startFrameTime+t,s=Math.floor(r/this._frameInterval);return this.startFrame+s}getClientCurrentFrame(){return this.clientRuningFrame+1}checkClientAndServerFrame(e,t,r){var s=r.x,a=r.y,l=10,u=Q.mapSize;if(!(s<u.offsetX-l||s>u.width-u.offsetX+l||a<u.offsetY-l||a>u.height-u.offsetY+l)){var m=this.frameNetQueue._operationQueue[e];m&&m.length&&m.forEach(p=>{if(p.msgBody.roleId==t){var h=p.msgBody.frame,f=[tt.create(s,a)],g=p.msgBody.head;!g&&p.msgBody.snake&&(g=p.msgBody.snake[0]);var b=ft.distancePoint(g.loc.x,g.loc.y,f[0].x,f[0].y);if(b>.01){var _=`坐标检测：====== 坐标异常（ ${t}） ${ee.GetLogTime} + " "${t}, checkClientAndServerFrame 前后端位移相差："${b},
                                "C:"${f[0].x}, ${f[0].y}, ${e-1}, "S:", ${g.loc.x}, ${g.loc.y}, ${h}`;J.Debug==2&&console.debug(_),ee.alertYes(_)}else J.Debug==2&&console.debug("坐标检测：====== （"+t+"） "+ee.GetLogTime+" "+t," checkClientAndServerFrame 前后端位移相差：",b,"C:",f[0].x,f[0].y,e-1,"S:",g.loc,h);return}})}}rollbackAndRedo(e,t){if(J.Debug==2&&console.log("rollbackAndRedo: startFrame: "+e+", endFrame: "+t),!(e>t)&&!(se.getInstance().selfSnake&&se.getInstance().selfSnake.tag==null)){this._snakeStates[e-1]?se.getInstance().restoreState(this._snakeStates[e-1]):console.error(ee.GetLogTime+" 不是上次确认帧",e,this._snakeStates);for(var r=e;r<=t;++r){let s=this.frameNetQueue._operationQueue[r]||[];for(let a of s)this.frameNetQueue.handleOperationDetail(a,!0,!0);this.clientRuningFrame=r,or.update(r,!0,!0),r>=t-2&&this.saveSnapshot(r)}this.cleanupOldData(t-2),this.confirmedFrame=t,this.rollBackConfirmedFrame=this.confirmedFrame+1}}predictFrameToNow(e,t,r){if(J.Debug==2&&console.log("predictFrameToNow startFrame: "+e+", endFrame: "+t+", predictType: "+r),!(e>t)&&!(se.getInstance().selfSnake&&(se.getInstance().selfSnake.getIsStop(!0)||se.getInstance().selfSnake.tag==null))){for(var s=e;s<=t;++s){let a=this.frameNetQueue._localOperationQueue[s]||[];for(let l of a)this.frameNetQueue.handleOperationDetail(l,!0,!1);this.clientRuningFrame=s,or.update(s,!0,!1)}this.clientPredictFrame=t}}render(){se.getInstance().adjustVisualState()}},ke=II.getInstance();var kn=class{constructor(e,t){this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200;this._collisionRadius=Q.collision.food.radius;this.position=tt.create(t.loc.x,t.loc.y),this.oriPos=tt.create(t.loc.x,t.loc.y),this.foodObject=t,this.init(e)}init(e){this.sprite=ie.matchSnakeBeanPrefab.create();var t=X.m_dicFoods.get(this.foodObject.itemId);if(this.sprite.init(t),this._collisionRadius=t.collisionRadius,this.sprite.pos(this.position.x,this.position.y),this.sprite.zOrder=0,e.addChild(this.sprite),J.needFoodId){let r=new Laya.Label;r.text=`${this.foodObject.unkey}:(${Math.round(this.position.x)}, ${Math.round(this.position.y)})`,r.color="#FFFFFF",r.fontSize=18,r.font="Arial",r.align="center",r.anchorX=.5,r.anchorY=1,r.stroke=2,r.strokeColor="#000000",r.y=-this.sprite.height/2-2,this.sprite.addChild(r)}}reset(e,t){this.position=tt.create(t.loc.x,t.loc.y),this.oriPos=tt.create(t.loc.x,t.loc.y),this.foodObject=t,this.setHaveEaten(!1,!0),this.setHaveEaten(!1,!1);var r=X.m_dicFoods.get(this.foodObject.itemId);this.sprite.init(r),this._collisionRadius=r.collisionRadius,this.sprite.alpha=1,this.sprite.pos(this.position.x,this.position.y),e.addChild(this.sprite)}resetForPool(){this.setHaveEaten(!1,!0),this.setHaveEaten(!1,!1),Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf()}startScalingAnimation(){let e=this.minScale+Math.random()*(this.maxScale-this.minScale),t=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:e,scaleY:e},t,null,Laya.Handler.create(this,()=>{let r=this.minScale+Math.random()*(1-this.minScale),s=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:r,scaleY:r},s,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}getPosition(){return this.position}getScore(){var e=X.m_dicFoods.get(this.foodObject.itemId);return e.points}getHaveEaten(e){return e?this.haveEatenConfirm:this.haveEatenClient}beEattenByPlayerSnake(e,t,r){this.setHaveEaten(!0,r),this.beEatten(e.getHead(t).node.x,e.getHead(t).node.y,r)}setHaveEaten(e,t){t?this.haveEatenConfirm=e:this.haveEatenClient=e}beEatten(e,t,r){var s=this.foodObject.unkey;if(r)J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST beEatten removeEatOperation hasConfirmed: ",r," foodId: "+s),ke.frameNetQueue.removeEatOperation(s),Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish,[!0]));else if(Ee.matchDto.matchType==xe.MATCH_TYPE_PVE)Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish,[!0]));else if(J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST beEatten hasConfirmed: ",r," foodId: "+s," haveEatenConfirm: "+this.getHaveEaten(!0)),!this.getHaveEaten(!0)){var a=J.vType==0?.5:0,l=ke.getPredictFrame();ke.frameNetQueue.addEatOperation(s,l),Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:a},200,null,Laya.Handler.create(this,this.onFinish,[!1]))}this.setHaveEaten(!0,r)}onFinish(e){e?(J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST onFinish hasConfirmed: ",e+"haveEatenConfirm: ",this.haveEatenConfirm," foodId: "+this.foodObject.unkey),this.resetForPool(),_t.removeFood(this)):this.sprite.alpha=.5}restoreView(){J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST restoreView haveEatenConfirm: ",this.haveEatenConfirm," foodId: "+this.foodObject.unkey),this.haveEatenConfirm||(this.haveEatenClient=!1,Laya.Tween.clearAll(this.sprite),this.position=tt.create(this.oriPos.x,this.oriPos.y),this.sprite.alpha=1,this.sprite.pos(this.position.x,this.position.y))}destroy(){Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf(),this.sprite.destroy(),this.sprite=null,this.oriPos=this.position=null}getBoundingBox(){return new Laya.Rectangle(this.position.x-this._collisionRadius,this.position.y-this._collisionRadius,this._collisionRadius*2,this._collisionRadius*2)}checkCollision(e,t,r){let s=this.position;return yt.distance(s.x,s.y,e,t)<r+this._collisionRadius}};var xy=class{constructor(e){this.container=e;this.pool=[]}getFood(e){let t;return this.pool.length>0?(t=this.pool.pop(),t.reset(this.container,e)):t=new kn(this.container,e),t}returnFood(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}};var Gs=class Gs{constructor(){this.foods=[];this.foodDic=new Oe;this.spawnTimer=0;this.foodUnKey=0}static getInstance(){return Gs._instance||(Gs._instance=new Gs),Gs._instance}init(){this.container||(this.container=new Laya.Sprite),this._collision=wr.getInstance(),this.foodPool=new xy(this.container)}spawnFoods(){var e=[],t=Q.food.initCount;for(let s=1;s<=t;s++){var r=this.spawnRandomFoodObject();e.push(r)}return e}spawnRandomFoodObject(){var e=Q.mapSize.offsetDistance,t=yt.randomRange(e,Q.mapSize.width-e),r=yt.randomRange(e,Q.mapSize.height-e),s=this.getFoodObjectByPos(t,r);return s}spawnFood(){if(!(this.foods.length>=Q.food.maxCount)){var e=this.spawnRandomFoodObject();this.addFood(e)}}update(e){this.spawnTimer+=e,this.spawnTimer>=Q.food.spawnInterval&&(this.spawnTimer=0,this.spawnFood())}addFoodByPosWithDie(e,t){if(!(this.foods.length>=Q.food.maxCount)){var r=this.getFoodObjectByPos(e,t);this.addFood(r)}}getFoodObjectByPos(e,t){this.foodUnKey+=1;var r=X.m_dicFoods.keys.length,s=Math.floor(Math.random()*r),a=X.m_dicFoods.keys[s],l=new y.snake.socket.FoodObject;l.itemId=a,l.unkey=this.foodUnKey+"";var u=new y.snake.socket.PointObject;return u.x=e,u.y=t,l.loc=u,l}addFoods(e){e&&e.forEach(t=>this.addFood(t))}addFood(e){if(!e)return;let t=this.foodPool.getFood(e);this._collision.addSnake([t]),this.foods.push(t),this.foodDic.set(e.unkey,t)}getFood(e){return this.foodDic.get(e)}eateFoodIds(e,t,r,s){J.Debug==2&&e.setClientScore(r,s);var a=r-e.getScore(s);if(a&&e.showAddScore(a,s),e.isSelf&&t&&t.length){var l=Math.floor(Math.random()*3)+1;let u=`soundName_eat_food_${l}`;Ke[u]?Ke.playSoundByName(Ke[u]):console.warn(`音效 ${u} 不存在`)}}removeFood(e){this._collision.removeSnake([e]);let t=this.foods.indexOf(e);t!==-1&&this.foods.splice(t,1),J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST remove foodId: "+e.foodObject.unkey),this.foodDic.remove(e.foodObject.unkey),this.foodPool.returnFood(e)}removeAllFoods(){this._collision.removeSnake(this.foods),this.foods.forEach(e=>e.destroy()),this.foods=[],this.foodDic=new Oe,this.foodPool.clear()}getAllFoods(){return this.foods}clear(){this.container.removeSelf(),this.container=null,this.removeAllFoods(),this.foodPool.clear(),this.foodPool=null,Gs._instance=null}restoreViewFood(e){var t=this.getFood(e);t?t.restoreView():J.Debug==2&&console.log(ee.GetLogTime+" FOOD_TEST restoreViewFood foodId: "+e+" food is null ")}restoreFoods(){this.removeAllFoods(),this.createFoodsByData()}createFoodsByData(){let e=Ee.matchDto.item.length;for(var t=0;t<e;t++){var r=Ee.matchDto.item[t];this.addFood(r)}}};Gs._instance=null;var kI=Gs,_t=kI.getInstance();var vy=class{constructor(){this._smoothDelay=0;this._alpha=.2;this.requestTime=0;this.lastheartBeatTime=0;this._heartBeatMissed=0;this._heartBeatMissedMax=5;this._heartBeatInterval=3*1e3;this.init()}updateNetworkLatency(e){let r=Date.now()-e;v.event(k.EVENT_Game_Room_Delay,r);let s=r/2;this._smoothDelay===0?this._smoothDelay=s:this._smoothDelay=this._alpha*s+(1-this._alpha)*this._smoothDelay,je.delaT=this._smoothDelay,je._lastRTT=r,J.Debug&&console.log(`[Latency] RTT: ${r}ms, 平滑延迟: ${this._smoothDelay.toFixed(1)}ms`),r>1e3}init(){v.on(Je.EVENT_ROOM_SOCKET_OPEN,this,this.onSocketOpen),v.on(Je.EVENT_ROOM_SOCKET_ERROR,this,this.onScoketError),v.on(Je.EVENT_ROOM_SOCKET_CLOSE,this,this.onSocketClose),v.on(Je.EVENT_ROOM_STOP_HEART,this,this.stopHeartbearTimer),v.on(Je.EVENT_ROOM_SHOW_TIP_DELAY,this,this.onShowTipDelay),v.on(Je.EVENT_ROOM_HEART_BEAT,this,this.onHeartBeat),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME,this,this.onRecvServerTime),v.on("msg_"+y.snake.socket.MessageType.MSG_ENTER_ROOM,this,this.onGetEnterRoomDataBack),v.on("msg_"+y.snake.socket.MessageType.MSG_PUSH,this,this.onMsgPush),v.on("msg_"+y.snake.socket.MessageType.MSG_NOTICE_ENTER,this,this.onNoticeEnter),v.on("msg_"+y.snake.socket.MessageType.MSG_PLAYER_OUT,this,this.onPlayerOut),v.on("msg_"+y.snake.socket.MessageType.MSG_EAT_FOOD,this,this.onEatFood),v.on("msg_"+y.snake.socket.MessageType.MSG_PLAYER_COLLISION,this,this.onPlayerCollision),v.on("msg_"+y.snake.socket.MessageType.MSG_GEN_FOOD,this,this.onGenFood),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA,this,this.onRequestRoomData),v.on("msg_"+y.snake.socket.MessageType.MSG_BATTLE_END,this,this.onBattleEnd),v.on("msg_"+y.snake.socket.MessageType.MSG_PLAYER_OPR,this,this.onPlayerOpr),v.on("msg_"+y.snake.socket.MessageType.MSG_AI_ENTER,this,this.onAiEnter)}onGetEnterRoomDataBack(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_ENTER_ROOM),s=r;ke.frameNetQueue.enterRoom(s),this.clearShowTip(),this.heartbeatTimer()}onMsgPush(e,t){if(ke.frameNetQueue.isStart){var r=de.getMsgBody(e,y.snake.socket.SC_PUSH),s=r;ke.frameNetQueue.pushMsg(s)}}onNoticeEnter(e,t){if(!ke.frameNetQueue.isStart)return;var r=de.getMsgBody(e,y.snake.socket.SS_NOTICE_ENTER);let s=r;var a=e.msghead.msgtype;ke.frameNetQueue.noticeEnter(a,s)}onPlayerOut(e,t){if(!ke.frameNetQueue.isStart)return;var r=de.getMsgBody(e,y.snake.socket.SC_PLAYER_OUT),a=r.roleId;se.getInstance().removeSnake(a)}onEatFood(e,t){if(!ke.frameNetQueue.isStart)return;var r=de.getMsgBody(e,Wn);let s=r}onPlayerCollision(e,t){if(!ke.frameNetQueue.isStart)return;var r=de.getMsgBody(e,y.snake.socket.SC_PLAYER_COLLISION);let s=r;console.warn(ee.GetLogTime+"Snake DIE CMD:113 收到了 玩家 "+s.roleId+" 碰撞 数据返回",s),ke.frameNetQueue.confirmPlayerCollision(s,!0)}onGenFood(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_GEN_FOOD),s=r,a=s.frame;_t.addFoods(s.food)}onRequestRoomData(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_REQUEST_ROOM_DATA),s=r;console.log("收到了恢复数据返回"),ke.frameNetQueue.requestRoomData(s)}onBattleEnd(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_BATTLE_END),s=r,a=s.res;Ee.onSetMatchEnd(s)}onAiEnter(e,t){console.log("收到了进入AI房间返回")}onPlayerOpr(e,t){var r=de.getMsgBody(e,y.snake.socket.CS_PLAYER_OPR);if(ke.frameNetQueue.isStart){var s=r,a=s.frame,l=[],u=a,m=new In,p=e.msghead.msgtype;if(m.msgtype=p,m.msgBody=s,l.push(m),J.Debug==2){var h="S 坐标: ======== "+s.roleId+" frame: "+s.frame+", pos: "+s.head.loc.x+", "+s.head.loc.y;console.table(h)}ke.frameNetQueue.addFrameOperations(l)}}onRequestTime(){this.clientSendTime=Date.now();var e=y.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME,t=null;je.sendData(e,t)}onGetEnterRoomData(){var e=G.playerDto.pid,t=y.snake.socket.MessageType.MSG_ENTER_ROOM,r=y.snake.socket.CS_ENTER_ROOM.fromObject({roleId:e});je.sendData(t,r)}onRecvServerTime(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_REQUEST_SERVER_TIME),s=r,a=s.time;this.requestTime++;let l=Date.now();var u=(l+this.clientSendTime)/2,m=u-a;je.serverTimeOffsets.push(m);var p=(l-this.clientSendTime)/2;if(je.delaTs.push(p),console.log("TEST_TIME: this.requestTime: "+this.requestTime,"clientRecvTime: "+l,"clientSendTime: "+this.clientSendTime,"clientTimestamp: "+u,"serverTimestamp: "+a,"serverTimeOffset: "+m,"delaT: "+p),this.requestTime>4){je.serverTimeOffsets.sort((I,x)=>Math.abs(I)-Math.abs(x)),je.serverTimeOffsets.pop();for(var h=0,f=je.serverTimeOffsets.length,g=0;g<f;g++)h+=je.serverTimeOffsets[g];m=Math.round(h/f),je.serverTimeOffset=m,je.delaTs.sort((I,x)=>I-x),je.delaTs.pop();for(var b=0,_=je.delaTs.length,g=0;g<_;g++)b+=je.delaTs[g];p=Math.round(b/_),je.delaT=p,console.log("TEST_TIME: serverTimeOffset: "+je.serverTimeOffset+", delaT: "+je.delaT),this.requestTime=0,je.serverTimeOffsets=[],je.delaTs=[],this.onGetEnterRoomData()}else this.onRequestTime()}onSocketOpen(){this.onRequestTime()}onScoketError(){this.popToMain()}onSocketClose(){this.popToMain()}popToMain(){lt.hideLoading(),je.isMatching&&ee.popToMain()}onShowTipDelay(){Laya.timer.once(18e3,this,this.showTip)}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){ee.netError()}stopHeartbearTimer(){Laya.timer.clear(this,this.sendHeartBeat),this._heartBeatMissed=0}heartbeatTimer(){this.stopHeartbearTimer(),this.sendHeartBeat(),Laya.timer.loop(this._heartBeatInterval,this,this.sendHeartBeat)}sendHeartBeat(){ke.frameNetQueue.isStart&&(this.lastheartBeatTime=Date.now(),je.sendData(y.snake.socket.MessageType.MSG_HEART_BEAT,null),this._heartBeatMissed+=1,this._heartBeatMissed>=this._heartBeatMissedMax&&(console.log("发送大厅心跳超过最大次数,关闭Socket",this._heartBeatMissed),this.stopHeartbearTimer(),je.close(),ee.popMatchErrorToMain()))}onHeartBeat(){this._heartBeatMissed=-1,this.lastheartBeatTime>0&&this.updateNetworkLatency(this.lastheartBeatTime)}};var SI=class i{constructor(){this.m_strHttpHost=getWSServer();this.serverTimeOffset=0;this.serverTimeOffsets=[];this.delaT=0;this.delaTs=[];this._lastRTT=0;this._headerLength=4;this._packetLength=-1;this._isMatching=!1;new vy,this._byte=new Laya.Byte,this._byte.endian="bigEndian",this._socket=new Laya.Socket,this._socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this._socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this._socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this._socket.on(Laya.Event.ERROR,this,this.onConnectError)}static getInstance(){return i._instance==null&&(i._instance=new i),i._instance}get isMatching(){return this._isMatching}set isMatching(e){this._isMatching=e,e||(this.connected=!1)}close(){this._socket&&this._socket.close()}initSocket(){this.isMatching=!0,console.log("GlobalDataManager.nodeId===============>",G.nodeItem);let e=G.nodeItem,t=null;if(e&&e.socketUrl&&(t=e.socketUrl),J.vType==0)r=Ee.roomDto.connectAddr;else var r=t||Ee.roomDto.connectAddr;this.m_strHttpHost=r,this.connect()}onSocketOpen(){this.connected=!0,console.log(ee.GetLogTime,"[RoomWebSocket] ----onOpen------------> connected"),this.emit(Je.EVENT_ROOM_SOCKET_OPEN)}onConnectError(e){this.connected=!1,console.log(ee.GetLogTime,"[RoomWebSocket] ----onError------------>",e),this.emit(Je.EVENT_ROOM_SOCKET_ERROR)}onSocketClose(e){this.connected=!1,console.log(ee.GetLogTime,"[RoomWebSocket] ----onClose------------>",this._socket),this.emit(Je.EVENT_ROOM_SOCKET_CLOSE)}connect(){this.isMatching&&(this.connected||(this._socket.connectByUrl(this.m_strHttpHost),this.emit(Je.EVENT_ROOM_SHOW_TIP_DELAY)))}sendData(e,t,r=!0){if(!(!this.isMatching&&r)&&this.connected){var s=t?t.serializeBinary():null;console.log(ee.GetLogTime,"[RoomWebSocket]  ------>>>>>>>> SEND CMD:"+e,t?t.toObject():null);var a=de.encodeMessage(e,s,"");this._socket.send(a.buffer)}}async onMessageReveived(e){if(!(e instanceof ArrayBuffer)){console.warn(ee.GetLogTime,"[RoomWebSocket]: no ArrayBuffer data",e);return}let t=new Uint8Array(e);for(this._byte.writeArrayBuffer(t.buffer),this._byte.pos=0;this._byte.bytesAvailable>0;){if(this._packetLength===-1)if(this._byte.bytesAvailable>=this._headerLength)this._packetLength=this._byte.getUint32();else break;if(this._byte.bytesAvailable>=this._packetLength){let r=this._byte.readUint8Array(this._headerLength,this._packetLength);this.processPacket(r),this._packetLength=-1}else break}if(this._byte.pos>0){let r=this._byte.bytesAvailable;if(r>0){let s=this._byte.readUint8Array(0,r);this._byte.clear(),this._byte.writeArrayBuffer(s.buffer)}else this._byte.clear()}}processPacket(e){try{var t=de.decodeMessage(e),r=t.msghead.msgtype;this.emitter(r,t)}catch{}}emitter(e,t){var r=t.msghead.msgcode;r!=y.snake.socket.MessageCode.SYS_NORMAL&&this.emit(Je.EVENT_GLOBAL_ERROR_CODE,r),e!=y.snake.socket.MessageType.MSG_HEART_BEAT?this.emit("msg_"+e,t,r):this.emit(Je.EVENT_ROOM_HEART_BEAT,t,r)}emit(e,...t){v.event(e,t)}logLatencyStats(){console.log(`[FrameSync] 当前平滑延迟: ${this.delaT.toFixed(1)}ms, 最新RTT: ${this._lastRTT}ms`)}clearAll(){Laya.timer.clearAll(this),this.close(),this.emit(Je.EVENT_ROOM_STOP_HEART)}},je=SI.getInstance();var wI=class i{constructor(){this._notices=[];this._isPlaying=!1;this._currentIndex=0;this._textField=null;this._container=null;this._speed=2;this._noticePlayCounts=new Map;this._isInMainScene=!1;this._maxPlayCount=1;this._hasFullyEntered=!1}static getInstance(){return this._instance||(this._instance=new i),this._instance}init(e,t,r=2){this._container=e,this._textField=t,this._speed=r,this._configureTextField(),this._textField.visible=!1,this._container.scrollRect=new Laya.Rectangle(0,0,this._container.width,this._container.height),this._isInMainScene=!0,this.checkAndPlayStoredNotices()}_configureTextField(){this._textField&&(this._textField.overflow=Laya.Text.VISIBLE,this._textField.wordWrap=!1)}addNotice(e){if(!e||e.trim()==="")return;let t=this._notices.length===0;this._noticePlayCounts.has(e)||this._noticePlayCounts.set(e,0),this._notices.indexOf(e)===-1&&this._notices.push(e),t&&this._notices.length>0&&this._isInMainScene&&v.event(k.EVENT_NEW_NOTICE_ADDED),this._isInMainScene&&!this._isPlaying&&this._container&&this.play()}addNotices(e){if(!(!e||e.length===0))for(let t of e)this.addNotice(t)}clearNotices(){this._notices=[],this._isPlaying=!1,this._currentIndex=0,this._noticePlayCounts.clear(),this._textField&&(this._textField.visible=!1),Laya.timer.clearAll(this)}play(){this._notices.length===0||!this._container||(this._isPlaying=!0,this.showCurrentNotice())}showCurrentNotice(){if(this._notices.length===0){this._isPlaying=!1;return}let e=this._notices[this._currentIndex];this._textField.text=e,this._textField.width=this._textField.textWidth,this._textField.visible=!0,this._hasFullyEntered=!1,Laya.timer.frameOnce(1,this,()=>{this._textField.width=this._textField.textWidth,this._textField.x=this._container.width,Laya.timer.frameLoop(1,this,this.scrollText)})}scrollText(){if(this._textField.x-=this._speed,!this._hasFullyEntered&&this._textField.x+this._textField.width<=this._container.width&&(this._hasFullyEntered=!0),this._hasFullyEntered&&this._textField.x+this._textField.width<=0){Laya.timer.clear(this,this.scrollText);let e=this._notices[this._currentIndex];if(this._isInMainScene){let r=this._noticePlayCounts.get(e)||0;r++,this._noticePlayCounts.set(e,r)}let t=this._noticePlayCounts.get(e)||0;this._isInMainScene&&t>=this._maxPlayCount?(this._notices.splice(this._currentIndex,1),this._noticePlayCounts.delete(e),this._currentIndex>=this._notices.length&&(this._currentIndex=0)):this._currentIndex=(this._currentIndex+1)%this._notices.length,this._notices.length>0?this.showCurrentNotice():(this._isPlaying=!1,this._textField.visible=!1,this._isInMainScene&&v.event(k.EVENT_MARQUEE_EMPTY))}}pause(){Laya.timer.clear(this,this.scrollText),this._isPlaying=!1}resume(){!this._isPlaying&&this._notices.length>0&&this.play()}setSpeed(e){this._speed=e}setInMainScene(e){if(this._isInMainScene!==e)if(this._isInMainScene=e,e){if(this._notices.length>0){for(let t of this._notices)this._noticePlayCounts.set(t,0);v.event(k.EVENT_NEW_NOTICE_ADDED)}this.checkAndPlayStoredNotices()}else this.pause()}checkAndPlayStoredNotices(){this._notices.length>0&&this._isInMainScene&&!this._isPlaying&&this._container&&this.play()}getStoredNotices(){return[...this._notices]}getNoticePlayCount(e){return this._noticePlayCounts.get(e)||0}setMaxPlayCount(e){e>0&&(this._maxPlayCount=e)}hasNotices(){return this._notices.length>0}},wn=wI.getInstance();var Iy=class{constructor(){this.connectTime=0;this.connectTimeMax=5;this.preTime=1e3;this.isOtherLogin=!1;this._heartBeatInterval=5e3;this.isFirst=!0;this.init()}init(){v.on(Je.EVENT_GLOBAL_ERROR_CODE,this,this.onShowGlobalErrorCode),v.on(Je.EVENT_HALL_SOCKET_OPEN,this,this.onSocketOpen),v.on(Je.EVENT_HALL_SOCKET_ERROR,this,this.onScoketError),v.on(Je.EVENT_HALL_SOCKET_CLOSE,this,this.onSocketClose),v.on(Je.EVENT_HALL_STOP_HEART,this,this.stopHeartbearTimer),v.on(Je.EVENT_HALL_SHOW_TIP_DELAY,this,this.onShowTipDelay),v.on("msg_"+y.snake.socket.MessageType.MSG_USER_LOGIN,this,this.onUserLogin),v.on("msg_"+y.snake.socket.MessageType.MSG_REPEAT_LOGIN_NOTICE,this,this.onOtherUserLogin),v.on("msg_"+y.snake.socket.MessageType.MSG_LVUP_NOTICE,this,this.onLvUpNotice),v.on("msg_"+y.snake.socket.MessageType.MSG_UPDATE_ROLE,this,this.onUpdateRole),v.on("msg_"+y.snake.socket.MessageType.MSG_SYS_NOTICE,this,this.onSysNotice),v.on("msg_"+y.snake.socket.MessageType.MSG_PACK_INFO,this,this.onPackInfo)}onSocketOpen(){console.log("socket connect success"),this.startHeartBeat(),Laya.timer.clear(this,this.onReconnect),He.walletAddress&&(console.log(ee.GetLogTime,"[HallMessageHandle] Sending login request after connecting to hall server"),this.onLogin())}onScoketError(){this.startReconnect()}onSocketClose(){this.startReconnect()}startReconnect(){if(!this.isOtherLogin)if(console.log("websocket----closed connectTime:"+this.connectTime+", connectTimeMax: "+this.connectTimeMax),this.connectTime<=this.connectTimeMax){var e=this.connectTime*this.preTime;Laya.timer.once(e,this,this.onReconnect)}else lt.hideLoading(),this.showTip()}onReconnect(){this.reconnect(),this.connectTime++}reconnect(){if(console.log(ee.GetLogTime,"[HallWebSocket]  reconnect 开始重连服务器"),ge.connected)return;let e=String(this.connectTime)+"/"+String(this.connectTimeMax)+" "+D.getLanguage("正在尝试重连");lt.showLoadingByInfo(e),ge.connectWebSocket(),console.log(ee.GetLogTime,"[HallWebSocket]  reconnect -------->",e)}onShowTipDelay(){Laya.timer.once(1e4,this,this.showTip)}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){ee.netError()}onLogin(){var e=y.snake.socket.MessageType.MSG_USER_LOGIN;let t=He.getloginRequestInfo;var r=y.snake.socket.CS_USER_LOGIN.fromObject(t);ge.send(e,r)}onUserLogin(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_USER_LOGIN);console.log("登录返回信息",r),t==y.snake.socket.MessageCode.USER_NOT_EXIST?(console.log("have no regist"),Xe.sendCustumEvent(23),Be.intance.openModule(M.CreateLoginView)):t==y.snake.socket.MessageCode.SYS_NORMAL&&(lt.hideLoading(),console.log("have regist"),G.updatePlayerInfo(r.roleInfo),this.isFirst&&(v.event(k.EVENT_ENTER_MAIN),this.isFirst=!1)),this.connectTime=0,this.clearShowTip(),this.heartbeatTimer()}onOtherUserLogin(e,t){this.isOtherLogin=!0,ge.clearAll(),ge.close(),je.isOtherLogin=!0,je.clearAll(),je.close(),ee.otherLogin(),console.log("WS----------------------------otherLogin")}onShowGlobalErrorCode(e){if(e!=y.snake.socket.MessageCode.SYS_NORMAL){console.log(ee.GetLogTime,"[HallMessageHandle]  msgcode--------------->",e);let t=ci.get(e);if(J.vType!=2){if(e!==y.snake.socket.MessageCode.NOT_ENOUGH_TOKEN&&e!==y.snake.socket.MessageCode.CREATE_ROOM_MAX&&e!==y.snake.socket.MessageCode.USER_NOT_EXIST){let r=D.getLanguage(e+1e4);ee.commTipWithYes(r)}}else ee.commTipWithYes(t)}}stopHeartbearTimer(){Laya.timer.clear(this,this.sendHeartBeat)}heartbeatTimer(){this.stopHeartbearTimer(),Laya.timer.loop(this._heartBeatInterval,this,this.sendHeartBeat)}startHeartBeat(){this.sendHeartBeat(),Laya.timer.loop(3e4,this,this.sendHeartBeat)}sendHeartBeat(){ge.send(y.snake.socket.MessageType.MSG_HEART_BEAT,null,!1)}onLvUpNotice(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_LVUP_NOTICE);let s=r;ke.frameNetQueue.isStart||Be.intance.openModule(M.PlayerUpgradeSuccessDialog,s),console.log("收到升级通知:",s)}onUpdateRole(e,t){var r=de.getMsgBody(e,y.snake.socket.SS_UPDATE_ROLE);if(console.log("收到更新角色信息:",r),!r.roleInfo||r.roleInfo.length===0){console.log("收到的角色信息为空");return}G.updatePlayerInfo(r.roleInfo[0])}onSysNotice(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_SYS_NOTICE);t===y.snake.socket.MessageCode.SYS_NORMAL&&r&&r.msg&&(console.log("收到系统公告:",r.msg),r.msg=`${r.msg}`,r.msg&&r.msg.trim()!==""&&wn.addNotice(r.msg),v.event(k.EVENT_NEW_NOTICE,r.msg))}onPackInfo(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_PACK_INFO);t===y.snake.socket.MessageCode.SYS_NORMAL&&(ui.initKnapsackData(r.items),ui.initSnakeData(r.snake))}};var EI=class i{constructor(){this._socket=null;this.wsUrl=getWSServer();this.isFirstConnection=!0;this._headerLength=4;this._packetLength=-1;new Iy,this._byte=new Laya.Byte,this._byte.endian="bigEndian",this._socket=new Laya.Socket,this._socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this._socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this._socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this._socket.on(Laya.Event.ERROR,this,this.onSocketError),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_HALL_ADDR,this,this.onHallAddrResponse)}static getInstance(){return i._instance==null&&(i._instance=new i),i._instance}connect(){console.log(ee.GetLogTime,"[HallWebSocket] Try to connect url = "+this.wsUrl,He.walletAddress),!this.connected&&(this.connectWebSocket(),this.emit(Je.EVENT_HALL_SHOW_TIP_DELAY))}connectWebSocket(){this._socket.connectByUrl(this.wsUrl)}onSocketOpen(){this.connected=!0,console.log(ee.GetLogTime,"[HallWebSocket] ----onOpen------------> connected"),this.isFirstConnection&&He.walletAddress?(this.requestHallAddr(),this.isFirstConnection=!1,console.log(ee.GetLogTime,"[HallWebSocket] Requesting hall address before login")):this.emit(Je.EVENT_HALL_SOCKET_OPEN)}requestHallAddr(){console.log(ee.GetLogTime,"[HallWebSocket] Requesting hall address for wallet: "+He.walletAddress);var e=y.snake.socket.CS_REQUEST_HALL_ADDR.fromObject({address:He.walletAddress});this.send(y.snake.socket.MessageType.MSG_REQUEST_HALL_ADDR,e)}onHallAddrResponse(e,t){if(t==y.snake.socket.MessageCode.SYS_NORMAL){var r=de.getMsgBody(e,y.snake.socket.SC_REQUEST_HALL_ADDR);if(r&&r.hallAddr){console.log(ee.GetLogTime,"[HallWebSocket] Received hall address: "+r.hallAddr);var s=this.connected;this.close(),this.wsUrl=r.hallAddr,console.log(ee.GetLogTime,"[HallWebSocket] Switching to new hall address: "+this.wsUrl),this.isFirstConnection=!1,this.connectWebSocket()}}else console.log(ee.GetLogTime,"[HallWebSocket] Failed to get hall address, continue with current connection"),this.emit(Je.EVENT_HALL_SOCKET_OPEN)}onSocketError(e){this.connected=!1,console.log(ee.GetLogTime,"[HallWebSocket] ----onError------------>",e),this.emit(Je.EVENT_HALL_SOCKET_ERROR)}onSocketClose(){this.connected=!1,console.log(ee.GetLogTime,"[HallWebSocket] ----onClose------------>",this._socket),this.emit(Je.EVENT_HALL_SOCKET_CLOSE)}close(){this.connected=!1,console.log(ee.GetLogTime,"[HallWebSocket] ----WS:close"),this._socket&&this._socket.close(),v.off("msg_"+y.snake.socket.MessageType.MSG_REQUEST_HALL_ADDR,this,this.onHallAddrResponse)}clearAll(){Laya.timer.clearAll(this),this.close(),this.emit(Je.EVENT_HALL_STOP_HEART)}send(e,t,r=!0){if(this.connected){var s=t?t.serializeBinary():null;e!=y.snake.socket.MessageType.MSG_HEART_BEAT&&console.log(ee.GetLogTime,"[HallWebSocket]  ------>>>>>>>> SEND CMD:"+e,t?t.toObject():null);var a=de.encodeMessage(e,s,"");this._socket.send(a.buffer)}else console.log(ee.GetLogTime,"[HallWebSocket]  ------>>>>>>>> SENDE RROR CMD:"+e,t?t.toObject():null)}onMessageReveived(e=null){if(console.log(ee.GetLogTime,"[HallWebSocket]: onMessage",e.byteLength),!(e instanceof ArrayBuffer)){console.warn(ee.GetLogTime,"[HallWebSocket]: no ArrayBuffer data",e);return}let t=new Uint8Array(e);for(this._byte.writeArrayBuffer(t.buffer),this._byte.pos=0;this._byte.bytesAvailable>0;){if(this._packetLength===-1)if(this._byte.bytesAvailable>=this._headerLength)this._packetLength=this._byte.getUint32();else break;if(this._byte.bytesAvailable>=this._packetLength){let r=this._byte.readUint8Array(this._headerLength,this._packetLength);this.processPacket(r),this._packetLength=-1}else break}if(this._byte.pos>0){let r=this._byte.bytesAvailable;if(r>0){let s=this._byte.readUint8Array(0,r);this._byte.clear(),this._byte.writeArrayBuffer(s.buffer)}else this._byte.clear()}}processPacket(e){try{var t=de.decodeMessage(e),r=t.msghead.msgtype;r!=y.snake.socket.MessageType.MSG_HEART_BEAT&&console.log(ee.GetLogTime,"[HallWebSocket]: onMessage",r.toString(),t),this.emitter(r,t)}catch(s){console.log(ee.GetLogTime,"[HallWebSocket] onSocketError e:"+s)}}emitter(e,t){var r=t.msghead.msgcode;r!=y.snake.socket.MessageCode.SYS_NORMAL&&this.emit(Je.EVENT_GLOBAL_ERROR_CODE,r),this.emit("msg_"+e,t,r)}emit(e,...t){v.event(e,t)}},ge=EI.getInstance();function ky(i,e){var t;e===void 0&&(e="0");var r=0,s=-1;i[0]=="-"&&(i=i.substring(1),AI(i)||(r++,s=1,i.length)),e[0]=="-"&&(e=e.substring(1),AI(e)||(r++,s=2,e.length)),i=Mi(i),e=Mi(e),t=DI(Mi(i),Mi(e)),i=t[0],e=t[1],r==1&&(s===1?i=LI(i):s===2&&(e=LI(e)));var a=sC(i,e);return r?r==2?"-"+Mi(a):i.length<a.length?Mi(a.substring(1)):"-"+Mi(LI(a)):Mi(a)}function LI(i){if(AI(i))return i;for(var e="",t=i.length,r=i.split(".")[1],s=r?r.length:0,a=0;a<t;a++)i[a]>="0"&&i[a]<="9"?e+=9-parseInt(i[a]):e+=i[a];var l=s>0?"0."+new Array(s).join("0")+"1":"1";return sC(e,l)}function Mi(i){var e=i.split(".");for(e[0]||(e[0]="0");e[0][0]=="0"&&e[0].length>1;)e[0]=e[0].substring(1);return e[0]+(e[1]?"."+e[1]:"")}function DI(i,e){var t=i.split("."),r=e.split("."),s=t[0].length,a=r[0].length;return s>a?r[0]=new Array(Math.abs(s-a)+1).join("0")+(r[0]?r[0]:""):t[0]=new Array(Math.abs(s-a)+1).join("0")+(t[0]?t[0]:""),s=t[1]?t[1].length:0,a=r[1]?r[1].length:0,(s||a)&&(s>a?r[1]=(r[1]?r[1]:"")+new Array(Math.abs(s-a)+1).join("0"):t[1]=(t[1]?t[1]:"")+new Array(Math.abs(s-a)+1).join("0")),i=t[0]+(t[1]?"."+t[1]:""),e=r[0]+(r[1]?"."+r[1]:""),[i,e]}function sC(i,e){var t;t=DI(i,e),i=t[0],e=t[1];for(var r="",s=0,a=i.length-1;a>=0;a--){if(i[a]==="."){r="."+r;continue}var l=parseInt(i[a])+parseInt(e[a])+s;r=l%10+r,s=Math.floor(l/10)}return s?s.toString()+r:r}function AI(i){return/^0[0]*[.]{0,1}[0]*$/.test(i)}function eC(i){return(typeof i=="number"||typeof i=="bigint")&&(i=i.toString()),i[0]=="-"?i.substring(1):i}var Kt;(function(i){i[i.CEILING=0]="CEILING",i[i.DOWN=1]="DOWN",i[i.FLOOR=2]="FLOOR",i[i.HALF_DOWN=3]="HALF_DOWN",i[i.HALF_EVEN=4]="HALF_EVEN",i[i.HALF_UP=5]="HALF_UP",i[i.UNNECESSARY=6]="UNNECESSARY",i[i.UP=7]="UP"})(Kt||(Kt={}));function im(i,e,t){if(e===void 0&&(e=0),t===void 0&&(t=Kt.HALF_EVEN),t===Kt.UNNECESSARY)throw new Error("UNNECESSARY Rounding Mode has not yet been implemented");(typeof i=="number"||typeof i=="bigint")&&(i=i.toString());var r=!1;i[0]==="-"&&(r=!0,i=i.substring(1));var s=i.split("."),a=s[0],l=s[1];if(e<0){if(e=-e,a.length<=e)return"0";var u=a.substr(0,a.length-e);return i=u+"."+a.substr(a.length-e)+l,u=im(i,0,t),(r?"-":"")+u+new Array(e+1).join("0")}if(e==0)return a.length,tC(s[1],a,r,t)&&(a=TI(a)),(r&&parseInt(a)?"-":"")+a;if(s[1]){if(s[1].length<e)return(r?"-":"")+a+"."+s[1]+new Array(e-s[1].length+1).join("0")}else return(r?"-":"")+a+"."+new Array(e+1).join("0");l=s[1].substring(0,e);var m=s[1].substring(e);return m&&tC(m,l,r,t)&&(l=TI(l),l.length>e)?(r?"-":"")+TI(a,parseInt(l[0]))+"."+l.substring(1):(r&&(parseInt(a)||parseInt(l))?"-":"")+a+"."+l}function tC(i,e,t,r){if(!i||i===new Array(i.length+1).join("0")||r===Kt.DOWN||!t&&r===Kt.FLOOR||t&&r===Kt.CEILING)return!1;if(r===Kt.UP||t&&r===Kt.FLOOR||!t&&r===Kt.CEILING)return!0;var s="5"+new Array(i.length).join("0");if(i>s)return!0;if(i<s)return!1;switch(r){case Kt.HALF_DOWN:return!1;case Kt.HALF_UP:return!0;case Kt.HALF_EVEN:default:return parseInt(e[e.length-1])%2==1}}function TI(i,e){e===void 0&&(e=0),e||(e=1),typeof i=="number"&&i.toString();for(var t=i.length-1,r="",s=t;s>=0;s--){var a=parseInt(i[s])+e;a==10?(e=1,a=0):e=0,r+=a}return e&&(r+=e),r.split("").reverse().join("")}function Vs(i){var e=i[0]==="-";for(e&&(i=i.substr(1));i[0]=="0";)i=i.substr(1);if(i.indexOf(".")!=-1)for(;i[i.length-1]=="0";)i=i.substr(0,i.length-1);return i==""||i=="."?i="0":i[i.length-1]=="."&&(i=i.substr(0,i.length-1)),i[0]=="."&&(i="0"+i),e&&i!="0"&&(i="-"+i),i}function CI(i,e){i=i.toString(),e=e.toString();var t=0;i[0]=="-"&&(t++,i=i.substr(1)),e[0]=="-"&&(t++,e=e.substr(1)),i=Vs(i),e=Vs(e);var r=0,s=0;i.indexOf(".")!=-1&&(r=i.length-i.indexOf(".")-1),e.indexOf(".")!=-1&&(s=e.length-e.indexOf(".")-1);var a=r+s;if(i=Vs(i.replace(".","")),e=Vs(e.replace(".","")),i.length<e.length){var l=i;i=e,e=l}if(e=="0")return"0";for(var u=e.length,m=0,p=[],h=u-1,f="",g=0;g<u;g++)p[g]=i.length-1;for(var g=0;g<2*i.length;g++){for(var b=0,_=e.length-1;_>=h&&_>=0;_--)p[_]>-1&&p[_]<i.length&&(b+=parseInt(i[p[_]--])*parseInt(e[_]));b+=m,m=Math.floor(b/10),f=b%10+f,h--}return f=Vs(HN(f,a)),t==1&&(f="-"+f),f}function HN(i,e){return e==0?i:(i=e>=i.length?new Array(e-i.length+1).join("0")+i:i,i.substr(0,i.length-e)+"."+i.substr(i.length-e,e))}function MI(i,e,t,r){if(t===void 0&&(t=8),r===void 0&&(r=Kt.HALF_EVEN),e==0)throw new Error("Cannot divide by 0");if(i=i.toString(),e=e.toString(),i=i.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),e=e.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),i==0)return"0";var s=0;e[0]=="-"&&(e=e.substring(1),s++),i[0]=="-"&&(i=i.substring(1),s++);var a=e.indexOf(".")>0?e.length-e.indexOf(".")-1:-1;if(e=Mi(e.replace(".","")),a>=0){var l=i.indexOf(".")>0?i.length-i.indexOf(".")-1:-1;if(l==-1)i=Mi(i+new Array(a+1).join("0"));else if(a>l)i=i.replace(".",""),i=Mi(i+new Array(a-l+1).join("0"));else if(a<l){i=i.replace(".","");var u=i.length-l+a;i=Mi(i.substring(0,u)+"."+i.substring(u))}else a==l&&(i=Mi(i.replace(".","")))}var m=0,p=e.length,h="",f=i.indexOf(".")>-1&&i.indexOf(".")<p?i.substring(0,p+1):i.substring(0,p);if(i=i.indexOf(".")>-1&&i.indexOf(".")<p?i.substring(p+1):i.substring(p),f.indexOf(".")>-1){var g=f.length-f.indexOf(".")-1;f=f.replace(".",""),p>f.length&&(g+=p-f.length,f=f+new Array(p-f.length+1).join("0")),m=g,h="0."+new Array(g).join("0")}for(t=t+2;m<=t;){for(var b=0;parseInt(f)>=parseInt(e);)f=ky(f,"-"+e),b++;h+=b,i?(i[0]=="."&&(h+=".",m++,i=i.substring(1)),f=f+i.substring(0,1),i=i.substring(1)):(m||(h+="."),m++,f=f+"0")}return(s==1?"-":"")+Mi(im(h,t-2,r))}function RI(i,e){return i=i.toString(),e=e.toString(),e=BI(e),ky(i,e)}function BI(i){return i[0]=="-"?i=i.substr(1):i="-"+i,i}function iC(i,e){if(e==0)throw new Error("Cannot divide by 0");i=i.toString(),e=e.toString(),rC(i),rC(e);var t="";i[0]=="-"&&(t="-",i=i.substr(1)),e[0]=="-"&&(e=e.substr(1));var r=RI(i,CI(e,im(MI(i,e),0,Kt.FLOOR)));return t+r}function rC(i){if(i.indexOf(".")!=-1)throw new Error("Modulus of non-integers not supported")}function nC(i,e){var t,r,s=!1;if(t=[i,e].map(function(l){return Vs(l)}),i=t[0],e=t[1],i[0]=="-"&&e[0]!="-")return-1;if(i[0]!="-"&&e[0]=="-")return 1;if(i[0]=="-"&&e[0]=="-"&&(i=i.substr(1),e=e.substr(1),s=!0),r=DI(i,e),i=r[0],e=r[1],i.localeCompare(e)==0)return 0;for(var a=0;a<i.length;a++)if(i[a]!=e[a])return i[a]>e[a]?s?-1:1:s?1:-1;return 0}var Er=function(){function i(e){e===void 0&&(e="0"),this.value=i.validate(e)}return i.validate=function(e){if(e){if(e=e.toString(),isNaN(e))throw Error("Parameter is not a number: "+e);e[0]=="+"&&(e=e.substring(1))}else e="0";if(e.startsWith(".")?e="0"+e:e.startsWith("-.")&&(e="-0"+e.substr(1)),/e/i.test(e)){var t=e.split(/[eE]/),r=t[0],s=t[1];r=Mi(r);var a="";r[0]=="-"&&(a="-",r=r.substring(1)),r.indexOf(".")>=0?(s=parseInt(s)+r.indexOf("."),r=r.replace(".","")):s=parseInt(s)+r.length,r.length<s?e=a+r+new Array(s-r.length+1).join("0"):r.length>=s&&s>0?e=a+Mi(r.substring(0,s))+(r.length>s?"."+r.substring(s):""):e=a+"0."+new Array(-s+1).join("0")+r}return e},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e){this.value=i.validate(e)},i.getPrettyValue=function(e,t,r){t===void 0&&(t=3),r===void 0&&(r=","),e=i.validate(e);var s=e.charAt(0)=="-";s&&(e=e.substring(1));var a=e.indexOf(".");a=a>0?a:e.length;for(var l="",u=a;u>0;)u<t?(t=u,u=0):u-=t,l=e.substring(u,u+t)+(u<a-t&&u>=0?r:"")+l;return(s?"-":"")+l+e.substring(a)},i.prototype.getPrettyValue=function(e,t){return e===void 0&&(e=3),t===void 0&&(t=","),i.getPrettyValue(this.value,e,t)},i.round=function(e,t,r){if(t===void 0&&(t=0),r===void 0&&(r=Kt.HALF_EVEN),e=i.validate(e),isNaN(t))throw Error("Precision is not a number: "+t);return im(e,t,r)},i.prototype.round=function(e,t){if(e===void 0&&(e=0),t===void 0&&(t=Kt.HALF_EVEN),isNaN(e))throw Error("Precision is not a number: "+e);return new i(im(this.value,e,t))},i.abs=function(e){return e=i.validate(e),eC(e)},i.prototype.abs=function(){return new i(eC(this.value))},i.floor=function(e){return e=i.validate(e),e.indexOf(".")===-1?e:i.round(e,0,Kt.FLOOR)},i.prototype.floor=function(){return this.value.indexOf(".")===-1?new i(this.value):new i(this.value).round(0,Kt.FLOOR)},i.ceil=function(e){return e=i.validate(e),e.indexOf(".")===-1?e:i.round(e,0,Kt.CEILING)},i.prototype.ceil=function(){return this.value.indexOf(".")===-1?new i(this.value):new i(this.value).round(0,Kt.CEILING)},i.add=function(e,t){return e=i.validate(e),t=i.validate(t),ky(e,t)},i.prototype.add=function(e){return new i(ky(this.value,e.getValue()))},i.subtract=function(e,t){return e=i.validate(e),t=i.validate(t),RI(e,t)},i.prototype.subtract=function(e){return new i(RI(this.value,e.getValue()))},i.multiply=function(e,t){return e=i.validate(e),t=i.validate(t),CI(e,t)},i.prototype.multiply=function(e){return new i(CI(this.value,e.getValue()))},i.divide=function(e,t,r,s){return e=i.validate(e),t=i.validate(t),MI(e,t,r,s)},i.prototype.divide=function(e,t,r){return new i(MI(this.value,e.getValue(),t,r))},i.modulus=function(e,t){return e=i.validate(e),t=i.validate(t),iC(e,t)},i.prototype.modulus=function(e){return new i(iC(this.value,e.getValue()))},i.compareTo=function(e,t){return e=i.validate(e),t=i.validate(t),nC(e,t)},i.prototype.compareTo=function(e){return nC(this.value,e.getValue())},i.negate=function(e){return e=i.validate(e),BI(e)},i.prototype.negate=function(){return new i(BI(this.value))},i.stripTrailingZero=function(e){return e=i.validate(e),Vs(e)},i.prototype.stripTrailingZero=function(){return new i(Vs(this.value))},i.RoundingModes=Kt,i}();var st=class st{static get IsSetRelease(){return st._IsSetRelease}static get IsSetGuid(){return st._IsSetGuid}static initParms(){if(Laya.Browser.window.location){let r=Laya.Browser.window.location.href,s=this.getURLParameters(r);if(st.m_obj=s,console.log("1initgame-->urldata:",st.m_obj),st.m_obj.server&&st.m_obj.server!=""&&(ge.wsUrl=st.m_obj.server),st.m_obj.socket&&st.m_obj.socket!=""){var e=st.m_obj.socket;je.m_strHttpHost=e}if(st.m_obj.debug&&J.vType>=0&&(J.Debug=parseInt(st.m_obj.debug)),st.m_obj.address&&st.m_obj.address!=""&&J.vType>=0&&(console.log("walletAddress: "+st.m_obj.address),He.walletAddress=st.m_obj.address),st.m_obj.from&&st.m_obj.from=="into"&&(J.isInto=!0),st.m_obj.white&&st.m_obj.white=="1"&&(J.isWhite=!0),st.m_obj.needDraw&&st.m_obj.needDraw=="1"&&(J.needDraw=!0),st.m_obj.needFoodId&&st.m_obj.needFoodId=="1"&&(J.needFoodId=!0),st.m_obj.log){var t=parseInt(st.m_obj.log);t>0&&initEruda(t)}st.m_obj.referral&&st.m_obj.referral!=""&&(J.referral=st.m_obj.referral)}}static processLangParameter(){if(st.m_obj&&st.m_obj.lang&&st.m_obj.lang!=""){let e=st.m_obj.lang,t=D.getLanIdByType(e);t<1&&(t=1),J.ignoreLang=!0,G.m_strLanguage=t}}static getURLParameters(e){let t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,(r,s,a)=>t[s]=decodeURIComponent(a)),t}static cheakStr(e){let t=new RegExp("[A-Za-z0-9_-\\s]","g"),r=e.match(t);return!!(r&&r.length==e.length)}static isNumber(e){return/^(?!0\d)\d*\.?\d*$/.test(e)}static roundToTwoDecimals(e){return e%1===0?e.toString():Number(e.toFixed(2)).toString()}static filterObjectsByNewFightFlag(e){return e.filter(t=>t.newFightFlag!==1)}static addIndexToObjects(e){return e.forEach((t,r)=>{t.index=r}),e}static findFirstTypeAndNotGold(e){for(let t=0;t<e.length;t++)if(e[t].id>=3001&&e[t].id<=3021&&e[t].id!==3005)return e[t]}static getCurrencyIdByName(e){let t=Ze.TYPE_TOX;switch(e){case"TOX":t=Ze.TYPE_TOX;break;case"ETH":t=Ze.TYPE_ETH;break;case"BTC":t=Ze.TYPE_BTC;break;case"USDT":t=Ze.TYPE_USDT;break;case"BTOX":t=Ze.TYPE_BTOX;break;case"GALA":t=Ze.TYPE_GALA;break;case"BNRY":t=Ze.TYPE_BNRY;break;case"KLAY":t=Ze.TYPE_KLAY;break;case"BNB":t=Ze.TYPE_BNB;break;case"GGG":t=Ze.TYPE_GGG;break}return t}static formatNumber(e,t=7){let r=e.toString(),s=r.indexOf(".");return s!==-1&&r.length-s>t?(r=r.slice(0,s+t),parseFloat(r)):e}static truncateToTwoDecimalPlaces(e){let t=e.toString(),r=t.indexOf(".");if(r===-1)return e;let s=t.substring(0,r+5);return parseFloat(s)}static getKeyByValue(e,t){return Object.keys(e).find(r=>e[r]===t)}static powerOf10(e,t){return e*Math.pow(10,t)}static isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}static getDaysInMonth(e,t){return t===2?this.isLeapYear(e)?29:28:[4,6,9,11].includes(t)?30:31}static shortenString(e,t,r){return e.length<=t+r?e:e.substr(0,t)+"..."+e.substr(-r)}static multiplyBigDecimals(e,t){let s=Math.pow(10,1e4),a=parseFloat(String(e))*parseFloat(String(t));return Math.round(a*s)/s}static arraysEqual(e,t){return e.length===t.length&&e.every((r,s)=>r===t[s])}static categorizeArrays(e,t){let r=[];for(let s of t){let a=s[0],l=s[1],u=e.find(p=>p[0]===a),m=u?u[1]:0;r.push([a,m,l])}return r}static setMap(e,t){if(e.has(t[0])){let r=e.get(t[0]);r+=t[1],e.set(t[0],r)}else e.set(t[0],t[1]);return console.log(e),e}static getfrom(){return st.m_obj.from}static parseTokenData(e){try{return e.map(t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(r){return console.error("解析token字符串失败:",r),t}return t})}catch(t){return console.error("解析token数据时发生错误:",t),[]}}static multiplyWithPrecision(e,t){let r=new Er(e),s=new Er(t);return r.multiply(s).getValue()}static addWithPrecision(e,t){let r=new Er(e),s=new Er(t);return r.add(s).getValue()}static subtractWithPrecision(e,t){let r=new Er(e),s=new Er(t);return r.subtract(s).getValue()}static divideWithPrecision(e,t,r=10){if(t===0)return console.error("除数不能为零"),"0";let s=new Er(e),a=new Er(t);return s.divide(a,r).getValue()}static truncateString(e,t){return e.length>t?e.substring(0,t)+"...":e}static truncateUnicodeString(e,t){if(!e)return"";let r=Array.from(e);return r.length>t?r.slice(0,t).join("")+"...":e}static getLevelByExp(e){let t=X.m_dicLevel,r=1;for(let s=0;s<t.values.length;s++){let a=t.values[s];if(e>=a.totalExp)r=a.id;else break}return r}static fitTextToLabel(e,t,r=!0){if(!e||!t)return e;let s=t.text,a=f=>(t.text=f,t.textField.textWidth),l=t.width;if(a(e)<=l)return t.text=s,e;let u=Array.from(e),m=0,p=u.length,h=0;for(;m<p;){h=Math.floor((m+p)/2);let f=u.slice(0,h).join("");a(r?f+"...":f)<=l?m=h+1:p=h}return h=m-1,h<0&&(h=0),t.text=s,u.slice(0,h).join("")+(h<u.length&&r?"...":"")}};st._IsSetRelease=!1,st._IsSetGuid=!1;var Qe=st;var NI=class i{static getInstance(){return this._instance||(this._instance=new i),this._instance}constructor(){this.init()}init(){v.on("msg_"+y.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo)}destroy(){v.off("msg_"+y.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo),i._instance=null}requestCoinInfo(){let e=y.snake.socket.MessageType.MSG_QUERY_TOKEN;ge.send(e)}onRequestInfo(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_QUERY_TOKEN);if(t==y.snake.socket.MessageCode.SYS_NORMAL){let s=Qe.parseTokenData(r.token);this._tokenData=s,v.event(k.UPDATE_TOKEN_BALANCE,[s])}}getTokenData(){return this._tokenData}getTokenDataBySyId(e){if(!this._tokenData||this._tokenData.length===0){console.warn("未查到缓存的资产信息,请先获取");return}return this._tokenData.find(t=>t.symbolId===e)}calculateTotalValue(){try{return this._tokenData.reduce((e,t)=>{let r=t.balance,s=t.price;return isNaN(r)||isNaN(s)?e:e+r*s},0)}catch(e){return console.error("计算资产总额时发生错误:",e),0}}},dt=NI.getInstance();var $t=class{constructor(){}};$t.TYPE_Consumption=1,$t.TYPE_Equipment=2,$t.TYPE_Currency=3,$t.TYPE_Hero=4,$t.TYPE_Fragment=5,$t.TYPE_CARD=6,$t.TYPE_TOKEN=100,$t.CHOOSE_Wallet=1,$t.CHOOSE_PutOn=2,$t.ITEM_PT=1086,$t.ITEM_PT_EXP=1091,$t.ITEM_SNAKE=3026;var zi=class i{constructor(e=0){this._m_iLevel=0;this._m_arrDisc=[];this.newAddCnt=0;this.isScholarship=!1;this.isLvUp=!1;this.needTip=!0;this.m_bSalon=!1;this.m_bIsSetId=!1;e!=0&&(this.id=e)}get m_iLevel(){return this._m_iLevel>0?this._m_iLevel:1}set m_iLevel(e){this._m_iLevel=e||0}get m_iPk(){return this._m_iPk}set m_iPk(e){this._m_iPk=e}copyItem(){let e=new i;return e.id=this.id,e.m_iOriginalId=this.m_iOriginalId,e}get m_bTry(){return this.id==this.m_iOriginalId?this._m_bSet=!1:this._m_bSet=!0,this._m_bSet}set itemName(e){this._itemName=e}get itemName(){return this._itemName?this._itemName:D.getLanguage(this.itemItem.name)}set m_bTry(e){this._m_bSet=e}get id(){return this._m_iId}set id(e){this._m_iId=e,this.m_bIsSetId||(this.m_bIsSetId=!0,this.m_iOriginalId=e),this.setConfigData()}setConfigData(){if(this.id!=0){if(this.type==$t.TYPE_TOKEN){this.quality=1;let e=dt.getTokenDataBySyId(this.id);e?(this.itemName=e.symbol,this.iconURL=ie.getCurrencyIcon(e.symbolId)):(this.iconURL="",this.itemName="");return}if(this.itemItem=X.m_dicItems.get(this.id.toString()),!this.itemItem){console.log("[          <items> find out id:"+this.id+"             ]");return}if(this.subType=parseInt(this.itemItem.subType+""),this.backType=parseInt(this.itemItem.backPack+""),this.type=parseInt(this.itemItem.type+""),this.itemItem.buy_price){this.m_iPrice=this.itemItem.buy_price[0][1];let e=this.itemItem.buy_price[0][0],t=X.m_dicItems.get(e);t&&(this.m_strBuyIcon=ie.getItemIcon(t.icon))}this.itemItem.sell_price&&(this.m_iSellPrice=parseFloat(this.itemItem.sell_price[0][1])),this.quality=this.itemItem.quality,this.setQualityData()}}setQualityData(){this.m_arrQualityData=this.itemItem.starArr}set iconURL(e){this._iconURL=e}get iconURL(){return this.type==$t.TYPE_TOKEN?this._iconURL:ie.getItemIcon(this.itemItem.icon)}copy(){let e=new i(this.id);return e.m_iLevel=this.m_iLevel,e}compareName(){return D.getLanguage(this.itemItem.name)}compareQuality(){return parseFloat(this.quality+"")}compareSellPrice(){return parseFloat(this.itemItem.sell_price[1]+"")}compareNum(){return parseFloat(this.num+"")}compareLevel(){return parseFloat(this.m_iLevel+"")}compareTypeId(){return parseInt(this.id+"")}};var OI=class i{constructor(e){this._list=[];this.needPop=!0;this.autoPop=!0}static getInstance(){return i._instance||(i._instance=new i(new FI)),i._instance}get service(){return Sn}addItem(e,t=!1){let r=new zi;r.id=e.id,r.newAddCnt=e.newAddCnt,r.m_iLevel=e.m_iLevel,r.isLvUp=e.isLvUp,r.m_bNew=e.m_bNew,this._list.push(r),t&&this.service.startShow()}addSnakeItem(e,t=!1){let r={};r.id=e.id,r.newAddCnt=e.newAddCnt,r.lv=e.lv,r.isLvUp=e.isLvUp,r.m_bNew=e.m_bNew,this._list.push(r),t&&this.service.startShow()}addItems(e,t=!1){this._list=this._list.concat(e),t&&this.service.startShow()}hasRemain(){return this._list.length>0?this._list[0]:null}get needListener(){return this._list.length>=2}addConsumeByServer(e){this._list.push(e)}addConsume(e,t){this._list.push([e,t])}getNextItem(){return this._list.length>0?this._list[0]:null}getOneItem(){return this._list.length>0?this._list.shift():null}},FI=class{},Wt=OI.getInstance();var PI=class i{constructor(){this.timeZoneOff=0;this.hearIntervalSceond=10*60;this._timeStamp=0;this._m_strLanguage=1;this.isLanChanged=!1;this.clubType=0;this.clubCreater="";this.lastTimestamp=0;this._m_serverTime=0;this.redDotData=[];this.friendNum=0;this.headId=10001;this.countryId=1010;this.colorId=1;this._guildIcon=2006;this.tokenData=void 0;this.rechargeEnd=!1}async initData(){}get m_serverTime(){let e=Date.now();return this._m_serverTime+(e-this.lastTimestamp)}set m_serverTime(e){this._m_serverTime=e,this.lastTimestamp=Date.now()}get guildIcon(){return this._guildIcon}set guildIcon(e){this._guildIcon=e}get m_strLanguage(){return this._m_strLanguage}set m_strLanguage(e){this._m_strLanguage=e}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){bk.register(tt,()=>new tt,5,200)}onLanChange(e){let t=parseInt(e[0]),r=parseInt(e[1]);switch(t){case 1:r==1&&Xe.reload();break;case 2:break}}get timeStamp(){return this._timeStamp+(Laya.Browser.now()-this.recordStampTime)/1e3}set timeStamp(e){this.recordStampTime=Laya.Browser.now(),this._timeStamp=e}updatePlayerInfo(e){this.playerDto||(this.playerDto=new es),this.playerDto.pid=e.roleId,this.playerDto.name=e.userName,this.playerDto.icon=e.icon,this.playerDto.exp=e.exp,this.playerDto.code=e.code,this.playerDto.country=e.country,this.playerDto.invite=e.invite,this.playerDto.invNum=e.invNum,this.playerDto.lv=e.lv,this.playerDto.snakeId=e.snakeId,this.playerDto.skinId=e.skinId,this.playerDto.score=e.score,this.playerDto.createTime=e.createTime,this.playerDto.maxKill=e.maxKill,this.playerDto.maxAlive=e.maxAlive,this.playerDto.skinId=e.skin,this.playerDto.club=e.club,ui.initKnapsackData(e.items),ui.initSnakeData(e.snake),v.event(k.ROLE_INFO_CHANGE)}getConsumeValue(e){e=parseInt(e.toString());var t=this.playerDto.coins[e];return t>0?t:0}moneyInfoHander(e,t=!0,r=!0){let s=!1,a=!1,l=0;for(let u of e)a=!1,u[0]==Ze.TYPE_EXP?(l=parseInt(u[1]+"")-this.playerDto.exp,this.playerDto.exp=parseInt(u[1]+""),a=l>0):(l=parseFloat(u[1]+"")-this.playerDto.coins[u[0]],this.playerDto.coins[u[0]]=parseFloat(u[1]+""),a=l>0),a&&Wt.needPop&&r&&(s=!0,Wt.addConsumeByServer([u[0],l]));t&&v.event(k.ROLE_INFO_CHANGE),s&&Wt.autoPop&&Sn.startShow()}getRedDotById(e){return!!(this.redDotData&&this.redDotData.indexOf(e)>-1)}},G=PI.getInstance();var UI=class i{constructor(){this._lanTypesById=new Oe,this._lanTypesByType=new Oe,this._configData=new Oe,this._configData1=new Oe}static getInstance(){return i._instance||(i._instance=new i),i._instance}initLanTypes(e){this._lanTypesById=new Oe,this._lanTypesByType=new Oe;for(let t in e){let r=new Xs;if(r.init(e[t]),parseInt(r.if_open)!=1)continue;let s=r.id,a=r.type;this._lanTypesById.set(s,r),a&&a!=""&&this._lanTypesByType.set(a,r)}}getLanTypes(){return this._lanTypesById}getLanIdByType(e){if(this._lanTypesByType){let t=this._lanTypesByType.get(e);if(t)return parseInt(t.id.toString())}return 1}getLanTypeById(e){if(this._lanTypesById){let t=this._lanTypesById.get(e);if(t)return t.type}return"en"}initConfigLan(e){this._configData=e}initConfigLan1(e){this._configData1=e}initUILan(e){Laya.Text.langPacks={};let t;for(t in e){let r=e[t].value;Laya.Text.langPacks[t]=r}}changeBrToN(e){let t=/<br>/g;for(;e.indexOf("<br>")!=-1;)e=e.replace(t,`
`);return e}replacePlaceholder(e,t){if(e=="")return"";let r=/{(\d+)}/g;return t.length>0&&(e=e.replace(r,function(){return t[arguments[1]]})),this.replaceLanByBR(e)}replaceLanByBR(e){return e+""}getEnglishLanguage(e,...t){return this.getEnglishLanguageReplace(e,t)}getEnglishLanguageReplace(e,t){if(this._configData1&&this._configData1[e]){let r=this._configData1[e].value;if(r&&r!="")return this.replacePlaceholder(r,t)}return this.replacePlaceholder(e+"",t)}getLanguage(e,...t){return this.getLanguageReplace(e,t)}getLanguageReplace(e,t){if(this._configData&&this._configData[e]){let r=this._configData[e].value;if(r&&r!="")return this.replacePlaceholder(r,t)}return this.replacePlaceholder(e+"",t)}getLanguageMulti(e,t){if(console.log("getLanguageMulti",t),this._configData&&this._configData[e]){let r=this._configData[e].value;if(r&&r!="")return this.replacePlaceholderMulti(r,t)}return this.replacePlaceholder(e+"",t)}replacePlaceholderMulti(e,t){if(e=="")return"";let r=/{(\d+)}/g;return t.length>0&&(e=e.replace(r,function(){var s=t[arguments[1]];if(typeof s=="object")s=JSON.parse(s),s=i.getInstance().parseObj(s);else if(typeof s=="string")try{s=JSON.parse(s),typeof s=="object"&&(s=i.getInstance().parseObj(s))}catch{}return s})),this.replaceLanByBR(e)}parseObj(e){if(e.hasOwnProperty("tableType")){if(e.tableType==1){var t=X.m_dicItems.get(e.id);t&&(e=i.getInstance().getLanguage(t.name))}else if(e.tableType==2){var r=X.m_dicArenaDic.get(e.id);r&&(e=i.getInstance().getLanguage(r.name))}}else e=i.getInstance().getMultiLan(e);return e}getUILang(e,t=null,r=null,s=null,a=null){if(e=Laya.Text.langPacks&&Laya.Text.langPacks[e]?Laya.Text.langPacks[e]:e,arguments.length>1)for(let l=0,u=arguments.length;l<u;l++)e=e.replace("{"+l+"}",arguments[l+1]);return e}getMultiLan(e){var t=parseInt(G.m_strLanguage.toString()),r;return e&&(r=e[t],r||(r=e[Js.Lan_en])),r}FGM_GetLanguage(){let e=function(r){console.log("initGame->-----------------------------FGM_GetLanguage:=="+r),r&&(J.User_Lan=r)},t=Laya.LocalStorage.getItem(J.COOKIE_CF_LAN);!t||t==""?e(this.language):e(t)}get language(){return"en"}FGM_SetLanguage(e){e&&e!=""&&Laya.LocalStorage.setItem(J.COOKIE_CF_LAN,e)}dispose(){}},D=UI.getInstance();var zI=class i{constructor(){this._curErrTxt=""}static getInstance(){return i._instance||(i._instance=new i),i._instance}initErrData(e){this.errData=e}get(e){return this.errData[e]?this.errData[e].words:(console.warn("服务端错误码语言包未配表 错误码："+e),e)}showErrorWord(e,...t){var r=this.getLanguage2(e,t);Ce.notice(r)}getLanguage2(e,t){if(this.errData&&this.errData[e]){let r=this.errData[e].words;if(r&&r!="")return this._curErrTxt=D.replacePlaceholder(r,t),this._curErrTxt}return this._curErrTxt=D.replacePlaceholder(e+"",t),this._curErrTxt}showErrByString(e,t="#ff0000"){this._curErrTxt=e;let r=new Laya.Label(this._curErrTxt);r.width=500,r.align="center",r.height=40,r.fontSize=26,r.color=t,r.mouseEnabled=!1,r.strokeColor="#000000",r.stroke=.5,Laya.stage.addChild(r),r.x=(Laya.stage.width-r.width)/2,r.y=(Laya.stage.height-r.height)/2,Laya.Tween.to(r,{y:r.y-100,alpha:0},500,null,Laya.Handler.create(this,this.completeHandler,[r]),1e3)}completeHandler(e){e&&e.parent&&e.parent.removeChild(e)}dispose(){this.errData=null}},ci=zI.getInstance();var Xt=class Xt{constructor(){this.resArr=["gameIcon/snakeMatch/snakes/img_head101.png","gameIcon/snakeMatch/snakes/img_head102.png","gameIcon/snakeMatch/snakes/img_head103.png","gameIcon/snakeMatch/snakes/img_body101.png","gameIcon/snakeMatch/snakes/img_body102.png","gameIcon/snakeMatch/snakes/img_body103.png",{url:"scenes/mainView/MainScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBodySpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBeanSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchReadyView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/DamageNumber.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtLoadingView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtNoticeView.lh",type:Laya.Loader.HIERARCHY},"gameIcon/spine/img_ziyousai.png","gameIcon/spine/img_she.png","gameIcon/spine/img_qianbao.png","gameIcon/spine/img_gonghui.png","gameIcon/spine/img_gonghui2.png","gameIcon/spine/img_cion4.png","gameIcon/spine/img_cion5.png","gameIcon/spine/img_cion2.png","gameIcon/spine/img_cion1.png","gameIcon/spine/img_anniu3.png","gameIcon/spine/img_anniu2.png","gameIcon/spine/img_anniu1.png","gameIcon/spine/img_jlb.png","gameIcon/spine/img_jingjisai.png","gameIcon/spine/shop/egg/img_egg.png","res/common/comm_bg/img_tcbg.png","res/common/comm_bg/img_bg_1560.jpg","res/common/comm_bg/img_top_kuanping.png","res/common/comm/img_anniu1_1.png","res/common/comm/img_jiantou.png","res/common/comm/icon_zhuanshi.png","res/common/comm/img_zsdi.png","res/common/comm/img_tab1.png","res/common/comm/img_tab2.png","res/common/comm/img_gb.png","res/common/comm/img_tabbg.png","res/common/comm_bg/img_tkbg.png"];this.m_arrPreResource=["config/spot.json"];this.m_arrInitResource=["config/general.json","config/head.json","config/country.json","config/shop.json","config/snake.json","config/foods.json","config/item.json","config/arena.json","config/arenaType.json","config/snakeLengthRules.json","config/currencyAddress.json","config/aCoin.json","config/coinAddress.json","config/language.json","config/level.json","config/room.json","config/club.json"];this.m_objModuleReource={MainScene:["res/atlas/main.atlas"],ShopScene:[],MailScene:[],SettingScene:[],RoleInfoScene:[],RankSceneBase:[],RankScene:[],ClubScene:[],AssetNewScene:[],CommentDialog:["res/atlas/comment.atlas"],GuideView:["res/atlas/guide.atlas","res/atlas/ShopView.atlas","config/newplayer.json"],SelectHeadDialog:[],KnapsackScene:["res/atlas/mainUI1.atlas"]};this.m_objModuleViews={BaseAlertDialog:"scenes/baseAlert/BaseAlertDialog.lh",NoServerView:"scenes/createRole/NoServer.lh",CreateLoginView:"scenes/createRole/CreateLoginView.lh",ChangeHeadDialog:"scenes/createRole/ChangeHeadDialog.lh",RoleInfoDialog:"scenes/createRole/RoleInfoDialog.lh",HeroGetDialog:"scenes/shop/HeroGetDialog.lh",BuyTicketDialog:"scenes/shop/BuyTicketDialog.lh",ItemGetDialog:"scenes/item/ItemGetDialog.lh",EquipStarUpDialog:"scenes/item/EquipStarUpDialog.lh",RewardGetDialog:"scenes/item/RewardGetDialog.lh",KnapsackTipDialog:"scenes/item/KnapsackTipDialog.lh",SelectHeadDialog:"scenes/createRole/SelectHeadDialog.lh",TxtNoticeView:"scenes/notice/TxtNoticeView.lh",NoticeDialog:"scenes/notice/NoticeDialog.lh",HelpDialog:"scenes/notice/HelpDialog.lh",ImgDialog:"scenes/notice/ImgDialog.lh",ChampDetailDialog:"scenes/asset/ChampDetailDialog.lh",ChampRecordDialog:"scenes/asset/ChampRecordDialog.lh",RemGetDialog:"scenes/createRole/RemGetDialog.lh",CreateRoomDialog:"scenes/mainView/CreateRoomDialog.lh",CreateRentalDialog:"scenes/shop/CreateRentalDialog.lh",MyLeasedDialog:"scenes/shop/MyLeasedDialog.lh",MyRentedDialog:"scenes/shop/MyRentedDialog.lh",MyRentalBuyDialog:"scenes/shop/MyRentalBuyDialog.lh",EnterRoomView:"scenes/mainView/EnterRoomView.lh",InputPwdDialog:"scenes/mainView/InputPwdDialog.lh",RoomInfoDialog:"scenes/mainView/RoomInfoDialog.lh",HeroDetailDialog:"scenes/hero/HeroDetailDialog.lh",MatchEndRankView:"scenes/match/MatchEndRankView.lh",MatchEndTeamRankView:"scenes/match/MatchEndTeamRankView.lh",MatchEndRewardTokensDialog:"scenes/match/MatchEndRewardTokensDialog.lh",MyBookingView:"scenes/airdrop/MyBookingView.lh",UnionMemberView:"scenes/union/UnionMemberView.lh",UnionListView:"scenes/union/UnionListView.lh",CreateSubUnionView:"scenes/union/CreateSubUnionView.lh",ChangeUnionIconDialog:"scenes/union/ChangeUnionIconDialog.lh",MySubUnionView:"scenes/union/MySubUnionView.lh",UnionMemberApplyView:"scenes/union/UnionMemberApplyView.lh",UnionReferralView:"scenes/union/UnionReferralView.lh",UnionTransferView:"scenes/union/UnionTransferView.lh",TicketTransferView:"scenes/union/TicketTransferView.lh",HeroTransferView:"scenes/hero/HeroTransferView.lh",BanAccountView:"scenes/match/BanAccountView.lh",MatchReadyView:"scenes/match/MatchReadyView.lh",MatchEndView:"scenes/match/MatchEndView.lh",GameSettingLanguageDialog:"scenes/gameSetting/GameSettingLanguageDialog.lh",SkillTipDialog:"scenes/hero/SkillTipDialog.lh",TransferRecordDialog:"scenes/hero/TransferRecordDialog.lh",InviteConfimDialog:"scenes/airdrop/InviteConfimDialog.lh",ApplyConfimDialog:"scenes/airdrop/ApplyConfimDialog.lh",CreateSubWalletDialog:"scenes/scholarship/CreateSubWalletDialog.lh",WalletChooseHeroDialog:"scenes/scholarship/WalletChooseHeroDialog.lh",WalletChoosePropsDialog:"scenes/scholarship/WalletChoosePropsDialog.lh",EmployInfoDialog:"scenes/scholarship/EmployInfoDialog.lh",HireDetailDialog:"scenes/asset/HireDetailDialog.lh",ProxyDetailDialog:"scenes/asset/ProxyDetailDialog.lh",WithDrawRecordDialog:"scenes/asset/WithDrawRecordDialog.lh",NodeRevenueRecordDialog:"scenes/asset/NodeRevenueRecordDialog.lh",WithdrawDialog:"scenes/asset/WithdrawDialog.lh",DepositDialog:"scenes/asset/DepositDialog.lh",CreateClubDialog:"scenes/club/CreateClubDialog.lh",CreateClubRoomDialog:"scenes/club/CreateClubRoomDialog.lh",SettingRateDialog:"scenes/club/SettingRateDialog.lh",ReferralDialog:"scenes/createRole/ReferralDialog.lh",BuyPropDialog:"scenes/shop/BuyPropDialog.lh",JoinRoomDialog:"scenes/mainView/JoinRoomDialog.lh",SnakeUpgradeDialog:"scenes/knapsack/SnakeUpgradeDialog.lh",SnakeUpgradeSuccessDialog:"scenes/knapsack/SnakeUpgradeSuccessDialog.lh",PlayerUpgradeSuccessDialog:"scenes/mainView/PlayerUpgradeSuccessDialog.lh",ChangeClubHeadDialog:"scenes/club/ChangeClubHeadDialog.lh",JoinClubRoomDialog:"scenes/club/JoinClubRoomDialog.lh"};this.m_objConfigReource={};this.m_commonResource=new Oe;this.loadingView=Laya.Browser.window.loadingView;this.ii=100;this.baseUrl="https://cdn.snake.ai/snake/"}static getInstance(){return Xt._instance==null&&(Xt._instance=new Xt),Xt._instance}init(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),this.initGameLanguage()}initGameLanguage(){Xt.GameLanguage_URL="config/language.json",Laya.loader.load(Xt.GameLanguage_URL,Laya.Handler.create(this,this.initGameResource))}initGameResource(e){if(e==null)return;let t=Xt.getInstance().getResBySetURL(Xt.GameLanguage_URL);D.initLanTypes(t.data),Qe.processLangParameter(),Laya.loader.clearRes(Xt.GameLanguage_URL),this.onConfigLoaded()}onError(e){}onConfigLoaded(){let e=new Ln;e.ID=4,e.Event="加载语言包信息",Xe.sendCustumEvent(4,null,e),J.ignoreLang||(G.m_strLanguage=D.getLanIdByType(J.User_Lan)),this.m_UILang="config/lang_english"+G.m_strLanguage+".json",this.m_NomalLang="config/english"+G.m_strLanguage+".json",this.m_NomalLang1="config/english1.json",this.m_ErrorLang="config/error"+G.m_strLanguage+".json",this.m_arrPreResource.push(this.m_UILang),this.m_arrPreResource.push(this.m_NomalLang),this.m_arrPreResource.push(this.m_NomalLang1),this.m_arrPreResource.push(this.m_ErrorLang),this.initResourceURL(this.m_arrPreResource,!0),this.initResourceURL(this.m_arrInitResource,!0),this.addFont1()}addFont1(){Laya.loader.load("res/font/CookieRun Regular.otf",Laya.Loader.TTF).then(()=>{this.loadDemoResource()})}loadDemoResource(){Laya.loader.load(this.resArr,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{lt.init(),this.damageNumPrefab=Laya.loader.getRes("scenes/match/DamageNumber.lh"),this.aniSkPrefab=Laya.loader.getRes("scenes/hero/AniSk.lh"),this.roleAniPrefab=Laya.loader.getRes("scenes/match/MatchSnakeSpr.lh"),this.matchSnakeBodyPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBodySpr.lh"),this.matchSnakeBeanPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBeanSpr.lh");var e=this.roleAniPrefab.create();console.log(" ================ roleAniPrefab: "+e);var t=this.matchSnakeBodyPrefab.create();console.log(" ================ snakeBodyPrefab: "+t),this.onLoadThreeDimen()})}onLoadThreeDimen(){Laya.loader.load(this.m_arrPreResource,Laya.Handler.create(this,this.onPreAssetLoaded),Laya.Handler.create(this,this.onPreAssetPress2,null,!1))}onPreAssetPress1(e){this.va=(e*100*.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetPress2(e){this.va=(e*100*.5+.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetLoaded(e){if(!e)return;let t=Laya.Browser.now();rd.initSpotCfgData(),this.initResourceURL(this.m_objModuleReource),this.initResourceURL(this.m_objConfigReource),Xe.sendCustumEvent(5),X.preInit(),this.setGlobalLanguage(),Xe.sendCustumEvent(6),v.event(k.EVENT_BACK_TO_LOGIN),this.loadingView&&this.loadingView.loading(100),console.log("-----------------------preload-time:"+(Laya.Browser.now()-t))}setGlobalLanguage(){let e=Xt._instance.getResByURL(this.m_NomalLang);D.initConfigLan(e.data);let t=Xt._instance.getResByURL(this.m_NomalLang1);D.initConfigLan1(t.data);let r=Xt._instance.getResByURL(this.m_UILang);D.initUILan(r.data);let s=Xt._instance.getResByURL(this.m_ErrorLang);ci.initErrData(s.data),this.clearResUrlByRoot(this.m_UILang,!0),this.clearResUrlByRoot(this.m_NomalLang,!0),this.clearResUrlByRoot(this.m_NomalLang1,!0),this.clearResUrlByRoot(this.m_ErrorLang,!0)}initResourceURL(e,t=!1){if(e instanceof Array)this.setResURLArr(e,t);else if(e instanceof Object)for(let r in e)this.setResURLArr(e[r],t)}setResURLArr(e,t){let r,s;for(let a=0;a<e.length;a++)t?(this.m_commonResource.set(e[a],!0),s=this.setResURL(e[a]),r=this.getTypeFromUrl(s),e[a]={url:s,type:r,size:1,priority:1}):this.m_commonResource.get(e[a])?(e.splice(a,1),a--):(s=this.setResURL(e[a]),r=this.getTypeFromUrl(s),e[a]={url:s,type:r,size:1,priority:1})}getTypeFromUrl(e){let{ext:t,typeId:r,main:s,loaderType:a}=Laya.Loader.getURLInfo(e);Xt._extReg.lastIndex=e.lastIndexOf(".");let l=Xt._extReg.exec(e);return l&&l.length>1?l[1].toLowerCase():"text"}setResURL(e){return e}clearResUrlByRoot(e,t=!1){let r=e;Laya.loader.clearRes(r)}hasFormatEffectUrl(e){return e.indexOf("effect/")>=0}setItemResURL(e){return e&&e.hasOwnProperty("item_img")?this.setResURL("icon/"+e.item_img+".png"):""}setThreeDimenUrl(e){return e?this.setResURL("threeDimen/"+e):""}getThreeDimenUrl(e){let t=this.setResURL("threeDimen/"+e);return Laya.Loader.getRes(t)}getResByURL(e){let t=Xt.getInstance().setResURL(e);return Laya.Loader.getRes(t)}getResBySetURL(e){return Laya.Loader.getRes(e)}loadModuleUrl(e,t=null,r=null,s=1,a=!0){console.log("loadModuleUrl m_strName: "+e),this.ii++;let l=Xt.getInstance().m_objModuleReource[e];if(l==null||l.length<1){t.run();return}Laya.loader.load(l,Laya.Handler.create(this,this.loadItemComplete,[t,l]),Laya.Handler.create(this,this.onLoadProgress,[e],!1),r,s,a,this.ii.toString())}loadItemComplete(e,t){this.usedUrlDic||(this.usedUrlDic=new Oe);for(let r in t){let s=t[r].url,a=this.usedUrlDic.get(s);a?this.usedUrlDic.set(s,++a):this.usedUrlDic.set(s,1)}e.run()}clearModuleUrl(e){console.log("clearModuleUrl m_strName: "+e);let t=Xt.getInstance().m_objModuleReource[e];for(let r in t){let s=t[r].url;if(this.usedUrlDic){let a=this.usedUrlDic.get(s);a-=1,a<1?(this.usedUrlDic.remove(s),Laya.loader.clearRes(s)):this.usedUrlDic.set(s,a)}}}onLoadProgress(e,t){}loadResource(e,t=null,r=null,s=null,a=1,l=!0){Laya.loader.load(e,t,r,s,a,l)}getNodeIcon(e){return this.setResURL("gameIcon/node/img_"+e+".png")}getCountryIcon(e){return this.setResURL("gameIcon/country/img_"+e+".png")}getSnakeHeadIcon(e){return(e==0||e=="0")&&console.error("id is 0"),this.setResURL("gameIcon/snakeMatch/snakes/img_head"+e+".png")}getCurrencyIcon(e){return`https://static.cryptoarena.io/images/token/token_${e}.png`}getSnakeBodyIcon(e){return this.setResURL("gameIcon/snakeMatch/snakes/img_body"+e+".png")}getFoodIcon(e){return this.setResURL("gameIcon/snakeMatch/foods/img_"+e+".png")}getShopItemIcon(e){return this.setResURL("res/shop/img_"+e+".png")}getItemIcon(e){return`https://static.cryptoarena.io/images/item/img_${e}.png`}getSnakeIcon(e){return`https://static.cryptoarena.io/images/snake/snake_${e}.png`}getItemBgIcon(e){return this.setResURL("gameIcon/items/itemBg/img_"+e+".png")}getItemBigIcon(e){return this.setResURL("gameIcon/items/itemBig/img_"+e+".png")}getItemBigBigIcon(e){return this.setResURL("gameIcon/items/itemBigBig/img_"+e+".jpg")}getItemQualityIcon(e){return this.setResURL("gameIcon/items/itemQuality/img_"+e+".png")}getMoneyIcon(e){return this.setResURL("gameIcon/items/money/img_"+e+".png")}getMatchSkillIcon(e){return this.setResURL("gameIcon/skill/matchSkills/img_"+e+".png")}getSnakeAniJson(e){return this.setResURL(`gameIcon/spine/shop/snake${e}/img_she_${e}.json`)}getPlayerIcon(e){return parseInt(e)>0?this.setResURL("gameIcon/head/headCircle/img_"+e+".png"):e}getClubIcon(e){return`https://static.cryptoarena.io/images/club/img_clubIcon_${e}.png`}getSoundURL(e,t=".ogg"){let r;return r=this.setResURL("mp3/"+e+t),r}getSoundURLogg(e){let t;return t=this.setResURL("mp3/"+e),t}getMapImg(e){return"gameIcon/map/"+e+"/img_map.jpg"}getHeroSkRes(){}getMapPrefab(e){return"gameIcon/map/map_"+e+".lh"}clearCache(){}};Xt._extReg=/\.(\w+)\??/g;var HI=Xt,ie=HI.getInstance();var Be=class i extends Laya.DialogManager{constructor(){super();this.views=new Oe;this.m_arrLoadingArr=[];if(i._instance)throw new Error("LayerManager是单例,不可new.");i._instance=this,Laya.Dialog.manager=this}static get intance(){return i._instance||(i._instance=new i),i._instance}openModule(t,r=null){v.event(k.EVENT_OPEN_MODULE,[t,r])}hasOpenView(t){return this.views.get(t)!=null}getOpenView(t){return this.views.get(t)}disposeView(t,r){if(this.getOpenView(t)){let s=this.getOpenView(t);if(s instanceof Array)for(let a=0;a<s.length;a++)s[a].close(r);else s.close(r)}}init(){v.on(k.EVENT_OPEN_MODULE,this,this.onModulePanel),v.on(k.EVENT_CLOSE_MODULE,this,this.disposeView)}initMainView(){}onModulePanel(t,r=null){console.log("ModuleManager.onModulePanel moudleName:"+t),this.m_arrLoadingArr.indexOf(t)==-1&&(this.getOpenView(t)||(lt.showLoading(!1),this.m_arrLoadingArr.push(t),ie.loadModuleUrl(t,Laya.Handler.create(this,this.onLoaded,[t,r]))))}onLoaded(t,r=null){let s=this.m_arrLoadingArr.indexOf(t);s!=-1&&this.m_arrLoadingArr.splice(s,1);let a;var l=ie.m_objModuleViews[t];console.log("onLoaded: ",t,l),Laya.loader.load(l).then(u=>{if(a=u.create(),r&&a.setOpenData(r),a.m_strName=t,this.getOpenView(t)){console.log("Module already open, skipping creation:",t),a.hideLoadingBySelf||lt.hideLoading();return}if(a instanceof Laya.Box)a=a,te.instence.addToLayer(a,a.m_iLayerType),te.instence.setPosition(a,a.m_iPositionType,a.m_ioffsetX,a.m_ioffsetY),this.addViewToModuleManger(a);else if(a instanceof Laya.Dialog){let m=a;m.m_iLayerType==te.M_POP?(m.isModal=!0,m.isShowEffect=!0,this.open(m,!1,!0)):(m.isShowEffect=!1,this.open(m)),this.addViewToModuleManger(m)}a&&v.event(k.EVENT_MODULE_ADDED,a),a.hideLoadingBySelf||lt.hideLoading()}).catch(u=>{console.error("onLoaded 加载失败",u)})}addViewToModuleManger(t){let r=t.m_strName;this.views.get(r)?this.views.get(r)instanceof Array?this.views.get(r).push(t):this.views.set(r,[this.views.get(r),t]):this.views.set(r,t),this.on(Laya.Event.CLOSE,this,this.removeViewFromModuleManger)}removeViewFromModuleManger(t){if(!t||!this.views)return;let r=t.m_strName;console.log("removeViewFromModuleManger viewName: "+r),t.off(Laya.Event.CLOSE,this,this.removeViewFromModuleManger);let s=this.views.get(r);if(s instanceof Array){let a=s.indexOf(t);a!=-1&&(s.splice(a,1),s.length==0&&this.views.remove(r))}else this.views.remove(r)}closeAll(){super.closeAll()}doClose(t){super.doClose(t),this.event(Laya.Event.CLOSE,t)}};var jI=class i{constructor(){this._inited=!1;this.stopAll=!1;this.roomWatcher=!1;this.matchWatcher=!1;this.heroReadyDic=new Oe;this.hasDieEnd=!1;this.frameIndex=0;this.rotateSpeed=500;this.speedRate=1;this.speed=6;this.time=0;this.dir=0;this.aimDir=0;this.bones=[tt.create(0,0)];this.init()}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){this._inited||(this._inited=!0)}get roomDto(){return this._roomDto}set roomDto(e){if(console.log("roomDto: ",e),this._roomDto=e,e){var t=G.playerDto.pid;if(e.watch){let r=e.watch.some(s=>s===t);this.roomWatcher=r}}}setRoomAnonymousLabel(e,t=-1){return t==-1&&(t=i._instance.roomDto.anonymous),t==1?Yr.ANONYMOUS_NAME:e}setMatchAnonymousLabel(e,t=-1){return t==-1&&(t=i._instance.matchDto.anonymous),!this.matchWatcher&&t==1?Yr.ANONYMOUS_NAME:e}setMatchAnonymousImg(e,t=-1){return t==-1&&(t=i._instance.matchDto.anonymous),!this.matchWatcher&&t==1?null:e}get matchDto(){return this._matchDto}set matchDto(e){if(console.log("matchDto: ",e),this._matchDto=e,e){var t=G.playerDto.pid;if(e.watch){let r=e.watch.some(s=>s===t);this.matchWatcher=r}e.startTime-e.nowTime>0?this.stopAll=!0:this.stopAll=!1}else this.stopAll=!1}setMatchRes(){this.heroReadyDic=new Oe;var e=this.roomDto.members.length,t=[],r=this.currArenaItem.mapid;if(this.heroReadyDic.get("map_"+r)==null){var r=i._instance.currArenaItem.mapid,s=ie.getMapImg(r);t.push(s);var a=ie.getMapPrefab(r);t.push(a),this.heroReadyDic.set("map_"+r,!0)}for(var l=0;l<e;l++){var u=this.roomDto.members[l];this.heroReadyDic.get(u.heroId+"_"+u.heroColor)==null&&this.heroReadyDic.set(u.heroId+"_"+u.heroColor,!0)}t.length>0&&Laya.loader.load(t,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{})}onPreAssetPress1(e){}onAiSetMatchEnd(e){this.msgEndbody=e,v.event(k.EVENT_GameScene_Gray),je.isMatching=!1,i._instance.stopAll=!0,Be.intance.openModule(M.MatchEndView,[xe.MATCH_TYPE_PVE,e])}onSetMatchEnd(e,t=!1){ke.frameNetQueue.isStart=!1,this.msgEndbody=e,this.hasDieEnd||t?(v.event(k.EVENT_GameScene_Gray),this.onGoMatchEndRank(this.msgEndbody),this.hasDieEnd=!1):Laya.timer.once(4e3,this,this.checkSnake)}onMockMatchEnd(){Laya.timer.clear(this,this.checkSnake),this.msgEndbody?(v.event(k.EVENT_GameScene_Gray),this.onGoMatchEndRank(this.msgEndbody)):this.hasDieEnd=!0}checkSnake(){se.getInstance().selfSnake&&se.getInstance().selfSnake.isAlive(!1)&&(se.getInstance().selfSnake.die(),v.event(k.EVENT_GameScene_Gray),this.onGoMatchEndRank(this.msgEndbody))}onGoMatchEndRank(e){je.isMatching=!1,i._instance.stopAll=!0,Be.intance.openModule(M.MatchEndView,[xe.MATCH_TYPE_PVP,e])}clearData(){console.log("clearData "),this.roomDto=null,this.matchDto=null,this.msgEndbody=null,this.hasDieEnd=!1,this.heroReadyDic=null,this.currArenaItem=null,this.roomWatcher=!1,this.matchWatcher=!1,je.close(),se.getInstance().clear(),_t.clear(),Laya.Pool.clearBySign(qr.POOL_NAME),Laya.Pool.clearBySign(Kr.POOL_NAME),Ui.destroy(),Ke.playMusicByName(Ke.soundName_bg,".mp3"),Wt.needPop=!0,Sn.startShow()}initMove(){return;var e,t,r,s}toAimDir(e){this.time=0,this.aimDir=e;var t=ft.getAngleToVec(e);console.log("TEST==== 目标方向：",e,"向量：",t.x,t.y);for(var r=0;r<560;r++)this.move(null)}move(e){this.time++,this.frameIndex++;for(let s=0;s<this.speedRate;s++){let a=this.aimDir-this.dir,l=this.rotateSpeed*Q.snake.defaultMoveInterval;if(Math.abs(a)<l)this.dir=this.aimDir;else{a=(a+360)%360,a>180&&(a-=360);var t=Math.abs(a)<l?a:l*(a>0?1:-1);this.dir+=t,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360)}let u=this.dir*Math.PI/180,m=tt.create(Math.cos(u),Math.sin(u));var r=this.bones[0].add(m.mul(this.speed));this.bones[0].assign(r),console.log("TEST==== 移动蛇头坐标：","第"+this.time+"次",this.bones[0].x,this.bones[0].y,"frameIndex: "+this.frameIndex)}}},Ee=jI.getInstance();var ft=class i{constructor(){}static judgePosition(e,t){let r=Math.atan2(t,e)*180/Math.PI;return r<0&&(r+=360),Math.floor(r)}static normalizeAngle(e){return e=e%360,e<0&&(e+=360),e}static distancePoint(e,t,r,s){return Math.sqrt((e-r)*(e-r)+(t-s)*(t-s))}get2D_Distance(e,t){return Math.sqrt(Math.pow(Math.abs(e),2)+Math.pow(Math.abs(t),2))}static rollCharacterByDir(e,t,r,s){let a=r;return i.rollCharacter(e,t,a,s)}static rollCharacter(e,t,r,s){let a=r*(Math.PI/180);var l=e+s*Math.cos(a),u=t+s*Math.sin(a),m=Ee.currArenaItem.mapid,p=X.m_dicMaps.get(m),h=p.offset;return l<h?l=h:l>p.width-h&&(l=p.width-h),u<h?u=h:u>p.height-h&&(u=p.height-h),console.log(`新的坐标：X=${l}, Y=${u}`),[l,u]}static getRandomPointInMap(){var e=Ee.currArenaItem.mapid,t=X.m_dicMaps.get(e),r=t.width,s=t.height,a=t.offset;let l=Math.floor(Math.random()*(r-2*a))+a,u=Math.floor(Math.random()*(s-2*a))+a;return{x:l,y:u}}static createDirectPath(e,t,r,s=40,a=25){for(var l=[],u=r*Math.PI/180,m=1;m<s;++m){var p=e,h=t+a*m,f=-(h-t)*Math.sin(u)+e,g=(h-t)*Math.cos(u)+t;l.push(f,g)}return l}static pointsBack(e,t){if(t<=0||!e||e.length<4)return e;for(var r=0,s=-1,a=-1,l=0;l<e.length;l+=2){var u=e[l],m=e[l+1];s>0&&a>0&&(r+=this.distancePoint(s,a,u,m)),s=u,a=m}if(r<t)return null;for(var p=e.concat(),h=0,f=0;p&&p.length>=4&&h<t;){var g=p.pop(),b=p.pop(),_=p[p.length-1],I=p[p.length-2];if(h+=this.distancePoint(I,_,b,g),f=h-t,f>0){var x=Math.atan2(_-g,I-b),L=x*180/Math.PI+90;x=L*Math.PI/180;var E=_+f,T=-(E-_)*Math.sin(x)+I,R=(E-_)*Math.cos(x)+_;p.push(T,R)}}return p}static createLinePath(e,t,r,s,a=25,l=0){var u=[],m=Math.atan2(s-t,r-e);m=(m*180/Math.PI-90)*Math.PI/180;for(var p=this.distancePoint(e,t,r,s)-l,h=0,f=0;p>h;){var g=e,b=t+a*f,_=-(b-t)*Math.sin(m)+e,I=(b-t)*Math.cos(m)+t;h=this.distancePoint(e,t,_,I),p>h&&u.push(_,I),f++}return l==0&&u.push(r,s),u}static rolePosTransform(e,t,r){var s=new Laya.Matrix;return s.rotate(Math.PI/180*(e.modelAngle-90)),s.translate(t.x,t.y),s.transformPoint(r)}static pointtInPolygon(e,t){for(var r=0,s=0;s<t.length;s++){var a=t[s],l=t[(s+1)%t.length];if(a.y!=l.y&&!(e.y<Math.min(a.y,l.y))&&!(e.y>=Math.max(a.y,l.y))){var u=(e.y-a.y)*(l.x-a.x)/(l.y-a.y)+a.x;u>e.x&&r++}}return r%2==1}static pointInPie(e,t,r,s,a,l){var u=Math.atan2(l.y-t,l.x-e)*180/Math.PI,m=this.distancePoint(e,t,l.x,l.y);return u>=r&&u<=s&&m<=a}static getRandInRound(e,t){return Math.floor(Math.random()*(t-e+1))+e}static getUnitVector(e){let r=e*(Math.PI/180),s=1*Math.cos(r),a=1*Math.sin(r);return new Laya.Point(s,a)}static getAngleToVec(e){let t=e*Math.PI/180,r=Math.cos(t),s=Math.sin(t);return tt.create(r,s)}static subtract(e,t){let r=new Laya.Point;return r.x=e.x-t.x,r.y=e.y-t.y,r}static getDistance(e,t){let r=e.x-t.x,s=e.y-t.y;return Math.sqrt(r*r+s*s)}static calculateDistance(e,t){let r=e.x-t.x,s=e.y-t.y;return Math.sqrt(r*r+s*s)}static lerp(e,t,r){return e+(t-e)*r}static fromBigToSmall(e,t){var r=e*185/Q.mapSize.width,s=t*185/Q.mapSize.height;return[r,s]}};var{regClass:jN}=Laya,Lt=Laya.InputManager,rm=class extends Laya.Script{constructor(){super(...arguments);this.currRockerBar=null;this.maxDistance=80;this.isMouseDown=!1;this.mouseDownPosition=new Laya.Point;this._currentMouse=new Laya.Point;this.initRockerBarPosition=new Laya.Point;this.key1Pressed=!1;this.key2Pressed=!1;this.key3Pressed=!1;this.key4Pressed=!1;this.key5Pressed=!1;this.key6Pressed=!1;this.key7Pressed=!1;this.key8Pressed=!1;this.keySpacePressed=!1;this.directionOffset=0;this.isKeyRun=!1}onEnable(){Laya.InputManager.multiTouchEnabled=!0}onStart(){this.currRockerBar=this.owner.getChildByName("freebar"),this.freetrack=this.owner.getChildByName("freetrack"),this.img_arrow_left=this.freetrack.getChildByName("img_arrow_left"),this.img_arrow_right=this.freetrack.getChildByName("img_arrow_right"),this.img_arrow_up=this.freetrack.getChildByName("img_arrow_up"),this.img_arrow_down=this.freetrack.getChildByName("img_arrow_down"),Laya.Browser.onPC?this.freetrack.visible=!0:this.img_arrow_left.visible=this.img_arrow_right.visible=this.img_arrow_up.visible=this.img_arrow_down.visible=!1,this.initialise()}initialise(){this.initRockerBarPosition.setTo(this.currRockerBar.x,this.currRockerBar.y),this.currRockerBar.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}onSkillKeyDown(t,r,s){switch(t.stopPropagation(),r){case 1:this.key1Pressed=s;break;case 2:this.key2Pressed=s;break;case 3:this.key3Pressed=s;break}}onMouseDown(t){Ee.stopAll||(t.stopPropagation(),this.isMouseDown=!0,this.currRockerBar.selected=!0,Laya.Browser.onPC||(this.freetrack.visible=!0),this.mouseDownPosition.setTo(this.owner.mouseX,this.owner.mouseY),console.log("onMouseDown this.owner.mouse: ",this.owner.mouseX,this.owner.mouseY),this.isKeyRun=!1,this.touchId=t.touchId)}onMouseUp(t){!this.isMouseDown||t.touchId!==this.touchId||this.endClick(t)}endClick(t){this.isMouseDown=!1,this.currRockerBar.x=this.initRockerBarPosition.x,this.currRockerBar.y=this.initRockerBarPosition.y,this.currRockerBar.selected=!1,this.setDir(-4),this.touchId=-1}onMouseMove(t){if(!this.isMouseDown||!this.currRockerBar||t.touchId!==this.touchId)return;t.stopPropagation(),this._currentMouse.setTo(t.stageX,t.stageY);let r=this.owner.globalToLocal(this._currentMouse,!1),s=r.x-this.mouseDownPosition.x,a=r.y-this.mouseDownPosition.y;if(Math.sqrt(s**2+a**2)<this.maxDistance)this.currRockerBar.x=this.initRockerBarPosition.x+s,this.currRockerBar.y=this.initRockerBarPosition.y+a;else{let u=Math.atan2(s,a);this.currRockerBar.x=Math.sin(u)*this.maxDistance+this.initRockerBarPosition.x,this.currRockerBar.y=Math.cos(u)*this.maxDistance+this.initRockerBarPosition.y}if(Math.abs(s)>this.directionOffset||Math.abs(a)>this.directionOffset){let u=ft.judgePosition(s,a);this.setDir(u)}}onUpdate(){Ee.stopAll||this.getKeyboardPressed()}setDir(t){this.lastDirection!=t&&(se.getInstance().setMyHeroDirection(t),this.lastDirection=t)}getKeyboardPressed(){if(Lt.hasKeyDown(Laya.Keyboard.W)&&Lt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(225)):Lt.hasKeyDown(Laya.Keyboard.W)&&Lt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(315)):Lt.hasKeyDown(Laya.Keyboard.S)&&Lt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(135)):Lt.hasKeyDown(Laya.Keyboard.S)&&Lt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(45)):Lt.hasKeyDown(Laya.Keyboard.W)?(this.isKeyRun=!0,this.setDir(270)):Lt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(0)):Lt.hasKeyDown(Laya.Keyboard.S)?(this.isKeyRun=!0,this.setDir(90)):Lt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(180)):this.isKeyRun&&this.setDir(-4),Lt.hasKeyDown(Laya.Keyboard.H)||Lt.hasKeyDown(Laya.Keyboard.NUMPAD_1)){if(this.key1Pressed)return;this.key1Pressed=!0,v.event(k.EVENT_CLICK_NUM,1),Laya.timer.once(500,this,this.notKey1Pressed)}if(Lt.hasKeyDown(Laya.Keyboard.J)||Lt.hasKeyDown(Laya.Keyboard.NUMPAD_2)){if(this.key2Pressed)return;this.key2Pressed=!0,v.event(k.EVENT_CLICK_NUM,2),Laya.timer.once(500,this,this.notKey2Pressed)}if(Lt.hasKeyDown(Laya.Keyboard.K)||Lt.hasKeyDown(Laya.Keyboard.NUMPAD_3)){if(this.key3Pressed)return;this.key3Pressed=!0,v.event(k.EVENT_CLICK_NUM,3),Laya.timer.once(500,this,this.notKey3Pressed)}if(Lt.hasKeyDown(Laya.Keyboard.L)||Lt.hasKeyDown(Laya.Keyboard.NUMPAD_4)){if(this.key4Pressed)return;this.key4Pressed=!0,v.event(k.EVENT_CLICK_NUM,4),Laya.timer.once(500,this,this.notKey4Pressed)}if(Lt.hasKeyDown(Laya.Keyboard.M)||Lt.hasKeyDown(Laya.Keyboard.NUMPAD_5)){if(this.key5Pressed)return;this.key5Pressed=!0,v.event(k.EVENT_CLICK_NUM,5),Laya.timer.once(500,this,this.notKey5Pressed)}if(Lt.hasKeyDown(Laya.Keyboard.N)||Lt.hasKeyDown(Laya.Keyboard.NUMPAD_6)){if(this.key6Pressed)return;this.key6Pressed=!0,v.event(k.EVENT_CLICK_NUM,6),Laya.timer.once(500,this,this.notKey6Pressed)}if(Lt.hasKeyDown(Laya.Keyboard.B)||Lt.hasKeyDown(Laya.Keyboard.NUMPAD_7)){if(this.key7Pressed)return;this.key7Pressed=!0,v.event(k.EVENT_CLICK_NUM,7),Laya.timer.once(500,this,this.notKey7Pressed)}if(Lt.hasKeyDown(Laya.Keyboard.V)||Lt.hasKeyDown(Laya.Keyboard.NUMPAD_8)){if(this.key8Pressed)return;this.key8Pressed=!0,v.event(k.EVENT_CLICK_NUM,8),Laya.timer.once(500,this,this.notKey8Pressed)}if(Lt.hasKeyDown(Laya.Keyboard.SPACE)){if(this.keySpacePressed)return;this.keySpacePressed=!0,v.event(k.EVENT_CLICK_SPACE,!0)}else this.keySpacePressed&&(v.event(k.EVENT_CLICK_SPACE,!1),this.notKeySpacePressed(),Laya.timer.clear(this,this.notKeySpacePressed))}notKey1Pressed(){this.key1Pressed=!1}notKey2Pressed(){this.key2Pressed=!1}notKey3Pressed(){this.key3Pressed=!1}notKey4Pressed(){this.key4Pressed=!1}notKey5Pressed(){this.key5Pressed=!1}notKey6Pressed(){this.key6Pressed=!1}notKey7Pressed(){this.key7Pressed=!1}notKey8Pressed(){this.key8Pressed=!1}notKeySpacePressed(){this.keySpacePressed=!1}getKeyPressed(t){var r=t.toParentPoint(new Laya.Point(t.x,t.y));return r.x>t.x&&r.x<t.x+t.width&&r.y>t.y&&r.y<t.y+t.height}getDistance(t,r,s,a){let l=t-s,u=r-a;return Math.sqrt(l*l+u*u)}onDisable(){Laya.InputManager.multiTouchEnabled=!1}};rm=U([jN("7cTqWb35RwygSkuWy4QkgQ")],rm);var $n=class $n extends Laya.ColorFilter{constructor(e=null){super(e)}static addClickFilter(e){let t=e.filters||[];t.push($n.clickFilter),e.filters=t}static addHoverFilter(e){let t=e.filters||[];t.push($n.hoverFilter),e.filters=t}static clearClickFilter(e){let t=e.filters;if(t!=null&&t.length>0){for(let r=t.length-1;r>-1;r--)t[r]instanceof $n&&t.splice(r,1);e.filters=t}}static clearHoverFilter(e){this.clearClickFilter(e)}};$n.clickFilter=new $n([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]),$n.hoverFilter=new $n([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]);var Ri=$n;var{regClass:GN,property:VN}=Laya,Ml=class extends Laya.Script{constructor(){super();this.noSound=!1}onEnable(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onUp)}onDown(){this.noSound||Ke.playSoundByName(Ke.soundName_hit),Ri.addClickFilter(this.owner)}onUp(){Ri.clearClickFilter(this.owner)}onDisable(){Ri.clearClickFilter(this.owner),this.owner.off(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onUp)}};U([VN({type:"boolean"})],Ml.prototype,"noSound",2),Ml=U([GN("cL1AmqOiTHmtQWKayPNcTA")],Ml);var{regClass:WN,property:Fme}=Laya,Yn=class extends Laya.Script{constructor(){super(...arguments);this.currentValue=0;this.targetValue=100;this.duration=2;this.dataMode=1}onAwake(){}startIncrement(t,r=2,s=1){this.targetValue=t,this.duration=r,this.dataMode=s,this.currentValue=0,this.updateText(),Laya.Tween.to(this,{currentValue:this.targetValue,update:new Laya.Handler(this,this.updateText)},this.duration*1e3,Laya.Ease.linearIn,null,null,!0)}updateText(){this.dataMode==1?this.owner.value=Math.round(this.currentValue).toString():this.dataMode==3?this.owner.value=ht.format(this.currentValue,":",!1):this.owner.value=this.currentValue.toFixed(2)}onDestroy(){Laya.Tween.clearAll(this)}};Yn=U([WN("Uq3IEB9CSNSU6R4gjfo1lw")],Yn);var Sy=class extends Laya.Scene{};var{regClass:KN}=Laya,wy=class extends Sy{constructor(){super(...arguments);this.liveNum=0;this.lastSeedRate=0;this.SnakeAINum=5;this.snakeAIArr=[]}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){var r=Ee.matchDto.startTime-Ee.matchDto.nowTime;r>0&&Be.intance.openModule(M.MatchReadyView);var s=Ee.matchDto.arenaId,a=X.m_dicArenaDic.get(s);Ee.currArenaItem=a,this.list_rank.array=[];var l=this.map_1001;Ui.gameMap=l,Ui.img_smallMap=this.img_smallMap,Xe.sendCustumEvent(42),this.arenaNo.text="",this.init(),this.onInitEnd(this),this.playMusic(),this.closeReady()}closeReady(){Be.intance.disposeView(M.MatchReadyView)}playMusic(){Ke.playMusicByURL("mp3/battle.mp3"),Wt.needPop=!1}init(){this.registerEvents(),this.btn_addSpeed.on(Laya.Event.MOUSE_DOWN,this,this.onTouchSpeedDown),this.btn_addSpeed.on(Laya.Event.MOUSE_UP,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_OUT,this,this.onTouchSpeedUp),js.init(this.gameLayer),js.createData(),js.startGame()}onTouchSpeedDown(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedDown "+t.type)}this.lastSeedRate!=Q.snakeSpeedRate.speedUp&&(this.lastSeedRate=Q.snakeSpeedRate.speedUp,se.getInstance().updateSpeedRate(Q.snakeType.SELF,Q.snakeSpeedRate.speedUp))}onTouchSpeedUp(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedUp "+t.type),Ri.clearClickFilter(t.target)}this.lastSeedRate!=Q.snakeSpeedRate.default&&(this.lastSeedRate=Q.snakeSpeedRate.default,se.getInstance().updateSpeedRate(Q.snakeType.SELF,Q.snakeSpeedRate.default))}onSpaceClick(t){t?(this.onTouchSpeedDown(null),Ri.addClickFilter(this.btn_addSpeed)):(this.onTouchSpeedUp(null),Ri.clearClickFilter(this.btn_addSpeed))}onInitEnd(t){t.startGameLoop(),t.updateBattleCD()}startGameLoop(){Laya.timer.frameLoop(10,this,this.gameLoop)}registerEvents(){v.on(k.LENGTH_CHANGE,this,this.updateLength),v.on(k.KILL_SNAKE,this,this.updateKills)}removeEvents(){v.off(k.LENGTH_CHANGE,this,this.updateLength),v.off(k.KILL_SNAKE,this,this.updateKills)}gameLoop(){se.getInstance().selfSnake&&se.getInstance().selfSnake.tag&&(this.updateLength(se.getInstance().selfSnake.getSkinLength(!1)),this.updateKills(se.getInstance().selfSnake.tag.kills),this.updateSnakeLengthRule()),se.getInstance().matchHeroSprDic&&(this.list_rank.array=this.getSortPlayer(se.getInstance().matchHeroSprDic.values),this.tf_remainer.text=this.liveNum+"")}updateSnakeLengthRule(){var t=se.getInstance().selfSnake.tag.snakeId,r=se.getInstance().selfSnake.getSkinLength(!1),s=X.getSheetDataByMultiKey(X.m_dicSnakeLengthRules,[t,r]),a=X.getSheetDataByMultiKey(X.m_dicSnakeLengthRules,[t,r+1]),l=se.getInstance().selfSnake.getScore(!1);if(s&&a){var u=l-s.accumulatePoints,m=a.accumulatePoints-s.accumulatePoints;this.text_score.text=`${u}/${m}`;var p=u/m*-180;p<-180?p=-180:p>0&&(p=0),this.img_socre_mask.rotation>p?Laya.Tween.to(this.img_socre_mask,{rotation:p},100):(Laya.Tween.clearAll(this.img_socre_mask),this.img_socre_mask.rotation=p,this.img_socre_mask.rotation=p)}}updateKills(t){this.text_kill.text=`${t}`}updateLength(t){this.text_length.text=`${t}`}getSortPlayer(t){let s=t.slice().sort((u,m)=>m.getScore(!1)-u.getScore(!1)),a=[];this.liveNum=0;let l=1;return s.forEach(u=>{u.rankNum=l,u.tag!=null&&this.liveNum++,u.tag!=null&&(l<=10?a.push(u):u.tag.roleId===G.playerDto.pid&&(a.length>=10?a.splice(-1,1,u):a.push(u))),l++}),a}updateBattleCD(){Ee.matchCoolDownTime=Math.round(Ee.matchDto.remainderCd/1e3),Ee.matchCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):Laya.timer.clear(this,this.onSetCoolTime)}onSetCoolTime(){this.tf_reduceTime.text=ht.format(Ee.matchCoolDownTime,":",!1),Ee.matchCoolDownTime>=0?(this.tf_reduceTime.text=ht.format(Ee.matchCoolDownTime,":",!1),Ee.matchCoolDownTime<=10&&this.scaleEffect(),Ee.stopAll||Ee.matchCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),ar.onPveEnd())}scaleEffect(){var t=this;Laya.Tween.to(this.tf_reduceTime,{scaleX:1.3,scaleY:1.3},200,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.Tween.to(t.tf_reduceTime,{scaleX:1,scaleY:1},200,Laya.Ease.linearInOut)}))}onGameSceneGray(){this.matchBox.gray=!0,Laya.timer.once(1e3,this,this.stopUpdate)}stopUpdate(){js.endTimer()}onEnable(){v.on(k.EVENT_GameScene_Gray,this,this.onGameSceneGray),v.on(k.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown)}onKeyDown(t){t.keyCode===Laya.Keyboard.X&&sr.getInstance().toggleVisible()}onWindowFocus(){}onDisable(){this.stopUpdate(),v.off(k.EVENT_GameScene_Gray,this,this.onGameSceneGray),v.off(k.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.off(Laya.Event.KEY_DOWN,this,this.onKeyDown),this.removeEvents(),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),js.clear(),Ee.clearData()}};wy=U([KN("xqHhdUJURkuoCmI0OKh8Kg")],wy);var Ey=class extends Laya.Image{};var{regClass:$N}=Laya,Ly=class extends Ey{constructor(){super(...arguments);this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200}init(t){this.skin=ie.getFoodIcon(t.icon)}startScalingAnimation(){let t=this.minScale+Math.random()*(this.maxScale-this.minScale),r=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:t,scaleY:t},r,null,Laya.Handler.create(this,()=>{let s=this.minScale+Math.random()*(1-this.minScale),a=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:s,scaleY:s},a,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}onDisable(){Laya.Tween.clearAll(this)}};Ly=U([$N("j4yWA5APT7ipho7IOx4ryg")],Ly);var Ty=class extends Laya.Scene{};var{regClass:YN}=Laya,Ay=class extends Ty{constructor(){super(...arguments);this.liveNum=0;this.lastSeedRate=0;this.SnakeAINum=5;this.snakeAIArr=[]}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){this.list_rank.array=[];var r=this.map_1001;Ui.gameMap=r,Ui.img_smallMap=this.img_smallMap,this.init(),this.playMusic()}playMusic(){Ke.playMusicByURL("mp3/battle.mp3"),Wt.needPop=!1}init(){this.registerEvents(),this.btn_addSpeed.on(Laya.Event.MOUSE_DOWN,this,this.onTouchSpeedDown),this.btn_addSpeed.on(Laya.Event.MOUSE_UP,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_OUT,this,this.onTouchSpeedUp),or.init(this.gameLayer)}onTouchSpeedDown(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedDown "+t.type)}this.lastSeedRate!=Q.snakeSpeedRate.speedUp&&(this.lastSeedRate=Q.snakeSpeedRate.speedUp,se.getInstance().updateSpeedRate(Q.snakeType.SELF,Q.snakeSpeedRate.speedUp))}onTouchSpeedUp(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedUp "+t.type),Ri.clearClickFilter(t.target)}this.lastSeedRate!=Q.snakeSpeedRate.default&&(this.lastSeedRate=Q.snakeSpeedRate.default,se.getInstance().updateSpeedRate(Q.snakeType.SELF,Q.snakeSpeedRate.default))}onSpaceClick(t){t?(this.onTouchSpeedDown(null),Ri.addClickFilter(this.btn_addSpeed)):(this.onTouchSpeedUp(null),Ri.clearClickFilter(this.btn_addSpeed))}startGameLoop(){Laya.timer.frameLoop(10,this,this.gameLoop)}registerEvents(){v.on(k.LENGTH_CHANGE,this,this.updateLength),v.on(k.KILL_SNAKE,this,this.updateKills)}removeEvents(){v.off(k.LENGTH_CHANGE,this,this.updateLength),v.off(k.KILL_SNAKE,this,this.updateKills)}gameLoop(){se.getInstance().selfSnake&&se.getInstance().selfSnake.tag&&(this.updateLength(se.getInstance().selfSnake.getSkinLength(!0)),this.updateKills(se.getInstance().selfSnake.tag.kills),this.updateSnakeLengthRule()),se.getInstance().matchHeroSprDic&&(this.list_rank.array=this.getSortPlayer(se.getInstance().matchHeroSprDic.values),this.tf_remainer.text=this.liveNum+"")}updateSnakeLengthRule(){var t=se.getInstance().selfSnake.tag.snakeId,r=se.getInstance().selfSnake.getSkinLength(!0),s=X.getSheetDataByMultiKey(X.m_dicSnakeLengthRules,[t,r]),a=X.getSheetDataByMultiKey(X.m_dicSnakeLengthRules,[t,r+1]),l=se.getInstance().selfSnake.getScore(!0);if(s&&a){var u=l-s.accumulatePoints,m=a.accumulatePoints-s.accumulatePoints;this.text_score.text=`${u}/${m}`;var p=u/m*-180;p<-180?p=-180:p>0&&(p=0),this.img_socre_mask.rotation>p?Laya.Tween.to(this.img_socre_mask,{rotation:p},100):(Laya.Tween.clearAll(this.img_socre_mask),this.img_socre_mask.rotation=p,this.img_socre_mask.rotation=p)}}updateKills(t){this.text_kill.text=`${t}`}updateLength(t){this.text_length.text=`${t}`}onInitData(){var t=Ee.matchDto.roomId;t?this.arenaNo.text=t+"":this.arenaNo.text="",or.createData(),or.startGame(),this.startGameLoop(),this.updateBattleCD(),Be.intance.disposeView(M.MatchReadyView,"must")}onRestoreData(){or.clearTimer(),or.restoreData(),or.startGame()}getSortPlayer(t){let s=t.slice().sort((u,m)=>m.getScore(!0)-u.getScore(!0)),a=[];this.liveNum=0;let l=1;return s.forEach(u=>{u.rankNum=l,u.tag!=null&&this.liveNum++,u.tag!=null&&(l<=10?a.push(u):u.tag.roleId===G.playerDto.pid&&(a.length>=10?a.splice(-1,1,u):a.push(u))),l++}),a}updateBattleCD(){Ee.matchCoolDownTime=Math.round((Ee.matchDto.myPlayerObject.oprTime-Ee.matchDto.myPlayerObject.enterTime)/1e3),this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)}onSetCoolTime(){this.tf_reduceTime.text=ht.format(Ee.matchCoolDownTime,":",!1),Ee.stopAll||Ee.matchCoolDownTime++}onGameSceneGray(){this.matchBox.gray=!0,Laya.timer.once(1e3,this,this.stopUpdate)}stopUpdate(){je.close(),or.endTimer()}onEnable(){v.on(k.EVENT_PVP_INIT_DATA,this,this.onInitData),v.on(k.EVENT_PVP_RESTORE_DATA,this,this.onRestoreData),v.on(k.EVENT_GameScene_Gray,this,this.onGameSceneGray),v.on(k.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown)}onKeyDown(t){t.keyCode===Laya.Keyboard.X&&sr.getInstance().toggleVisible()}onWindowFocus(){ke.frameNetQueue.sendRestoreData()}onDisable(){this.stopUpdate(),v.off(k.EVENT_PVP_INIT_DATA,this,this.onInitData),v.off(k.EVENT_PVP_RESTORE_DATA,this,this.onRestoreData),v.off(k.EVENT_GameScene_Gray,this,this.onGameSceneGray),v.off(k.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.off(Laya.Event.KEY_DOWN,this,this.onKeyDown),this.removeEvents(),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),or.clear(),Ee.clearData()}};Ay=U([YN("0r0gyiRERf6yXTGaGqWBvg")],Ay);var Cy=class extends Laya.Box{};var{regClass:qN}=Laya,My=class extends Cy{constructor(){super()}set dataSource(t){super.dataSource=t,this.setData(t),this.addEvent()}addEvent(){this.btn_deposit.on(Laya.Event.CLICK,this,this.onDeposit),this.btn_withdraw.on(Laya.Event.CLICK,this,this.onWithdraw)}setData(t){if(t){this.data=t,this.tf_coinNum.text=`${t.balance}`,this.tf_freeze.text=`${t.frozen}`,this.tf_prize.text=`${t.price}`;let r=Number(t.valuation).toFixed(2);r.endsWith("0")&&(r=Number(t.valuation).toFixed(1),r.endsWith("0")&&(r=Number(t.valuation).toFixed(0))),this.tf_valu.text=r,this.img_coin.skin=ie.getCurrencyIcon(t.symbolId),this.img_coin.visible=!0,this.tf_coin.text=t.symbol,t.withdraw?this.btn_withdraw.visible=!0:this.btn_withdraw.visible=!1,t.recharge?this.btn_deposit.visible=!0:this.btn_deposit.visible=!1}else this.visible=!1}onDeposit(){Be.intance.openModule(M.DepositDialog,this.data)}onWithdraw(){Be.intance.openModule(M.WithdrawDialog,this.data)}};My=U([qN("oDHEPtPLT9SboHGJIeNVbA")],My);var Ry=class extends Laya.Scene{};var xt=class{static startCircleAnimation(e,t=Laya.stage.width/2,r=Laya.stage.height/2,s=200,a=5e3,l=!0,u=0,m){Laya.Tween.clearTween(e);let p=e.x,h=e.y,f=0,g=l?1:-1,b=0,_=.5,I=2e3,x=0,L=()=>{x+=16;let E=1+Math.sin(x*Math.PI*2/I)*_;f+=360/a*16*E*g;let T=f*Math.PI/180;e.x=t+Math.cos(T)*s,e.y=r+Math.sin(T)*s,Math.abs(f)>=360&&(f=f%360,b++,u>0&&b>=u&&(Laya.timer.clear(e,L),e.x=p,e.y=h,m&&m.run()))};Laya.timer.frameLoop(1,e,L)}static stopCircleAnimation(e){Laya.timer.clearAll(e),Laya.Tween.clearTween(e)}static startCircleAnimationWithSpeedControl(e,t=Laya.stage.width/2,r=Laya.stage.height/2,s=200,a=5e3,l=!0,u=0,m=.5,p=2e3,h){Laya.Tween.clearTween(e);let f=e.x,g=e.y,b=0,_=l?1:-1,I=0,x=0,L=()=>{x+=16;let E=1+Math.sin(x*Math.PI*2/p)*m;b+=360/a*16*E*_;let T=b*Math.PI/180;e.x=t+Math.cos(T)*s,e.y=r+Math.sin(T)*s,Math.abs(b)>=360&&(b=b%360,I++,u>0&&I>=u&&(Laya.timer.clear(e,L),e.x=f,e.y=g,h&&h.run()))};Laya.timer.frameLoop(1,e,L)}static startRotationAnimation(e,t=2e3,r=!0){this.stopRotationAnimation(e);let s="rotation_"+Date.now().toString(),a=r?1:-1,l=360/t*16*a,u=()=>{e.rotation=(e.rotation+l)%360},m="updateRotation_"+s;return e[m]=u,e.rotationAnimationId=s,Laya.timer.frameLoop(1,e,u),s}static stopRotationAnimation(e){if(e.rotationAnimationId){let t="updateRotation_"+e.rotationAnimationId,r=e[t];r?Laya.timer.clear(e,r):Laya.timer.clearAll(e),delete e.rotationAnimationId,r&&delete e[t]}}static startElasticPopupAnimation(e,t=150,r=1.1,s=100,a=.95,l=80,u){Laya.Tween.clearAll(e),e.scale(0,0),e.visible=!0,Laya.Tween.to(e,{scaleX:r,scaleY:r},t,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:a,scaleY:a},s,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},l,Laya.Ease.linearNone,u)}))}))}static stopElasticPopupAnimation(e){Laya.Tween.clearAll(e)}static startLinearShrinkAnimation(e,t=80,r){Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0},t,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{e.visible=!1,r&&r.run()}))}static startJellyScaleAnimation(e,t=1.2,r=120,s=.85,a=90,l=80,u){Laya.Tween.clearAll(e),e.scale(1,1),e.visible=!0,Laya.Tween.to(e,{scaleX:t,scaleY:t},r,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:s,scaleY:s},a,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},l,Laya.Ease.linearNone,u)}))}))}static playSpineAnimation(e,t=!1,r){let s=e.getChildByName("box_sk");return s?(s.play(null,t),r&&(s.once(Laya.Event.COMPLETE,null,()=>{r()}),t&&r()),!0):(console.warn("未找到box_sk Spine组件"),!1)}};var{regClass:QN}=Laya,qn=class extends Ry{constructor(){super(...arguments);this.m_currentTabIndex=0;this.assetChangeData=[];this.currentAssetChangePage=1;this.isLoadingAssetChange=!1;this.hasMoreAssetChange=!0;this.assetChangePageSize=20}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onEnable(){this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.list_Record.visible=!1,this.list_RecordLiquit.visible=!1,this.btn_back_Record.on(Laya.Event.CLICK,this,this.openRecord,[!1]),this.btn_detail.on(Laya.Event.CLICK,this,this.openRecord,[!0]),v.on(k.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),v.on(k.UPDATE_ASSETS,this,this.onUpdateAssets),v.on("msg_"+y.snake.socket.MessageType.MSG_CHARGE_RECORD,this,this.onChargeRecord),v.on("msg_"+y.snake.socket.MessageType.MSG_WITHDRAW_RECORD,this,this.onWithdrawRecord),v.on("msg_"+y.snake.socket.MessageType.MSG_TOKEN_CHANGE_RECORD,this,this.onAssetChangeRecord),this.list_asset.visible=!1,dt.requestCoinInfo(),xt.startJellyScaleAnimation(this.tf_tittle);for(let t=0;t<3;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t,!1]);this.list_RecordLiquit.scrollBar.on(Laya.Event.CHANGE,this,this.onRecordListScroll)}onDisable(){v.off(k.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),v.off(k.UPDATE_ASSETS,this,this.onUpdateAssets),v.off("msg_"+y.snake.socket.MessageType.MSG_CHARGE_RECORD,this,this.onChargeRecord),v.off("msg_"+y.snake.socket.MessageType.MSG_WITHDRAW_RECORD,this,this.onWithdrawRecord),v.off("msg_"+y.snake.socket.MessageType.MSG_TOKEN_CHANGE_RECORD,this,this.onAssetChangeRecord),this.btn_detail.off(Laya.Event.CLICK,this,this.openRecord,[!0]),this.btn_back_Record.off(Laya.Event.CLICK,this,this.openRecord),this.list_RecordLiquit.scrollBar.off(Laya.Event.CHANGE,this,this.onRecordListScroll)}onUpdateAssets(){dt.requestCoinInfo()}onTokenBalanceUpdate(t){this.showAssetData(t)}showAssetData(t){this.list_asset.array=t,this.list_asset.visible=!0;let r=this.calculateTotalValue(t).toFixed(2);r.endsWith("0")&&(r=this.calculateTotalValue(t).toFixed(1),r.endsWith("0")&&(r=this.calculateTotalValue(t).toFixed(0))),this.tf_total.text=`${r} USDT`}calculateTotalValue(t){try{return t.reduce((r,s)=>{let a=s.balance,l=s.price;return isNaN(a)||isNaN(l)?r:r+s.valuation},0)}catch(r){return console.error("计算资产总额时发生错误:",r),0}}setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}openRecord(t){this.box_record.visible=t,this.box_all.visible=!t,t?this.onTabClick(this.m_currentTabIndex,!0):this.list_Record.visible=!1}onTabClick(t,r=!1){if(this.m_currentTabIndex===t&&!r)return;this.m_currentTabIndex=t;let s=3,a="res/common/comm/img_tab1.png",l="res/common/comm/img_tab2.png",u="#427030",m="#1449cb";for(let p=0;p<s;p++){let h=this[`tab${p}`],f=h.getChildByName("tf_tit"),g=t===p;if(h.skin=g?a:l,f.strokeColor=g?u:m,g)switch(qn.isDepositRecord=t===0,t){case 0:this.list_RecordLiquit.visible=!1,ge.send(y.snake.socket.MessageType.MSG_CHARGE_RECORD);break;case 1:this.list_RecordLiquit.visible=!1,ge.send(y.snake.socket.MessageType.MSG_WITHDRAW_RECORD);break;case 2:this.list_Record.visible=!1,this.resetAssetChangeList();break}}}onChargeRecord(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_CHARGE_RECORD);r==y.snake.socket.MessageCode.SYS_NORMAL&&(this.list_Record.array=s.resp||[],this.list_Record.visible=!0)}onWithdrawRecord(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_WITHDRAW_RECORD);r==y.snake.socket.MessageCode.SYS_NORMAL&&(this.list_Record.array=s.resp||[],this.list_Record.visible=!0)}resetAssetChangeList(){this.currentAssetChangePage=1,this.isLoadingAssetChange=!1,this.hasMoreAssetChange=!0,this.assetChangeData=[],this.getAssetChangeData()}getAssetChangeData(){this.isLoadingAssetChange=!0;let t=new y.snake.socket.CS_TOKEN_CHANGE_RECORD({pageNo:this.currentAssetChangePage,pageSize:this.assetChangePageSize}),r=y.snake.socket.MessageType.MSG_TOKEN_CHANGE_RECORD;ge.send(r,t)}onAssetChangeRecord(t,r){if(this.isLoadingAssetChange=!1,r==y.snake.socket.MessageCode.SYS_NORMAL){let s=de.getMsgBody(t,y.snake.socket.SC_TOKEN_CHANGE_RECORD);if(s&&s.records&&s.records.length>0){let a=s.records.map(l=>l);this.assetChangeData=this.assetChangeData.concat(a),this.list_RecordLiquit.array=this.assetChangeData,this.list_RecordLiquit.visible=!0}else this.hasMoreAssetChange=!1,this.currentAssetChangePage===1&&(this.list_RecordLiquit.array=[],this.list_RecordLiquit.visible=!0)}else this.currentAssetChangePage>1&&this.currentAssetChangePage--}onRecordListScroll(){if(this.m_currentTabIndex!==2||this.isLoadingAssetChange||!this.hasMoreAssetChange)return;let t=this.list_RecordLiquit.scrollBar,r=t.value,s=t.max;s>0&&r>=s*.8&&this.loadNextAssetChangePage()}loadNextAssetChangePage(){this.isLoadingAssetChange=!0,this.currentAssetChangePage++,this.getAssetChangeData()}};qn.isDepositRecord=!0,qn=U([QN("vDn8r-QeS5KzEmJcMsoY8w")],qn);var By=class extends Laya.Box{};var{regClass:ZN}=Laya,Dy=class extends By{constructor(){super()}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}console.log("data",e);let t=JSON.parse(e),{createTime:r,coinType:s,assetsChange:a,businessType:l}=t,{date:u,time:m}=ht.formatDayAndTime(r);this.tf_time.text=`${u}  ${m}`,this.img_coinType.skin=ie.getMoneyIcon(s),this.tf_amounte.text=`${a}`,this.tf_token.text=`${t.symbol}`,this.tf_operate.text=D.getLanguage(l);let p=this.parent?.parent?.array?.indexOf(e)??0;this.img_bg.visible=p%2===1}};Dy=U([ZN("lRu3eTzdRxW0heIDaqtjEg")],Dy);var Ny=class extends Laya.Dialog{};var GI=class i{constructor(){this.assets_contract=null;this.startRecharge=!1}static getInstance(){return i._instance||(i._instance=new i),i._instance}async init(){typeof window.ethereum>"u"||(v.on(k.EVENT_RECHARGE_GET,this,this.rechargeEnd),this.assets_contract=new window.web3.eth.Contract(qt.WITHDRAW_AND_RECHARGE_ABI,qt.WITHDRAW_AND_RECHARGE_ADDRESS))}async depositWallet(e,t){if(lt.showLoading(!0),!await He.allowanceAddressByTokenAddress(qt.WITHDRAW_AND_RECHARGE_ADDRESS,e)){lt.hideLoading(),Ce.notice(D.getLanguage(23));return}return t=window.web3.utils.toWei(t+""),await this.assets_contract.methods.recharge(e.toLowerCase(),t).send({from:He.walletAddress},(s,a)=>{if(s)return lt.hideLoading(),!1}),!0}async rechargeToken(e){try{let{amount:t,token:r,rechargeAddress:s,decimals:a=18,abi:l}=e;if(r!==qt.ADDRESS0&&!await He.newAllowanceAddress(s,r))return lt.hideLoading(),Ce.notice(D.getLanguage(23)),!1;let u=ov(t+"",a),m="depositToken",p;!r||r==qt.ADDRESS0?p=await He.walletClient.writeContract({account:He.walletAddress,address:s,abi:l,functionName:"depositETH",value:u,args:[100001]}):p=await He.walletClient.writeContract({account:He.walletAddress,address:s,abi:l,functionName:m,args:[r,u,100001]}),this.startRecharge=!0,Laya.timer.once(6e4,this,this.clearRecharge);let h,f=!1;if(h=await He.publicClient.waitForTransactionReceipt({hash:p,pollingInterval:1e3}),h&&h.status=="success"||f){if(!this.startRecharge)return;Laya.timer.clear(this,this.clearRecharge),console.log(`Tx successful with hash: ${p}`);let b=[await He.walletClient.getChainId(),p];return lt.hideLoading(),p}else{lt.hideLoading(),ee.TransactionErrorTip();return}}catch(t){lt.hideLoading(),console.log(t),t instanceof Error?t.message.includes("does not match the target chain for the transaction")?v.event(k.CHANGE_ASSET_CHAIN):console.log("Error message does not contain the specified character."):console.log("An error occurred, but it is not an instance of Error.")}}async getReward(e,t){}rechargeEnd(){G.rechargeEnd=!1,Laya.timer.clear(this,this.getReward)}clearRecharge(){this.startRecharge=!1,lt.hideLoading(),Ce.notice(D.getLanguage(45)),this.rechargeEnd()}},aC=GI.getInstance();var{regClass:XN}=Laya,Oy=class extends Ny{constructor(){super();this.btnLock=!1}onEnable(){v.on("msg_"+y.snake.socket.MessageType.MSG_CHARGE,this,this.onRequestChargeInfo),this.btn_confirm.on(Laya.Event.CLICK,this,this.onbtnConfirm),this.rechargeCode.on(Laya.Event.INPUT,this,this.testRechargeCodeInput)}setOpenData(t){this.tf_adress.text=Qe.shortenString(He.walletAddress,6,4),this.data=t,this.tf_web.text=t.chainName,this.tf_token.text=t.symbol,console.log("data",t),this.requestChargeInfo()}requestChargeInfo(){let t=y.snake.socket.MessageType.MSG_CHARGE,r=this.data.symbolId,s=y.snake.socket.CS_CHARGE.fromObject({symbolId:r});ge.send(t,s)}onRequestChargeInfo(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_CHARGE);r==y.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CHARGE",s),this.rechargeData=s,this.setDepositData(s))}async setDepositData(t){let r=await He.walletClient.getChainId(),s=Number(t.chainId);try{if(r!==s&&!await He.switchChain(s)){await He.addChain(s)&&this.setDepositData(t);return}let a=await He.getBalance2(this.data.tokenAddress),l=this.data.decimals,u=ps(a,l);this.tf_rest.text=`${Qe.truncateToTwoDecimalPlaces(Number(u))}`,console.log("tokenBalance",a)}catch(a){console.log("切换失败，请手动切换",a)}}async onbtnConfirm(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(2e3,this,()=>{this.btnLock=!1}),this.testRechargeCodeInput();let t=Number(this.tf_rest.text),r=Number(this.rechargeCode.text),s=await He.walletClient.getChainId(),a=Number(this.data.chainId);try{if(s!==a&&!await He.switchChain(a)){await He.addChain(a)&&this.onbtnConfirm();return}}catch(p){console.log("切换失败，请手动切换",p)}if(!r){gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(53),Fe.YES);return}if(t<r){gi.AlertByType(Fe.BASEALERTVIEW,D.getLanguage(54),Fe.YES);return}lt.showLoadingByInfo();let l=JSON.parse(this.rechargeData.abi);console.log(l);let u={amount:r,token:this.data.tokenAddress,rechargeAddress:this.rechargeData.depositAddress,decimals:this.data.decimals,abi:l};await aC.rechargeToken(u)&&(this.getRestCoin(this.data.tokenAddress),G.rechargeEnd=!0)}testRechargeCodeInput(){let t=this.rechargeCode.text;if(t){if(!/^[0-9]+\.?[0-9]*$/.test(t)){let s="";for(let a=0;a<t.length;a++){let l=t.charAt(a);(l>="0"&&l<="9"||l==="."&&s.indexOf(".")===-1)&&(s+=l)}this.rechargeCode.text=s}t.length>1&&t.startsWith("0")&&t.charAt(1)!=="."&&(this.rechargeCode.text=t.substring(1))}}async getRestCoin(t){try{let r=await He.getBalance2(t);if(r){let s=ps(r,this.data.decimals);this.tf_rest.text=`${Qe.truncateToTwoDecimalPlaces(Number(s))}`}lt.hideLoading()}catch(r){console.error("获取余额失败",r),lt.hideLoading()}}onDisable(){v.off("msg_"+y.snake.socket.MessageType.MSG_CHARGE,this,this.onRequestChargeInfo),this.rechargeCode.off(Laya.Event.INPUT,this,this.testRechargeCodeInput)}};Oy=U([XN("O0v8EHpMT0-wWgB8t3D14A")],Oy);var Fy=class extends Laya.Dialog{};var{regClass:JN}=Laya,Py=class extends Fy{constructor(){super()}onEnable(){this.list_champ.visible=!1}onDisable(){}};Py=U([JN("y0xiZs-qSDWRAXN_oE10yg")],Py);var Uy=class extends Laya.Box{};var{regClass:eO}=Laya,zy=class extends Uy{constructor(){super()}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}let t=JSON.parse(e),{createTime:r,coinType:s,amount:a}=t,{date:l,time:u}=ht.formatDayAndTime(r);this.tf_time.text=`${l}  ${u}`,this.img_coinType.skin=ie.getMoneyIcon(s),this.tf_amounte.text=`${a}`,this.tf_token.text=`${t.symbol}`,this.tf_operate.text=qn.isDepositRecord?"Deposit":"Withdraw";let m=this.parent?.parent?.array?.indexOf(e)??0;this.img_bg.visible=m%2===1}};zy=U([eO("tbS8gPlOTWuMdXb9g8wZAg")],zy);var Hy=class extends Laya.Dialog{};var{regClass:tO}=Laya,jy=class extends Hy{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.btnLock=!1;this.withDrawData=null;this.withdrawText=null}onEnable(){v.on("msg_"+y.snake.socket.MessageType.MSG_WITHDRAW,this,this.onRequestWithdraw),v.on("msg_"+y.snake.socket.MessageType.MSG_WITHDRAW_INFO,this,this.onRequestChargeInfo),v.on(k.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),this.btn_withdraw.on(Laya.Event.CLICK,this,this.onBtnWithdraw),this.withdrawText=this.withdrawCode.prompt,this.withdrawCode.on(Laya.Event.INPUT,this,this.testRechargeCodeInput)}setOpenData(t){this.data=t,this.showWithDrawData(t),this.requestChargeInfo(),console.log("data",t)}async showWithDrawData(t){let r=He.walletAddress;this.tf_address.text=Qe.shortenString(r,6,4),this.tf_token.text=t.symbol,this.tf_web.text=t.chainName,this.tf_appAmount.text=`${t.balance}`}requestChargeInfo(){let t=y.snake.socket.MessageType.MSG_WITHDRAW_INFO,r=this.data.symbolId,s=y.snake.socket.CS_WITHDRAW_INFO.fromObject({symbolId:r});ge.send(t,s)}async onBtnWithdraw(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(2e3,this,()=>{this.btnLock=!1}),this.testWithdrawCodeInput();let t=Number(this.withdrawCode.text);if(!t){Ce.notice(D.getLanguage(63));return}let r=Number(this.tf_appAmount.text);if(t>r){Ce.notice(D.getLanguage(64));return}if(t>this.withDrawData.maxLimit){Ce.notice(D.getLanguage(65));return}else if(t<this.withDrawData.minLimit){Ce.notice(D.getLanguage(66));return}lt.showLoadingByInfo();let s=y.snake.socket.MessageType.MSG_WITHDRAW,a=y.snake.socket.CS_WITHDRAW.fromObject({symbolId:this.data.symbolId,amount:t});ge.send(s,a)}onRequestWithdraw(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_WITHDRAW);if(r==y.snake.socket.MessageCode.SYS_NORMAL){Ce.notice(D.getLanguage(67)),console.log("SC_WITHDRAW MsgBody",s);let a=JSON.parse(s.resp);console.log("resp",a),lt.hideLoading(),v.event(k.UPDATE_ASSETS)}}onRechargewithdrawCodeInput(){let t=Number(this.withdrawCode.text),r=Qe.isNumber(this.withdrawCode.text);(t<0||!r)&&this.withdrawCode.text!==this.withdrawText&&(this.withdrawCode.text="0");let s=Qe.multiplyWithPrecision(this.withDrawData.feeRate/100,t);this.tf_arrive.text=`${Qe.subtractWithPrecision(t,Number(s))}`}testWithdrawCodeInput(){let t=this.withdrawCode.text;if(t&&!/^[0-9]+\.?[0-9]*$/.test(t)){this.withdrawCode.text="",Ce.notice(D.getLanguage(1802));return}}onRequestChargeInfo(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_WITHDRAW_INFO);if(r==y.snake.socket.MessageCode.SYS_NORMAL){console.log("CS_WITHDRAW_INFO",s);let a=JSON.parse(s.resp);this.withDrawData=a,console.log("resp",a),this.showWithdrawData()}}showWithdrawData(){this.tf_fee.text=`${this.withDrawData.feeRate}%`}onDisable(){v.off("msg_"+y.snake.socket.MessageType.MSG_WITHDRAW,this,this.onRequestWithdraw),v.off("msg_"+y.snake.socket.MessageType.MSG_WITHDRAW_INFO,this,this.onRequestChargeInfo),v.off(k.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),this.withdrawCode.off(Laya.Event.INPUT,this,this.onRechargewithdrawCodeInput),this.btn_withdraw.off(Laya.Event.CLICK,this,this.onBtnWithdraw)}onTokenBalanceUpdate(t){if(!this.data||!t)return;let r=t.find(s=>s.symbolId===this.data.symbolId);r&&(this.data.balance=r.balance,this.tf_appAmount.text=`${r.balance}`)}testRechargeCodeInput(){let t=this.withdrawCode.text;if(t){if(!/^[0-9]+\.?[0-9]*$/.test(t)){let l="";for(let u=0;u<t.length;u++){let m=t.charAt(u);(m>="0"&&m<="9"||m==="."&&l.indexOf(".")===-1)&&(l+=m)}this.withdrawCode.text=l}t.length>1&&t.startsWith("0")&&t.charAt(1)!=="."&&(this.withdrawCode.text=t.substring(1))}let r=Number(this.withdrawCode.text),s=Qe.multiplyWithPrecision(this.withDrawData.feeRate/100,r);this.tf_arrive.text=`${Qe.subtractWithPrecision(r,Number(s))}`}};jy=U([tO("-G96ocIBRFacV4Xozyt5NQ")],jy);var Gy=class extends Laya.Scene{};var{regClass:iO}=Laya,Vy=class extends Gy{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1;this.shopId=1}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){t&&t.length>0?(this.type=t[0],t[1]!=null&&(this.selectItemId=t[1]),this.onClickTab(this.type)):(this.selectItemId=1,this.onClickTab(this.selectItemId)),this.initBagInfo()}onEnable(){this.snakeList.visible=!1,this.propList.visible=!1;for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);xt.startJellyScaleAnimation(this.tf_tittle),v.on("msg_"+y.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),v.on(k.EVENT_ITEM_UPDATE,this,this.onPackInfo),v.on(k.EVENT_SNAKE_UPDATE,this,this.onSnakePackInfo),v.on(k.UPDATE_BAG_INFO,this,this.initBagInfo)}setTab(t){for(let r=1;r<3;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}async onClickTab(t){this.currTab!=t&&(this.type=t,this.setTab(t),t==1?(this.box_nft.visible=!0,this.box_prop.visible=!1,this.tf_nft.stroke=5,this.tf_nft.fontSize=32,this.tf_props.stroke=0,this.tf_props.fontSize=25):t==2&&(this.box_prop.visible=!0,this.box_nft.visible=!1,this.tf_nft.stroke=0,this.tf_nft.fontSize=25,this.tf_props.stroke=5,this.tf_props.fontSize=32))}setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}onTabClick(t){let s="res/shop/img_Button_1.png",a="res/shop/img_btlv.png",l="res/shop/img_bt1_2.png",u="res/shop/img_Button_4.png",m="#009815";for(let h=1;h<3;h++){let f=this[`btn${h}`],g=f.getChildByName("tf_tit"),b=t===h,_=h===0;this.selectItemId=t,f.skin=_?b?s:l:b?a:u,g.stroke=b?5:0,g.strokeColor=m}}onBuySuccess(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_SHOP_BUY);r==y.snake.socket.MessageCode.SYS_NORMAL?s&&s.items&&Laya.Scene.open("dialog/TipsDialog",!1,{content:"购买成功!",autoClose:!0}):Laya.Scene.open("dialog/TipsDialog",!1,{content:"购买失败，请稍后重试",autoClose:!0})}onRecruit(t=1){let r=y.snake.socket.MessageType.MSG_SHOP_BUY;var s=X.m_dicSnakes.get(this.shopId);if(console.log(s),this.shopId){let a=y.snake.socket.CS_SHOP_BUY.fromObject({id:this.shopId});ge.send(r,a)}}initBagInfo(){let t=y.snake.socket.MessageType.MSG_PACK_INFO;ge.send(t)}onPackInfo(){var t=ui.getAllKnapsackItems();let r=t.filter(s=>s.id!==10001&&s.num>0);this.propList.array=r,this.propList.visible=!0}onSnakePackInfo(){let t=ui.getAllSnakeItems();console.log("蛇信息返回处理",t);let r={id:-999,isShopEntry:!0};this.snakeList.array=[...t,r],this.snakeList.visible=!0}onDisable(){for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab);v.off("msg_"+y.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),v.off(k.EVENT_ITEM_UPDATE,this,this.onPackInfo),v.off(k.EVENT_SNAKE_UPDATE,this,this.onSnakePackInfo),v.off(k.UPDATE_BAG_INFO,this,this.initBagInfo)}};Vy=U([iO("fGHujQp_QpOG4OhbMXNszQ")],Vy);var Wy=class extends Laya.Box{};var{regClass:rO}=Laya,Ky=class extends Wy{constructor(){super()}onEnable(){this.btn_upgrade.on(Laya.Event.CLICK,this,this.toUpGradeDialog),this.btn_battle.on(Laya.Event.CLICK,this,this.onBattleClick)}onDisable(){this.btn_upgrade.off(Laya.Event.CLICK,this,this.toUpGradeDialog),this.btn_battle.off(Laya.Event.CLICK,this,this.onBattleClick),this.box_emply.off(Laya.Event.CLICK,this,this.toShopScene),v.off("msg_"+y.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback)}set dataSource(t){if(super.dataSource=t,!t)return;if(t.isShopEntry){this.box_emply.visible=!0,this.box_nft.visible=!1,this.box_emply.hasListener(Laya.Event.CLICK)||this.box_emply.on(Laya.Event.CLICK,this,this.toShopScene);return}this.box_emply.visible=!1,this.box_nft.visible=!0,this.nftItem=t;let r=X.m_dicItems.get(this.nftItem.id);this.tf_name.text=D.getLanguage(r.name),this.img_icon.skin=ie.getSnakeIcon(this.nftItem.skin||101);let s=!this.nftItem.upgrade;this.btn_upgrade.visible=!s;let a=G.playerDto.snakeId==this.nftItem.unkey;this.Img_battleState.visible=a,this.btn_battle.visible=!a,s?this.btn_battle.x=58:(this.btn_battle.x=6,this.btn_upgrade.x=a?58:111)}toUpGradeDialog(){Be.intance.openModule(M.SnakeUpgradeDialog,this.nftItem)}onBattleClick(){if(!this.nftItem)return;let t=y.snake.socket.MessageType.MSG_SNAKE_FIGHT;v.off("msg_"+y.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback),v.on("msg_"+y.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback);let r=y.snake.socket.CS_SNAKE_FIGHT.fromObject({unkey:this.nftItem.unkey});ge.send(t,r)}onBattleCallback(t,r){if(r==y.snake.socket.MessageCode.SYS_NORMAL){var s=de.getMsgBody(t,y.snake.socket.CS_SNAKE_FIGHT);console.log(s),Ce.notice(D.getLanguage(75)),G.playerDto.snakeId=s.unkey,v.off("msg_"+y.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback);let a=y.snake.socket.MessageType.MSG_PACK_INFO;ge.send(a)}}toShopScene(){ze.setCurrentScene(he.M_SCENE_SHOP)}};Ky=U([rO("GyHLyzIaRva11NfPDbiBfw")],Ky);var $y=class extends Laya.Box{};var{regClass:nO}=Laya,Yy=class extends $y{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toShowBuyDialog)}set dataSource(t){if(super.dataSource=t,this.propItem=t,!this.propItem){this.visible=!1;return}this.visible=!0;let r=X.m_dicItems.get(this.propItem.id);if(!r){this.visible=!1;return}this.updateUI(r)}updateUI(t){this.tf_name.text=D.getLanguage(t.name),this.tf_num.text=`x${this.propItem.num}`,this.img_icon.skin=ie.getItemIcon(t.icon)}toShowBuyDialog(){console.log("点击事件")}};Yy=U([nO("TqPcmjhTSVerr9-YhbASXA")],Yy);var qy=class extends Laya.Dialog{};var{regClass:sO}=Laya,Qy=class extends qy{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:1},200,Laya.Ease.linearIn),this.btn_upgrade.on(Laya.Event.CLICK,this,this.onUpdateClick),v.on("msg_"+y.snake.socket.MessageType.MSG_SNAKE_UPGRADE,this,this.onUpgradeCallback)}setOpenData(t){t&&(this.nftItem=t,this.initProp())}initProp(){let t=[1201,1202,1203,1204,1205],r=!0;for(let s=0;s<t.length;s++){let a=X.m_dicItems.get(t[s]);if(a){let l=this["item_"+s];if(l){let u=l.getChildByName("tf_name"),m=l.getChildByName("img_icon"),p=ui.getKnapsackItemCount(t[s]);u.text=`${D.getLanguage(a.name)} x${p}`,m.skin=ie.getItemIcon(a.icon),console.log("num",p),p<1&&(r=!1)}}}}onUpdateClick(){this.close();let t=y.snake.socket.MessageType.MSG_SNAKE_UPGRADE,r=y.snake.socket.CS_SNAKE_UPGRADE.fromObject({unkey:this.nftItem.unkey});ge.send(t,r)}onUpgradeCallback(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_SNAKE_UPGRADE);if(r==y.snake.socket.MessageCode.SYS_NORMAL){Ke.playSoundByName(Ke.soundName_snakeUpdate),s&&(v.event(k.UPDATE_BAG_INFO),Be.intance.openModule(M.SnakeUpgradeSuccessDialog,s));let a=y.snake.socket.MessageType.MSG_PACK_INFO;ge.send(a)}}onDisable(){v.off("msg_"+y.snake.socket.MessageType.MSG_SNAKE_UPGRADE,this,this.onUpgradeCallback)}};Qy=U([sO("K6ZKHKhaTvCBmQcFdrneHQ")],Qy);var Zy=class extends Laya.Dialog{};var{regClass:aO}=Laya,Xy=class extends Zy{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.alertTitle.text=D.getLanguage(74),this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:1},200,Laya.Ease.linearIn),this.initProp()}setOpenData(t){if(t){let r=t.snake.attr;for(let s=0;s<r.length;s++)if(r[s]){let a=r[s].split(","),l=a[0],u=a[1];this["upgradeAwarditem_"+l].getChildByName("tf_award").text=u}}}onDisable(){}initProp(){xt.startElasticPopupAnimation(this.img_di,150,1.1,100,.95,80),this.box_snake.source="gameIcon/spine/snakeUpgrade/img_shengj.json",this.box_snake.on(Laya.Event.COMPLETE,this,this.onAnimationComplete),Laya.timer.once(1300,this,this.onAnimationComplete)}onAnimationComplete(){this.box_snake.off(Laya.Event.COMPLETE,this,this.onAnimationComplete),this.box_snake.animationName==="animation1"&&this.box_snake.play("animation2",!0)}};Xy=U([aO("OjPqAteAQeOIAjHFO-yihA")],Xy);var Jy=class extends Laya.Dialog{};var{regClass:oO}=Laya,e_=class extends Jy{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0;this.m_iLayerType=te.M_TOP}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(t){let r=t.target;r.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):(r.name=="cancleBtn"||r.name=="btn_close")&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(t){t&&(this._okHandler=t.okHandler,this._cancelHandler=t.cancelHandler,this.destroyDoCancel=t.destroyDoCancel,t.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):t.flag&Fe.YES&&!(t.flag&Fe.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="OK"):t.flag&Fe.NO&&!(t.flag&Fe.YES)?this.okBtn.visible=!1:t.flag&Fe.YES&&t.flag&Fe.NO,t.data&&this.alertDesc&&(t.data instanceof Array?(this.alertTitle.text=t.data[0],this.alertDesc.text=t.data[1]):this.alertDesc.text=t.data),t.initHandler&&t.initHandler.runWith(this))}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(t){this.canClose&&super.close(t)}};e_=U([oO("8G0DBvD7T_2CVupdfQXrBw")],e_);var t_=class extends Laya.Dialog{};var{regClass:lO}=Laya,i_=class extends t_{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.headId=0;this.headNew=0}setOpenData(t){t&&t.length>0&&(this.headId=t[0],this.headNew=t[0])}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onChangeClubHead),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.btn_close.on(Laya.Event.CLICK,this,this.close),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(t){if(t!=-1){let r=this.list_head.selectedItem;this.headNew=r}}createHeadList(){let t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];this.list_head.array=t,this.list_head.visible=!0;let r=-1,s=0;for(let a of t){if(a==this.headId){r=s;break}s++}this.list_head.selectedIndex=r}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=D.getUILang("Upload picture"),s=D.getUILang("Select Image"),a=D.getUILang("Save changes");openUploadPic(this,t,r,s,a)}async openPicEnd(t,r){if(r.length>500){let s=await Vt.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);s&&(G.headId=s.imgUrl,console.log(s.imgUrl))}}onChangeClubHead(){if(this.headId===this.headNew){this.close();return}this.sendChangeInfoRequest(this.headNew)}sendChangeInfoRequest(t){let r=y.snake.socket.MessageType.MSG_CLUB_CHANGE_INFO,s=y.snake.socket.CS_CLUB_CHANGE_INFO.fromObject({type:1,value:t.toString()});ge.send(r,s),this.close()}onDisable(){this.btn_confirm.off(Laya.Event.CLICK,this,this.onChangeClubHead),this.btn_custom.off(Laya.Event.CLICK,this,this.onBtnChangePic)}};i_=U([lO("HBE3SmMAQpGmkMrOFuAVQQ")],i_);var r_=class extends Laya.Box{};var{regClass:cO}=Laya,n_=class extends r_{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.playerDto=t,this.playerDto&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(t){parseInt(t)>0?this.img_head.skin=ie.getClubIcon(t):this.setImage(t)}async setCurrentOutPut(){if(!this.playerDto)return;let t=this.playerDto.icon;parseInt(t)>0?this.img_head.skin=ie.getClubIcon(t):this.setImage(t)}setImage(t){this.clearImage();var r=this;Laya.loader.load(t,Laya.Handler.create(this,()=>{r.destroyed||(this.img_head.skin=t)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(t=!0){this.clearImage(),super.destroy(t)}toDetail(){!this.playerDto||this.playerDto.needTip}};n_=U([cO("koRLgfbMQ127yxRmmRHybg")],n_);var s_=class extends Laya.Box{};var{regClass:uO}=Laya,a_=class extends s_{set dataSource(t){super.dataSource=t,this.headItem=t,this.headItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let t=this.headItem;this.clubBigIcon.headSkin=t}onChange(t){}};a_=U([uO("uklnPq1ZQmOhfyUyF_6oWQ")],a_);var o_=class extends Laya.Box{};var{regClass:pO}=Laya,l_=class extends o_{set dataSource(t){if(super.dataSource=t,t){console.log("ClubPropListItem",t);let r=X.m_dicItems.get(t.id);this.img_icon.skin=ie.getItemIcon(r.icon),this.tf_data.text=`${D.getLanguage(r.name)}X${t.count}`}}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};l_=U([pO("S77mjsF1RLqmnYyXCTSkVw")],l_);var c_=class extends Laya.Box{};var{regClass:mO}=Laya,u_=class extends c_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.on(Laya.Event.CLICK,this,this.onItemClick)}onDisable(){this.off(Laya.Event.CLICK,this,this.onItemClick)}onItemClick(){if(this.referralData){let t=[this.referralData.id,this.referralData.endTime,this.referralData.symbolId,this.referralData.cost,this.referralData.map,this.referralData.fruit,this.referralData.bgm];Be.intance.openModule(M.JoinClubRoomDialog,t)}}set dataSource(t){if(!t)return;let r=t.split(",");super.dataSource=t,this.referralData={id:r[0],endTime:r[1],symbolId:r[2],cost:r[3],map:r[4],fruit:r[5],bgm:r[6],playerNum:r[7]},this.tf_roomId.text=this.referralData.id;let s=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=s%2===1,this.updateEndTimeDisplay();let a=dt.getTokenDataBySyId(Number(this.referralData.symbolId));a?this.tf_tickets.text=`${parseFloat(this.referralData.cost)} ${a.symbol}`:this.tf_tickets.text=`${parseFloat(this.referralData.cost)}`,this.tf_playerNum.text=`${r[7]}/3`}updateEndTimeDisplay(){this.referralData&&this.referralData.endTime&&(this.tf_endTime.text=ht.getRestTime(Math.floor(this.referralData.endTime/1e3)))}};u_=U([mO("euaIDdILQNabNW0qaF17nA")],u_);var p_=class extends Laya.Scene{};var VI=class i{constructor(){this.m_clubData=null;this.m_roomData=[];this.m_memberData=[];this.m_communityData=[];this.m_profitRatio=0}static getInstance(){return i._instance||(i._instance=new i),i._instance}setClubData(e){e&&(this.m_clubData=e,e.rooms&&(this.m_roomData=e.rooms),e.members&&(this.m_memberData=e.members),e.community&&(this.m_communityData=e.community))}getClubData(){return this.m_clubData}getRoomData(){return this.m_roomData}setRoomData(e){e&&(this.m_roomData=e)}getMemberData(){return this.m_memberData}setMemberData(e){e&&(this.m_memberData=e)}getCommunityData(){return this.m_communityData}setCommunityData(e){e&&(this.m_communityData=e)}setProfitRatio(e){this.m_profitRatio=e}getProfitRatio(){return this.m_profitRatio}clearClubData(){this.m_clubData=null,this.m_roomData=[],this.m_memberData=[],this.m_communityData=[],this.m_profitRatio=0}updateClubIcon(e){this.m_clubData&&(this.m_clubData.icon=e)}updateClubName(e){this.m_clubData&&(this.m_clubData.name=e)}},Qn=VI.getInstance();var{regClass:hO}=Laya,m_=class extends p_{constructor(){super(...arguments);this.countdownTimer=null;this.roomData=[];this.memberData=[];this.profitData=[];this.roomRefreshTimer=null;this.currentProfitPage=1;this.isLoadingProfits=!1;this.hasMoreProfits=!0;this.profitPageSize=20;this.isEnteringRoom=!1;this.currentMemberPage=1;this.isLoadingMembers=!1;this.hasMoreMembers=!0;this.memberPageSize=20;this.memberTotal=0;this.myMemberData=[];this.currentMyMemberPage=1;this.isLoadingMyMembers=!1;this.hasMoreMyMembers=!0;this.myMemberPageSize=20;this.isSearchMode=!1}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onEnable(){this.clubRoomList.visible=!1,this.memberMyList.visible=!1,this.memberClubList.visible=!1,this.profitList.visible=!1;let t=this.btn_3;t&&(t.getChildByName("tf_tittle").text=D.getLanguage(61));let r=5;for(let a=0;a<r;a++)this["btn_"+a].on(Laya.Event.CLICK,this,this.onTabClick,[a]);this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene);let s=2;for(let a=0;a<s;a++)this["btnMember"+a].on(Laya.Event.CLICK,this,this.onMembersTabClick,[a]);this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_createRoom.on(Laya.Event.CLICK,this,this.onCreateRoom),this.btn_playNow.on(Laya.Event.CLICK,this,this.onGoRoom),v.on("msg_"+y.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),v.on("msg_"+y.snake.socket.MessageType.MSG_CLUB_CHANGE_INFO,this,this.onClubChangeInfoResponse),v.on("msg_"+y.snake.socket.MessageType.MSG_CLUB_ROOM,this,this.onClubRoomResponse),v.on("msg_"+y.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_PROFIT,this,this.onProfitDataResponse),v.on("msg_"+y.snake.socket.MessageType.MSG_CLUB_MEMBER,this,this.onClubMemberResponse),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_MY_PROFIT,this,this.onMyProfitResponse),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_PROFIT_LIST,this,this.onMyMemberListResponse),this.btn_changeName.on(Laya.Event.CLICK,this,this.onBtnChangeNameClick),this.btn_confirm.on(Laya.Event.CLICK,this,this.sendChangeInfoRequest),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeClubHead),this.btn_inviteFriend.on(Laya.Event.CLICK,this,this.onInviteFriend),this.btnSetting.on(Laya.Event.CLICK,this,this.onAddressSearch),this.requestClubInfo(),this.initProfitsList(),dt.getTokenData()?this.startCountdownTimer():this.requestCoinInfo(),this.startRoomRefreshTimer(),this.getMyCommunityProfit(),this.resetMyMemberList(),this.profitList.scrollBar.on(Laya.Event.CHANGE,this,this.onProfitListScroll),this.memberClubList.scrollBar.on(Laya.Event.CHANGE,this,this.onMemberListScroll),this.memberMyList.scrollBar.on(Laya.Event.CHANGE,this,this.onMyMemberListScroll),xt.startJellyScaleAnimation(this.tf_tittle)}setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}onOpened(t){}removeEvent(){for(let s=0;s<5;s++)this["btn_"+s].off(Laya.Event.CLICK,this,this.onTabClick,[s]);let r=2;for(let s=0;s<r;s++)this["btnMember"+s].off(Laya.Event.CLICK,this,this.onMembersTabClick,[s]);this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_createRoom.off(Laya.Event.CLICK,this,this.onCreateRoom),this.btn_playNow.off(Laya.Event.CLICK,this,this.onGoRoom),this.btn_changeName.off(Laya.Event.CLICK,this,this.onBtnChangeNameClick),this.btn_confirm.off(Laya.Event.CLICK,this,this.sendChangeInfoRequest),this.btnSetting.off(Laya.Event.CLICK,this,this.onAddressSearch),v.off("msg_"+y.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),v.off("msg_"+y.snake.socket.MessageType.MSG_CLUB_CHANGE_INFO,this,this.onClubChangeInfoResponse),v.off("msg_"+y.snake.socket.MessageType.MSG_CLUB_ROOM,this,this.onClubRoomResponse),v.off("msg_"+y.snake.socket.MessageType.MSG_REQUEST_PROFIT,this,this.onProfitDataResponse),v.off("msg_"+y.snake.socket.MessageType.MSG_CLUB_MEMBER,this,this.onClubMemberResponse),v.off("msg_"+y.snake.socket.MessageType.MSG_REQUEST_MY_PROFIT,this,this.onMyProfitResponse),v.off("msg_"+y.snake.socket.MessageType.MSG_REQUEST_PROFIT_LIST,this,this.onMyMemberListResponse),Laya.stage.off("MSG_CLUB_INFO",this,this.onClubInfoResponse),this.clearCountdownTimer(),Laya.timer.clear(this,this.requestClubRooms),this.profitList.scrollBar.off(Laya.Event.CHANGE,this,this.onProfitListScroll),this.memberClubList.scrollBar.off(Laya.Event.CHANGE,this,this.onMemberListScroll),this.memberMyList.scrollBar.off(Laya.Event.CHANGE,this,this.onMyMemberListScroll)}startCountdownTimer(){this.clearCountdownTimer(),this.countdownTimer=Laya.timer.loop(1e3,this,this.updateAllCountdowns)}clearCountdownTimer(){this.countdownTimer&&(Laya.timer.clear(this,this.updateAllCountdowns),this.countdownTimer=null)}updateAllCountdowns(){for(let t=0;t<this.clubRoomList.cells.length;t++){let r=this.clubRoomList.cells[t];r&&r.updateEndTimeDisplay()}}onTabClick(t){for(let s=0;s<5;s++){let l=this[`btn_${s}`].getChildByName("tf_tittle"),u=t===s;l.stroke=u?4:0,this["btn_"+s].getChildByName("selectBox1").visible=u,this["btn_"+s].getChildByName("selectBox2").visible=!u}switch(t){case 0:this.box_room.visible=!0,this.box_member.visible=!1,this.box_myProfits.visible=!1,this.box_profile.visible=!1,this.startCountdownTimer(),this.requestClubRooms();break;case 1:this.box_room.visible=!1,this.box_member.visible=!0,this.box_myProfits.visible=!1,this.box_profile.visible=!1,this.clearCountdownTimer();break;case 2:this.box_room.visible=!1,this.box_member.visible=!1,this.box_myProfits.visible=!0,this.box_profile.visible=!1,this.clearCountdownTimer(),this.resetProfitList();break;case 3:this.box_room.visible=!1,this.box_member.visible=!1,this.box_myProfits.visible=!1,this.box_profile.visible=!0,this.clearCountdownTimer();break;default:break}}onMembersTabClick(t){for(let s=0;s<2;s++){let a=this["btnMember"+s],l=t===s;a.getChildByName("tab1").visible=l,a.getChildByName("tab2").visible=!l;let u=a.getChildByName("tf_tit");u.stroke=l?5:0,u.fontSize=l?26:24,u.color=l?"#ffffff":"#7bc6fb"}switch(t){case 0:this.myCommuityBox.visible=!0,this.clubBox.visible=!1;break;case 1:this.myCommuityBox.visible=!1,this.clubBox.visible=!0,this.resetMemberList();break}}onCopy(){let t=this.tf_clubId.text;doCopy(t),Ce.notice(D.getLanguage(19))}initMemberList(){}initProfitsList(){this.profitData=[],this.profitList.array=this.profitData,this.profitList.visible=!0,this.resetProfitList()}resetProfitList(){this.currentProfitPage=1,this.isLoadingProfits=!1,this.hasMoreProfits=!0,this.profitData=[],this.getProfitData()}onProfitListScroll(){if(this.isLoadingProfits||!this.hasMoreProfits)return;let t=this.profitList.scrollBar,r=t.value,s=t.max;s>0&&r>=s*.8&&this.loadNextProfitPage()}loadNextProfitPage(){this.isLoadingProfits=!0,this.currentProfitPage++,this.getProfitData()}getProfitData(){this.isLoadingProfits=!0;let t=new y.snake.socket.CS_REQUEST_PROFIT({pageNo:this.currentProfitPage,pageSize:this.profitPageSize}),r=y.snake.socket.MessageType.MSG_REQUEST_PROFIT;ge.send(r,t)}onProfitDataResponse(t,r){if(this.isLoadingProfits=!1,r==y.snake.socket.MessageCode.SYS_NORMAL){let s=de.getMsgBody(t,y.snake.socket.SC_REQUEST_PROFIT);if(this.tf_totalIncome.text=`${s.profitTotal} USDT`,this.tf_totalIncomeToday.text=`${s.profitToday} USDT`,this.tf_battles.text=`${s.total}`,s&&s.profits&&s.profits.length>0){let a=this.profitData.length,l=s.profits.map((u,m)=>u+","+(a+m));this.profitData=this.profitData.concat(l),this.profitList.array=this.profitData}else this.hasMoreProfits=!1}else this.currentProfitPage>1&&this.currentProfitPage--}initProfile(){this.tf_createerName.text=G.playerDto.name}onCreateRoom(){Be.intance.openModule(M.CreateClubRoomDialog)}onDisable(){this.removeEvent(),this.clearRoomRefreshTimer(),this.clearCountdownTimer(),Qn.clearClubData(),Laya.timer.clear(this,()=>{this.isEnteringRoom=!1})}requestClubInfo(){let t=new y.snake.socket.CS_CLUB_INFO,r=Tt.getNodePoint();t.point=r;let s=y.snake.socket.MessageType.MSG_CLUB_INFO;ge.send(s,t)}onClubInfoResponse(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_CLUB_INFO);if(r==y.snake.socket.MessageCode.SYS_NORMAL){this.clubData=s,this.roomData=s.rooms,this.community=s.community;let a=s.myRate;Qn.setClubData(s),this.updateClubInfo(s),this.resetMemberList(),G.clubCreater=s.createrId,s.createrId==G.playerDto.pid?(this.btn_createRoom.visible=!0,this.btn_changeHead.visible=!0,this.btn_playNow.y=225,this.btn_inviteFriend.y=335,this.btn_changeName.visible=!0):(this.btn_createRoom.visible=!1,this.btn_changeHead.visible=!1,this.btn_playNow.y=114,this.btn_inviteFriend.y=224,this.btn_changeName.visible=!1),this.btn_playNow.visible=!0,this.btn_inviteFriend.visible=!0}}updateClubInfo(t){let r=X.getClubById(t.type);G.clubType=t.type,this.tf_clubId.text=`${t.clubId}`,r&&(this.tf_clubType.text=D.getLanguage(r.name)),this.tf_createerName.text=`${t.creater}`,this.tf_createName.text=`${ht.getYearMonthDat(t.createTime,"/")}`,this.tf_clubName.text=`${t.name}`,this.clubIcon.headSkin=t.icon}onChangeClubHead(){Be.intance.openModule(M.ChangeClubHeadDialog,[parseInt(this.clubData.icon)])}onInviteFriend(){let t=G.playerDto.code,r=ee.getInviteUrl(t);doCopy(r),Ce.notice(D.getLanguage(19))}onClubChangeInfoResponse(t,r){var s=de.getMsgBody(t,y.snake.socket.CS_CLUB_CHANGE_INFO);r==y.snake.socket.MessageCode.SYS_NORMAL&&(s.type==1?this.clubData&&(this.clubIcon.headSkin=s.value,Qn.updateClubIcon(s.value)):s.type==2&&this.clubData&&(this.tf_clubName.text=s.value,this.nameBox.visible=!0,this.changeNameBox.visible=!1,Qn.updateClubName(s.value)))}startRoomRefreshTimer(){this.clearRoomRefreshTimer(),this.roomRefreshTimer=Laya.timer.loop(1e4,this,this.requestClubRooms),this.requestClubRooms()}clearRoomRefreshTimer(){this.roomRefreshTimer&&(Laya.timer.clear(this,this.requestClubRooms),this.roomRefreshTimer=null)}requestClubRooms(){let t=y.snake.socket.MessageType.MSG_CLUB_ROOM;ge.send(t)}onClubRoomResponse(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_CLUB_ROOM);r==y.snake.socket.MessageCode.SYS_NORMAL&&(this.roomData=s.rooms,Qn.setRoomData(s.rooms),this.clubRoomList.array=this.roomData,this.tf_roomCount.text=`${this.roomData.length}`,this.clubRoomList.visible=!0,this.tf_battleCount.text=`${s.dailyFight}`,this.tf_battles.text=`${s.totalFight}`)}onRequestInfo(t,r){r==y.snake.socket.MessageCode.SYS_NORMAL&&this.startCountdownTimer()}requestCoinInfo(){let t=y.snake.socket.MessageType.MSG_QUERY_TOKEN;ge.send(t)}onGoRoom(){if(this.isEnteringRoom)return;if(!this.roomData||this.roomData.length===0){Ce.notice(D.getLanguage(57));return}let t=dt.getTokenData();if(!t||t.length===0){Ce.notice(D.getLanguage(57));return}let r=this.roomData.filter(u=>{let m=u.split(","),p=parseInt(m[2]),h=parseFloat(m[3]),f=t.find(g=>g.symbolId===p);return f&&f.balance>=h});if(r.length===0){Ce.notice(D.getLanguage(68));return}this.isEnteringRoom=!0;let s=Math.floor(Math.random()*r.length),l=r[s].split(",");Be.intance.openModule(M.JoinClubRoomDialog,l),Laya.timer.once(3e3,this,()=>{this.isEnteringRoom=!1})}onBtnChangeNameClick(){this.nameBox.visible=!1,this.changeNameBox.visible=!0,this.input_name.text=this.tf_clubName.text}sendChangeInfoRequest(){let t=y.snake.socket.MessageType.MSG_CLUB_CHANGE_INFO,r=y.snake.socket.CS_CLUB_CHANGE_INFO.fromObject({type:2,value:this.input_name.text});ge.send(t,r)}resetMemberList(){this.currentMemberPage=1,this.isLoadingMembers=!1,this.hasMoreMembers=!0,this.memberData=[],this.requestClubMembers()}onMemberListScroll(){if(this.isLoadingMembers||!this.hasMoreMembers)return;let t=this.memberClubList.scrollBar,r=t.value,s=t.max;s>0&&r>=s*.8&&this.loadNextMemberPage()}loadNextMemberPage(){this.isLoadingMembers=!0,this.currentMemberPage++,this.requestClubMembers()}requestClubMembers(){if(!this.clubData||!this.clubData.clubId)return;this.isLoadingMembers=!0;let t=new y.snake.socket.CS_CLUB_MEMBER({pageNo:this.currentMemberPage,pageSize:this.memberPageSize,clubIb:this.clubData.clubId}),r=y.snake.socket.MessageType.MSG_CLUB_MEMBER;ge.send(r,t)}getMyCommunityProfit(){let t=y.snake.socket.MessageType.MSG_REQUEST_MY_PROFIT;ge.send(t)}onClubMemberResponse(t,r){if(this.isLoadingMembers=!1,r==y.snake.socket.MessageCode.SYS_NORMAL){let s=de.getMsgBody(t,y.snake.socket.SC_CLUB_MEMBER);if(s.total!==void 0&&(this.memberTotal=s.total,this.tf_memberNum.text=`${this.memberTotal}`),s&&s.members&&s.members.length>0){let a=this.memberData.length,l=s.members.map((u,m)=>u+","+(a+m));this.memberData=this.memberData.concat(l),this.memberClubList.array=this.memberData,this.memberClubList.visible=!0}else this.hasMoreMembers=!1}else this.currentMemberPage>1&&this.currentMemberPage--}onMyProfitResponse(t,r){if(r==y.snake.socket.MessageCode.SYS_NORMAL){let s=de.getMsgBody(t,y.snake.socket.SC_MY_PROFIT);if(Qn.setProfitRatio(s.profitRatio),this.tf_Commission){let l=(s.profitRatio*100).toFixed(2);l.endsWith("0")&&(l=l.slice(0,-1),l.endsWith(".0")&&(l=l.slice(0,-2))),this.tf_Commission.text=l+"%"}this.tf_numberOfFriend&&(this.tf_numberOfFriend.text=s.inviteCount.toString())}}resetMyMemberList(){this.currentMyMemberPage=1,this.isLoadingMyMembers=!1,this.hasMoreMyMembers=!0,this.myMemberData=[],this.isSearchMode=!1,this.getMemberMyList()}onMyMemberListScroll(){if(this.isLoadingMyMembers||!this.hasMoreMyMembers)return;let t=this.memberMyList.scrollBar,r=t.value,s=t.max;s>0&&r>=s*.8&&this.loadNextMyMemberPage()}loadNextMyMemberPage(){this.isSearchMode=!1,this.isLoadingMyMembers=!0,this.currentMyMemberPage++,this.getMemberMyList()}getMemberMyList(){this.isLoadingMyMembers=!0;let t=new y.snake.socket.CS_REQUEST_PROFIT_LIST({pageNo:this.currentMyMemberPage,pageSize:this.myMemberPageSize}),r=y.snake.socket.MessageType.MSG_REQUEST_PROFIT_LIST;ge.send(r,t)}onMyMemberListResponse(t,r){if(this.isLoadingMyMembers=!1,r==y.snake.socket.MessageCode.SYS_NORMAL){let s=de.getMsgBody(t,y.snake.socket.SC_REQUEST_PROFIT_LIST);if(s&&s.community&&s.community.length>0){this.currentMyMemberPage===1&&this.isSearchMode&&(this.myMemberData=[]);let a=this.myMemberData.length,l=s.community.map((u,m)=>u+","+(a+m));this.myMemberData=this.myMemberData.concat(l),this.memberMyList.array=this.myMemberData,this.memberMyList.visible=!0,this.currentMyMemberPage===1&&this.isSearchMode&&(this.isSearchMode=!1)}else this.hasMoreMyMembers=!1,this.isSearchMode&&(this.myMemberData=[],this.memberMyList.array=this.myMemberData,this.isSearchMode=!1)}else this.currentMyMemberPage>1&&this.currentMyMemberPage--,this.isSearchMode&&(this.isSearchMode=!1)}onAddressSearch(){let t=this.input_address.text;this.currentMyMemberPage=1,this.isLoadingMyMembers=!1,this.hasMoreMyMembers=!0,this.myMemberData=[],this.isSearchMode=!0,this.searchMemberByAddress(t)}searchMemberByAddress(t){this.isLoadingMyMembers=!0;let r;t===""?r=new y.snake.socket.CS_REQUEST_PROFIT_LIST({pageNo:this.currentMyMemberPage,pageSize:this.myMemberPageSize}):r=new y.snake.socket.CS_REQUEST_PROFIT_LIST({pageNo:this.currentMyMemberPage,pageSize:this.myMemberPageSize,childAddress:t});let s=y.snake.socket.MessageType.MSG_REQUEST_PROFIT_LIST;ge.send(s,r)}};m_=U([hO("ONHYlGbrToqo_uNbZuaf3A")],m_);var h_=class extends Laya.Box{};var{regClass:dO}=Laya,d_=class extends h_{set dataSource(t){super.dataSource=t,t&&(this.tf_data.text=D.getLanguage(t.name))}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};d_=U([dO("lH_RWSpjQtuPd9t0m34t5A")],d_);var f_=class extends Laya.Dialog{};var{regClass:fO}=Laya,g_=class extends f_{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.clubType=1;this.isCreating=!1}onEnable(){this.btn_create.on(Laya.Event.CLICK,this,this.onCreate),v.on("msg_"+y.snake.socket.MessageType.MSG_CREATE_CLUB,this,this.onCreateSuccess),this.list_clubType.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_clubType.selectHandler=new Laya.Handler(this,this.handleSelectToken),this.ClubBox.on(Laya.Event.CLICK,this,this.showSelecePanel),this.btn_hideBox.on(Laya.Event.CLICK,this,this.onCloseTab),this.initCreateClubData()}initCreateClubData(){let t=X.m_dicClub.values;this.list_clubType.array=t,this.list_clubType.selectedIndex=0}onCreate(){if(this.isCreating)return;this.isCreating=!0;let t=y.snake.socket.MessageType.MSG_CREATE_CLUB,r=y.snake.socket.CS_CREATE_CLUB.fromObject({name:"CLUB",icon:"1",type:this.clubType});ge.send(t,r),Laya.timer.once(3e3,this,()=>{this.isCreating=!1})}onCreateSuccess(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_CREATE_CLUB);r==y.snake.socket.MessageCode.SYS_NORMAL?(Ce.notice(D.getLanguage(79)),console.log("SC_WITHDRAW MsgBody",s),G.playerDto.club=`${s.clubId}`,ze.setCurrentScene(he.M_SCENE_CLUB,s),this.close()):r==y.snake.socket.MessageCode.NOT_ENOUGH_TOKEN?Ce.notice(D.getLanguage(72)):Ce.notice(D.getLanguage(80))}onTokenItemRender(t,r){t&&t.onChange&&t.onChange(this.list_clubType.selectedIndex==r)}handleSelectToken(t){if(t!=-1){let r=this.list_clubType.selectedItem;this.tf_clubType.text=D.getLanguage(r.name),this.tf_maxMember.text=`${r.maxMember}`,this.tf_MaxRoom.text=`${r.maxRoom}`,this.tf_referrCommission.text=`${r.ownerCommission}`,this.tf_referralCommission.text=`${r.referalCommission}`,this.tf_points.text=`${r.fightReward}`,this.tf_dayCard.text=`${r.dailyRoom}`,this.tf_weekCard.text=`${r.weeklyRoom}`,this.tf_price.text=`${r.price} USDT`,this.clubType=r.id}this.img_club_pad.visible=!1,this.btn_hideBox.visible=!1}showSelecePanel(){this.img_club_pad.visible=!0,this.btn_hideBox.visible=!0}onCloseTab(){this.img_club_pad.visible&&(this.btn_hideBox.visible=!1,this.img_club_pad.visible=!1)}onDisable(){this.btn_create.off(Laya.Event.CLICK,this,this.onCreate),v.off("msg_"+y.snake.socket.MessageType.MSG_CREATE_CLUB,this,this.onCreateSuccess),this.ClubBox.off(Laya.Event.CLICK,this,this.showSelecePanel),this.btn_hideBox.off(Laya.Event.CLICK,this,this.onCloseTab),Laya.timer.clear(this,()=>{this.isCreating=!1})}};g_=U([fO("7vh7JPfDTn2jn2qa3Tzn4A")],g_);var b_=class extends Laya.Dialog{};var{regClass:gO}=Laya,y_=class extends b_{constructor(){super();this.roomMoney=0;this.isCreating=!1;this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.btn_create.on(Laya.Event.CLICK,this,this.onCreate),this.btn_shop.on(Laya.Event.CLICK,this,this.onGoShop),this.CardBox.on(Laya.Event.CLICK,this,this.showSelecePanel),this.TokenBox.on(Laya.Event.CLICK,this,this.showTokenPanel),this.btn_hideBox.on(Laya.Event.CLICK,this,this.onCloseTab),this.btn_tip.on(Laya.Event.CLICK,this,this.onShowTip),this.ticketInput.on(Laya.Event.INPUT,this,this.testTicketMoneyInput),v.on(`msg_${y.snake.socket.MessageType.MSG_QUERY_TOKEN}`,this,this.onRequestInfo),v.on(k.EVENT_ITEM_UPDATE,this,this.onPackInfo),v.on("msg_"+y.snake.socket.MessageType.MSG_CREATE_CUSTOM_ROOM,this,this.onCreateRoomResponse),this.list_item.renderHandler=Laya.Handler.create(this,this.onTimeItemRender,null,!1),this.list_item.selectHandler=new Laya.Handler(this,this.handleSelectTime),this.list_token.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_token.selectHandler=new Laya.Handler(this,this.handleSelectToken),this.initBagInfo(),this.img_tel.visible=!1,this.btn_hideBox.visible=!1,dt.getTokenData()?this.showTokenArray(dt.getTokenData()):this.requestCoinInfo()}onTimeItemRender(t,r){t&&t.onChange&&(t.onChange(this.list_item.selectedIndex==r),this.img_card_pad.visible=!1,this.btn_hideBox.visible=!1)}handleSelectTime(t){if(t!=-1){let r=this.list_item.selectedItem,s=X.m_dicItems.get(r.id);switch(this.img_card.skin=ie.getItemIcon(s.icon),this.tf_cardName.text=`${D.getLanguage(s.name)} X${r.count}`,s.id){case 1101:this.tf_maxTime.text="1 Hour";break;case 1102:this.tf_maxTime.text="1 Day";break;case 1103:this.tf_maxTime.text="1 Week";break;default:this.tf_cardName.text=`${D.getLanguage(s.name)} X${r.count}`}console.log(r)}}onCreate(){if(this.isCreating)return;if(this.roomMoney<=0){Ce.notice(D.getLanguage(58));return}this.isCreating=!0;let t=this.list_item.selectedItem.id,r=Tt.getNodePoint(),s=new y.snake.socket.CS_CREATE_CUSTOM_ROOM({type:2,ticketId:this.list_token.selectedItem,ticketValue:this.roomMoney,map:"default",fruit:"apple",bgm:"bgm1",point:r,itemId:t}),a=y.snake.socket.MessageType.MSG_CREATE_CUSTOM_ROOM;ge.send(a,s),Laya.timer.once(3e3,this,()=>{this.isCreating=!1})}onGoShop(){this.close(),ze.setCurrentScene(he.M_SCENE_SHOP,[2])}initBagInfo(){let t=y.snake.socket.MessageType.MSG_PACK_INFO;ge.send(t)}onPackInfo(){let t=[1101,1102,1103],r=[],s=!1;t.forEach(l=>{r.push({id:l,count:0})}),ui.getAllKnapsackItems().forEach(l=>{let u=t.indexOf(l.id);u!==-1&&(r[u].count=l.num||0)});let a=r.filter(l=>l.count>0);s=a.length>0,s?(this.btn_create.disabled=!1,this.tf_itemNo.visible=!1,this.btn_shop.visible=!1,this.CardBox.visible=!0):(this.btn_create.disabled=!0,this.tf_itemNo.visible=!0,this.btn_shop.visible=!0,this.CardBox.visible=!1),this.list_item.array=a,this.showDefaultCard(a)}onCreateRoomResponse(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_CREATE_CUSTOM_ROOM);if(r===y.snake.socket.MessageCode.SYS_NORMAL){Ce.notice(D.getLanguage(56));let a=y.snake.socket.MessageType.MSG_CLUB_ROOM;ge.send(a),this.close()}else r===y.snake.socket.MessageCode.CREATE_ROOM_MAX&&Ce.notice(D.getLanguage(59))}onDisable(){this.btn_create.off(Laya.Event.CLICK,this,this.onCreate),this.btn_shop.off(Laya.Event.CLICK,this,this.onGoShop),this.btn_hideBox.off(Laya.Event.CLICK,this,this.onCloseTab),this.btn_tip.off(Laya.Event.CLICK,this,this.onShowTip),v.off(k.EVENT_ITEM_UPDATE,this,this.onPackInfo),v.off("msg_"+y.snake.socket.MessageType.MSG_CREATE_CUSTOM_ROOM,this,this.onCreateRoomResponse),Laya.timer.clear(this,()=>{this.isCreating=!1})}onCloseTab(){this.img_card_pad.visible&&(this.btn_hideBox.visible=!1,this.img_card_pad.visible=!1),this.img_tel.visible&&(this.btn_hideBox.visible=!1,this.img_tel.visible=!1),this.img_token_pad.visible&&(this.btn_hideBox.visible=!1,this.img_token_pad.visible=!1)}showSelecePanel(){this.img_card_pad.visible=!0,this.btn_hideBox.visible=!0}showTokenPanel(){this.img_token_pad.visible=!0,this.btn_hideBox.visible=!0}showDefaultCard(t){let r=t.findIndex(s=>s.count>0);r!==-1&&(this.list_item.selectedIndex=r,this.handleSelectTime(r))}onShowTip(){this.img_tel.visible=!0,this.btn_hideBox.visible=!0}requestCoinInfo(){let t=y.snake.socket.MessageType.MSG_QUERY_TOKEN;ge.send(t)}onRequestInfo(t,r){let s=de.getMsgBody(t,y.snake.socket.SC_QUERY_TOKEN);if(r==y.snake.socket.MessageCode.SYS_NORMAL){let a=Qe.parseTokenData(s.token);this.showTokenArray(a)}}showTokenArray(t){let r=[];t.forEach(s=>{r.push(s.symbolId)}),this.list_token.array=r,this.list_token.selectedIndex=0}onTokenItemRender(t,r){t&&t.onChange&&t.onChange(this.list_token.selectedIndex==r)}handleSelectToken(t){if(t!=-1){let r=dt.getTokenData()[t];r&&(this.tf_tokenName.text=r.symbol)}this.img_token_pad.visible=!1,this.btn_hideBox.visible=!1}testTicketMoneyInput(){let t=this.ticketInput.text;if(t){if(!/^[0-9]+\.?[0-9]*$/.test(t)){let s="";for(let a=0;a<t.length;a++){let l=t.charAt(a);(l>="0"&&l<="9"||l==="."&&s.indexOf(".")===-1)&&(s+=l)}this.ticketInput.text=s}t.length>1&&t.startsWith("0")&&t.charAt(1)!=="."&&(this.ticketInput.text=t.substring(1)),this.roomMoney=Number(this.ticketInput.text)}}};y_=U([gO("Trnh8WLVQT-6W4h3KUeNgA")],y_);var __=class extends Laya.Dialog{};var nm=class{constructor(){this.connectAddr="ws://175.27.154.72:10001";this.groupApplyList=[];this.groupData=[];this.watch=[]}};var WI=class i{static getInstance(){return i._instance==null&&(i._instance=new i),i._instance}constructor(){this.init()}init(){v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,this,this.onRequestRoomAddr)}onRequestRoomAddr(e,t){var r=de.getMsgBody(e,y.snake.socket.SC_REQUEST_ROOM_ADDR);if(t==y.snake.socket.MessageCode.SYS_NORMAL){var s=r.addr;if(console.log("onRequestRoomAddr: "+s),s){var a=s.lastIndexOf("#");a!=-1&&(s=s.slice(0,a))}var l=Ee.roomDto;l||(l=new nm),l.connectAddr=s,Ee.roomDto=l,Be.intance.closeAll(),ze.isCloseAll=!1,Be.intance.openModule(M.MatchReadyView),ze.setCurrentScene(he.M_SCENE_SNAKE_MATCH)}else t==y.snake.socket.MessageCode.NOT_ENOUGH_TOKEN&&Ce.notice(D.getLanguage(72))}goPvpArenaScene(e,t,r,s,a){this.closePvpMatchScene(),xe.matchType=xe.MATCH_TYPE_PVP,xe.arenaType=xe.ARENA_TYPE_PVP;var l=new nm;l.pvpRoomIndex=s,l.pvpTokenIndex=a,Ee.roomDto=l;var u=y.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR;let m=Tt.getNodePoint();var p=y.snake.socket.CS_REQUEST_ROOM_ADDR.fromObject({type:1,ticketId:t,ticketValue:r,roomType:e,point:m});ge.send(u,p)}goCLubArenaScene(e,t,r,s){this.closePvpMatchScene(),xe.matchType=xe.MATCH_TYPE_PVP,xe.arenaType=xe.ARENA_TYPE_JULEBU;var a=y.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR;let l=Tt.getNodePoint();var u=y.snake.socket.CS_REQUEST_ROOM_ADDR.fromObject({ticketId:t,ticketValue:r,roomType:e,point:"1_00",roomNo:s});ge.send(a,u)}async goAiArenaScene(){this.closePveMatchScene(),Be.intance.closeAll(),ze.isCloseAll=!1,Be.intance.openModule(M.MatchReadyView),xe.matchType=xe.MATCH_TYPE_PVE,xe.arenaType=xe.ARENA_TYPE_PVE;var e=new tm;e.members=[];var t=se.getInstance().spawnRandomPlayerObject("",!0,!0);e.members.push(t),e.myPlayerObject=t;var r=await se.getInstance().spawnSnakes();e.members=e.members.concat(r),e.item=_t.spawnFoods(),e.matchType=xe.MATCH_TYPE_PVE,e.remainderCd=Q.snake.battleCd,Ee.matchDto=e,ar.sendAiEnter(),ze.setCurrentScene(he.M_SCENE_AI_ARENA)}closePvpMatchScene(){ze.currSceneName==he.M_SCENE_SNAKE_MATCH&&(ze.m_sceneCurrent.close(),ze.m_sceneCurrent=null)}closePveMatchScene(){ze.currSceneName==he.M_SCENE_AI_ARENA&&(ze.m_sceneCurrent.close(),ze.m_sceneCurrent=null)}},Ws=WI.getInstance();var{regClass:bO}=Laya,x_=class extends __{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.initEvents(),this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:.7},200,Laya.Ease.linearIn)}onDisable(){this.removeEvents()}initEvents(){this.btn_font.on(Laya.Event.CLICK,this,this.onEnterMatch),this.backLayer.on(Laya.Event.CLICK,this,this.closeDialog)}removeEvents(){this.btn_font.off(Laya.Event.CLICK,this,this.onEnterMatch),this.backLayer.off(Laya.Event.CLICK,this,this.closeDialog)}onEnterMatch(){if(!this.roomInfo)return;let t=parseInt(this.roomInfo[2]),r=parseFloat(this.roomInfo[3]),s=this.roomInfo[0];Ws.goCLubArenaScene(7,t,r,s)}requestCoinInfo(){let t=y.snake.socket.MessageType.MSG_QUERY_TOKEN;ge.send(t)}setOpenData(t){if(t){console.log(t),this.roomInfo=t;let r=parseInt(t[2]),s=parseFloat(t[3]);this.img_coin.skin=ie.getCurrencyIcon(r),this.tf_number.text=String(s);let a=dt.getTokenData().find(l=>l.symbolId==r);dt.getTokenData()&&a&&(this.tf_coin.text=a.symbol)}}closeDialog(){this.close()}};x_=U([bO("ONfjH328RXe-7G3_K7WK1Q")],x_);var v_=class extends Laya.Box{};var{regClass:yO}=Laya,I_=class extends v_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}onDisable(){}set dataSource(t){if(!t)return;super.dataSource=t,this.referralData=t,console.log("MemberClubListItem",t);let r=t.split(",");this.tf_name.text=r[3],this.PlayerIcon.setHeadSkinAndRoldId(r[2],r[0]),this.tf_memberLevel.text=r[4],this.tf_match.text=r[5],this.img_flag.skin=ie.getCountryIcon(r[1]);let s=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=s%2===1}};I_=U([yO("3U7la1usRgKQbfApkNfiHQ")],I_);var k_=class extends Laya.Box{};var{regClass:_O}=Laya,S_=class extends k_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btnSetting.on(Laya.Event.CLICK,this,this.onOpenSettingDialog),v.on(k.EVENT_CHANGE_CLUB_RATE,this,this.onUpdateRate)}onDisable(){v.off(k.EVENT_CHANGE_CLUB_RATE,this,this.onUpdateRate)}set dataSource(t){if(!t)return;super.dataSource=t;let r=t.split(",");this.referralData=r,console.log("MemberMyListItem",t),this.img_flag.skin=ie.getCountryIcon(r[1]),this.tf_name.text=r[3],this.PlayerIcon.setHeadSkinAndRoldId(r[2],r[0]),this.tf_memberLevel.text=r[4],this.tf_referrals.text=r[5];let s=Qe.multiplyWithPrecision(r[6],100);this.tf_rate.text=`${s}%`;let a=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=a%2===1}onOpenSettingDialog(){Be.intance.openModule(M.SettingRateDialog,this.referralData)}onUpdateRate(t){if(t&&this.referralData&&t.roleId===this.referralData[0]){this.referralData[6]=t.rateValue;let r=t.rateValue*100,s=Math.round(r*1e3)/1e3,a=parseFloat(s.toFixed(3)).toString();this.tf_rate.text=`${a}%`}}};S_=U([_O("_-8v_mmLR1CuN--HtoX-Uw")],S_);var w_=class extends Laya.Box{};var{regClass:xO}=Laya,E_=class extends w_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}onDisable(){}set dataSource(e){if(!e)return;let t=e.split(",");super.dataSource=e,this.img_flag.skin=ie.getCountryIcon(t[1]),this.tf_name.text=`${t[3]}`,this.PlayerIcon.setHeadSkinAndRoldId(t[2],t[0]);let r=parseInt(t[4]);if(dt.getTokenData()){let b=dt.getTokenData().find(_=>_.symbolId==r);this.tf_income.text=`${t[5]} ${b.symbol}`}this.tf_rate.text=`${t[6]}`;let s=t.length>7?parseInt(t[7]):0;this.img_bg.visible=s%2===1;let a=t[0],l=parseInt(a),u=new Date(String(l).length>10?l:l*1e3),m=String(u.getMonth()+1).padStart(2,"0"),p=String(u.getDate()).padStart(2,"0"),h=String(u.getHours()).padStart(2,"0"),f=String(u.getMinutes()).padStart(2,"0"),g=String(u.getSeconds()).padStart(2,"0");this.tf_time.text=`${m}/${p} ${h}:${f}:${g}`}};E_=U([xO("gevXZPT3TWCi4DUrM__uOg")],E_);var L_=class extends Laya.Dialog{};var{regClass:vO}=Laya,T_=class extends L_{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.addL=1;this.maxValue=5;this.minValue=15}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_ok.on(Laya.Event.CLICK,this,this.onComfirm),this.btn_close.on(Laya.Event.CLICK,this,this.close),v.on("msg_"+y.snake.socket.MessageType.MSG_SET_COMMISSION,this,this.onSetCommissionResponse)}setOpenData(t){if(this.data=t,!t)return;let r=t[6];this.PlayerIcon.headSkin=t[2];let s=Qn.getProfitRatio();this.maxValue=parseFloat((s*100).toFixed(3)),this.addL=parseFloat(Qe.multiplyWithPrecision(parseFloat(r),100)),this.minValue=this.addL;let a=this.addL%1===0?this.addL.toFixed(0):this.addL.toFixed(1);this.tf_rateNum.text=`${a} %`,console.log("data",t);let l=t[3];this.tf_msg.text=D.getLanguage(77,l,a),this.tf_tip1.text=D.getLanguage(76,a,this.maxValue),this.tf_tip2.text=D.getLanguage(78)}onComfirm(){let t=y.snake.socket.MessageType.MSG_SET_COMMISSION,r=Number(Qe.divideWithPrecision(this.addL,100)),s=y.snake.socket.CS_SET_COMMISION.fromObject({roleId:this.data[0],rate:r});ge.send(t,s)}onSetCommissionResponse(t,r){v.off("msg_"+y.snake.socket.MessageType.MSG_SET_COMMISSION,this,this.onSetCommissionResponse);var s=de.getMsgBody(t,y.snake.socket.CS_SET_COMMISION);if(r==y.snake.socket.MessageCode.SYS_NORMAL){let a={roleId:this.data[0],rateValue:s.rate};v.event(k.EVENT_CHANGE_CLUB_RATE,a),this.close()}}handleClickBtn(t){switch(t){case this.btn_reduce:this.addL>this.minValue&&(this.addL=parseFloat((this.addL-.1).toFixed(1))),this.setItemNum();break;case this.btn_plus:this.addL<this.maxValue&&(this.addL=parseFloat((this.addL+.1).toFixed(1))),this.setItemNum();break}}setItemNum(){let t=this.addL%1===0?this.addL.toFixed(0):this.addL.toFixed(1);this.tf_rateNum.text=`${t} %`}onDisable(){this.btn_ok.off(Laya.Event.CLICK,this,this.onComfirm),this.btn_close.off(Laya.Event.CLICK,this,this.close),v.off("msg_"+y.snake.socket.MessageType.MSG_SET_COMMISSION,this,this.onSetCommissionResponse)}};T_=U([vO("T4HZSfZ-Ry6DwwvmwW29RA")],T_);var A_=class extends Laya.Dialog{};var{regClass:IO}=Laya,C_=class extends A_{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.dialogType=0}setOpenData(t){t&&t.length>0&&(this.dialogType=t[0])}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.btn_close.on(Laya.Event.CLICK,this,this.close),v.on("msg_"+y.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(t){if(t!=-1){let r=this.list_head.selectedItem;G.headId=r.id,this.playerIcon.headSkin=G.headId}}createHeadList(){let t=X.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let r=-1,s=0;this.playerIcon.headSkin=G.headId;for(let a of t.values){if(a.id==G.headId){r=s;break}s++}this.list_head.selectedIndex=r}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=D.getUILang("Upload picture"),s=D.getUILang("Select Image"),a=D.getUILang("Save changes");openUploadPic(this,t,r,s,a)}async openPicEnd(t,r){if(r.length>500){let s=await Vt.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);s&&(G.headId=s.imgUrl,t.playerIcon.headSkin=s.imgUrl,console.log(s.imgUrl))}}onRegister(){let t=G.headId;this.dialogType===1?this.sendChangeInfoRequest(t):v.event(k.EVENT_MODIFY_HEAD,[t]),this.close()}sendChangeInfoRequest(t){let r=y.snake.socket.MessageType.MSG_CHANGE_INFO,s=y.snake.socket.CS_CHANGE_INFO.fromObject({type:1,value:t.toString()});ge.send(r,s),G.headId=t}onChangeInfoResponse(t,r){var s=de.getMsgBody(t,y.snake.socket.CS_CHANGE_INFO);r==y.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CHANGE_INFO",s),G.playerDto.icon=s.value,v.event(k.ROLE_INFO_CHANGE),this.close())}onDisable(){v.off("msg_"+y.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),this.btn_confirm.off(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.off(Laya.Event.CLICK,this,this.onBtnChangePic)}};C_=U([IO("BmtPy79ySCyg4IuEQC4zsQ")],C_);var M_=class extends Laya.ComboBox{};var{regClass:kO}=Laya,R_=class extends M_{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e)}onEnable(){this.list=this.comboList,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1)}set dataSource(e){super.dataSource=e;var t=e;if(t){this.list.repeatY=t.length,this.list.width=this.width;var r=[];t.forEach(s=>{s instanceof Array?r.push(s[1]):r.push(s)}),this.labels=r.join(","),console.log("comboData.length: "+t.length,this.labels)}}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),r=t.y+this._button.height;r=r+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?r:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,r),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};R_=U([kO("AqEOSlrnRkmI9RUPCJUVqQ")],R_);var B_=class extends Laya.List{};var{regClass:SO}=Laya,D_=class extends B_{};D_=U([SO("7DDHp602Rs6dL3bjAu4ArA")],D_);var N_=class extends Laya.Box{};var{regClass:wO}=Laya,O_=class extends N_{addEvent(){}set dataSource(t){super.dataSource=t;var r=t;r&&(this.addEvent(),t.id==999?(this.img_icon.visible=!1,this.tf_name.text="All"):(this.img_icon.visible=!0,this.img_icon.skin=ie.getCountryIcon(r.icon),this.tf_name.text=D.getLanguage(r.name)))}onChange(t){t?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};O_=U([wO("LJ8PUf7kRCGUr4eT8Mhy3g")],O_);var F_=class extends Laya.Dialog{};var Rl=class extends Laya.Event{constructor(){super()}};Rl.INIT_CREATELOGIN_EVENT="CreateLoginEvent:INIT_CREATELOGIN_EVENT";var{regClass:EO}=Laya,P_=class extends F_{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_PANEL;this.m_iPositionType=te.CENTER}onEnable(){v.on(Rl.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),v.on("msg_"+y.snake.socket.MessageType.MSG_USER_REGISTER,this,this.onWaitPlayerInfoBack),v.on(k.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),v.on(k.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack),this.box_change.on(Laya.Event.CLICK,this,this.onChangeHead),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),v.on("msg_"+y.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),this.btn_register.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_register]),this.initCountry(),this.initCreateLoginView(),this.initReferral(),Xe.sendCustumEvent(23)}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,r){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=r,this.onHideCountry())}handleClickBtn(t){switch(t){case this.btn_register:this.onRegister();break;case this.btn_setting:Be.intance.openModule(M.GameSettingLanguageDialog);break}}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,r){t.onChange(this.list_country.selectedIndex==r)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let r=this.list_country.selectedItem;G.countryId=r.id,this.img_flag.skin=ie.getCountryIcon(r.icon),this.tf_country.text=D.getLanguage(r.name)}}createCountryList(){let t=X.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let r=-1,s=0;for(let a of t.values){if(a.id==G.countryId){r=s;break}s++}this.list_country.selectedIndex=r}onChangeHeadBack(t,r){this.input_name.text=t,G.headId=r,this.playerIcon.headSkin=r}onChangeModifyHead(t){G.headId=t,this.playerIcon.headSkin=t}onChangeHead(){Be.intance.openModule(M.ChangeHeadDialog,[0])}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=D.getUILang("Upload picture"),s=D.getUILang("Select Image"),a=D.getUILang("Save changes");openUploadPic(this,t,r,s,a)}async openPicEnd(t,r){if(r.length>500){let s=await Vt.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);s&&(G.headId=s.imgUrl,t.playerIcon.headSkin=s.imgUrl,console.log(s.imgUrl))}}async onRegister(){let t=this.input_name.text,r=1;if(t=t.trim(),t==""){Ce.notice(D.getLanguage(25));return}if(/[,\\<>{}[\]~!@#$%^&*()+=|;:'"`]/.test(t)){Ce.notice(D.getLanguage(610102));return}if(G.countryId==-1){Ce.notice(D.getLanguage(33));return}let a=new URL(window.location.href),u=new URLSearchParams(a.search).get("referral");if(u||(u=new URLSearchParams(a.hash.substring(1)).get("referral")),!u){let p=window.location.href.match(/referral=([^&]+)/);p&&p[1]&&(u=p[1])}console.log("referral: ",u),await He.createAcccount(t,r,G.headId.toString(),G.countryId,u)}onWaitPlayerInfoBack(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_USER_REGISTER);if(r==y.snake.socket.MessageCode.SYS_NORMAL&&s){lt.hideLoading();var a=s.roleInfo,l=new es;l.pid=a.roleId,l.name=a.userName,l.lv=a.lv,l.icon=a.icon,l.exp=a.score,l.code=a.code,l.country=a.country,l.invite=a.invite,l.snakeId=a.snakeId,l.skinId=a.skin,l.createTime=a.createTime,l.maxKill=a.maxKill,l.maxAlive=a.maxAlive,l.score=a.score,l.club=a.club,G.playerDto=l,this.close(),v.event(k.EVENT_ENTER_MAIN)}}requestInvitePlayerInfo(t){let r=y.snake.socket.MessageType.MSG_REQUEST_INFO,s=y.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t,type:2});ge.send(r,s)}initReferral(){let t=new URL(window.location.href),s=new URLSearchParams(t.search).get("referral");if(s)this.requestInvitePlayerInfo(s);else{let l=new URLSearchParams(t.hash.substring(1)).get("referral");if(l)this.requestInvitePlayerInfo(l);else{let m=window.location.href.match(/referral=([^&]+)/);m&&m[1]?this.requestInvitePlayerInfo(m[1]):this.box_code.visible=!1}}}initCreateLoginView(){}onDisable(){this.removeEvent()}removeEvent(){v.off(Rl.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),v.off(k.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),v.off(k.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack),v.off("msg_"+y.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse)}onRequestInfo(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_REQUEST_INFO);if(r==y.snake.socket.MessageCode.SYS_NORMAL){this.box_code.visible=!0;var a=s.roleInfo;this.tf_inviteName.text=Qe.truncateUnicodeString(a.userName,9),this.playerIcon2.headSkin=a.icon,a.club?(this.requestClubInfo(a.club),this.clubBox.visible=!0,this.nameBox.x=320):(this.clubBox.visible=!1,this.nameBox.x=89),console.log("玩家信息",a)}}requestClubInfo(t){let r=Tt.getNodePoint(),s=y.snake.socket.CS_CLUB_INFO.fromObject({point:r,clubId:Number(t)}),a=y.snake.socket.MessageType.MSG_CLUB_INFO;ge.send(a,s)}onClubInfoResponse(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_CLUB_INFO);r==y.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CLUB_INFO",s),this.img_clubIcon.skin=ie.getClubIcon(s.icon),this.tf_clubName.text=Qe.truncateUnicodeString(s.name,7))}};P_=U([EO("1K2SyFxcQY-12SasSSRXyQ")],P_);var U_=class extends Laya.Dialog{};var{regClass:LO}=Laya,z_=class extends U_{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.currentPage=1;this.isLoading=!1;this.hasMoreData=!0;this.pageSize=20;this.inviteTotal=0}onEnable(){this.list_rental.visible=!1,v.on("msg_"+y.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onRequestInfo),this.list_rental.scrollBar.on(Laya.Event.END,this,this.onScrollEnd),this.currentPage=1,this.isLoading=!1,this.hasMoreData=!0,this.initContainer()}initContainer(){if(this.isLoading||!this.hasMoreData)return;this.isLoading=!0;let t=G.playerDto;var r=y.snake.socket.MessageType.MSG_INVITE_LIST,s=y.snake.socket.CS_INVITE_LIST.fromObject({pageNo:this.currentPage,pageSize:this.pageSize});ge.send(r,s)}onScrollEnd(){var t=this.list_rental.scrollBar;t.value>=t.max-t.height&&this.hasMoreData&&!this.isLoading&&(this.currentPage++,this.initContainer())}onRequestInfo(t,r){this.isLoading=!1;var s=de.getMsgBody(t,y.snake.socket.SC_INVITE_LIST);if(r==y.snake.socket.MessageCode.SYS_NORMAL){var a=s.info;if(this.inviteTotal=s.inviteCount||0,this.currentPage==1)this.list_rental.array=a;else{var l=this.list_rental.array||[];this.list_rental.array=l.concat(a)}this.list_rental.visible=!0,this.hasMoreData=this.list_rental.array.length<this.inviteTotal}}onDisable(){v.off("msg_"+y.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onRequestInfo),this.list_rental&&this.list_rental.scrollBar&&this.list_rental.scrollBar.off(Laya.Event.END,this,this.onScrollEnd)}};z_=U([LO("ULWdMgcOTD-Y9ATVEVTfpg")],z_);var H_=class extends Laya.Box{};var{regClass:TO}=Laya,j_=class extends H_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}set dataSource(t){if(!t)return;super.dataSource=t,this.referralData=t;let[r,s,,a,l,u]=t.split(","),m={headId:r,nickName:s,country:Number(a),battle:l,online:u};this.tf_name.text=m.nickName,this.playerIcon.headSkin=m.headId;let p=X.m_dicCountry.get(m.country);p&&(this.img_country.skin=ie.getCountryIcon(p.id),this.tf_country.text=Qe.truncateString(D.getLanguage(p.name),9)),this.tf_battle.text=m.battle;let h=m.online==="0";this.tf_online.text=h?"online":ht.formatTimeAgoFromTimestamp(Number(m.online)),this.tf_online.color=h?"#12f801":"#ffffff"}onBtn12(){this.referralData.remNum>0&&Be.intance.openModule(M.ReferralL2Dialog,this.referralData)}};j_=U([TO("UE9rYjENQbOU-0ZTLzyHGw")],j_);var G_=class extends Laya.Dialog{};var{regClass:AO}=Laya,V_=class extends G_{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){Ke.playSoundByName(Ke.soundName32)}onDisable(){}};V_=U([AO("szfg-Zt_RRWZ_nHMppjUMA")],V_);var W_=class extends Laya.Box{};var{regClass:CO}=Laya,K_=class extends W_{set dataSource(e){super.dataSource=e;var t=e;t&&(this.img_icon.skin="res/role/img_icon_"+t[0]+".png",this.tf_name.text=D.getUILang(t[1]),this.tf_num.text=t[2])}};K_=U([CO("WJ5TDeRBSkC9yMqJ72B0Ow")],K_);var $_=class extends Laya.Box{};var{regClass:MO}=Laya,Y_=class extends $_{set dataSource(t){super.dataSource=t,this.headItem=t,this.headItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let t=this.headItem.id;this.playerIcon.headSkin=t}onChange(t){}};Y_=U([MO("AwN_JFPwQsKswm1N53Bmkg")],Y_);var q_=class extends Laya.Dialog{};var{regClass:RO}=Laya,Q_=class extends q_{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),v.on("msg_"+y.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse)}setOpenData(t){this.requestPlayerInfo(t),console.log("data",t)}onRequestInfo(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_REQUEST_INFO);r==y.snake.socket.MessageCode.SYS_NORMAL&&s.roleInfo&&(this.roleInfo=s.roleInfo,this.updateBasicInfo())}requestPlayerInfo(t){let r=y.snake.socket.MessageType.MSG_REQUEST_INFO,s=y.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t,type:1});ge.send(r,s)}updateBasicInfo(){this.playerIcon.headSkin=this.roleInfo.icon,this.tf_name.text=D.getLanguage(610100,this.roleInfo.userName);let t=this.roleInfo.walletAddr;this.tf_address.text=D.getLanguage(610101,Qe.shortenString(t,6,4)),this.tf_createTime.text=`${ht.formatDateDDMMYYYY(this.roleInfo.createTime)}`;let r=X.m_dicCountry.get(this.roleInfo.country);r&&(this.tf_country.text=D.getLanguage(r.name),this.img_country.skin=ie.getCountryIcon(r.id)),this.tf_kill.text=`${this.roleInfo.maxKill}`,this.tf_level.text=`${this.roleInfo.lv}`,this.tf_totalNum.text=`${this.roleInfo.num}`,this.tf_totalKill.text=`${this.roleInfo.kills}`,this.tf_kill.text=`${this.roleInfo.maxKill}`,this.tf_longTime.text=`<span style="color:#6aeb2b;font-size:46px;">${this.roleInfo.maxAlive}</span><span style="color:#6aeb2b;font-size:32px;vertical-align:bottom;">s</span>`,this.roleInfo.club&&this.requestClubInfo(this.roleInfo.club)}requestClubInfo(t){let r=Tt.getNodePoint(),s=y.snake.socket.CS_CLUB_INFO.fromObject({point:r,clubId:Number(t)}),a=y.snake.socket.MessageType.MSG_CLUB_INFO;ge.send(a,s)}onClubInfoResponse(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_CLUB_INFO);r==y.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CLUB_INFO",s),this.tf_clubName.text=Qe.truncateUnicodeString(s.name,30))}onCopy(){if(this.roleInfo){let t=this.roleInfo.walletAddr;doCopy(t),Ce.notice(D.getLanguage(19))}}onDisable(){v.off("msg_"+y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),v.off("msg_"+y.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),v.offAllCaller(this)}};Q_=U([RO("yxtp0TLDToWkAPu3Npm-3Q")],Q_);var Z_=class extends Laya.Scene{};var{regClass:BO}=Laya,X_=class extends Z_{constructor(t){super()}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onEnable(){this.tf_tittle.text=D.getLanguage(60),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.on(Laya.Event.CLICK,this,this.onCopy2),this.btn_copy3.on(Laya.Event.CLICK,this,this.onCopy3),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.on(Laya.Event.CLICK,this,this.onDetail),this.btn_changeName.on(Laya.Event.CLICK,this,this.onBtnChangeNameClick),this.btn_confirm.on(Laya.Event.CLICK,this,this.sendChangeInfoRequest),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),v.on(k.ROLE_INFO_CHANGE,this,this.updateRoleInfo),v.on("msg_"+y.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),v.on("msg_"+y.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),v.on("msg_"+y.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onInviteListResponse),this.updateRoleInfo(),xt.startJellyScaleAnimation(this.tf_tittle)}updateRoleInfo(){let t="1",r=G.playerDto;if(!r){console.warn("Player data is not available");return}this.requestPlayerInfo(r.pid),this.requestInviteList(),this.updateBasicInfo(r),this.updateReferralInfo(r),this.updateCountryInfo(r.country),this.updateWalletAddress(),this.updatePlayerIcon(r.icon||t),this.showClubInfo()}requestPlayerInfo(t){let r=y.snake.socket.MessageType.MSG_REQUEST_INFO,s=y.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t,type:1});ge.send(r,s)}requestInviteList(){let t=y.snake.socket.MessageType.MSG_INVITE_LIST,r=y.snake.socket.CS_INVITE_LIST.fromObject({pageNo:1,pageSize:1});ge.send(t,r)}updateBasicInfo(t){this.tf_name.text=Qe.fitTextToLabel(t.name,this.tf_name),this.tf_roleId.text=t.pid,this.tf_createTime.text=`${ht.formatDateDDMMYYYY(t.createTime)}`,this.tf_kill.text=`${t.maxKill}`,this.tf_longTime.text=`<span style="color:#6aeb2b;font-size:46px;">${t.maxAlive}</span><span style="color:#6aeb2b;font-size:10px;vertical-align:bottom;">s</span>`,this.tf_level.text=`${t.lv}`}updateReferralInfo(t){t.code?(this.tf_myCode.text=t.code,this.btn_copy2.disabled=!1):(this.tf_myCode.text="",this.btn_copy2.disabled=!0)}updateCountryInfo(t){let r=X.m_dicCountry.get(t);r&&(this.tf_country.text=D.getLanguage(r.name),this.img_country.skin=ie.getCountryIcon(r.id))}updateWalletAddress(){let t=He.walletAddress;this.tf_address.text=Qe.shortenString(t,6,4)}updatePlayerIcon(t){this.playerIcon.headSkin=t}onChangeHead(){Be.intance.openModule(M.ChangeHeadDialog,[1])}onCopy(){let t=He.walletAddress;doCopy(t),Ce.notice(D.getLanguage(19))}onCopy2(){let t=this.tf_myCode.text,r=ee.getInviteUrl(t);doCopy(r),Ce.notice(D.getLanguage(19))}onCopy3(){let t=this.tf_roleId.text;doCopy(t),Ce.notice(D.getLanguage(19))}onRequestInfo(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_REQUEST_INFO);if(r==y.snake.socket.MessageCode.SYS_NORMAL&&s.roleInfo){var a=s.roleInfo;s.roleInfo.roleId==G.playerDto.pid?(this.tf_totalNum.text=`${a.num}`,this.tf_totalKill.text=`${a.kills}`,this.tf_kill.text=`${a.maxKill}`,this.tf_longTime.text=`<span style="color:#6aeb2b;font-size:46px;">${a.maxAlive}</span><span style="color:#6aeb2b;font-size:32px;vertical-align:bottom;">s</span>`,a.invite?this.requestPlayerInfo(a.invite):(this.InviterPlayerIcon.visible=!1,this.tf_myReferee.text="None")):(this.tf_myReferee.text=a.userName,this.InviterPlayerIcon.visible=!0,this.InviterPlayerIcon.headSkin=a.icon)}}onInviteListResponse(t,r){if(r==y.snake.socket.MessageCode.SYS_NORMAL){var s=de.getMsgBody(t,y.snake.socket.SC_INVITE_LIST);s&&(this.ally_num.text=`${s.inviteCount||0}`)}}onDisable(){v.off(k.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.off(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.off(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.off(Laya.Event.CLICK,this,this.onDetail),v.off("msg_"+y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),v.off("msg_"+y.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),v.off("msg_"+y.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),v.off("msg_"+y.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onInviteListResponse),v.offAllCaller(this)}onDetail(){Be.intance.openModule(M.ReferralDialog)}setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}onBtnChangeNameClick(){this.nameBox.visible=!1,this.changeNameBox.visible=!0,this.input_name.text=G.playerDto.name}sendChangeInfoRequest(){let t=y.snake.socket.MessageType.MSG_CHANGE_INFO,r=y.snake.socket.CS_CHANGE_INFO.fromObject({type:2,value:this.input_name.text});ge.send(t,r)}onChangeInfoResponse(t,r){if(r==y.snake.socket.MessageCode.SYS_NORMAL){var s=de.getMsgBody(t,y.snake.socket.CS_CHANGE_INFO);this.nameBox.visible=!0,this.changeNameBox.visible=!1,s.type==1?this.updatePlayerIcon(s.value):(this.tf_name.text=Qe.fitTextToLabel(s.value,this.tf_name),G.playerDto.name=s.value)}else this.nameBox.visible=!0,this.changeNameBox.visible=!1;v.event(k.ROLE_INFO_CHANGE)}showClubInfo(){G.playerDto.club&&(this.requestClubInfo(G.playerDto.club),v.on("msg_"+y.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse))}requestClubInfo(t){let r=Tt.getNodePoint(),s=y.snake.socket.CS_CLUB_INFO.fromObject({point:r,clubId:Number(t)}),a=y.snake.socket.MessageType.MSG_CLUB_INFO;ge.send(a,s)}onClubInfoResponse(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_CLUB_INFO);r==y.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CLUB_INFO",s),this.tf_clubName.text=Qe.truncateUnicodeString(s.name,30))}};X_=U([BO("Ra6hof-DS3-o_gxRa_2t0g")],X_);var J_=class extends Laya.Dialog{};var{regClass:DO}=Laya,e0=class extends J_{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}setOpenData(t){}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.input_name.prompt=D.getLanguage(25),this.initContainer();let t=X.getGeneralValueById(13);this.tf_nameGold.text=t[1],this.img_nameGold.skin=ie.getMoneyIcon(t[0]),console.log(t)}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList(),this.initCountry()}handleSelectHead(t){if(t!=-1){let r=this.list_head.selectedItem;G.headId=r.id,this.playerIcon.headSkin=G.headId}}createHeadList(){let t=X.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let r=-1,s=0;G.headId=G.playerDto.icon,this.playerIcon.headSkin=G.headId,this.input_name.text=G.playerDto.name;for(let a of t.values){if(a.id==G.headId){r=s;break}s++}this.list_head.selectedIndex=r}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,r){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=r,this.onHideCountry())}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,r){t.onChange(this.list_country.selectedIndex==r)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let r=this.list_country.selectedItem;G.countryId=r.id,this.img_flag.skin=ie.getCountryIcon(r.icon),this.tf_country.text=D.getLanguage(r.name)}}createCountryList(){let t=X.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let r=-1,s=0;G.countryId=G.playerDto.country;for(let a of t.values){if(a.id==G.countryId){r=s;break}s++}this.list_country.selectedIndex=r}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=D.getUILang("Upload picture"),s=D.getUILang("Select Image"),a=D.getUILang("Save changes");openUploadPic(this,t,r,s,a)}async openPicEnd(t,r){if(r.length>500){let s=await Vt.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);s&&(G.headId=s.imgUrl,t.playerIcon.headSkin=s.imgUrl,t.list_head.selectedIndex=-1,console.log(s.imgUrl))}}onRegister(){let t=this.input_name.text;if(t=t.trim(),t==""){Ce.notice(D.getLanguage(25));return}if(G.playerDto.name!==t&&G.getConsumeValue(Ze.TYPE_GOLD)<Number(this.tf_nameGold.text)){Ce.notice(ci.get(51));return}G.headId!=-1?this.onModify(t,G.headId,G.countryId):Ce.notice(D.getLanguage(28))}async onModify(t,r,s){if(t==""){Ce.notice(D.getLanguage(25));return}let a=await Qb.updateProfile(t,r.toString(),s);this.destroyed||(a?(G.playerDto=a,this.close(),v.event(k.ROLE_INFO_CHANGE)):Ce.notice(D.getLanguage(29)))}};e0=U([DO("3CibwwHGSPG2Qkeq4rbMag")],e0);var t0=class extends Laya.ComboBox{};var{regClass:NO}=Laya,i0=class extends t0{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e),this._button.labelAlign="center"}onEnable(){this.list=this.comboList}set dataSource(e){super.dataSource=e;var t=e;t&&(this.labels=t.join(","),console.log("comboData.length: "+t.length),this.list.repeatY=t.length,this.list.width=this.width,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1))}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),r=t.y+this._button.height;r=r+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?r:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,r),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};i0=U([NO("Fns-7UW3RpSb95NWnjiDFQ")],i0);var r0=class extends Laya.Dialog{};var{regClass:OO}=Laya,Ks=class extends Laya.Script{constructor(){super();this._isLeft=!1}onAwake(){}get isLeft(){return this._isLeft}set isLeft(t){this._isLeft=t,this.btn_bg=this.owner.getChildByName("btn_bg"),this.label_left=this.owner.getChildByName("label_left"),this.label_right=this.owner.getChildByName("label_right"),this.isLeft?(this.btn_bg.x=4,this.label_left.color="#213343",this.label_right.color="#52a5e0"):(this.btn_bg.x=this.owner.width-this.btn_bg.width-4,this.label_left.color="#52a5e0",this.label_right.color="#213343")}};Ks=U([OO("-1MGS4JRSMOn_RKPUuuV9Q")],Ks);var{regClass:FO}=Laya,n0=class extends r0{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.totalLans=[1,6,7];this.currLan=0}onEnable(){this.musicSwitchButton=this.box_music.getComponent(Ks),this.soundSwitchButton=this.box_sound.getComponent(Ks),this.initContainer(),this.box_music.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_music]),this.box_sound.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_sound]),this.btn_copy.clickHandler=new Laya.Handler(this,this.onClickHandler,[this.btn_copy]),this.btn_referral.on(Laya.Event.CLICK,this,this.onClickHandler,[this.btn_referral]);for(let r=0;r<this.totalLans.length;r++){var t=this.totalLans[r];this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t])}}onClickHandler(t){switch(t){case this.box_music:this.musicSwitchButton.isLeft=!this.musicSwitchButton.isLeft,Ke.switchMusic(this.musicSwitchButton.isLeft);break;case this.box_sound:this.soundSwitchButton.isLeft=!this.soundSwitchButton.isLeft,Ke.switchSound(this.soundSwitchButton.isLeft);break;case this.btn_referral:Be.intance.openModule(M.InviteRewardDialog);break;case this.btn_copy:{let r=this.inviteUrl;doCopy(r),Ce.notice(D.getLanguage(19))}break}}initContainer(){this.musicSwitchButton.isLeft=Ke.m_bPlayMusic,this.soundSwitchButton.isLeft=Ke.m_bPlayeSound,this.currLan=G.m_strLanguage,this.setTab(G.m_strLanguage),this.inviteUrl=Zr.getInviteUrl(),this.label_url.text=Yr.shortStr(this.inviteUrl,50)}onClickTab(t){if(this.currLan==t)return;this.currLan=t,this.setTab(t);let r=D.getLanTypeById(t);D.FGM_SetLanguage(r),Xe.reload()}setTab(t){for(let s=0;s<this.totalLans.length;s++){var r=this.totalLans[s];t==r?(this["btn_"+r].getChildByName("btn_yellowBg").visible=!0,this["btn_"+r].getChildByName("Label").color="#213343"):(this["btn_"+r].getChildByName("btn_yellowBg").visible=!1,this["btn_"+r].getChildByName("Label").color="#52a5e0")}}webCopyString(t){let r=t,s=window.document.createElement("textarea");s.value=r,s.setAttribute("readonly",""),s.style.contain="strict",s.style.position="absolute",s.style.left="-9999px",s.style.fontSize="12pt";let a=window.getSelection(),l=!1;a.rangeCount>0&&(l=a.getRangeAt(0)),window.document.body.appendChild(s),s.select(),s.selectionStart=0,s.selectionEnd=r.length;let u=!1;try{u=window.document.execCommand("copy")}catch(m){console.error(m)}return window.document.body.removeChild(s),l&&(a.removeAllRanges(),a.addRange(l)),u}};n0=U([FO("yJfJZzgZRluE_rgB44yTvg")],n0);var s0=class extends Laya.Dialog{};var{regClass:PO}=Laya,KI=3,oC={selected:["res/main/join/img_tbl1.png","res/main/join/img_tbm1.png","res/main/join/img_tbr1.png"],unselected:["res/main/join/img_tbl2.png","res/main/join/img_tbm2.png","res/main/join/img_tbr2.png"]},lC={selected:"#0c6917",unselected:"#405073"},UO=[2,3,4],a0=class extends s0{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.tabIndex=0;this.tokenIndex=0;this.isEntering=!1}setOpenData(t){this.tabIndex=t[0],this.tokenIndex=t[1],this.initEvents(),this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:.7},200,Laya.Ease.linearIn),dt.getTokenData()?this.onTabClick(this.tabIndex):this.requestCoinInfo()}onDisable(){this.removeEvents(),Laya.timer.clear(this,()=>{this.isEntering=!1})}initEvents(){for(let t=0;t<KI;t++)this[`tab${t}`].on(Laya.Event.CLICK,this,this.onTabClick,[t]);v.on(`msg_${y.snake.socket.MessageType.MSG_QUERY_TOKEN}`,this,this.onRequestInfo),this.img_di1.on(Laya.Event.CLICK,this,this.onCheakTab),this.btn_hideBox.on(Laya.Event.CLICK,this,this.onCloseTab),this.btn_font.on(Laya.Event.CLICK,this,this.onEnterMatch),this.list_token.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_token.selectHandler=new Laya.Handler(this,this.handleSelectToken)}removeEvents(){v.off(`msg_${y.snake.socket.MessageType.MSG_QUERY_TOKEN}`,this,this.onRequestInfo),this.img_di1.off(Laya.Event.CLICK,this,this.onCheakTab),this.btn_hideBox.off(Laya.Event.CLICK,this,this.onCloseTab),this.btn_font.off(Laya.Event.CLICK,this,this.onEnterMatch);for(let t=0;t<KI;t++)this[`tab${t}`].off(Laya.Event.CLICK,this,this.onTabClick);this.list_token.renderHandler=null,this.list_token.selectHandler=null}onEnterMatch(){this.isEntering||this.roomData&&(this.isEntering=!0,Ws.goPvpArenaScene(this.roomData.id,this.roomData.ticketType[this.tokenIndex],this.roomData.ticketAmount[this.tokenIndex],this.tabIndex,this.tokenIndex),Laya.timer.once(3e3,this,()=>{this.isEntering=!1}))}onCheakTab(){dt.getTokenData()&&(this.img_token_pad.visible=!0,this.btn_hideBox.visible=!0)}onCloseTab(){this.img_token_pad.visible&&(this.btn_hideBox.visible=!1,this.img_token_pad.visible=!1)}onTabClick(t){this.tabIndex=t,dt.getTokenData()&&(this.updateTabsAppearance(t),this.roomType=UO[t],this.updateRoomData())}updateTabsAppearance(t){for(let r=0;r<KI;r++){let s=this[`tab${r}`],a=s.getChildByName("tf_tit"),l=t===r;s.skin=l?oC.selected[r]:oC.unselected[r],a.strokeColor=l?lC.selected:lC.unselected}}updateRoomData(){let r=(X.m_dicRoom?.values).filter(s=>s.roomType==this.roomType);r.length!==0&&(this.roomData=r[0],this.list_token.array=this.roomData.ticketType,this.list_token.selectedIndex=0,this.updateTokenInfo(this.tokenIndex))}updateTokenInfo(t){this.tokenIndex=t;let r=dt.getTokenData().find(s=>s.symbolId==this.roomData.ticketType[t]);r&&(this.tf_coin.text=r.symbol,this.img_coin.skin=ie.getCurrencyIcon(this.roomData.ticketType[t]),this.tf_number.text=String(this.roomData.ticketAmount[t]))}onTokenItemRender(t,r){t&&t.onChange&&(t.onChange(this.list_token.selectedIndex==r),this.img_token_pad.visible=!1,this.btn_hideBox.visible=!1)}handleSelectToken(t){t!=-1&&this.updateTokenInfo(t)}requestCoinInfo(){let t=y.snake.socket.MessageType.MSG_QUERY_TOKEN;ge.send(t)}onRequestInfo(t,r){let s=de.getMsgBody(t,y.snake.socket.SC_QUERY_TOKEN);r==y.snake.socket.MessageCode.SYS_NORMAL&&this.onTabClick(this.tabIndex)}};a0=U([PO("NM3GHDnJRD6AnD7XkkQaig")],a0);var o0=class extends Laya.Scene{};var sm=class{static pushNotice(e){v.event(k.EVENT_NEW_NOTICE,e)}static startAutoPush(e=6e4){let t=["测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试","欢迎来到nake游戏，祝您游戏愉快！","新版本V1.2.5已发布，增加了新的游戏玩法和优化了游戏体验。","游戏将于明日凌晨2:00-4:00进行维护，请提前做好准备。","服务器即将进行维护，预计停机时间2小时。"];Laya.timer.loop(e,null,()=>{let r=Math.floor(Math.random()*t.length),s=t[r];this.pushNotice(s)})}static stopAutoPush(){Laya.timer.clearAll(null)}static clearAllNotices(){wn.clearNotices()}};var{regClass:zO}=Laya,Zn=class extends o0{constructor(){super(...arguments);this.isAnimationRunning=!1;this.currIconAni=1}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP,G.playerDto.club==""?this.btn_guild.visible=!1:(this.btn_guild.visible=!0,this.btn_guildCreate.visible=!1),this.initSpineEvent(),this.initMarquee(),this.initBagInfo()}async onOpened(t){this.startBackgroundAnimation(),this.mouseThrough=this.mouseThrough=!0,this.headBox.mouseThrough=!0;let r=this.getChildByName("mcMain");if(r&&(r.mouseThrough=!0),this.updateTopInfo(),this.updateModeBoxLayout(),Xe.sendCustumEvent(34),!!G.playerDto){var a=null;showChatBtn(!0,He.walletAddress,a),Zn.hasTestedNodesThisSession||(console.log("本次游戏启动，测试节点延迟并选择最佳节点"),Zn.hasTestedNodesThisSession=!0,Tt.getBestNode()),this.initNodeList(),Tt.startPingTime(),this.updateModeBoxLayout(),console.log("GlobalDataManager.playerDto.club："+G.playerDto.club),wn.setInMainScene(!0)}}startBtnAni(){this.currIconAni>5&&(this.currIconAni=1),this["spine_"+this.currIconAni].play(0,!1),this["spine_"+this.currIconAni].visible=!0,this.currIconAni++,Laya.timer.once(2e3,this,this.startBtnAni)}updateTopInfo(){let t=G.playerDto;if(!t)return;this.tf_roleName.text=Qe.fitTextToLabel(t.name,this.tf_roleName),t.needTip=!0,this.playerIcon.dataSource=t,this.tf_lv.text=`${t.lv}`;let r=X.getLevelById(t.lv);this.prog_exp.value=t.exp/r.needExp,console.log("playerDto.exp / levelItem.needExp："+t.exp/r.needExp);let s=new Date(G.m_serverTime);console.log("server time toLocaleString："+s.toLocaleString()),console.log("server time offset date："+G.timeZoneOff/60/60)}onGetRoleInfo(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_REQUEST_INFO);if(r==y.snake.socket.MessageCode.SYS_NORMAL){var a=s.roleInfo;console.log("玩家信息",a)}}onEnable(){for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);for(let t=1;t<=4;t++)this[`btn_join_${t}`].on(Laya.Event.CLICK,this,this.joinRoomClick,[t]);this.playerIcon.on(Laya.Event.CLICK,this,this.onClickHead),this.btn_shop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_shop]),this.btn_guild.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_guild]),this.btn_guildCreate.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_guildCreate]),this.btn_backpack.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_backpack]),this.btn_asset.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_asset]),this.btn_mail.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_mail]),this.btn_setting.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_setting]),this.btn_rank.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_rank]),this.btn_node.on(Laya.Event.CLICK,this,this.showNodeBox),this.backLayer.on(Laya.Event.CLICK,this,this.hideNodeBox),this.btn_1.on(Laya.Event.CLICK,this,this.showJoinBox),this.btn_closeJoin.on(Laya.Event.CLICK,this,this.hideJoinBox),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onGetRoleInfo),v.on(k.ROLE_INFO_CHANGE,this,this.updateTopInfo),v.on(k.EVENT_ITEM_UPDATE,this,this.onPackInfo),v.on(k.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),v.on(k.EVENT_CHANGE_NODE,this,this.onChangeNode),v.on(k.EVENT_NEW_NOTICE,this,this.onReceiveNewNotice),v.on(k.EVENT_MARQUEE_EMPTY,this,this.onMarqueeEmpty),v.on(k.EVENT_NEW_NOTICE_ADDED,this,this.onNewNoticeAdded),v.on(k.ROLE_INFO_CHANGE,this,this.updateModeBoxLayout)}onClickTab(t){t==2&&ze.setCurrentScene(he.M_SCENE_MATCH_TOURNAMENT)}onReceiveNewNotice(t){console.log("主界面接收到新公告事件:",t)}initSpineEvent(){let t;t=this.btn_guild,this.initSpineLoadEvent(this.AniSk_guild,this.btn_guild),this.initSpineLoadEvent(this.AniSk_shop,this.btn_shop),this.initSpineLoadEvent(this.AniSk_backpack,this.btn_backpack),this.initSpineLoadEvent(this.AniSk_asset,this.btn_asset),this.initSpineLoadEvent(this.AniSk_rank,this.btn_rank),this.initSpineLoadEvent(this.AniSk_btn1,this.btn_1),this.initSpineLoadEvent(this.AniSk_btn2,this.btn_2)}async onclickBtnHandler(t){switch(Tt.abortAllPingTests(),t){case this.btn_shop:ze.setCurrentScene(he.M_SCENE_SHOP);break;case this.btn_backpack:ze.setCurrentScene(he.M_SCENE_KNAPSACK);break;case this.btn_setting:ze.setCurrentScene(he.M_SCENE_SETTING);break;case this.btn_asset:ze.setCurrentScene(he.M_SCENE_ASSET);break;case this.btn_rank:ze.setCurrentScene(he.M_SCENE_RANK);break;case this.btn_guild:console.log("GlobalDataManager.playerDto.club："+G.playerDto.club),ze.setCurrentScene(he.M_SCENE_CLUB);break;case this.btn_guildCreate:console.log("GlobalDataManager.playerDto.club："+G.playerDto.club),Be.intance.openModule(M.CreateClubDialog);break;case this.btn_mail:ze.setCurrentScene(he.M_SCENE_MAIL);break;default:Ce.notice(D.getLanguage(52));break}}onHideList(){Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList)}async onClickHead(){Tt.abortAllPingTests(),ze.setCurrentScene(he.M_SCENE_ROLE)}onDisable(){Tt.inNodeList=!1;for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab);for(let t=1;t<=4;t++)this[`btn_join_${t}`].off(Laya.Event.CLICK,this,this.joinRoomClick);this.playerIcon.off(Laya.Event.CLICK,this,this.onClickHead),this.btn_node.off(Laya.Event.CLICK,this,this.showNodeBox),this.backLayer.off(Laya.Event.CLICK,this,this.hideNodeBox),this.btn_1.off(Laya.Event.CLICK,this,this.showJoinBox),this.btn_closeJoin.off(Laya.Event.CLICK,this,this.hideJoinBox),v.off("msg_"+y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onGetRoleInfo),v.off(k.ROLE_INFO_CHANGE,this,this.updateTopInfo),v.off(k.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),v.off(k.EVENT_CHANGE_NODE,this,this.onChangeNode),v.off(k.EVENT_ITEM_UPDATE,this,this.onPackInfo),v.off(k.ROLE_INFO_CHANGE,this,this.updateModeBoxLayout),v.off(k.EVENT_NEW_NOTICE,this,this.onReceiveNewNotice),v.off(k.EVENT_MARQUEE_EMPTY,this,this.onMarqueeEmpty),v.off(k.EVENT_NEW_NOTICE_ADDED,this,this.onNewNoticeAdded),this.stopBackgroundAnimation(),this.destroySpineEventListeners(),this.destroySpineAnimations(),Laya.timer.clearAll(this),wn.setInMainScene(!1),sm.stopAutoPush(),Tt.clearPingTime(),showChatBtn(!1),v.offAllCaller(this),Laya.Tween.clearAll(this)}destroySpineAnimations(){for(let t=1;t<8;t++){let r=this["spine_"+t];r&&(r.stop(),r.removeSelf())}}onEnterMatchRoom(t){t?Laya.timer.once(2e3,this,this.startBtnAni):Laya.timer.clear(this,this.startBtnAni)}startBackgroundAnimation(){!this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!0,xt.startCircleAnimation(this.bgAni,Laya.stage.width/2,Laya.stage.height/2,30,3500,!0,0,null))}stopBackgroundAnimation(){this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!1,xt.stopCircleAnimation(this.bgAni))}onSpineReady(t){if(!t){console.warn("Button component is null in onSpineReady");return}t==this.btn_guildCreate&&console.log("spine == this.btn_guildCreate"),t.skin="",t==this.btn_guild&&(G.playerDto.club==""||G.playerDto.club)}getSpineNode(t){return t?t.box_sk?t.box_sk:(console.warn("Spine skeleton node is null in AniSk component"),null):(console.warn("AniSk component is null"),null)}initSpineLoadEvent(t,r){if(!t||!r){console.warn("Invalid parameters in initSpineLoadEvent");return}let s;if(t===this.AniSk_guild2)s=this.AniSk_guild2;else if(t===this.AniSk_guild)s=this.AniSk_guild;else if(this.isAniSk(t))s=this.getSpineNode(t);else{console.warn("Unknown spine animation type");return}s&&(s.off(Laya.Event.READY,this,this.onSpineReady),s.on(Laya.Event.READY,this,this.onSpineReady,[r]))}destroySpineEventListeners(){let t;t=this.btn_guild,[{anisk:this.AniSk_guild,button:t},{anisk:this.AniSk_shop,button:this.btn_shop},{anisk:this.AniSk_backpack,button:this.btn_backpack},{anisk:this.AniSk_asset,button:this.btn_asset},{anisk:this.AniSk_rank,button:this.btn_rank},{anisk:this.AniSk_btn1,button:this.btn_1},{anisk:this.AniSk_btn2,button:this.btn_2}].forEach(({anisk:s,button:a})=>{if(s&&a)if(this.isAniSk(s)){let l=this.getSpineNode(s);l&&l.off(Laya.Event.READY,this,this.onSpineReady)}else s===this.AniSk_guild2?this.AniSk_guild2&&this.AniSk_guild2.off(Laya.Event.READY,this,this.onSpineReady):s===this.AniSk_guild&&this.AniSk_guild&&this.AniSk_guild.off(Laya.Event.READY,this,this.onSpineReady)})}isAniSk(t){return t&&"box_sk"in t}showNodeBox(){if(!this.nodeBox){console.warn("nodeBox is not defined in MainScene");return}if(!this.btn_node){console.warn("btn_node is not defined in MainScene");return}Tt.inNodeList=!0,this.backLayer.visible=!0,this.nodeBox.scaleX=0,this.nodeBox.scaleY=0,this.nodeBox.visible=!1;let t=this.btn_node.localToGlobal(new Laya.Point(this.btn_node.width/2,this.btn_node.height/2));t.x+=90,t.y+=20;let r=this.nodeBox.parent;if(!r){console.warn("nodeBox parent is null");return}let s=r.globalToLocal(t);this.nodeBox.pos(s.x,s.y),xt.startElasticPopupAnimation(this.nodeBox,150,1.1,100,.95,80,Laya.Handler.create(this,()=>{console.log("NodeBox show animation complete")}))}hideNodeBox(){if(!this.nodeBox){console.warn("nodeBox is not defined in MainScene for hiding");return}Tt.inNodeList=!1,xt.startLinearShrinkAnimation(this.nodeBox,80,Laya.Handler.create(this,()=>{this.backLayer.visible=!1,console.log("NodeBox hide animation complete")}))}initNodeList(){let t=X.m_dicNodes.values,r=G.nodeItem;if(r){this.netDelaySign.dataSource=r,this.netDelaySign2.dataSource=r;let s=t.filter(a=>a.id!==r.id);this.NodeList.array=s}else this.NodeList.array=t}showJoinBox(){Tt.abortAllPingTests(),this.joinBox.scaleX=0,this.joinBox.scaleY=0,this.btn_closeJoin.visible=!1,this.img_guangTop.visible=!0,this.backLayer.visible=!0,this.backLayer.off(Laya.Event.CLICK,this,this.hideNodeBox),this.joinBox.visible=!0,this.updateModeBoxLayout(),Laya.Tween.to(this.joinBox,{scaleX:1.15,scaleY:1.15},200,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.joinBox,{scaleX:1,scaleY:1},60,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.btn_closeJoin.visible=!0,this.backLayer.on(Laya.Event.CLICK,this,this.hideNodeBox)}))}))}joinRoomClick(t){switch(Tt.abortAllPingTests(),this.hideJoinBox(),t){case 1:Be.intance.openModule(M.JoinRoomDialog,[0,0]);break;case 2:G.playerDto.club!==""&&G.playerDto.club!==void 0?ze.setCurrentScene(he.M_SCENE_CLUB):Be.intance.openModule(M.CreateClubDialog);break;case 3:Ws.goAiArenaScene();break;case 4:break}}hideJoinBox(){this.btn_closeJoin.visible=!1,Laya.Tween.to(this.joinBox,{scaleX:1.15,scaleY:1.15},50,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.joinBox,{scaleX:.2,scaleY:.2},200,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.joinBox.visible=!1,this.backLayer.visible=!1,this.img_guangTop.visible=!1}))}))}initMarquee(){if(!this.runBox||!this.tf_run1){console.warn("跑马灯组件不存在，无法初始化");return}wn.init(this.runBox,this.tf_run1,2),wn.setMaxPlayCount(2),wn.hasNotices()?this.marqueeBox.visible=!0:this.marqueeBox.visible=!1}updateNodeItemDelay(t,r){let s=this.NodeList.getCell(t);s&&s.setDelay&&s.setDelay(r)}onMarqueeEmpty(){this.marqueeBox&&(this.marqueeBox.visible=!1)}onNewNoticeAdded(){this.marqueeBox&&(this.marqueeBox.visible=!0)}initBagInfo(){let t=y.snake.socket.MessageType.MSG_PACK_INFO;ge.send(t)}onPackInfo(){let t=ui.getAllKnapsackItems().find(r=>r.id===10001);t&&(console.log(t),this.tf_score.text=`${parseFloat(t.num.toFixed(4)).toString()}`)}updateModeBoxLayout(){let t=G.playerDto.club!==""&&G.playerDto.club!==void 0;if(this.modeBox_2&&(this.modeBox_2.visible=t),!t&&this.middleBox){let u=this.middleBox.width/2-841/2+255/2;this.modeBox_1&&(this.modeBox_1.x=u),this.modeBox_3&&(this.modeBox_3.x=u+255+38),this.modeBox_4&&(this.modeBox_4.x=u+(255+38)*2)}else this.modeBox_1&&(this.modeBox_1.x=130.5),this.modeBox_2&&(this.modeBox_2.x=415.5),this.modeBox_3&&(this.modeBox_3.x=703.5),this.modeBox_4&&(this.modeBox_4.x=988.5)}onChangeNode(){this.initNodeList()}};Zn.M_B_FIRST_Open=!0,Zn.hasTestedNodesThisSession=!1,Zn=U([zO("pxhiJrX5SkKKvyFr8uIlNA")],Zn);var En=class{constructor(){}};En.GREEN="#2ac84b",En.YELLOW="#e8c833",En.RED="#e04343";var l0=class extends Laya.Box{};var{regClass:HO}=Laya,c0=class extends l0{constructor(){super()}onEnable(){v.on(k.EVENT_Game_Delay,this,this.onUpdateNodeDelay),this.tf_delay&&(this.tf_delay.text="-",this.tf_delay.color&&(this.tf_delay.color="#FFFFFF"),this.img_delay&&(this.img_delay.skin="res/common/comm/img_xh1.png"))}set dataSource(t){if(super.dataSource=t,!t)return;this.nodeItem=t,this.tf_country.text=D.getLanguage(t.name);let r=X.m_dicCountry.get(t.area);this.img_flag.skin=ie.getCountryIcon(r.id),t.dT!==void 0?this.onGameDelay(t.dT):this.tf_delay.text=""}onUpdateNodeDelay(t){t===this.nodeItem&&this.onGameDelay(t.dT)}onGameDelay(t){if(!this.tf_delay||!this.img_delay){console.error("NetDelaySign组件未完全初始化");return}var r=X.getGeneralValueById(6),s=r?r[0]:200,a=r?r[1]:500;t===1e4?(this.tf_delay.text="-",this.tf_delay.color="#FFFFFF",this.img_delay.skin="res/common/comm/img_xh1.png"):t>=9999?(this.tf_delay.text="Timeout",this.tf_delay.color=En.RED,this.img_delay.skin="res/common/comm/img_xh1.png",console.log("NetDelaySign显示超时状态")):t>a?(this.tf_delay.text=t+"ms",this.tf_delay.color=En.RED,this.img_delay.skin="res/common/comm/img_xh1.png"):t>s?(this.tf_delay.text=t+"ms",this.tf_delay.color=En.YELLOW,this.img_delay.skin="res/common/comm/img_xh2.png"):(this.tf_delay.text=t+"ms",this.tf_delay.color=En.GREEN,this.img_delay.skin="res/common/comm/img_xh3.png")}onDisable(){this.nodeItem=null,v.off(k.EVENT_Game_Delay,this,this.onUpdateNodeDelay)}};c0=U([HO("AhgzWGWoRFetvSMsEOSkSg")],c0);var u0=class extends Laya.Box{};var{regClass:jO}=Laya,p0=class extends u0{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}onEnable(){this.addEvent()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.playerDto=t,this.playerDto&&this.setCurrentOutPut()}set headSkin(t){parseInt(t)>0?this.img_head.skin=ie.getPlayerIcon(t):this.setImage(t)}setHeadSkinAndRoldId(t,r){parseInt(t)>0?this.img_head.skin=ie.getPlayerIcon(t):this.setImage(t),this.roleId=r}async setCurrentOutPut(){if(!this.playerDto)return;this.roleId=this.playerDto.roleId;let t=this.playerDto.icon;parseInt(t)>0?this.img_head.skin=ie.getPlayerIcon(t):this.setImage(t)}setImage(t){this.clearImage();var r=this;Laya.loader.load(t,Laya.Handler.create(this,()=>{r.destroyed||(this.img_head.skin=t)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(t=!0){this.clearImage(),super.destroy(t)}toDetail(){console.log("toDetail");var t=this.roleId;t&&Be.intance.openModule(M.RoleInfoDialog,t)}};p0=U([jO("onBubzG_TXiStu5YetXWSQ")],p0);var m0=class extends Laya.Box{};var{regClass:GO}=Laya,h0=class extends m0{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.changeNode),v.on(k.EVENT_Game_Delay,this,this.onUpdateNodeDelay)}set dataSource(t){if(super.dataSource=t,!t)return;this.nodeItem=t,this.tf_country.text=D.getLanguage(t.name);let r=X.m_dicCountry.get(t.area);this.img_flag.skin=ie.getCountryIcon(r.id),t.dT!==void 0?this.setDelay(t.dT):this.tf_delay.text=""}changeNode(){G.nodeItem=this.nodeItem,console.log("新节点",G.nodeItem),v.event(k.EVENT_CHANGE_NODE)}setDelay(t){if(!this.tf_delay)return;let r=t;r===1e4?(this.tf_delay.text="-",this.tf_delay.color="#FFFFFF",this.img_delay.skin="res/common/comm/img_xh1.png"):r>=9999?(this.tf_delay.text="Timeout",this.tf_delay.color="#FF0000",this.img_delay.skin="res/common/comm/img_xh1.png"):r>500?(this.tf_delay.text=r+"ms",this.tf_delay.color="#FF0000",this.img_delay.skin="res/common/comm/img_xh1.png"):r>200?(this.tf_delay.text=r+"ms",this.tf_delay.color="#FFFF00",this.img_delay.skin="res/common/comm/img_xh2.png"):(this.tf_delay.text=r+"ms",this.tf_delay.color="#00FF00",this.img_delay.skin="res/common/comm/img_xh3.png")}onUpdateNodeDelay(t){t===this.nodeItem&&this.setDelay(t.dT)}onDisable(){this.nodeItem=null,v.off(k.EVENT_Game_Delay,this,this.onUpdateNodeDelay)}};h0=U([GO("PayHrcvHRHadv1wSa6XTzA")],h0);var d0=class extends Laya.Box{};var{regClass:VO}=Laya,f0=class extends d0{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.playerDto=t,this.playerDto&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(t){parseInt(t)>0?this.img_head.skin=ie.getPlayerIcon(t):this.setImage(t)}async setCurrentOutPut(){if(!this.playerDto)return;let t=this.playerDto.icon;parseInt(t)>0?this.img_head.skin=ie.getPlayerIcon(t):this.setImage(t)}setImage(t){this.clearImage();var r=this;Laya.loader.load(t,Laya.Handler.create(this,()=>{r.destroyed||(this.img_head.skin=t)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(t=!0){this.clearImage(),super.destroy(t)}toDetail(){!this.playerDto||this.playerDto.needTip}};f0=U([VO("OPT5t2CoSmuYp2zUJWwUWA")],f0);var g0=class extends Laya.Dialog{};var{regClass:WO}=Laya,b0=class extends g0{constructor(){super();this.m_iLayerType=te.M_TOP;this.m_iPositionType=te.CENTER}onEnable(){Laya.Tween.to(this.backLayer,{alpha:1},200,Laya.Ease.linearIn),xt.startElasticPopupAnimation(this.allBox,150,1.1,100,.95,80),this.btn_ok.on(Laya.Event.CLICK,this,this.close)}setOpenData(t){if(t){console.log("收到升级通知:",t);let r=t.items[0],s=r.itemId,a=r.num,l=X.m_dicItems.get(s);this.img_icon.skin=ie.getItemIcon(l.icon),this.tf_num.text=`+${a}`}}onDisable(){}};b0=U([WO("gNPNtfC8SYW_NR7gSnpNlg")],b0);var y0=class extends Laya.Box{};var{regClass:KO}=Laya,_0=class extends y0{set dataSource(t){if(super.dataSource=t,t){let r=dt.getTokenDataBySyId(t);this.tf_data.text=r.symbol,this.img_coin.skin=ie.getCurrencyIcon(r.symbolId)}}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};_0=U([KO("7DyPeY0BQZaSycl2nmV5qg")],_0);var x0=class extends Laya.Box{};var{regClass:$O}=Laya,qa=class extends x0{constructor(){super();this.isReady=!1;this.needChangeAni=!0;this.loop=!0;this.isInited=!1}onEnable(){this.sk=this.box_sk,this.sk.on(Laya.Event.READY,this,this.onSkReady),this.sk.loop=this.loop,console.log("onEnable: + this.animationName： "+this.animationName),this.animationName&&(this.sk.animationName=this.animationName),this.spineTemplet?(this.sk.templet=this.spineTemplet,console.log("onEnable: + this.spineTemplet ")):this.templateUrl?Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(t=>{this.destroyed||(this.sk.templet=t,console.log("this.templateUrl: "+this.templateUrl))}):this.animationName||(this.sk.animationName="animation"),this.isInited=!0}onSkReady(){this.isReady=!0,console.log("onSkReady this.visible: "+this.visible)}play(t,r,s,a,l,u,m){if(!this.isReady){console.log("动画未准备好，不能play");return}this.sk.play(t,r,s,a,l,u,m)}stop(){if(!this.isReady){console.log("动画未准备好，不能stop");return}this.sk.stop()}init(t,r="animation",s=!0){console.log("init: ",r,t),this.animationName=r,this.spineTemplet=t,this.loop=s,this.visible=!0,this.isInited&&(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=this.spineTemplet)}initUrl(t,r="animation",s=!0){console.log("initUrl: ",t),this.animationName=r,this.templateUrl=t,this.loop=s,this.visible=!0,this.isInited&&Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(a=>{this.destroyed||(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=a,console.log("this.templateUrl: "+this.templateUrl))})}onDisable(){Laya.Pool.recover(qa.aniSkPrefab,this),this.box_sk.off(Laya.Event.READY,this,this.onSkReady),this.sk.templet=null}};qa.aniSkPrefab="aniSkPrefab",qa=U([$O("2rJV0EbMT9K2L6-6HOpDHw")],qa);var $s=class i{static toFixed(e,t){if(e.toString().indexOf(".")==-1)return e;{let r=e.toFixed(t);return parseFloat(r)}}static toFixedWithPercent(e,t,r="+"){let s;return e.toString().indexOf(".")==-1?s=r+e*100+"%":(t=t-2,t<0&&(t=0),s=r+(e*100).toFixed(t)+"%"),s}static getGoldStr(e){let t;return e>999999?t=parseInt(String(e/1e5))+"m":t=e,t}static numStringFormat(e){let t=e;return G.m_strLanguage==2?e.length>4&&(t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1 ")):t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1,"),t}static numSimple(e){let t=e,r=parseInt(parseInt(t)/1e3+"");return r>0?r+"k":i.numStringFormat(t)}static numStringFormat2(e){let t;if(e>999999)t=i.getNumStr(e,1e6,"M");else if(e>999)t=i.getNumStr(e,1e3,"K");else return e+"";return t}static getNumStr(e,t,r){return parseInt(Math.floor(e/t)+"")+r}static getTimeStr(e){let t;return e<3600?t=D.getLanguage(9024,Math.ceil(e/60)):e<3600*24?t=D.getLanguage(9025,Math.ceil(e/3600)):t=D.getLanguage(9025,Math.ceil(e/(3600*24))),t}static isInteger(e){return e%1===0}static isNumber(e){return typeof e=="number"}static formatNumber(e,t=8){return Number.isInteger(e)?e:parseFloat(e.toFixed(t))}static formatNumberStr(e,t=2){return Number.isInteger(e)?e:parseFloat(e.toFixed(t)).toString()}static filterNumFormat(e,t=2,r=!1,s=!1){if(!e)return e;if(e<1e3&&e>0)if(s){var a=Math.floor(Number(parseFloat(e*10**t+"").toPrecision(16)))/10**t;return parseFloat(a.toFixed(t)).toString()}else return parseFloat(e.toFixed(t)).toString();if(e==="0.00")return e;var l=[{value:1,symbol:""},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}];r&&(l=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}]);var u=/\.0+$|(\.[0-9]*[1-9])0+$/,m;for(m=l.length-1;m>0&&!(e>=l[m].value);m--);let p=(e/l[m].value).toString();return p.indexOf(".")>-1&&(t>0?p=p.substr(0,p.indexOf(".")+t+1):p=p.substr(0,p.indexOf(".")+t)),p.replace(u,"$1")+l[m].symbol}static fromWei(e,t,r=0){if(!e)return 0;let s=e.length-t+r;if(s<=0)return 0;let a=e.toString().slice(0,s);if(r){let l=a.length-r;if(l<=0){let u="0.";for(let m=0;m<Math.abs(l);m++)u+="0";a=u+a}else a=a.slice(0,a.length-r)+"."+a.slice(a.length-r)}return a}static getNumberSuffix(e){let t=parseInt(e,10);return isNaN(t)?e:(t%1e9).toString()}};var v0=class extends Laya.Box{};var{regClass:YO}=Laya,I0=class extends v0{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(!this.itemVo)return;this.itemVo.id==Ze.TYPE_QUAN_MNT?(this.tf_quanId.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk):this.tf_quanId.visible=!1;let t=this.itemVo.itemItem;Be.intance.hasOpenView(M.PveChoosePropsDialog)&&(this.txt_num.visible=!1),this.itemVo?(this.showAdd?this.txt_num.text=""+$s.formatNumber(this.itemVo.newAddCnt,8):this.itemVo.num?this.txt_num.text=""+$s.formatNumber(this.itemVo.num,8):this.txt_num.text=""+$s.formatNumber(this.itemVo.newAddCnt,8),this.img_icon.skin=this.itemVo.iconURL,this.img_box.skin="gameIcon/items/itemBg/img_"+this.itemVo.quality+".png"):(this.txt_num.text="",this.img_icon.skin=null,this.img_box.skin="gameIcon/items/itemBg/img_0.png"),this.tf_isSch.visible=this.itemVo.isScholarship}};I0=U([YO("LzxJYKybT_m3CJav3RyDmg")],I0);var k0=class extends Laya.Dialog{};var{regClass:qO}=Laya,S0=class extends k0{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}setOpenData(t){if(t){this.itemVo=t;let r=this.itemVo.id,s=X.m_dicItems.get(r);this.item.dataSource=this.itemVo,this.tf_name.text=this.itemVo.itemName,s?(this.txt_type.text=D.getLanguage(6060)+D.getLanguage(s.type),this.txt_desc.text=D.getLanguage(s.des),this.txt_desc.visible=s.des!==0):(this.txt_type.text="",this.txt_desc.text="")}}removeEvent(){}};S0=U([qO("or8jNdIhRpSbAG2JBhH-wA")],S0);var w0=class extends Laya.Dialog{};var{regClass:QO}=Laya,E0=class extends w0{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){Ke.playSoundByName(Ke.soundName32)}setOpenData(t){t&&(this.reward=t);var r=[],s=this.reward;s.forEach(p=>{if(p.itemId&&p.itemId>0){var h=new zi(p.itemId);h.newAddCnt=p.num,p.itemId==3011&&(h.itemItem.icon=p.itemId),r.push(h)}});var a=this.list_reward.spaceX,l=this.list_reward.itemTemplate.width,u=r.length;this.list_reward.repeatX=u;var m=u*l+a*(u-1);this.list_reward.width=m,this.list_reward.x=this.width-m>>1,this.list_reward.array=r}};E0=U([QO("xwYUFnd4S3uJGIJSjjbRag")],E0);var L0=class extends Laya.Scene{};var $I=class i{constructor(){this.comIdMap=new Map}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){this.comIdMap.set(y.snake.socket.MessageType.MSG_PLAYER_OPR,"CS_"),this.comIdMap.set(y.snake.socket.MessageType.MSG_AI_ENTER,"CS_"),this.comIdMap.set(y.snake.socket.MessageType.MSG_NOTICE_ENTER,"SS_");for(let t in y.snake.socket.MessageType)if(isNaN(Number(t))){let r=y.snake.socket.MessageType[t],s="";var e=this.comIdMap.get(r);if(e)if(!e.endsWith("_"))s=e;else{let l=this.comIdMap.get(r),u=t.substring(4);s=l+u}else{let l="SC_",u=t.substring(4);s=l+u}let a=y.snake.socket[s];a&&Laya.ClassUtils.regClass(r+"",a)}}},cC=$I.getInstance();var{regClass:ZO}=Laya,Bl=class extends L0{constructor(){super(...arguments);this.isLogout=!1;this.m_nProgress=0}onAwake(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),Laya.loader.load(["res/loading/progress_load1.png","res/loading/progress_load1$bar.png"]).then(()=>{this.createUI(),this.initBasic()})}onError(t){console.log("加载失败: "+t)}createUI(){Ke.init(),Ke.playMusicByName(Ke.soundName_bg,".mp3"),v.on(k.EVENT_BACK_TO_LOGIN,this,this.backToLogin),v.on(k.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),v.on(k.EVENT_ENTER_MAIN,this,this.loginCallBack),D.FGM_GetLanguage();var t=getGameVersion();this.txtLoad.text=t,console.log("VERSION: "+t);let r=new Ln;r.ID=1,r.Event="加载版本信息 "+t,Xe.sendCustumEvent(1,null,r)}initBasic(){cC.init(),te.instence.init(),ie.init(),Qe.initParms(),ze.init(),Be.intance.init(),this.initLoad()}initLoad(){this.onAssetLoaded()}onAssetLoaded(){this.loadingProcess=.05,this.m_nProgress=.05,xt.startRotationAnimation(this.img_circle,2e3,!0),Laya.timer.once(500,this,()=>{this.loadFirstBatch()});let t=Laya.timer.loop(1e3,this,this.onLoading,[this.m_nProgress])}loadFirstBatch(){this.m_nProgress=.15,this.loadingProcess=.15,Laya.timer.once(800,this,()=>{this.loadSecondBatch()})}loadSecondBatch(){this.m_nProgress=.3,this.loadingProcess=.3,Laya.timer.once(1e3,this,()=>{this.loadThirdBatch()})}loadThirdBatch(){G.init(),this.m_nProgress=.5,this.loadingProcess=.5,Laya.timer.once(1e3,this,()=>{this.loadFinalBatch()})}loadFinalBatch(){let t=new Ln;t.ID=3,t.Event="加载资源信息",Xe.sendCustumEvent(3,null,t),this.m_nProgress=.8,this.loadingProcess=.8}set loadingProcess(t){if(!(this.mcProcess&&t<this.mcProcess.value)){t>1&&(t=1),t<.05&&(t=.05),this.mcProcess.value=t,this.txtProcess.text=Math.floor(t*100)+"%";var r=t*this.mcProcess.width-70;r<0&&(r=0)}}backToLogin(){Laya.timer.clear(this,this.onLoading),this.m_nProgress=0,Laya.loader.load(ie.m_arrInitResource,Laya.Handler.create(this,this.getLoginData),Laya.Handler.create(this,this.onLoading2,null,!1))}getLoginData(){Xe.sendCustumEvent(7),this.readyInitGame()}readyInitGame(){if(this.isLogout){v.event(k.EVENT_LOADING_SUC);return}this.mcProcess&&(this.loadingProcess=.9,Laya.timer.once(500,this,()=>{this.loadingProcess=1,Laya.timer.once(300,this,()=>{X.init(),J.isWhite?this.loginGame():this.onGetNotice()})}))}async onGetNotice(){Laya.loader.maxLoader=50,this.loginGame()}async loginGame(){v.event(k.EVENT_LOADED_COMPLETE),await He.init(),await He.dappLogin(),Ee.initMove()}async loginGameEnd(t){if(lt.showLoading(!0),Xe.sendCustumEvent(8),Xe.sendCustumEvent(22),!t){Be.intance.openModule(M.NoServerView);return}t.loginState==1?(console.log("have no regist"),Xe.sendCustumEvent(23),Be.intance.openModule(M.CreateLoginView)):(Xe.sendCustumEvent(30),t.playerDto?(Xe.sendCustumEvent(31),console.log("registed "+t.playerDto.name),G.playerDto=t.playerDto,this.loginCallBack()):(Xe.sendCustumEvent(32),console.log("getRegisted error"),Ce.notice(D.getLanguage(29))))}async loginCallBack(){console.log("loginCallBack++++++++++++++++++++++++++++++++"),J.vType==2&&J.Debug==0&&(Laya.Browser.window.console.log=function(){}),G.initData(),lt.hideLoading();var t=G.playerDto;if(t.roomId>0){let r=await Vt.requestPost("wxgame/room/info",{roomId:t.roomId});Ee.roomDto=r.roomDto,r.roomDto?t.roomState==10?je.initSocket():Be.intance.openModule(M.EnterRoomView):Ce.notice(D.getLanguage(29))}else ee.logs("进入主界面",5),Xe.sendCustumEvent(33),xt.stopCircleAnimation(this.img_circle),ze.setCurrentScene(he.M_SCENE_MAIN)}onLoading(t){let r=this.mcProcess?this.mcProcess.value:0,s=.01;this.m_nProgress<.15?s=.02:this.m_nProgress<.3?s=.015:this.m_nProgress<.5?s=.01:this.m_nProgress<.8?s=.005:s=.001,this.m_nProgress+=s,this.m_nProgress<r&&(this.m_nProgress=r),this.m_nProgress>.8&&(this.m_nProgress=.8),this.mcProcess&&t>this.mcProcess.value&&(this.loadingProcess=this.m_nProgress)}onLoading2(t){this.mcProcess&&(this.loadingProcess=0+t*1.1)}removeEvent(){v.off(k.EVENT_BACK_TO_LOGIN,this,this.backToLogin),v.off(k.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),v.off(k.EVENT_ENTER_MAIN,this,this.loginCallBack)}};Bl.m_iState=1,Bl=U([ZO("xmaaYG8AQ1yC07pr_JvyPA")],Bl);var T0=class extends Laya.Box{};var{regClass:XO}=Laya,A0=class extends T0{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){console.log("OpenScene onEnable："+this.m_strName)}getName(){console.log(this.m_strName)}onDisable(){}};A0=U([XO("sQS5mrqRQLWcBk-SgfBGJw")],A0);var C0=class extends Laya.Box{};var{regClass:JO}=Laya,M0=class extends C0{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toRead)}set dataSource(t){if(super.dataSource=t,this.rewardItem=t,!this.rewardItem){this.visible=!1;return}let r=X.m_dicItems.get(this.rewardItem.itemId);if(!r){this.visible=!1;return}r.icon<1e3?this.img_icon.skin=ie.getSnakeIcon(r.icon):this.img_icon.skin=ie.getItemIcon(r.icon),this.tf_num.text=`x${this.rewardItem.num}`}toRead(){}};M0=U([JO("cVATpJOeQgeVQnaU8vno-g")],M0);var R0=class extends Laya.Scene{};var{regClass:eF}=Laya,B0=class extends R0{onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){}onEnable(){this.mailList.visible=!1,this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),v.on("msg_"+y.snake.socket.MessageType.MSG_MAIL_LIST,this,this.onGetRoleInfo),v.on("msg_"+y.snake.socket.MessageType.MSG_MAIL_DELETE,this,this.onDeleteResult),v.on("msg_"+y.snake.socket.MessageType.MSG_MAIL_CHECK,this,this.onReadResult),xt.startJellyScaleAnimation(this.tf_tittle),this.requestAllMailData(),this.mailList.selectHandler=new Laya.Handler(this,this.handleSelectMail),this.btn_delete.on(Laya.Event.CLICK,this,this.deleteMail),this.btn_receive.on(Laya.Event.CLICK,this,this.onReceiveClick),v.on("msg_"+y.snake.socket.MessageType.MSG_MAIL_GET,this,this.onMailGetBack)}requestAllMailData(t=1){let r=y.snake.socket.MessageType.MSG_MAIL_LIST;ge.send(r)}onGetRoleInfo(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_MAIL_LIST);r==y.snake.socket.MessageCode.SYS_NORMAL&&s&&(this.mailList.array=s.mail,this.mailList.visible=!0,this.mailData=s.mail,this.checkReadNum(),s.mail.length>0?(this.box_1.visible=!1,this.box_2.visible=!0,this.mailList.selectedIndex=0):(this.box_1.visible=!0,this.box_2.visible=!1))}checkReadNum(){let r=`${this.mailData.filter(s=>s.read===!0).length}/${this.mailData.length}`;this.tf_read.text=D.getLanguage(20,r)}handleSelectMail(t){this.mailIndex=t;let r=this.mailData[t];this.tf_des.text=r.content;let s=ht.formatDayAndTime(r.sendTime);if(this.tf_time.text=`${s.date} ${s.time}`,this.tf_title.text=r.title,this.tf_from.text=D.getLanguage(21,r.sendName),r.items&&r.items.length>0?(this.rewardList.array=r.items,this.rewardList.visible=!0,this.btn_receive.visible=!r.get):(this.rewardList.visible=!1,this.btn_receive.visible=!1),r.read==!1){let a=y.snake.socket.MessageType.MSG_MAIL_CHECK,l=y.snake.socket.CS_MAIL_CHECK.fromObject({mailId:r.mailId});ge.send(a,l)}}onDeleteResult(t,r){r===y.snake.socket.MessageCode.SYS_NORMAL&&(this.mailList.array=this.mailData,this.mailData.length===0&&(this.box_1.visible=!0,this.box_2.visible=!1),Ce.notice(D.getLanguage(69)),this.mailData.splice(this.mailIndex,1),this.mailList.array=this.mailData,this.checkReadNum(),this.handleSelectMail(this.mailIndex))}onReadResult(t,r){if(r===y.snake.socket.MessageCode.SYS_NORMAL){let s=this.mailData[this.mailIndex];this.mailList.array=this.mailData,s.read=!0,this.checkReadNum()}}deleteMail(){if(this.mailIndex>=0&&this.mailData&&this.mailData.length>0){let t=this.mailData[this.mailIndex],r=y.snake.socket.MessageType.MSG_MAIL_DELETE,s=y.snake.socket.CS_MAIL_DELETE.fromObject({mailId:t.mailId});ge.send(r,s)}}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}onReceiveClick(){if(this.mailIndex==-1)return;let t=y.snake.socket.MessageType.MSG_MAIL_GET,r=this.mailData[this.mailIndex],s=y.snake.socket.CS_MAIL_GET.fromObject({mailId:r.mailId});ge.send(t,s)}onMailGetBack(t,r){if(r==y.snake.socket.MessageCode.SYS_NORMAL){Ce.notice(D.getLanguage(70));var s=de.getMsgBody(t,y.snake.socket.SC_MAIL_GET);console.log(s);let a=this.mailList.array.find(l=>l.mailId===s.mailId);a&&(a.get=!0,this.handleSelectMail(this.mailIndex))}}onDisable(){v.off("msg_"+y.snake.socket.MessageType.MSG_MAIL_LIST,this,this.onGetRoleInfo),v.off("msg_"+y.snake.socket.MessageType.MSG_MAIL_DELETE,this,this.onDeleteResult),v.off("msg_"+y.snake.socket.MessageType.MSG_MAIL_CHECK,this,this.onReadResult),v.off("msg_"+y.snake.socket.MessageType.MSG_MAIL_GET,this,this.onMailGetBack),this.removeEvent(),this.btn_delete.off(Laya.Event.CLICK,this,this.deleteMail),this.btn_receive.off(Laya.Event.CLICK,this,this.onReceiveClick)}};B0=U([eF("25JYfnFtTzq1ju1OR6_GLQ")],B0);var D0=class extends Laya.Box{};var{regClass:tF}=Laya,N0=class extends D0{constructor(){super()}onEnable(){}set dataSource(t){super.dataSource=t,this.mailItem=t,this.mailItem&&(this.tf_title.text=this.mailItem.title,this.tf_from.text=this.mailItem.sendName,this.img_red.visible=!this.mailItem.read,this.tf_time.text=ht.formatTimeAgoFromTimestamp(this.mailItem.sendTime))}};N0=U([tF("3h2PsGTIQV6ilXcpYeJ0cQ")],N0);var O0=class extends Laya.Box{};var{regClass:iF}=Laya,Bi=class extends O0{onEnable(){this.tf_kill_damage.text=D.getLanguage(81)}init(e,t,r=28){var s,a;switch(a=ft.getRandInRound(-30,30),t?s=Bi.TYPE_Kill:s=Bi.TYPE_Normal,t?this.pos(a,-180):this.pos(a,-110),this.alpha=1,this.scale(1,1),this.tf_damage.visible=!1,this.box_crit.visible=!1,s){case Bi.TYPE_Normal:this.tf_damage.text="+"+e,this.showNormalDamageEffect();break;case Bi.TYPE_Kill:this.showCriticalDamageEffect();break}}showNormalDamageEffect(){this.tf_damage.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,this.onComplete))}showCriticalDamageEffect(){this.box_crit.visible=!0,ee.vibrate(),this.scale(.2,.2),Laya.Tween.to(this,{scaleX:1.3,scaleY:1.3,alpha:1,y:this.y-70},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1,alpha:0},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}))}onComplete(){this.removeSelf()}onDisable(){Laya.Pool.recover("damageNumber",this)}};Bi.WHITE="#FFFFFF",Bi.ORANGE="#FFA500",Bi.RED="#FF0000",Bi.GREEN="#119c09",Bi.BLUE="#78cefd",Bi.TYPE_Normal="Normal",Bi.TYPE_Kill="Kill",Bi=U([iF("nHp6WKzZRIWvyhguidEfqg")],Bi);var F0=class extends Laya.Dialog{};var{regClass:rF}=Laya,P0=class extends F0{constructor(){super()}onEnable(){this.list.visible=!1;var e=Ee.msgEndbody,t=e.token;this.list.renderHandler=new Laya.Handler(this,(r,s)=>{r.setDataIndex(s)}),this.list.array=t,this.list.visible=!0,!t||t.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};P0=U([rF("JH3DtUPTS_2FR6dTzhLHMw")],P0);var U0=class extends Laya.Box{};var{regClass:nF}=Laya,z0=class extends U0{constructor(){super()}addEvent(){}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.setData(e),this.addEvent()}setData(e){var t=e.split(","),r=t[1],s=t[2],a=t[3],l=t[4];this.tf_time.text=ht.formatTimeStamp(Number.parseFloat(t[0]),"HH:MM:SS"),this.img_country.skin=ie.getCountryIcon(r),this.tf_nickName.text=s;let u=X.m_dicItems.get(a),m=D.getLanguage(u.name);this.tf_token.text=l+" "+m}setDataIndex(e){this.bg.skin=e%2===0?"res/common/comm/img_wzbg_1.png":"res/common/comm/img_wzbg_2.png"}};z0=U([nF("po6_Uf6sTlaC-xEazLOk5Q")],z0);var H0=class extends Laya.Dialog{};var{regClass:sF}=Laya,j0=class extends H0{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_PANEL;this.m_iPositionType=te.CENTER}onEnable(){v.on("msg_"+y.snake.socket.MessageType.MSG_AI_END,this,this.onAiEnd),Ke.playSoundByName(Ke.soundName_win),this.btn_fightAgain.on(Laya.Event.CLICK,this,this.goFightAgain),this.btn_home.on(Laya.Event.CLICK,this,this.setToAirdropScene),this.btn_help.on(Laya.Event.CLICK,this,this.onNext),Xe.sendCustumEvent(43)}onHelp(){ee.commTipWithYes(D.getLanguage("HELP"))}onNext(){this.setToAirdropScene()}setToAirdropScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}setOpenData(t){var r=t[0];this.list_reward.visible=!1;var s,a;this.list_reward.vScrollBarSkin="",this.roomGameOverPush=Ee.msgEndbody,this.tf_rank.text=`${this.roomGameOverPush.rank}`,this.tf_score.text=`${this.roomGameOverPush.score}`,this.fontClip_kill.getComponent(Yn).startIncrement(this.roomGameOverPush.kills,1,1),this.fontClip_length.getComponent(Yn).startIncrement(this.roomGameOverPush.length,1,1),this.fontClip_challengeDuration.getComponent(Yn).startIncrement(this.roomGameOverPush.alive,1,3),r==xe.MATCH_TYPE_PVP?(s=this.roomGameOverPush.items,a=this.roomGameOverPush.token,this.onSetReward(s,a)):ar.sendAiEnd(this.roomGameOverPush.kills,this.roomGameOverPush.score);let p=dt.getTokenDataBySyId(10);console.log("tokenData===========>",p)}onSetReward(t,r){var s=[],a=new Oe;t&&t.length>0&&t.forEach(f=>{var g=a.get(f.itemId);g?g.newAddCnt=g.newAddCnt+f.num:(g=new zi(f.itemId),g.newAddCnt=f.num,s.push(g),a.set(f.itemId,g))}),r&&r.length>0&&r.forEach(f=>{var g=f.split(","),b=g[1],_=g[2],I=g[3],x=g[4],L=parseInt(I),E=parseFloat(x),T=a.get(L);T?T.newAddCnt=T.newAddCnt+E:(T=new zi,T.type=$t.TYPE_TOKEN,T.id=L,T.newAddCnt=E,s.push(T),a.set(L,T))});var l=this.list_reward.spaceX,u=this.list_reward.itemTemplate.width,m=s.length,p=m*u+l*(m-1);this.list_reward.repeatX=m,this.list_reward.width=p,this.list_reward.x=this.box_outside.width-this.list_reward.width>>1,this.list_reward.array=s,this.list_reward.visible=!0,!this.list_reward.array||this.list_reward.array.length<=0?this.noDataBox1.visible=!0:this.noDataBox1.visible=!1;let h=-1;this.list_reward.selectedIndex=h}onAiEnd(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_AI_END),a=s,l=a.items;this.onSetReward(l,[])}goFightAgain(){if(xe.arenaType==xe.ARENA_TYPE_PVP){var t=Ee.roomDto.pvpRoomIndex;t<0&&(t=0);var r=Ee.roomDto.pvpTokenIndex;r<0&&(r=0),Be.intance.openModule(M.JoinRoomDialog,[t,r])}else xe.arenaType==xe.ARENA_TYPE_JULEBU?G.playerDto.club!==""&&G.playerDto.club!==void 0?ze.setCurrentScene(he.M_SCENE_CLUB):Be.intance.openModule(M.CreateClubDialog):xe.arenaType==xe.ARENA_TYPE_PVE&&Ws.goAiArenaScene()}onDisable(){this.removeEvent()}removeEvent(){v.off("msg_"+y.snake.socket.MessageType.MSG_AI_END,this,this.onAiEnd)}};j0=U([sF("y-nP_lRrQVef9uttVJ0rDw")],j0);var G0=class extends Laya.Box{};var{regClass:aF}=Laya,V0=class extends G0{onEnable(){v.on(k.EVENT_Game_Room_Delay,this,this.onGameDelay),this.img_delay&&(this.img_delay.skin="res/common/comm/img_xh1.png")}onGameDelay(e){if(!this.img_delay){console.error("NetDelaySign组件未完全初始化");return}var t=X.getGeneralValueById(6),r=t?t[0]:200,s=t?t[1]:500;e===1e4?this.img_delay.skin="res/common/comm/img_xh1.png":e>=9999?(this.img_delay.skin="res/common/comm/img_xh1.png",console.log("NetDelaySign显示超时状态")):e>s?this.img_delay.skin="res/common/comm/img_xh1.png":e>r?this.img_delay.skin="res/common/comm/img_xh2.png":this.img_delay.skin="res/common/comm/img_xh3.png"}onDisable(){v.off(k.EVENT_Game_Room_Delay,this,this.onGameDelay)}};V0=U([aF("3R9dzM5JSkSPt5KjSa7lPg")],V0);var W0=class extends Laya.Box{};var{regClass:oF}=Laya,K0=class extends W0{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){this.snake=t,!(!this.snake||!this.snake.tag)&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.snake.tag&&(this.tf_rank.text=this.snake.rankNum+".  "+Yr.abbreviateString(this.snake.tag.userName));var t=0;Ee.matchDto.matchType==xe.MATCH_TYPE_PVE?t=this.snake.getScore(!1):t=this.snake.getScore(!0),this.snake.rankNum==1?this.tf_kill.text=`<font><img src='res/match2/img_phb_icon2.png'/>${t}</font>`:this.tf_kill.text=`<font>${t}</font>`,this.snake.isSelf?(this.tf_rank.color="#ffe155",this.tf_kill.color="#ffe155"):(this.tf_rank.color="#ffffff",this.tf_kill.color="#ffffff")}};K0=U([oF("XTVFXeI_R768e0Elv_ePAA")],K0);var $0=class extends Laya.Dialog{};var{regClass:lF}=Laya,Y0=class extends $0{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_PANEL;this.m_iPositionType=te.CENTER;this.canClose=!1}onEnable(){this.tf_tittle.text=D.getLanguage(47)}onDisable(){}};Y0=U([lF("8HZEMq_0TP2txNQ9o3uv3w")],Y0);var q0=class extends Laya.Box{};var{regClass:cF}=Laya,Q0=class extends q0{constructor(){super();this.showAdd=!1;this.isAddEvent=!1;this.oriScale=1}onEnable(){this.oriScale=this.knapsackItem.img_icon.scaleX}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(this.itemVo)if(this.itemVo.id==Ze.TYPE_REWARD_TOKEN)this.img_tokens.visible=!0,this.knapsackItem.visible=!1;else{this.img_tokens.visible=!1,this.knapsackItem.visible=!0,this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=this.itemVo;var t=this.oriScale;this.itemVo.type==$t.TYPE_TOKEN&&(t=this.oriScale*.8),this.knapsackItem.img_icon.scale(t,t)}}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.id==Ze.TYPE_REWARD_TOKEN?Be.intance.openModule(M.MatchEndRewardTokensDialog):this.itemVo.type===$t.TYPE_Equipment?Be.intance.openModule(M.EquipDetailDialog,this.itemVo):Be.intance.openModule(M.KnapsackTipDialog,this.itemVo))}};Q0=U([cF("WXpxCvqlQ2mKdcJCYlqOeg")],Q0);var Z0=class extends Laya.Box{};var{regClass:uF}=Laya,X0=class extends Z0{constructor(){super();this.isBig=!1}set dataSource(t){super.dataSource=t,this.skillItem=t,this.skillItem&&(this.txt_num.text="",this.img_icon.skin=ie.getMatchSkillIcon(this.skillItem.icon))}};X0=U([uF("iwuFUCOEQRyOjxpy6IkQ2Q")],X0);var J0=class extends Laya.Button{};var{regClass:pF}=Laya,e1=class extends J0{constructor(){super();this.isAddEvent=!1;this.isCanClick=!0;this.skillCooldown=5e3;this.thisGlobalCooldown=1e4;this.globalCooldown=1e4;this.remainingSkillCooldown=0;this.remainingGlobalCooldown=0;this.reduceCooldown=0}onEnable(){this.addEvent()}addEvent(){this.isAddEvent||(v.on(k.EVENT_CLICK_NUM,this,this.onNumberClick),v.on(k.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),v.on(k.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),v.on(k.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),this.isAddEvent=!0,this.on(Laya.Event.CLICK,this,this.onSkillButtonClick),this.on(Laya.Event.MOUSE_UP,this,this.onSkillButtonUp))}onNumberClick(t){t==this.keyNum&&this.onSkillButtonClick(null)}set dataSource(t){super.dataSource=t,this.skillItem=t[0],this.itemItem=t[1],this.equipPos=t[2],this.count=t[3],this.skillItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.skillItem&&(this.skillIconItem.isBig=this.skillItem.icon=="1001",this.skillIconItem.dataSource=this.skillItem,this.itemItem?(this.txt_num.visible=!0,this.updateCount(),this.skillCooldown=this.itemItem.cd*1e3):(this.txt_num.visible=!1,this.skillCooldown=this.skillItem.cd),this.thisGlobalCooldown=this.skillItem.commCd,Laya.timer.frameLoop(1,this,this.updateCooldown))}onSkillButtonUp(t){t&&t.stopPropagation(),Ri.clearClickFilter(this)}onSkillButtonClick(t){t&&t.stopPropagation()}updateSkillCooldown(t){this.remainingSkillCooldown=t}updateItemRemainCooldown(t){var r=t[0];console.log("updateItemRemainCooldown _skillId: "+r),this.itemItem&&r==this.skillItem.id&&(this.count=t[1],this.updateCount(),this.updateSkillCooldown(this.skillCooldown))}updateCount(){this.txt_num.text=this.count+"",this.disabled=!this.count}updateReduceCooldown(t,r){console.log("updateReduceCooldown skillType: "+t),this.skillItem&&t==this.skillItem.type&&(this.reduceCooldown=this.skillCooldown*r)}updateGlobalCooldown(t){this.itemItem||(this.globalCooldown=t,this.remainingGlobalCooldown=t)}updateCooldown(){if(this.remainingSkillCooldown+this.reduceCooldown>0){this.remainingSkillCooldown-=Laya.timer.delta;let t=(this.remainingSkillCooldown+this.reduceCooldown)/1e3;this.txt_time.text=t.toFixed(1),this.updateCooldownMask(this.skillCooldownMask,(this.remainingSkillCooldown+this.reduceCooldown)/this.skillCooldown,"#000000"),this.img_djs.visible=!0,this.txt_time.visible=!0}else this.img_djs.visible=!1,this.txt_time.visible=!1;this.remainingGlobalCooldown+this.reduceCooldown>0?(this.remainingGlobalCooldown-=Laya.timer.delta,this.updateCooldownMask(this.globalCooldownMask,(this.remainingGlobalCooldown+this.reduceCooldown)/this.globalCooldown,"#00000036"),this.globalCooldownMask.visible=!0):this.globalCooldownMask.visible=!1,this.skillIconItem.gray=this.remainingSkillCooldown+this.reduceCooldown>0||this.remainingGlobalCooldown+this.reduceCooldown>0}updateCooldownMask(t,r,s){let a=this.width/2,l=this.width/2,u=this.height/2;t.graphics.clear(),t.graphics.drawPie(l,u,a,-90+360*(1-r),270,s)}onDisable(){v.off(k.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),v.off(k.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),v.off(k.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),v.offAllCaller(this),Laya.timer.clearAll(this)}};e1=U([pF("x6t-z1VuR52yXWju0qxGBg")],e1);var t1=class extends Laya.Box{};var{regClass:mF}=Laya,i1=class extends t1{constructor(){super()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.copyAddress)}set dataSource(t){if(super.dataSource=t,!t){this.visible=!1;return}this.tf_address.text=Qe.shortenString(t.addr,6,4),this.PlayerIcon.headSkin=t.icon,this.tf_name.text=Qe.fitTextToLabel(t.userName,this.tf_name),this.tf_num.text=t.num,this.address=t.addr;let r=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=r%2===1,this.tf_rank.text=`${r+1}`,this.img_flag.skin=ie.getCountryIcon(t.country),r<3?(this.img_title.visible=!0,this.tf_rank.visible=!1,this.img_title.skin=`res/rank/img_b${r+1}.png`):(this.img_title.visible=!1,this.tf_rank.visible=!0)}copyAddress(){this.address&&(doCopy(this.address),Ce.notice(D.getLanguage(19)))}};i1=U([mF("w6kO36_RTAS3RWabluZDow")],i1);var r1=class extends Laya.Scene{};var{regClass:hF}=Laya,n1=class extends r1{constructor(){super(...arguments);this.currentTabIndex=0;this.allRankData=new Map;this.TAB_COUNT=2}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onEnable(){this.tf_noData.text=D.getLanguage(610013),this.noDataBox.visible=!0,this.list_data.visible=!1;for(let t=0;t<this.TAB_COUNT;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),xt.startJellyScaleAnimation(this.tf_tittle),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_RANK,this,this.onlist_dataReceived),this.onTabClick(0)}setTab(t){for(let r=1;r<this.TAB_COUNT;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<this.TAB_COUNT;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),v.off("msg_"+y.snake.socket.MessageType.MSG_REQUEST_RANK,this,this.onlist_dataReceived)}onTabClick(t){this.currentTabIndex=t;let r="res/matchTournament/img_icon_tab1.png",s="res/matchTournament/img_icon_tab2.png";for(let a=0;a<this.TAB_COUNT;a++){let l=this[`tab${a}`],u=l.getChildByName("tf_tit"),m=t===a;if(l.skin=m?r:s,u.stroke=m?5:0,m){let p=t+1;if(this.allRankData.has(p)){let h=this.allRankData.get(p);this.displayRankData(t,h)}else this.requestRankData(p)}}}requestRankData(t){}onlist_dataReceived(t){let r=de.getMsgBody(t,y.snake.socket.SC_RANK_LIST);if(console.log(r),!r||!r.rank||r.rank.length===0){this.showEmptyRankTip(),this.noDataBox.visible=!0;return}else this.list_data.visible=!0,this.noDataBox.visible=!1;this.allRankData.set(this.currentTabIndex+1,r.rank),this.displayRankData(this.currentTabIndex,r.rank)}displayRankData(t,r){this.list_data.array=r,this.list_data.visible=!0,this.list_data.refresh(),this.list_data.scrollTo(0)}showEmptyRankTip(){this.list_data.visible=!1,this.noDataBox.visible=!0}onDisable(){this.removeEvent()}};n1=U([hF("DQuQatSyTgC3I3Tt7ry1JA")],n1);var s1=class extends Laya.Dialog{};var{regClass:dF}=Laya,a1=class extends s1{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink)}onLink(t){console.log("点击了超链接："+t)}onRefresh(){Xe.reload()}setOpenData(t){if(t){var r=t[0];if(t.length>2?(this.alertTitle.text=t[1],this.alertDesc.text=t[2]):this.alertDesc.text=t[1],r==1){this.canClose=!1;var s=this.getChildByName("close");s.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1;this.alertDesc.height=this.alertDesc.textField.textHeight+20}}onDisable(){}close(t){this.canClose&&super.close(t)}};a1=U([dF("xATCTfSDSkaGtuYn669ofQ")],a1);var o1=class extends Laya.Dialog{};var{regClass:fF}=Laya,l1=class extends o1{constructor(){super()}onEnable(){this.img_show.on(Laya.Event.CLICK,this,this.close)}setOpenData(e){e&&(this.img_show.skin=e)}onDisable(){}};l1=U([fF("RUMV5hpfRdCRzhO9yBDCzg")],l1);var c1=class extends Laya.Dialog{};var{regClass:gF}=Laya,u1=class extends c1{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink),this.btn_left.on(Laya.Event.CLICK,this,this.onChangePage,[!1]),this.btn_right.on(Laya.Event.CLICK,this,this.onChangePage,[!0])}onLink(t){console.log("点击了超链接："+t)}onRefresh(){Xe.reload()}setOpenData(t){if(t){var r=t[0],s=t[1];if(this.list=s.list,this.pageNo=1,this.pageTotal=this.list.length,this.pageTotal<2&&(this.box_page.visible=!1),this.updatePageList(),r==1){this.canClose=!1;var a=this.getChildByName("close");a.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1}}async onChangePage(t){if(t)this.pageNo++;else{if(this.pageNo<=1)return;this.pageNo--}this.updatePageList()}updatePageList(){this.txt_page.text=this.pageNo+"/"+this.pageTotal,this.btn_left.disabled=this.pageNo<=1,this.btn_right.disabled=this.pageNo>=this.pageTotal,this.setNoticeDetail()}setNoticeDetail(){if(this.pageNo){var t=this.list[this.pageNo-1];t&&(this.alertTitle.text=D.getMultiLan(t.title),this.alertDesc.text=D.getMultiLan(t.contents))}}onDisable(){}close(t){this.canClose&&super.close(t)}};u1=U([gF("iB7UvqEcQ1GFKaVEIy6Bmw")],u1);var p1=class extends Laya.Box{};var{regClass:bF}=Laya,m1=class extends p1{};m1=U([bF("ON5bkSuKSE2gwPDUnRGmrw")],m1);var h1=class extends Laya.Box{};var{regClass:yF}=Laya,d1=class extends h1{onEnable(){}notice(e){this.zOrder=1e7;let t=e;this.label_tf.text=t,this.label_tf.x=68,this.image_bg.width=68*2+this.label_tf.textField.textWidth,t.length/45>1&&(this.image_bg.height=this.label_tf.textField.textHeight+55),this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}onDisable(){console.log("txtNotice recover"),Laya.Pool.recover("txtNotice",this)}};d1=U([yF("Nm27xWbYSG6mj-EXqPOZ_A")],d1);var f1=class extends Laya.Box{};var{regClass:_F}=Laya,g1=class extends f1{constructor(){super()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.copyAddress)}set dataSource(t){if(super.dataSource=t,!t){this.visible=!1;return}this.tf_address.text=Qe.shortenString(t.addr,6,4),this.PlayerIcon.dataSource=t,this.tf_name.text=Qe.fitTextToLabel(t.userName,this.tf_name),this.tf_num.text=t.num,this.address=t.addr;let r=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=r%2===1,this.tf_rank.text=`${r+1}`,this.img_flag.skin=ie.getCountryIcon(t.country),r<3?(this.img_title.visible=!0,this.tf_rank.visible=!1,this.img_title.skin=`res/rank/img_b${r+1}.png`):(this.img_title.visible=!1,this.tf_rank.visible=!0)}copyAddress(){this.address&&(doCopy(this.address),Ce.notice(D.getLanguage(19)))}};g1=U([_F("ILpWxZ9qRRiahqxWqEMA9g")],g1);var b1=class extends Laya.Scene{};var{regClass:xF}=Laya,y1=class extends b1{constructor(){super(...arguments);this.currentTabIndex=0;this.allRankData=new Map}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onEnable(){this.RankList.visible=!1;for(let t=0;t<3;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),xt.startJellyScaleAnimation(this.tf_tittle),v.on("msg_"+y.snake.socket.MessageType.MSG_REQUEST_RANK,this,this.onRankListReceived),this.onTabClick(0)}setTab(t){for(let r=1;r<3;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<3;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),v.off("msg_"+y.snake.socket.MessageType.MSG_REQUEST_RANK,this,this.onRankListReceived)}onTabClick(t){this.currentTabIndex=t;let r=3,s="res/common/comm/img_tab1.png",a="res/common/comm/img_tab2.png",l="#427030",u="#1449cb";for(let m=0;m<r;m++){let p=this[`tab${m}`],h=p.getChildByName("tf_tit"),f=t===m;switch(p.skin=f?s:a,h.strokeColor=f?l:u,t){case 0:this.box_daily.visible=!0,this.box_dailybest.visible=!1,this.box_over.visible=!1;break;case 1:this.box_daily.visible=!1,this.box_dailybest.visible=!0,this.box_over.visible=!1;break;case 2:this.box_daily.visible=!1,this.box_dailybest.visible=!1,this.box_over.visible=!0;break}if(f){let g=t+1;if(this.allRankData.has(g)){let b=this.allRankData.get(g);this.displayRankData(t,b)}else this.requestRankData(g)}}}requestRankData(t){let r=y.snake.socket.MessageType.MSG_REQUEST_RANK,s=y.snake.socket.CS_RANK_LIST.fromObject({type:t});ge.send(r,s)}onRankListReceived(t){let r=de.getMsgBody(t,y.snake.socket.SC_RANK_LIST);if(console.log(r),!r||!r.rank||r.rank.length===0){this.showEmptyRankTip(),this.noDataBox.visible=!0;return}else this.RankList.visible=!0,this.noDataBox.visible=!1;this.allRankData.set(this.currentTabIndex+1,r.rank),this.displayRankData(this.currentTabIndex,r.rank)}displayRankData(t,r){this.RankList.array=r,this.RankList.visible=!0,this.RankList.refresh(),this.RankList.scrollTo(0)}clearRankList(){[this.box_daily.getChildByName("list_rank"),this.box_dailybest.getChildByName("list_rank"),this.box_over.getChildByName("list_rank")].forEach(r=>{r&&(r.array=[],r.refresh())})}showEmptyRankTip(){this.RankList.visible=!1,this.noDataBox.visible=!0}onDisable(){this.removeEvent()}};y1=U([xF("kxqXjP8sR7OnW67fK0960g")],y1);var _1=class extends Laya.Scene{};var{regClass:vF}=Laya,x1=class extends _1{onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){}onEnable(){for(let t=0;t<3;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_music_plus.on(Laya.Event.CLICK,this,this.onClickMusicPlus,[!0]),this.btn_music_reduce.on(Laya.Event.CLICK,this,this.onClickMusicPlus,[!1]),this.btn_sound_plus.on(Laya.Event.CLICK,this,this.onClickSoundPlus,[!0]),this.btn_sound_reduce.on(Laya.Event.CLICK,this,this.onClickSoundPlus,[!1]),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_privacy.on(Laya.Event.CLICK,this,this.onPrivacyClick),this.btn_service.on(Laya.Event.CLICK,this,this.onServiceClick),this.initSettingData(),this.initLanguageData(),xt.startJellyScaleAnimation(this.tf_tittle)}setTab(t){for(let r=1;r<3;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}initSettingData(){let t=Ke.getMusicVolume();this.prog_music.value=t;let r=Ke.getSoundVolume();this.prog_sound.value=r}setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}onTabClick(t){let s="res/common/comm/img_tab1.png",a="res/common/comm/img_tab2.png",l="#427030",u="#1449cb";for(let m=0;m<3;m++){let p=this[`tab${m}`],h=p.getChildByName("tf_tit"),f=t===m;switch(p.skin=f?s:a,h.strokeColor=f?l:u,t){case 0:this.box_genred.visible=!0,this.box_language.visible=!1,this.box_saciel.visible=!1;break;case 1:this.box_genred.visible=!1,this.box_language.visible=!0,this.box_saciel.visible=!1;break;case 2:this.box_genred.visible=!1,this.box_language.visible=!1,this.box_saciel.visible=!0;break}}}onClickMusicPlus(t){let r=Ke.getMusicVolume(),s=.1;t?r=Math.min(1,r+s):r=Math.max(0,r-s),this.prog_music.value=r,Ke.setMusicVolume(r)}onClickSoundPlus(t){let r=Ke.getSoundVolume(),s=.1;t?r=Math.min(1,r+s):r=Math.max(0,r-s),this.prog_sound.value=r,Ke.setSoundVolume(r)}initLanguageData(){let t=X.m_dicLanguage.values;if(t){let r=t.filter(a=>a.if_open===1);this.list_language.array=r,this.list_language.renderHandler=new Laya.Handler(this,this.handleSelectLanguage),this.list_language.mouseHandler=Laya.Handler.create(this,this.onLanguageItemMouse,null,!1);let s=r.findIndex(a=>a.id===G.m_strLanguage);this.list_language.selectedIndex=s||0}}handleSelectLanguage(t,r){t.onChange(this.list_language.selectedIndex==r)}onLanguageItemMouse(t,r){t.type===Laya.Event.CLICK&&(this.list_language.selectedIndex=r)}onPrivacyClick(){window.open("https://drive.google.com/file/d/1JHQmFHsoM2m4qynP0tT2rycXHIm8xX-G/view","_blank")}onServiceClick(){window.open("https://drive.google.com/file/d/1ktcZ2P7lMKEJDsymetdqUzvWKbF0VR2n/view","_blank")}onDisable(){for(let t=0;t<3;t++)this[`tab${t}`].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_music_plus.off(Laya.Event.CLICK,this,this.onClickMusicPlus,[!0]),this.btn_music_reduce.off(Laya.Event.CLICK,this,this.onClickMusicPlus,[!1]),this.btn_sound_plus.off(Laya.Event.CLICK,this,this.onClickSoundPlus,[!0]),this.btn_sound_reduce.off(Laya.Event.CLICK,this,this.onClickSoundPlus,[!1]),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.list_language&&this.list_language.mouseHandler.clear(),Laya.timer.clearAll(this)}};x1=U([vF("MqlTAbYeQPe4_9ujUdePSg")],x1);var v1=class extends Laya.Box{};var{regClass:IF}=Laya,I1=class extends v1{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.checkSelect)}set dataSource(t){if(this.languageData=t,!t){this.visible=!1;return}this.languageData=t,this.tf_language.text=t.language}checkSelect(){let t=this.languageData.id,r=D.getLanTypeById(t);D.FGM_SetLanguage(r);let s=window.location.href,a=new URL(s);a.searchParams.has("lang")?(a.searchParams.delete("lang"),window.location.href=a.toString()):Xe.reload(),this.event("checkSelect",this.languageData)}onChange(t){console.log("isSelect",t),t?(this.img_btn.skin="res/setup/img_bt1.png",this.tf_language.fontSize=25,this.tf_language.color="#FFFFFF",this.tf_language.stroke=2,this.tf_language.strokeColor="#D26E02"):(this.img_btn.skin="res/setup/img_bt2.png",this.tf_language.fontSize=25,this.tf_language.color="#B8E5FE",this.tf_language.stroke=0)}onDisable(){this.languageData=null}};I1=U([IF("SnCse2C4Qiq0GdwkQNE3PA")],I1);var k1=class extends Laya.Dialog{};var{regClass:kF}=Laya,S1=class extends k1{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.addL=1;this.isButtonLocked=!1;this.buttonLockTime=2e3}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_buy.on(Laya.Event.CLICK,this,this.onRecruit),v.on("msg_"+y.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),v.on(k.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus)}setOpenData(t){if(t){this.shopItem=t;let r=X.m_dicItems.get(this.shopItem.itemId);if(!r)return;this.alertTitle.text=D.getLanguage(r.name),this.tf_price.text=`${this.shopItem.cost} USDT`,this.img_icon.skin=ie.getItemIcon(r.icon),this.tf_des.text=D.getLanguage(r.des)}}handleClickBtn(t){switch(t){case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}onRefreshItemStatus(){this.close()}setItemNum(){this.tf_num.text=this.addL+"";let t=new Er(Number(this.shopItem.cost)),r=new Er(this.addL),s=t.multiply(r).getValue();this.tf_price.text=`${s} USDT`}changeItemNum(){var t=parseInt(this.tf_num.text);(!t||t<1)&&(t=1),this.addL=t,this.setItemNum()}onRecruit(){if(this.isButtonLocked)return;this.isButtonLocked=!0;let t=y.snake.socket.MessageType.MSG_SHOP_BUY;if(this.shopItem.id){let r=y.snake.socket.CS_SHOP_BUY.fromObject({id:this.shopItem.id,symbolId:10,num:this.addL});ge.send(t,r)}Laya.timer.once(this.buttonLockTime,this,()=>{this.isButtonLocked=!1})}onBuySuccess(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_SHOP_BUY);r==y.snake.socket.MessageCode.SYS_NORMAL?s&&s.items&&(Ce.notice(D.getLanguage(71)),dt.requestCoinInfo(),this.close()):r==y.snake.socket.MessageCode.MAX_INVITE?Ce.notice(D.getLanguage(72)):Ce.notice(D.getLanguage(73))}onDisable(){this.btn_plus.clickHandler=null,this.btn_reduce.clickHandler=null,this.tf_num.off(Laya.Event.BLUR,this,this.changeItemNum),this.btn_buy.off(Laya.Event.CLICK,this,this.onRecruit),v.off(k.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus),v.off("msg_"+y.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),Laya.timer.clearAll(this)}};S1=U([kF("LRfHnCX4RROGq5Y2JkrAZw")],S1);var w1=class extends Laya.Box{};var{regClass:SF}=Laya,E1=class extends w1{constructor(){super(...arguments);this.coins=[[3022,2],[3001,2],[3011,2],[3013,4],[3010,2],[3007,4],[3006,6],[3015,2],[3016,2],[3005,0]]}onEnable(){let t=(Laya.stage.width-J.DESIGN_WIDTH)/2;this.img_coinsBg.right-=t,console.log("dWidth: "+t),this.updateLocalAssets(),v.on(k.ROLE_INFO_CHANGE,this,this.updateLocalAssets),v.on(k.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),this.coins=X.getGeneralValueById(19),this.list_coin.array=this.coins}onDisable(){v.off(k.ROLE_INFO_CHANGE,this,this.updateLocalAssets),v.off(k.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets)}updateLocalAssets(){this.list_coin.refresh()}};E1=U([SF("7P9MlqipSaG6QoKpQowDbQ")],E1);var L1=class extends Laya.Box{};var{regClass:wF}=Laya,T1=class extends L1{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toShowBuyDialog)}set dataSource(t){if(super.dataSource=t,this.shopItem=t,!this.shopItem)return;this.tf_const.text=`${this.shopItem.cost} USDT`;let r=X.m_dicItems.get(this.shopItem.itemId);if(!r)return;this.tf_name.text=D.getLanguage(r.name);let s=this.tf_name.height,a=this.tf_name.fontSize;this.tf_name.y=s>a?226:244,this.img_icon.skin=ie.getItemIcon(r.icon)}toShowBuyDialog(){Be.intance.openModule(M.BuyPropDialog,this.shopItem)}};T1=U([wF("awS07ko0RBaxCnxXWqiR4g")],T1);var A1=class extends Laya.Scene{};var{regClass:EF}=Laya,C1=class extends A1{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1;this.shopId=1;this.isButtonLocked=!1;this.buttonLockTime=2e3}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){t&&t.length>0?(this.type=t[0],t[1]!=null&&(this.selectItemId=t[1]),this.onClickTab(this.type)):(this.selectItemId=1,this.onTabClick(this.selectItemId))}onEnable(){dt.requestCoinInfo(),xt.startJellyScaleAnimation(this.tf_tittle),this.tf_diamon.text=`${parseFloat(G.playerDto.score.toFixed(4)).toString()}`;for(let t=0;t<4;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);this.initShopList(),v.on("msg_"+y.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_left.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!0]),this.btn_right.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!1]),this.btn_buy.on(Laya.Event.CLICK,this,this.onRecruit),v.on(k.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate)}setTab(t){for(let r=1;r<3;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}async onClickTab(t){this.currTab!=t&&(this.type=t,this.setTab(t),t==1?(this.box_middle.visible=!0,this.tabBox.visible=!0,this.box_shop.visible=!1,this.tf_nft2.stroke=5,this.tf_nft2.fontSize=32,this.tf_props2.stroke=0,this.tf_props2.fontSize=25):t==2&&(this.box_middle.visible=!1,this.tabBox.visible=!1,this.box_shop.visible=!0,this.tf_nft2.stroke=0,this.tf_nft2.fontSize=25,this.tf_props2.stroke=5,this.tf_props2.fontSize=32))}setToMainScene(){ze.setCurrentScene(he.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.btn_left.off(Laya.Event.CLICK,this,this.clickLeftAndRight,[!0]),this.btn_right.off(Laya.Event.CLICK,this,this.clickLeftAndRight,[!1]),this.btn_buy.off(Laya.Event.CLICK,this,this.onRecruit),v.off("msg_"+y.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),v.off(k.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate)}clearAllTimer(){Laya.timer.clearAll(this),this.isButtonLocked=!1}onTabClick(t){let s="res/shop/img_Button_1.png",a="res/shop/img_btlv.png",l="res/shop/img_bt1_2.png",u="res/shop/img_Button_4.png",m="#0785f5";this.snake_sk&&(this.snake_sk.visible=!1),this.clearAllTimer();for(let f=0;f<4;f++){let g=this[`tab${f}`],b=g.getChildByName("tf_tit"),_=t===f,I=f===0;this.selectItemId=t,g.skin=I?_?s:l:_?a:u,b.stroke=_?5:0,b.strokeColor=m;let x=1001,L=101;switch(t){case 0:x=null,L=101,_&&(this.snake_sk.source="gameIcon/spine/shop/snake1/img_she_1.json",this.snake_sk.visible=!0,this.snake_sk&&this.snake_sk.templet&&this.snake_sk.play("animation",!0),this.eggBox.visible=!1);break;case 1:x=1001,L=102,_&&(this.img_egg.visible=!1,this.egg_sk.visible=!0,this.egg_sk&&this.egg_sk.templet&&this.egg_sk.play("animation1",!0),this.eggBox.visible=!0);break;case 2:x=1002,L=103,_&&(this.img_egg.visible=!0,this.egg_sk.visible=!1,this.img_egg.skin="res/shop/img_dan_2.png",this.eggBox.visible=!0);break;case 3:L=null,x=null,L=104,_&&(this.img_egg.visible=!0,this.egg_sk.visible=!1,this.img_egg.skin="res/shop/img_dan_3.png",this.img_egg.visible=!0);break;default:break}if(this.shopId=x,L&&_){var h=X.m_dicSnakes.get(L);let E=this.attribute_1.getChildByName("tf_value"),T=this.attribute_2.getChildByName("tf_value"),R=this.attribute_3.getChildByName("tf_value"),H=this.attribute_4.getChildByName("tf_value"),F=this.attribute_5.getChildByName("tf_value");h&&(L>=103?(E.text="?",T.text="?",R.text="?",H.text="?",F.text="?"):(E.text=`${h.initLength}`,T.text=`${h.maxLength}`,R.text=`${h.suctionRadius}`,H.text=`${h.baseSpeed}`,F.text=`${h.accelerationFactor}`))}if(x){let E=X.m_dicShops.get(x);E?(this.tf_price.text=`${E.cost} USDT`,this.btn_buy.visible=!0):this.btn_buy.visible=!1}else this.btn_buy.visible=!1;this.selectItemId<=0?this.btn_left.disabled=!0:this.btn_left.disabled=!1,this.selectItemId>=3?this.btn_right.disabled=!0:this.btn_right.disabled=!1}}clickLeftAndRight(t){t&&this.selectItemId>0&&(this.selectItemId--,this.onTabClick(this.selectItemId)),!t&&this.selectItemId<3&&(this.selectItemId++,this.onTabClick(this.selectItemId))}initShopList(){let t=[],r=X.m_dicShops;r&&r.values&&(t=Array.from(r.values).filter(a=>a.type===2),this.shopList.array=t);let s=ui.getKnapsackItemById(10001);s?this.tf_diamon.text=`${parseFloat(s.num.toFixed(4)).toString()}`:this.tf_diamon.text="0"}onBuySuccess(t,r){var s=de.getMsgBody(t,y.snake.socket.SC_SHOP_BUY);if(r==y.snake.socket.MessageCode.SYS_NORMAL){if(s&&s.items&&(console.log("buySNake============>",s),Ke.playSoundByName(Ke.soundName_snakeBuy),s.snake&&s.snake.skin)){let a=s.snake.skin-100;this.egg_sk&&this.egg_sk.templet&&this.egg_sk.play("animation2",!1),this.btn_buy.visible=!1;let l=ie.getSnakeAniJson(`${a}`);this.snake_sk.source=l,Laya.timer.once(500,this,()=>{this.snake_sk.visible=!0,this.snake_sk&&this.snake_sk.templet&&this.snake_sk.play("animation",!0)}),Laya.timer.once(7e3,this,()=>{this.selectItemId==1&&(this.snake_sk&&(this.snake_sk.visible=!1),this.egg_sk&&this.egg_sk.templet&&this.egg_sk.play("animation1",!0),this.btn_buy.visible=!0)}),dt.requestCoinInfo()}}else r==y.snake.socket.MessageCode.NOT_ENOUGH_TOKEN?Ce.notice(D.getLanguage(72)):Ce.notice(D.getLanguage(73))}onRecruit(){if(this.isButtonLocked)return;this.isButtonLocked=!0,Laya.timer.once(this.buttonLockTime,this,()=>{this.isButtonLocked=!1});let t=y.snake.socket.MessageType.MSG_SHOP_BUY;var r=X.m_dicSnakes.get(this.shopId);if(console.log(r),this.shopId){let s=y.snake.socket.CS_SHOP_BUY.fromObject({id:this.shopId,symbolId:10,num:1});ge.send(t,s)}}onTokenBalanceUpdate(t){this.showAssetData(t)}showAssetData(t){let r=t.find(a=>a.symbolId===10),s=r?r.balance:0;this.tf_usdt.text=$s.filterNumFormat(s,2,!0)}onDisable(){this.removeEvent(),this.isButtonLocked=!1}};C1=U([EF("IPCUkD5kRse3Gz5tw0Aovw")],C1);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
