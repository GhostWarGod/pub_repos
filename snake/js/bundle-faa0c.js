"use strict";(()=>{var HR=Object.create;var af=Object.defineProperty;var sk=Object.getOwnPropertyDescriptor;var zR=Object.getOwnPropertyNames;var jR=Object.getPrototypeOf,GR=Object.prototype.hasOwnProperty;var iv=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var _=(i,e)=>()=>(i&&(e=i(i=0)),e);var lf=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),cf=(i,e)=>{for(var t in e)af(i,t,{get:e[t],enumerable:!0})},WR=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of zR(e))!GR.call(i,s)&&s!==t&&af(i,s,{get:()=>e[s],enumerable:!(r=sk(e,s))||r.enumerable});return i};var uf=(i,e,t)=>(t=i!=null?HR(jR(i)):{},WR(e||!i||!i.__esModule?af(t,"default",{value:i,enumerable:!0}):t,i));var K=(i,e,t,r)=>{for(var s=r>1?void 0:r?sk(e,t):e,o=i.length-1,l;o>=0;o--)(l=i[o])&&(s=(r?l(e,t,s):l(s))||s);return r&&s&&af(e,t,s),s};var VR=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var ve=(i,e,t)=>(VR(i,e,"read from private field"),t?t.call(i):e.get(i)),Ie=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)};var rv,L,xt=_(()=>{"use strict";rv=class i extends Laya.EventDispatcher{static getInstance(){return i._instance||(i._instance=new i),i._instance}},L=rv.getInstance()});var A,ri=_(()=>{"use strict";A=class{};A.MOUSE_HOLDON="MOUSE_HOLDON",A.EVENT_OPEN_MODULE="EVENT_OPEN_MODULE",A.EVENT_MODULE_ADDED="EVENT_MODULE_ADDED",A.EVENT_CLOSE_MODULE="EVENT_CLOSE_MODULE",A.EVENT_CHECK_REMAIN="EVENT_CHECK_REMAIN",A.EVENT_LOADED_COMPLETE="EVENT_LOAD_COMPLETE",A.EVENT_LOADED_SCENE_BG_COM="EVENT_LOADED_SCENE_BG_COM",A.EVENT_LOAD_SKIN_COMPLETE="EVENT_LOAD_SKIN_COMPLETE",A.EVENT_LOAD_HEAD_SKIN_COMPLETE="EVENT_LOAD_HEAD_SKIN_COMPLETE",A.EVENT_LOADING_SUC="EVENT_LOADING_SUC",A.EVENT_BACK_TO_LOGIN="EVENT_BACK_TO_LOGIN",A.EVENT_LOGIN_GAME_END="EVENT_LOGIN_GAME_END",A.EVENT_ENTER_MAIN="EVENT_ENTER_MAIN",A.EVENT_CHANGE_HEAD="EVENT_CHANGE_HEAD",A.EVENT_MODIFY_HEAD="EVENT_MODIFY_HEAD",A.EVENT_ITEM_UPDATE="EVENT_ITEM_UPDATE",A.EVENT_SNAKE_UPDATE="EVENT_SNAKE_UPDATE",A.EVENT_ROLE_UPDATE="EVENT_ROLE_UPDATE",A.STAGE_ON_BLUR="STAGE_ON_BLUR",A.STAGE_ON_FOCUS="STAGE_ON_FOCUS",A.ACCOUNTVO_UPDATE="ACCOUNTVO_UPDATE",A.EVENT_WAIT_PLAYERINFO="EVENT_WAIT_PLAYERINFO",A.EVENT_END_HEROBUY="EVENT_END_HEROBUY",A.EVENT_END_HEROTRANSFER="EVENT_END_HEROTRANSFER",A.EVENT_REFRESH_HEROTRANSFER="EVENT_REFRESH_HEROTRANSFER",A.EVENT_REFRESH_QUAN_STATUS="EVENT_REFRESH_QUAN_STATUS",A.EVENT_REFRESH_ITEM_ONCHAIN_STATUS="EVENT_REFRESH_ITEM_ONCHAIN_STATUS",A.EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS="EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS",A.EVENT_REFRESH_NODE_ONCHAIN_STATUS="EVENT_REFRESH_NODE_ONCHAIN_STATUS",A.EVENT_REFRESH_UNIONMEMBER_TRANSFER="EVENT_REFRESH_UNIONMEMBER_TRANSFER",A.EVENT_REFRESH_KNAPSACK="EVENT_REFRESH_KNAPSACK",A.EVENT_ADD_UNIONMEMBER_ADDRESS="EVENT_ADD_UNIONMEMBER_ADDRESS",A.EVENT_ADD_TICKET_ADDRESS="EVENT_ADD_TICKET_ADDRESS",A.EVENT_EMOJI_ICON_SELECT="EVENT_EMOJI_ICON_SELECT",A.EVENT_COLOR_ICON_SELECT="EVENT_COLOR_ICON_SELECT",A.EVENT_CHECK_ICON_SELECT="EVENT_CHECK_ICON_SELECT",A.EVENT_CHECK_PLAYER_NUM_SELECT="EVENT_CHECK_PLAYER_NUM_SELECT",A.EVENT_CHECK_NODE_SELECT="EVENT_CHECK_NODE_SELECT",A.PACKAGE_UPDATE_ITEM="PACKAGE_UPDATE_ITEM",A.IMPROVE_SUCESS_EVENT="IMPROVE_SUCESS_EVENT",A.CHANG_POTRAIT="CHANG_POTRAIT",A.ROLE_INFO_CHANGE="ROLE_INFO_CHANGE",A.ROLE_INFO_UPDATE="ROLE_INFO_UPDATE",A.UPDATE_ASSETS="UPDATE_ASSETS",A.REFRESH_MAIN_TASK="REFRESH_MAIN_TASK",A.RECIVE_SUCESS_SERVICE="RECIVE_SUCESS_SERVICE",A.SCENE_ROLE_COMPELTE="SCENE_ROLE_COMPELTE",A.FITTING_CLOTH_BTN="FITTING_CLOTH_BTN",A.STORE_CLICKBG_EVENT="STORE_CLICKBG_EVENT",A.CLOSE_BG_VIEW="CLOSE_BG_VIEW",A.EVENT_UPDATE_ONLINE="EVENT_UPDATE_ONLINE",A.VIP_INFO_CHANGE="VIP_INFO_CHANGE",A.EVENT_FUNCTION_OPEN_UPDATE="EVENT_FUNCTION_OPEN_UPDATE",A.EVENT_ADD_ACTIVITY="EVENT_ADD_ACTIVITY",A.EVENT_REMOVE_ACTIVITY="EVENT_REMOVE_ACTIVITY",A.UPDATE_CHAO_PIAO="UPDATE_CHAO_PIAO",A.UPDATE_EXCHANGE_INFO="UPDATE_EXCHANGE_INFO",A.UPDATE_RED_STATE_EVENT="UPDATE_RED_STATE_EVENT",A.SYSTEM_OPEN_TIME_INITED="SYSTEM_OPEN_TIME_INITED",A.EVENT_OPEN_SHARE="EVENT_OPEN_SHARE",A.CHANGE_SCENE_BASE_ROLE_LAYER="CHANGE_SCENE_BASE_ROLE_LAYER",A.EVENT_CLICK_NUM="EVENT_CLICK_NUM",A.EVENT_CLICK_SPACE="EVENT_CLICK_SPACE",A.EVENT_HERO_DRAW_BACK="EVENT_HERO_DRAW_BACK",A.EVENT_Close_CreateRoom="EVENT_Close_CreateRoom",A.EVENT_ENTER_MATCH_ROOM="EVENT_ENTER_MATCH_ROOM",A.EVENT_UPDATE_MATCH_ROOM="EVENT_UPDATE_MATCH_ROOM",A.EVENT_CLICK_HERO="EVENT_CLICK_HERO",A.UPDATE_KILL_NUM="UPDATE_KILL_NUM",A.EVENT_PVP_INIT_DATA="EVENT_PVP_INIT_DATA",A.EVENT_PVP_RESTORE_DATA="EVENT_PVP_RESTORE_DATA",A.EVENT_FirstBlood="EVENT_FirstBlood",A.EVENT_MutiKill="EVENT_MutiKill",A.EVENT_GameScene_Gray="EVENT_GameScene_Gray",A.EVENT_Game_Delay="EVENT_Game_Delay",A.EVENT_UPDATE_ITEM_SKILL_COOL="UPDATE_SKILL_COOLTIME",A.EVENT_UPDATE_GLOBAL_COOL="EVENT_UPDATE_GLOBAL_COOL",A.EVENT_UPDATE_REDECE_COOL="EVENT_UPDATE_REDECE_COOL",A.EVENT_REFRESH_BAN_ACCOUNT="EVENT_REFRESH_BAN_ACCOUNT",A.EVENT_SUB_GUILD_UPDATE="EVENT_SUB_GUILD_UPDATE",A.EVENT_UNION_APPLY_MEMBER_UPDATE="EVENT_UNION_APPLY_MEMBER_UPDATE",A.EVENT_WELFARE_CLAIM="EVENT_WELFARE_CLAIM",A.EVENT_RECHARGE_GET="EVENT_RECHARGE_GET",A.CHANGE_WALLET_HERO="CHANGE_WALLET_HERO",A.CHANGE_ASSET_CHAIN="CHANGE_ASSET_CHAIN",A.CHANGE_WALLET_PROP="CHANGE_WALLET_PROP",A.CREATE_SUB_WALLET_SUCCESS="CREATE_SUB_WALLET_SUCCESS",A.REFRESH_ALL_WITHDRAW_DATA="REFRESH_ALL_WITHDRAW_DATA",A.CHANGE_FRIEND_APPLY_LIST="CHANGE_FRIEND_APPLY_LIST",A.CHANGE_FRIEND_LIST="CHANGE_FRIEND_LIST",A.REFRSH_RED="REFRSH_RED",A.REFRSH_APPLY_FRIEND_LIST="REFRSH_APPLY_FRIEND_LIST",A.ADD_AIR_WALLET_ITEM="ADD_AIR_WALLET_ITEM",A.ADD_AIR_SUB_WALLET_NAME="ADD_AIR_SUB_WALLET_NAME",A.AIR_SUB_WALLET_OPENHERO="AIR_SUB_WALLET_OPENHERO",A.CHANGE_WALLET_HERO_AIR="CHANGE_WALLET_HERO_AIR",A.UPDATE_UNION_MEMBER_LIST="UPDATE_UNION_MEMBER_LIST",A.EVENT_ADD_MONEY_ADDRESS="EVENT_ADD_MONEY_ADDRESS",A.REFRESH_MAINSCENE_HEAD_RED="REFRESH_MAINSCENE_HEAD_RED",A.REFRESH_ROLEINFO_RED="REFRESH_ROLEINFO_RED",A.REFRESH_ACTIVITY_RED="REFRESH_ACTIVITY_RED",A.SHOW_EQUIP_TIP="SHOW_EQUIP_TIP",A.REFRESH_RANK_DIALOG_RED="REFRESH_RANK_DIALOG_RED",A.REFRESH_MAIL_RED="REFRESH_MAIL_RED",A.SHOW_EQUIP_SHOP_TIP="SHOW_EQUIP_SHOP_TIP",A.ON_CONNECT_GAME_SERVER="ON_CONNECT_GAME_SERVER",A.LENGTH_CHANGE="LENGTH_CHANGE",A.KILL_SNAKE="KILL_SNAKE",A.UPDATE_LOCAL_WALLET_LIST_EVENT="UPDATE_LOCAL_WALLET_LIST_EVENT",A.UPDATE_TOKEN_BALANCE="UPDATE_TOKEN_BALANCE",A.UPDATE_BAG_INFO="UPDATE_BAG_INFO",A.EVENT_CHANGE_NODE="EVENT_CHANGE_NODE",A.EVENT_NEW_NOTICE="EVENT_NEW_NOTICE",A.EVENT_NEW_NOTICE_ADDED="EVENT_NEW_NOTICE_ADDED",A.EVENT_MARQUEE_EMPTY="EVENT_MARQUEE_EMPTY",A.EVENT_CHANGE_CLUB_RATE="EVENT_CHANGE_CLUB_RATE",A.EVENT_CLUB_INFO_CHANGE="EVENT_CLUB_INFO_CHANGE"});var Zt,ss=_(()=>{"use strict";Zt=class i{constructor(e=0,t=0){this.x=e,this.y=t}static create(e=0,t=0){return new i(e,t)}assign(e){return this.x=e.x,this.y=e.y,this}add(e){return new i(this.x+e.x,this.y+e.y)}sub(e){return new i(this.x-e.x,this.y-e.y)}mul(e){return new i(this.x*e,this.y*e)}getRotation(){let e=Math.atan2(this.y,this.x)*180/Math.PI;return e<0&&(e+=360),e}getRotationTo(e){let t=e.x-this.x,r=e.y-this.y,s=Math.atan2(r,-t)*180/Math.PI;return s<0&&(s+=360),s}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y);return e!==0&&(this.x/=e,this.y/=e),this}rotate(e){let t=e*Math.PI/180,r=Math.sin(t),s=Math.cos(t),o=this.x,l=this.y;this.x=o*s-l*r,this.y=o*r+l*s}dot(e){return this.x*e.x+this.y*e.y}equal(e){return this.x===e.x&&this.y===e.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}init(e=0,t=0){return this.x=e,this.y=t,this}clone(){return new i(this.x,this.y)}clamp(e,t){let r=this.length();return r>t&&this.normalize().mul(t),r<e&&this.normalize().mul(e),this}reset(){return this.x=0,this.y=0,this}toString(){return`(${this.x},${this.y})`}}});var Oe,me,oi=_(()=>{"use strict";Oe=class Oe{constructor(){this._touchEnabled=!0;if(Oe._instance)throw new Error("LayerManager是单例,不可new.");Oe._instance=this}get m_sprPanelLayer(){return this._m_sprPanelLayer}set m_sprPanelLayer(e){this._m_sprPanelLayer=e}get m_sprMainUILayer(){return this._m_sprMainUILayer}set m_sprMainUILayer(e){this._m_sprMainUILayer=e}get m_sprTipLayer(){return this._m_sprTipLayer}set m_sprTipLayer(e){this._m_sprTipLayer=e}static get instence(){return Oe._instance||(Oe._instance=new Oe),Oe._instance}init(){this.m_sprSceneLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprSceneLayer),this.m_sprMainUILayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprMainUILayer),this.m_sprPanelLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprPanelLayer),this.m_sprPopLayer=new Laya.Sprite,this.m_sprPopLayer.mouseThrough=!0,Laya.stage.addChild(this.m_sprPopLayer),this.m_sprTipLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTipLayer),this.m_sprGuideLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprGuideLayer),this.m_sprTopLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTopLayer)}get touchEnabled(){return this._touchEnabled}set touchEnabled(e){this._touchEnabled!=e&&(this._touchEnabled=e,this.m_sprSceneLayer.mouseEnabled=this._touchEnabled,this.m_sprMainUILayer.mouseEnabled=this._touchEnabled,this.m_sprPanelLayer.mouseEnabled=this._touchEnabled,this.m_sprPopLayer.mouseEnabled=this._touchEnabled,this.m_sprTipLayer.mouseEnabled=this._touchEnabled,this.m_sprGuideLayer.mouseEnabled=this._touchEnabled,this.m_sprTopLayer.mouseEnabled=this._touchEnabled)}addToLayerAndSet(e,t=Oe.M_PANEL,r=Oe.CENTER){this.addToLayer(e,t),this.setPosition(e,r)}getLayerIndex(e,t=Oe.M_PANEL){let r;switch(t){case Oe.M_SCENE:r=this.m_sprSceneLayer.getChildIndex(e);break;case Oe.M_MAINUI:r=this.m_sprMainUILayer.getChildIndex(e);break;case Oe.M_PANEL:r=this.m_sprPanelLayer.getChildIndex(e);break;case Oe.M_POP:r=this.m_sprPopLayer.getChildIndex(e);break;case Oe.M_TIP:r=this.m_sprTipLayer.getChildIndex(e);break;case Oe.M_GUIDE:r=this.m_sprGuideLayer.getChildIndex(e);break;case Oe.M_TOP:r=this.m_sprTopLayer.getChildIndex(e);break}return r}addToLayerAt(e,t=Oe.M_PANEL,r=0){switch(t){case Oe.M_SCENE:this.m_sprSceneLayer.addChildAt(e,r);break;case Oe.M_MAINUI:this.m_sprMainUILayer.addChildAt(e,r);break;case Oe.M_PANEL:this.m_sprPanelLayer.addChildAt(e,r);break;case Oe.M_POP:this.m_sprPopLayer.addChildAt(e,r);break;case Oe.M_TIP:this.m_sprTipLayer.addChildAt(e,r);break;case Oe.M_GUIDE:this.m_sprGuideLayer.addChildAt(e,r);break;case Oe.M_TOP:this.m_sprTopLayer.addChildAt(e,r);break}}addToLayer(e,t=Oe.M_PANEL){switch(t){case Oe.M_SCENE:this.m_sprSceneLayer.addChild(e);break;case Oe.M_MAINUI:this.m_sprMainUILayer.addChild(e);break;case Oe.M_PANEL:this.m_sprPanelLayer.addChild(e);break;case Oe.M_POP:this.m_sprPopLayer.addChild(e);break;case Oe.M_TIP:this.m_sprTipLayer.addChild(e);break;case Oe.M_GUIDE:this.m_sprGuideLayer.addChild(e);break;case Oe.M_TOP:this.m_sprTopLayer.addChild(e);break}}removeFromLayer(e,t){switch(t){case Oe.M_SCENE:this.m_sprSceneLayer.removeChild(e);break;case Oe.M_MAINUI:this.m_sprMainUILayer.removeChild(e);break;case Oe.M_PANEL:this.m_sprPanelLayer.removeChild(e);break;case Oe.M_POP:this.m_sprPopLayer.removeChild(e);break;case Oe.M_GUIDE:this.m_sprGuideLayer.removeChild(e);break;case Oe.M_TOP:this.m_sprTopLayer.removeChild(e);break}}clearLayer(e){switch(e){case Oe.M_SCENE:this.m_sprSceneLayer.removeChildren();break;case Oe.M_MAINUI:this.m_sprSceneLayer.removeChildren();break;case Oe.M_PANEL:this.m_sprSceneLayer.removeChildren();break;case Oe.M_POP:this.m_sprSceneLayer.removeChildren();break;case Oe.M_TOP:this.m_sprSceneLayer.removeChildren();break}}get stageWidth(){let e;return e=Laya.stage.width,e}get stageHeight(){let e;return e=Laya.stage.height,e}setPosition(e,t,r=0,s=0,o=!1,l=!1){let u=Laya.stage.width,p=Laya.stage.height;switch(this.m_iStageWidth=u,this.m_iStageHeight=p,t){case Oe.UP:e.x=o?u/2:(u-e.width*e.scaleX)/2,e.y=0;break;case Oe.DOWN:e.x=o?u/2:(u-e.width*e.scaleX)/2,e.y=p-e.height*e.scaleY;break;case Oe.LEFT:e.x=0,e.y=l?p/2:(p-e.height*e.scaleY)/2;break;case Oe.RIGHT:e.x=u-e.width*e.scaleX,e.y=l?p/2:(p-e.height*e.scaleY)/2;break;case Oe.LEFTUP:e.x=0,e.y=0;break;case Oe.RIGHTUP:e.x=u-e.width*e.scaleX,e.y=0;break;case Oe.LEFTDOWN:e.x=0,e.y=p-e.height*e.scaleY;break;case Oe.RIGHTDOWN:e.x=u-e.width*e.scaleX,e.y=p-e.height*e.scaleY;break;case Oe.CENTERLEFT:e.x=u/2-e.width*e.scaleX,e.y=l?p/2:(p-e.height*e.scaleY)/2;break;case Oe.CENTERRIGHT:e.x=u/2,e.y=l?p/2:(p-e.height*e.scaleY)/2;break;case Oe.CENTER:e.x=o?u/2:(u-e.width*e.scaleX)/2,e.y=l?p/2:(p-e.height*e.scaleY)/2;break;default:break}e.x+=r,e.y+=s}setLayer(e,t,r){if(!e||!t||e.parent!=t.parent)return;let s=e.parent.getChildIndex(e),o=t.parent.getChildIndex(t);r?s>o&&(e.parent.setChildIndex(e,o),e.parent.setChildIndex(t,s)):s<o&&(e.parent.setChildIndex(e,o),e.parent.setChildIndex(t,s))}};Oe.M_SCENE=1,Oe.M_MAINUI=2,Oe.M_PANEL=3,Oe.M_POP=4,Oe.M_TIP=5,Oe.M_GUIDE=7,Oe.M_TOP=6,Oe.UP=1,Oe.DOWN=16,Oe.LEFT=256,Oe.RIGHT=4096,Oe.CENTER=65536,Oe.LEFTUP=Oe.LEFT|Oe.UP,Oe.RIGHTUP=Oe.RIGHT|Oe.UP,Oe.LEFTDOWN=Oe.LEFT|Oe.DOWN,Oe.RIGHTDOWN=Oe.RIGHT|Oe.DOWN,Oe.CENTERLEFT=Oe.CENTER|Oe.LEFT,Oe.CENTERRIGHT=Oe.CENTER|Oe.RIGHT,Oe.MOVE=-1;me=Oe});var ht,$r=_(()=>{"use strict";ht=class{constructor(e=!1){this._cachedValues=[];this._dirty=!0;this._needCache=!1;this._map=new Map;this.SERIALIZATION_NUM=new Date().getTime(),this._needCache=e}get values(){return this._needCache?(this._dirty&&(this._cachedValues=[...this._map.values()],this._dirty=!1),this._cachedValues):[...this._map.values()]}get keys(){return[...this._map.keys()]}set(e,t){this._map.set(e,t),this._dirty=!0}get(e){return this._map.get(e)}remove(e){return this._dirty=!0,this._map.delete(e)}clear(){this._map.clear(),this._cachedValues.length=0,this._dirty=!0}has(e){return this._map.has(e)}get size(){return this._map.size}getValues(){return this._map.values()}getMap(){return this._map}}});var ei,fr=_(()=>{"use strict";ei=class{constructor(){this._keys=[];this.THIS_ID="id"}init(e){for(let t in e){this._keys.push(t);let r=e[t];e[t]instanceof String&&String(e[t]).indexOf("[[")>=0&&(r=JSON.parse(e[t])),this[t]=r}}checkItems(){}}});var uo,pf=_(()=>{"use strict";fr();uo=class extends ei{constructor(){super()}}});var Po,nv,et,cr=_(()=>{"use strict";jt();oi();Po=class Po{constructor(){this._list=[];this._isNoticing=!1;this._isListener=!1}static getInstance(){return Po._instance||(Po._instance=new Po),Po._instance}notice(e){this._isNoticing?this._isListener||(this._isListener=!0,this._list.push(e),Laya.timer.loop(Po.Tip_Interval,this,this.onInterVal)):(this._list.push(e),this.noticeOne())}noticeOne(){var e=ge.m_objModuleViews.TxtNoticeView;let t;Laya.loader.load(e).then(r=>{if(!r){console.log("noticeOne : "+e+"  res is null");return}t=Laya.Pool.getItemByCreateFun("txtNotice",r.create,r);let s=this._list.shift();t.notice(s),Laya.stage.addChild(t),t.x=me.instence.stageWidth*.5-t.width*.5,t.y=me.instence.stageHeight*.5-t.height*.5,Laya.Tween.to(t,{y:t.y-250,alpha:.5},1e3,null,Laya.Handler.create(this,this.onFinish,[t]),1e3)})}onFinish(e){e&&(e.visible=!1,e.removeSelf())}onInterVal(){this._list.length>=1?this.noticeOne():(this._isNoticing=!1,this._isListener=!1,Laya.timer.clear(this,this.onInterVal))}};Po.Tip_Interval=1e3;nv=Po,et=nv.getInstance()});var Na,sv=_(()=>{"use strict";fr();Na=class extends ei{}});var Oa,ok=_(()=>{"use strict";Oa=class{constructor(){}};Oa.Lan_en=1,Oa.Lan_zh=6,Oa.Lan_tr=7});var Gt,Fa=_(()=>{"use strict";Gt=class{};Gt.TYPE_EXP=3003,Gt.TYPE_GOLD=3005,Gt.TYPE_TOX=3001,Gt.TYPE_USDT=3004,Gt.TYPE_BTC=3006,Gt.TYPE_ETH=3007,Gt.TYPE_BTOX=3011,Gt.TYPE_GALA=3010,Gt.TYPE_BNB=3013,Gt.TYPE_GGG=3017,Gt.TYPE_KLAY=3015,Gt.TYPE_BNRY=3016,Gt.TYPE_LLE=3017,Gt.TYPE_PC=3022,Gt.TYPE_SOL=3023,Gt.TYPE_MNT=3024,Gt.TYPE_PAS=3025,Gt.TYPE_QUAN_PVE=1980,Gt.TYPE_QUAN_MNT=4001,Gt.TYPE_REWARD_TOKEN=-9999});var Uo,hf=_(()=>{"use strict";Uo=class{constructor(){this.coins={};this.needTip=!0}}});var Ol,ov=_(()=>{"use strict";Ol=class{constructor(e,t){this._valuesObject={};this.sheetObject=e,this.BaseItemClass=t}get keys(){if(this._keys)return this._keys;this._keys=[];for(let e in this.sheetObject)!e||e==""||this._keys.push(e);return this._keys}get values(){if(this._values)return this._values;this._values=[];let e;for(let t in this.sheetObject)this._valuesObject[t]?e=this._valuesObject[t]:(e=new this.BaseItemClass,e.init(this.sheetObject[t]),this._valuesObject[t]=e),this._values.push(e);return this._values}get(e){return this._valuesObject[e]?this._valuesObject[e]:this.sheetObject[e]}get1(e){if(this._valuesObject[e])return this._valuesObject[e];let t=this.sheetObject[e];if(t)return t;let r;this.BaseItemClass&&(r=new this.BaseItemClass,r.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig()  class : "+this.BaseItemClass),r.init(t)),this._valuesObject;let s=r||t;return this._valuesObject[e]=s,s}indexOf(e){let t=this._keys.indexOf(e);return t>=0?t:(e=e instanceof String?Number(e):e instanceof Number?e.toString():e,this._keys.indexOf(e))}clear(){this.sheetObject=null}}});var av,df,lv=_(()=>{"use strict";pf();ov();jt();av=class i{constructor(){}static getInstance(){return i._instance||(i._instance=new i),i._instance}initSpotCfgData(){if(this.spotDic==null){let e=ge.getResByURL("config/spot.json");this.spotDic=new Ol(e.data,uo)}}getSpotById(e){return this.initSpotCfgData(),this.spotDic.get(e)}get getSpotDic(){return this.initSpotCfgData(),this.spotDic}},df=av.getInstance()});var cv,Wt,cn=_(()=>{"use strict";lv();cv=class i{constructor(){}static getInstance(){return i._instance||(i._instance=new i),i._instance}registerCommCallBack(e=null){Laya.LayaEnv.isConch}sendCustumEvent(e,t=null,r=null){let s;if(r?s=r:s=df.getSpotById(e),!s||!s.Event)return;let o=new Object;o.id=s.ID,o.eventKey=s.Event,o.type=s.type,this.sendWebEvent(o)}sendWebEvent(e){}dispose(){}reload(){Laya.Browser.window.location.reload()}},Wt=cv.getInstance()});var uv,ak,lk=_(()=>{"use strict";uv=class i{constructor(){this.pools=new Map;this.configs=new Map}static getInstance(){return i._instance||(i._instance=new i),i._instance}register(e,t,r=0,s=1/0){this.configs.set(e,{factory:t,maxSize:s}),this.pools.set(e,[]);for(let o=0;o<r;o++)this.release(e,t())}get(e,...t){let r=this.pools.get(e);if(!r)throw new Error(`Type ${e.name} not registered`);let s=r.length>0?r.pop():this.configs.get(e).factory();return s.init&&s.init(...t),s}release(e,t){let r=this.configs.get(e);if(!r)throw new Error(`Type ${e.name} not registered`);let s=this.pools.get(e);t.reset&&t.reset(),s.length<r.maxSize&&s.push(t)}clear(e){this.pools.set(e,[])}clearAll(){this.pools.clear()}},ak=uv.getInstance()});var mf,ck=_(()=>{"use strict";fr();mf=class extends ei{constructor(){super()}}});var ff,uk=_(()=>{"use strict";fr();ff=class extends ei{realIcon(){return"https://cdn.bunnyswap.cc/images/items/"+this.icon}get starArr(){if(this._starArr)return this._starArr;if(this._starArr=[],this.max_quality==0)return this._starArr;let t=this.quality/this.max_quality*5;for(let r=1;r<=5;r++)t>=r?this._starArr.push(0):r-t<=.5?this._starArr.push(2):this._starArr.push(1);return this._starArr}}});var gf,pk=_(()=>{"use strict";fr();gf=class extends ei{}});var bf,hk=_(()=>{"use strict";fr();bf=class extends ei{constructor(){super()}}});var yf,dk=_(()=>{"use strict";fr();yf=class extends ei{}});var _f,mk=_(()=>{"use strict";fr();_f=class extends ei{constructor(){super()}}});var xf,fk=_(()=>{"use strict";fr();xf=class extends ei{}});var vf,gk=_(()=>{"use strict";fr();vf=class extends ei{}});var If,bk=_(()=>{"use strict";fr();If=class extends ei{}});var Sf,yk=_(()=>{"use strict";fr();Sf=class extends ei{constructor(){super(...arguments);this.dT=1e4;this.lastPingTimestamp=0;this.pingFailCount=0}setDelay(t){this.dT=t,t<9999?(this.lastPingTimestamp=Date.now(),this.pingFailCount=0):this.pingFailCount++}getDisplayDelay(){if(this.dT<9999)return this.dT;if(this.lastPingTimestamp===0||this.pingFailCount>2)return 9999;let t=Date.now(),r=3*60*1e3;return t-this.lastPingTimestamp<r?Math.min(this.dT+100,9998):9999}async testUrl(){}getUrl(){var t=this.url;let r=new Date().getTime(),s=this,o=new XMLHttpRequest;o.open("GET",t,!0),o.onload=function(){if(o.status>=200&&o.status<300)try{let u=o.responseText;var l=new Date().getTime()-r;s.setDelay(l)}catch{console.log("Response is not valid JSON")}else console.error(`Error: ${o.status}`)},o.onerror=function(){console.error("Network error")},o.send()}}});var wf,_k=_(()=>{"use strict";fr();wf=class extends ei{}});var kf,xk=_(()=>{"use strict";fr();kf=class extends ei{}});var Ef,vk=_(()=>{"use strict";fr();Ef=class extends ei{}});var Lf,Ik=_(()=>{"use strict";fr();Lf=class extends ei{}});var pv,ie,yi=_(()=>{"use strict";pv=class i{constructor(){this.IsRelease=!1;this.m_bInstantGame=!1;this.useWebVersion=!1;this.m_strVersionEX="V003";this.m_bIsMobWeb=!1;this.m_strWebTag="";this.Js_Version="1";this.Game_Version="20231227_01";this.App_Version="1.0.0";this.SDK_Version="1.0.0";this.M_strCountry="1";this.M_bAppData=!1;this.bookingId=0;this.teamId=0;this.referral="";this.showHeartLog=!1;this.ignoreLang=!1;this.ignoreSheetNo=!1;this.m_bIsIphoneX=!1;this.Debug=0;this.Res=0;this.isTest=!0;this.Server_URL="";this.IP_User="";this.Plantform_APPID="17";this.ServerId=22310001;this.Login_UID="-1";this._LoginType="gamecenter";this.isInto=!1;this.needDraw=!1;this.isFull=!1;this.justFull=!1;this.Login_UDID="81BC19A8-B49B-47CC-BEFE-193E723B521A";this.Device_Info="";this.FCM_Token="";this.APP_IsRelease=!0;this.User_Lan="en";this.UserAgent="";this.Login_UserName="";this.isWhite=!0;this.APP_RES="";this.COOKIE_CF_LAN="COOKIE_GG_LAN";this.COOKIE_CF_LoginType="COOKIE_CF_LoginType";this.IPHONEX_SCARE=1.22;this.IPHONEX_TOP=44;this.IPHONEX_BUTTOM=34;this.DESIGN_WIDTH=1280;this.DESIGN_HEIGHT=720;this._m_iTimeFrame=0}get LoginType(){return i._instance._LoginType}set LoginType(e){i._instance._LoginType=e,i._instance._LoginType&&i._instance._LoginType!=""&&Laya.LocalStorage.setItem(i._instance.COOKIE_CF_LoginType,i._instance._LoginType)}get isWhiteList(){return!0}static getInstance(){return i._instance||(i._instance=new i),i._instance}static get server(){return getServer()}get vType(){return getVType()}get vaddress(){return getVAddress()}get requestTime(){return 0}get loginTime(){return 0}set m_iTimeFrame(e){if(e>1500){let t=function(){i._instance._m_iTimeFrame=0};i._instance._m_iTimeFrame=e,Laya.timer.clear(Laya.timer,t),Laya.timer.once(500,Laya.timer,t)}}get m_iTimeFrame(){return i._instance._m_iTimeFrame}},ie=pv.getInstance()});var Tf,Sk=_(()=>{"use strict";fr();Tf=class extends ei{}});var Cf,wk=_(()=>{"use strict";fr();Cf=class extends ei{}});var Af,kk=_(()=>{"use strict";fr();Af=class extends ei{}});var pt,Xp=_(()=>{"use strict";pt=class{constructor(){}};pt.NO_ALL=-1,pt.YES=1,pt.NO=2,pt.SURE=4,pt.CANCEL=8,pt.CLOSE=16,pt.RETURN_YES=1,pt.RETURN_NO=2,pt.RETURN_NONE=3,pt.BASEALERTVIEW="BaseAlertDialog",pt.MatchConfimDialog="MatchConfimDialog",pt.InviteConfimDialog="InviteConfimDialog",pt.ApplyConfimDialog="ApplyConfimDialog",pt.BUYCONFIRMVIEW="BuyConfirmView",pt.GUILDQUITVIEW="GuildQuitView",pt.BuyItemConfirmView="BuyItemConfirmView",pt.DOWNLOADALERT="DownLoadAlert"});var Re,Rr=_(()=>{"use strict";Re=class{};Re.M_SCENE_MAIN="M_SCENE_MAIN",Re.M_SCENE_SHOP="M_SCENE_SHOP",Re.M_SCENE_AIRDROP="M_SCENE_AIRDROP",Re.M_SCENE_HERO="M_SCENE_HERO",Re.M_SCENE_RANK="M_SCENE_RANK",Re.M_SCENE_CLUB="M_SCENE_CLUB",Re.M_SCENE_PRE_LOAD="M_SCENE_PRE_LOAD",Re.M_SCENE_MATCH_READY="M_SCENE_MATCH_READY",Re.M_SCENE_MATCH="M_SCENE_MATCH",Re.M_SCENE_SNAKE_MATCH="M_SCENE_SNAKE_MATCH",Re.M_SCENE_AI_ARENA="M_SCENE_AI_ARENA",Re.M_SCENE_OPEN_GAME="M_SCENE_OPEN_GAME",Re.M_SCENE_ASSET="M_SCENE_ASSET",Re.M_SCENE_DIG="M_SCENE_DIG",Re.M_SCENE_MAIL="M_SCENE_MAIL",Re.M_SCENE_KNAPSACK="M_SCENE_KNAPSACK",Re.M_SCENE_UNION="M_SCENE_UNION",Re.M_SCENE_MYUNION="M_SCENE_MYUNION",Re.M_SCENE_LCPOOL="M_SCENE_LCPOOL",Re.M_SCENE_ARENA="M_SCENE_ARENA",Re.M_SCENE_FRIEND="M_SCENE_FRIEND",Re.M_SCENE_IGO_PAGE="M_SCENE_IGO_PAGE",Re.M_SCENE_DAILY_TASK="M_SCENE_DAILY_TASK",Re.M_SCENE_PVE="M_SCENE_PVE",Re.M_SCENE_ROLE="M_SCENE_ROLE",Re.M_SCENE_SETTING="M_SCENE_SETTING"});var hv,Fr,dv=_(()=>{"use strict";Xp();Vi();hv=class i{constructor(){}static getInstance(){return i._instance||(i._instance=new i),i._instance}AlertByType(e,t=null,r=0,s=null,o=null,l=!1,u=null){r==0&&(r=pt.YES|pt.NO),this.onLoaded(r,e,t,s,o,l,u)}onLoaded(e,t,r,s=null,o=null,l=!1,u=null){at.intance.openModule(t,{flag:e,okHandler:s,cancelHandler:o,data:r,destroyDoCancel:l,initHandler:u})}},Fr=hv.getInstance()});var mv,bt,Pr=_(()=>{"use strict";Vi();Rr();ri();ur();xt();mv=class i{constructor(){this.mainSceneX=10086;this.isCloseAll=!0;L.on(A.EVENT_MODULE_ADDED,this,this.onAdded)}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){}setup(){}onAdded(e){}getPreSceneData(){if(this.m_arrFromScenes.length<1)return[Re.M_SCENE_MAIN,!0,1,null];{let e=this.m_arrFromScenes.pop();return console.log("pop-----------route："+this.m_arrFromScenes.join(" | ")),e}}removePreSceneData(){this.m_arrFromScenes=[]}setMainScene(e=1,t=null){this.setCurrentScene(Re.M_SCENE_MAIN,t)}async setCurrentScene(e,t=null){if(console.log("setCurrentScene: ",e,t),this.preSceneName=e,this.m_sceneCurrent&&this.m_sceneCurrent.name==e){console.log("currentScene："+this.m_sceneCurrent.name+"  openScene：："+e);return}switch(this.isCloseAll?at.intance.closeAll():this.isCloseAll=!0,this.m_sceneCurrent&&(this.m_arrFromScenes||(this.m_arrFromScenes=[]),console.log("open-----------scene："+this.m_arrFromScenes),this.fromScene=this.m_sceneCurrent.name,console.log("fromSceneName: "+this.fromScene)),e){case Re.M_SCENE_MAIN:this.m_arrFromScenes=[],this.m_sceneCurrent=await Laya.Scene.open("scenes/mainView/MainScene.ls");break;case Re.M_SCENE_SHOP:this.m_sceneCurrent=await Laya.Scene.open("scenes/shop/ShopScene.ls",!0,t);break;case Re.M_SCENE_RANK:this.m_sceneCurrent=await Laya.Scene.open("scenes/rank/RankScene.ls");break;case Re.M_SCENE_CLUB:this.m_sceneCurrent=await Laya.Scene.open("scenes/club/ClubScene.ls");break;case Re.M_SCENE_FRIEND:this.m_sceneCurrent=await Laya.Scene.open("scenes/friend/FriendScene.ls");break;case Re.M_SCENE_KNAPSACK:this.m_sceneCurrent=await Laya.Scene.open("scenes/knapsack/KnapsackScene.ls",!0,t);break;case Re.M_SCENE_MAIL:this.m_sceneCurrent=await Laya.Scene.open("scenes/mail/MailScene.ls");break;case Re.M_SCENE_SNAKE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/SnakeMatch.ls");break;case Re.M_SCENE_AI_ARENA:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/AiArenaScene.ls");break;case Re.M_SCENE_ASSET:this.m_sceneCurrent=await Laya.Scene.open("scenes/asset/AssetNewScene.ls",!0,t);break;case Re.M_SCENE_ROLE:this.m_sceneCurrent=await Laya.Scene.open("scenes/createRole/RoleInfoScene.ls",!1,t);break;case Re.M_SCENE_SETTING:this.m_sceneCurrent=await Laya.Scene.open("scenes/gameSetting/SettingScene.ls",!1,t);break;default:break}ye.logs("======================  打开Scene: "+e+"  ======================"),this.m_sceneCurrent.name=e}get currSceneName(){return this.m_sceneCurrent?this.m_sceneCurrent.name:""}},bt=mv.getInstance()});var pr,fv=_(()=>{"use strict";$r();pr=class{static initConfig(e){this.configDic=new ht;for(let t of e){let r=t.sstringvalue;t.sadditional==="JSON"&&(r=JSON.parse(r)),this.configDic.set(t.skey2,r),this[t.skey2]=r}}};pr.ADDRESS0="0x0000000000000000000000000000000000000000",pr.TOKEN_ERC20ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"miner",type:"address"}],name:"addMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_delMinter",type:"address"}],name:"delMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idx",type:"uint256"}],name:"getMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMinterLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],pr.WITHDRAW_AND_RECHARGE_ADDRESS="",pr.WITHDRAW_AND_RECHARGE_ABI=""});var Ek=lf((gv,bv)=>{"use strict";(function(i,e){typeof gv=="object"&&typeof bv<"u"?bv.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis<"u"?globalThis:i||self).jsSHA=e()})(gv,function(){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function e(G,C,U,j){var q,D,pe,fe=C||[0],we=(U=U||0)>>>3,Fe=j===-1?3:0;for(q=0;q<G.length;q+=1)D=(pe=q+we)>>>2,fe.length<=D&&fe.push(0),fe[D]|=G[q]<<8*(Fe+j*(pe%4));return{value:fe,binLen:8*G.length+U}}function t(G,C,U){switch(C){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(G){case"HEX":return function(j,q,D){return function(pe,fe,we,Fe){var lt,Ae,ze,Rt;if(pe.length%2!=0)throw new Error("String of HEX type must be in byte increments");var Te=fe||[0],$t=(we=we||0)>>>3,qt=Fe===-1?3:0;for(lt=0;lt<pe.length;lt+=2){if(Ae=parseInt(pe.substr(lt,2),16),isNaN(Ae))throw new Error("String of HEX type contains invalid characters");for(ze=(Rt=(lt>>>1)+$t)>>>2;Te.length<=ze;)Te.push(0);Te[ze]|=Ae<<8*(qt+Fe*(Rt%4))}return{value:Te,binLen:4*pe.length+we}}(j,q,D,U)};case"TEXT":return function(j,q,D){return function(pe,fe,we,Fe,lt){var Ae,ze,Rt,Te,$t,qt,ui,Ti,bn=0,zi=we||[0],Qi=(Fe=Fe||0)>>>3;if(fe==="UTF8")for(ui=lt===-1?3:0,Rt=0;Rt<pe.length;Rt+=1)for(ze=[],128>(Ae=pe.charCodeAt(Rt))?ze.push(Ae):2048>Ae?(ze.push(192|Ae>>>6),ze.push(128|63&Ae)):55296>Ae||57344<=Ae?ze.push(224|Ae>>>12,128|Ae>>>6&63,128|63&Ae):(Rt+=1,Ae=65536+((1023&Ae)<<10|1023&pe.charCodeAt(Rt)),ze.push(240|Ae>>>18,128|Ae>>>12&63,128|Ae>>>6&63,128|63&Ae)),Te=0;Te<ze.length;Te+=1){for($t=(qt=bn+Qi)>>>2;zi.length<=$t;)zi.push(0);zi[$t]|=ze[Te]<<8*(ui+lt*(qt%4)),bn+=1}else for(ui=lt===-1?2:0,Ti=fe==="UTF16LE"&&lt!==1||fe!=="UTF16LE"&&lt===1,Rt=0;Rt<pe.length;Rt+=1){for(Ae=pe.charCodeAt(Rt),Ti===!0&&(Ae=(Te=255&Ae)<<8|Ae>>>8),$t=(qt=bn+Qi)>>>2;zi.length<=$t;)zi.push(0);zi[$t]|=Ae<<8*(ui+lt*(qt%4)),bn+=2}return{value:zi,binLen:8*bn+Fe}}(j,C,q,D,U)};case"B64":return function(j,q,D){return function(pe,fe,we,Fe){var lt,Ae,ze,Rt,Te,$t,qt=0,ui=fe||[0],Ti=(we=we||0)>>>3,bn=Fe===-1?3:0,zi=pe.indexOf("=");if(pe.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(pe=pe.replace(/=/g,""),zi!==-1&&zi<pe.length)throw new Error("Invalid '=' found in base-64 string");for(lt=0;lt<pe.length;lt+=4){for(Rt=pe.substr(lt,4),ze=0,Ae=0;Ae<Rt.length;Ae+=1)ze|=i.indexOf(Rt.charAt(Ae))<<18-6*Ae;for(Ae=0;Ae<Rt.length-1;Ae+=1){for(Te=($t=qt+Ti)>>>2;ui.length<=Te;)ui.push(0);ui[Te]|=(ze>>>16-8*Ae&255)<<8*(bn+Fe*($t%4)),qt+=1}}return{value:ui,binLen:8*qt+we}}(j,q,D,U)};case"BYTES":return function(j,q,D){return function(pe,fe,we,Fe){var lt,Ae,ze,Rt,Te=fe||[0],$t=(we=we||0)>>>3,qt=Fe===-1?3:0;for(Ae=0;Ae<pe.length;Ae+=1)lt=pe.charCodeAt(Ae),ze=(Rt=Ae+$t)>>>2,Te.length<=ze&&Te.push(0),Te[ze]|=lt<<8*(qt+Fe*(Rt%4));return{value:Te,binLen:8*pe.length+we}}(j,q,D,U)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(j,q,D){return function(pe,fe,we,Fe){return e(new Uint8Array(pe),fe,we,Fe)}(j,q,D,U)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(j,q,D){return e(j,q,D,U)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function r(G,C,U,j){switch(G){case"HEX":return function(q){return function(D,pe,fe,we){var Fe,lt,Ae="",ze=pe/8,Rt=fe===-1?3:0;for(Fe=0;Fe<ze;Fe+=1)lt=D[Fe>>>2]>>>8*(Rt+fe*(Fe%4)),Ae+="0123456789abcdef".charAt(lt>>>4&15)+"0123456789abcdef".charAt(15&lt);return we.outputUpper?Ae.toUpperCase():Ae}(q,C,U,j)};case"B64":return function(q){return function(D,pe,fe,we){var Fe,lt,Ae,ze,Rt,Te="",$t=pe/8,qt=fe===-1?3:0;for(Fe=0;Fe<$t;Fe+=3)for(ze=Fe+1<$t?D[Fe+1>>>2]:0,Rt=Fe+2<$t?D[Fe+2>>>2]:0,Ae=(D[Fe>>>2]>>>8*(qt+fe*(Fe%4))&255)<<16|(ze>>>8*(qt+fe*((Fe+1)%4))&255)<<8|Rt>>>8*(qt+fe*((Fe+2)%4))&255,lt=0;lt<4;lt+=1)Te+=8*Fe+6*lt<=pe?i.charAt(Ae>>>6*(3-lt)&63):we.b64Pad;return Te}(q,C,U,j)};case"BYTES":return function(q){return function(D,pe,fe){var we,Fe,lt="",Ae=pe/8,ze=fe===-1?3:0;for(we=0;we<Ae;we+=1)Fe=D[we>>>2]>>>8*(ze+fe*(we%4))&255,lt+=String.fromCharCode(Fe);return lt}(q,C,U)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(q){return function(D,pe,fe){var we,Fe=pe/8,lt=new ArrayBuffer(Fe),Ae=new Uint8Array(lt),ze=fe===-1?3:0;for(we=0;we<Fe;we+=1)Ae[we]=D[we>>>2]>>>8*(ze+fe*(we%4))&255;return lt}(q,C,U)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(q){return function(D,pe,fe){var we,Fe=pe/8,lt=fe===-1?3:0,Ae=new Uint8Array(Fe);for(we=0;we<Fe;we+=1)Ae[we]=D[we>>>2]>>>8*(lt+fe*(we%4))&255;return Ae}(q,C,U)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],l=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],u="Chosen SHA variant is not supported";function p(G,C){var U,j,q=G.binLen>>>3,D=C.binLen>>>3,pe=q<<3,fe=4-q<<3;if(q%4!=0){for(U=0;U<D;U+=4)j=q+U>>>2,G.value[j]|=C.value[U>>>2]<<pe,G.value.push(0),G.value[j+1]|=C.value[U>>>2]>>>fe;return(G.value.length<<2)-4>=D+q&&G.value.pop(),{value:G.value,binLen:G.binLen+C.binLen}}return{value:G.value.concat(C.value),binLen:G.binLen+C.binLen}}function h(G){var C={outputUpper:!1,b64Pad:"=",outputLen:-1},U=G||{},j="Output length must be a multiple of 8";if(C.outputUpper=U.outputUpper||!1,U.b64Pad&&(C.b64Pad=U.b64Pad),U.outputLen){if(U.outputLen%8!=0)throw new Error(j);C.outputLen=U.outputLen}else if(U.shakeLen){if(U.shakeLen%8!=0)throw new Error(j);C.outputLen=U.shakeLen}if(typeof C.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof C.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return C}function f(G,C,U,j){var q=G+" must include a value and format";if(!C){if(!j)throw new Error(q);return j}if(C.value===void 0||!C.format)throw new Error(q);return t(C.format,C.encoding||"UTF8",U)(C.value)}var g=function(){function G(C,U,j){var q=j||{};if(this.t=U,this.i=q.encoding||"UTF8",this.numRounds=q.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=C,this.u=[],this.s=0,this.h=!1,this.v=0,this.A=!1,this.l=[],this.H=[]}return G.prototype.update=function(C){var U,j=0,q=this.S>>>5,D=this.p(C,this.u,this.s),pe=D.binLen,fe=D.value,we=pe>>>5;for(U=0;U<we;U+=q)j+this.S<=pe&&(this.m=this.R(fe.slice(U,U+q),this.m),j+=this.S);this.v+=j,this.u=fe.slice(j>>>5),this.s=pe%this.S,this.h=!0},G.prototype.getHash=function(C,U){var j,q,D=this.U,pe=h(U);if(this.T){if(pe.outputLen===-1)throw new Error("Output length must be specified in options");D=pe.outputLen}var fe=r(C,D,this.C,pe);if(this.A&&this.F)return fe(this.F(pe));for(q=this.K(this.u.slice(),this.s,this.v,this.B(this.m),D),j=1;j<this.numRounds;j+=1)this.T&&D%32!=0&&(q[q.length-1]&=16777215>>>24-D%32),q=this.K(q,D,0,this.L(this.o),D);return fe(q)},G.prototype.setHMACKey=function(C,U,j){if(!this.g)throw new Error("Variant does not support HMAC");if(this.h)throw new Error("Cannot set MAC key after calling update");var q=t(U,(j||{}).encoding||"UTF8",this.C);this.k(q(C))},G.prototype.k=function(C){var U,j=this.S>>>3,q=j/4-1;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(j<C.binLen/8&&(C.value=this.K(C.value,C.binLen,0,this.L(this.o),this.U));C.value.length<=q;)C.value.push(0);for(U=0;U<=q;U+=1)this.l[U]=909522486^C.value[U],this.H[U]=1549556828^C.value[U];this.m=this.R(this.l,this.m),this.v=this.S,this.A=!0},G.prototype.getHMAC=function(C,U){var j=h(U);return r(C,this.U,this.C,j)(this.Y())},G.prototype.Y=function(){var C;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");var U=this.K(this.u.slice(),this.s,this.v,this.B(this.m),this.U);return C=this.R(this.H,this.L(this.o)),C=this.K(U,this.U,this.S,C,this.U)},G}(),b=function(G,C){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,j){U.__proto__=j}||function(U,j){for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(U[q]=j[q])})(G,C)};function v(G,C){function U(){this.constructor=G}b(G,C),G.prototype=C===null?Object.create(C):(U.prototype=C.prototype,new U)}function w(G,C){return G<<C|G>>>32-C}function k(G,C){return G>>>C|G<<32-C}function E(G,C){return G>>>C}function F(G,C,U){return G^C^U}function O(G,C,U){return G&C^~G&U}function H(G,C,U){return G&C^G&U^C&U}function Y(G){return k(G,2)^k(G,13)^k(G,22)}function Z(G,C){var U=(65535&G)+(65535&C);return(65535&(G>>>16)+(C>>>16)+(U>>>16))<<16|65535&U}function W(G,C,U,j){var q=(65535&G)+(65535&C)+(65535&U)+(65535&j);return(65535&(G>>>16)+(C>>>16)+(U>>>16)+(j>>>16)+(q>>>16))<<16|65535&q}function le(G,C,U,j,q){var D=(65535&G)+(65535&C)+(65535&U)+(65535&j)+(65535&q);return(65535&(G>>>16)+(C>>>16)+(U>>>16)+(j>>>16)+(q>>>16)+(D>>>16))<<16|65535&D}function oe(G){return k(G,7)^k(G,18)^E(G,3)}function de(G){return k(G,6)^k(G,11)^k(G,25)}function Ne(G){return[1732584193,4023233417,2562383102,271733878,3285377520]}function He(G,C){var U,j,q,D,pe,fe,we,Fe=[];for(U=C[0],j=C[1],q=C[2],D=C[3],pe=C[4],we=0;we<80;we+=1)Fe[we]=we<16?G[we]:w(Fe[we-3]^Fe[we-8]^Fe[we-14]^Fe[we-16],1),fe=we<20?le(w(U,5),O(j,q,D),pe,1518500249,Fe[we]):we<40?le(w(U,5),F(j,q,D),pe,1859775393,Fe[we]):we<60?le(w(U,5),H(j,q,D),pe,2400959708,Fe[we]):le(w(U,5),F(j,q,D),pe,3395469782,Fe[we]),pe=D,D=q,q=w(j,30),j=U,U=fe;return C[0]=Z(U,C[0]),C[1]=Z(j,C[1]),C[2]=Z(q,C[2]),C[3]=Z(D,C[3]),C[4]=Z(pe,C[4]),C}function Qe(G,C,U,j){for(var q,D=15+(C+65>>>9<<4),pe=C+U;G.length<=D;)G.push(0);for(G[C>>>5]|=128<<24-C%32,G[D]=4294967295&pe,G[D-1]=pe/4294967296|0,q=0;q<G.length;q+=16)j=He(G.slice(q,q+16),j);return j}var Xt=function(G){function C(U,j,q){var D=this;if(U!=="SHA-1")throw new Error(u);var pe=q||{};return(D=G.call(this,U,j,q)||this).g=!0,D.F=D.Y,D.C=-1,D.p=t(D.t,D.i,D.C),D.R=He,D.B=function(fe){return fe.slice()},D.L=Ne,D.K=Qe,D.m=[1732584193,4023233417,2562383102,271733878,3285377520],D.S=512,D.U=160,D.T=!1,pe.hmacKey&&D.k(f("hmacKey",pe.hmacKey,D.C)),D}return v(C,G),C}(g);function Me(G){return G=="SHA-224"?o.slice():l.slice()}function _e(G,C){var U,j,q,D,pe,fe,we,Fe,lt,Ae,ze,Rt,Te=[];for(U=C[0],j=C[1],q=C[2],D=C[3],pe=C[4],fe=C[5],we=C[6],Fe=C[7],ze=0;ze<64;ze+=1)Te[ze]=ze<16?G[ze]:W(k(Rt=Te[ze-2],17)^k(Rt,19)^E(Rt,10),Te[ze-7],oe(Te[ze-15]),Te[ze-16]),lt=le(Fe,de(pe),O(pe,fe,we),s[ze],Te[ze]),Ae=Z(Y(U),H(U,j,q)),Fe=we,we=fe,fe=pe,pe=Z(D,lt),D=q,q=j,j=U,U=Z(lt,Ae);return C[0]=Z(U,C[0]),C[1]=Z(j,C[1]),C[2]=Z(q,C[2]),C[3]=Z(D,C[3]),C[4]=Z(pe,C[4]),C[5]=Z(fe,C[5]),C[6]=Z(we,C[6]),C[7]=Z(Fe,C[7]),C}var Le=function(G){function C(U,j,q){var D=this;if(U!=="SHA-224"&&U!=="SHA-256")throw new Error(u);var pe=q||{};return(D=G.call(this,U,j,q)||this).F=D.Y,D.g=!0,D.C=-1,D.p=t(D.t,D.i,D.C),D.R=_e,D.B=function(fe){return fe.slice()},D.L=Me,D.K=function(fe,we,Fe,lt){return function(Ae,ze,Rt,Te,$t){for(var qt,ui=15+(ze+65>>>9<<4),Ti=ze+Rt;Ae.length<=ui;)Ae.push(0);for(Ae[ze>>>5]|=128<<24-ze%32,Ae[ui]=4294967295&Ti,Ae[ui-1]=Ti/4294967296|0,qt=0;qt<Ae.length;qt+=16)Te=_e(Ae.slice(qt,qt+16),Te);return $t==="SHA-224"?[Te[0],Te[1],Te[2],Te[3],Te[4],Te[5],Te[6]]:Te}(fe,we,Fe,lt,U)},D.m=Me(U),D.S=512,D.U=U==="SHA-224"?224:256,D.T=!1,pe.hmacKey&&D.k(f("hmacKey",pe.hmacKey,D.C)),D}return v(C,G),C}(g),P=function(G,C){this.N=G,this.I=C};function nt(G,C){var U;return C>32?(U=64-C,new P(G.I<<C|G.N>>>U,G.N<<C|G.I>>>U)):C!==0?(U=32-C,new P(G.N<<C|G.I>>>U,G.I<<C|G.N>>>U)):G}function Ee(G,C){var U;return C<32?(U=32-C,new P(G.N>>>C|G.I<<U,G.I>>>C|G.N<<U)):(U=64-C,new P(G.I>>>C|G.N<<U,G.N>>>C|G.I<<U))}function gt(G,C){return new P(G.N>>>C,G.I>>>C|G.N<<32-C)}function pi(G,C,U){return new P(G.N&C.N^~G.N&U.N,G.I&C.I^~G.I&U.I)}function gi(G,C,U){return new P(G.N&C.N^G.N&U.N^C.N&U.N,G.I&C.I^G.I&U.I^C.I&U.I)}function Si(G){var C=Ee(G,28),U=Ee(G,34),j=Ee(G,39);return new P(C.N^U.N^j.N,C.I^U.I^j.I)}function st(G,C){var U,j;U=(65535&G.I)+(65535&C.I);var q=(65535&(j=(G.I>>>16)+(C.I>>>16)+(U>>>16)))<<16|65535&U;return U=(65535&G.N)+(65535&C.N)+(j>>>16),j=(G.N>>>16)+(C.N>>>16)+(U>>>16),new P((65535&j)<<16|65535&U,q)}function Oi(G,C,U,j){var q,D;q=(65535&G.I)+(65535&C.I)+(65535&U.I)+(65535&j.I);var pe=(65535&(D=(G.I>>>16)+(C.I>>>16)+(U.I>>>16)+(j.I>>>16)+(q>>>16)))<<16|65535&q;return q=(65535&G.N)+(65535&C.N)+(65535&U.N)+(65535&j.N)+(D>>>16),D=(G.N>>>16)+(C.N>>>16)+(U.N>>>16)+(j.N>>>16)+(q>>>16),new P((65535&D)<<16|65535&q,pe)}function Mr(G,C,U,j,q){var D,pe;D=(65535&G.I)+(65535&C.I)+(65535&U.I)+(65535&j.I)+(65535&q.I);var fe=(65535&(pe=(G.I>>>16)+(C.I>>>16)+(U.I>>>16)+(j.I>>>16)+(q.I>>>16)+(D>>>16)))<<16|65535&D;return D=(65535&G.N)+(65535&C.N)+(65535&U.N)+(65535&j.N)+(65535&q.N)+(pe>>>16),pe=(G.N>>>16)+(C.N>>>16)+(U.N>>>16)+(j.N>>>16)+(q.N>>>16)+(D>>>16),new P((65535&pe)<<16|65535&D,fe)}function an(G,C){return new P(G.N^C.N,G.I^C.I)}function Or(G){var C=Ee(G,1),U=Ee(G,8),j=gt(G,7);return new P(C.N^U.N^j.N,C.I^U.I^j.I)}function Gr(G){var C=Ee(G,14),U=Ee(G,18),j=Ee(G,41);return new P(C.N^U.N^j.N,C.I^U.I^j.I)}var rs=[new P(s[0],3609767458),new P(s[1],602891725),new P(s[2],3964484399),new P(s[3],2173295548),new P(s[4],4081628472),new P(s[5],3053834265),new P(s[6],2937671579),new P(s[7],3664609560),new P(s[8],2734883394),new P(s[9],1164996542),new P(s[10],1323610764),new P(s[11],3590304994),new P(s[12],4068182383),new P(s[13],991336113),new P(s[14],633803317),new P(s[15],3479774868),new P(s[16],2666613458),new P(s[17],944711139),new P(s[18],2341262773),new P(s[19],2007800933),new P(s[20],1495990901),new P(s[21],1856431235),new P(s[22],3175218132),new P(s[23],2198950837),new P(s[24],3999719339),new P(s[25],766784016),new P(s[26],2566594879),new P(s[27],3203337956),new P(s[28],1034457026),new P(s[29],2466948901),new P(s[30],3758326383),new P(s[31],168717936),new P(s[32],1188179964),new P(s[33],1546045734),new P(s[34],1522805485),new P(s[35],2643833823),new P(s[36],2343527390),new P(s[37],1014477480),new P(s[38],1206759142),new P(s[39],344077627),new P(s[40],1290863460),new P(s[41],3158454273),new P(s[42],3505952657),new P(s[43],106217008),new P(s[44],3606008344),new P(s[45],1432725776),new P(s[46],1467031594),new P(s[47],851169720),new P(s[48],3100823752),new P(s[49],1363258195),new P(s[50],3750685593),new P(s[51],3785050280),new P(s[52],3318307427),new P(s[53],3812723403),new P(s[54],2003034995),new P(s[55],3602036899),new P(s[56],1575990012),new P(s[57],1125592928),new P(s[58],2716904306),new P(s[59],442776044),new P(s[60],593698344),new P(s[61],3733110249),new P(s[62],2999351573),new P(s[63],3815920427),new P(3391569614,3928383900),new P(3515267271,566280711),new P(3940187606,3454069534),new P(4118630271,4000239992),new P(116418474,1914138554),new P(174292421,2731055270),new P(289380356,3203993006),new P(460393269,320620315),new P(685471733,587496836),new P(852142971,1086792851),new P(1017036298,365543100),new P(1126000580,2618297676),new P(1288033470,3409855158),new P(1501505948,4234509866),new P(1607167915,987167468),new P(1816402316,1246189591)];function Wr(G){return G==="SHA-384"?[new P(3418070365,o[0]),new P(1654270250,o[1]),new P(2438529370,o[2]),new P(355462360,o[3]),new P(1731405415,o[4]),new P(41048885895,o[5]),new P(3675008525,o[6]),new P(1203062813,o[7])]:[new P(l[0],4089235720),new P(l[1],2227873595),new P(l[2],4271175723),new P(l[3],1595750129),new P(l[4],2917565137),new P(l[5],725511199),new P(l[6],4215389547),new P(l[7],327033209)]}function Vr(G,C){var U,j,q,D,pe,fe,we,Fe,lt,Ae,ze,Rt,Te,$t,qt,ui,Ti=[];for(U=C[0],j=C[1],q=C[2],D=C[3],pe=C[4],fe=C[5],we=C[6],Fe=C[7],ze=0;ze<80;ze+=1)ze<16?(Rt=2*ze,Ti[ze]=new P(G[Rt],G[Rt+1])):Ti[ze]=Oi((Te=Ti[ze-2],$t=void 0,qt=void 0,ui=void 0,$t=Ee(Te,19),qt=Ee(Te,61),ui=gt(Te,6),new P($t.N^qt.N^ui.N,$t.I^qt.I^ui.I)),Ti[ze-7],Or(Ti[ze-15]),Ti[ze-16]),lt=Mr(Fe,Gr(pe),pi(pe,fe,we),rs[ze],Ti[ze]),Ae=st(Si(U),gi(U,j,q)),Fe=we,we=fe,fe=pe,pe=st(D,lt),D=q,q=j,j=U,U=st(lt,Ae);return C[0]=st(U,C[0]),C[1]=st(j,C[1]),C[2]=st(q,C[2]),C[3]=st(D,C[3]),C[4]=st(pe,C[4]),C[5]=st(fe,C[5]),C[6]=st(we,C[6]),C[7]=st(Fe,C[7]),C}var zn=function(G){function C(U,j,q){var D=this;if(U!=="SHA-384"&&U!=="SHA-512")throw new Error(u);var pe=q||{};return(D=G.call(this,U,j,q)||this).F=D.Y,D.g=!0,D.C=-1,D.p=t(D.t,D.i,D.C),D.R=Vr,D.B=function(fe){return fe.slice()},D.L=Wr,D.K=function(fe,we,Fe,lt){return function(Ae,ze,Rt,Te,$t){for(var qt,ui=31+(ze+129>>>10<<5),Ti=ze+Rt;Ae.length<=ui;)Ae.push(0);for(Ae[ze>>>5]|=128<<24-ze%32,Ae[ui]=4294967295&Ti,Ae[ui-1]=Ti/4294967296|0,qt=0;qt<Ae.length;qt+=32)Te=Vr(Ae.slice(qt,qt+32),Te);return $t==="SHA-384"?[(Te=Te)[0].N,Te[0].I,Te[1].N,Te[1].I,Te[2].N,Te[2].I,Te[3].N,Te[3].I,Te[4].N,Te[4].I,Te[5].N,Te[5].I]:[Te[0].N,Te[0].I,Te[1].N,Te[1].I,Te[2].N,Te[2].I,Te[3].N,Te[3].I,Te[4].N,Te[4].I,Te[5].N,Te[5].I,Te[6].N,Te[6].I,Te[7].N,Te[7].I]}(fe,we,Fe,lt,U)},D.m=Wr(U),D.S=1024,D.U=U==="SHA-384"?384:512,D.T=!1,pe.hmacKey&&D.k(f("hmacKey",pe.hmacKey,D.C)),D}return v(C,G),C}(g),Ln=[new P(0,1),new P(0,32898),new P(2147483648,32906),new P(2147483648,2147516416),new P(0,32907),new P(0,2147483649),new P(2147483648,2147516545),new P(2147483648,32777),new P(0,138),new P(0,136),new P(0,2147516425),new P(0,2147483658),new P(0,2147516555),new P(2147483648,139),new P(2147483648,32905),new P(2147483648,32771),new P(2147483648,32770),new P(2147483648,128),new P(0,32778),new P(2147483648,2147483658),new P(2147483648,2147516545),new P(2147483648,32896),new P(0,2147483649),new P(2147483648,2147516424)],oo=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function ao(G){var C,U=[];for(C=0;C<5;C+=1)U[C]=[new P(0,0),new P(0,0),new P(0,0),new P(0,0),new P(0,0)];return U}function Da(G){var C,U=[];for(C=0;C<5;C+=1)U[C]=G[C].slice();return U}function ln(G,C){var U,j,q,D,pe,fe,we,Fe,lt,Ae=[],ze=[];if(G!==null)for(j=0;j<G.length;j+=2)C[(j>>>1)%5][(j>>>1)/5|0]=an(C[(j>>>1)%5][(j>>>1)/5|0],new P(G[j+1],G[j]));for(U=0;U<24;U+=1){for(D=ao(),j=0;j<5;j+=1)Ae[j]=(pe=C[j][0],fe=C[j][1],we=C[j][2],Fe=C[j][3],lt=C[j][4],new P(pe.N^fe.N^we.N^Fe.N^lt.N,pe.I^fe.I^we.I^Fe.I^lt.I));for(j=0;j<5;j+=1)ze[j]=an(Ae[(j+4)%5],nt(Ae[(j+1)%5],1));for(j=0;j<5;j+=1)for(q=0;q<5;q+=1)C[j][q]=an(C[j][q],ze[j]);for(j=0;j<5;j+=1)for(q=0;q<5;q+=1)D[q][(2*j+3*q)%5]=nt(C[j][q],oo[j][q]);for(j=0;j<5;j+=1)for(q=0;q<5;q+=1)C[j][q]=an(D[j][q],new P(~D[(j+1)%5][q].N&D[(j+2)%5][q].N,~D[(j+1)%5][q].I&D[(j+2)%5][q].I));C[0][0]=an(C[0][0],Ln[U])}return C}function Cs(G){var C,U,j=0,q=[0,0],D=[4294967295&G,G/4294967296&2097151];for(C=6;C>=0;C--)(U=D[C>>2]>>>8*C&255)===0&&j===0||(q[j+1>>2]|=U<<8*(j+1),j+=1);return j=j!==0?j:1,q[0]|=j,{value:j+1>4?q:[q[0]],binLen:8+8*j}}function lo(G){return p(Cs(G.binLen),G)}function co(G,C){var U,j=Cs(C),q=C>>>2,D=(q-(j=p(j,G)).value.length%q)%q;for(U=0;U<D;U++)j.value.push(0);return j.value}var Fo=function(G){function C(U,j,q){var D=this,pe=6,fe=0,we=q||{};if((D=G.call(this,U,j,q)||this).numRounds!==1){if(we.kmacKey||we.hmacKey)throw new Error("Cannot set numRounds with MAC");if(D.o==="CSHAKE128"||D.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(D.C=1,D.p=t(D.t,D.i,D.C),D.R=ln,D.B=Da,D.L=ao,D.m=ao(),D.T=!1,U){case"SHA3-224":D.S=fe=1152,D.U=224,D.g=!0,D.F=D.Y;break;case"SHA3-256":D.S=fe=1088,D.U=256,D.g=!0,D.F=D.Y;break;case"SHA3-384":D.S=fe=832,D.U=384,D.g=!0,D.F=D.Y;break;case"SHA3-512":D.S=fe=576,D.U=512,D.g=!0,D.F=D.Y;break;case"SHAKE128":pe=31,D.S=fe=1344,D.U=-1,D.T=!0,D.g=!1,D.F=null;break;case"SHAKE256":pe=31,D.S=fe=1088,D.U=-1,D.T=!0,D.g=!1,D.F=null;break;case"KMAC128":pe=4,D.S=fe=1344,D.M(q),D.U=-1,D.T=!0,D.g=!1,D.F=D.X;break;case"KMAC256":pe=4,D.S=fe=1088,D.M(q),D.U=-1,D.T=!0,D.g=!1,D.F=D.X;break;case"CSHAKE128":D.S=fe=1344,pe=D.O(q),D.U=-1,D.T=!0,D.g=!1,D.F=null;break;case"CSHAKE256":D.S=fe=1088,pe=D.O(q),D.U=-1,D.T=!0,D.g=!1,D.F=null;break;default:throw new Error(u)}return D.K=function(Fe,lt,Ae,ze,Rt){return function(Te,$t,qt,ui,Ti,bn,zi){var Qi,Tn,ns=0,jn=[],As=Ti>>>5,Ms=$t>>>5;for(Qi=0;Qi<Ms&&$t>=Ti;Qi+=As)ui=ln(Te.slice(Qi,Qi+As),ui),$t-=Ti;for(Te=Te.slice(Qi),$t%=Ti;Te.length<As;)Te.push(0);for(Te[(Qi=$t>>>3)>>2]^=bn<<Qi%4*8,Te[As-1]^=2147483648,ui=ln(Te,ui);32*jn.length<zi&&(Tn=ui[ns%5][ns/5|0],jn.push(Tn.I),!(32*jn.length>=zi));)jn.push(Tn.N),64*(ns+=1)%Ti==0&&(ln(null,ui),ns=0);return jn}(Fe,lt,0,ze,fe,pe,Rt)},we.hmacKey&&D.k(f("hmacKey",we.hmacKey,D.C)),D}return v(C,G),C.prototype.O=function(U,j){var q=function(we){var Fe=we||{};return{funcName:f("funcName",Fe.funcName,1,{value:[],binLen:0}),customization:f("Customization",Fe.customization,1,{value:[],binLen:0})}}(U||{});j&&(q.funcName=j);var D=p(lo(q.funcName),lo(q.customization));if(q.customization.binLen!==0||q.funcName.binLen!==0){for(var pe=co(D,this.S>>>3),fe=0;fe<pe.length;fe+=this.S>>>5)this.m=this.R(pe.slice(fe,fe+(this.S>>>5)),this.m),this.v+=this.S;return 4}return 31},C.prototype.M=function(U){var j=function(pe){var fe=pe||{};return{kmacKey:f("kmacKey",fe.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:f("Customization",fe.customization,1,{value:[],binLen:0})}}(U||{});this.O(U,j.funcName);for(var q=co(lo(j.kmacKey),this.S>>>3),D=0;D<q.length;D+=this.S>>>5)this.m=this.R(q.slice(D,D+(this.S>>>5)),this.m),this.v+=this.S;this.A=!0},C.prototype.X=function(U){var j=p({value:this.u.slice(),binLen:this.s},function(q){var D,pe,fe=0,we=[0,0],Fe=[4294967295&q,q/4294967296&2097151];for(D=6;D>=0;D--)(pe=Fe[D>>2]>>>8*D&255)==0&&fe===0||(we[fe>>2]|=pe<<8*fe,fe+=1);return we[(fe=fe!==0?fe:1)>>2]|=fe<<8*fe,{value:fe+1>4?we:[we[0]],binLen:8+8*fe}}(U.outputLen));return this.K(j.value,j.binLen,this.v,this.B(this.m),U.outputLen)},C}(g);return function(){function G(C,U,j){if(C=="SHA-1")this.j=new Xt(C,U,j);else if(C=="SHA-224"||C=="SHA-256")this.j=new Le(C,U,j);else if(C=="SHA-384"||C=="SHA-512")this.j=new zn(C,U,j);else{if(C!="SHA3-224"&&C!="SHA3-256"&&C!="SHA3-384"&&C!="SHA3-512"&&C!="SHAKE128"&&C!="SHAKE256"&&C!="CSHAKE128"&&C!="CSHAKE256"&&C!="KMAC128"&&C!="KMAC256")throw new Error(u);this.j=new Fo(C,U,j)}}return G.prototype.update=function(C){this.j.update(C)},G.prototype.getHash=function(C,U){return this.j.getHash(C,U)},G.prototype.setHMACKey=function(C,U,j){this.j.setHMACKey(C,U,j)},G.prototype.getHMAC=function(C,U){return this.j.getHMAC(C,U)},G}()})});var Rs,yv=_(()=>{"use strict";yn();$r();Rs=class{static getInviteUrl(){return window.location.origin+"?invite="+this.encode(mt.walletAddress)}static encode(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=t.length,s=t.split(""),o="",l,u,p,h,f=0;f<e.length;f++)l=e.charCodeAt(f),u=l%r,l=(l-u)/r,p=l%r,l=(l-p)/r,h=l%r,o+=s[h]+s[p]+s[u];return window.btoa(o)}static decode(e){e=window.atob(e);var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=t.length,s,o,l,u,p=0,h;h=new Array(Math.floor(e.length/3)),s=h.length;for(var f=0;f<s;f++)o=t.indexOf(e.charAt(p)),p++,l=t.indexOf(e.charAt(p)),p++,u=t.indexOf(e.charAt(p)),p++,h[f]=o*r*r+l*r+u;return s=decodeCharCode(h.join(",")),s}static getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(t);return r!=null?r[2]:""}static getInviteWalletAddress(){let e=this.getQueryString("invite");return e&&(e=this.decode(e)),e}static toWei(e,t){let r=e*10**parseInt(t);return window.web3.utils.toBN("0x"+r.toString(16)).toString()}static fromWei(e,t,r=0){if(!e)return 0;let s=e.length-t+r;if(s<=0)return 0;let o=e.toString().slice(0,s);if(r){let l=o.length-r;if(l<=0){let u="0.";for(let p=0;p<Math.abs(l);p++)u+="0";o=u+o}else o=o.slice(0,o.length-r)+"."+o.slice(o.length-r)}return o}static deepClone(e){let t=new ht;for(let r in e)typeof e[r]=="function"?t[r]=e[r]:t[r]=JSON.parse(JSON.stringify(e[r]));return t}}});var Lk,Tk=_(()=>{"use strict";Lk="1.0.8"});var gr,Fl=_(()=>{"use strict";Tk();gr=class i extends Error{constructor(e,t={}){let r=t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof i&&t.cause.docsPath||t.docsPath,o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Lk}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.shortMessage=e}}});function Cn(i,e){return i.exec(e)?.groups}var _v,xv,Mf,Jp=_(()=>{"use strict";_v=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,xv=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Mf=/^\(.+?\).*?$/});function Rf(i){let e=i.type;if(Ck.test(i.type)&&"components"in i){e="(";let t=i.components.length;for(let s=0;s<t;s++){let o=i.components[s];e+=Rf(o),s<t-1&&(e+=", ")}let r=Cn(Ck,i.type);return e+=`)${r?.array??""}`,Rf({...i,type:e})}return"indexed"in i&&i.indexed&&(e=`${e} indexed`),i.name?`${e} ${i.name}`:e}var Ck,Ak=_(()=>{"use strict";Jp();Ck=/^tuple(?<array>(\[(\d*)\])*)$/});function Pl(i){let e="",t=i.length;for(let r=0;r<t;r++){let s=i[r];e+=Rf(s),r!==t-1&&(e+=", ")}return e}var Mk=_(()=>{"use strict";Ak()});function Pa(i){return i.type==="function"?`function ${i.name}(${Pl(i.inputs)})${i.stateMutability&&i.stateMutability!=="nonpayable"?` ${i.stateMutability}`:""}${i.outputs?.length?` returns (${Pl(i.outputs)})`:""}`:i.type==="event"?`event ${i.name}(${Pl(i.inputs)})`:i.type==="error"?`error ${i.name}(${Pl(i.inputs)})`:i.type==="constructor"?`constructor(${Pl(i.inputs)})${i.stateMutability==="payable"?" payable":""}`:i.type==="fallback"?`fallback() external${i.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var Rk=_(()=>{"use strict";Mk()});function Dk(i){return Bk.test(i)}function Nk(i){return Cn(Bk,i)}function Fk(i){return Ok.test(i)}function Pk(i){return Cn(Ok,i)}function Hk(i){return Uk.test(i)}function zk(i){return Cn(Uk,i)}function Ul(i){return jk.test(i)}function Gk(i){return Cn(jk,i)}function Vk(i){return Wk.test(i)}function Kk(i){return Cn(Wk,i)}function qk(i){return $k.test(i)}function Yk(i){return Cn($k,i)}function Qk(i){return KR.test(i)}var Bk,Ok,Uk,jk,Wk,$k,KR,Xk,Bf,Zp=_(()=>{"use strict";Jp();Bk=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;Ok=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;Uk=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;jk=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;Wk=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;$k=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;KR=/^receive\(\) external payable$/;Xk=new Set(["indexed"]),Bf=new Set(["calldata","memory","storage"])});var Df,Nf,Of,Ff=_(()=>{"use strict";Fl();Df=class extends gr{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},Nf=class extends gr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},Of=class extends gr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}});var Pf,Uf,Hf,zf,jf,vv=_(()=>{"use strict";Fl();Pf=class extends gr{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},Uf=class extends gr{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},Hf=class extends gr{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},zf=class extends gr{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},jf=class extends gr{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}});var Bs,Gf,Wf,Iv=_(()=>{"use strict";Fl();Bs=class extends gr{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},Gf=class extends gr{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},Wf=class extends gr{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}});var Vf,Jk=_(()=>{"use strict";Fl();Vf=class extends gr{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}});var Kf,Zk=_(()=>{"use strict";Fl();Kf=class extends gr{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}});function eE(i,e,t){let r="";if(t)for(let s of Object.entries(t)){if(!s)continue;let o="";for(let l of s[1])o+=`[${l.type}${l.name?`:${l.name}`:""}]`;r+=`(${s[0]}{${o}})`}return e?`${e}:${i}${r}`:i}var $f,tE=_(()=>{"use strict";$f=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]])});function eh(i,e={}){if(Hk(i))return $R(i,e);if(Fk(i))return qR(i,e);if(Dk(i))return YR(i,e);if(Vk(i))return QR(i,e);if(qk(i))return XR(i);if(Qk(i))return{type:"receive",stateMutability:"payable"};throw new Gf({signature:i})}function $R(i,e={}){let t=zk(i);if(!t)throw new Bs({signature:i,type:"function"});let r=os(t.parameters),s=[],o=r.length;for(let u=0;u<o;u++)s.push(Ho(r[u],{modifiers:Bf,structs:e,type:"function"}));let l=[];if(t.returns){let u=os(t.returns),p=u.length;for(let h=0;h<p;h++)l.push(Ho(u[h],{modifiers:Bf,structs:e,type:"function"}))}return{name:t.name,type:"function",stateMutability:t.stateMutability??"nonpayable",inputs:s,outputs:l}}function qR(i,e={}){let t=Pk(i);if(!t)throw new Bs({signature:i,type:"event"});let r=os(t.parameters),s=[],o=r.length;for(let l=0;l<o;l++)s.push(Ho(r[l],{modifiers:Xk,structs:e,type:"event"}));return{name:t.name,type:"event",inputs:s}}function YR(i,e={}){let t=Nk(i);if(!t)throw new Bs({signature:i,type:"error"});let r=os(t.parameters),s=[],o=r.length;for(let l=0;l<o;l++)s.push(Ho(r[l],{structs:e,type:"error"}));return{name:t.name,type:"error",inputs:s}}function QR(i,e={}){let t=Kk(i);if(!t)throw new Bs({signature:i,type:"constructor"});let r=os(t.parameters),s=[],o=r.length;for(let l=0;l<o;l++)s.push(Ho(r[l],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:t.stateMutability??"nonpayable",inputs:s}}function XR(i){let e=Yk(i);if(!e)throw new Bs({signature:i,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}function Ho(i,e){let t=eE(i,e?.type,e?.structs);if($f.has(t))return $f.get(t);let r=Mf.test(i),s=Cn(r?ZR:JR,i);if(!s)throw new Pf({param:i});if(s.name&&iB(s.name))throw new Uf({param:i,name:s.name});let o=s.name?{name:s.name}:{},l=s.modifier==="indexed"?{indexed:!0}:{},u=e?.structs??{},p,h={};if(r){p="tuple";let g=os(s.type),b=[],v=g.length;for(let w=0;w<v;w++)b.push(Ho(g[w],{structs:u}));h={components:b}}else if(s.type in u)p="tuple",h={components:u[s.type]};else if(eB.test(s.type))p=`${s.type}256`;else if(p=s.type,e?.type!=="struct"&&!Sv(p))throw new Of({type:p});if(s.modifier){if(!e?.modifiers?.has?.(s.modifier))throw new Hf({param:i,type:e?.type,modifier:s.modifier});if(Bf.has(s.modifier)&&!rB(p,!!s.array))throw new zf({param:i,type:e?.type,modifier:s.modifier})}let f={type:`${p}${s.array??""}`,...o,...l,...h};return $f.set(t,f),f}function os(i,e=[],t="",r=0){let s=i.trim().length;for(let o=0;o<s;o++){let l=i[o],u=i.slice(o+1);switch(l){case",":return r===0?os(u,[...e,t.trim()]):os(u,e,`${t}${l}`,r);case"(":return os(u,e,`${t}${l}`,r+1);case")":return os(u,e,`${t}${l}`,r-1);default:return os(u,e,`${t}${l}`,r)}}if(t==="")return e;if(r!==0)throw new Kf({current:t,depth:r});return e.push(t.trim()),e}function Sv(i){return i==="address"||i==="bool"||i==="function"||i==="string"||_v.test(i)||xv.test(i)}function iB(i){return i==="address"||i==="bool"||i==="function"||i==="string"||i==="tuple"||_v.test(i)||xv.test(i)||tB.test(i)}function rB(i,e){return e||i==="bytes"||i==="string"||i==="tuple"}var JR,ZR,eB,tB,qf=_(()=>{"use strict";Jp();Ff();vv();Iv();Zk();tE();Zp();JR=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ZR=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,eB=/^u?int$/;tB=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/});function Yf(i){let e={},t=i.length;for(let l=0;l<t;l++){let u=i[l];if(!Ul(u))continue;let p=Gk(u);if(!p)throw new Bs({signature:u,type:"struct"});let h=p.properties.split(";"),f=[],g=h.length;for(let b=0;b<g;b++){let w=h[b].trim();if(!w)continue;let k=Ho(w,{type:"struct"});f.push(k)}if(!f.length)throw new Wf({signature:u});e[p.name]=f}let r={},s=Object.entries(e),o=s.length;for(let l=0;l<o;l++){let[u,p]=s[l];r[u]=iE(p,e)}return r}function iE(i,e,t=new Set){let r=[],s=i.length;for(let o=0;o<s;o++){let l=i[o];if(Mf.test(l.type))r.push(l);else{let p=Cn(nB,l.type);if(!p?.type)throw new jf({abiParameter:l});let{array:h,type:f}=p;if(f in e){if(t.has(f))throw new Vf({type:f});r.push({...l,type:`tuple${h??""}`,components:iE(e[f]??[],e,new Set([...t,f]))})}else if(Sv(f))r.push(l);else throw new Nf({type:f})}}return r}var nB,wv=_(()=>{"use strict";Jp();Ff();vv();Iv();Jk();Zp();qf();nB=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/});function Qf(i){let e=Yf(i),t=[],r=i.length;for(let s=0;s<r;s++){let o=i[s];Ul(o)||t.push(eh(o,e))}return t}var rE=_(()=>{"use strict";Zp();wv();qf()});function Xf(i){let e;if(typeof i=="string")e=eh(i);else{let t=Yf(i),r=i.length;for(let s=0;s<r;s++){let o=i[s];if(!Ul(o)){e=eh(o,t);break}}}if(!e)throw new Df({signature:i});return e}var nE=_(()=>{"use strict";Ff();Zp();wv();qf()});var Jf=_(()=>{"use strict";Rk();rE();nE()});function Ge(i,e,t){let r=i[e.name];if(typeof r=="function")return r;let s=i[t];return typeof s=="function"?s:o=>e(i,o)}var Ui=_(()=>{"use strict"});function un(i,{includeName:e=!1}={}){if(i.type!=="function"&&i.type!=="event"&&i.type!=="error")throw new Zf(i.type);return`${i.name}(${th(i.inputs,{includeName:e})})`}function th(i,{includeName:e=!1}={}){return i?i.map(t=>oB(t,{includeName:e})).join(e?", ":","):""}function oB(i,{includeName:e}){return i.type.startsWith("tuple")?`(${th(i.components,{includeName:e})})${i.type.slice(5)}`:i.type+(e&&i.name?` ${i.name}`:"")}var Ua=_(()=>{"use strict";vr()});function hr(i,{strict:e=!0}={}){return!i||typeof i!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(i):i.startsWith("0x")}var as=_(()=>{"use strict"});function _i(i){return hr(i,{strict:!1})?Math.ceil((i.length-2)/2):i.length}var ls=_(()=>{"use strict";as()});var kv,sE=_(()=>{"use strict";kv="2.26.2"});function oE(i,e){return e?.(i)?i:i&&typeof i=="object"&&"cause"in i&&i.cause!==void 0?oE(i.cause,e):e?null:i}var Ev,X,ni=_(()=>{"use strict";sE();Ev={getDocsUrl:({docsBaseUrl:i,docsPath:e="",docsSlug:t})=>e?`${i??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${kv}`},X=class i extends Error{constructor(e,t={}){let r=(()=>t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details)(),s=(()=>t.cause instanceof i&&t.cause.docsPath||t.docsPath)(),o=Ev.getDocsUrl?.({...t,docsPath:s}),l=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...Ev.version?[`Version: ${Ev.version}`]:[]].join(`
`);super(l,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=kv}walk(e){return oE(this,e)}}});var eg,ih,Hl,Gn,tg,ig,rg,zl,ng,jl,rh,zo,sg,og,ag,cs,Ds,lg,cg,ug,Zf,vr=_(()=>{"use strict";Ua();ls();ni();eg=class extends X{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}},ih=class extends X{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}},Hl=class extends X{constructor({data:e,params:t,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${th(t,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=r}},Gn=class extends X{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}},tg=class extends X{constructor({expectedLength:e,givenLength:t,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${t}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},ig=class extends X{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${_i(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},rg=class extends X{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},zl=class extends X{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}},ng=class extends X{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}},jl=class extends X{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiEventSignatureNotFoundError"})}},rh=class extends X{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:t,name:"AbiEventNotFoundError"})}},zo=class extends X{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionNotFoundError"})}},sg=class extends X{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}},og=class extends X{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${un(e.abiItem)}\`, and`,`\`${t.type}\` in \`${un(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},ag=class extends X{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}},cs=class extends X{constructor({abiItem:e,data:t,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${th(r,{includeName:!0})})`,`Data:   ${t} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=r,this.size=s}},Ds=class extends X{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${un(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}},lg=class extends X{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiEncodingType"})}},cg=class extends X{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiDecodingType"})}},ug=class extends X{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},Zf=class extends X{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}});var pg,aE=_(()=>{"use strict";ni();pg=class extends X{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}});var nh,sh,oh,hg=_(()=>{"use strict";ni();nh=class extends X{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},sh=class extends X{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}},oh=class extends X{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${t} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}});function jo(i,{dir:e,size:t=32}={}){return typeof i=="string"?po(i,{dir:e,size:t}):aB(i,{dir:e,size:t})}function po(i,{dir:e,size:t=32}={}){if(t===null)return i;let r=i.replace("0x","");if(r.length>t*2)throw new sh({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function aB(i,{dir:e,size:t=32}={}){if(t===null)return i;if(i.length>t)throw new sh({size:i.length,targetSize:t,type:"bytes"});let r=new Uint8Array(t);for(let s=0;s<t;s++){let o=e==="right";r[o?s:t-s-1]=i[o?s:i.length-s-1]}return r}var dg=_(()=>{"use strict";hg()});var Gl,mg,fg,gg,ah=_(()=>{"use strict";ni();Gl=class extends X{constructor({max:e,min:t,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},mg=class extends X{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}},fg=class extends X{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}},gg=class extends X{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}});function qr(i,{dir:e="left"}={}){let t=typeof i=="string"?i.replace("0x",""):i,r=0;for(let s=0;s<t.length-1&&t[e==="left"?s:t.length-s-1].toString()==="0";s++)r++;return t=e==="left"?t.slice(r):t.slice(0,t.length-r),typeof i=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}var Wl=_(()=>{"use strict"});function _n(i,{size:e}){if(_i(i)>e)throw new gg({givenSize:_i(i),maxSize:e})}function Ki(i,e={}){let{signed:t}=e;e.size&&_n(i,{size:e.size});let r=BigInt(i);if(!t)return r;let s=(i.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Lv(i,e={}){let t=i;if(e.size&&(_n(t,{size:e.size}),t=qr(t)),qr(t)==="0x00")return!1;if(qr(t)==="0x01")return!0;throw new fg(t)}function br(i,e={}){return Number(Ki(i,e))}var Yr=_(()=>{"use strict";ah();ls();Wl()});function tt(i,e={}){return typeof i=="number"||typeof i=="bigint"?Ve(i,e):typeof i=="string"?us(i,e):typeof i=="boolean"?bg(i,e):di(i,e)}function bg(i,e={}){let t=`0x${Number(i)}`;return typeof e.size=="number"?(_n(t,{size:e.size}),jo(t,{size:e.size})):t}function di(i,e={}){let t="";for(let s=0;s<i.length;s++)t+=lB[i[s]];let r=`0x${t}`;return typeof e.size=="number"?(_n(r,{size:e.size}),jo(r,{dir:"right",size:e.size})):r}function Ve(i,e={}){let{signed:t,size:r}=e,s=BigInt(i),o;r?t?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof i=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));let l=typeof o=="bigint"&&t?-o-1n:0;if(o&&s>o||s<l){let p=typeof i=="bigint"?"n":"";throw new Gl({max:o?`${o}${p}`:void 0,min:`${l}${p}`,signed:t,size:r,value:`${i}${p}`})}let u=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?jo(u,{size:r}):u}function us(i,e={}){let t=cB.encode(i);return di(t,e)}var lB,cB,vt=_(()=>{"use strict";ah();dg();Yr();lB=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));cB=new TextEncoder});function Wn(i,e={}){return typeof i=="number"||typeof i=="bigint"?hB(i,e):typeof i=="boolean"?pB(i,e):hr(i)?Ir(i,e):ps(i,e)}function pB(i,e={}){let t=new Uint8Array(1);return t[0]=Number(i),typeof e.size=="number"?(_n(t,{size:e.size}),jo(t,{size:e.size})):t}function lE(i){if(i>=ho.zero&&i<=ho.nine)return i-ho.zero;if(i>=ho.A&&i<=ho.F)return i-(ho.A-10);if(i>=ho.a&&i<=ho.f)return i-(ho.a-10)}function Ir(i,e={}){let t=i;e.size&&(_n(t,{size:e.size}),t=jo(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);let s=r.length/2,o=new Uint8Array(s);for(let l=0,u=0;l<s;l++){let p=lE(r.charCodeAt(u++)),h=lE(r.charCodeAt(u++));if(p===void 0||h===void 0)throw new X(`Invalid byte sequence ("${r[u-2]}${r[u-1]}" in "${r}").`);o[l]=p*16+h}return o}function hB(i,e){let t=Ve(i,e);return Ir(t)}function ps(i,e={}){let t=uB.encode(i);return typeof e.size=="number"?(_n(t,{size:e.size}),jo(t,{dir:"right",size:e.size})):t}var uB,ho,Br=_(()=>{"use strict";ni();as();dg();Yr();vt();uB=new TextEncoder;ho={zero:48,nine:57,A:65,F:70,a:97,f:102}});function lh(i){if(!Number.isSafeInteger(i)||i<0)throw new Error("positive integer expected, got "+i)}function dB(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function Go(i,...e){if(!dB(i))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(i.length))throw new Error("Uint8Array expected of length "+e+", got length="+i.length)}function cE(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");lh(i.outputLen),lh(i.blockLen)}function mo(i,e=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(e&&i.finished)throw new Error("Hash#digest() has already been called")}function yg(i,e){Go(i);let t=e.outputLen;if(i.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}var ch=_(()=>{"use strict"});function mB(i,e=!1){return e?{h:Number(i&_g),l:Number(i>>uE&_g)}:{h:Number(i>>uE&_g)|0,l:Number(i&_g)|0}}function pE(i,e=!1){let t=new Uint32Array(i.length),r=new Uint32Array(i.length);for(let s=0;s<i.length;s++){let{h:o,l}=mB(i[s],e);[t[s],r[s]]=[o,l]}return[t,r]}var _g,uE,hE,dE,mE,fE,gE=_(()=>{"use strict";_g=BigInt(4294967295),uE=BigInt(32);hE=(i,e,t)=>i<<t|e>>>32-t,dE=(i,e,t)=>e<<t|i>>>32-t,mE=(i,e,t)=>e<<t-32|i>>>64-t,fE=(i,e,t)=>i<<t-32|e>>>64-t});var Ha,bE=_(()=>{"use strict";Ha=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function yE(i){return new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4))}function xg(i){return new DataView(i.buffer,i.byteOffset,i.byteLength)}function hs(i,e){return i<<32-e|i>>>e}function fB(i){return i<<24&4278190080|i<<8&16711680|i>>>8&65280|i>>>24&255}function Cv(i){for(let e=0;e<i.length;e++)i[e]=fB(i[e])}function gB(i){if(typeof i!="string")throw new Error("utf8ToBytes expected string, got "+typeof i);return new Uint8Array(new TextEncoder().encode(i))}function Vo(i){return typeof i=="string"&&(i=gB(i)),Go(i),i}function _E(...i){let e=0;for(let r=0;r<i.length;r++){let s=i[r];Go(s),e+=s.length}let t=new Uint8Array(e);for(let r=0,s=0;r<i.length;r++){let o=i[r];t.set(o,s),s+=o.length}return t}function vg(i){let e=r=>i().update(Vo(r)).digest(),t=i();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>i(),e}function xE(i){let e=(r,s)=>i(s).update(Vo(r)).digest(),t=i({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>i(r),e}function Ig(i=32){if(Ha&&typeof Ha.getRandomValues=="function")return Ha.getRandomValues(new Uint8Array(i));if(Ha&&typeof Ha.randomBytes=="function")return Ha.randomBytes(i);throw new Error("crypto.getRandomValues must be defined")}var Tv,Wo,za=_(()=>{"use strict";bE();ch();Tv=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();Wo=class{clone(){return this._cloneInto()}}});function wB(i,e=24){let t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let l=0;l<10;l++)t[l]=i[l]^i[l+10]^i[l+20]^i[l+30]^i[l+40];for(let l=0;l<10;l+=2){let u=(l+8)%10,p=(l+2)%10,h=t[p],f=t[p+1],g=vE(h,f,1)^t[u],b=IE(h,f,1)^t[u+1];for(let v=0;v<50;v+=10)i[l+v]^=g,i[l+v+1]^=b}let s=i[2],o=i[3];for(let l=0;l<24;l++){let u=wE[l],p=vE(s,o,u),h=IE(s,o,u),f=SE[l];s=i[f],o=i[f+1],i[f]=p,i[f+1]=h}for(let l=0;l<50;l+=10){for(let u=0;u<10;u++)t[u]=i[l+u];for(let u=0;u<10;u++)i[l+u]^=~t[(u+2)%10]&t[(u+4)%10]}i[0]^=IB[r],i[1]^=SB[r]}t.fill(0)}var SE,wE,kE,bB,uh,yB,_B,xB,vB,IB,SB,vE,IE,Sg,Ko,i8,r8,n8,s8,o8,wg,a8,l8,EE,c8,u8,Av=_(()=>{"use strict";ch();gE();za();SE=[],wE=[],kE=[],bB=BigInt(0),uh=BigInt(1),yB=BigInt(2),_B=BigInt(7),xB=BigInt(256),vB=BigInt(113);for(let i=0,e=uh,t=1,r=0;i<24;i++){[t,r]=[r,(2*t+3*r)%5],SE.push(2*(5*r+t)),wE.push((i+1)*(i+2)/2%64);let s=bB;for(let o=0;o<7;o++)e=(e<<uh^(e>>_B)*vB)%xB,e&yB&&(s^=uh<<(uh<<BigInt(o))-uh);kE.push(s)}[IB,SB]=pE(kE,!0),vE=(i,e,t)=>t>32?mE(i,e,t):hE(i,e,t),IE=(i,e,t)=>t>32?fE(i,e,t):dE(i,e,t);Sg=class i extends Wo{constructor(e,t,r,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,lh(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=yE(this.state)}keccak(){Tv||Cv(this.state32),wB(this.state32,this.rounds),Tv||Cv(this.state32),this.posOut=0,this.pos=0}update(e){mo(this);let{blockLen:t,state:r}=this;e=Vo(e);let s=e.length;for(let o=0;o<s;){let l=Math.min(t-this.pos,s-o);for(let u=0;u<l;u++)r[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:s}=this;e[r]^=t,t&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){mo(this,!1),Go(e),this.finish();let t=this.state,{blockLen:r}=this;for(let s=0,o=e.length;s<o;){this.posOut>=r&&this.keccak();let l=Math.min(r-this.posOut,o-s);e.set(t.subarray(this.posOut,this.posOut+l),s),this.posOut+=l,s+=l}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return lh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(yg(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:s,rounds:o,enableXOF:l}=this;return e||(e=new i(t,r,s,l,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=s,e.enableXOF=l,e.destroyed=this.destroyed,e}},Ko=(i,e,t)=>vg(()=>new Sg(e,i,t)),i8=Ko(6,144,224/8),r8=Ko(6,136,256/8),n8=Ko(6,104,384/8),s8=Ko(6,72,512/8),o8=Ko(1,144,224/8),wg=Ko(1,136,256/8),a8=Ko(1,104,384/8),l8=Ko(1,72,512/8),EE=(i,e,t)=>xE((r={})=>new Sg(e,i,r.dkLen===void 0?t:r.dkLen,!0)),c8=EE(31,168,128/8),u8=EE(31,136,256/8)});function Hi(i,e){let t=e||"hex",r=wg(hr(i,{strict:!1})?Wn(i):i);return t==="bytes"?r:tt(r)}var ds=_(()=>{"use strict";Av();as();Br();vt()});function LE(i){return kB(i)}var kB,TE=_(()=>{"use strict";Br();ds();kB=i=>Hi(Wn(i))});function CE(i){let e=!0,t="",r=0,s="",o=!1;for(let l=0;l<i.length;l++){let u=i[l];if(["(",")",","].includes(u)&&(e=!0),u==="("&&r++,u===")"&&r--,!!e){if(r===0){if(u===" "&&["event","function",""].includes(s))s="";else if(s+=u,u===")"){o=!0;break}continue}if(u===" "){i[l-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}s+=u,t+=u}}if(!o)throw new X("Unable to normalize signature.");return s}var AE=_(()=>{"use strict";ni()});var ME,RE=_(()=>{"use strict";Jf();AE();ME=i=>{let e=(()=>typeof i=="string"?i:Pa(i))();return CE(e)}});function kg(i){return LE(ME(i))}var Mv=_(()=>{"use strict";TE();RE()});var $o,ph=_(()=>{"use strict";Mv();$o=kg});var Gi,Ns=_(()=>{"use strict";ni();Gi=class extends X{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}});var Os,hh=_(()=>{"use strict";Os=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let r=this.keys().next().value;r&&this.delete(r)}return this}}});function fo(i,e){if(Rv.has(`${i}.${e}`))return Rv.get(`${i}.${e}`);let t=e?`${e}${i.toLowerCase()}`:i.substring(2).toLowerCase(),r=Hi(ps(t),"bytes"),s=(e?t.substring(`${e}0x`.length):t).split("");for(let l=0;l<40;l+=2)r[l>>1]>>4>=8&&s[l]&&(s[l]=s[l].toUpperCase()),(r[l>>1]&15)>=8&&s[l+1]&&(s[l+1]=s[l+1].toUpperCase());let o=`0x${s.join("")}`;return Rv.set(`${i}.${e}`,o),o}function Eg(i,e){if(!Bi(i,{strict:!1}))throw new Gi({address:i});return fo(i,e)}var Rv,ja=_(()=>{"use strict";Ns();Br();ds();hh();ms();Rv=new Os(8192)});function Bi(i,e){let{strict:t=!0}=e??{},r=`${i}.${t}`;if(Bv.has(r))return Bv.get(r);let s=(()=>EB.test(i)?i.toLowerCase()===i?!0:t?fo(i)===i:!0:!1)();return Bv.set(r,s),s}var EB,Bv,ms=_(()=>{"use strict";hh();ja();EB=/^0x[a-fA-F0-9]{40}$/,Bv=new Os(8192)});function pn(i){return typeof i[0]=="string"?Qr(i):LB(i)}function LB(i){let e=0;for(let s of i)e+=s.length;let t=new Uint8Array(e),r=0;for(let s of i)t.set(s,r),r+=s.length;return t}function Qr(i){return`0x${i.reduce((e,t)=>e+t.replace("0x",""),"")}`}var Vn=_(()=>{"use strict"});function go(i,e,t,{strict:r}={}){return hr(i,{strict:!1})?Nv(i,e,t,{strict:r}):Dv(i,e,t,{strict:r})}function BE(i,e){if(typeof e=="number"&&e>0&&e>_i(i)-1)throw new nh({offset:e,position:"start",size:_i(i)})}function DE(i,e,t){if(typeof e=="number"&&typeof t=="number"&&_i(i)!==t-e)throw new nh({offset:t,position:"end",size:_i(i)})}function Dv(i,e,t,{strict:r}={}){BE(i,e);let s=i.slice(e,t);return r&&DE(s,e,t),s}function Nv(i,e,t,{strict:r}={}){BE(i,e);let s=`0x${i.replace("0x","").slice((e??0)*2,(t??i.length)*2)}`;return r&&DE(s,e,t),s}var Ga=_(()=>{"use strict";hg();as();ls()});var NE,Lg,Ov=_(()=>{"use strict";NE=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Lg=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/});function An(i,e){if(i.length!==e.length)throw new rg({expectedLength:i.length,givenLength:e.length});let t=TB({params:i,values:e}),r=Pv(t);return r.length===0?"0x":r}function TB({params:i,values:e}){let t=[];for(let r=0;r<i.length;r++)t.push(Fv({param:i[r],value:e[r]}));return t}function Fv({param:i,value:e}){let t=Tg(i.type);if(t){let[r,s]=t;return AB(e,{length:r,param:{...i,type:s}})}if(i.type==="tuple")return NB(e,{param:i});if(i.type==="address")return CB(e);if(i.type==="bool")return RB(e);if(i.type.startsWith("uint")||i.type.startsWith("int")){let r=i.type.startsWith("int"),[,,s="256"]=Lg.exec(i.type)??[];return BB(e,{signed:r,size:Number(s)})}if(i.type.startsWith("bytes"))return MB(e,{param:i});if(i.type==="string")return DB(e);throw new lg(i.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Pv(i){let e=0;for(let o=0;o<i.length;o++){let{dynamic:l,encoded:u}=i[o];l?e+=32:e+=_i(u)}let t=[],r=[],s=0;for(let o=0;o<i.length;o++){let{dynamic:l,encoded:u}=i[o];l?(t.push(Ve(e+s,{size:32})),r.push(u),s+=_i(u)):t.push(u)}return pn([...t,...r])}function CB(i){if(!Bi(i))throw new Gi({address:i});return{dynamic:!1,encoded:po(i.toLowerCase())}}function AB(i,{length:e,param:t}){let r=e===null;if(!Array.isArray(i))throw new ug(i);if(!r&&i.length!==e)throw new tg({expectedLength:e,givenLength:i.length,type:`${t.type}[${e}]`});let s=!1,o=[];for(let l=0;l<i.length;l++){let u=Fv({param:t,value:i[l]});u.dynamic&&(s=!0),o.push(u)}if(r||s){let l=Pv(o);if(r){let u=Ve(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?pn([u,l]):u}}if(s)return{dynamic:!0,encoded:l}}return{dynamic:!1,encoded:pn(o.map(({encoded:l})=>l))}}function MB(i,{param:e}){let[,t]=e.type.split("bytes"),r=_i(i);if(!t){let s=i;return r%32!==0&&(s=po(s,{dir:"right",size:Math.ceil((i.length-2)/2/32)*32})),{dynamic:!0,encoded:pn([po(Ve(r,{size:32})),s])}}if(r!==Number.parseInt(t))throw new ig({expectedSize:Number.parseInt(t),value:i});return{dynamic:!1,encoded:po(i,{dir:"right"})}}function RB(i){if(typeof i!="boolean")throw new X(`Invalid boolean value: "${i}" (type: ${typeof i}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:po(bg(i))}}function BB(i,{signed:e,size:t=256}){if(typeof t=="number"){let r=2n**(BigInt(t)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(i>r||i<s)throw new Gl({max:r.toString(),min:s.toString(),signed:e,size:t/8,value:i.toString()})}return{dynamic:!1,encoded:Ve(i,{size:32,signed:e})}}function DB(i){let e=us(i),t=Math.ceil(_i(e)/32),r=[];for(let s=0;s<t;s++)r.push(po(go(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:pn([po(Ve(_i(e),{size:32})),...r])}}function NB(i,{param:e}){let t=!1,r=[];for(let s=0;s<e.components.length;s++){let o=e.components[s],l=Array.isArray(i)?s:o.name,u=Fv({param:o,value:i[l]});r.push(u),u.dynamic&&(t=!0)}return{dynamic:t,encoded:t?Pv(r):pn(r.map(({encoded:s})=>s))}}function Tg(i){let e=i.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}var qo=_(()=>{"use strict";vr();Ns();ni();ah();ms();Vn();dg();ls();Ga();vt();Ov()});var Vl,Cg=_(()=>{"use strict";Ga();Mv();Vl=i=>go(kg(i),0,4)});function Fs(i){let{abi:e,args:t=[],name:r}=i,s=hr(r,{strict:!1}),o=e.filter(u=>s?u.type==="function"?Vl(u)===r:u.type==="event"?$o(u)===r:!1:"name"in u&&u.name===r);if(o.length===0)return;if(o.length===1)return o[0];let l;for(let u of o){if(!("inputs"in u))continue;if(!t||t.length===0){if(!u.inputs||u.inputs.length===0)return u;continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==t.length)continue;if(t.every((h,f)=>{let g="inputs"in u&&u.inputs[f];return g?Uv(h,g):!1})){if(l&&"inputs"in l&&l.inputs){let h=OE(u.inputs,l.inputs,t);if(h)throw new og({abiItem:u,type:h[0]},{abiItem:l,type:h[1]})}l=u}}return l||o[0]}function Uv(i,e){let t=typeof i,r=e.type;switch(r){case"address":return Bi(i,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,o)=>Uv(Object.values(i)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?t==="string"||i instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(i)&&i.every(s=>Uv(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function OE(i,e,t){for(let r in i){let s=i[r],o=e[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return OE(s.components,o.components,t[r]);let l=[s.type,o.type];if((()=>l.includes("address")&&l.includes("bytes20")?!0:l.includes("address")&&l.includes("string")?Bi(t[r],{strict:!1}):l.includes("address")&&l.includes("bytes")?Bi(t[r],{strict:!1}):!1)())return l}}var Kl=_(()=>{"use strict";vr();as();ms();ph();Cg()});function Ps(i){let{abi:e,eventName:t,args:r}=i,s=e[0];if(t){let p=Fs({abi:e,name:t});if(!p)throw new rh(t,{docsPath:FE});s=p}if(s.type!=="event")throw new rh(void 0,{docsPath:FE});let o=un(s),l=$o(o),u=[];if(r&&"inputs"in s){let p=s.inputs?.filter(f=>"indexed"in f&&f.indexed),h=Array.isArray(r)?r:Object.values(r).length>0?p?.map(f=>r[f.name])??[]:[];h.length>0&&(u=p?.map((f,g)=>Array.isArray(h[g])?h[g].map((b,v)=>PE({param:f,value:h[g][v]})):typeof h[g]<"u"&&h[g]!==null?PE({param:f,value:h[g]}):null)??[])}return[l,...u]}function PE({param:i,value:e}){if(i.type==="string"||i.type==="bytes")return Hi(Wn(e));if(i.type==="tuple"||i.type.match(/^(.*)\[(\d+)?\]$/))throw new pg(i.type);return An([i],[e])}var FE,$l=_(()=>{"use strict";vr();aE();Br();ds();ph();qo();Ua();Kl();FE="/docs/contract/encodeEventTopics"});function Yo(i,{method:e}){let t={};return i.transport.type==="fallback"&&i.transport.onResponse?.(({method:r,response:s,status:o,transport:l})=>{o==="success"&&e===r&&(t[s]=l.request)}),r=>t[r]||i.request}var dh=_(()=>{"use strict"});async function Ag(i,e){let{address:t,abi:r,args:s,eventName:o,fromBlock:l,strict:u,toBlock:p}=e,h=Yo(i,{method:"eth_newFilter"}),f=o?Ps({abi:r,args:s,eventName:o}):void 0,g=await i.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof l=="bigint"?Ve(l):l,toBlock:typeof p=="bigint"?Ve(p):p,topics:f}]});return{abi:r,args:s,eventName:o,id:g,request:h(g),strict:!!u,type:"event"}}var Hv=_(()=>{"use strict";$l();vt();dh()});function ai(i){return typeof i=="string"?{address:i,type:"json-rpc"}:i}var Sr=_(()=>{"use strict"});function HE(i){let{abi:e,args:t,functionName:r}=i,s=e[0];if(r){let o=Fs({abi:e,args:t,name:r});if(!o)throw new zo(r,{docsPath:UE});s=o}if(s.type!=="function")throw new zo(void 0,{docsPath:UE});return{abi:[s],functionName:Vl(un(s))}}var UE,zE=_(()=>{"use strict";vr();Cg();Ua();Kl();UE="/docs/contract/encodeFunctionData"});function $i(i){let{args:e}=i,{abi:t,functionName:r}=(()=>i.abi.length===1&&i.functionName?.startsWith("0x")?i:HE(i))(),s=t[0],o=r,l="inputs"in s&&s.inputs?An(s.inputs,e??[]):void 0;return Qr([o,l??"0x"])}var Kn=_(()=>{"use strict";Vn();qo();zE()});var Mg,jE,GE,Rg=_(()=>{"use strict";Mg={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},jE={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},GE={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}});var mh,ql,Bg,zv=_(()=>{"use strict";ni();mh=class extends X{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},ql=class extends X{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},Bg=class extends X{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}});function Yl(i,{recursiveReadLimit:e=8192}={}){let t=Object.create(OB);return t.bytes=i,t.dataView=new DataView(i.buffer,i.byteOffset,i.byteLength),t.positionReadCount=new Map,t.recursiveReadLimit=e,t}var OB,Dg=_(()=>{"use strict";zv();OB={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Bg({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(i){if(i<0||i>this.bytes.length-1)throw new ql({length:this.bytes.length,position:i})},decrementPosition(i){if(i<0)throw new mh({offset:i});let e=this.position-i;this.assertPosition(e),this.position=e},getReadCount(i){return this.positionReadCount.get(i||this.position)||0},incrementPosition(i){if(i<0)throw new mh({offset:i});let e=this.position+i;this.assertPosition(e),this.position=e},inspectByte(i){let e=i??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(i,e){let t=e??this.position;return this.assertPosition(t+i-1),this.bytes.subarray(t,t+i)},inspectUint8(i){let e=i??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(i){let e=i??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(i){let e=i??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(i){let e=i??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(i){this.assertPosition(this.position),this.bytes[this.position]=i,this.position++},pushBytes(i){this.assertPosition(this.position+i.length-1),this.bytes.set(i,this.position),this.position+=i.length},pushUint8(i){this.assertPosition(this.position),this.bytes[this.position]=i,this.position++},pushUint16(i){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,i),this.position+=2},pushUint24(i){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,i>>8),this.dataView.setUint8(this.position+2,i&255),this.position+=3},pushUint32(i){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,i),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let i=this.inspectByte();return this.position++,i},readBytes(i,e){this.assertReadLimit(),this._touch();let t=this.inspectBytes(i);return this.position+=e??i,t},readUint8(){this.assertReadLimit(),this._touch();let i=this.inspectUint8();return this.position+=1,i},readUint16(){this.assertReadLimit(),this._touch();let i=this.inspectUint16();return this.position+=2,i},readUint24(){this.assertReadLimit(),this._touch();let i=this.inspectUint24();return this.position+=3,i},readUint32(){this.assertReadLimit(),this._touch();let i=this.inspectUint32();return this.position+=4,i},get remaining(){return this.bytes.length-this.position},setPosition(i){let e=this.position;return this.assertPosition(i),this.position=i,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let i=this.getReadCount();this.positionReadCount.set(this.position,i+1),i>0&&this.recursiveReadCount++}}});function WE(i,e={}){typeof e.size<"u"&&_n(i,{size:e.size});let t=di(i,e);return Ki(t,e)}function VE(i,e={}){let t=i;if(typeof e.size<"u"&&(_n(t,{size:e.size}),t=qr(t)),t.length>1||t[0]>1)throw new mg(t);return!!t[0]}function Us(i,e={}){typeof e.size<"u"&&_n(i,{size:e.size});let t=di(i,e);return br(t,e)}function KE(i,e={}){let t=i;return typeof e.size<"u"&&(_n(t,{size:e.size}),t=qr(t,{dir:"right"})),new TextDecoder().decode(t)}var $E=_(()=>{"use strict";ah();Wl();Yr();vt()});function Wa(i,e){let t=typeof e=="string"?Ir(e):e,r=Yl(t);if(_i(t)===0&&i.length>0)throw new Gn;if(_i(e)&&_i(e)<32)throw new Hl({data:typeof e=="string"?e:di(e),params:i,size:_i(e)});let s=0,o=[];for(let l=0;l<i.length;++l){let u=i[l];r.setPosition(s);let[p,h]=Ql(r,u,{staticPosition:0});s+=h,o.push(p)}return o}function Ql(i,e,{staticPosition:t}){let r=Tg(e.type);if(r){let[s,o]=r;return PB(i,{...e,type:o},{length:s,staticPosition:t})}if(e.type==="tuple")return jB(i,e,{staticPosition:t});if(e.type==="address")return FB(i);if(e.type==="bool")return UB(i);if(e.type.startsWith("bytes"))return HB(i,e,{staticPosition:t});if(e.type.startsWith("uint")||e.type.startsWith("int"))return zB(i,e);if(e.type==="string")return GB(i,{staticPosition:t});throw new cg(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function FB(i){let e=i.readBytes(32);return[fo(di(Dv(e,-20))),32]}function PB(i,e,{length:t,staticPosition:r}){if(!t){let l=Us(i.readBytes(jv)),u=r+l,p=u+qE;i.setPosition(u);let h=Us(i.readBytes(qE)),f=fh(e),g=0,b=[];for(let v=0;v<h;++v){i.setPosition(p+(f?v*32:g));let[w,k]=Ql(i,e,{staticPosition:p});g+=k,b.push(w)}return i.setPosition(r+32),[b,32]}if(fh(e)){let l=Us(i.readBytes(jv)),u=r+l,p=[];for(let h=0;h<t;++h){i.setPosition(u+h*32);let[f]=Ql(i,e,{staticPosition:u});p.push(f)}return i.setPosition(r+32),[p,32]}let s=0,o=[];for(let l=0;l<t;++l){let[u,p]=Ql(i,e,{staticPosition:r+s});s+=p,o.push(u)}return[o,s]}function UB(i){return[VE(i.readBytes(32),{size:32}),32]}function HB(i,e,{staticPosition:t}){let[r,s]=e.type.split("bytes");if(!s){let l=Us(i.readBytes(32));i.setPosition(t+l);let u=Us(i.readBytes(32));if(u===0)return i.setPosition(t+32),["0x",32];let p=i.readBytes(u);return i.setPosition(t+32),[di(p),32]}return[di(i.readBytes(Number.parseInt(s),32)),32]}function zB(i,e){let t=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=i.readBytes(32);return[r>48?WE(s,{signed:t}):Us(s,{signed:t}),32]}function jB(i,e,{staticPosition:t}){let r=e.components.length===0||e.components.some(({name:l})=>!l),s=r?[]:{},o=0;if(fh(e)){let l=Us(i.readBytes(jv)),u=t+l;for(let p=0;p<e.components.length;++p){let h=e.components[p];i.setPosition(u+o);let[f,g]=Ql(i,h,{staticPosition:u});o+=g,s[r?p:h?.name]=f}return i.setPosition(t+32),[s,32]}for(let l=0;l<e.components.length;++l){let u=e.components[l],[p,h]=Ql(i,u,{staticPosition:t});s[r?l:u?.name]=p,o+=h}return[s,o]}function GB(i,{staticPosition:e}){let t=Us(i.readBytes(32)),r=e+t;i.setPosition(r);let s=Us(i.readBytes(32));if(s===0)return i.setPosition(e+32),["",32];let o=i.readBytes(s,32),l=KE(qr(o));return i.setPosition(e+32),[l,32]}function fh(i){let{type:e}=i;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return i.components?.some(fh);let t=Tg(i.type);return!!(t&&fh({...i,type:t[1]}))}var qE,jv,Ng=_(()=>{"use strict";vr();ja();Dg();ls();Ga();Wl();$E();Br();vt();qo();qE=32,jv=32});function Og(i){let{abi:e,data:t}=i,r=go(t,0,4);if(r==="0x")throw new Gn;let o=[...e||[],jE,GE].find(l=>l.type==="error"&&r===Vl(un(l)));if(!o)throw new zl(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?Wa(o.inputs,go(t,4)):void 0,errorName:o.name}}var Gv=_(()=>{"use strict";Rg();vr();Ga();Cg();Ng();Ua()});var mi,hn=_(()=>{"use strict";mi=(i,e,t)=>JSON.stringify(i,(r,s)=>{let o=typeof s=="bigint"?s.toString():s;return typeof e=="function"?e(r,o):o},t)});function Wv({abiItem:i,args:e,includeFunctionName:t=!0,includeName:r=!1}){if("name"in i&&"inputs"in i&&i.inputs)return`${t?i.name:""}(${i.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof e[o]=="object"?mi(e[o]):e[o]}`).join(", ")})`}var YE=_(()=>{"use strict";hn()});var QE,XE,Vv=_(()=>{"use strict";QE={gwei:9,wei:18},XE={ether:-9,wei:9}});function Qo(i,e){let t=i.toString(),r=t.startsWith("-");r&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,o]=[t.slice(0,t.length-e),t.slice(t.length-e)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${o?`.${o}`:""}`}var Fg=_(()=>{"use strict"});function Xl(i,e="wei"){return Qo(i,QE[e])}var Pg=_(()=>{"use strict";Vv();Fg()});function wr(i,e="wei"){return Qo(i,XE[e])}var Jl=_(()=>{"use strict";Vv();Fg()});function JE(i){return i.reduce((e,{slot:t,value:r})=>`${e}        ${t}: ${r}
`,"")}function ZE(i){return i.reduce((e,{address:t,...r})=>{let s=`${e}    ${t}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=JE(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=JE(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}var Ug,Hg,Kv=_(()=>{"use strict";ni();Ug=class extends X{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}},Hg=class extends X{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}});function Va(i){let e=Object.entries(i).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),t=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(t+1)}  ${s}`).join(`
`)}var zg,jg,Gg,Wg,Vg,Zl,ec,Kg,fs=_(()=>{"use strict";Pg();Jl();ni();zg=class extends X{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}},jg=class extends X{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}},Gg=class extends X{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Va(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}},Wg=class extends X{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}},Vg=class extends X{constructor(e,{account:t,docsPath:r,chain:s,data:o,gas:l,gasPrice:u,maxFeePerGas:p,maxPriorityFeePerGas:h,nonce:f,to:g,value:b}){let v=Va({chain:s&&`${s?.name} (id: ${s?.id})`,from:t?.address,to:g,value:typeof b<"u"&&`${Xl(b)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:l,gasPrice:typeof u<"u"&&`${wr(u)} gwei`,maxFeePerGas:typeof p<"u"&&`${wr(p)} gwei`,maxPriorityFeePerGas:typeof h<"u"&&`${wr(h)} gwei`,nonce:f});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",v].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},Zl=class extends X{constructor({blockHash:e,blockNumber:t,blockTag:r,hash:s,index:o}){let l="Transaction";r&&o!==void 0&&(l=`Transaction at block time "${r}" at index "${o}"`),e&&o!==void 0&&(l=`Transaction at block hash "${e}" at index "${o}"`),t&&o!==void 0&&(l=`Transaction at block number "${t}" at index "${o}"`),s&&(l=`Transaction with hash "${s}"`),super(`${l} could not be found.`,{name:"TransactionNotFoundError"})}},ec=class extends X{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}},Kg=class extends X{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}});var eL,Ka,$g=_(()=>{"use strict";eL=i=>i,Ka=i=>i});var tc,qg,$a,Yg,Qg,Hs,Xo=_(()=>{"use strict";Sr();Rg();Gv();Ua();YE();Kl();Pg();Jl();vr();ni();Kv();fs();$g();tc=class extends X{constructor(e,{account:t,docsPath:r,chain:s,data:o,gas:l,gasPrice:u,maxFeePerGas:p,maxPriorityFeePerGas:h,nonce:f,to:g,value:b,stateOverride:v}){let w=t?ai(t):void 0,k=Va({from:w?.address,to:g,value:typeof b<"u"&&`${Xl(b)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:l,gasPrice:typeof u<"u"&&`${wr(u)} gwei`,maxFeePerGas:typeof p<"u"&&`${wr(p)} gwei`,maxPriorityFeePerGas:typeof h<"u"&&`${wr(h)} gwei`,nonce:f});v&&(k+=`
${ZE(v)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",k].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},qg=class extends X{constructor(e,{abi:t,args:r,contractAddress:s,docsPath:o,functionName:l,sender:u}){let p=Fs({abi:t,args:r,name:l}),h=p?Wv({abiItem:p,args:r,includeFunctionName:!1,includeName:!1}):void 0,f=p?un(p,{includeName:!0}):void 0,g=Va({address:s&&eL(s),function:f,args:h&&h!=="()"&&`${[...Array(l?.length??0).keys()].map(()=>" ").join("")}${h}`,sender:u});super(e.shortMessage||`An unknown error occurred while executing the contract function "${l}".`,{cause:e,docsPath:o,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],g&&"Contract Call:",g].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=l,this.sender=u}},$a=class extends X{constructor({abi:e,data:t,functionName:r,message:s}){let o,l,u,p;if(t&&t!=="0x")try{l=Og({abi:e,data:t});let{abiItem:f,errorName:g,args:b}=l;if(g==="Error")p=b[0];else if(g==="Panic"){let[v]=b;p=Mg[v]}else{let v=f?un(f,{includeName:!0}):void 0,w=f&&b?Wv({abiItem:f,args:b,includeFunctionName:!1,includeName:!1}):void 0;u=[v?`Error: ${v}`:"",w&&w!=="()"?`       ${[...Array(g?.length??0).keys()].map(()=>" ").join("")}${w}`:""]}}catch(f){o=f}else s&&(p=s);let h;o instanceof zl&&(h=o.signature,u=[`Unable to decode signature "${h}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${h}.`]),super(p&&p!=="execution reverted"||h?[`The contract function "${r}" reverted with the following ${h?"signature":"reason"}:`,p||h].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:u,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=l,this.raw=t,this.reason=p,this.signature=h}},Yg=class extends X{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}},Qg=class extends X{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}},Hs=class extends X{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}});var $n,Jo,gh,qa=_(()=>{"use strict";hn();ni();$g();$n=class extends X{constructor({body:e,cause:t,details:r,headers:s,status:o,url:l}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${Ka(l)}`,e&&`Request body: ${mi(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=o,this.url=l}},Jo=class extends X{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${Ka(r)}`,`Request body: ${mi(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}},gh=class extends X{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Ka(t)}`,`Request body: ${mi(e)}`],name:"TimeoutError"})}}});var WB,Xr,Zo,ic,rc,nc,sc,bo,zs,oc,ac,lc,ea,Ya,cc,Qa,uc,pc,hc,dc,mc,Xg,bh=_(()=>{"use strict";ni();qa();WB=-1,Xr=class extends X{constructor(e,{code:t,docsPath:r,metaMessages:s,name:o,shortMessage:l}){super(l,{cause:e,docsPath:r,metaMessages:s||e?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||e.name,this.code=e instanceof Jo?e.code:t??WB}},Zo=class extends Xr{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}},ic=class i extends Xr{constructor(e){super(e,{code:i.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(ic,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});rc=class i extends Xr{constructor(e){super(e,{code:i.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(rc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});nc=class i extends Xr{constructor(e,{method:t}={}){super(e,{code:i.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}};Object.defineProperty(nc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});sc=class i extends Xr{constructor(e){super(e,{code:i.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(sc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});bo=class i extends Xr{constructor(e){super(e,{code:i.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(bo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});zs=class i extends Xr{constructor(e){super(e,{code:i.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(zs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});oc=class i extends Xr{constructor(e){super(e,{code:i.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(oc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});ac=class i extends Xr{constructor(e){super(e,{code:i.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(ac,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});lc=class i extends Xr{constructor(e){super(e,{code:i.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(lc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});ea=class i extends Xr{constructor(e,{method:t}={}){super(e,{code:i.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}};Object.defineProperty(ea,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});Ya=class i extends Xr{constructor(e){super(e,{code:i.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(Ya,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});cc=class i extends Xr{constructor(e){super(e,{code:i.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(cc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});Qa=class i extends Zo{constructor(e){super(e,{code:i.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(Qa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});uc=class i extends Zo{constructor(e){super(e,{code:i.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(uc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});pc=class i extends Zo{constructor(e,{method:t}={}){super(e,{code:i.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}};Object.defineProperty(pc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});hc=class i extends Zo{constructor(e){super(e,{code:i.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(hc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});dc=class i extends Zo{constructor(e){super(e,{code:i.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(dc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});mc=class i extends Zo{constructor(e){super(e,{code:i.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(mc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});Xg=class extends Xr{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}});function Mn(i,{abi:e,address:t,args:r,docsPath:s,functionName:o,sender:l}){let u=i instanceof Hs?i:i instanceof X?i.walk(w=>"data"in w)||i.walk():{},{code:p,data:h,details:f,message:g,shortMessage:b}=u,v=(()=>i instanceof Gn?new Yg({functionName:o}):[VB,bo.code].includes(p)&&(h||f||g||b)?new $a({abi:e,data:typeof h=="object"?h.data:h,functionName:o,message:u instanceof Jo?f:b??g}):i)();return new qg(v,{abi:e,args:r,contractAddress:t,docsPath:s,functionName:o,sender:l})}var VB,Xa=_(()=>{"use strict";vr();ni();Xo();qa();bh();VB=3});function tL(i){let e=Hi(`0x${i.substring(4)}`).substring(26);return fo(`0x${e}`)}var iL=_(()=>{"use strict";ja();ds()});function KB(i,e,t,r){if(typeof i.setBigUint64=="function")return i.setBigUint64(e,t,r);let s=BigInt(32),o=BigInt(4294967295),l=Number(t>>s&o),u=Number(t&o),p=r?4:0,h=r?0:4;i.setUint32(e+p,l,r),i.setUint32(e+h,u,r)}function rL(i,e,t){return i&e^~i&t}function nL(i,e,t){return i&e^i&t^e&t}var Jg,sL=_(()=>{"use strict";ch();za();Jg=class extends Wo{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=xg(this.buffer)}update(e){mo(this);let{view:t,buffer:r,blockLen:s}=this;e=Vo(e);let o=e.length;for(let l=0;l<o;){let u=Math.min(s-this.pos,o-l);if(u===s){let p=xg(e);for(;s<=o-l;l+=s)this.process(p,l);continue}r.set(e.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){mo(this),yg(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:o}=this,{pos:l}=this;t[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(r,0),l=0);for(let g=l;g<s;g++)t[g]=0;KB(r,s-8,BigInt(this.length*8),o),this.process(r,0);let u=xg(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=p/4,f=this.get();if(h>f.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<h;g++)u.setUint32(4*g,f[g],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:s,finished:o,destroyed:l,pos:u}=this;return e.length=s,e.pos=u,e.finished=o,e.destroyed=l,s%t&&e.buffer.set(r),e}}});var $B,ta,ia,$v,Ja,qv=_(()=>{"use strict";sL();za();$B=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ta=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ia=new Uint32Array(64),$v=class extends Jg{constructor(){super(64,32,8,!1),this.A=ta[0]|0,this.B=ta[1]|0,this.C=ta[2]|0,this.D=ta[3]|0,this.E=ta[4]|0,this.F=ta[5]|0,this.G=ta[6]|0,this.H=ta[7]|0}get(){let{A:e,B:t,C:r,D:s,E:o,F:l,G:u,H:p}=this;return[e,t,r,s,o,l,u,p]}set(e,t,r,s,o,l,u,p){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=l|0,this.G=u|0,this.H=p|0}process(e,t){for(let g=0;g<16;g++,t+=4)ia[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){let b=ia[g-15],v=ia[g-2],w=hs(b,7)^hs(b,18)^b>>>3,k=hs(v,17)^hs(v,19)^v>>>10;ia[g]=k+ia[g-7]+w+ia[g-16]|0}let{A:r,B:s,C:o,D:l,E:u,F:p,G:h,H:f}=this;for(let g=0;g<64;g++){let b=hs(u,6)^hs(u,11)^hs(u,25),v=f+b+rL(u,p,h)+$B[g]+ia[g]|0,k=(hs(r,2)^hs(r,13)^hs(r,22))+nL(r,s,o)|0;f=h,h=p,p=u,u=l+v|0,l=o,o=s,s=r,r=v+k|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,l=l+this.D|0,u=u+this.E|0,p=p+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,s,o,l,u,p,h,f)}roundClean(){ia.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Ja=vg(()=>new $v)});var Zg,Yv,oL=_(()=>{"use strict";ch();za();Zg=class extends Wo{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,cE(e);let r=Vo(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let l=0;l<o.length;l++)o[l]^=54;this.iHash.update(o),this.oHash=e.create();for(let l=0;l<o.length;l++)o[l]^=106;this.oHash.update(o),o.fill(0)}update(e){return mo(this),this.iHash.update(e),this}digestInto(e){mo(this),Go(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:s,destroyed:o,blockLen:l,outputLen:u}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=l,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Yv=(i,e,t)=>new Zg(i,e).update(t).digest();Yv.create=(i,e)=>new Zg(i,e)});var tI={};cf(tI,{aInRange:()=>js,abool:()=>Za,abytes:()=>qn,bitGet:()=>JB,bitLen:()=>Zv,bitMask:()=>_h,bitSet:()=>ZB,bytesToHex:()=>el,bytesToNumberBE:()=>xn,bytesToNumberLE:()=>ib,concatBytes:()=>Jr,createHmacDrbg:()=>eI,ensureBytes:()=>kr,equalBytes:()=>XB,hexToBytes:()=>il,hexToNumber:()=>Jv,inRange:()=>na,isBytes:()=>ra,memoized:()=>nb,notImplemented:()=>tD,numberToBytesBE:()=>gs,numberToBytesLE:()=>rb,numberToHexUnpadded:()=>tl,numberToVarBytesBE:()=>QB,utf8ToBytes:()=>yh,validateObject:()=>Gs});function ra(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function qn(i){if(!ra(i))throw new Error("Uint8Array expected")}function Za(i,e){if(typeof e!="boolean")throw new Error(i+" boolean expected, got "+e)}function el(i){qn(i);let e="";for(let t=0;t<i.length;t++)e+=YB[i[t]];return e}function tl(i){let e=i.toString(16);return e.length&1?"0"+e:e}function Jv(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);return i===""?eb:BigInt("0x"+i)}function aL(i){if(i>=yo._0&&i<=yo._9)return i-yo._0;if(i>=yo.A&&i<=yo.F)return i-(yo.A-10);if(i>=yo.a&&i<=yo.f)return i-(yo.a-10)}function il(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);let e=i.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(t);for(let s=0,o=0;s<t;s++,o+=2){let l=aL(i.charCodeAt(o)),u=aL(i.charCodeAt(o+1));if(l===void 0||u===void 0){let p=i[o]+i[o+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+o)}r[s]=l*16+u}return r}function xn(i){return Jv(el(i))}function ib(i){return qn(i),Jv(el(Uint8Array.from(i).reverse()))}function gs(i,e){return il(i.toString(16).padStart(e*2,"0"))}function rb(i,e){return gs(i,e).reverse()}function QB(i){return il(tl(i))}function kr(i,e,t){let r;if(typeof e=="string")try{r=il(e)}catch(o){throw new Error(i+" must be hex string or Uint8Array, cause: "+o)}else if(ra(e))r=Uint8Array.from(e);else throw new Error(i+" must be hex string or Uint8Array");let s=r.length;if(typeof t=="number"&&s!==t)throw new Error(i+" of length "+t+" expected, got "+s);return r}function Jr(...i){let e=0;for(let r=0;r<i.length;r++){let s=i[r];qn(s),e+=s.length}let t=new Uint8Array(e);for(let r=0,s=0;r<i.length;r++){let o=i[r];t.set(o,s),s+=o.length}return t}function XB(i,e){if(i.length!==e.length)return!1;let t=0;for(let r=0;r<i.length;r++)t|=i[r]^e[r];return t===0}function yh(i){if(typeof i!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(i))}function na(i,e,t){return Qv(i)&&Qv(e)&&Qv(t)&&e<=i&&i<t}function js(i,e,t,r){if(!na(e,t,r))throw new Error("expected valid "+i+": "+t+" <= n < "+r+", got "+e)}function Zv(i){let e;for(e=0;i>eb;i>>=tb,e+=1);return e}function JB(i,e){return i>>BigInt(e)&tb}function ZB(i,e,t){return i|(t?tb:eb)<<BigInt(e)}function eI(i,e,t){if(typeof i!="number"||i<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Xv(i),s=Xv(i),o=0,l=()=>{r.fill(1),s.fill(0),o=0},u=(...g)=>t(s,r,...g),p=(g=Xv())=>{s=u(lL([0]),g),r=u(),g.length!==0&&(s=u(lL([1]),g),r=u())},h=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let g=0,b=[];for(;g<e;){r=u();let v=r.slice();b.push(v),g+=r.length}return Jr(...b)};return(g,b)=>{l(),p(g);let v;for(;!(v=b(h()));)p();return l(),v}}function Gs(i,e,t={}){let r=(s,o,l)=>{let u=eD[o];if(typeof u!="function")throw new Error("invalid validator function");let p=i[s];if(!(l&&p===void 0)&&!u(p,i))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+p)};for(let[s,o]of Object.entries(e))r(s,o,!1);for(let[s,o]of Object.entries(t))r(s,o,!0);return i}function nb(i){let e=new WeakMap;return(t,...r)=>{let s=e.get(t);if(s!==void 0)return s;let o=i(t,...r);return e.set(t,o),o}}var eb,tb,qB,YB,yo,Qv,_h,Xv,lL,eD,tD,rl=_(()=>{"use strict";eb=BigInt(0),tb=BigInt(1),qB=BigInt(2);YB=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));yo={_0:48,_9:57,A:65,F:70,a:97,f:102};Qv=i=>typeof i=="bigint"&&eb<=i;_h=i=>(qB<<BigInt(i-1))-tb,Xv=i=>new Uint8Array(i),lL=i=>Uint8Array.from(i);eD={bigint:i=>typeof i=="bigint",function:i=>typeof i=="function",boolean:i=>typeof i=="boolean",string:i=>typeof i=="string",stringOrUint8Array:i=>typeof i=="string"||ra(i),isSafeInteger:i=>Number.isSafeInteger(i),array:i=>Array.isArray(i),field:(i,e)=>e.Fp.isValid(i),hash:i=>typeof i=="function"&&Number.isSafeInteger(i.outputLen)};tD=()=>{throw new Error("not implemented")}});function dr(i,e){let t=i%e;return t>=Er?t:e+t}function sD(i,e,t){if(e<Er)throw new Error("invalid exponent, negatives unsupported");if(t<=Er)throw new Error("invalid modulus");if(t===Zi)return Er;let r=Zi;for(;e>Er;)e&Zi&&(r=r*i%t),i=i*i%t,e>>=Zi;return r}function Rn(i,e,t){let r=i;for(;e-- >Er;)r*=r,r%=t;return r}function sb(i,e){if(i===Er)throw new Error("invert: expected non-zero number");if(e<=Er)throw new Error("invert: expected positive modulus, got "+e);let t=dr(i,e),r=e,s=Er,o=Zi,l=Zi,u=Er;for(;t!==Er;){let h=r/t,f=r%t,g=s-l*h,b=o-u*h;r=t,t=f,s=l,o=u,l=g,u=b}if(r!==Zi)throw new Error("invert: does not exist");return dr(s,e)}function oD(i){let e=(i-Zi)/nl,t,r,s;for(t=i-Zi,r=0;t%nl===Er;t/=nl,r++);for(s=nl;s<i&&sD(s,e,i)!==i-Zi;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){let l=(i+Zi)/iI;return function(p,h){let f=p.pow(h,l);if(!p.eql(p.sqr(f),h))throw new Error("Cannot find square root");return f}}let o=(t+Zi)/nl;return function(u,p){if(u.pow(p,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let h=r,f=u.pow(u.mul(u.ONE,s),t),g=u.pow(p,o),b=u.pow(p,t);for(;!u.eql(b,u.ONE);){if(u.eql(b,u.ZERO))return u.ZERO;let v=1;for(let k=u.sqr(b);v<h&&!u.eql(k,u.ONE);v++)k=u.sqr(k);let w=u.pow(f,Zi<<BigInt(h-v-1));f=u.sqr(w),g=u.mul(g,w),b=u.mul(b,f),h=v}return g}}function aD(i){if(i%iI===iD){let e=(i+Zi)/iI;return function(r,s){let o=r.pow(s,e);if(!r.eql(r.sqr(o),s))throw new Error("Cannot find square root");return o}}if(i%uL===cL){let e=(i-cL)/uL;return function(r,s){let o=r.mul(s,nl),l=r.pow(o,e),u=r.mul(s,l),p=r.mul(r.mul(u,nl),l),h=r.mul(u,r.sub(p,r.ONE));if(!r.eql(r.sqr(h),s))throw new Error("Cannot find square root");return h}}return i%nD,oD(i)}function ob(i){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=lD.reduce((r,s)=>(r[s]="function",r),e);return Gs(i,t)}function cD(i,e,t){if(t<Er)throw new Error("invalid exponent, negatives unsupported");if(t===Er)return i.ONE;if(t===Zi)return e;let r=i.ONE,s=e;for(;t>Er;)t&Zi&&(r=i.mul(r,s)),s=i.sqr(s),t>>=Zi;return r}function uD(i,e){let t=new Array(e.length),r=e.reduce((o,l,u)=>i.is0(l)?o:(t[u]=o,i.mul(o,l)),i.ONE),s=i.inv(r);return e.reduceRight((o,l,u)=>i.is0(l)?o:(t[u]=i.mul(o,t[u]),i.mul(o,l)),s),t}function rI(i,e){let t=e!==void 0?e:i.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function ab(i,e,t=!1,r={}){if(i<=Er)throw new Error("invalid field: expected ORDER > 0, got "+i);let{nBitLength:s,nByteLength:o}=rI(i,e);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l,u=Object.freeze({ORDER:i,isLE:t,BITS:s,BYTES:o,MASK:_h(s),ZERO:Er,ONE:Zi,create:p=>dr(p,i),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Er<=p&&p<i},is0:p=>p===Er,isOdd:p=>(p&Zi)===Zi,neg:p=>dr(-p,i),eql:(p,h)=>p===h,sqr:p=>dr(p*p,i),add:(p,h)=>dr(p+h,i),sub:(p,h)=>dr(p-h,i),mul:(p,h)=>dr(p*h,i),pow:(p,h)=>cD(u,p,h),div:(p,h)=>dr(p*sb(h,i),i),sqrN:p=>p*p,addN:(p,h)=>p+h,subN:(p,h)=>p-h,mulN:(p,h)=>p*h,inv:p=>sb(p,i),sqrt:r.sqrt||(p=>(l||(l=aD(i)),l(u,p))),invertBatch:p=>uD(u,p),cmov:(p,h,f)=>f?h:p,toBytes:p=>t?rb(p,o):gs(p,o),fromBytes:p=>{if(p.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+p.length);return t?ib(p):xn(p)}});return Object.freeze(u)}function pL(i){if(typeof i!="bigint")throw new Error("field order must be bigint");let e=i.toString(2).length;return Math.ceil(e/8)}function nI(i){let e=pL(i);return e+Math.ceil(e/2)}function hL(i,e,t=!1){let r=i.length,s=pL(e),o=nI(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);let l=t?ib(i):xn(i),u=dr(l,e-Zi)+Zi;return t?rb(u,s):gs(u,s)}var Er,Zi,nl,iD,iI,cL,uL,rD,nD,lD,xh=_(()=>{"use strict";rl();Er=BigInt(0),Zi=BigInt(1),nl=BigInt(2),iD=BigInt(3),iI=BigInt(4),cL=BigInt(5),uL=BigInt(8),rD=BigInt(9),nD=BigInt(16);lD=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function sI(i,e){let t=e.negate();return i?t:e}function mL(i,e){if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+i)}function oI(i,e){mL(i,e);let t=Math.ceil(e/i)+1,r=2**(i-1);return{windows:t,windowSize:r}}function pD(i,e){if(!Array.isArray(i))throw new Error("array expected");i.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function hD(i,e){if(!Array.isArray(i))throw new Error("array of scalars expected");i.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}function lI(i){return fL.get(i)||1}function gL(i,e){return{constTimeNegate:sI,hasPrecomputes(t){return lI(t)!==1},unsafeLadder(t,r,s=i.ZERO){let o=t;for(;r>dL;)r&lb&&(s=s.add(o)),o=o.double(),r>>=lb;return s},precomputeWindow(t,r){let{windows:s,windowSize:o}=oI(r,e),l=[],u=t,p=u;for(let h=0;h<s;h++){p=u,l.push(p);for(let f=1;f<o;f++)p=p.add(u),l.push(p);u=p.double()}return l},wNAF(t,r,s){let{windows:o,windowSize:l}=oI(t,e),u=i.ZERO,p=i.BASE,h=BigInt(2**t-1),f=2**t,g=BigInt(t);for(let b=0;b<o;b++){let v=b*l,w=Number(s&h);s>>=g,w>l&&(w-=f,s+=lb);let k=v,E=v+Math.abs(w)-1,F=b%2!==0,O=w<0;w===0?p=p.add(sI(F,r[k])):u=u.add(sI(O,r[E]))}return{p:u,f:p}},wNAFUnsafe(t,r,s,o=i.ZERO){let{windows:l,windowSize:u}=oI(t,e),p=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let g=0;g<l;g++){let b=g*u;if(s===dL)break;let v=Number(s&p);if(s>>=f,v>u&&(v-=h,s+=lb),v===0)continue;let w=r[b+Math.abs(v)-1];v<0&&(w=w.negate()),o=o.add(w)}return o},getPrecomputes(t,r,s){let o=aI.get(r);return o||(o=this.precomputeWindow(r,t),t!==1&&aI.set(r,s(o))),o},wNAFCached(t,r,s){let o=lI(t);return this.wNAF(o,this.getPrecomputes(o,t,s),r)},wNAFCachedUnsafe(t,r,s,o){let l=lI(t);return l===1?this.unsafeLadder(t,r,o):this.wNAFUnsafe(l,this.getPrecomputes(l,t,s),r,o)},setWindowSize(t,r){mL(r,e),fL.set(t,r),aI.delete(t)}}}function bL(i,e,t,r){if(pD(t,i),hD(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");let s=i.ZERO,o=Zv(BigInt(t.length)),l=o>12?o-3:o>4?o-2:o?2:1,u=(1<<l)-1,p=new Array(u+1).fill(s),h=Math.floor((e.BITS-1)/l)*l,f=s;for(let g=h;g>=0;g-=l){p.fill(s);for(let v=0;v<r.length;v++){let w=r[v],k=Number(w>>BigInt(g)&BigInt(u));p[k]=p[k].add(t[v])}let b=s;for(let v=p.length-1,w=s;v>0;v--)w=w.add(p[v]),b=b.add(w);if(f=f.add(b),g!==0)for(let v=0;v<l;v++)f=f.double()}return f}function cI(i){return ob(i.Fp),Gs(i,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rI(i.n,i.nBitLength),...i,p:i.Fp.ORDER})}var dL,lb,aI,fL,yL=_(()=>{"use strict";xh();rl();dL=BigInt(0),lb=BigInt(1);aI=new WeakMap,fL=new WeakMap});function _L(i){i.lowS!==void 0&&Za("lowS",i.lowS),i.prehash!==void 0&&Za("prehash",i.prehash)}function dD(i){let e=cI(i);Gs(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}function gD(i){let e=dD(i),{Fp:t}=e,r=ab(e.n,e.nBitLength),s=e.toBytes||((k,E,F)=>{let O=E.toAffine();return Jr(Uint8Array.from([4]),t.toBytes(O.x),t.toBytes(O.y))}),o=e.fromBytes||(k=>{let E=k.subarray(1),F=t.fromBytes(E.subarray(0,t.BYTES)),O=t.fromBytes(E.subarray(t.BYTES,2*t.BYTES));return{x:F,y:O}});function l(k){let{a:E,b:F}=e,O=t.sqr(k),H=t.mul(O,k);return t.add(t.add(H,t.mul(k,E)),F)}if(!t.eql(t.sqr(e.Gy),l(e.Gx)))throw new Error("bad generator point: equation left != right");function u(k){return na(k,Di,e.n)}function p(k){let{allowedPrivateKeyLengths:E,nByteLength:F,wrapPrivateKey:O,n:H}=e;if(E&&typeof k!="bigint"){if(ra(k)&&(k=el(k)),typeof k!="string"||!E.includes(k.length))throw new Error("invalid private key");k=k.padStart(F*2,"0")}let Y;try{Y=typeof k=="bigint"?k:xn(kr("private key",k,F))}catch{throw new Error("invalid private key, expected hex or "+F+" bytes, got "+typeof k)}return O&&(Y=dr(Y,H)),js("private key",Y,Di,H),Y}function h(k){if(!(k instanceof b))throw new Error("ProjectivePoint expected")}let f=nb((k,E)=>{let{px:F,py:O,pz:H}=k;if(t.eql(H,t.ONE))return{x:F,y:O};let Y=k.is0();E==null&&(E=Y?t.ONE:t.inv(H));let Z=t.mul(F,E),W=t.mul(O,E),le=t.mul(H,E);if(Y)return{x:t.ZERO,y:t.ZERO};if(!t.eql(le,t.ONE))throw new Error("invZ was invalid");return{x:Z,y:W}}),g=nb(k=>{if(k.is0()){if(e.allowInfinityPoint&&!t.is0(k.py))return;throw new Error("bad point: ZERO")}let{x:E,y:F}=k.toAffine();if(!t.isValid(E)||!t.isValid(F))throw new Error("bad point: x or y not FE");let O=t.sqr(F),H=l(E);if(!t.eql(O,H))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(E,F,O){if(this.px=E,this.py=F,this.pz=O,E==null||!t.isValid(E))throw new Error("x required");if(F==null||!t.isValid(F))throw new Error("y required");if(O==null||!t.isValid(O))throw new Error("z required");Object.freeze(this)}static fromAffine(E){let{x:F,y:O}=E||{};if(!E||!t.isValid(F)||!t.isValid(O))throw new Error("invalid affine point");if(E instanceof b)throw new Error("projective point not allowed");let H=Y=>t.eql(Y,t.ZERO);return H(F)&&H(O)?b.ZERO:new b(F,O,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){let F=t.invertBatch(E.map(O=>O.pz));return E.map((O,H)=>O.toAffine(F[H])).map(b.fromAffine)}static fromHex(E){let F=b.fromAffine(o(kr("pointHex",E)));return F.assertValidity(),F}static fromPrivateKey(E){return b.BASE.multiply(p(E))}static msm(E,F){return bL(b,r,E,F)}_setWindowSize(E){w.setWindowSize(this,E)}assertValidity(){g(this)}hasEvenY(){let{y:E}=this.toAffine();if(t.isOdd)return!t.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);let{px:F,py:O,pz:H}=this,{px:Y,py:Z,pz:W}=E,le=t.eql(t.mul(F,W),t.mul(Y,H)),oe=t.eql(t.mul(O,W),t.mul(Z,H));return le&&oe}negate(){return new b(this.px,t.neg(this.py),this.pz)}double(){let{a:E,b:F}=e,O=t.mul(F,cb),{px:H,py:Y,pz:Z}=this,W=t.ZERO,le=t.ZERO,oe=t.ZERO,de=t.mul(H,H),Ne=t.mul(Y,Y),He=t.mul(Z,Z),Qe=t.mul(H,Y);return Qe=t.add(Qe,Qe),oe=t.mul(H,Z),oe=t.add(oe,oe),W=t.mul(E,oe),le=t.mul(O,He),le=t.add(W,le),W=t.sub(Ne,le),le=t.add(Ne,le),le=t.mul(W,le),W=t.mul(Qe,W),oe=t.mul(O,oe),He=t.mul(E,He),Qe=t.sub(de,He),Qe=t.mul(E,Qe),Qe=t.add(Qe,oe),oe=t.add(de,de),de=t.add(oe,de),de=t.add(de,He),de=t.mul(de,Qe),le=t.add(le,de),He=t.mul(Y,Z),He=t.add(He,He),de=t.mul(He,Qe),W=t.sub(W,de),oe=t.mul(He,Ne),oe=t.add(oe,oe),oe=t.add(oe,oe),new b(W,le,oe)}add(E){h(E);let{px:F,py:O,pz:H}=this,{px:Y,py:Z,pz:W}=E,le=t.ZERO,oe=t.ZERO,de=t.ZERO,Ne=e.a,He=t.mul(e.b,cb),Qe=t.mul(F,Y),Xt=t.mul(O,Z),Me=t.mul(H,W),_e=t.add(F,O),Le=t.add(Y,Z);_e=t.mul(_e,Le),Le=t.add(Qe,Xt),_e=t.sub(_e,Le),Le=t.add(F,H);let P=t.add(Y,W);return Le=t.mul(Le,P),P=t.add(Qe,Me),Le=t.sub(Le,P),P=t.add(O,H),le=t.add(Z,W),P=t.mul(P,le),le=t.add(Xt,Me),P=t.sub(P,le),de=t.mul(Ne,Le),le=t.mul(He,Me),de=t.add(le,de),le=t.sub(Xt,de),de=t.add(Xt,de),oe=t.mul(le,de),Xt=t.add(Qe,Qe),Xt=t.add(Xt,Qe),Me=t.mul(Ne,Me),Le=t.mul(He,Le),Xt=t.add(Xt,Me),Me=t.sub(Qe,Me),Me=t.mul(Ne,Me),Le=t.add(Le,Me),Qe=t.mul(Xt,Le),oe=t.add(oe,Qe),Qe=t.mul(P,Le),le=t.mul(_e,le),le=t.sub(le,Qe),Qe=t.mul(_e,Xt),de=t.mul(P,de),de=t.add(de,Qe),new b(le,oe,de)}subtract(E){return this.add(E.negate())}is0(){return this.equals(b.ZERO)}wNAF(E){return w.wNAFCached(this,E,b.normalizeZ)}multiplyUnsafe(E){let{endo:F,n:O}=e;js("scalar",E,bs,O);let H=b.ZERO;if(E===bs)return H;if(this.is0()||E===Di)return this;if(!F||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,E,b.normalizeZ);let{k1neg:Y,k1:Z,k2neg:W,k2:le}=F.splitScalar(E),oe=H,de=H,Ne=this;for(;Z>bs||le>bs;)Z&Di&&(oe=oe.add(Ne)),le&Di&&(de=de.add(Ne)),Ne=Ne.double(),Z>>=Di,le>>=Di;return Y&&(oe=oe.negate()),W&&(de=de.negate()),de=new b(t.mul(de.px,F.beta),de.py,de.pz),oe.add(de)}multiply(E){let{endo:F,n:O}=e;js("scalar",E,Di,O);let H,Y;if(F){let{k1neg:Z,k1:W,k2neg:le,k2:oe}=F.splitScalar(E),{p:de,f:Ne}=this.wNAF(W),{p:He,f:Qe}=this.wNAF(oe);de=w.constTimeNegate(Z,de),He=w.constTimeNegate(le,He),He=new b(t.mul(He.px,F.beta),He.py,He.pz),H=de.add(He),Y=Ne.add(Qe)}else{let{p:Z,f:W}=this.wNAF(E);H=Z,Y=W}return b.normalizeZ([H,Y])[0]}multiplyAndAddUnsafe(E,F,O){let H=b.BASE,Y=(W,le)=>le===bs||le===Di||!W.equals(H)?W.multiplyUnsafe(le):W.multiply(le),Z=Y(this,F).add(Y(E,O));return Z.is0()?void 0:Z}toAffine(E){return f(this,E)}isTorsionFree(){let{h:E,isTorsionFree:F}=e;if(E===Di)return!0;if(F)return F(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:E,clearCofactor:F}=e;return E===Di?this:F?F(b,this):this.multiplyUnsafe(e.h)}toRawBytes(E=!0){return Za("isCompressed",E),this.assertValidity(),s(b,this,E)}toHex(E=!0){return Za("isCompressed",E),el(this.toRawBytes(E))}}b.BASE=new b(e.Gx,e.Gy,t.ONE),b.ZERO=new b(t.ZERO,t.ONE,t.ZERO);let v=e.nBitLength,w=gL(b,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:p,weierstrassEquation:l,isWithinCurveOrder:u}}function bD(i){let e=cI(i);return Gs(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function vL(i){let e=bD(i),{Fp:t,n:r}=e,s=t.BYTES+1,o=2*t.BYTES+1;function l(Me){return dr(Me,r)}function u(Me){return sb(Me,r)}let{ProjectivePoint:p,normPrivateKeyToScalar:h,weierstrassEquation:f,isWithinCurveOrder:g}=gD({...e,toBytes(Me,_e,Le){let P=_e.toAffine(),nt=t.toBytes(P.x),Ee=Jr;return Za("isCompressed",Le),Le?Ee(Uint8Array.from([_e.hasEvenY()?2:3]),nt):Ee(Uint8Array.from([4]),nt,t.toBytes(P.y))},fromBytes(Me){let _e=Me.length,Le=Me[0],P=Me.subarray(1);if(_e===s&&(Le===2||Le===3)){let nt=xn(P);if(!na(nt,Di,t.ORDER))throw new Error("Point is not on curve");let Ee=f(nt),gt;try{gt=t.sqrt(Ee)}catch(Si){let st=Si instanceof Error?": "+Si.message:"";throw new Error("Point is not on curve"+st)}let pi=(gt&Di)===Di;return(Le&1)===1!==pi&&(gt=t.neg(gt)),{x:nt,y:gt}}else if(_e===o&&Le===4){let nt=t.fromBytes(P.subarray(0,t.BYTES)),Ee=t.fromBytes(P.subarray(t.BYTES,2*t.BYTES));return{x:nt,y:Ee}}else{let nt=s,Ee=o;throw new Error("invalid Point, expected length of "+nt+", or uncompressed "+Ee+", got "+_e)}}}),b=Me=>el(gs(Me,e.nByteLength));function v(Me){let _e=r>>Di;return Me>_e}function w(Me){return v(Me)?l(-Me):Me}let k=(Me,_e,Le)=>xn(Me.slice(_e,Le));class E{constructor(_e,Le,P){this.r=_e,this.s=Le,this.recovery=P,this.assertValidity()}static fromCompact(_e){let Le=e.nByteLength;return _e=kr("compactSignature",_e,Le*2),new E(k(_e,0,Le),k(_e,Le,2*Le))}static fromDER(_e){let{r:Le,s:P}=_o.toSig(kr("DER",_e));return new E(Le,P)}assertValidity(){js("r",this.r,Di,r),js("s",this.s,Di,r)}addRecoveryBit(_e){return new E(this.r,this.s,_e)}recoverPublicKey(_e){let{r:Le,s:P,recovery:nt}=this,Ee=W(kr("msgHash",_e));if(nt==null||![0,1,2,3].includes(nt))throw new Error("recovery id invalid");let gt=nt===2||nt===3?Le+e.n:Le;if(gt>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let pi=nt&1?"03":"02",gi=p.fromHex(pi+b(gt)),Si=u(gt),st=l(-Ee*Si),Oi=l(P*Si),Mr=p.BASE.multiplyAndAddUnsafe(gi,st,Oi);if(!Mr)throw new Error("point at infinify");return Mr.assertValidity(),Mr}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return il(this.toDERHex())}toDERHex(){return _o.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return il(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}let F={isValidPrivateKey(Me){try{return h(Me),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let Me=nI(e.n);return hL(e.randomBytes(Me),e.n)},precompute(Me=8,_e=p.BASE){return _e._setWindowSize(Me),_e.multiply(BigInt(3)),_e}};function O(Me,_e=!0){return p.fromPrivateKey(Me).toRawBytes(_e)}function H(Me){let _e=ra(Me),Le=typeof Me=="string",P=(_e||Le)&&Me.length;return _e?P===s||P===o:Le?P===2*s||P===2*o:Me instanceof p}function Y(Me,_e,Le=!0){if(H(Me))throw new Error("first arg must be private key");if(!H(_e))throw new Error("second arg must be public key");return p.fromHex(_e).multiply(h(Me)).toRawBytes(Le)}let Z=e.bits2int||function(Me){if(Me.length>8192)throw new Error("input is too large");let _e=xn(Me),Le=Me.length*8-e.nBitLength;return Le>0?_e>>BigInt(Le):_e},W=e.bits2int_modN||function(Me){return l(Z(Me))},le=_h(e.nBitLength);function oe(Me){return js("num < 2^"+e.nBitLength,Me,bs,le),gs(Me,e.nByteLength)}function de(Me,_e,Le=Ne){if(["recovered","canonical"].some(Or=>Or in Le))throw new Error("sign() legacy options not supported");let{hash:P,randomBytes:nt}=e,{lowS:Ee,prehash:gt,extraEntropy:pi}=Le;Ee==null&&(Ee=!0),Me=kr("msgHash",Me),_L(Le),gt&&(Me=kr("prehashed msgHash",P(Me)));let gi=W(Me),Si=h(_e),st=[oe(Si),oe(gi)];if(pi!=null&&pi!==!1){let Or=pi===!0?nt(t.BYTES):pi;st.push(kr("extraEntropy",Or))}let Oi=Jr(...st),Mr=gi;function an(Or){let Gr=Z(Or);if(!g(Gr))return;let rs=u(Gr),Wr=p.BASE.multiply(Gr).toAffine(),Vr=l(Wr.x);if(Vr===bs)return;let zn=l(rs*l(Mr+Vr*Si));if(zn===bs)return;let Ln=(Wr.x===Vr?0:2)|Number(Wr.y&Di),oo=zn;return Ee&&v(zn)&&(oo=w(zn),Ln^=1),new E(Vr,oo,Ln)}return{seed:Oi,k2sig:an}}let Ne={lowS:e.lowS,prehash:!1},He={lowS:e.lowS,prehash:!1};function Qe(Me,_e,Le=Ne){let{seed:P,k2sig:nt}=de(Me,_e,Le),Ee=e;return eI(Ee.hash.outputLen,Ee.nByteLength,Ee.hmac)(P,nt)}p.BASE._setWindowSize(8);function Xt(Me,_e,Le,P=He){let nt=Me;_e=kr("msgHash",_e),Le=kr("publicKey",Le);let{lowS:Ee,prehash:gt,format:pi}=P;if(_L(P),"strict"in P)throw new Error("options.strict was renamed to lowS");if(pi!==void 0&&pi!=="compact"&&pi!=="der")throw new Error("format must be compact or der");let gi=typeof nt=="string"||ra(nt),Si=!gi&&!pi&&typeof nt=="object"&&nt!==null&&typeof nt.r=="bigint"&&typeof nt.s=="bigint";if(!gi&&!Si)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let st,Oi;try{if(Si&&(st=new E(nt.r,nt.s)),gi){try{pi!=="compact"&&(st=E.fromDER(nt))}catch(Ln){if(!(Ln instanceof _o.Err))throw Ln}!st&&pi!=="der"&&(st=E.fromCompact(nt))}Oi=p.fromHex(Le)}catch{return!1}if(!st||Ee&&st.hasHighS())return!1;gt&&(_e=e.hash(_e));let{r:Mr,s:an}=st,Or=W(_e),Gr=u(an),rs=l(Or*Gr),Wr=l(Mr*Gr),Vr=p.BASE.multiplyAndAddUnsafe(Oi,rs,Wr)?.toAffine();return Vr?l(Vr.x)===Mr:!1}return{CURVE:e,getPublicKey:O,getSharedSecret:Y,sign:Qe,verify:Xt,ProjectivePoint:p,Signature:E,utils:F}}function yD(i,e){let t=i.ORDER,r=bs;for(let w=t-Di;w%sa===bs;w/=sa)r+=Di;let s=r,o=sa<<s-Di-Di,l=o*sa,u=(t-Di)/l,p=(u-Di)/sa,h=l-Di,f=o,g=i.pow(e,u),b=i.pow(e,(u+Di)/sa),v=(w,k)=>{let E=g,F=i.pow(k,h),O=i.sqr(F);O=i.mul(O,k);let H=i.mul(w,O);H=i.pow(H,p),H=i.mul(H,F),F=i.mul(H,k),O=i.mul(H,w);let Y=i.mul(O,F);H=i.pow(Y,f);let Z=i.eql(H,i.ONE);F=i.mul(O,b),H=i.mul(Y,E),O=i.cmov(F,O,Z),Y=i.cmov(H,Y,Z);for(let W=s;W>Di;W--){let le=W-sa;le=sa<<le-Di;let oe=i.pow(Y,le),de=i.eql(oe,i.ONE);F=i.mul(O,E),E=i.mul(E,E),oe=i.mul(Y,E),O=i.cmov(F,O,de),Y=i.cmov(oe,Y,de)}return{isValid:Z,value:O}};if(i.ORDER%xL===cb){let w=(i.ORDER-cb)/xL,k=i.sqrt(i.neg(e));v=(E,F)=>{let O=i.sqr(F),H=i.mul(E,F);O=i.mul(O,H);let Y=i.pow(O,w);Y=i.mul(Y,H);let Z=i.mul(Y,k),W=i.mul(i.sqr(Y),F),le=i.eql(W,E),oe=i.cmov(Z,Y,le);return{isValid:le,value:oe}}}return v}function IL(i,e){if(ob(i),!i.isValid(e.A)||!i.isValid(e.B)||!i.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let t=yD(i,e.Z);if(!i.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,o,l,u,p,h,f,g;s=i.sqr(r),s=i.mul(s,e.Z),o=i.sqr(s),o=i.add(o,s),l=i.add(o,i.ONE),l=i.mul(l,e.B),u=i.cmov(e.Z,i.neg(o),!i.eql(o,i.ZERO)),u=i.mul(u,e.A),o=i.sqr(l),h=i.sqr(u),p=i.mul(h,e.A),o=i.add(o,p),o=i.mul(o,l),h=i.mul(h,u),p=i.mul(h,e.B),o=i.add(o,p),f=i.mul(s,l);let{isValid:b,value:v}=t(o,h);g=i.mul(s,r),g=i.mul(g,v),f=i.cmov(f,l,b),g=i.cmov(g,v,b);let w=i.isOdd(r)===i.isOdd(g);return g=i.cmov(i.neg(g),g,w),f=i.div(f,u),{x:f,y:g}}}var mD,fD,uI,_o,bs,Di,sa,cb,xL,pI=_(()=>{"use strict";yL();xh();rl();rl();({bytesToNumberBE:mD,hexToBytes:fD}=tI),uI=class extends Error{constructor(e=""){super(e)}},_o={Err:uI,_tlv:{encode:(i,e)=>{let{Err:t}=_o;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let r=e.length/2,s=tl(r);if(s.length/2&128)throw new t("tlv.encode: long form length too big");let o=r>127?tl(s.length/2|128):"";return tl(i)+o+s+e},decode(i,e){let{Err:t}=_o,r=0;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==i)throw new t("tlv.decode: wrong tlv");let s=e[r++],o=!!(s&128),l=0;if(!o)l=s;else{let p=s&127;if(!p)throw new t("tlv.decode(long): indefinite length not supported");if(p>4)throw new t("tlv.decode(long): byte length is too big");let h=e.subarray(r,r+p);if(h.length!==p)throw new t("tlv.decode: length bytes not complete");if(h[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let f of h)l=l<<8|f;if(r+=p,l<128)throw new t("tlv.decode(long): not minimal encoding")}let u=e.subarray(r,r+l);if(u.length!==l)throw new t("tlv.decode: wrong value length");return{v:u,l:e.subarray(r+l)}}},_int:{encode(i){let{Err:e}=_o;if(i<bs)throw new e("integer: negative integers are not allowed");let t=tl(i);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(i){let{Err:e}=_o;if(i[0]&128)throw new e("invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return mD(i)}},toSig(i){let{Err:e,_int:t,_tlv:r}=_o,s=typeof i=="string"?fD(i):i;qn(s);let{v:o,l}=r.decode(48,s);if(l.length)throw new e("invalid signature: left bytes after parsing");let{v:u,l:p}=r.decode(2,o),{v:h,l:f}=r.decode(2,p);if(f.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(u),s:t.decode(h)}},hexFromSig(i){let{_tlv:e,_int:t}=_o,r=e.encode(2,t.encode(i.r)),s=e.encode(2,t.encode(i.s)),o=r+s;return e.encode(48,o)}},bs=BigInt(0),Di=BigInt(1),sa=BigInt(2),cb=BigInt(3),xL=BigInt(4)});function _D(i){return{hash:i,hmac:(e,...t)=>Yv(i,e,_E(...t)),randomBytes:Ig}}function SL(i,e){let t=r=>vL({...i,..._D(r)});return{...t(e),create:t}}var wL=_(()=>{"use strict";oL();za();pI();});function oa(i,e){if(vh(i),vh(e),i<0||i>=1<<8*e)throw new Error("invalid I2OSP input: "+i);let t=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)t[r]=i&255,i>>>=8;return new Uint8Array(t)}function vD(i,e){let t=new Uint8Array(i.length);for(let r=0;r<i.length;r++)t[r]=i[r]^e[r];return t}function vh(i){if(!Number.isSafeInteger(i))throw new Error("number expected")}function ID(i,e,t,r){qn(i),qn(e),vh(t),e.length>255&&(e=r(Jr(yh("H2C-OVERSIZE-DST-"),e)));let{outputLen:s,blockLen:o}=r,l=Math.ceil(t/s);if(t>65535||l>255)throw new Error("expand_message_xmd: invalid lenInBytes");let u=Jr(e,oa(e.length,1)),p=oa(0,o),h=oa(t,2),f=new Array(l),g=r(Jr(p,i,h,oa(0,1),u));f[0]=r(Jr(g,oa(1,1),u));for(let v=1;v<=l;v++){let w=[vD(g,f[v-1]),oa(v+1,1),u];f[v]=r(Jr(...w))}return Jr(...f).slice(0,t)}function SD(i,e,t,r,s){if(qn(i),qn(e),vh(t),e.length>255){let o=Math.ceil(2*r/8);e=s.create({dkLen:o}).update(yh("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:t}).update(i).update(oa(t,2)).update(e).update(oa(e.length,1)).digest()}function kL(i,e,t){Gs(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:s,m:o,hash:l,expand:u,DST:p}=t;qn(i),vh(e);let h=typeof p=="string"?yh(p):p,f=r.toString(2).length,g=Math.ceil((f+s)/8),b=e*o*g,v;if(u==="xmd")v=ID(i,h,b,l);else if(u==="xof")v=SD(i,h,b,s,l);else if(u==="_internal_pass")v=i;else throw new Error('expand must be "xmd" or "xof"');let w=new Array(e);for(let k=0;k<e;k++){let E=new Array(o);for(let F=0;F<o;F++){let O=g*(F+k*o),H=v.subarray(O,O+g);E[F]=dr(xD(H),r)}w[k]=E}return w}function EL(i,e){let t=e.map(r=>Array.from(r).reverse());return(r,s)=>{let[o,l,u,p]=t.map(h=>h.reduce((f,g)=>i.add(i.mul(f,r),g)));return r=i.div(o,l),s=i.mul(s,i.div(u,p)),{x:r,y:s}}}function LL(i,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){let o=kL(r,2,{...t,DST:t.DST,...s}),l=i.fromAffine(e(o[0])),u=i.fromAffine(e(o[1])),p=l.add(u).clearCofactor();return p.assertValidity(),p},encodeToCurve(r,s){let o=kL(r,1,{...t,DST:t.encodeDST,...s}),l=i.fromAffine(e(o[0])).clearCofactor();return l.assertValidity(),l},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let o of r)if(typeof o!="bigint")throw new Error("mapToCurve: expected array of bigints");let s=i.fromAffine(e(r)).clearCofactor();return s.assertValidity(),s}}}var xD,TL=_(()=>{"use strict";xh();rl();xD=xn});var FL={};cf(FL,{encodeToCurve:()=>MD,hashToCurve:()=>AD,schnorr:()=>LD,secp256k1:()=>xo});function ML(i){let e=wh,t=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),l=BigInt(23),u=BigInt(44),p=BigInt(88),h=i*i*i%e,f=h*h*i%e,g=Rn(f,t,e)*f%e,b=Rn(g,t,e)*f%e,v=Rn(b,pb,e)*h%e,w=Rn(v,s,e)*v%e,k=Rn(w,o,e)*w%e,E=Rn(k,u,e)*k%e,F=Rn(E,p,e)*E%e,O=Rn(F,u,e)*k%e,H=Rn(O,t,e)*f%e,Y=Rn(H,l,e)*w%e,Z=Rn(Y,r,e)*h%e,W=Rn(Z,pb,e);if(!aa.eql(aa.sqr(W),i))throw new Error("Cannot find square root");return W}function hb(i,...e){let t=AL[i];if(t===void 0){let r=Ja(Uint8Array.from(i,s=>s.charCodeAt(0)));t=Jr(r,r),AL[i]=t}return Ja(Jr(t,...e))}function mI(i){let e=xo.utils.normPrivateKeyToScalar(i),t=gI.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:Sh(-e),bytes:fI(t)}}function BL(i){js("x",i,Ih,wh);let e=hI(i*i),t=hI(e*i+BigInt(7)),r=ML(t);r%pb!==RL&&(r=hI(-r));let s=new gI(i,r,Ih);return s.assertValidity(),s}function DL(...i){return Sh(fc(hb("BIP0340/challenge",...i)))}function kD(i){return mI(i).bytes}function ED(i,e,t=Ig(32)){let r=kr("message",i),{bytes:s,scalar:o}=mI(e),l=kr("auxRand",t,32),u=dI(o^fc(hb("BIP0340/aux",l))),p=hb("BIP0340/nonce",u,s,r),h=Sh(fc(p));if(h===RL)throw new Error("sign failed: k is zero");let{bytes:f,scalar:g}=mI(h),b=DL(f,s,r),v=new Uint8Array(64);if(v.set(f,0),v.set(dI(Sh(g+b*o)),32),!NL(v,r,s))throw new Error("sign: Invalid signature produced");return v}function NL(i,e,t){let r=kr("signature",i,64),s=kr("message",e),o=kr("publicKey",t,32);try{let l=BL(fc(o)),u=fc(r.subarray(0,32));if(!na(u,Ih,wh))return!1;let p=fc(r.subarray(32,64));if(!na(p,Ih,ub))return!1;let h=DL(dI(u),fI(l),s),f=wD(l,p,Sh(-h));return!(!f||!f.hasEvenY()||f.toAffine().x!==u)}catch{return!1}}var wh,ub,Ih,pb,CL,aa,xo,RL,AL,fI,dI,hI,Sh,gI,wD,fc,LD,TD,CD,OL,AD,MD,db=_(()=>{"use strict";qv();za();wL();TL();xh();rl();pI();wh=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ub=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ih=BigInt(1),pb=BigInt(2),CL=(i,e)=>(i+e/pb)/e;aa=ab(wh,void 0,void 0,{sqrt:ML}),xo=SL({a:BigInt(0),b:BigInt(7),Fp:aa,n:ub,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:i=>{let e=ub,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ih*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,l=BigInt("0x100000000000000000000000000000000"),u=CL(o*i,e),p=CL(-r*i,e),h=dr(i-u*t-p*s,e),f=dr(-u*r-p*o,e),g=h>l,b=f>l;if(g&&(h=e-h),b&&(f=e-f),h>l||f>l)throw new Error("splitScalar: Endomorphism failed, k="+i);return{k1neg:g,k1:h,k2neg:b,k2:f}}}},Ja),RL=BigInt(0),AL={};fI=i=>i.toRawBytes(!0).slice(1),dI=i=>gs(i,32),hI=i=>dr(i,wh),Sh=i=>dr(i,ub),gI=xo.ProjectivePoint,wD=(i,e,t)=>gI.BASE.multiplyAndAddUnsafe(i,e,t);fc=xn;LD=(()=>({getPublicKey:kD,sign:ED,verify:NL,utils:{randomPrivateKey:xo.utils.randomPrivateKey,lift_x:BL,pointToBytes:fI,numberToBytesBE:gs,bytesToNumberBE:xn,taggedHash:hb,mod:dr}}))(),TD=(()=>EL(aa,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(i=>i.map(e=>BigInt(e)))))(),CD=(()=>IL(aa,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:aa.create(BigInt("-11"))}))(),OL=(()=>LL(xo.ProjectivePoint,i=>{let{x:e,y:t}=CD(aa.create(i[0]));return TD(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:aa.ORDER,m:1,k:128,expand:"xmd",hash:Ja}))(),AD=(()=>OL.hashToCurve)(),MD=(()=>OL.encodeToCurve)()});async function UL({hash:i,signature:e}){let t=hr(i)?i:tt(i),{secp256k1:r}=await Promise.resolve().then(()=>(db(),FL));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){let{r:h,s:f,v:g,yParity:b}=e,v=Number(b??g),w=PL(v);return new r.Signature(Ki(h),Ki(f)).addRecoveryBit(w)}let l=hr(e)?e:tt(e),u=br(`0x${l.slice(130)}`),p=PL(u);return r.Signature.fromCompact(l.substring(2,130)).addRecoveryBit(p)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function PL(i){if(i===0||i===1)return i;if(i===27)return 0;if(i===28)return 1;throw new Error("Invalid yParityOrV value")}var HL=_(()=>{"use strict";as();Yr();vt()});async function mb({hash:i,signature:e}){return tL(await UL({hash:i,signature:e}))}var bI=_(()=>{"use strict";iL();HL()});function ys(i,e="hex"){let t=zL(i),r=Yl(new Uint8Array(t.length));return t.encode(r),e==="hex"?di(r.bytes):r.bytes}function zL(i){return Array.isArray(i)?RD(i.map(e=>zL(e))):BD(i)}function RD(i){let e=i.reduce((s,o)=>s+o.length,0),t=jL(e);return{length:(()=>e<=55?1+e:1+t+e)(),encode(s){e<=55?s.pushByte(192+e):(s.pushByte(192+55+t),t===1?s.pushUint8(e):t===2?s.pushUint16(e):t===3?s.pushUint24(e):s.pushUint32(e));for(let{encode:o}of i)o(s)}}}function BD(i){let e=typeof i=="string"?Ir(i):i,t=jL(e.length);return{length:(()=>e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length)(),encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(128+55+t),t===1?s.pushUint8(e.length):t===2?s.pushUint16(e.length):t===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function jL(i){if(i<2**8)return 1;if(i<2**16)return 2;if(i<2**24)return 3;if(i<2**32)return 4;throw new X("Length is too large.")}var fb=_(()=>{"use strict";ni();Dg();Br();vt()});function GL(i){let{chainId:e,nonce:t,to:r}=i,s=i.contractAddress??i.address,o=Hi(Qr(["0x05",ys([e?Ve(e):"0x",s,t?Ve(t):"0x"])]));return r==="bytes"?Ir(o):o}var WL=_(()=>{"use strict";Vn();Br();vt();fb();ds()});async function gb(i){let{authorization:e,signature:t}=i;return mb({hash:GL(e),signature:t??e})}var yI=_(()=>{"use strict";bI();WL()});var bb,VL=_(()=>{"use strict";Pg();Jl();ni();fs();bb=class extends X{constructor(e,{account:t,docsPath:r,chain:s,data:o,gas:l,gasPrice:u,maxFeePerGas:p,maxPriorityFeePerGas:h,nonce:f,to:g,value:b}){let v=Va({from:t?.address,to:g,value:typeof b<"u"&&`${Xl(b)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:l,gasPrice:typeof u<"u"&&`${wr(u)} gwei`,maxFeePerGas:typeof p<"u"&&`${wr(p)} gwei`,maxPriorityFeePerGas:typeof h<"u"&&`${wr(h)} gwei`,nonce:f});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",v].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}});var vo,Yn,gc,bc,yc,_c,xc,vc,Ic,Sc,Ws,Qn,la=_(()=>{"use strict";Jl();ni();vo=class extends X{constructor({cause:e,message:t}={}){let r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}};Object.defineProperty(vo,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(vo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});Yn=class extends X{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${wr(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}};Object.defineProperty(Yn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});gc=class extends X{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${wr(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}};Object.defineProperty(gc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});bc=class extends X{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}};Object.defineProperty(bc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});yc=class extends X{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}};Object.defineProperty(yc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});_c=class extends X{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}};Object.defineProperty(_c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});xc=class extends X{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(xc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});vc=class extends X{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(vc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});Ic=class extends X{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(Ic,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});Sc=class extends X{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(Sc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});Ws=class extends X{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${wr(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${wr(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}};Object.defineProperty(Ws,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});Qn=class extends X{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}});function ca(i,e){let t=(i.details||"").toLowerCase(),r=i instanceof X?i.walk(s=>s?.code===vo.code):i;return r instanceof X?new vo({cause:i,message:r.details}):vo.nodeMessage.test(t)?new vo({cause:i,message:i.details}):Yn.nodeMessage.test(t)?new Yn({cause:i,maxFeePerGas:e?.maxFeePerGas}):gc.nodeMessage.test(t)?new gc({cause:i,maxFeePerGas:e?.maxFeePerGas}):bc.nodeMessage.test(t)?new bc({cause:i,nonce:e?.nonce}):yc.nodeMessage.test(t)?new yc({cause:i,nonce:e?.nonce}):_c.nodeMessage.test(t)?new _c({cause:i,nonce:e?.nonce}):xc.nodeMessage.test(t)?new xc({cause:i}):vc.nodeMessage.test(t)?new vc({cause:i,gas:e?.gas}):Ic.nodeMessage.test(t)?new Ic({cause:i,gas:e?.gas}):Sc.nodeMessage.test(t)?new Sc({cause:i}):Ws.nodeMessage.test(t)?new Ws({cause:i,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new Qn({cause:i})}var kh=_(()=>{"use strict";ni();la()});function KL(i,{docsPath:e,...t}){let r=(()=>{let s=ca(i,t);return s instanceof Qn?i:s})();return new bb(r,{docsPath:e,...t})}var $L=_(()=>{"use strict";VL();la();kh()});function ua(i,{format:e}){if(!e)return{};let t={};function r(o){let l=Object.keys(o);for(let u of l)u in i&&(t[u]=i[u]),o[u]&&typeof o[u]=="object"&&!Array.isArray(o[u])&&r(o[u])}let s=e(i||{});return r(s),t}var Eh=_(()=>{"use strict"});function wc(i,e){return({exclude:t,format:r})=>({exclude:t,format:s=>{let o=e(s);if(t)for(let l of t)delete o[l];return{...o,...r(s)}},type:i})}var yb=_(()=>{"use strict"});function Xn(i){let e={};return typeof i.authorizationList<"u"&&(e.authorizationList=ND(i.authorizationList)),typeof i.accessList<"u"&&(e.accessList=i.accessList),typeof i.blobVersionedHashes<"u"&&(e.blobVersionedHashes=i.blobVersionedHashes),typeof i.blobs<"u"&&(typeof i.blobs[0]!="string"?e.blobs=i.blobs.map(t=>di(t)):e.blobs=i.blobs),typeof i.data<"u"&&(e.data=i.data),typeof i.from<"u"&&(e.from=i.from),typeof i.gas<"u"&&(e.gas=Ve(i.gas)),typeof i.gasPrice<"u"&&(e.gasPrice=Ve(i.gasPrice)),typeof i.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ve(i.maxFeePerBlobGas)),typeof i.maxFeePerGas<"u"&&(e.maxFeePerGas=Ve(i.maxFeePerGas)),typeof i.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ve(i.maxPriorityFeePerGas)),typeof i.nonce<"u"&&(e.nonce=Ve(i.nonce)),typeof i.to<"u"&&(e.to=i.to),typeof i.type<"u"&&(e.type=DD[i.type]),typeof i.value<"u"&&(e.value=Ve(i.value)),e}function ND(i){return i.map(e=>({address:e.address,r:e.r?Ve(BigInt(e.r)):e.r,s:e.s?Ve(BigInt(e.s)):e.s,chainId:Ve(e.chainId),nonce:Ve(e.nonce),...typeof e.yParity<"u"?{yParity:Ve(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ve(e.v)}:{}}))}var DD,sl=_(()=>{"use strict";vt();DD={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"}});function qL(i){if(!(!i||i.length===0))return i.reduce((e,{slot:t,value:r})=>{if(t.length!==66)throw new oh({size:t.length,targetSize:66,type:"hex"});if(r.length!==66)throw new oh({size:r.length,targetSize:66,type:"hex"});return e[t]=r,e},{})}function OD(i){let{balance:e,nonce:t,state:r,stateDiff:s,code:o}=i,l={};if(o!==void 0&&(l.code=o),e!==void 0&&(l.balance=Ve(e)),t!==void 0&&(l.nonce=Ve(t)),r!==void 0&&(l.state=qL(r)),s!==void 0){if(l.state)throw new Hg;l.stateDiff=qL(s)}return l}function kc(i){if(!i)return;let e={};for(let{address:t,...r}of i){if(!Bi(t,{strict:!1}))throw new Gi({address:t});if(e[t])throw new Ug({address:t});e[t]=OD(r)}return e}var _b=_(()=>{"use strict";Ns();hg();Kv();ms();vt()});var Mz,Rz,Bz,Dz,Nz,Oz,Fz,Pz,Uz,Hz,zz,jz,Gz,Wz,Vz,Kz,$z,qz,Yz,Qz,Xz,Jz,Zz,ej,tj,ij,rj,nj,sj,oj,aj,lj,cj,uj,pj,hj,dj,mj,fj,gj,bj,yj,_j,xj,vj,Ij,Sj,wj,kj,Ej,Lj,Tj,Cj,Aj,Mj,Rj,Bj,Dj,Nj,Oj,Fj,Pj,Uj,Hj,zj,jj,Gj,Wj,Vj,Kj,$j,qj,Yj,Qj,Xj,Jj,Zj,e9,t9,i9,r9,n9,s9,o9,a9,l9,c9,u9,p9,h9,d9,m9,f9,g9,b9,Ec,_I=_(()=>{"use strict";Mz=2n**(8n-1n)-1n,Rz=2n**(16n-1n)-1n,Bz=2n**(24n-1n)-1n,Dz=2n**(32n-1n)-1n,Nz=2n**(40n-1n)-1n,Oz=2n**(48n-1n)-1n,Fz=2n**(56n-1n)-1n,Pz=2n**(64n-1n)-1n,Uz=2n**(72n-1n)-1n,Hz=2n**(80n-1n)-1n,zz=2n**(88n-1n)-1n,jz=2n**(96n-1n)-1n,Gz=2n**(104n-1n)-1n,Wz=2n**(112n-1n)-1n,Vz=2n**(120n-1n)-1n,Kz=2n**(128n-1n)-1n,$z=2n**(136n-1n)-1n,qz=2n**(144n-1n)-1n,Yz=2n**(152n-1n)-1n,Qz=2n**(160n-1n)-1n,Xz=2n**(168n-1n)-1n,Jz=2n**(176n-1n)-1n,Zz=2n**(184n-1n)-1n,ej=2n**(192n-1n)-1n,tj=2n**(200n-1n)-1n,ij=2n**(208n-1n)-1n,rj=2n**(216n-1n)-1n,nj=2n**(224n-1n)-1n,sj=2n**(232n-1n)-1n,oj=2n**(240n-1n)-1n,aj=2n**(248n-1n)-1n,lj=2n**(256n-1n)-1n,cj=-(2n**(8n-1n)),uj=-(2n**(16n-1n)),pj=-(2n**(24n-1n)),hj=-(2n**(32n-1n)),dj=-(2n**(40n-1n)),mj=-(2n**(48n-1n)),fj=-(2n**(56n-1n)),gj=-(2n**(64n-1n)),bj=-(2n**(72n-1n)),yj=-(2n**(80n-1n)),_j=-(2n**(88n-1n)),xj=-(2n**(96n-1n)),vj=-(2n**(104n-1n)),Ij=-(2n**(112n-1n)),Sj=-(2n**(120n-1n)),wj=-(2n**(128n-1n)),kj=-(2n**(136n-1n)),Ej=-(2n**(144n-1n)),Lj=-(2n**(152n-1n)),Tj=-(2n**(160n-1n)),Cj=-(2n**(168n-1n)),Aj=-(2n**(176n-1n)),Mj=-(2n**(184n-1n)),Rj=-(2n**(192n-1n)),Bj=-(2n**(200n-1n)),Dj=-(2n**(208n-1n)),Nj=-(2n**(216n-1n)),Oj=-(2n**(224n-1n)),Fj=-(2n**(232n-1n)),Pj=-(2n**(240n-1n)),Uj=-(2n**(248n-1n)),Hj=-(2n**(256n-1n)),zj=2n**8n-1n,jj=2n**16n-1n,Gj=2n**24n-1n,Wj=2n**32n-1n,Vj=2n**40n-1n,Kj=2n**48n-1n,$j=2n**56n-1n,qj=2n**64n-1n,Yj=2n**72n-1n,Qj=2n**80n-1n,Xj=2n**88n-1n,Jj=2n**96n-1n,Zj=2n**104n-1n,e9=2n**112n-1n,t9=2n**120n-1n,i9=2n**128n-1n,r9=2n**136n-1n,n9=2n**144n-1n,s9=2n**152n-1n,o9=2n**160n-1n,a9=2n**168n-1n,l9=2n**176n-1n,c9=2n**184n-1n,u9=2n**192n-1n,p9=2n**200n-1n,h9=2n**208n-1n,d9=2n**216n-1n,m9=2n**224n-1n,f9=2n**232n-1n,g9=2n**240n-1n,b9=2n**248n-1n,Ec=2n**256n-1n});function vn(i){let{account:e,gasPrice:t,maxFeePerGas:r,maxPriorityFeePerGas:s,to:o}=i,l=e?ai(e):void 0;if(l&&!Bi(l.address))throw new Gi({address:l.address});if(o&&!Bi(o))throw new Gi({address:o});if(typeof t<"u"&&(typeof r<"u"||typeof s<"u"))throw new zg;if(r&&r>Ec)throw new Yn({maxFeePerGas:r});if(s&&r&&s>r)throw new Ws({maxFeePerGas:r,maxPriorityFeePerGas:s})}var pa=_(()=>{"use strict";Sr();_I();Ns();la();fs();ms()});var xb,ha,vb,Ib=_(()=>{"use strict";Jl();ni();xb=class extends X{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},ha=class extends X{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},vb=class extends X{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${wr(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}});var Lc,xI=_(()=>{"use strict";ni();Lc=class extends X{constructor({blockHash:e,blockNumber:t}){let r="Block";e&&(r=`Block at hash "${e}"`),t&&(r=`Block at number "${t}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}});function ol(i){let e={...i,blockHash:i.blockHash?i.blockHash:null,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,chainId:i.chainId?br(i.chainId):void 0,gas:i.gas?BigInt(i.gas):void 0,gasPrice:i.gasPrice?BigInt(i.gasPrice):void 0,maxFeePerBlobGas:i.maxFeePerBlobGas?BigInt(i.maxFeePerBlobGas):void 0,maxFeePerGas:i.maxFeePerGas?BigInt(i.maxFeePerGas):void 0,maxPriorityFeePerGas:i.maxPriorityFeePerGas?BigInt(i.maxPriorityFeePerGas):void 0,nonce:i.nonce?br(i.nonce):void 0,to:i.to?i.to:null,transactionIndex:i.transactionIndex?Number(i.transactionIndex):null,type:i.type?vI[i.type]:void 0,typeHex:i.type?i.type:void 0,value:i.value?BigInt(i.value):void 0,v:i.v?BigInt(i.v):void 0};return i.authorizationList&&(e.authorizationList=FD(i.authorizationList)),e.yParity=(()=>{if(i.yParity)return Number(i.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function FD(i){return i.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}var vI,YL,Lh=_(()=>{"use strict";Yr();yb();vI={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};YL=wc("transaction",ol)});function Th(i){let e=(i.transactions??[]).map(t=>typeof t=="string"?t:ol(t));return{...i,baseFeePerGas:i.baseFeePerGas?BigInt(i.baseFeePerGas):null,blobGasUsed:i.blobGasUsed?BigInt(i.blobGasUsed):void 0,difficulty:i.difficulty?BigInt(i.difficulty):void 0,excessBlobGas:i.excessBlobGas?BigInt(i.excessBlobGas):void 0,gasLimit:i.gasLimit?BigInt(i.gasLimit):void 0,gasUsed:i.gasUsed?BigInt(i.gasUsed):void 0,hash:i.hash?i.hash:null,logsBloom:i.logsBloom?i.logsBloom:null,nonce:i.nonce?i.nonce:null,number:i.number?BigInt(i.number):null,size:i.size?BigInt(i.size):void 0,timestamp:i.timestamp?BigInt(i.timestamp):void 0,transactions:e,totalDifficulty:i.totalDifficulty?BigInt(i.totalDifficulty):null}}var QL,Sb=_(()=>{"use strict";yb();Lh();QL=wc("block",Th)});async function Zr(i,{blockHash:e,blockNumber:t,blockTag:r,includeTransactions:s}={}){let o=r??"latest",l=s??!1,u=t!==void 0?Ve(t):void 0,p=null;if(e?p=await i.request({method:"eth_getBlockByHash",params:[e,l]},{dedupe:!0}):p=await i.request({method:"eth_getBlockByNumber",params:[u||o,l]},{dedupe:!!u}),!p)throw new Lc({blockHash:e,blockNumber:t});return(i.chain?.formatters?.block?.format||Th)(p)}var al=_(()=>{"use strict";xI();vt();Sb()});async function Tc(i){let e=await i.request({method:"eth_gasPrice"});return BigInt(e)}var wb=_(()=>{"use strict"});async function XL(i,e){return II(i,e)}async function II(i,e){let{block:t,chain:r=i.chain,request:s}=e||{};try{let o=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof o=="function"){let u=t||await Ge(i,Zr,"getBlock")({}),p=await o({block:u,client:i,request:s});if(p===null)throw new Error;return p}if(typeof o<"u")return o;let l=await i.request({method:"eth_maxPriorityFeePerGas"});return Ki(l)}catch{let[o,l]=await Promise.all([t?Promise.resolve(t):Ge(i,Zr,"getBlock")({}),Ge(i,Tc,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new ha;let u=l-o.baseFeePerGas;return u<0n?0n:u}}var SI=_(()=>{"use strict";Ib();Yr();Ui();al();wb()});async function JL(i,e){return kb(i,e)}async function kb(i,e){let{block:t,chain:r=i.chain,request:s,type:o="eip1559"}=e||{},l=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:t,client:i,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(l<1)throw new xb;let p=10**(l.toString().split(".")[1]?.length??0),h=b=>b*BigInt(Math.ceil(l*p))/BigInt(p),f=t||await Ge(i,Zr,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){let b=await r.fees.estimateFeesPerGas({block:t,client:i,multiply:h,request:s,type:o});if(b!==null)return b}if(o==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new ha;let b=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await II(i,{block:f,chain:r,request:s}),v=h(f.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??v+b,maxPriorityFeePerGas:b}}return{gasPrice:s?.gasPrice??h(await Ge(i,Tc,"getGasPrice")({}))}}var wI=_(()=>{"use strict";Ib();Ui();SI();al();wb()});async function Cc(i,{address:e,blockTag:t="latest",blockNumber:r}){let s=await i.request({method:"eth_getTransactionCount",params:[e,r?Ve(r):t]},{dedupe:!!r});return br(s)}var Eb=_(()=>{"use strict";Yr();vt()});function Ac(i){let{kzg:e}=i,t=i.to??(typeof i.blobs[0]=="string"?"hex":"bytes"),r=typeof i.blobs[0]=="string"?i.blobs.map(o=>Ir(o)):i.blobs,s=[];for(let o of r)s.push(Uint8Array.from(e.blobToKzgCommitment(o)));return t==="bytes"?s:s.map(o=>di(o))}var Lb=_(()=>{"use strict";Br();vt()});function Mc(i){let{kzg:e}=i,t=i.to??(typeof i.blobs[0]=="string"?"hex":"bytes"),r=typeof i.blobs[0]=="string"?i.blobs.map(l=>Ir(l)):i.blobs,s=typeof i.commitments[0]=="string"?i.commitments.map(l=>Ir(l)):i.commitments,o=[];for(let l=0;l<r.length;l++){let u=r[l],p=s[l];o.push(Uint8Array.from(e.computeBlobKzgProof(u,p)))}return t==="bytes"?o:o.map(l=>di(l))}var Tb=_(()=>{"use strict";Br();vt()});function ZL(i,e){let t=e||"hex",r=Ja(hr(i,{strict:!1})?Wn(i):i);return t==="bytes"?r:tt(r)}var eT=_(()=>{"use strict";qv();as();Br();vt()});function tT(i){let{commitment:e,version:t=1}=i,r=i.to??(typeof e=="string"?"hex":"bytes"),s=ZL(e,"bytes");return s.set([t],0),r==="bytes"?s:di(s)}var iT=_(()=>{"use strict";vt();eT()});function Cb(i){let{commitments:e,version:t}=i,r=i.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(let o of e)s.push(tT({commitment:o,to:r,version:t}));return s}var kI=_(()=>{"use strict";iT()});var Ab,Rc,Mb,Rb,EI=_(()=>{"use strict";ni();Ab=class extends X{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}},Rc=class extends X{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},Mb=class extends X{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}},Rb=class extends X{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}}});function rT(i){let e=i.to??(typeof i.data=="string"?"hex":"bytes"),t=typeof i.data=="string"?Ir(i.data):i.data,r=_i(t);if(!r)throw new Rc;if(r>761855)throw new Ab({maxSize:761855,size:r});let s=[],o=!0,l=0;for(;o;){let u=Yl(new Uint8Array(131072)),p=0;for(;p<4096;){let h=t.slice(l,l+(32-1));if(u.pushByte(0),u.pushBytes(h),h.length<31){u.pushByte(128),o=!1;break}p++,l+=31}s.push(u)}return e==="bytes"?s.map(u=>u.bytes):s.map(u=>di(u.bytes))}var nT=_(()=>{"use strict";EI();Dg();ls();Br();vt()});function Bb(i){let{data:e,kzg:t,to:r}=i,s=i.blobs??rT({data:e,to:r}),o=i.commitments??Ac({blobs:s,kzg:t,to:r}),l=i.proofs??Mc({blobs:s,commitments:o,kzg:t,to:r}),u=[];for(let p=0;p<s.length;p++)u.push({blob:s[p],commitment:o[p],proof:l[p]});return u}var LI=_(()=>{"use strict";Lb();Tb();nT()});function Db(i){if(i.type)return i.type;if(typeof i.authorizationList<"u")return"eip7702";if(typeof i.blobs<"u"||typeof i.blobVersionedHashes<"u"||typeof i.maxFeePerBlobGas<"u"||typeof i.sidecars<"u")return"eip4844";if(typeof i.maxFeePerGas<"u"||typeof i.maxPriorityFeePerGas<"u")return"eip1559";if(typeof i.gasPrice<"u")return typeof i.accessList<"u"?"eip2930":"legacy";throw new Gg({transaction:i})}var TI=_(()=>{"use strict";fs()});async function Jn(i){let e=await i.request({method:"eth_chainId"},{dedupe:!0});return br(e)}var ll=_(()=>{"use strict";Yr()});async function da(i,e){let{account:t=i.account,blobs:r,chain:s,gas:o,kzg:l,nonce:u,nonceManager:p,parameters:h=CI,type:f}=e,g=t&&ai(t),b={...e,...g?{from:g?.address}:{}},v;async function w(){return v||(v=await Ge(i,Zr,"getBlock")({blockTag:"latest"}),v)}let k;async function E(){return k||(s?s.id:typeof e.chainId<"u"?e.chainId:(k=await Ge(i,Jn,"getChainId")({}),k))}if(h.includes("nonce")&&typeof u>"u"&&g)if(p){let F=await E();b.nonce=await p.consume({address:g.address,chainId:F,client:i})}else b.nonce=await Ge(i,Cc,"getTransactionCount")({address:g.address,blockTag:"pending"});if((h.includes("blobVersionedHashes")||h.includes("sidecars"))&&r&&l){let F=Ac({blobs:r,kzg:l});if(h.includes("blobVersionedHashes")){let O=Cb({commitments:F,to:"hex"});b.blobVersionedHashes=O}if(h.includes("sidecars")){let O=Mc({blobs:r,commitments:F,kzg:l}),H=Bb({blobs:r,commitments:F,proofs:O,to:"hex"});b.sidecars=H}}if(h.includes("chainId")&&(b.chainId=await E()),(h.includes("fees")||h.includes("type"))&&typeof f>"u")try{b.type=Db(b)}catch{let F=sT.get(i.uid);typeof F>"u"&&(F=typeof(await w())?.baseFeePerGas=="bigint",sT.set(i.uid,F)),b.type=F?"eip1559":"legacy"}if(h.includes("fees"))if(b.type!=="legacy"&&b.type!=="eip2930"){if(typeof b.maxFeePerGas>"u"||typeof b.maxPriorityFeePerGas>"u"){let F=await w(),{maxFeePerGas:O,maxPriorityFeePerGas:H}=await kb(i,{block:F,chain:s,request:b});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<H)throw new vb({maxPriorityFeePerGas:H});b.maxPriorityFeePerGas=H,b.maxFeePerGas=O}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new ha;if(typeof e.gasPrice>"u"){let F=await w(),{gasPrice:O}=await kb(i,{block:F,chain:s,request:b,type:"legacy"});b.gasPrice=O}}return h.includes("gas")&&typeof o>"u"&&(b.gas=await Ge(i,Bc,"estimateGas")({...b,account:g&&{address:g.address,type:"json-rpc"}})),vn(b),delete b.parameters,b}var CI,sT,Ch=_(()=>{"use strict";Sr();wI();Nb();al();Eb();Ib();Lb();Tb();kI();LI();Ui();pa();TI();ll();CI=["blobVersionedHashes","chainId","fees","gas","nonce","type"],sT=new Map});async function Ob(i,{address:e,blockNumber:t,blockTag:r="latest"}){let s=t?Ve(t):void 0,o=await i.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(o)}var AI=_(()=>{"use strict";vt()});async function Bc(i,e){let{account:t=i.account}=e,r=t?ai(t):void 0;try{let Qe=function(Me){let{block:_e,request:Le,rpcStateOverride:P}=Me;return i.request({method:"eth_estimateGas",params:P?[Le,_e??"latest",P]:_e?[Le,_e]:[Le]})};var s=Qe;let{accessList:o,authorizationList:l,blobs:u,blobVersionedHashes:p,blockNumber:h,blockTag:f,data:g,gas:b,gasPrice:v,maxFeePerBlobGas:w,maxFeePerGas:k,maxPriorityFeePerGas:E,nonce:F,value:O,stateOverride:H,...Y}=await da(i,{...e,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),W=(h?Ve(h):void 0)||f,le=kc(H),oe=await(async()=>{if(Y.to)return Y.to;if(l&&l.length>0)return await gb({authorization:l[0]}).catch(()=>{throw new X("`to` is required. Could not infer from `authorizationList`")})})();vn(e);let de=i.chain?.formatters?.transactionRequest?.format,He=(de||Xn)({...ua(Y,{format:de}),from:r?.address,accessList:o,authorizationList:l,blobs:u,blobVersionedHashes:p,data:g,gas:b,gasPrice:v,maxFeePerBlobGas:w,maxFeePerGas:k,maxPriorityFeePerGas:E,nonce:F,to:oe,value:O}),Xt=BigInt(await Qe({block:W,request:He,rpcStateOverride:le}));if(l){let Me=await Ob(i,{address:He.from}),_e=await Promise.all(l.map(async Le=>{let{address:P}=Le,nt=await Qe({block:W,request:{authorizationList:void 0,data:g,from:r?.address,to:P,value:Ve(Me)},rpcStateOverride:le}).catch(()=>100000n);return 2n*BigInt(nt)}));Xt+=_e.reduce((Le,P)=>Le+P,0n)}return Xt}catch(o){throw KL(o,{...e,account:r,chain:i.chain})}}var Nb=_(()=>{"use strict";Sr();ni();yI();vt();$L();Eh();sl();_b();pa();Ch();AI()});async function oT(i,e){let{abi:t,address:r,args:s,functionName:o,dataSuffix:l,...u}=e,p=$i({abi:t,args:s,functionName:o});try{return await Ge(i,Bc,"estimateGas")({data:`${p}${l?l.replace("0x",""):""}`,to:r,...u})}catch(h){let f=u.account?ai(u.account):void 0;throw Mn(h,{abi:t,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:f?.address})}}var aT=_(()=>{"use strict";Sr();Kn();Xa();Ui();Nb()});function Vs(i,e){if(!Bi(i,{strict:!1}))throw new Gi({address:i});if(!Bi(e,{strict:!1}))throw new Gi({address:e});return i.toLowerCase()===e.toLowerCase()}var Dc=_(()=>{"use strict";Ns();ms()});function Nc(i){let{abi:e,data:t,strict:r,topics:s}=i,o=r??!0,[l,...u]=s;if(!l)throw new ng({docsPath:lT});let p=(()=>e.length===1?e[0]:e.find(k=>k.type==="event"&&l===$o(un(k))))();if(!(p&&"name"in p)||p.type!=="event")throw new jl(l,{docsPath:lT});let{name:h,inputs:f}=p,g=f?.some(k=>!("name"in k&&k.name)),b=g?[]:{},v=f.filter(k=>"indexed"in k&&k.indexed);for(let k=0;k<v.length;k++){let E=v[k],F=u[k];if(!F)throw new Ds({abiItem:p,param:E});b[g?k:E.name||k]=HD({param:E,value:F})}let w=f.filter(k=>!("indexed"in k&&k.indexed));if(w.length>0){if(t&&t!=="0x")try{let k=Wa(w,t);if(k)if(g)b=[...b,...k];else for(let E=0;E<w.length;E++)b[w[E].name]=k[E]}catch(k){if(o)throw k instanceof Hl||k instanceof ql?new cs({abiItem:p,data:t,params:w,size:_i(t)}):k}else if(o)throw new cs({abiItem:p,data:"0x",params:w,size:0})}return{eventName:h,args:Object.values(b).length>0?b:void 0}}function HD({param:i,value:e}){return i.type==="string"||i.type==="bytes"||i.type==="tuple"||i.type.match(/^(.*)\[(\d+)?\]$/)?e:(Wa([i],e)||[])[0]}var lT,Fb=_(()=>{"use strict";vr();ls();ph();zv();Ng();Ua();lT="/docs/contract/decodeEventLog"});function Oc(i){let{abi:e,args:t,logs:r,strict:s=!0}=i,o=(()=>{if(i.eventName)return Array.isArray(i.eventName)?i.eventName:[i.eventName]})();return r.map(l=>{try{let u=e.find(h=>h.type==="event"&&l.topics[0]===$o(h));if(!u)return null;let p=Nc({...l,abi:[u],strict:s});return o&&!o.includes(p.eventName)||!zD({args:p.args,inputs:u.inputs,matchArgs:t})?null:{...p,...l}}catch(u){let p,h;if(u instanceof jl)return null;if(u instanceof cs||u instanceof Ds){if(s)return null;p=u.abiItem.name,h=u.abiItem.inputs?.some(f=>!("name"in f&&f.name))}return{...l,args:h?[]:{},eventName:p}}}).filter(Boolean)}function zD(i){let{args:e,inputs:t,matchArgs:r}=i;if(!r)return!0;if(!e)return!1;function s(o,l,u){try{return o.type==="address"?Vs(l,u):o.type==="string"||o.type==="bytes"?Hi(Wn(l))===u:l===u}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((o,l)=>{if(o==null)return!0;let u=t[l];return u?(Array.isArray(o)?o:[o]).some(h=>s(u,h,e[l])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,l])=>{if(l==null)return!0;let u=t.find(h=>h.name===o);return u?(Array.isArray(l)?l:[l]).some(h=>s(u,h,e[o])):!1}):!1}var Pb=_(()=>{"use strict";vr();Dc();Br();ds();ph();Fb()});function en(i,{args:e,eventName:t}={}){return{...i,blockHash:i.blockHash?i.blockHash:null,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,logIndex:i.logIndex?Number(i.logIndex):null,transactionHash:i.transactionHash?i.transactionHash:null,transactionIndex:i.transactionIndex?Number(i.transactionIndex):null,...t?{args:e,eventName:t}:{}}}var ma=_(()=>{"use strict"});async function Fc(i,{address:e,blockHash:t,fromBlock:r,toBlock:s,event:o,events:l,args:u,strict:p}={}){let h=p??!1,f=l??(o?[o]:void 0),g=[];f&&(g=[f.flatMap(k=>Ps({abi:[k],eventName:k.name,args:l?void 0:u}))],o&&(g=g[0]));let b;t?b=await i.request({method:"eth_getLogs",params:[{address:e,topics:g,blockHash:t}]}):b=await i.request({method:"eth_getLogs",params:[{address:e,topics:g,fromBlock:typeof r=="bigint"?Ve(r):r,toBlock:typeof s=="bigint"?Ve(s):s}]});let v=b.map(w=>en(w));return f?Oc({abi:f,args:u,logs:v,strict:h}):v}var Ub=_(()=>{"use strict";$l();Pb();vt();ma()});async function Hb(i,e){let{abi:t,address:r,args:s,blockHash:o,eventName:l,fromBlock:u,toBlock:p,strict:h}=e,f=l?Fs({abi:t,name:l}):void 0,g=f?void 0:t.filter(b=>b.type==="event");return Ge(i,Fc,"getLogs")({address:r,args:s,blockHash:o,event:f,events:g,fromBlock:u,toBlock:p,strict:h})}var MI=_(()=>{"use strict";Kl();Ui();Ub()});function In(i){let{abi:e,args:t,functionName:r,data:s}=i,o=e[0];if(r){let u=Fs({abi:e,args:t,name:r});if(!u)throw new zo(r,{docsPath:RI});o=u}if(o.type!=="function")throw new zo(void 0,{docsPath:RI});if(!o.outputs)throw new sg(o.name,{docsPath:RI});let l=Wa(o.outputs,s);if(l&&l.length>1)return l;if(l&&l.length===1)return l[0]}var RI,fa=_(()=>{"use strict";vr();Ng();Kl();RI="/docs/contract/decodeFunctionResult"});var Ah,cT,zb,uT,BI,DI,NI,cl=_(()=>{"use strict";Ah=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],cT=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],zb=[...cT,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],uT=[...cT,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],BI=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],DI=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],NI=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}]});var pT,hT=_(()=>{"use strict";pT="0x82ad56cb"});var jb,dT,mT,Gb=_(()=>{"use strict";jb="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",dT="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",mT="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"});var ul,Wb,Vb,Mh,pl,Rh=_(()=>{"use strict";ni();ul=class extends X{constructor({blockNumber:e,chain:t,contract:r}){super(`Chain "${t.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}},Wb=class extends X{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}},Vb=class extends X{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}},Mh=class extends X{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}},pl=class extends X{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}});function hl(i){let{abi:e,args:t,bytecode:r}=i;if(!t||t.length===0)return r;let s=e.find(l=>"type"in l&&l.type==="constructor");if(!s)throw new eg({docsPath:OI});if(!("inputs"in s))throw new ih({docsPath:OI});if(!s.inputs||s.inputs.length===0)throw new ih({docsPath:OI});let o=An(s.inputs,t);return Qr([r,o])}var OI,Kb=_(()=>{"use strict";vr();Vn();qo();OI="/docs/contract/encodeDeployData"});function Zn({blockNumber:i,chain:e,contract:t}){let r=e?.contracts?.[t];if(!r)throw new ul({chain:e,contract:{name:t}});if(i&&r.blockCreated&&r.blockCreated>i)throw new ul({blockNumber:i,chain:e,contract:{name:t,blockCreated:r.blockCreated}});return r.address}var dl=_(()=>{"use strict";Rh()});function $b(i,{docsPath:e,...t}){let r=(()=>{let s=ca(i,t);return s instanceof Qn?i:s})();return new tc(r,{docsPath:e,...t})}var FI=_(()=>{"use strict";Xo();la();kh()});function qb(){let i=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{i=r,e=s}),resolve:i,reject:e}}var PI=_(()=>{"use strict"});function Yb({fn:i,id:e,shouldSplitBatch:t,wait:r=0,sort:s}){let o=async()=>{let f=p();l();let g=f.map(({args:b})=>b);g.length!==0&&i(g).then(b=>{s&&Array.isArray(b)&&b.sort(s);for(let v=0;v<f.length;v++){let{resolve:w}=f[v];w?.([b[v],b])}}).catch(b=>{for(let v=0;v<f.length;v++){let{reject:w}=f[v];w?.(b)}})},l=()=>UI.delete(e),u=()=>p().map(({args:f})=>f),p=()=>UI.get(e)||[],h=f=>UI.set(e,[...p(),f]);return{flush:l,async schedule(f){let{promise:g,resolve:b,reject:v}=qb();return t?.([...u(),f])&&o(),p().length>0?(h({args:f,resolve:b,reject:v}),g):(h({args:f,resolve:b,reject:v}),setTimeout(o,r),g)}}}var UI,HI=_(()=>{"use strict";PI();UI=new Map});var Qb,Xb,Jb,fT=_(()=>{"use strict";hn();ni();$g();Qb=class extends X{constructor({callbackSelector:e,cause:t,data:r,extraData:s,sender:o,urls:l}){super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],t.metaMessages?.length?"":[],"Offchain Gateway Call:",l&&["  Gateway URL(s):",...l.map(u=>`    ${Ka(u)}`)],`  Sender: ${o}`,`  Data: ${r}`,`  Callback selector: ${e}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}},Xb=class extends X{constructor({result:e,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Ka(t)}`,`Response: ${mi(e)}`],name:"OffchainLookupResponseMalformedError"})}},Jb=class extends X{constructor({sender:e,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}});var yT={};cf(yT,{ccipRequest:()=>bT,offchainLookup:()=>GD,offchainLookupAbiItem:()=>gT,offchainLookupSignature:()=>jD});async function GD(i,{blockNumber:e,blockTag:t,data:r,to:s}){let{args:o}=Og({data:r,abi:[gT]}),[l,u,p,h,f]=o,{ccipRead:g}=i,b=g&&typeof g?.request=="function"?g.request:bT;try{if(!Vs(s,l))throw new Jb({sender:l,to:s});let v=await b({data:p,sender:l,urls:u}),{data:w}=await Ks(i,{blockNumber:e,blockTag:t,data:pn([h,An([{type:"bytes"},{type:"bytes"}],[v,f])]),to:s});return w}catch(v){throw new Qb({callbackSelector:h,cause:v,data:r,extraData:f,sender:l,urls:u})}}async function bT({data:i,sender:e,urls:t}){let r=new Error("An unknown error occurred.");for(let s=0;s<t.length;s++){let o=t[s],l=o.includes("{data}")?"GET":"POST",u=l==="POST"?{data:i,sender:e}:void 0,p=l==="POST"?{"Content-Type":"application/json"}:{};try{let h=await fetch(o.replace("{sender}",e.toLowerCase()).replace("{data}",i),{body:JSON.stringify(u),headers:p,method:l}),f;if(h.headers.get("Content-Type")?.startsWith("application/json")?f=(await h.json()).data:f=await h.text(),!h.ok){r=new $n({body:u,details:f?.error?mi(f.error):h.statusText,headers:h.headers,status:h.status,url:o});continue}if(!hr(f)){r=new Xb({result:f,url:o});continue}return f}catch(h){r=new $n({body:u,details:h.message,url:o})}}throw r}var jD,gT,_T=_(()=>{"use strict";Pc();fT();qa();Gv();qo();Dc();Vn();as();hn();jD="0x556f1830",gT={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]}});async function Ks(i,e){let{account:t=i.account,batch:r=!!i.batch?.multicall,blockNumber:s,blockTag:o="latest",accessList:l,blobs:u,code:p,data:h,factory:f,factoryData:g,gas:b,gasPrice:v,maxFeePerBlobGas:w,maxFeePerGas:k,maxPriorityFeePerGas:E,nonce:F,to:O,value:H,stateOverride:Y,...Z}=e,W=t?ai(t):void 0;if(p&&(f||g))throw new X("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(p&&O)throw new X("Cannot provide both `code` & `to` as parameters.");let le=p&&h,oe=f&&g&&O&&h,de=le||oe,Ne=(()=>le?KD({code:p,data:h}):oe?$D({data:h,factory:f,factoryData:g,to:O}):h)();try{vn(e);let Qe=(s?Ve(s):void 0)||o,Xt=kc(Y),Me=i.chain?.formatters?.transactionRequest?.format,Le=(Me||Xn)({...ua(Z,{format:Me}),from:W?.address,accessList:l,blobs:u,data:Ne,gas:b,gasPrice:v,maxFeePerBlobGas:w,maxFeePerGas:k,maxPriorityFeePerGas:E,nonce:F,to:de?void 0:O,value:H});if(r&&WD({request:Le})&&!Xt)try{return await VD(i,{...Le,blockNumber:s,blockTag:o})}catch(nt){if(!(nt instanceof Mh)&&!(nt instanceof ul))throw nt}let P=await i.request({method:"eth_call",params:Xt?[Le,Qe,Xt]:[Le,Qe]});return P==="0x"?{data:void 0}:{data:P}}catch(He){let Qe=qD(He),{offchainLookup:Xt,offchainLookupSignature:Me}=await Promise.resolve().then(()=>(_T(),yT));if(i.ccipRead!==!1&&Qe?.slice(0,10)===Me&&O)return{data:await Xt(i,{data:Qe,to:O})};throw de&&Qe?.slice(0,10)==="0x101bb98d"?new Qg({factory:f}):$b(He,{...e,account:W,chain:i.chain})}}function WD({request:i}){let{data:e,to:t,...r}=i;return!(!e||e.startsWith(pT)||!t||Object.values(r).filter(s=>typeof s<"u").length>0)}async function VD(i,e){let{batchSize:t=1024,wait:r=0}=typeof i.batch?.multicall=="object"?i.batch.multicall:{},{blockNumber:s,blockTag:o="latest",data:l,multicallAddress:u,to:p}=e,h=u;if(!h){if(!i.chain)throw new Mh;h=Zn({blockNumber:s,chain:i.chain,contract:"multicall3"})}let g=(s?Ve(s):void 0)||o,{schedule:b}=Yb({id:`${i.uid}.${g}`,wait:r,shouldSplitBatch(k){return k.reduce((F,{data:O})=>F+(O.length-2),0)>t*2},fn:async k=>{let E=k.map(H=>({allowFailure:!0,callData:H.data,target:H.to})),F=$i({abi:Ah,args:[E],functionName:"aggregate3"}),O=await i.request({method:"eth_call",params:[{data:F,to:h},g]});return In({abi:Ah,args:[E],functionName:"aggregate3",data:O||"0x"})}}),[{returnData:v,success:w}]=await b({data:l,to:p});if(!w)throw new Hs({data:v});return v==="0x"?{data:void 0}:{data:v}}function KD(i){let{code:e,data:t}=i;return hl({abi:Qf(["constructor(bytes, bytes)"]),bytecode:jb,args:[e,t]})}function $D(i){let{data:e,factory:t,factoryData:r,to:s}=i;return hl({abi:Qf(["constructor(address, bytes, address, bytes)"]),bytecode:dT,args:[s,e,t,r]})}function qD(i){if(!(i instanceof X))return;let e=i.walk();return typeof e?.data=="object"?e.data?.data:e.data}var Pc=_(()=>{"use strict";Jf();Sr();cl();hT();Gb();ni();Rh();Xo();fa();Kb();Kn();dl();vt();FI();Eh();sl();HI();_b();pa()});async function Ur(i,e){let{abi:t,address:r,args:s,functionName:o,...l}=e,u=$i({abi:t,args:s,functionName:o});try{let{data:p}=await Ge(i,Ks,"call")({...l,data:u,to:r});return In({abi:t,args:s,functionName:o,data:p||"0x"})}catch(p){throw Mn(p,{abi:t,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}var Io=_(()=>{"use strict";fa();Kn();Xa();Ui();Pc()});async function xT(i,e){let{abi:t,address:r,args:s,dataSuffix:o,functionName:l,...u}=e,p=u.account?ai(u.account):i.account,h=$i({abi:t,args:s,functionName:l});try{let{data:f}=await Ge(i,Ks,"call")({batch:!1,data:`${h}${o?o.replace("0x",""):""}`,to:r,...u,account:p}),g=In({abi:t,args:s,functionName:l,data:f||"0x"}),b=t.filter(v=>"name"in v&&v.name===e.functionName);return{result:g,request:{abi:b,address:r,args:s,dataSuffix:o,functionName:l,...u,account:p}}}catch(f){throw Mn(f,{abi:t,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:l,sender:p?.address})}}var vT=_(()=>{"use strict";Sr();fa();Kn();Xa();Ui();Pc()});function Sn(i,e,t){let r=++YD,s=()=>zI.get(i)||[],o=()=>{let f=s();zI.set(i,f.filter(g=>g.id!==r))},l=()=>{let f=s();if(!f.some(b=>b.id===r))return;let g=IT.get(i);f.length===1&&g&&g(),o()},u=s();if(zI.set(i,[...u,{id:r,fns:e}]),u&&u.length>0)return l;let p={};for(let f in e)p[f]=(...g)=>{let b=s();if(b.length!==0)for(let v of b)v.fns[f]?.(...g)};let h=t(p);return typeof h=="function"&&IT.set(i,h),l}var zI,IT,YD,ml=_(()=>{"use strict";zI=new Map,IT=new Map,YD=0});async function Bh(i){return new Promise(e=>setTimeout(e,i))}var jI=_(()=>{"use strict"});function $s(i,{emitOnBegin:e,initialWaitTime:t,interval:r}){let s=!0,o=()=>s=!1;return(async()=>{let u;e&&(u=await i({unpoll:o}));let p=await t?.(u)??r;await Bh(p);let h=async()=>{s&&(await i({unpoll:o}),await Bh(r),h())};h()})(),o}var Uc=_(()=>{"use strict";jI()});function ST(i){let e=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:l=>o.set(s,l)}),t=e(i,QD),r=e(i,XD);return{clear:()=>{t.clear(),r.clear()},promise:t,response:r}}async function wT(i,{cacheKey:e,cacheTime:t=Number.POSITIVE_INFINITY}){let r=ST(e),s=r.response.get();if(s&&t>0&&new Date().getTime()-s.created.getTime()<t)return s.data;let o=r.promise.get();o||(o=i(),r.promise.set(o));try{let l=await o;return r.response.set({created:new Date,data:l}),l}finally{r.promise.clear()}}var QD,XD,kT=_(()=>{"use strict";QD=new Map,XD=new Map});async function qs(i,{cacheTime:e=i.cacheTime}={}){let t=await wT(()=>i.request({method:"eth_blockNumber"}),{cacheKey:JD(i.uid),cacheTime:e});return BigInt(t)}var JD,Hc=_(()=>{"use strict";kT();JD=i=>`blockNumber.${i}`});async function ga(i,{filter:e}){let t="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;let s=r.map(o=>en(o));return!("abi"in e)||!e.abi?s:Oc({abi:e.abi,logs:s,strict:t})}var Dh=_(()=>{"use strict";Pb();ma()});async function ba(i,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}var Nh=_(()=>{"use strict"});function ET(i,e){let{abi:t,address:r,args:s,batch:o=!0,eventName:l,fromBlock:u,onError:p,onLogs:h,poll:f,pollingInterval:g=i.pollingInterval,strict:b}=e;return(()=>typeof f<"u"?f:typeof u=="bigint"?!0:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))()?(()=>{let E=b??!1,F=mi(["watchContractEvent",r,s,o,i.uid,l,g,E,u]);return Sn(F,{onLogs:h,onError:p},O=>{let H;u!==void 0&&(H=u-1n);let Y,Z=!1,W=$s(async()=>{if(!Z){try{Y=await Ge(i,Ag,"createContractEventFilter")({abi:t,address:r,args:s,eventName:l,strict:E,fromBlock:u})}catch{}Z=!0;return}try{let le;if(Y)le=await Ge(i,ga,"getFilterChanges")({filter:Y});else{let oe=await Ge(i,qs,"getBlockNumber")({});H&&H<oe?le=await Ge(i,Hb,"getContractEvents")({abi:t,address:r,args:s,eventName:l,fromBlock:H+1n,toBlock:oe,strict:E}):le=[],H=oe}if(le.length===0)return;if(o)O.onLogs(le);else for(let oe of le)O.onLogs([oe])}catch(le){Y&&le instanceof zs&&(Z=!1),O.onError?.(le)}},{emitOnBegin:!0,interval:g});return async()=>{Y&&await Ge(i,ba,"uninstallFilter")({filter:Y}),W()}})})():(()=>{let E=b??!1,F=mi(["watchContractEvent",r,s,o,i.uid,l,g,E]),O=!0,H=()=>O=!1;return Sn(F,{onLogs:h,onError:p},Y=>((async()=>{try{let Z=(()=>{if(i.transport.type==="fallback"){let oe=i.transport.transports.find(de=>de.config.type==="webSocket");return oe?oe.value:i.transport}return i.transport})(),W=l?Ps({abi:t,eventName:l,args:s}):[],{unsubscribe:le}=await Z.subscribe({params:["logs",{address:r,topics:W}],onData(oe){if(!O)return;let de=oe.result;try{let{eventName:Ne,args:He}=Nc({abi:t,data:de.data,topics:de.topics,strict:b}),Qe=en(de,{args:He,eventName:Ne});Y.onLogs([Qe])}catch(Ne){let He,Qe;if(Ne instanceof cs||Ne instanceof Ds){if(b)return;He=Ne.abiItem.name,Qe=Ne.abiItem.inputs?.some(Me=>!("name"in Me&&Me.name))}let Xt=en(de,{args:Qe?[]:{},eventName:He});Y.onLogs([Xt])}},onError(oe){Y.onError?.(oe)}});H=le,O||H()}catch(Z){p?.(Z)}})(),()=>H()))})()}var LT=_(()=>{"use strict";vr();bh();Fb();$l();ma();Ui();ml();Uc();hn();Hv();Hc();MI();Dh();Nh()});var tn,ya,_a=_(()=>{"use strict";ni();tn=class extends X{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}},ya=class extends X{constructor({docsPath:e,metaMessages:t,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}});function Zb({chain:i,currentChainId:e}){if(!i)throw new Vb;if(e!==i.id)throw new Wb({chain:i,currentChainId:e})}var GI=_(()=>{"use strict";Rh()});function TT(i,{docsPath:e,...t}){let r=(()=>{let s=ca(i,t);return s instanceof Qn?i:s})();return new Vg(r,{docsPath:e,...t})}var CT=_(()=>{"use strict";la();fs();kh()});async function zc(i,{serializedTransaction:e}){return i.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}var ey=_(()=>{"use strict"});async function jc(i,e){let{account:t=i.account,chain:r=i.chain,accessList:s,authorizationList:o,blobs:l,data:u,gas:p,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:g,maxPriorityFeePerGas:b,nonce:v,value:w,...k}=e;if(typeof t>"u")throw new tn({docsPath:"/docs/actions/wallet/sendTransaction"});let E=t?ai(t):null;try{vn(e);let F=await(async()=>{if(e.to)return e.to;if(e.to!==null&&o&&o.length>0)return await gb({authorization:o[0]}).catch(()=>{throw new X("`to` is required. Could not infer from `authorizationList`.")})})();if(E?.type==="json-rpc"||E===null){let O;r!==null&&(O=await Ge(i,Jn,"getChainId")({}),Zb({currentChainId:O,chain:r}));let H=i.chain?.formatters?.transactionRequest?.format,Z=(H||Xn)({...ua(k,{format:H}),accessList:s,authorizationList:o,blobs:l,chainId:O,data:u,from:E?.address,gas:p,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:g,maxPriorityFeePerGas:b,nonce:v,to:F,value:w}),W=WI.get(i.uid),le=W?"wallet_sendTransaction":"eth_sendTransaction";try{return await i.request({method:le,params:[Z]},{retryCount:0})}catch(oe){if(W===!1)throw oe;let de=oe;if(de.name==="InvalidInputRpcError"||de.name==="InvalidParamsRpcError"||de.name==="MethodNotFoundRpcError"||de.name==="MethodNotSupportedRpcError")return await i.request({method:"wallet_sendTransaction",params:[Z]},{retryCount:0}).then(Ne=>(WI.set(i.uid,!0),Ne)).catch(Ne=>{let He=Ne;throw He.name==="MethodNotFoundRpcError"||He.name==="MethodNotSupportedRpcError"?(WI.set(i.uid,!1),de):He});throw de}}if(E?.type==="local"){let O=await Ge(i,da,"prepareTransactionRequest")({account:E,accessList:s,authorizationList:o,blobs:l,chain:r,data:u,gas:p,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:g,maxPriorityFeePerGas:b,nonce:v,nonceManager:E.nonceManager,parameters:[...CI,"sidecars"],value:w,...k,to:F}),H=r?.serializers?.transaction,Y=await E.signTransaction(O,{serializer:H});return await Ge(i,zc,"sendRawTransaction")({serializedTransaction:Y})}throw E?.type==="smart"?new ya({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ya({docsPath:"/docs/actions/wallet/sendTransaction",type:E?.type})}catch(F){throw F instanceof ya?F:TT(F,{...e,account:E,chain:e.chain||void 0})}}var WI,ty=_(()=>{"use strict";Sr();_a();ni();yI();GI();CT();Eh();sl();Ui();hh();pa();ll();Ch();ey();WI=new Os(128)});async function AT(i,e){let{abi:t,account:r=i.account,address:s,args:o,dataSuffix:l,functionName:u,...p}=e;if(typeof r>"u")throw new tn({docsPath:"/docs/contract/writeContract"});let h=r?ai(r):null,f=$i({abi:t,args:o,functionName:u});try{return await Ge(i,jc,"sendTransaction")({data:`${f}${l?l.replace("0x",""):""}`,to:s,account:h,...p})}catch(g){throw Mn(g,{abi:t,address:s,args:o,docsPath:"/docs/contract/writeContract",functionName:u,sender:h?.address})}}var MT=_(()=>{"use strict";Sr();_a();Kn();Xa();Ui();ty()});var iy,RT=_(()=>{"use strict";ni();iy=class extends X{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}});async function BT(i,e){let{address:t,factory:r,factoryData:s}=e;try{let[o,l,u,p,h,f,g]=await Ge(i,Ur,"readContract")({abi:ZD,address:t,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:l,version:u,chainId:Number(p),verifyingContract:h,salt:f},extensions:g,fields:o}}catch(o){let l=o;throw l.name==="ContractFunctionExecutionError"&&l.cause.name==="ContractFunctionZeroDataError"?new iy({address:t}):l}}var ZD,DT=_(()=>{"use strict";RT();Ui();Io();ZD=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}]});async function NT(i,{chain:e}){let{id:t,name:r,nativeCurrency:s,rpcUrls:o,blockExplorers:l}=e;await i.request({method:"wallet_addEthereumChain",params:[{chainId:Ve(t),chainName:r,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:l?Object.values(l).map(({url:u})=>u):void 0}]},{dedupe:!0,retryCount:0})}var OT=_(()=>{"use strict";vt()});function sy(i=11){if(!ny||ry+i>256*2){ny="",ry=0;for(let e=0;e<256;e++)ny+=(256+Math.random()*256|0).toString(16).substring(1)}return ny.substring(ry,ry+++i)}var ry,ny,VI=_(()=>{"use strict";ry=256});function oy(i){let{batch:e,cacheTime:t=i.pollingInterval??4e3,ccipRead:r,key:s="base",name:o="Base Client",pollingInterval:l=4e3,type:u="base"}=i,p=i.chain,h=i.account?ai(i.account):void 0,{config:f,request:g,value:b}=i.transport({chain:p,pollingInterval:l}),v={...f,...b},w={account:h,batch:e,cacheTime:t,ccipRead:r,chain:p,key:s,name:o,pollingInterval:l,request:g,transport:v,type:u,uid:sy()};function k(E){return F=>{let O=F(E);for(let Y in w)delete O[Y];let H={...E,...O};return Object.assign(H,{extend:k(H)})}}return Object.assign(w,{extend:k(w)})}var KI=_(()=>{"use strict";Sr();VI()});function FT(i,{enabled:e=!0,id:t}){if(!e||!t)return i();if(ay.get(t))return ay.get(t);let r=i().finally(()=>ay.delete(t));return ay.set(t,r),r}var ay,PT=_(()=>{"use strict";hh();ay=new Os(8192)});function Oh(i,{delay:e=100,retryCount:t=2,shouldRetry:r=()=>!0}={}){return new Promise((s,o)=>{let l=async({count:u=0}={})=>{let p=async({error:h})=>{let f=typeof e=="function"?e({count:u,error:h}):e;f&&await Bh(f),l({count:u+1})};try{let h=await i();s(h)}catch(h){if(u<t&&await r({count:u,error:h}))return p({error:h});o(h)}};l()})}var $I=_(()=>{"use strict";jI()});function UT(i,e={}){return async(t,r={})=>{let{dedupe:s=!1,methods:o,retryDelay:l=150,retryCount:u=3,uid:p}={...e,...r},{method:h}=t;if(o?.exclude?.includes(h))throw new ea(new Error("method not supported"),{method:h});if(o?.include&&!o.include.includes(h))throw new ea(new Error("method not supported"),{method:h});let f=s?us(`${p}.${mi(t)}`):void 0;return FT(()=>Oh(async()=>{try{return await i(t)}catch(g){let b=g;switch(b.code){case ic.code:throw new ic(b);case rc.code:throw new rc(b);case nc.code:throw new nc(b,{method:t.method});case sc.code:throw new sc(b);case bo.code:throw new bo(b);case zs.code:throw new zs(b);case oc.code:throw new oc(b);case ac.code:throw new ac(b);case lc.code:throw new lc(b);case ea.code:throw new ea(b,{method:t.method});case Ya.code:throw new Ya(b);case cc.code:throw new cc(b);case Qa.code:throw new Qa(b);case uc.code:throw new uc(b);case pc.code:throw new pc(b);case hc.code:throw new hc(b);case dc.code:throw new dc(b);case mc.code:throw new mc(b);case 5e3:throw new Qa(b);default:throw g instanceof X?g:new Xg(b)}}},{delay:({count:g,error:b})=>{if(b&&b instanceof $n){let v=b?.headers?.get("Retry-After");if(v?.match(/\d/))return Number.parseInt(v)*1e3}return~~(1<<g)*l},retryCount:u,shouldRetry:({error:g})=>e6(g)}),{enabled:s,id:f})}}function e6(i){return"code"in i&&typeof i.code=="number"?i.code===-1||i.code===Ya.code||i.code===bo.code:i instanceof $n&&i.status?i.status===403||i.status===408||i.status===413||i.status===429||i.status===500||i.status===502||i.status===503||i.status===504:!0}var HT=_(()=>{"use strict";ni();qa();bh();vt();PT();$I();hn()});function ly({key:i,methods:e,name:t,request:r,retryCount:s=3,retryDelay:o=150,timeout:l,type:u},p){let h=sy();return{config:{key:i,methods:e,name:t,request:r,retryCount:s,retryDelay:o,timeout:l,type:u},request:UT(r,{methods:e,retryCount:s,retryDelay:o,uid:h}),value:p}}var qI=_(()=>{"use strict";HT();VI()});function Gc(i,e={}){let{key:t="custom",methods:r,name:s="Custom Provider",retryDelay:o}=e;return({retryCount:l})=>ly({key:t,methods:r,name:s,request:i.request.bind(i),retryCount:e.retryCount??l,retryDelay:o,type:"custom"})}var zT=_(()=>{"use strict";qI()});var cy,jT=_(()=>{"use strict";ni();cy=class extends X{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}});function GT(i,{errorInstance:e=new Error("timed out"),timeout:t,signal:r}){return new Promise((s,o)=>{(async()=>{let l;try{let u=new AbortController;t>0&&(l=setTimeout(()=>{r?u.abort():o(e)},t)),s(await i({signal:u?.signal||null}))}catch(u){u?.name==="AbortError"&&o(e),o(u)}finally{clearTimeout(l)}})()})}var WT=_(()=>{"use strict"});function t6(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var YI,VT=_(()=>{"use strict";YI=t6()});function KT(i,e={}){return{async request(t){let{body:r,onRequest:s=e.onRequest,onResponse:o=e.onResponse,timeout:l=e.timeout??1e4}=t,u={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:p,method:h,signal:f}=u;try{let g=await GT(async({signal:v})=>{let w={...u,body:Array.isArray(r)?mi(r.map(O=>({jsonrpc:"2.0",id:O.id??YI.take(),...O}))):mi({jsonrpc:"2.0",id:r.id??YI.take(),...r}),headers:{"Content-Type":"application/json",...p},method:h||"POST",signal:f||(l>0?v:null)},k=new Request(i,w),E=await s?.(k,w)??{...w,url:i};return await fetch(E.url??i,E)},{errorInstance:new gh({body:r,url:i}),timeout:l,signal:!0});o&&await o(g);let b;if(g.headers.get("Content-Type")?.startsWith("application/json"))b=await g.json();else{b=await g.text();try{b=JSON.parse(b||"{}")}catch(v){if(g.ok)throw v;b={error:b}}}if(!g.ok)throw new $n({body:r,details:mi(b.error)||g.statusText,headers:g.headers,status:g.status,url:i});return b}catch(g){throw g instanceof $n||g instanceof gh?g:new $n({body:r,cause:g,url:i})}}}}var $T=_(()=>{"use strict";qa();WT();hn();VT()});function Fh(i,e={}){let{batch:t,fetchOptions:r,key:s="http",methods:o,name:l="HTTP JSON-RPC",onFetchRequest:u,onFetchResponse:p,retryDelay:h,raw:f}=e;return({chain:g,retryCount:b,timeout:v})=>{let{batchSize:w=1e3,wait:k=0}=typeof t=="object"?t:{},E=e.retryCount??b,F=v??e.timeout??1e4,O=i||g?.rpcUrls.default.http[0];if(!O)throw new cy;let H=KT(O,{fetchOptions:r,onRequest:u,onResponse:p,timeout:F});return ly({key:s,methods:o,name:l,async request({method:Y,params:Z}){let W={method:Y,params:Z},{schedule:le}=Yb({id:O,wait:k,shouldSplitBatch(He){return He.length>w},fn:He=>H.request({body:He}),sort:(He,Qe)=>He.id-Qe.id}),oe=async He=>t?le(He):[await H.request({body:He})],[{error:de,result:Ne}]=await oe(W);if(f)return{error:de,result:Ne};if(de)throw new Jo({body:W,error:de,url:O});return Ne},retryCount:E,retryDelay:h,timeout:F,type:"http"},{fetchOptions:r,url:O})}}var qT=_(()=>{"use strict";qa();jT();HI();$T();qI()});function Wc(i,e){if(!(i instanceof X))return!1;let t=i.walk(r=>r instanceof $a);return t instanceof $a?!!(t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ResolverWildcardNotSupported"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverError"||t.data?.errorName==="HttpError"||t.reason?.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&t.reason===Mg[50]):!1}var uy=_(()=>{"use strict";Rg();ni();Xo()});function py(i){if(i.length!==66||i.indexOf("[")!==0||i.indexOf("]")!==65)return null;let e=`0x${i.slice(1,65)}`;return hr(e)?e:null}var QI=_(()=>{"use strict";as()});function Vc(i){let e=new Uint8Array(32).fill(0);if(!i)return di(e);let t=i.split(".");for(let r=t.length-1;r>=0;r-=1){let s=py(t[r]),o=s?Wn(s):Hi(ps(t[r]),"bytes");e=Hi(pn([e,o]),"bytes")}return di(e)}var XI=_(()=>{"use strict";Vn();Br();vt();ds();QI()});function YT(i){return`[${i.slice(2)}]`}var QT=_(()=>{"use strict"});function XT(i){let e=new Uint8Array(32).fill(0);return i?py(i)||Hi(ps(i)):di(e)}var JT=_(()=>{"use strict";Br();vt();ds();QI()});function xa(i){let e=i.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);let t=new Uint8Array(ps(e).byteLength+2),r=0,s=e.split(".");for(let o=0;o<s.length;o++){let l=ps(s[o]);l.byteLength>255&&(l=ps(YT(XT(s[o])))),t[r]=l.length,t.set(l,r+1),r+=l.length+1}return t.byteLength!==r+1?t.slice(0,r+1):t}var Ph=_(()=>{"use strict";Br();QT();JT()});async function ZT(i,e){let{blockNumber:t,blockTag:r,coinType:s,name:o,gatewayUrls:l,strict:u}=e,{chain:p}=i,h=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!p)throw new Error("client chain not configured. universalResolverAddress is required.");return Zn({blockNumber:t,chain:p,contract:"ensUniversalResolver"})})(),f=p?.ensTlds;if(f&&!f.some(g=>o.endsWith(g)))return null;try{let g=$i({abi:DI,functionName:"addr",...s!=null?{args:[Vc(o),BigInt(s)]}:{args:[Vc(o)]}}),b={address:h,abi:zb,functionName:"resolve",args:[tt(xa(o)),g],blockNumber:t,blockTag:r},v=Ge(i,Ur,"readContract"),w=l?await v({...b,args:[...b.args,l]}):await v(b);if(w[0]==="0x")return null;let k=In({abi:DI,args:s!=null?[Vc(o),BigInt(s)]:void 0,functionName:"addr",data:w[0]});return k==="0x"||qr(k)==="0x00"?null:k}catch(g){if(u)throw g;if(Wc(g,"resolve"))return null;throw g}}var e2=_(()=>{"use strict";cl();fa();Kn();dl();Wl();vt();uy();XI();Ph();Ui();Io()});var hy,va,Kc,dy,t2=_(()=>{"use strict";ni();hy=class extends X{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}},va=class extends X{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}},Kc=class extends X{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},dy=class extends X{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}});async function o6(i){try{let e=await fetch(i,{method:"HEAD"});return e.status===200?e.headers.get("content-type")?.startsWith("image/"):!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(t=>{let r=new Image;r.onload=()=>{t(!0)},r.onerror=()=>{t(!1)},r.src=i})}}function i2(i,e){return i?i.endsWith("/")?i.slice(0,-1):i:e}function JI({uri:i,gatewayUrls:e}){let t=n6.test(i);if(t)return{uri:i,isOnChain:!0,isEncoded:t};let r=i2(e?.ipfs,"https://ipfs.io"),s=i2(e?.arweave,"https://arweave.net"),o=i.match(i6),{protocol:l,subpath:u,target:p,subtarget:h=""}=o?.groups||{},f=l==="ipns:/"||u==="ipns/",g=l==="ipfs:/"||u==="ipfs/"||r6.test(i);if(i.startsWith("http")&&!f&&!g){let v=i;return e?.arweave&&(v=i.replace(/https:\/\/arweave.net/g,e?.arweave)),{uri:v,isOnChain:!1,isEncoded:!1}}if((f||g)&&p)return{uri:`${r}/${f?"ipns":"ipfs"}/${p}${h}`,isOnChain:!1,isEncoded:!1};if(l==="ar:/"&&p)return{uri:`${s}/${p}${h||""}`,isOnChain:!1,isEncoded:!1};let b=i.replace(s6,"");if(b.startsWith("<svg")&&(b=`data:image/svg+xml;base64,${btoa(b)}`),b.startsWith("data:")||b.startsWith("{"))return{uri:b,isOnChain:!0,isEncoded:!1};throw new Kc({uri:i})}function ZI(i){if(typeof i!="object"||!("image"in i)&&!("image_url"in i)&&!("image_data"in i))throw new hy({data:i});return i.image||i.image_url||i.image_data}async function r2({gatewayUrls:i,uri:e}){try{let t=await fetch(e).then(s=>s.json());return await my({gatewayUrls:i,uri:ZI(t)})}catch{throw new Kc({uri:e})}}async function my({gatewayUrls:i,uri:e}){let{uri:t,isOnChain:r}=JI({uri:e,gatewayUrls:i});if(r||await o6(t))return t;throw new Kc({uri:e})}function n2(i){let e=i;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));let[t,r,s]=e.split("/"),[o,l]=t.split(":"),[u,p]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new va({reason:"Only EIP-155 supported"});if(!l)throw new va({reason:"Chain ID not found"});if(!p)throw new va({reason:"Contract address not found"});if(!s)throw new va({reason:"Token ID not found"});if(!u)throw new va({reason:"ERC namespace not found"});return{chainID:Number.parseInt(l),namespace:u.toLowerCase(),contractAddress:p,tokenID:s}}async function s2(i,{nft:e}){if(e.namespace==="erc721")return Ur(i,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Ur(i,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new dy({namespace:e.namespace})}var i6,r6,n6,s6,o2=_(()=>{"use strict";Io();t2();i6=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,r6=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,n6=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,s6=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/});async function a2(i,{gatewayUrls:e,record:t}){return/eip155:/i.test(t)?a6(i,{gatewayUrls:e,record:t}):my({uri:t,gatewayUrls:e})}async function a6(i,{gatewayUrls:e,record:t}){let r=n2(t),s=await s2(i,{nft:r}),{uri:o,isOnChain:l,isEncoded:u}=JI({uri:s,gatewayUrls:e});if(l&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){let h=u?atob(o.replace("data:application/json;base64,","")):o,f=JSON.parse(h);return my({uri:ZI(f),gatewayUrls:e})}let p=r.tokenID;return r.namespace==="erc1155"&&(p=p.replace("0x","").padStart(64,"0")),r2({gatewayUrls:e,uri:o.replace(/(?:0x)?{id}/,p)})}var l2=_(()=>{"use strict";o2()});async function fy(i,e){let{blockNumber:t,blockTag:r,key:s,name:o,gatewayUrls:l,strict:u}=e,{chain:p}=i,h=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!p)throw new Error("client chain not configured. universalResolverAddress is required.");return Zn({blockNumber:t,chain:p,contract:"ensUniversalResolver"})})(),f=p?.ensTlds;if(f&&!f.some(g=>o.endsWith(g)))return null;try{let g={address:h,abi:zb,functionName:"resolve",args:[tt(xa(o)),$i({abi:BI,functionName:"text",args:[Vc(o),s]})],blockNumber:t,blockTag:r},b=Ge(i,Ur,"readContract"),v=l?await b({...g,args:[...g.args,l]}):await b(g);if(v[0]==="0x")return null;let w=In({abi:BI,functionName:"text",data:v[0]});return w===""?null:w}catch(g){if(u)throw g;if(Wc(g,"resolve"))return null;throw g}}var eS=_(()=>{"use strict";cl();fa();Kn();dl();vt();uy();XI();Ph();Ui();Io()});async function c2(i,{blockNumber:e,blockTag:t,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:l,universalResolverAddress:u}){let p=await Ge(i,fy,"getEnsText")({blockNumber:e,blockTag:t,key:"avatar",name:s,universalResolverAddress:u,gatewayUrls:o,strict:l});if(!p)return null;try{return await a2(i,{record:p,gatewayUrls:r})}catch{return null}}var u2=_(()=>{"use strict";l2();Ui();eS()});async function p2(i,{address:e,blockNumber:t,blockTag:r,gatewayUrls:s,strict:o,universalResolverAddress:l}){let u=l;if(!u){if(!i.chain)throw new Error("client chain not configured. universalResolverAddress is required.");u=Zn({blockNumber:t,chain:i.chain,contract:"ensUniversalResolver"})}let p=`${e.toLowerCase().substring(2)}.addr.reverse`;try{let h={address:u,abi:uT,functionName:"reverse",args:[tt(xa(p))],blockNumber:t,blockTag:r},f=Ge(i,Ur,"readContract"),[g,b]=s?await f({...h,args:[...h.args,s]}):await f(h);return e.toLowerCase()!==b.toLowerCase()?null:g}catch(h){if(o)throw h;if(Wc(h,"reverse"))return null;throw h}}var h2=_(()=>{"use strict";cl();dl();vt();uy();Ph();Ui();Io()});async function d2(i,e){let{blockNumber:t,blockTag:r,name:s}=e,{chain:o}=i,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!o)throw new Error("client chain not configured. universalResolverAddress is required.");return Zn({blockNumber:t,chain:o,contract:"ensUniversalResolver"})})(),u=o?.ensTlds;if(u&&!u.some(h=>s.endsWith(h)))throw new Error(`${s} is not a valid ENS TLD (${u?.join(", ")}) for chain "${o.name}" (id: ${o.id}).`);let[p]=await Ge(i,Ur,"readContract")({address:l,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[tt(xa(s))],blockNumber:t,blockTag:r});return p}var m2=_(()=>{"use strict";dl();vt();Ph();Ui();Io()});async function gy(i,e){let{account:t=i.account,blockNumber:r,blockTag:s="latest",blobs:o,data:l,gas:u,gasPrice:p,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:g,to:b,value:v,...w}=e,k=t?ai(t):void 0;try{vn(e);let F=(r?Ve(r):void 0)||s,O=i.chain?.formatters?.transactionRequest?.format,Y=(O||Xn)({...ua(w,{format:O}),from:k?.address,blobs:o,data:l,gas:u,gasPrice:p,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:g,to:b,value:v}),Z=await i.request({method:"eth_createAccessList",params:[Y,F]});return{accessList:Z.accessList,gasUsed:BigInt(Z.gasUsed)}}catch(E){throw $b(E,{...e,account:k,chain:i.chain})}}var tS=_(()=>{"use strict";Sr();vt();FI();Eh();sl();pa()});async function f2(i){let e=Yo(i,{method:"eth_newBlockFilter"}),t=await i.request({method:"eth_newBlockFilter"});return{id:t,request:e(t),type:"block"}}var g2=_(()=>{"use strict";dh()});async function by(i,{address:e,args:t,event:r,events:s,fromBlock:o,strict:l,toBlock:u}={}){let p=s??(r?[r]:void 0),h=Yo(i,{method:"eth_newFilter"}),f=[];p&&(f=[p.flatMap(v=>Ps({abi:[v],eventName:v.name,args:t}))],r&&(f=f[0]));let g=await i.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof o=="bigint"?Ve(o):o,toBlock:typeof u=="bigint"?Ve(u):u,...f.length?{topics:f}:{}}]});return{abi:p,args:t,eventName:r?r.name:void 0,fromBlock:o,id:g,request:h(g),strict:!!l,toBlock:u,type:"event"}}var iS=_(()=>{"use strict";$l();vt();dh()});async function yy(i){let e=Yo(i,{method:"eth_newPendingTransactionFilter"}),t=await i.request({method:"eth_newPendingTransactionFilter"});return{id:t,request:e(t),type:"transaction"}}var rS=_(()=>{"use strict";dh()});async function b2(i){let e=await i.request({method:"eth_blobBaseFee"});return BigInt(e)}var y2=_(()=>{"use strict"});async function _2(i,{blockHash:e,blockNumber:t,blockTag:r="latest"}={}){let s=t!==void 0?Ve(t):void 0,o;return e?o=await i.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):o=await i.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),br(o)}var x2=_(()=>{"use strict";Yr();vt()});async function nS(i,{address:e,blockNumber:t,blockTag:r="latest"}){let s=t!==void 0?Ve(t):void 0,o=await i.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(o!=="0x")return o}var v2=_(()=>{"use strict";vt()});function I2(i){return{baseFeePerGas:i.baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:i.gasUsedRatio,oldestBlock:BigInt(i.oldestBlock),reward:i.reward?.map(e=>e.map(t=>BigInt(t)))}}var S2=_(()=>{"use strict"});async function w2(i,{blockCount:e,blockNumber:t,blockTag:r="latest",rewardPercentiles:s}){let o=t?Ve(t):void 0,l=await i.request({method:"eth_feeHistory",params:[Ve(e),o||r,s]},{dedupe:!!o});return I2(l)}var k2=_(()=>{"use strict";vt();S2()});async function E2(i,{filter:e}){let t=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(o=>en(o));return e.abi?Oc({abi:e.abi,logs:s,strict:t}):s}var L2=_(()=>{"use strict";Pb();ma()});function er(i){return{formatters:void 0,fees:void 0,serializers:void 0,...i}}var es=_(()=>{"use strict"});var _y,xy,vy,T2=_(()=>{"use strict";hn();ni();_y=class extends X{constructor({domain:e}){super(`Invalid domain "${mi(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},xy=class extends X{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},vy=class extends X{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}});function C2(i){let{domain:e={},message:t,primaryType:r}=i,s={EIP712Domain:Sy({domain:e}),...i.types};Iy({domain:e,message:t,primaryType:r,types:s});let o=["0x1901"];return e&&o.push(l6({domain:e,types:s})),r!=="EIP712Domain"&&o.push(A2({data:t,primaryType:r,types:s})),Hi(pn(o))}function l6({domain:i,types:e}){return A2({data:i,primaryType:"EIP712Domain",types:e})}function A2({data:i,primaryType:e,types:t}){let r=M2({data:i,primaryType:e,types:t});return Hi(r)}function M2({data:i,primaryType:e,types:t}){let r=[{type:"bytes32"}],s=[c6({primaryType:e,types:t})];for(let o of t[e]){let[l,u]=B2({types:t,name:o.name,type:o.type,value:i[o.name]});r.push(l),s.push(u)}return An(r,s)}function c6({primaryType:i,types:e}){let t=tt(u6({primaryType:i,types:e}));return Hi(t)}function u6({primaryType:i,types:e}){let t="",r=R2({primaryType:i,types:e});r.delete(i);let s=[i,...Array.from(r).sort()];for(let o of s)t+=`${o}(${e[o].map(({name:l,type:u})=>`${u} ${l}`).join(",")})`;return t}function R2({primaryType:i,types:e},t=new Set){let s=i.match(/^\w*/u)?.[0];if(t.has(s)||e[s]===void 0)return t;t.add(s);for(let o of e[s])R2({primaryType:o.type,types:e},t);return t}function B2({types:i,name:e,type:t,value:r}){if(i[t]!==void 0)return[{type:"bytes32"},Hi(M2({data:r,primaryType:t,types:i}))];if(t==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Hi(r)];if(t==="string")return[{type:"bytes32"},Hi(tt(r))];if(t.lastIndexOf("]")===t.length-1){let s=t.slice(0,t.lastIndexOf("[")),o=r.map(l=>B2({name:e,type:s,types:i,value:l}));return[{type:"bytes32"},Hi(An(o.map(([l])=>l),o.map(([,l])=>l)))]}return[{type:t},r]}var D2=_(()=>{"use strict";qo();Vn();vt();ds();sS()});function N2(i){let{domain:e,message:t,primaryType:r,types:s}=i,o=(p,h)=>{let f={...h};for(let g of p){let{name:b,type:v}=g;v==="address"&&(f[b]=f[b].toLowerCase())}return f},l=(()=>s.EIP712Domain?e?o(s.EIP712Domain,e):{}:{})(),u=(()=>{if(r!=="EIP712Domain")return o(s[r],t)})();return mi({domain:l,message:u,primaryType:r,types:s})}function Iy(i){let{domain:e,message:t,primaryType:r,types:s}=i,o=(l,u)=>{for(let p of l){let{name:h,type:f}=p,g=u[h],b=f.match(Lg);if(b&&(typeof g=="number"||typeof g=="bigint")){let[k,E,F]=b;Ve(g,{signed:E==="int",size:Number.parseInt(F)/8})}if(f==="address"&&typeof g=="string"&&!Bi(g))throw new Gi({address:g});let v=f.match(NE);if(v){let[k,E]=v;if(E&&_i(g)!==Number.parseInt(E))throw new ag({expectedSize:Number.parseInt(E),givenSize:_i(g)})}let w=s[f];w&&(p6(f),o(w,g))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new _y({domain:e});o(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])o(s[r],t);else throw new xy({primaryType:r,types:s})}function Sy({domain:i}){return[typeof i?.name=="string"&&{name:"name",type:"string"},i?.version&&{name:"version",type:"string"},(typeof i?.chainId=="number"||typeof i?.chainId=="bigint")&&{name:"chainId",type:"uint256"},i?.verifyingContract&&{name:"verifyingContract",type:"address"},i?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function p6(i){if(i==="address"||i==="bool"||i==="string"||i.startsWith("bytes")||i.startsWith("uint")||i.startsWith("int"))throw new vy({type:i})}var sS=_(()=>{"use strict";vr();Ns();T2();ms();ls();vt();Ov();hn()});function O2(i){let{authorizationList:e}=i;if(e)for(let t of e){let{chainId:r}=t,s=t.address;if(!Bi(s))throw new Gi({address:s});if(r<0)throw new pl({chainId:r})}wy(i)}function F2(i){let{blobVersionedHashes:e}=i;if(e){if(e.length===0)throw new Rc;for(let t of e){let r=_i(t),s=br(go(t,0,1));if(r!==32)throw new Mb({hash:t,size:r});if(s!==1)throw new Rb({hash:t,version:s})}}wy(i)}function wy(i){let{chainId:e,maxPriorityFeePerGas:t,maxFeePerGas:r,to:s}=i;if(e<=0)throw new pl({chainId:e});if(s&&!Bi(s))throw new Gi({address:s});if(r&&r>Ec)throw new Yn({maxFeePerGas:r});if(t&&r&&t>r)throw new Ws({maxFeePerGas:r,maxPriorityFeePerGas:t})}function P2(i){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:s,to:o}=i;if(e<=0)throw new pl({chainId:e});if(o&&!Bi(o))throw new Gi({address:o});if(t||s)throw new X("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Ec)throw new Yn({maxFeePerGas:r})}function U2(i){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:s,to:o}=i;if(o&&!Bi(o))throw new Gi({address:o});if(typeof e<"u"&&e<=0)throw new pl({chainId:e});if(t||s)throw new X("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Ec)throw new Yn({maxFeePerGas:r})}var H2=_(()=>{"use strict";_I();Ns();ni();EI();Rh();la();ms();ls();Ga();Yr()});function Uh(i){if(!i||i.length===0)return[];let e=[];for(let t=0;t<i.length;t++){let{address:r,storageKeys:s}=i[t];for(let o=0;o<s.length;o++)if(s[o].length-2!==64)throw new Wg({storageKey:s[o]});if(!Bi(r,{strict:!1}))throw new Gi({address:r});e.push([r,s])}return e}var z2=_(()=>{"use strict";Ns();fs();ms()});function j2(i,e){let t=Db(i);return t==="eip1559"?m6(i,e):t==="eip2930"?f6(i,e):t==="eip4844"?d6(i,e):t==="eip7702"?h6(i,e):g6(i,e)}function h6(i,e){let{authorizationList:t,chainId:r,gas:s,nonce:o,to:l,value:u,maxFeePerGas:p,maxPriorityFeePerGas:h,accessList:f,data:g}=i;O2(i);let b=Uh(f),v=G2(t);return Qr(["0x04",ys([tt(r),o?tt(o):"0x",h?tt(h):"0x",p?tt(p):"0x",s?tt(s):"0x",l??"0x",u?tt(u):"0x",g??"0x",b,v,...$c(i,e)])])}function d6(i,e){let{chainId:t,gas:r,nonce:s,to:o,value:l,maxFeePerBlobGas:u,maxFeePerGas:p,maxPriorityFeePerGas:h,accessList:f,data:g}=i;F2(i);let b=i.blobVersionedHashes,v=i.sidecars;if(i.blobs&&(typeof b>"u"||typeof v>"u")){let H=typeof i.blobs[0]=="string"?i.blobs:i.blobs.map(W=>di(W)),Y=i.kzg,Z=Ac({blobs:H,kzg:Y});if(typeof b>"u"&&(b=Cb({commitments:Z})),typeof v>"u"){let W=Mc({blobs:H,commitments:Z,kzg:Y});v=Bb({blobs:H,commitments:Z,proofs:W})}}let w=Uh(f),k=[tt(t),s?tt(s):"0x",h?tt(h):"0x",p?tt(p):"0x",r?tt(r):"0x",o??"0x",l?tt(l):"0x",g??"0x",w,u?tt(u):"0x",b??[],...$c(i,e)],E=[],F=[],O=[];if(v)for(let H=0;H<v.length;H++){let{blob:Y,commitment:Z,proof:W}=v[H];E.push(Y),F.push(Z),O.push(W)}return Qr(["0x03",v?ys([k,E,F,O]):ys(k)])}function m6(i,e){let{chainId:t,gas:r,nonce:s,to:o,value:l,maxFeePerGas:u,maxPriorityFeePerGas:p,accessList:h,data:f}=i;wy(i);let g=Uh(h),b=[tt(t),s?tt(s):"0x",p?tt(p):"0x",u?tt(u):"0x",r?tt(r):"0x",o??"0x",l?tt(l):"0x",f??"0x",g,...$c(i,e)];return Qr(["0x02",ys(b)])}function f6(i,e){let{chainId:t,gas:r,data:s,nonce:o,to:l,value:u,accessList:p,gasPrice:h}=i;P2(i);let f=Uh(p),g=[tt(t),o?tt(o):"0x",h?tt(h):"0x",r?tt(r):"0x",l??"0x",u?tt(u):"0x",s??"0x",f,...$c(i,e)];return Qr(["0x01",ys(g)])}function g6(i,e){let{chainId:t=0,gas:r,data:s,nonce:o,to:l,value:u,gasPrice:p}=i;U2(i);let h=[o?tt(o):"0x",p?tt(p):"0x",r?tt(r):"0x",l??"0x",u?tt(u):"0x",s??"0x"];if(e){let f=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(t>0)return BigInt(t*2)+BigInt(35n+e.v-27n);let v=27n+(e.v===27n?0n:1n);if(e.v!==v)throw new jg({v:e.v});return v})(),g=qr(e.r),b=qr(e.s);h=[...h,tt(f),g==="0x00"?"0x":g,b==="0x00"?"0x":b]}else t>0&&(h=[...h,tt(t),"0x","0x"]);return ys(h)}function $c(i,e){let t=e??i,{v:r,yParity:s}=t;if(typeof t.r>"u")return[];if(typeof t.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];let o=qr(t.r),l=qr(t.s);return[(()=>typeof s=="number"?s?tt(1):"0x":r===0n?"0x":r===1n?tt(1):r===27n?"0x":tt(1))(),o==="0x00"?"0x":o,l==="0x00"?"0x":l]}var oS=_(()=>{"use strict";fs();W2();Lb();Tb();kI();LI();Vn();Wl();vt();fb();H2();TI();z2()});function G2(i){if(!i||i.length===0)return[];let e=[];for(let t of i){let{chainId:r,nonce:s,...o}=t,l=t.address;e.push([r?tt(r):"0x",l,s?tt(s):"0x",...$c({},o)])}return e}var W2=_(()=>{"use strict";vt();oS()});function aS(i){let e={...i,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,contractAddress:i.contractAddress?i.contractAddress:null,cumulativeGasUsed:i.cumulativeGasUsed?BigInt(i.cumulativeGasUsed):null,effectiveGasPrice:i.effectiveGasPrice?BigInt(i.effectiveGasPrice):null,gasUsed:i.gasUsed?BigInt(i.gasUsed):null,logs:i.logs?i.logs.map(t=>en(t)):null,to:i.to?i.to:null,transactionIndex:i.transactionIndex?br(i.transactionIndex):null,status:i.status?b6[i.status]:null,type:i.type?vI[i.type]||i.type:null};return i.blobGasPrice&&(e.blobGasPrice=BigInt(i.blobGasPrice)),i.blobGasUsed&&(e.blobGasUsed=BigInt(i.blobGasUsed)),e}var b6,V2,lS=_(()=>{"use strict";Yr();yb();ma();Lh();b6={"0x0":"reverted","0x1":"success"};V2=wc("transactionReceipt",aS)});var K2,$2=_(()=>{"use strict";K2=`Ethereum Signed Message:
`});function q2(i){let e=(()=>typeof i=="string"?us(i):typeof i.raw=="string"?i.raw:di(i.raw))(),t=us(`${K2}${_i(e)}`);return pn([t,e])}var Y2=_(()=>{"use strict";$2();Vn();ls();vt()});function ky(i,e){return Hi(q2(i),e)}var cS=_(()=>{"use strict";ds();Y2()});var Ey,uS=_(()=>{"use strict";Ey="0x6492649264926492649264926492649264926492649264926492649264926492"});function Q2(i){return Nv(i,-32)===Ey}var X2=_(()=>{"use strict";uS();Ga()});function J2(i){let{address:e,data:t,signature:r,to:s="hex"}=i,o=Qr([An([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,t,r]),Ey]);return s==="hex"?o:Ir(o)}var Z2=_(()=>{"use strict";uS();qo();Vn();Br()});var Ly,eC=_(()=>{"use strict";ni();Ly=class extends X{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}});function pS(i,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(i))throw new Ly({value:i});let[t,r="0"]=i.split("."),s=t.startsWith("-");if(s&&(t=t.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(t=`${BigInt(t)+1n}`),r="";else if(r.length>e){let[o,l,u]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],p=Math.round(+`${l}.${u}`);p>9?r=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):r=`${o}${p}`,r.length>e&&(r=r.slice(1),t=`${BigInt(t)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${t}${r}`)}var tC=_(()=>{"use strict";eC()});var Ty=_(()=>{"use strict";Kn();Yr()});function y6(i){return i.map(e=>({...e,value:BigInt(e.value)}))}function iC(i){return{...i,balance:i.balance?BigInt(i.balance):void 0,nonce:i.nonce?br(i.nonce):void 0,storageProof:i.storageProof?y6(i.storageProof):void 0}}var rC=_(()=>{"use strict";Ty()});async function nC(i,{address:e,blockNumber:t,blockTag:r,storageKeys:s}){let o=r??"latest",l=t!==void 0?Ve(t):void 0,u=await i.request({method:"eth_getProof",params:[e,s,l||o]});return iC(u)}var sC=_(()=>{"use strict";vt();rC()});async function oC(i,{address:e,blockNumber:t,blockTag:r="latest",slot:s}){let o=t!==void 0?Ve(t):void 0;return await i.request({method:"eth_getStorageAt",params:[e,s,o||r]})}var aC=_(()=>{"use strict";vt()});async function qc(i,{blockHash:e,blockNumber:t,blockTag:r,hash:s,index:o}){let l=r||"latest",u=t!==void 0?Ve(t):void 0,p=null;if(s?p=await i.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?p=await i.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ve(o)]},{dedupe:!0}):(u||l)&&(p=await i.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||l,Ve(o)]},{dedupe:!!u})),!p)throw new Zl({blockHash:e,blockNumber:t,blockTag:l,hash:s,index:o});return(i.chain?.formatters?.transaction?.format||ol)(p)}var Cy=_(()=>{"use strict";fs();vt();Lh()});async function lC(i,{hash:e,transactionReceipt:t}){let[r,s]=await Promise.all([Ge(i,qs,"getBlockNumber")({}),e?Ge(i,qc,"getTransaction")({hash:e}):void 0]),o=t?.blockNumber||s?.blockNumber;return o?r-o+1n:0n}var cC=_(()=>{"use strict";Ui();Hc();Cy()});async function Hh(i,{hash:e}){let t=await i.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!t)throw new ec({hash:e});return(i.chain?.formatters?.transactionReceipt?.format||aS)(t)}var hS=_(()=>{"use strict";fs();lS()});async function uC(i,e){let{allowFailure:t=!0,batchSize:r,blockNumber:s,blockTag:o,multicallAddress:l,stateOverride:u}=e,p=e.contracts,h=r??(typeof i.batch?.multicall=="object"&&i.batch.multicall.batchSize||1024),f=l;if(!f){if(!i.chain)throw new Error("client chain not configured. multicallAddress is required.");f=Zn({blockNumber:s,chain:i.chain,contract:"multicall3"})}let g=[[]],b=0,v=0;for(let E=0;E<p.length;E++){let{abi:F,address:O,args:H,functionName:Y}=p[E];try{let Z=$i({abi:F,args:H,functionName:Y});v+=(Z.length-2)/2,h>0&&v>h&&g[b].length>0&&(b++,v=(Z.length-2)/2,g[b]=[]),g[b]=[...g[b],{allowFailure:!0,callData:Z,target:O}]}catch(Z){let W=Mn(Z,{abi:F,address:O,args:H,docsPath:"/docs/contract/multicall",functionName:Y});if(!t)throw W;g[b]=[...g[b],{allowFailure:!0,callData:"0x",target:O}]}}let w=await Promise.allSettled(g.map(E=>Ge(i,Ur,"readContract")({abi:Ah,address:f,args:[E],blockNumber:s,blockTag:o,functionName:"aggregate3",stateOverride:u}))),k=[];for(let E=0;E<w.length;E++){let F=w[E];if(F.status==="rejected"){if(!t)throw F.reason;for(let H=0;H<g[E].length;H++)k.push({status:"failure",error:F.reason,result:void 0});continue}let O=F.value;for(let H=0;H<O.length;H++){let{returnData:Y,success:Z}=O[H],{callData:W}=g[E][H],{abi:le,address:oe,functionName:de,args:Ne}=p[k.length];try{if(W==="0x")throw new Gn;if(!Z)throw new Hs({data:Y});let He=In({abi:le,args:Ne,data:Y,functionName:de});k.push(t?{result:He,status:"success"}:He)}catch(He){let Qe=Mn(He,{abi:le,address:oe,args:Ne,docsPath:"/docs/contract/multicall",functionName:de});if(!t)throw Qe;k.push({error:Qe,result:void 0,status:"failure"})}}}if(k.length!==p.length)throw new X("multicall results mismatch");return k}var pC=_(()=>{"use strict";cl();vr();ni();Xo();fa();Kn();dl();Xa();Ui();Io()});var hC,dC=_(()=>{"use strict";hC="0.1.1"});function mC(){return hC}var fC=_(()=>{"use strict";dC()});function gC(i,e){return e?.(i)?i:i&&typeof i=="object"&&"cause"in i&&i.cause?gC(i.cause,e):e?null:i}var wi,Ia=_(()=>{"use strict";fC();wi=class i extends Error{constructor(e,t={}){let r=(()=>{if(t.cause instanceof i){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),s=(()=>t.cause instanceof i&&t.cause.docsPath||t.docsPath)(),l=`https://oxlib.sh${s??""}`,u=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${l}`:void 0]:[]].filter(p=>typeof p=="string").join(`
`);super(u,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${mC()}`}),this.cause=t.cause,this.details=r,this.docs=l,this.docsPath=s,this.shortMessage=e}walk(e){return gC(this,e)}}});function bC(i,e,t){return JSON.stringify(i,(r,s)=>typeof e=="function"?e(r,s):typeof s=="bigint"?s.toString()+_6:s,t)}var _6,yC=_(()=>{"use strict";_6="#__bigint"});function _C(i,e){if(dS(i)>e)throw new Ay({givenSize:dS(i),maxSize:e})}function mS(i){if(i>=So.zero&&i<=So.nine)return i-So.zero;if(i>=So.A&&i<=So.F)return i-(So.A-10);if(i>=So.a&&i<=So.f)return i-(So.a-10)}function xC(i,e={}){let{dir:t,size:r=32}=e;if(r===0)return i;if(i.length>r)throw new My({size:i.length,targetSize:r,type:"Bytes"});let s=new Uint8Array(r);for(let o=0;o<r;o++){let l=t==="right";s[l?o:r-o-1]=i[l?o:i.length-o-1]}return s}var So,vC=_(()=>{"use strict";Ry();So={zero:48,nine:57,A:65,F:70,a:97,f:102}});function zh(i,e){if(Dr(i)>e)throw new By({givenSize:Dr(i),maxSize:e})}function IC(i,e){if(typeof e=="number"&&e>0&&e>Dr(i)-1)throw new jh({offset:e,position:"start",size:Dr(i)})}function SC(i,e,t){if(typeof e=="number"&&typeof t=="number"&&Dr(i)!==t-e)throw new jh({offset:t,position:"end",size:Dr(i)})}function gS(i,e={}){let{dir:t,size:r=32}=e;if(r===0)return i;let s=i.replace("0x","");if(s.length>r*2)throw new Dy({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[t==="right"?"padEnd":"padStart"](r*2,"0")}`}var bS=_(()=>{"use strict";_s()});function kC(i){return i instanceof Uint8Array?i:typeof i=="string"?w6(i):S6(i)}function S6(i){return i instanceof Uint8Array?i:new Uint8Array(i)}function w6(i,e={}){let{size:t}=e,r=i;t&&(zh(i,t),r=Qs(i,t));let s=r.slice(2);s.length%2&&(s=`0${s}`);let o=s.length/2,l=new Uint8Array(o);for(let u=0,p=0;u<o;u++){let h=mS(s.charCodeAt(p++)),f=mS(s.charCodeAt(p++));if(h===void 0||f===void 0)throw new wi(`Invalid byte sequence ("${s[p-2]}${s[p-1]}" in "${s}").`);l[u]=h*16+f}return l}function EC(i,e={}){let{size:t}=e,r=I6.encode(i);return typeof t=="number"?(_C(r,t),k6(r,t)):r}function k6(i,e){return xC(i,{dir:"right",size:e})}function dS(i){return i.length}var I6,Ay,My,Ry=_(()=>{"use strict";Ia();_s();vC();bS();I6=new TextEncoder;Ay=class extends wi{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},My=class extends wi{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}});function T6(i,e={}){let{strict:t=!1}=e;if(!i)throw new Ny(i);if(typeof i!="string")throw new Ny(i);if(t&&!/^0x[0-9a-fA-F]*$/.test(i))throw new Oy(i);if(!i.startsWith("0x"))throw new Oy(i)}function wn(...i){return`0x${i.reduce((e,t)=>e+t.replace("0x",""),"")}`}function Fy(i,e={}){let t=`0x${Number(i)}`;return typeof e.size=="number"?(zh(t,e.size),wo(t,e.size)):t}function Yc(i,e={}){let t="";for(let s=0;s<i.length;s++)t+=L6[i[s]];let r=`0x${t}`;return typeof e.size=="number"?(zh(r,e.size),Qs(r,e.size)):r}function yr(i,e={}){let{signed:t,size:r}=e,s=BigInt(i),o;r?t?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof i=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));let l=typeof o=="bigint"&&t?-o-1n:0;if(o&&s>o||s<l){let h=typeof i=="bigint"?"n":"";throw new Gh({max:o?`${o}${h}`:void 0,min:`${l}${h}`,signed:t,size:r,value:`${i}${h}`})}let p=`0x${(t&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?wo(p,r):p}function Qc(i,e={}){return Yc(E6.encode(i),e)}function wo(i,e){return gS(i,{dir:"left",size:e})}function Qs(i,e){return gS(i,{dir:"right",size:e})}function Xc(i,e,t,r={}){let{strict:s}=r;IC(i,e);let o=`0x${i.replace("0x","").slice((e??0)*2,(t??i.length)*2)}`;return s&&SC(o,e,t),o}function Dr(i){return Math.ceil((i.length-2)/2)}function yS(i,e={}){let{strict:t=!1}=e;try{return T6(i,{strict:t}),!0}catch{return!1}}var E6,L6,Gh,Ny,Oy,By,jh,Dy,_s=_(()=>{"use strict";Ia();yC();bS();E6=new TextEncoder,L6=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));Gh=class extends wi{constructor({max:e,min:t,signed:r,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Ny=class extends wi{constructor(e){super(`Value \`${typeof e=="object"?bC(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},Oy=class extends wi{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},By=class extends wi{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},jh=class extends wi{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},Dy=class extends wi{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}});function LC(i){return{address:i.address,amount:yr(i.amount),index:yr(i.index),validatorIndex:yr(i.validatorIndex)}}var TC=_(()=>{"use strict";_s()});function CC(i){return{...typeof i.baseFeePerGas=="bigint"&&{baseFeePerGas:yr(i.baseFeePerGas)},...typeof i.blobBaseFee=="bigint"&&{blobBaseFee:yr(i.blobBaseFee)},...typeof i.feeRecipient=="string"&&{feeRecipient:i.feeRecipient},...typeof i.gasLimit=="bigint"&&{gasLimit:yr(i.gasLimit)},...typeof i.number=="bigint"&&{number:yr(i.number)},...typeof i.prevRandao=="bigint"&&{prevRandao:yr(i.prevRandao)},...typeof i.time=="bigint"&&{time:yr(i.time)},...i.withdrawals&&{withdrawals:i.withdrawals.map(LC)}}}var AC=_(()=>{"use strict";_s();TC()});async function Wh(i,e){let{blockNumber:t,blockTag:r="latest",blocks:s,returnFullTransactions:o,traceTransfers:l,validation:u}=e;try{let p=[];for(let b of s){let v=b.blockOverrides?CC(b.blockOverrides):void 0,w=b.calls.map(E=>{let F=E,O=F.account?ai(F.account):void 0,H={...F,data:F.abi?$i(F):F.data,from:F.from??O?.address};return vn(H),Xn(H)}),k=b.stateOverrides?kc(b.stateOverrides):void 0;p.push({blockOverrides:v,calls:w,stateOverrides:k})}let f=(t?Ve(t):void 0)||r;return(await i.request({method:"eth_simulateV1",params:[{blockStateCalls:p,returnFullTransactions:o,traceTransfers:l,validation:u},f]})).map((b,v)=>({...Th(b),calls:b.calls.map((w,k)=>{let{abi:E,args:F,functionName:O,to:H}=s[v].calls[k],Y=w.error?.data??w.returnData,Z=BigInt(w.gasUsed),W=w.logs?.map(Ne=>en(Ne)),le=w.status==="0x1"?"success":"failure",oe=E&&le==="success"&&Y!=="0x"?In({abi:E,data:Y,functionName:O}):null,de=(()=>{if(le==="success")return;let Ne;if(w.error?.data==="0x"?Ne=new Gn:w.error&&(Ne=new Hs(w.error)),!!Ne)return Mn(Ne,{abi:E??[],address:H,args:F,functionName:O??"<unknown>"})})();return{data:Y,gasUsed:Z,logs:W,status:le,...le==="success"?{result:oe}:{error:de}}})}))}catch(p){let h=p,f=ca(h,{});throw f instanceof Qn?h:f}}var _S=_(()=>{"use strict";AC();Sr();vr();Xo();la();fa();Kn();vt();Xa();kh();Sb();ma();sl();_b();pa()});function Py(i,e={}){let{as:t=typeof i=="string"?"Hex":"Bytes"}=e,r=wg(kC(i));return t==="Bytes"?r:Yc(r)}var xS=_(()=>{"use strict";Av();Ry();_s()});var Uy,RC=_(()=>{"use strict";Uy=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let r=this.keys().next().value;r&&this.delete(r)}return this}}});var M6,Hy,BC=_(()=>{"use strict";RC();M6={checksum:new Uy(8192)},Hy=M6.checksum});function Jc(i,e={}){let{strict:t=!0}=e;if(!B6.test(i))throw new zy({address:i,cause:new vS});if(t){if(i.toLowerCase()===i)return;if(DC(i)!==i)throw new zy({address:i,cause:new IS})}}function DC(i){if(Hy.has(i))return Hy.get(i);Jc(i,{strict:!1});let e=i.substring(2).toLowerCase(),t=Py(EC(e),{as:"Bytes"}),r=e.split("");for(let o=0;o<40;o+=2)t[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(t[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());let s=`0x${r.join("")}`;return Hy.set(i,s),s}function jy(i,e={}){let{strict:t=!0}=e??{};try{return Jc(i,{strict:t}),!0}catch{return!1}}var B6,zy,vS,IS,Gy=_(()=>{"use strict";Ry();BC();Ia();xS();B6=/^0x[a-fA-F0-9]{40}$/;zy=class extends wi{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},vS=class extends wi{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},IS=class extends wi{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}});function Vy(i){let e=!0,t="",r=0,s="",o=!1;for(let l=0;l<i.length;l++){let u=i[l];if(["(",")",","].includes(u)&&(e=!0),u==="("&&r++,u===")"&&r--,!!e){if(r===0){if(u===" "&&["event","function","error",""].includes(s))s="";else if(s+=u,u===")"){o=!0;break}continue}if(u===" "){i[l-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}s+=u,t+=u}}if(!o)throw new wi("Unable to normalize signature.");return s}function Wy(i,e){let t=typeof i,r=e.type;switch(r){case"address":return jy(i,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,o)=>Wy(Object.values(i)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?t==="string"||i instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(i)&&i.every(s=>Wy(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function wS(i,e,t){for(let r in i){let s=i[r],o=e[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return wS(s.components,o.components,t[r]);let l=[s.type,o.type];if((()=>l.includes("address")&&l.includes("bytes20")?!0:l.includes("address")&&l.includes("string")?jy(t[r],{strict:!1}):l.includes("address")&&l.includes("bytes")?jy(t[r],{strict:!1}):!1)())return l}}var NC=_(()=>{"use strict";Gy();Ia()});function Ky(i,e={}){let{prepare:t=!0}=e,r=(()=>Array.isArray(i)?Xf(i):typeof i=="string"?Xf(i):i)();return{...r,...t?{hash:Zc(r)}:{}}}function OC(i,e,t){let{args:r=[],prepare:s=!0}=t??{},o=yS(e,{strict:!1}),l=i.filter(h=>o?h.type==="function"||h.type==="error"?ES(h)===Xc(e,0,4):h.type==="event"?Zc(h)===e:!1:"name"in h&&h.name===e);if(l.length===0)throw new gl({name:e});if(l.length===1)return{...l[0],...s?{hash:Zc(l[0])}:{}};let u;for(let h of l){if(!("inputs"in h))continue;if(!r||r.length===0){if(!h.inputs||h.inputs.length===0)return{...h,...s?{hash:Zc(h)}:{}};continue}if(!h.inputs||h.inputs.length===0||h.inputs.length!==r.length)continue;if(r.every((g,b)=>{let v="inputs"in h&&h.inputs[b];return v?Wy(g,v):!1})){if(u&&"inputs"in u&&u.inputs){let g=wS(h.inputs,u.inputs,r);if(g)throw new kS({abiItem:h,type:g[0]},{abiItem:u,type:g[1]})}u=h}}let p=(()=>{if(u)return u;let[h,...f]=l;return{...h,overloads:f}})();if(!p)throw new gl({name:e});return{...p,...s?{hash:Zc(p)}:{}}}function ES(i){return Xc(Zc(i),0,4)}function N6(i){let e=(()=>typeof i=="string"?i:Pa(i))();return Vy(e)}function Zc(i){return typeof i!="string"&&"hash"in i&&i.hash?i.hash:Py(Qc(N6(i)))}var kS,gl,LS=_(()=>{"use strict";Jf();Ia();xS();_s();NC();kS=class extends wi{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Vy(Pa(e.abiItem))}\`, and`,`\`${t.type}\` in \`${Vy(Pa(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},gl=class extends wi{constructor({name:e,data:t,type:r="item"}){let s=(()=>e?` with name "${e}"`:t?` with data "${t}"`:"")();super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}});var PC,UC,$y,SX,wX,kX,EX,LX,TX,CX,AX,MX,RX,BX,DX,NX,OX,FX,PX,UX,HX,zX,jX,GX,WX,VX,KX,$X,qX,YX,QX,XX,JX,ZX,eJ,tJ,iJ,rJ,nJ,sJ,oJ,aJ,lJ,cJ,uJ,pJ,hJ,dJ,mJ,fJ,gJ,bJ,yJ,_J,xJ,vJ,IJ,SJ,wJ,kJ,EJ,LJ,TJ,CJ,AJ,MJ,RJ,BJ,DJ,NJ,OJ,FJ,PJ,UJ,HJ,zJ,jJ,GJ,WJ,VJ,KJ,$J,qJ,YJ,QJ,XJ,JJ,ZJ,eZ,tZ,iZ,rZ,nZ,sZ,oZ,aZ,lZ,cZ,uZ,TS=_(()=>{"use strict";PC=/^(.*)\[([0-9]*)\]$/,UC=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,$y=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,SX=2n**(8n-1n)-1n,wX=2n**(16n-1n)-1n,kX=2n**(24n-1n)-1n,EX=2n**(32n-1n)-1n,LX=2n**(40n-1n)-1n,TX=2n**(48n-1n)-1n,CX=2n**(56n-1n)-1n,AX=2n**(64n-1n)-1n,MX=2n**(72n-1n)-1n,RX=2n**(80n-1n)-1n,BX=2n**(88n-1n)-1n,DX=2n**(96n-1n)-1n,NX=2n**(104n-1n)-1n,OX=2n**(112n-1n)-1n,FX=2n**(120n-1n)-1n,PX=2n**(128n-1n)-1n,UX=2n**(136n-1n)-1n,HX=2n**(144n-1n)-1n,zX=2n**(152n-1n)-1n,jX=2n**(160n-1n)-1n,GX=2n**(168n-1n)-1n,WX=2n**(176n-1n)-1n,VX=2n**(184n-1n)-1n,KX=2n**(192n-1n)-1n,$X=2n**(200n-1n)-1n,qX=2n**(208n-1n)-1n,YX=2n**(216n-1n)-1n,QX=2n**(224n-1n)-1n,XX=2n**(232n-1n)-1n,JX=2n**(240n-1n)-1n,ZX=2n**(248n-1n)-1n,eJ=2n**(256n-1n)-1n,tJ=-(2n**(8n-1n)),iJ=-(2n**(16n-1n)),rJ=-(2n**(24n-1n)),nJ=-(2n**(32n-1n)),sJ=-(2n**(40n-1n)),oJ=-(2n**(48n-1n)),aJ=-(2n**(56n-1n)),lJ=-(2n**(64n-1n)),cJ=-(2n**(72n-1n)),uJ=-(2n**(80n-1n)),pJ=-(2n**(88n-1n)),hJ=-(2n**(96n-1n)),dJ=-(2n**(104n-1n)),mJ=-(2n**(112n-1n)),fJ=-(2n**(120n-1n)),gJ=-(2n**(128n-1n)),bJ=-(2n**(136n-1n)),yJ=-(2n**(144n-1n)),_J=-(2n**(152n-1n)),xJ=-(2n**(160n-1n)),vJ=-(2n**(168n-1n)),IJ=-(2n**(176n-1n)),SJ=-(2n**(184n-1n)),wJ=-(2n**(192n-1n)),kJ=-(2n**(200n-1n)),EJ=-(2n**(208n-1n)),LJ=-(2n**(216n-1n)),TJ=-(2n**(224n-1n)),CJ=-(2n**(232n-1n)),AJ=-(2n**(240n-1n)),MJ=-(2n**(248n-1n)),RJ=-(2n**(256n-1n)),BJ=2n**8n-1n,DJ=2n**16n-1n,NJ=2n**24n-1n,OJ=2n**32n-1n,FJ=2n**40n-1n,PJ=2n**48n-1n,UJ=2n**56n-1n,HJ=2n**64n-1n,zJ=2n**72n-1n,jJ=2n**80n-1n,GJ=2n**88n-1n,WJ=2n**96n-1n,VJ=2n**104n-1n,KJ=2n**112n-1n,$J=2n**120n-1n,qJ=2n**128n-1n,YJ=2n**136n-1n,QJ=2n**144n-1n,XJ=2n**152n-1n,JJ=2n**160n-1n,ZJ=2n**168n-1n,eZ=2n**176n-1n,tZ=2n**184n-1n,iZ=2n**192n-1n,rZ=2n**200n-1n,nZ=2n**208n-1n,sZ=2n**216n-1n,oZ=2n**224n-1n,aZ=2n**232n-1n,lZ=2n**240n-1n,cZ=2n**248n-1n,uZ=2n**256n-1n});function HC({checksumAddress:i,parameters:e,values:t}){let r=[];for(let s=0;s<e.length;s++)r.push(CS({checksumAddress:i,parameter:e[s],value:t[s]}));return r}function CS({checksumAddress:i=!1,parameter:e,value:t}){let r=e,s=W6(r.type);if(s){let[o,l]=s;return P6(t,{checksumAddress:i,length:o,parameter:{...r,type:l}})}if(r.type==="tuple")return G6(t,{checksumAddress:i,parameter:r});if(r.type==="address")return F6(t,{checksum:i});if(r.type==="bool")return H6(t);if(r.type.startsWith("uint")||r.type.startsWith("int")){let o=r.type.startsWith("int"),[,,l="256"]=$y.exec(r.type)??[];return z6(t,{signed:o,size:Number(l)})}if(r.type.startsWith("bytes"))return U6(t,{type:r.type});if(r.type==="string")return j6(t);throw new Kh(r.type)}function qy(i){let e=0;for(let o=0;o<i.length;o++){let{dynamic:l,encoded:u}=i[o];l?e+=32:e+=Dr(u)}let t=[],r=[],s=0;for(let o=0;o<i.length;o++){let{dynamic:l,encoded:u}=i[o];l?(t.push(yr(e+s,{size:32})),r.push(u),s+=Dr(u)):t.push(u)}return wn(...t,...r)}function F6(i,e){let{checksum:t=!1}=e;return Jc(i,{strict:t}),{dynamic:!1,encoded:wo(i.toLowerCase())}}function P6(i,e){let{checksumAddress:t,length:r,parameter:s}=e,o=r===null;if(!Array.isArray(i))throw new Qy(i);if(!o&&i.length!==r)throw new Yy({expectedLength:r,givenLength:i.length,type:`${s.type}[${r}]`});let l=!1,u=[];for(let p=0;p<i.length;p++){let h=CS({checksumAddress:t,parameter:s,value:i[p]});h.dynamic&&(l=!0),u.push(h)}if(o||l){let p=qy(u);if(o){let h=yr(u.length,{size:32});return{dynamic:!0,encoded:u.length>0?wn(h,p):h}}if(l)return{dynamic:!0,encoded:p}}return{dynamic:!1,encoded:wn(...u.map(({encoded:p})=>p))}}function U6(i,{type:e}){let[,t]=e.split("bytes"),r=Dr(i);if(!t){let s=i;return r%32!==0&&(s=Qs(s,Math.ceil((i.length-2)/2/32)*32)),{dynamic:!0,encoded:wn(wo(yr(r,{size:32})),s)}}if(r!==Number.parseInt(t))throw new Vh({expectedSize:Number.parseInt(t),value:i});return{dynamic:!1,encoded:Qs(i)}}function H6(i){if(typeof i!="boolean")throw new wi(`Invalid boolean value: "${i}" (type: ${typeof i}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:wo(Fy(i))}}function z6(i,{signed:e,size:t}){if(typeof t=="number"){let r=2n**(BigInt(t)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(i>r||i<s)throw new Gh({max:r.toString(),min:s.toString(),signed:e,size:t/8,value:i.toString()})}return{dynamic:!1,encoded:yr(i,{size:32,signed:e})}}function j6(i){let e=Qc(i),t=Math.ceil(Dr(e)/32),r=[];for(let s=0;s<t;s++)r.push(Qs(Xc(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:wn(Qs(yr(Dr(e),{size:32})),...r)}}function G6(i,e){let{checksumAddress:t,parameter:r}=e,s=!1,o=[];for(let l=0;l<r.components.length;l++){let u=r.components[l],p=Array.isArray(i)?l:u.name,h=CS({checksumAddress:t,parameter:u,value:i[p]});o.push(h),h.dynamic&&(s=!0)}return{dynamic:s,encoded:s?qy(o):wn(...o.map(({encoded:l})=>l))}}function W6(i){let e=i.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}var zC=_(()=>{"use strict";Xy();Gy();Ia();_s();TS()});function Zy(i,e,t){let{checksumAddress:r=!1}=t??{};if(i.length!==e.length)throw new Jy({expectedLength:i.length,givenLength:e.length});let s=HC({checksumAddress:r,parameters:i,values:e}),o=qy(s);return o.length===0?"0x":o}function MS(i,e){if(i.length!==e.length)throw new Jy({expectedLength:i.length,givenLength:e.length});let t=[];for(let r=0;r<i.length;r++){let s=i[r],o=e[r];t.push(MS.encode(s,o))}return wn(...t)}var Yy,Vh,Jy,Qy,Kh,Xy=_(()=>{"use strict";Gy();Ia();_s();TS();zC();(function(i){function e(t,r,s=!1){if(t==="address"){let p=r;return Jc(p),wo(p.toLowerCase(),s?32:0)}if(t==="string")return Qc(r);if(t==="bytes")return r;if(t==="bool")return wo(Fy(r),s?32:1);let o=t.match($y);if(o){let[p,h,f="256"]=o,g=Number.parseInt(f)/8;return yr(r,{size:s?32:g,signed:h==="int"})}let l=t.match(UC);if(l){let[p,h]=l;if(Number.parseInt(h)!==(r.length-2)/2)throw new Vh({expectedSize:Number.parseInt(h),value:r});return Qs(r,s?32:0)}let u=t.match(PC);if(u&&Array.isArray(r)){let[p,h]=u,f=[];for(let g=0;g<r.length;g++)f.push(e(h,r[g],!0));return f.length===0?"0x":wn(...f)}throw new Kh(t)}i.encode=e})(MS||(MS={}));Yy=class extends wi{constructor({expectedLength:e,givenLength:t,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},Vh=class extends wi{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Dr(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},Jy=class extends wi{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${t}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},Qy=class extends wi{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},Kh=class extends wi{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}});function jC(i,e){let{bytecode:t,args:r}=e;return wn(t,i.inputs?.length&&r?.length?Zy(i.inputs,r):"0x")}function GC(i){return Ky(i)}var WC=_(()=>{"use strict";LS();Xy();_s()});function VC(i,...e){let{overloads:t}=i,r=t?q6([i,...t],i.name,{args:e[0]}):i,s=Y6(r),o=e.length>0?Zy(r.inputs,e[0]):void 0;return o?wn(s,o):s}function bl(i,e={}){return Ky(i,e)}function q6(i,e,t){let r=OC(i,e,t);if(r.type!=="function")throw new gl({name:e,type:"function"});return r}function Y6(i){return ES(i)}var KC=_(()=>{"use strict";LS();Xy();_s()});var $C,xs,qC=_(()=>{"use strict";$C="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",xs="0x0000000000000000000000000000000000000000"});async function YC(i,e){let{blockNumber:t,blockTag:r,calls:s,stateOverrides:o,traceAssetChanges:l,traceTransfers:u,validation:p}=e,h=e.account?ai(e.account):void 0;if(l&&!h)throw new X("`account` is required when `traceAssetChanges` is true");let f=h?jC(GC("constructor(bytes, bytes)"),{bytecode:jb,args:[X6,VC(bl("function getBalance(address)"),[h.address])]}):void 0,g=l?await Promise.all(e.calls.map(async Ee=>{if(!Ee.data&&!Ee.abi)return;let{accessList:gt}=await gy(i,{account:h.address,...Ee,data:Ee.abi?$i(Ee):Ee.data});return gt.map(({address:pi,storageKeys:gi})=>gi.length>0?pi:null)})).then(Ee=>Ee.flat().filter(Boolean)):[],b=o?.map(Ee=>Ee.address===h?.address?{...Ee,nonce:0}:Ee),v=await Wh(i,{blockNumber:t,blockTag:r,blocks:[...l?[{calls:[{data:f}],stateOverrides:o},{calls:g.map((Ee,gt)=>({abi:[bl("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[h.address],to:Ee,from:xs,nonce:gt})),stateOverrides:[{address:xs,nonce:0}]}]:[],{calls:[...s,{}].map((Ee,gt)=>({...Ee,from:h?.address,nonce:gt})),stateOverrides:b},...l?[{calls:[{data:f}]},{calls:g.map((Ee,gt)=>({abi:[bl("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[h.address],to:Ee,from:xs,nonce:gt})),stateOverrides:[{address:xs,nonce:0}]},{calls:g.map((Ee,gt)=>({to:Ee,abi:[bl("function decimals() returns (uint256)")],functionName:"decimals",from:xs,nonce:gt})),stateOverrides:[{address:xs,nonce:0}]},{calls:g.map((Ee,gt)=>({to:Ee,abi:[bl("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:xs,nonce:gt})),stateOverrides:[{address:xs,nonce:0}]},{calls:g.map((Ee,gt)=>({to:Ee,abi:[bl("function symbol() returns (string)")],functionName:"symbol",from:xs,nonce:gt})),stateOverrides:[{address:xs,nonce:0}]}]:[]],traceTransfers:u,validation:p}),w=l?v[2]:v[0],[k,E,,F,O,H,Y,Z]=l?v:[],{calls:W,...le}=w,oe=W.slice(0,-1)??[],de=k?.calls??[],Ne=E?.calls??[],He=[...de,...Ne].map(Ee=>Ee.status==="success"?Ki(Ee.data):null),Qe=F?.calls??[],Xt=O?.calls??[],Me=[...Qe,...Xt].map(Ee=>Ee.status==="success"?Ki(Ee.data):null),_e=(H?.calls??[]).map(Ee=>Ee.status==="success"?Ee.result:null),Le=(Z?.calls??[]).map(Ee=>Ee.status==="success"?Ee.result:null),P=(Y?.calls??[]).map(Ee=>Ee.status==="success"?Ee.result:null),nt=[];for(let[Ee,gt]of Me.entries()){let pi=He[Ee];if(typeof gt!="bigint"||typeof pi!="bigint")continue;let gi=_e[Ee-1],Si=Le[Ee-1],st=P[Ee-1],Oi=(()=>Ee===0?{address:$C,decimals:18,symbol:"ETH"}:{address:g[Ee-1],decimals:st||gi?Number(gi??1):void 0,symbol:Si??void 0})();nt.some(Mr=>Mr.token.address===Oi.address)||nt.push({token:Oi,value:{pre:pi,post:gt,diff:gt-pi}})}return{assetChanges:nt,block:le,results:oe}}var X6,QC=_(()=>{"use strict";WC();KC();Sr();qC();Gb();ni();Kn();Ty();tS();_S();X6="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033"});function XC({r:i,s:e,to:t="hex",v:r,yParity:s}){let o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),l=`0x${new xo.Signature(Ki(i),Ki(e)).toCompactHex()}${o===0?"1b":"1c"}`;return t==="hex"?l:Ir(l)}var JC=_(()=>{"use strict";db();Yr();Br()});async function eu(i,e){let{address:t,factory:r,factoryData:s,hash:o,signature:l,universalSignatureVerifierAddress:u=i.chain?.contracts?.universalSignatureVerifier?.address,...p}=e,h=(()=>hr(l)?l:typeof l=="object"&&"r"in l&&"s"in l?XC(l):di(l))(),f=await(async()=>!r&&!s||Q2(h)?h:J2({address:r,data:s,signature:h}))();try{let g=u?{to:u,data:$i({abi:NI,functionName:"isValidSig",args:[t,o,f]}),...p}:{data:hl({abi:NI,args:[t,o,f],bytecode:mT}),...p},{data:b}=await Ge(i,Ks,"call")(g);return Lv(b??"0x0")}catch(g){try{if(Vs(Eg(t),await mb({hash:o,signature:l})))return!0}catch{}if(g instanceof tc)return!1;throw g}}var e0=_(()=>{"use strict";cl();Gb();Xo();Kb();ja();Dc();as();vt();Ui();Ty();X2();bI();Z2();JC();Pc()});async function ZC(i,{address:e,message:t,factory:r,factoryData:s,signature:o,...l}){let u=ky(t);return eu(i,{address:e,factory:r,factoryData:s,hash:u,signature:o,...l})}var eA=_(()=>{"use strict";cS();e0()});async function tA(i,e){let{address:t,factory:r,factoryData:s,signature:o,message:l,primaryType:u,types:p,domain:h,...f}=e,g=C2({message:l,primaryType:u,types:p,domain:h});return eu(i,{address:t,factory:r,factoryData:s,hash:g,signature:o,...f})}var iA=_(()=>{"use strict";D2();e0()});function t0(i,{emitOnBegin:e=!1,emitMissed:t=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:l=i.pollingInterval}){let u=(()=>typeof o<"u"?o:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))(),p;return u?(()=>{let g=mi(["watchBlockNumber",i.uid,e,t,l]);return Sn(g,{onBlockNumber:r,onError:s},b=>$s(async()=>{try{let v=await Ge(i,qs,"getBlockNumber")({cacheTime:0});if(p){if(v===p)return;if(v-p>1&&t)for(let w=p+1n;w<v;w++)b.onBlockNumber(w,p),p=w}(!p||v>p)&&(b.onBlockNumber(v,p),p=v)}catch(v){b.onError?.(v)}},{emitOnBegin:e,interval:l}))})():(()=>{let g=mi(["watchBlockNumber",i.uid,e,t]);return Sn(g,{onBlockNumber:r,onError:s},b=>{let v=!0,w=()=>v=!1;return(async()=>{try{let k=(()=>{if(i.transport.type==="fallback"){let F=i.transport.transports.find(O=>O.config.type==="webSocket");return F?F.value:i.transport}return i.transport})(),{unsubscribe:E}=await k.subscribe({params:["newHeads"],onData(F){if(!v)return;let O=Ki(F.result?.number);b.onBlockNumber(O,p),p=O},onError(F){b.onError?.(F)}});w=E,v||w()}catch(k){s?.(k)}})(),()=>w()})})()}var RS=_(()=>{"use strict";Yr();Ui();ml();Uc();hn();Hc()});async function rA(i,{confirmations:e=1,hash:t,onReplaced:r,pollingInterval:s=i.pollingInterval,retryCount:o=6,retryDelay:l=({count:p})=>~~(1<<p)*200,timeout:u=18e4}){let p=mi(["waitForTransactionReceipt",i.uid,t]),h,f,g,b=!1,{promise:v,resolve:w,reject:k}=qb(),E=u?setTimeout(()=>k(new Kg({hash:t})),u):void 0,F=Sn(p,{onReplaced:r,resolve:w,reject:k},O=>{let H=Ge(i,t0,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(Y){let Z=le=>{clearTimeout(E),H(),le(),F()},W=Y;if(!b)try{if(g){if(e>1&&(!g.blockNumber||W-g.blockNumber+1n<e))return;Z(()=>O.resolve(g));return}if(h||(b=!0,await Oh(async()=>{h=await Ge(i,qc,"getTransaction")({hash:t}),h.blockNumber&&(W=h.blockNumber)},{delay:l,retryCount:o}),b=!1),g=await Ge(i,Hh,"getTransactionReceipt")({hash:t}),e>1&&(!g.blockNumber||W-g.blockNumber+1n<e))return;Z(()=>O.resolve(g))}catch(le){if(le instanceof Zl||le instanceof ec){if(!h){b=!1;return}try{f=h,b=!0;let oe=await Oh(()=>Ge(i,Zr,"getBlock")({blockNumber:W,includeTransactions:!0}),{delay:l,retryCount:o,shouldRetry:({error:He})=>He instanceof Lc});b=!1;let de=oe.transactions.find(({from:He,nonce:Qe})=>He===f.from&&Qe===f.nonce);if(!de||(g=await Ge(i,Hh,"getTransactionReceipt")({hash:de.hash}),e>1&&(!g.blockNumber||W-g.blockNumber+1n<e)))return;let Ne="replaced";de.to===f.to&&de.value===f.value&&de.input===f.input?Ne="repriced":de.from===de.to&&de.value===0n&&(Ne="cancelled"),Z(()=>{O.onReplaced?.({reason:Ne,replacedTransaction:f,transaction:de,transactionReceipt:g}),O.resolve(g)})}catch(oe){Z(()=>O.reject(oe))}}else Z(()=>O.reject(le))}}})});return v}var nA=_(()=>{"use strict";xI();fs();Ui();ml();PI();$I();hn();al();Cy();hS();RS()});function sA(i,{blockTag:e="latest",emitMissed:t=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:l,poll:u,pollingInterval:p=i.pollingInterval}){let h=(()=>typeof u<"u"?u:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))(),f=l??!1,g;return h?(()=>{let w=mi(["watchBlocks",i.uid,e,t,r,f,p]);return Sn(w,{onBlock:s,onError:o},k=>$s(async()=>{try{let E=await Ge(i,Zr,"getBlock")({blockTag:e,includeTransactions:f});if(E.number&&g?.number){if(E.number===g.number)return;if(E.number-g.number>1&&t)for(let F=g?.number+1n;F<E.number;F++){let O=await Ge(i,Zr,"getBlock")({blockNumber:F,includeTransactions:f});k.onBlock(O,g),g=O}}(!g?.number||e==="pending"&&!E?.number||E.number&&E.number>g.number)&&(k.onBlock(E,g),g=E)}catch(E){k.onError?.(E)}},{emitOnBegin:r,interval:p}))})():(()=>{let w=!0,k=!0,E=()=>w=!1;return(async()=>{try{r&&Ge(i,Zr,"getBlock")({blockTag:e,includeTransactions:f}).then(H=>{w&&k&&(s(H,void 0),k=!1)});let F=(()=>{if(i.transport.type==="fallback"){let H=i.transport.transports.find(Y=>Y.config.type==="webSocket");return H?H.value:i.transport}return i.transport})(),{unsubscribe:O}=await F.subscribe({params:["newHeads"],async onData(H){if(!w)return;let Y=await Ge(i,Zr,"getBlock")({blockNumber:H.blockNumber,includeTransactions:f}).catch(()=>{});w&&(s(Y,g),k=!1,g=Y)},onError(H){o?.(H)}});E=O,w||E()}catch(F){o?.(F)}})(),()=>E()})()}var oA=_(()=>{"use strict";Ui();ml();Uc();hn();al()});function aA(i,{address:e,args:t,batch:r=!0,event:s,events:o,fromBlock:l,onError:u,onLogs:p,poll:h,pollingInterval:f=i.pollingInterval,strict:g}){let b=(()=>typeof h<"u"?h:typeof l=="bigint"?!0:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))(),v=g??!1;return b?(()=>{let E=mi(["watchEvent",e,t,r,i.uid,s,f,l]);return Sn(E,{onLogs:p,onError:u},F=>{let O;l!==void 0&&(O=l-1n);let H,Y=!1,Z=$s(async()=>{if(!Y){try{H=await Ge(i,by,"createEventFilter")({address:e,args:t,event:s,events:o,strict:v,fromBlock:l})}catch{}Y=!0;return}try{let W;if(H)W=await Ge(i,ga,"getFilterChanges")({filter:H});else{let le=await Ge(i,qs,"getBlockNumber")({});O&&O!==le?W=await Ge(i,Fc,"getLogs")({address:e,args:t,event:s,events:o,fromBlock:O+1n,toBlock:le}):W=[],O=le}if(W.length===0)return;if(r)F.onLogs(W);else for(let le of W)F.onLogs([le])}catch(W){H&&W instanceof zs&&(Y=!1),F.onError?.(W)}},{emitOnBegin:!0,interval:f});return async()=>{H&&await Ge(i,ba,"uninstallFilter")({filter:H}),Z()}})})():(()=>{let E=!0,F=()=>E=!1;return(async()=>{try{let O=(()=>{if(i.transport.type==="fallback"){let W=i.transport.transports.find(le=>le.config.type==="webSocket");return W?W.value:i.transport}return i.transport})(),H=o??(s?[s]:void 0),Y=[];H&&(Y=[H.flatMap(le=>Ps({abi:[le],eventName:le.name,args:t}))],s&&(Y=Y[0]));let{unsubscribe:Z}=await O.subscribe({params:["logs",{address:e,topics:Y}],onData(W){if(!E)return;let le=W.result;try{let{eventName:oe,args:de}=Nc({abi:H??[],data:le.data,topics:le.topics,strict:v}),Ne=en(le,{args:de,eventName:oe});p([Ne])}catch(oe){let de,Ne;if(oe instanceof cs||oe instanceof Ds){if(g)return;de=oe.abiItem.name,Ne=oe.abiItem.inputs?.some(Qe=>!("name"in Qe&&Qe.name))}let He=en(le,{args:Ne?[]:{},eventName:de});p([He])}},onError(W){u?.(W)}});F=Z,E||F()}catch(O){u?.(O)}})(),()=>F()})()}var lA=_(()=>{"use strict";$l();ml();Uc();hn();vr();bh();Fb();ma();Ui();iS();Hc();Dh();Ub();Nh()});function cA(i,{batch:e=!0,onError:t,onTransactions:r,poll:s,pollingInterval:o=i.pollingInterval}){return(typeof s<"u"?s:i.transport.type!=="webSocket")?(()=>{let h=mi(["watchPendingTransactions",i.uid,e,o]);return Sn(h,{onTransactions:r,onError:t},f=>{let g,b=$s(async()=>{try{if(!g)try{g=await Ge(i,yy,"createPendingTransactionFilter")({});return}catch(w){throw b(),w}let v=await Ge(i,ga,"getFilterChanges")({filter:g});if(v.length===0)return;if(e)f.onTransactions(v);else for(let w of v)f.onTransactions([w])}catch(v){f.onError?.(v)}},{emitOnBegin:!0,interval:o});return async()=>{g&&await Ge(i,ba,"uninstallFilter")({filter:g}),b()}})})():(()=>{let h=!0,f=()=>h=!1;return(async()=>{try{let{unsubscribe:g}=await i.transport.subscribe({params:["newPendingTransactions"],onData(b){if(!h)return;let v=b.result;r([v])},onError(b){t?.(b)}});f=g,h||f()}catch(g){t?.(g)}})(),()=>f()})()}var uA=_(()=>{"use strict";Ui();ml();Uc();hn();rS();Dh();Nh()});function pA(i){let{scheme:e,statement:t,...r}=i.match(J6)?.groups??{},{chainId:s,expirationTime:o,issuedAt:l,notBefore:u,requestId:p,...h}=i.match(Z6)?.groups??{},f=i.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...h,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...l?{issuedAt:new Date(l)}:{},...u?{notBefore:new Date(u)}:{},...p?{requestId:p}:{},...f?{resources:f}:{},...e?{scheme:e}:{},...t?{statement:t}:{}}}var J6,Z6,hA=_(()=>{"use strict";J6=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Z6=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/});function dA(i){let{address:e,domain:t,message:r,nonce:s,scheme:o,time:l=new Date}=i;if(t&&r.domain!==t||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&l>=r.expirationTime||r.notBefore&&l<r.notBefore)return!1;try{if(!r.address||e&&!Vs(r.address,e))return!1}catch{return!1}return!0}var mA=_(()=>{"use strict";Dc()});async function fA(i,e){let{address:t,domain:r,message:s,nonce:o,scheme:l,signature:u,time:p=new Date,...h}=e,f=pA(s);if(!f.address||!dA({address:t,domain:r,message:f,nonce:o,scheme:l,time:p}))return!1;let b=ky(s);return eu(i,{address:f.address,hash:b,signature:u,...h})}var gA=_(()=>{"use strict";cS();hA();mA();e0()});function bA(i){return{call:e=>Ks(i,e),createAccessList:e=>gy(i,e),createBlockFilter:()=>f2(i),createContractEventFilter:e=>Ag(i,e),createEventFilter:e=>by(i,e),createPendingTransactionFilter:()=>yy(i),estimateContractGas:e=>oT(i,e),estimateGas:e=>Bc(i,e),getBalance:e=>Ob(i,e),getBlobBaseFee:()=>b2(i),getBlock:e=>Zr(i,e),getBlockNumber:e=>qs(i,e),getBlockTransactionCount:e=>_2(i,e),getBytecode:e=>nS(i,e),getChainId:()=>Jn(i),getCode:e=>nS(i,e),getContractEvents:e=>Hb(i,e),getEip712Domain:e=>BT(i,e),getEnsAddress:e=>ZT(i,e),getEnsAvatar:e=>c2(i,e),getEnsName:e=>p2(i,e),getEnsResolver:e=>d2(i,e),getEnsText:e=>fy(i,e),getFeeHistory:e=>w2(i,e),estimateFeesPerGas:e=>JL(i,e),getFilterChanges:e=>ga(i,e),getFilterLogs:e=>E2(i,e),getGasPrice:()=>Tc(i),getLogs:e=>Fc(i,e),getProof:e=>nC(i,e),estimateMaxPriorityFeePerGas:e=>XL(i,e),getStorageAt:e=>oC(i,e),getTransaction:e=>qc(i,e),getTransactionConfirmations:e=>lC(i,e),getTransactionCount:e=>Cc(i,e),getTransactionReceipt:e=>Hh(i,e),multicall:e=>uC(i,e),prepareTransactionRequest:e=>da(i,e),readContract:e=>Ur(i,e),sendRawTransaction:e=>zc(i,e),simulate:e=>Wh(i,e),simulateBlocks:e=>Wh(i,e),simulateCalls:e=>YC(i,e),simulateContract:e=>xT(i,e),verifyMessage:e=>ZC(i,e),verifySiweMessage:e=>fA(i,e),verifyTypedData:e=>tA(i,e),uninstallFilter:e=>ba(i,e),waitForTransactionReceipt:e=>rA(i,e),watchBlocks:e=>sA(i,e),watchBlockNumber:e=>t0(i,e),watchContractEvent:e=>ET(i,e),watchEvent:e=>aA(i,e),watchPendingTransactions:e=>cA(i,e)}}var yA=_(()=>{"use strict";e2();u2();h2();m2();eS();Pc();tS();g2();Hv();iS();rS();aT();wI();Nb();SI();AI();y2();al();Hc();x2();ll();v2();MI();DT();k2();Dh();L2();wb();Ub();sC();aC();Cy();cC();Eb();hS();pC();Io();_S();QC();vT();Nh();eA();iA();nA();RS();oA();LT();lA();uA();gA();Ch();ey()});function $h(i){let{key:e="public",name:t="Public Client"}=i;return oy({...i,key:e,name:t,type:"publicClient"}).extend(bA)}var _A=_(()=>{"use strict";KI();yA()});function xA(i,e){let{abi:t,args:r,bytecode:s,...o}=e,l=hl({abi:t,args:r,bytecode:s});return jc(i,{...o,...o.authorizationList?{to:null}:{},data:l})}var vA=_(()=>{"use strict";Kb();ty()});async function IA(i){return i.account?.type==="local"?[i.account.address]:(await i.request({method:"eth_accounts"},{dedupe:!0})).map(t=>fo(t))}var SA=_(()=>{"use strict";ja()});async function wA(i){return await i.request({method:"wallet_getPermissions"},{dedupe:!0})}var kA=_(()=>{"use strict"});async function i0(i,e){let{account:t=i.account,chainId:r,nonce:s}=e;if(!t)throw new tn({docsPath:"/docs/eip7702/prepareAuthorization"});let o=ai(t),l=(()=>{if(e.executor)return e.executor==="self"?e.executor:ai(e.executor)})(),u={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof u.chainId>"u"&&(u.chainId=i.chain?.id??await Ge(i,Jn,"getChainId")({})),typeof u.nonce>"u"&&(u.nonce=await Ge(i,Cc,"getTransactionCount")({address:o.address,blockTag:"pending"}),(l==="self"||l?.address&&Vs(l.address,o.address))&&(u.nonce+=1)),u}var BS=_(()=>{"use strict";Sr();_a();Dc();Ui();ll();Eb()});async function EA(i){return(await i.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(t=>Eg(t))}var LA=_(()=>{"use strict";ja()});async function TA(i,e){return i.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}var CA=_(()=>{"use strict"});async function AA(i,e){let{account:t=i.account}=e;if(!t)throw new tn({docsPath:"/docs/eip7702/signAuthorization"});let r=ai(t);if(!r.signAuthorization)throw new ya({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});let s=await i0(i,e);return r.signAuthorization(s)}var MA=_(()=>{"use strict";Sr();_a();BS()});async function RA(i,{account:e=i.account,message:t}){if(!e)throw new tn({docsPath:"/docs/actions/wallet/signMessage"});let r=ai(e);if(r.signMessage)return r.signMessage({message:t});let s=(()=>typeof t=="string"?us(t):t.raw instanceof Uint8Array?tt(t.raw):t.raw)();return i.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}var BA=_(()=>{"use strict";Sr();_a();vt()});async function DA(i,e){let{account:t=i.account,chain:r=i.chain,...s}=e;if(!t)throw new tn({docsPath:"/docs/actions/wallet/signTransaction"});let o=ai(t);vn({account:o,...e});let l=await Ge(i,Jn,"getChainId")({});r!==null&&Zb({currentChainId:l,chain:r});let p=(r?.formatters||i.chain?.formatters)?.transactionRequest?.format||Xn;return o.signTransaction?o.signTransaction({...s,chainId:l},{serializer:i.chain?.serializers?.transaction}):await i.request({method:"eth_signTransaction",params:[{...p(s),chainId:Ve(l),from:o.address}]},{retryCount:0})}var NA=_(()=>{"use strict";Sr();_a();GI();vt();sl();Ui();pa();ll()});async function OA(i,e){let{account:t=i.account,domain:r,message:s,primaryType:o}=e;if(!t)throw new tn({docsPath:"/docs/actions/wallet/signTypedData"});let l=ai(t),u={EIP712Domain:Sy({domain:r}),...e.types};if(Iy({domain:r,message:s,primaryType:o,types:u}),l.signTypedData)return l.signTypedData({domain:r,message:s,primaryType:o,types:u});let p=N2({domain:r,message:s,primaryType:o,types:u});return i.request({method:"eth_signTypedData_v4",params:[l.address,p]},{retryCount:0})}var FA=_(()=>{"use strict";Sr();_a();sS()});async function PA(i,{id:e}){await i.request({method:"wallet_switchEthereumChain",params:[{chainId:Ve(e)}]},{retryCount:0})}var UA=_(()=>{"use strict";vt()});async function HA(i,e){return await i.request({method:"wallet_watchAsset",params:e},{retryCount:0})}var zA=_(()=>{"use strict"});function jA(i){return{addChain:e=>NT(i,e),deployContract:e=>xA(i,e),getAddresses:()=>IA(i),getChainId:()=>Jn(i),getPermissions:()=>wA(i),prepareAuthorization:e=>i0(i,e),prepareTransactionRequest:e=>da(i,e),requestAddresses:()=>EA(i),requestPermissions:e=>TA(i,e),sendRawTransaction:e=>zc(i,e),sendTransaction:e=>jc(i,e),signAuthorization:e=>AA(i,e),signMessage:e=>RA(i,e),signTransaction:e=>DA(i,e),signTypedData:e=>OA(i,e),switchChain:e=>PA(i,e),watchAsset:e=>HA(i,e),writeContract:e=>AT(i,e)}}var GA=_(()=>{"use strict";ll();OT();vA();SA();kA();BS();Ch();LA();CA();ey();ty();MA();BA();NA();FA();UA();zA();MT()});function tu(i){let{key:e="wallet",name:t="Wallet Client",transport:r}=i;return oy({...i,key:e,name:t,transport:r,type:"walletClient"}).extend(jA)}var WA=_(()=>{"use strict";KI();GA()});var r0=_(()=>{"use strict";zT();qT();_A();WA();vt();Fg();tC()});function qh(){return tt(xo.utils.randomPrivateKey())}var VA=_(()=>{"use strict";db();vt()});var KA=_(()=>{"use strict";VA()});var qA=lf(($A,n0)=>{"use strict";(function(i,e){"use strict";typeof n0<"u"&&n0.exports?n0.exports=e():(i.nacl||(i.nacl={}),i.nacl.util=e())})($A,function(){"use strict";var i={};function e(t){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t))throw new TypeError("invalid encoding")}return i.decodeUTF8=function(t){if(typeof t!="string")throw new TypeError("expected string");var r,s=unescape(encodeURIComponent(t)),o=new Uint8Array(s.length);for(r=0;r<s.length;r++)o[r]=s.charCodeAt(r);return o},i.encodeUTF8=function(t){var r,s=[];for(r=0;r<t.length;r++)s.push(String.fromCharCode(t[r]));return decodeURIComponent(escape(s.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(i.encodeBase64=function(t){return Buffer.from(t).toString("base64")},i.decodeBase64=function(t){return e(t),new Uint8Array(Array.prototype.slice.call(Buffer.from(t,"base64"),0))}):(i.encodeBase64=function(t){return new Buffer(t).toString("base64")},i.decodeBase64=function(t){return e(t),new Uint8Array(Array.prototype.slice.call(new Buffer(t,"base64"),0))}):(i.encodeBase64=function(t){var r,s=[],o=t.length;for(r=0;r<o;r++)s.push(String.fromCharCode(t[r]));return btoa(s.join(""))},i.decodeBase64=function(t){e(t);var r,s=atob(t),o=new Uint8Array(s.length);for(r=0;r<s.length;r++)o[r]=s.charCodeAt(r);return o}),i})});var YA=lf((vre,s0)=>{"use strict";(function(i){"use strict";var e=function(y){var S,I=new Float64Array(16);if(y)for(S=0;S<y.length;S++)I[S]=y[S];return I},t=function(){throw new Error("no PRNG")},r=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=e(),l=e([1]),u=e([56129,1]),p=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),g=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),b=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function v(y,S,I,m){y[S]=I>>24&255,y[S+1]=I>>16&255,y[S+2]=I>>8&255,y[S+3]=I&255,y[S+4]=m>>24&255,y[S+5]=m>>16&255,y[S+6]=m>>8&255,y[S+7]=m&255}function w(y,S,I,m,T){var $,Q=0;for($=0;$<T;$++)Q|=y[S+$]^I[m+$];return(1&Q-1>>>8)-1}function k(y,S,I,m){return w(y,S,I,m,16)}function E(y,S,I,m){return w(y,S,I,m,32)}function F(y,S,I,m){for(var T=m[0]&255|(m[1]&255)<<8|(m[2]&255)<<16|(m[3]&255)<<24,$=I[0]&255|(I[1]&255)<<8|(I[2]&255)<<16|(I[3]&255)<<24,Q=I[4]&255|(I[5]&255)<<8|(I[6]&255)<<16|(I[7]&255)<<24,he=I[8]&255|(I[9]&255)<<8|(I[10]&255)<<16|(I[11]&255)<<24,Ce=I[12]&255|(I[13]&255)<<8|(I[14]&255)<<16|(I[15]&255)<<24,ct=m[4]&255|(m[5]&255)<<8|(m[6]&255)<<16|(m[7]&255)<<24,qe=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,li=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,Xe=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,kt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,Lt=m[8]&255|(m[9]&255)<<8|(m[10]&255)<<16|(m[11]&255)<<24,Ut=I[16]&255|(I[17]&255)<<8|(I[18]&255)<<16|(I[19]&255)<<24,Ft=I[20]&255|(I[21]&255)<<8|(I[22]&255)<<16|(I[23]&255)<<24,Tt=I[24]&255|(I[25]&255)<<8|(I[26]&255)<<16|(I[27]&255)<<24,Bt=I[28]&255|(I[29]&255)<<8|(I[30]&255)<<16|(I[31]&255)<<24,St=m[12]&255|(m[13]&255)<<8|(m[14]&255)<<16|(m[15]&255)<<24,Je=T,ut=$,Ye=Q,Ze=he,ot=Ce,je=ct,ee=qe,te=li,be=Xe,ce=kt,ue=Lt,Se=Ut,dt=Ft,Dt=Tt,Pt=Bt,Nt=St,N,Ht=0;Ht<20;Ht+=2)N=Je+dt|0,ot^=N<<7|N>>>32-7,N=ot+Je|0,be^=N<<9|N>>>32-9,N=be+ot|0,dt^=N<<13|N>>>32-13,N=dt+be|0,Je^=N<<18|N>>>32-18,N=je+ut|0,ce^=N<<7|N>>>32-7,N=ce+je|0,Dt^=N<<9|N>>>32-9,N=Dt+ce|0,ut^=N<<13|N>>>32-13,N=ut+Dt|0,je^=N<<18|N>>>32-18,N=ue+ee|0,Pt^=N<<7|N>>>32-7,N=Pt+ue|0,Ye^=N<<9|N>>>32-9,N=Ye+Pt|0,ee^=N<<13|N>>>32-13,N=ee+Ye|0,ue^=N<<18|N>>>32-18,N=Nt+Se|0,Ze^=N<<7|N>>>32-7,N=Ze+Nt|0,te^=N<<9|N>>>32-9,N=te+Ze|0,Se^=N<<13|N>>>32-13,N=Se+te|0,Nt^=N<<18|N>>>32-18,N=Je+Ze|0,ut^=N<<7|N>>>32-7,N=ut+Je|0,Ye^=N<<9|N>>>32-9,N=Ye+ut|0,Ze^=N<<13|N>>>32-13,N=Ze+Ye|0,Je^=N<<18|N>>>32-18,N=je+ot|0,ee^=N<<7|N>>>32-7,N=ee+je|0,te^=N<<9|N>>>32-9,N=te+ee|0,ot^=N<<13|N>>>32-13,N=ot+te|0,je^=N<<18|N>>>32-18,N=ue+ce|0,Se^=N<<7|N>>>32-7,N=Se+ue|0,be^=N<<9|N>>>32-9,N=be+Se|0,ce^=N<<13|N>>>32-13,N=ce+be|0,ue^=N<<18|N>>>32-18,N=Nt+Pt|0,dt^=N<<7|N>>>32-7,N=dt+Nt|0,Dt^=N<<9|N>>>32-9,N=Dt+dt|0,Pt^=N<<13|N>>>32-13,N=Pt+Dt|0,Nt^=N<<18|N>>>32-18;Je=Je+T|0,ut=ut+$|0,Ye=Ye+Q|0,Ze=Ze+he|0,ot=ot+Ce|0,je=je+ct|0,ee=ee+qe|0,te=te+li|0,be=be+Xe|0,ce=ce+kt|0,ue=ue+Lt|0,Se=Se+Ut|0,dt=dt+Ft|0,Dt=Dt+Tt|0,Pt=Pt+Bt|0,Nt=Nt+St|0,y[0]=Je>>>0&255,y[1]=Je>>>8&255,y[2]=Je>>>16&255,y[3]=Je>>>24&255,y[4]=ut>>>0&255,y[5]=ut>>>8&255,y[6]=ut>>>16&255,y[7]=ut>>>24&255,y[8]=Ye>>>0&255,y[9]=Ye>>>8&255,y[10]=Ye>>>16&255,y[11]=Ye>>>24&255,y[12]=Ze>>>0&255,y[13]=Ze>>>8&255,y[14]=Ze>>>16&255,y[15]=Ze>>>24&255,y[16]=ot>>>0&255,y[17]=ot>>>8&255,y[18]=ot>>>16&255,y[19]=ot>>>24&255,y[20]=je>>>0&255,y[21]=je>>>8&255,y[22]=je>>>16&255,y[23]=je>>>24&255,y[24]=ee>>>0&255,y[25]=ee>>>8&255,y[26]=ee>>>16&255,y[27]=ee>>>24&255,y[28]=te>>>0&255,y[29]=te>>>8&255,y[30]=te>>>16&255,y[31]=te>>>24&255,y[32]=be>>>0&255,y[33]=be>>>8&255,y[34]=be>>>16&255,y[35]=be>>>24&255,y[36]=ce>>>0&255,y[37]=ce>>>8&255,y[38]=ce>>>16&255,y[39]=ce>>>24&255,y[40]=ue>>>0&255,y[41]=ue>>>8&255,y[42]=ue>>>16&255,y[43]=ue>>>24&255,y[44]=Se>>>0&255,y[45]=Se>>>8&255,y[46]=Se>>>16&255,y[47]=Se>>>24&255,y[48]=dt>>>0&255,y[49]=dt>>>8&255,y[50]=dt>>>16&255,y[51]=dt>>>24&255,y[52]=Dt>>>0&255,y[53]=Dt>>>8&255,y[54]=Dt>>>16&255,y[55]=Dt>>>24&255,y[56]=Pt>>>0&255,y[57]=Pt>>>8&255,y[58]=Pt>>>16&255,y[59]=Pt>>>24&255,y[60]=Nt>>>0&255,y[61]=Nt>>>8&255,y[62]=Nt>>>16&255,y[63]=Nt>>>24&255}function O(y,S,I,m){for(var T=m[0]&255|(m[1]&255)<<8|(m[2]&255)<<16|(m[3]&255)<<24,$=I[0]&255|(I[1]&255)<<8|(I[2]&255)<<16|(I[3]&255)<<24,Q=I[4]&255|(I[5]&255)<<8|(I[6]&255)<<16|(I[7]&255)<<24,he=I[8]&255|(I[9]&255)<<8|(I[10]&255)<<16|(I[11]&255)<<24,Ce=I[12]&255|(I[13]&255)<<8|(I[14]&255)<<16|(I[15]&255)<<24,ct=m[4]&255|(m[5]&255)<<8|(m[6]&255)<<16|(m[7]&255)<<24,qe=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,li=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,Xe=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,kt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,Lt=m[8]&255|(m[9]&255)<<8|(m[10]&255)<<16|(m[11]&255)<<24,Ut=I[16]&255|(I[17]&255)<<8|(I[18]&255)<<16|(I[19]&255)<<24,Ft=I[20]&255|(I[21]&255)<<8|(I[22]&255)<<16|(I[23]&255)<<24,Tt=I[24]&255|(I[25]&255)<<8|(I[26]&255)<<16|(I[27]&255)<<24,Bt=I[28]&255|(I[29]&255)<<8|(I[30]&255)<<16|(I[31]&255)<<24,St=m[12]&255|(m[13]&255)<<8|(m[14]&255)<<16|(m[15]&255)<<24,Je=T,ut=$,Ye=Q,Ze=he,ot=Ce,je=ct,ee=qe,te=li,be=Xe,ce=kt,ue=Lt,Se=Ut,dt=Ft,Dt=Tt,Pt=Bt,Nt=St,N,Ht=0;Ht<20;Ht+=2)N=Je+dt|0,ot^=N<<7|N>>>32-7,N=ot+Je|0,be^=N<<9|N>>>32-9,N=be+ot|0,dt^=N<<13|N>>>32-13,N=dt+be|0,Je^=N<<18|N>>>32-18,N=je+ut|0,ce^=N<<7|N>>>32-7,N=ce+je|0,Dt^=N<<9|N>>>32-9,N=Dt+ce|0,ut^=N<<13|N>>>32-13,N=ut+Dt|0,je^=N<<18|N>>>32-18,N=ue+ee|0,Pt^=N<<7|N>>>32-7,N=Pt+ue|0,Ye^=N<<9|N>>>32-9,N=Ye+Pt|0,ee^=N<<13|N>>>32-13,N=ee+Ye|0,ue^=N<<18|N>>>32-18,N=Nt+Se|0,Ze^=N<<7|N>>>32-7,N=Ze+Nt|0,te^=N<<9|N>>>32-9,N=te+Ze|0,Se^=N<<13|N>>>32-13,N=Se+te|0,Nt^=N<<18|N>>>32-18,N=Je+Ze|0,ut^=N<<7|N>>>32-7,N=ut+Je|0,Ye^=N<<9|N>>>32-9,N=Ye+ut|0,Ze^=N<<13|N>>>32-13,N=Ze+Ye|0,Je^=N<<18|N>>>32-18,N=je+ot|0,ee^=N<<7|N>>>32-7,N=ee+je|0,te^=N<<9|N>>>32-9,N=te+ee|0,ot^=N<<13|N>>>32-13,N=ot+te|0,je^=N<<18|N>>>32-18,N=ue+ce|0,Se^=N<<7|N>>>32-7,N=Se+ue|0,be^=N<<9|N>>>32-9,N=be+Se|0,ce^=N<<13|N>>>32-13,N=ce+be|0,ue^=N<<18|N>>>32-18,N=Nt+Pt|0,dt^=N<<7|N>>>32-7,N=dt+Nt|0,Dt^=N<<9|N>>>32-9,N=Dt+dt|0,Pt^=N<<13|N>>>32-13,N=Pt+Dt|0,Nt^=N<<18|N>>>32-18;y[0]=Je>>>0&255,y[1]=Je>>>8&255,y[2]=Je>>>16&255,y[3]=Je>>>24&255,y[4]=je>>>0&255,y[5]=je>>>8&255,y[6]=je>>>16&255,y[7]=je>>>24&255,y[8]=ue>>>0&255,y[9]=ue>>>8&255,y[10]=ue>>>16&255,y[11]=ue>>>24&255,y[12]=Nt>>>0&255,y[13]=Nt>>>8&255,y[14]=Nt>>>16&255,y[15]=Nt>>>24&255,y[16]=ee>>>0&255,y[17]=ee>>>8&255,y[18]=ee>>>16&255,y[19]=ee>>>24&255,y[20]=te>>>0&255,y[21]=te>>>8&255,y[22]=te>>>16&255,y[23]=te>>>24&255,y[24]=be>>>0&255,y[25]=be>>>8&255,y[26]=be>>>16&255,y[27]=be>>>24&255,y[28]=ce>>>0&255,y[29]=ce>>>8&255,y[30]=ce>>>16&255,y[31]=ce>>>24&255}function H(y,S,I,m){F(y,S,I,m)}function Y(y,S,I,m){O(y,S,I,m)}var Z=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function W(y,S,I,m,T,$,Q){var he=new Uint8Array(16),Ce=new Uint8Array(64),ct,qe;for(qe=0;qe<16;qe++)he[qe]=0;for(qe=0;qe<8;qe++)he[qe]=$[qe];for(;T>=64;){for(H(Ce,he,Q,Z),qe=0;qe<64;qe++)y[S+qe]=I[m+qe]^Ce[qe];for(ct=1,qe=8;qe<16;qe++)ct=ct+(he[qe]&255)|0,he[qe]=ct&255,ct>>>=8;T-=64,S+=64,m+=64}if(T>0)for(H(Ce,he,Q,Z),qe=0;qe<T;qe++)y[S+qe]=I[m+qe]^Ce[qe];return 0}function le(y,S,I,m,T){var $=new Uint8Array(16),Q=new Uint8Array(64),he,Ce;for(Ce=0;Ce<16;Ce++)$[Ce]=0;for(Ce=0;Ce<8;Ce++)$[Ce]=m[Ce];for(;I>=64;){for(H(Q,$,T,Z),Ce=0;Ce<64;Ce++)y[S+Ce]=Q[Ce];for(he=1,Ce=8;Ce<16;Ce++)he=he+($[Ce]&255)|0,$[Ce]=he&255,he>>>=8;I-=64,S+=64}if(I>0)for(H(Q,$,T,Z),Ce=0;Ce<I;Ce++)y[S+Ce]=Q[Ce];return 0}function oe(y,S,I,m,T){var $=new Uint8Array(32);Y($,m,T,Z);for(var Q=new Uint8Array(8),he=0;he<8;he++)Q[he]=m[he+16];return le(y,S,I,Q,$)}function de(y,S,I,m,T,$,Q){var he=new Uint8Array(32);Y(he,$,Q,Z);for(var Ce=new Uint8Array(8),ct=0;ct<8;ct++)Ce[ct]=$[ct+16];return W(y,S,I,m,T,Ce,he)}var Ne=function(y){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var S,I,m,T,$,Q,he,Ce;S=y[0]&255|(y[1]&255)<<8,this.r[0]=S&8191,I=y[2]&255|(y[3]&255)<<8,this.r[1]=(S>>>13|I<<3)&8191,m=y[4]&255|(y[5]&255)<<8,this.r[2]=(I>>>10|m<<6)&7939,T=y[6]&255|(y[7]&255)<<8,this.r[3]=(m>>>7|T<<9)&8191,$=y[8]&255|(y[9]&255)<<8,this.r[4]=(T>>>4|$<<12)&255,this.r[5]=$>>>1&8190,Q=y[10]&255|(y[11]&255)<<8,this.r[6]=($>>>14|Q<<2)&8191,he=y[12]&255|(y[13]&255)<<8,this.r[7]=(Q>>>11|he<<5)&8065,Ce=y[14]&255|(y[15]&255)<<8,this.r[8]=(he>>>8|Ce<<8)&8191,this.r[9]=Ce>>>5&127,this.pad[0]=y[16]&255|(y[17]&255)<<8,this.pad[1]=y[18]&255|(y[19]&255)<<8,this.pad[2]=y[20]&255|(y[21]&255)<<8,this.pad[3]=y[22]&255|(y[23]&255)<<8,this.pad[4]=y[24]&255|(y[25]&255)<<8,this.pad[5]=y[26]&255|(y[27]&255)<<8,this.pad[6]=y[28]&255|(y[29]&255)<<8,this.pad[7]=y[30]&255|(y[31]&255)<<8};Ne.prototype.blocks=function(y,S,I){for(var m=this.fin?0:2048,T,$,Q,he,Ce,ct,qe,li,Xe,kt,Lt,Ut,Ft,Tt,Bt,St,Je,ut,Ye,Ze=this.h[0],ot=this.h[1],je=this.h[2],ee=this.h[3],te=this.h[4],be=this.h[5],ce=this.h[6],ue=this.h[7],Se=this.h[8],dt=this.h[9],Dt=this.r[0],Pt=this.r[1],Nt=this.r[2],N=this.r[3],Ht=this.r[4],si=this.r[5],ti=this.r[6],zt=this.r[7],Jt=this.r[8],ii=this.r[9];I>=16;)T=y[S+0]&255|(y[S+1]&255)<<8,Ze+=T&8191,$=y[S+2]&255|(y[S+3]&255)<<8,ot+=(T>>>13|$<<3)&8191,Q=y[S+4]&255|(y[S+5]&255)<<8,je+=($>>>10|Q<<6)&8191,he=y[S+6]&255|(y[S+7]&255)<<8,ee+=(Q>>>7|he<<9)&8191,Ce=y[S+8]&255|(y[S+9]&255)<<8,te+=(he>>>4|Ce<<12)&8191,be+=Ce>>>1&8191,ct=y[S+10]&255|(y[S+11]&255)<<8,ce+=(Ce>>>14|ct<<2)&8191,qe=y[S+12]&255|(y[S+13]&255)<<8,ue+=(ct>>>11|qe<<5)&8191,li=y[S+14]&255|(y[S+15]&255)<<8,Se+=(qe>>>8|li<<8)&8191,dt+=li>>>5|m,Xe=0,kt=Xe,kt+=Ze*Dt,kt+=ot*(5*ii),kt+=je*(5*Jt),kt+=ee*(5*zt),kt+=te*(5*ti),Xe=kt>>>13,kt&=8191,kt+=be*(5*si),kt+=ce*(5*Ht),kt+=ue*(5*N),kt+=Se*(5*Nt),kt+=dt*(5*Pt),Xe+=kt>>>13,kt&=8191,Lt=Xe,Lt+=Ze*Pt,Lt+=ot*Dt,Lt+=je*(5*ii),Lt+=ee*(5*Jt),Lt+=te*(5*zt),Xe=Lt>>>13,Lt&=8191,Lt+=be*(5*ti),Lt+=ce*(5*si),Lt+=ue*(5*Ht),Lt+=Se*(5*N),Lt+=dt*(5*Nt),Xe+=Lt>>>13,Lt&=8191,Ut=Xe,Ut+=Ze*Nt,Ut+=ot*Pt,Ut+=je*Dt,Ut+=ee*(5*ii),Ut+=te*(5*Jt),Xe=Ut>>>13,Ut&=8191,Ut+=be*(5*zt),Ut+=ce*(5*ti),Ut+=ue*(5*si),Ut+=Se*(5*Ht),Ut+=dt*(5*N),Xe+=Ut>>>13,Ut&=8191,Ft=Xe,Ft+=Ze*N,Ft+=ot*Nt,Ft+=je*Pt,Ft+=ee*Dt,Ft+=te*(5*ii),Xe=Ft>>>13,Ft&=8191,Ft+=be*(5*Jt),Ft+=ce*(5*zt),Ft+=ue*(5*ti),Ft+=Se*(5*si),Ft+=dt*(5*Ht),Xe+=Ft>>>13,Ft&=8191,Tt=Xe,Tt+=Ze*Ht,Tt+=ot*N,Tt+=je*Nt,Tt+=ee*Pt,Tt+=te*Dt,Xe=Tt>>>13,Tt&=8191,Tt+=be*(5*ii),Tt+=ce*(5*Jt),Tt+=ue*(5*zt),Tt+=Se*(5*ti),Tt+=dt*(5*si),Xe+=Tt>>>13,Tt&=8191,Bt=Xe,Bt+=Ze*si,Bt+=ot*Ht,Bt+=je*N,Bt+=ee*Nt,Bt+=te*Pt,Xe=Bt>>>13,Bt&=8191,Bt+=be*Dt,Bt+=ce*(5*ii),Bt+=ue*(5*Jt),Bt+=Se*(5*zt),Bt+=dt*(5*ti),Xe+=Bt>>>13,Bt&=8191,St=Xe,St+=Ze*ti,St+=ot*si,St+=je*Ht,St+=ee*N,St+=te*Nt,Xe=St>>>13,St&=8191,St+=be*Pt,St+=ce*Dt,St+=ue*(5*ii),St+=Se*(5*Jt),St+=dt*(5*zt),Xe+=St>>>13,St&=8191,Je=Xe,Je+=Ze*zt,Je+=ot*ti,Je+=je*si,Je+=ee*Ht,Je+=te*N,Xe=Je>>>13,Je&=8191,Je+=be*Nt,Je+=ce*Pt,Je+=ue*Dt,Je+=Se*(5*ii),Je+=dt*(5*Jt),Xe+=Je>>>13,Je&=8191,ut=Xe,ut+=Ze*Jt,ut+=ot*zt,ut+=je*ti,ut+=ee*si,ut+=te*Ht,Xe=ut>>>13,ut&=8191,ut+=be*N,ut+=ce*Nt,ut+=ue*Pt,ut+=Se*Dt,ut+=dt*(5*ii),Xe+=ut>>>13,ut&=8191,Ye=Xe,Ye+=Ze*ii,Ye+=ot*Jt,Ye+=je*zt,Ye+=ee*ti,Ye+=te*si,Xe=Ye>>>13,Ye&=8191,Ye+=be*Ht,Ye+=ce*N,Ye+=ue*Nt,Ye+=Se*Pt,Ye+=dt*Dt,Xe+=Ye>>>13,Ye&=8191,Xe=(Xe<<2)+Xe|0,Xe=Xe+kt|0,kt=Xe&8191,Xe=Xe>>>13,Lt+=Xe,Ze=kt,ot=Lt,je=Ut,ee=Ft,te=Tt,be=Bt,ce=St,ue=Je,Se=ut,dt=Ye,S+=16,I-=16;this.h[0]=Ze,this.h[1]=ot,this.h[2]=je,this.h[3]=ee,this.h[4]=te,this.h[5]=be,this.h[6]=ce,this.h[7]=ue,this.h[8]=Se,this.h[9]=dt},Ne.prototype.finish=function(y,S){var I=new Uint16Array(10),m,T,$,Q;if(this.leftover){for(Q=this.leftover,this.buffer[Q++]=1;Q<16;Q++)this.buffer[Q]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(m=this.h[1]>>>13,this.h[1]&=8191,Q=2;Q<10;Q++)this.h[Q]+=m,m=this.h[Q]>>>13,this.h[Q]&=8191;for(this.h[0]+=m*5,m=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=m,m=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=m,I[0]=this.h[0]+5,m=I[0]>>>13,I[0]&=8191,Q=1;Q<10;Q++)I[Q]=this.h[Q]+m,m=I[Q]>>>13,I[Q]&=8191;for(I[9]-=8192,T=(m^1)-1,Q=0;Q<10;Q++)I[Q]&=T;for(T=~T,Q=0;Q<10;Q++)this.h[Q]=this.h[Q]&T|I[Q];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,$=this.h[0]+this.pad[0],this.h[0]=$&65535,Q=1;Q<8;Q++)$=(this.h[Q]+this.pad[Q]|0)+($>>>16)|0,this.h[Q]=$&65535;y[S+0]=this.h[0]>>>0&255,y[S+1]=this.h[0]>>>8&255,y[S+2]=this.h[1]>>>0&255,y[S+3]=this.h[1]>>>8&255,y[S+4]=this.h[2]>>>0&255,y[S+5]=this.h[2]>>>8&255,y[S+6]=this.h[3]>>>0&255,y[S+7]=this.h[3]>>>8&255,y[S+8]=this.h[4]>>>0&255,y[S+9]=this.h[4]>>>8&255,y[S+10]=this.h[5]>>>0&255,y[S+11]=this.h[5]>>>8&255,y[S+12]=this.h[6]>>>0&255,y[S+13]=this.h[6]>>>8&255,y[S+14]=this.h[7]>>>0&255,y[S+15]=this.h[7]>>>8&255},Ne.prototype.update=function(y,S,I){var m,T;if(this.leftover){for(T=16-this.leftover,T>I&&(T=I),m=0;m<T;m++)this.buffer[this.leftover+m]=y[S+m];if(I-=T,S+=T,this.leftover+=T,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(I>=16&&(T=I-I%16,this.blocks(y,S,T),S+=T,I-=T),I){for(m=0;m<I;m++)this.buffer[this.leftover+m]=y[S+m];this.leftover+=I}};function He(y,S,I,m,T,$){var Q=new Ne($);return Q.update(I,m,T),Q.finish(y,S),0}function Qe(y,S,I,m,T,$){var Q=new Uint8Array(16);return He(Q,0,I,m,T,$),k(y,S,Q,0)}function Xt(y,S,I,m,T){var $;if(I<32)return-1;for(de(y,0,S,0,I,m,T),He(y,16,y,32,I-32,y),$=0;$<16;$++)y[$]=0;return 0}function Me(y,S,I,m,T){var $,Q=new Uint8Array(32);if(I<32||(oe(Q,0,32,m,T),Qe(S,16,S,32,I-32,Q)!==0))return-1;for(de(y,0,S,0,I,m,T),$=0;$<32;$++)y[$]=0;return 0}function _e(y,S){var I;for(I=0;I<16;I++)y[I]=S[I]|0}function Le(y){var S,I,m=1;for(S=0;S<16;S++)I=y[S]+m+65535,m=Math.floor(I/65536),y[S]=I-m*65536;y[0]+=m-1+37*(m-1)}function P(y,S,I){for(var m,T=~(I-1),$=0;$<16;$++)m=T&(y[$]^S[$]),y[$]^=m,S[$]^=m}function nt(y,S){var I,m,T,$=e(),Q=e();for(I=0;I<16;I++)Q[I]=S[I];for(Le(Q),Le(Q),Le(Q),m=0;m<2;m++){for($[0]=Q[0]-65517,I=1;I<15;I++)$[I]=Q[I]-65535-($[I-1]>>16&1),$[I-1]&=65535;$[15]=Q[15]-32767-($[14]>>16&1),T=$[15]>>16&1,$[14]&=65535,P(Q,$,1-T)}for(I=0;I<16;I++)y[2*I]=Q[I]&255,y[2*I+1]=Q[I]>>8}function Ee(y,S){var I=new Uint8Array(32),m=new Uint8Array(32);return nt(I,y),nt(m,S),E(I,0,m,0)}function gt(y){var S=new Uint8Array(32);return nt(S,y),S[0]&1}function pi(y,S){var I;for(I=0;I<16;I++)y[I]=S[2*I]+(S[2*I+1]<<8);y[15]&=32767}function gi(y,S,I){for(var m=0;m<16;m++)y[m]=S[m]+I[m]}function Si(y,S,I){for(var m=0;m<16;m++)y[m]=S[m]-I[m]}function st(y,S,I){var m,T,$=0,Q=0,he=0,Ce=0,ct=0,qe=0,li=0,Xe=0,kt=0,Lt=0,Ut=0,Ft=0,Tt=0,Bt=0,St=0,Je=0,ut=0,Ye=0,Ze=0,ot=0,je=0,ee=0,te=0,be=0,ce=0,ue=0,Se=0,dt=0,Dt=0,Pt=0,Nt=0,N=I[0],Ht=I[1],si=I[2],ti=I[3],zt=I[4],Jt=I[5],ii=I[6],Fi=I[7],hi=I[8],Mi=I[9],Pi=I[10],Ri=I[11],Wi=I[12],Xi=I[13],lr=I[14],Ji=I[15];m=S[0],$+=m*N,Q+=m*Ht,he+=m*si,Ce+=m*ti,ct+=m*zt,qe+=m*Jt,li+=m*ii,Xe+=m*Fi,kt+=m*hi,Lt+=m*Mi,Ut+=m*Pi,Ft+=m*Ri,Tt+=m*Wi,Bt+=m*Xi,St+=m*lr,Je+=m*Ji,m=S[1],Q+=m*N,he+=m*Ht,Ce+=m*si,ct+=m*ti,qe+=m*zt,li+=m*Jt,Xe+=m*ii,kt+=m*Fi,Lt+=m*hi,Ut+=m*Mi,Ft+=m*Pi,Tt+=m*Ri,Bt+=m*Wi,St+=m*Xi,Je+=m*lr,ut+=m*Ji,m=S[2],he+=m*N,Ce+=m*Ht,ct+=m*si,qe+=m*ti,li+=m*zt,Xe+=m*Jt,kt+=m*ii,Lt+=m*Fi,Ut+=m*hi,Ft+=m*Mi,Tt+=m*Pi,Bt+=m*Ri,St+=m*Wi,Je+=m*Xi,ut+=m*lr,Ye+=m*Ji,m=S[3],Ce+=m*N,ct+=m*Ht,qe+=m*si,li+=m*ti,Xe+=m*zt,kt+=m*Jt,Lt+=m*ii,Ut+=m*Fi,Ft+=m*hi,Tt+=m*Mi,Bt+=m*Pi,St+=m*Ri,Je+=m*Wi,ut+=m*Xi,Ye+=m*lr,Ze+=m*Ji,m=S[4],ct+=m*N,qe+=m*Ht,li+=m*si,Xe+=m*ti,kt+=m*zt,Lt+=m*Jt,Ut+=m*ii,Ft+=m*Fi,Tt+=m*hi,Bt+=m*Mi,St+=m*Pi,Je+=m*Ri,ut+=m*Wi,Ye+=m*Xi,Ze+=m*lr,ot+=m*Ji,m=S[5],qe+=m*N,li+=m*Ht,Xe+=m*si,kt+=m*ti,Lt+=m*zt,Ut+=m*Jt,Ft+=m*ii,Tt+=m*Fi,Bt+=m*hi,St+=m*Mi,Je+=m*Pi,ut+=m*Ri,Ye+=m*Wi,Ze+=m*Xi,ot+=m*lr,je+=m*Ji,m=S[6],li+=m*N,Xe+=m*Ht,kt+=m*si,Lt+=m*ti,Ut+=m*zt,Ft+=m*Jt,Tt+=m*ii,Bt+=m*Fi,St+=m*hi,Je+=m*Mi,ut+=m*Pi,Ye+=m*Ri,Ze+=m*Wi,ot+=m*Xi,je+=m*lr,ee+=m*Ji,m=S[7],Xe+=m*N,kt+=m*Ht,Lt+=m*si,Ut+=m*ti,Ft+=m*zt,Tt+=m*Jt,Bt+=m*ii,St+=m*Fi,Je+=m*hi,ut+=m*Mi,Ye+=m*Pi,Ze+=m*Ri,ot+=m*Wi,je+=m*Xi,ee+=m*lr,te+=m*Ji,m=S[8],kt+=m*N,Lt+=m*Ht,Ut+=m*si,Ft+=m*ti,Tt+=m*zt,Bt+=m*Jt,St+=m*ii,Je+=m*Fi,ut+=m*hi,Ye+=m*Mi,Ze+=m*Pi,ot+=m*Ri,je+=m*Wi,ee+=m*Xi,te+=m*lr,be+=m*Ji,m=S[9],Lt+=m*N,Ut+=m*Ht,Ft+=m*si,Tt+=m*ti,Bt+=m*zt,St+=m*Jt,Je+=m*ii,ut+=m*Fi,Ye+=m*hi,Ze+=m*Mi,ot+=m*Pi,je+=m*Ri,ee+=m*Wi,te+=m*Xi,be+=m*lr,ce+=m*Ji,m=S[10],Ut+=m*N,Ft+=m*Ht,Tt+=m*si,Bt+=m*ti,St+=m*zt,Je+=m*Jt,ut+=m*ii,Ye+=m*Fi,Ze+=m*hi,ot+=m*Mi,je+=m*Pi,ee+=m*Ri,te+=m*Wi,be+=m*Xi,ce+=m*lr,ue+=m*Ji,m=S[11],Ft+=m*N,Tt+=m*Ht,Bt+=m*si,St+=m*ti,Je+=m*zt,ut+=m*Jt,Ye+=m*ii,Ze+=m*Fi,ot+=m*hi,je+=m*Mi,ee+=m*Pi,te+=m*Ri,be+=m*Wi,ce+=m*Xi,ue+=m*lr,Se+=m*Ji,m=S[12],Tt+=m*N,Bt+=m*Ht,St+=m*si,Je+=m*ti,ut+=m*zt,Ye+=m*Jt,Ze+=m*ii,ot+=m*Fi,je+=m*hi,ee+=m*Mi,te+=m*Pi,be+=m*Ri,ce+=m*Wi,ue+=m*Xi,Se+=m*lr,dt+=m*Ji,m=S[13],Bt+=m*N,St+=m*Ht,Je+=m*si,ut+=m*ti,Ye+=m*zt,Ze+=m*Jt,ot+=m*ii,je+=m*Fi,ee+=m*hi,te+=m*Mi,be+=m*Pi,ce+=m*Ri,ue+=m*Wi,Se+=m*Xi,dt+=m*lr,Dt+=m*Ji,m=S[14],St+=m*N,Je+=m*Ht,ut+=m*si,Ye+=m*ti,Ze+=m*zt,ot+=m*Jt,je+=m*ii,ee+=m*Fi,te+=m*hi,be+=m*Mi,ce+=m*Pi,ue+=m*Ri,Se+=m*Wi,dt+=m*Xi,Dt+=m*lr,Pt+=m*Ji,m=S[15],Je+=m*N,ut+=m*Ht,Ye+=m*si,Ze+=m*ti,ot+=m*zt,je+=m*Jt,ee+=m*ii,te+=m*Fi,be+=m*hi,ce+=m*Mi,ue+=m*Pi,Se+=m*Ri,dt+=m*Wi,Dt+=m*Xi,Pt+=m*lr,Nt+=m*Ji,$+=38*ut,Q+=38*Ye,he+=38*Ze,Ce+=38*ot,ct+=38*je,qe+=38*ee,li+=38*te,Xe+=38*be,kt+=38*ce,Lt+=38*ue,Ut+=38*Se,Ft+=38*dt,Tt+=38*Dt,Bt+=38*Pt,St+=38*Nt,T=1,m=$+T+65535,T=Math.floor(m/65536),$=m-T*65536,m=Q+T+65535,T=Math.floor(m/65536),Q=m-T*65536,m=he+T+65535,T=Math.floor(m/65536),he=m-T*65536,m=Ce+T+65535,T=Math.floor(m/65536),Ce=m-T*65536,m=ct+T+65535,T=Math.floor(m/65536),ct=m-T*65536,m=qe+T+65535,T=Math.floor(m/65536),qe=m-T*65536,m=li+T+65535,T=Math.floor(m/65536),li=m-T*65536,m=Xe+T+65535,T=Math.floor(m/65536),Xe=m-T*65536,m=kt+T+65535,T=Math.floor(m/65536),kt=m-T*65536,m=Lt+T+65535,T=Math.floor(m/65536),Lt=m-T*65536,m=Ut+T+65535,T=Math.floor(m/65536),Ut=m-T*65536,m=Ft+T+65535,T=Math.floor(m/65536),Ft=m-T*65536,m=Tt+T+65535,T=Math.floor(m/65536),Tt=m-T*65536,m=Bt+T+65535,T=Math.floor(m/65536),Bt=m-T*65536,m=St+T+65535,T=Math.floor(m/65536),St=m-T*65536,m=Je+T+65535,T=Math.floor(m/65536),Je=m-T*65536,$+=T-1+37*(T-1),T=1,m=$+T+65535,T=Math.floor(m/65536),$=m-T*65536,m=Q+T+65535,T=Math.floor(m/65536),Q=m-T*65536,m=he+T+65535,T=Math.floor(m/65536),he=m-T*65536,m=Ce+T+65535,T=Math.floor(m/65536),Ce=m-T*65536,m=ct+T+65535,T=Math.floor(m/65536),ct=m-T*65536,m=qe+T+65535,T=Math.floor(m/65536),qe=m-T*65536,m=li+T+65535,T=Math.floor(m/65536),li=m-T*65536,m=Xe+T+65535,T=Math.floor(m/65536),Xe=m-T*65536,m=kt+T+65535,T=Math.floor(m/65536),kt=m-T*65536,m=Lt+T+65535,T=Math.floor(m/65536),Lt=m-T*65536,m=Ut+T+65535,T=Math.floor(m/65536),Ut=m-T*65536,m=Ft+T+65535,T=Math.floor(m/65536),Ft=m-T*65536,m=Tt+T+65535,T=Math.floor(m/65536),Tt=m-T*65536,m=Bt+T+65535,T=Math.floor(m/65536),Bt=m-T*65536,m=St+T+65535,T=Math.floor(m/65536),St=m-T*65536,m=Je+T+65535,T=Math.floor(m/65536),Je=m-T*65536,$+=T-1+37*(T-1),y[0]=$,y[1]=Q,y[2]=he,y[3]=Ce,y[4]=ct,y[5]=qe,y[6]=li,y[7]=Xe,y[8]=kt,y[9]=Lt,y[10]=Ut,y[11]=Ft,y[12]=Tt,y[13]=Bt,y[14]=St,y[15]=Je}function Oi(y,S){st(y,S,S)}function Mr(y,S){var I=e(),m;for(m=0;m<16;m++)I[m]=S[m];for(m=253;m>=0;m--)Oi(I,I),m!==2&&m!==4&&st(I,I,S);for(m=0;m<16;m++)y[m]=I[m]}function an(y,S){var I=e(),m;for(m=0;m<16;m++)I[m]=S[m];for(m=250;m>=0;m--)Oi(I,I),m!==1&&st(I,I,S);for(m=0;m<16;m++)y[m]=I[m]}function Or(y,S,I){var m=new Uint8Array(32),T=new Float64Array(80),$,Q,he=e(),Ce=e(),ct=e(),qe=e(),li=e(),Xe=e();for(Q=0;Q<31;Q++)m[Q]=S[Q];for(m[31]=S[31]&127|64,m[0]&=248,pi(T,I),Q=0;Q<16;Q++)Ce[Q]=T[Q],qe[Q]=he[Q]=ct[Q]=0;for(he[0]=qe[0]=1,Q=254;Q>=0;--Q)$=m[Q>>>3]>>>(Q&7)&1,P(he,Ce,$),P(ct,qe,$),gi(li,he,ct),Si(he,he,ct),gi(ct,Ce,qe),Si(Ce,Ce,qe),Oi(qe,li),Oi(Xe,he),st(he,ct,he),st(ct,Ce,li),gi(li,he,ct),Si(he,he,ct),Oi(Ce,he),Si(ct,qe,Xe),st(he,ct,u),gi(he,he,qe),st(ct,ct,he),st(he,qe,Xe),st(qe,Ce,T),Oi(Ce,li),P(he,Ce,$),P(ct,qe,$);for(Q=0;Q<16;Q++)T[Q+16]=he[Q],T[Q+32]=ct[Q],T[Q+48]=Ce[Q],T[Q+64]=qe[Q];var kt=T.subarray(32),Lt=T.subarray(16);return Mr(kt,kt),st(Lt,Lt,kt),nt(y,Lt),0}function Gr(y,S){return Or(y,S,s)}function rs(y,S){return t(S,32),Gr(y,S)}function Wr(y,S,I){var m=new Uint8Array(32);return Or(m,I,S),Y(y,r,m,Z)}var Vr=Xt,zn=Me;function Ln(y,S,I,m,T,$){var Q=new Uint8Array(32);return Wr(Q,T,$),Vr(y,S,I,m,Q)}function oo(y,S,I,m,T,$){var Q=new Uint8Array(32);return Wr(Q,T,$),zn(y,S,I,m,Q)}var ao=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Da(y,S,I,m){for(var T=new Int32Array(16),$=new Int32Array(16),Q,he,Ce,ct,qe,li,Xe,kt,Lt,Ut,Ft,Tt,Bt,St,Je,ut,Ye,Ze,ot,je,ee,te,be,ce,ue,Se,dt=y[0],Dt=y[1],Pt=y[2],Nt=y[3],N=y[4],Ht=y[5],si=y[6],ti=y[7],zt=S[0],Jt=S[1],ii=S[2],Fi=S[3],hi=S[4],Mi=S[5],Pi=S[6],Ri=S[7],Wi=0;m>=128;){for(ot=0;ot<16;ot++)je=8*ot+Wi,T[ot]=I[je+0]<<24|I[je+1]<<16|I[je+2]<<8|I[je+3],$[ot]=I[je+4]<<24|I[je+5]<<16|I[je+6]<<8|I[je+7];for(ot=0;ot<80;ot++)if(Q=dt,he=Dt,Ce=Pt,ct=Nt,qe=N,li=Ht,Xe=si,kt=ti,Lt=zt,Ut=Jt,Ft=ii,Tt=Fi,Bt=hi,St=Mi,Je=Pi,ut=Ri,ee=ti,te=Ri,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=(N>>>14|hi<<32-14)^(N>>>18|hi<<32-18)^(hi>>>41-32|N<<32-(41-32)),te=(hi>>>14|N<<32-14)^(hi>>>18|N<<32-18)^(N>>>41-32|hi<<32-(41-32)),be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ee=N&Ht^~N&si,te=hi&Mi^~hi&Pi,be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ee=ao[ot*2],te=ao[ot*2+1],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ee=T[ot%16],te=$[ot%16],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,Ye=ue&65535|Se<<16,Ze=be&65535|ce<<16,ee=Ye,te=Ze,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=(dt>>>28|zt<<32-28)^(zt>>>34-32|dt<<32-(34-32))^(zt>>>39-32|dt<<32-(39-32)),te=(zt>>>28|dt<<32-28)^(dt>>>34-32|zt<<32-(34-32))^(dt>>>39-32|zt<<32-(39-32)),be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ee=dt&Dt^dt&Pt^Dt&Pt,te=zt&Jt^zt&ii^Jt&ii,be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,kt=ue&65535|Se<<16,ut=be&65535|ce<<16,ee=ct,te=Tt,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=Ye,te=Ze,be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,ct=ue&65535|Se<<16,Tt=be&65535|ce<<16,Dt=Q,Pt=he,Nt=Ce,N=ct,Ht=qe,si=li,ti=Xe,dt=kt,Jt=Lt,ii=Ut,Fi=Ft,hi=Tt,Mi=Bt,Pi=St,Ri=Je,zt=ut,ot%16===15)for(je=0;je<16;je++)ee=T[je],te=$[je],be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=T[(je+9)%16],te=$[(je+9)%16],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,Ye=T[(je+1)%16],Ze=$[(je+1)%16],ee=(Ye>>>1|Ze<<32-1)^(Ye>>>8|Ze<<32-8)^Ye>>>7,te=(Ze>>>1|Ye<<32-1)^(Ze>>>8|Ye<<32-8)^(Ze>>>7|Ye<<32-7),be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,Ye=T[(je+14)%16],Ze=$[(je+14)%16],ee=(Ye>>>19|Ze<<32-19)^(Ze>>>61-32|Ye<<32-(61-32))^Ye>>>6,te=(Ze>>>19|Ye<<32-19)^(Ye>>>61-32|Ze<<32-(61-32))^(Ze>>>6|Ye<<32-6),be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,T[je]=ue&65535|Se<<16,$[je]=be&65535|ce<<16;ee=dt,te=zt,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=y[0],te=S[0],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,y[0]=dt=ue&65535|Se<<16,S[0]=zt=be&65535|ce<<16,ee=Dt,te=Jt,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=y[1],te=S[1],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,y[1]=Dt=ue&65535|Se<<16,S[1]=Jt=be&65535|ce<<16,ee=Pt,te=ii,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=y[2],te=S[2],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,y[2]=Pt=ue&65535|Se<<16,S[2]=ii=be&65535|ce<<16,ee=Nt,te=Fi,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=y[3],te=S[3],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,y[3]=Nt=ue&65535|Se<<16,S[3]=Fi=be&65535|ce<<16,ee=N,te=hi,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=y[4],te=S[4],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,y[4]=N=ue&65535|Se<<16,S[4]=hi=be&65535|ce<<16,ee=Ht,te=Mi,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=y[5],te=S[5],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,y[5]=Ht=ue&65535|Se<<16,S[5]=Mi=be&65535|ce<<16,ee=si,te=Pi,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=y[6],te=S[6],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,y[6]=si=ue&65535|Se<<16,S[6]=Pi=be&65535|ce<<16,ee=ti,te=Ri,be=te&65535,ce=te>>>16,ue=ee&65535,Se=ee>>>16,ee=y[7],te=S[7],be+=te&65535,ce+=te>>>16,ue+=ee&65535,Se+=ee>>>16,ce+=be>>>16,ue+=ce>>>16,Se+=ue>>>16,y[7]=ti=ue&65535|Se<<16,S[7]=Ri=be&65535|ce<<16,Wi+=128,m-=128}return m}function ln(y,S,I){var m=new Int32Array(8),T=new Int32Array(8),$=new Uint8Array(256),Q,he=I;for(m[0]=1779033703,m[1]=3144134277,m[2]=1013904242,m[3]=2773480762,m[4]=1359893119,m[5]=2600822924,m[6]=528734635,m[7]=1541459225,T[0]=4089235720,T[1]=2227873595,T[2]=4271175723,T[3]=1595750129,T[4]=2917565137,T[5]=725511199,T[6]=4215389547,T[7]=327033209,Da(m,T,S,I),I%=128,Q=0;Q<I;Q++)$[Q]=S[he-I+Q];for($[I]=128,I=256-128*(I<112?1:0),$[I-9]=0,v($,I-8,he/536870912|0,he<<3),Da(m,T,$,I),Q=0;Q<8;Q++)v(y,8*Q,m[Q],T[Q]);return 0}function Cs(y,S){var I=e(),m=e(),T=e(),$=e(),Q=e(),he=e(),Ce=e(),ct=e(),qe=e();Si(I,y[1],y[0]),Si(qe,S[1],S[0]),st(I,I,qe),gi(m,y[0],y[1]),gi(qe,S[0],S[1]),st(m,m,qe),st(T,y[3],S[3]),st(T,T,h),st($,y[2],S[2]),gi($,$,$),Si(Q,m,I),Si(he,$,T),gi(Ce,$,T),gi(ct,m,I),st(y[0],Q,he),st(y[1],ct,Ce),st(y[2],Ce,he),st(y[3],Q,ct)}function lo(y,S,I){var m;for(m=0;m<4;m++)P(y[m],S[m],I)}function co(y,S){var I=e(),m=e(),T=e();Mr(T,S[2]),st(I,S[0],T),st(m,S[1],T),nt(y,m),y[31]^=gt(I)<<7}function Fo(y,S,I){var m,T;for(_e(y[0],o),_e(y[1],l),_e(y[2],l),_e(y[3],o),T=255;T>=0;--T)m=I[T/8|0]>>(T&7)&1,lo(y,S,m),Cs(S,y),Cs(y,y),lo(y,S,m)}function G(y,S){var I=[e(),e(),e(),e()];_e(I[0],f),_e(I[1],g),_e(I[2],l),st(I[3],f,g),Fo(y,I,S)}function C(y,S,I){var m=new Uint8Array(64),T=[e(),e(),e(),e()],$;for(I||t(S,32),ln(m,S,32),m[0]&=248,m[31]&=127,m[31]|=64,G(T,m),co(y,T),$=0;$<32;$++)S[$+32]=y[$];return 0}var U=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function j(y,S){var I,m,T,$;for(m=63;m>=32;--m){for(I=0,T=m-32,$=m-12;T<$;++T)S[T]+=I-16*S[m]*U[T-(m-32)],I=Math.floor((S[T]+128)/256),S[T]-=I*256;S[T]+=I,S[m]=0}for(I=0,T=0;T<32;T++)S[T]+=I-(S[31]>>4)*U[T],I=S[T]>>8,S[T]&=255;for(T=0;T<32;T++)S[T]-=I*U[T];for(m=0;m<32;m++)S[m+1]+=S[m]>>8,y[m]=S[m]&255}function q(y){var S=new Float64Array(64),I;for(I=0;I<64;I++)S[I]=y[I];for(I=0;I<64;I++)y[I]=0;j(y,S)}function D(y,S,I,m){var T=new Uint8Array(64),$=new Uint8Array(64),Q=new Uint8Array(64),he,Ce,ct=new Float64Array(64),qe=[e(),e(),e(),e()];ln(T,m,32),T[0]&=248,T[31]&=127,T[31]|=64;var li=I+64;for(he=0;he<I;he++)y[64+he]=S[he];for(he=0;he<32;he++)y[32+he]=T[32+he];for(ln(Q,y.subarray(32),I+32),q(Q),G(qe,Q),co(y,qe),he=32;he<64;he++)y[he]=m[he];for(ln($,y,I+64),q($),he=0;he<64;he++)ct[he]=0;for(he=0;he<32;he++)ct[he]=Q[he];for(he=0;he<32;he++)for(Ce=0;Ce<32;Ce++)ct[he+Ce]+=$[he]*T[Ce];return j(y.subarray(32),ct),li}function pe(y,S){var I=e(),m=e(),T=e(),$=e(),Q=e(),he=e(),Ce=e();return _e(y[2],l),pi(y[1],S),Oi(T,y[1]),st($,T,p),Si(T,T,y[2]),gi($,y[2],$),Oi(Q,$),Oi(he,Q),st(Ce,he,Q),st(I,Ce,T),st(I,I,$),an(I,I),st(I,I,T),st(I,I,$),st(I,I,$),st(y[0],I,$),Oi(m,y[0]),st(m,m,$),Ee(m,T)&&st(y[0],y[0],b),Oi(m,y[0]),st(m,m,$),Ee(m,T)?-1:(gt(y[0])===S[31]>>7&&Si(y[0],o,y[0]),st(y[3],y[0],y[1]),0)}function fe(y,S,I,m){var T,$=new Uint8Array(32),Q=new Uint8Array(64),he=[e(),e(),e(),e()],Ce=[e(),e(),e(),e()];if(I<64||pe(Ce,m))return-1;for(T=0;T<I;T++)y[T]=S[T];for(T=0;T<32;T++)y[T+32]=m[T];if(ln(Q,y,I),q(Q),Fo(he,Ce,Q),G(Ce,S.subarray(32)),Cs(he,Ce),co($,he),I-=64,E(S,0,$,0)){for(T=0;T<I;T++)y[T]=0;return-1}for(T=0;T<I;T++)y[T]=S[T+64];return I}var we=32,Fe=24,lt=32,Ae=16,ze=32,Rt=32,Te=32,$t=32,qt=32,ui=Fe,Ti=lt,bn=Ae,zi=64,Qi=32,Tn=64,ns=32,jn=64;i.lowlevel={crypto_core_hsalsa20:Y,crypto_stream_xor:de,crypto_stream:oe,crypto_stream_salsa20_xor:W,crypto_stream_salsa20:le,crypto_onetimeauth:He,crypto_onetimeauth_verify:Qe,crypto_verify_16:k,crypto_verify_32:E,crypto_secretbox:Xt,crypto_secretbox_open:Me,crypto_scalarmult:Or,crypto_scalarmult_base:Gr,crypto_box_beforenm:Wr,crypto_box_afternm:Vr,crypto_box:Ln,crypto_box_open:oo,crypto_box_keypair:rs,crypto_hash:ln,crypto_sign:D,crypto_sign_keypair:C,crypto_sign_open:fe,crypto_secretbox_KEYBYTES:we,crypto_secretbox_NONCEBYTES:Fe,crypto_secretbox_ZEROBYTES:lt,crypto_secretbox_BOXZEROBYTES:Ae,crypto_scalarmult_BYTES:ze,crypto_scalarmult_SCALARBYTES:Rt,crypto_box_PUBLICKEYBYTES:Te,crypto_box_SECRETKEYBYTES:$t,crypto_box_BEFORENMBYTES:qt,crypto_box_NONCEBYTES:ui,crypto_box_ZEROBYTES:Ti,crypto_box_BOXZEROBYTES:bn,crypto_sign_BYTES:zi,crypto_sign_PUBLICKEYBYTES:Qi,crypto_sign_SECRETKEYBYTES:Tn,crypto_sign_SEEDBYTES:ns,crypto_hash_BYTES:jn,gf:e,D:p,L:U,pack25519:nt,unpack25519:pi,M:st,A:gi,S:Oi,Z:Si,pow2523:an,add:Cs,set25519:_e,modL:j,scalarmult:Fo,scalarbase:G};function As(y,S){if(y.length!==we)throw new Error("bad key size");if(S.length!==Fe)throw new Error("bad nonce size")}function Ms(y,S){if(y.length!==Te)throw new Error("bad public key size");if(S.length!==$t)throw new Error("bad secret key size")}function Kr(){for(var y=0;y<arguments.length;y++)if(!(arguments[y]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function _u(y){for(var S=0;S<y.length;S++)y[S]=0}i.randomBytes=function(y){var S=new Uint8Array(y);return t(S,y),S},i.secretbox=function(y,S,I){Kr(y,S,I),As(I,S);for(var m=new Uint8Array(lt+y.length),T=new Uint8Array(m.length),$=0;$<y.length;$++)m[$+lt]=y[$];return Xt(T,m,m.length,S,I),T.subarray(Ae)},i.secretbox.open=function(y,S,I){Kr(y,S,I),As(I,S);for(var m=new Uint8Array(Ae+y.length),T=new Uint8Array(m.length),$=0;$<y.length;$++)m[$+Ae]=y[$];return m.length<32||Me(T,m,m.length,S,I)!==0?null:T.subarray(lt)},i.secretbox.keyLength=we,i.secretbox.nonceLength=Fe,i.secretbox.overheadLength=Ae,i.scalarMult=function(y,S){if(Kr(y,S),y.length!==Rt)throw new Error("bad n size");if(S.length!==ze)throw new Error("bad p size");var I=new Uint8Array(ze);return Or(I,y,S),I},i.scalarMult.base=function(y){if(Kr(y),y.length!==Rt)throw new Error("bad n size");var S=new Uint8Array(ze);return Gr(S,y),S},i.scalarMult.scalarLength=Rt,i.scalarMult.groupElementLength=ze,i.box=function(y,S,I,m){var T=i.box.before(I,m);return i.secretbox(y,S,T)},i.box.before=function(y,S){Kr(y,S),Ms(y,S);var I=new Uint8Array(qt);return Wr(I,y,S),I},i.box.after=i.secretbox,i.box.open=function(y,S,I,m){var T=i.box.before(I,m);return i.secretbox.open(y,S,T)},i.box.open.after=i.secretbox.open,i.box.keyPair=function(){var y=new Uint8Array(Te),S=new Uint8Array($t);return rs(y,S),{publicKey:y,secretKey:S}},i.box.keyPair.fromSecretKey=function(y){if(Kr(y),y.length!==$t)throw new Error("bad secret key size");var S=new Uint8Array(Te);return Gr(S,y),{publicKey:S,secretKey:new Uint8Array(y)}},i.box.publicKeyLength=Te,i.box.secretKeyLength=$t,i.box.sharedKeyLength=qt,i.box.nonceLength=ui,i.box.overheadLength=i.secretbox.overheadLength,i.sign=function(y,S){if(Kr(y,S),S.length!==Tn)throw new Error("bad secret key size");var I=new Uint8Array(zi+y.length);return D(I,y,y.length,S),I},i.sign.open=function(y,S){if(Kr(y,S),S.length!==Qi)throw new Error("bad public key size");var I=new Uint8Array(y.length),m=fe(I,y,y.length,S);if(m<0)return null;for(var T=new Uint8Array(m),$=0;$<T.length;$++)T[$]=I[$];return T},i.sign.detached=function(y,S){for(var I=i.sign(y,S),m=new Uint8Array(zi),T=0;T<m.length;T++)m[T]=I[T];return m},i.sign.detached.verify=function(y,S,I){if(Kr(y,S,I),S.length!==zi)throw new Error("bad signature size");if(I.length!==Qi)throw new Error("bad public key size");var m=new Uint8Array(zi+y.length),T=new Uint8Array(zi+y.length),$;for($=0;$<zi;$++)m[$]=S[$];for($=0;$<y.length;$++)m[$+zi]=y[$];return fe(T,m,m.length,I)>=0},i.sign.keyPair=function(){var y=new Uint8Array(Qi),S=new Uint8Array(Tn);return C(y,S),{publicKey:y,secretKey:S}},i.sign.keyPair.fromSecretKey=function(y){if(Kr(y),y.length!==Tn)throw new Error("bad secret key size");for(var S=new Uint8Array(Qi),I=0;I<S.length;I++)S[I]=y[32+I];return{publicKey:S,secretKey:new Uint8Array(y)}},i.sign.keyPair.fromSeed=function(y){if(Kr(y),y.length!==ns)throw new Error("bad seed size");for(var S=new Uint8Array(Qi),I=new Uint8Array(Tn),m=0;m<32;m++)I[m]=y[m];return C(S,I,!0),{publicKey:S,secretKey:I}},i.sign.publicKeyLength=Qi,i.sign.secretKeyLength=Tn,i.sign.seedLength=ns,i.sign.signatureLength=zi,i.hash=function(y){Kr(y);var S=new Uint8Array(jn);return ln(S,y,y.length),S},i.hash.hashLength=jn,i.verify=function(y,S){return Kr(y,S),y.length===0||S.length===0||y.length!==S.length?!1:w(y,0,S,0,y.length)===0},i.setPRNG=function(y){t=y},function(){var y=typeof self<"u"?self.crypto||self.msCrypto:null;if(y&&y.getRandomValues){var S=65536;i.setPRNG(function(I,m){var T,$=new Uint8Array(m);for(T=0;T<m;T+=S)y.getRandomValues($.subarray(T,T+Math.min(m-T,S)));for(T=0;T<m;T++)I[T]=$[T];_u($)})}else typeof iv<"u"&&(y=iv("crypto"),y&&y.randomBytes&&i.setPRNG(function(I,m){var T,$=y.randomBytes(m);for(T=0;T<m;T++)I[T]=$[T];_u($)}))}()})(typeof s0<"u"&&s0.exports?s0.exports:self.nacl=self.nacl||{})});function eN(i,e){let t=iu.default.encodeBase64(i);return e?encodeURIComponent(t):t}function tN(i,e){return e&&(i=decodeURIComponent(i)),iu.default.decodeBase64(i)}function iN(i,e=!1){let t;return i instanceof Uint8Array?t=i:(typeof i!="string"&&(i=JSON.stringify(i)),t=iu.default.decodeUTF8(i)),eN(t,e)}function rN(i,e=!1){let t=tN(i,e);return{toString(){return iu.default.encodeUTF8(t)},toObject(){try{return JSON.parse(iu.default.encodeUTF8(t))}catch{return null}},toUint8Array(){return t}}}function nN(i,e){let t=new Uint8Array(i.length+e.length);return t.set(i),t.set(e,i.length),t}function sN(i,e){if(e>=i.length)throw new Error("Index is out of buffer");let t=i.slice(0,e),r=i.slice(e);return[t,r]}function DS(i){let e="";return i.forEach(t=>{e+=("0"+(t&255).toString(16)).slice(-2)}),e}function Qh(i){if(i.length%2!==0)throw new Error(`Cannot convert ${i} to bytesArray`);let e=new Uint8Array(i.length/2);for(let t=0;t<i.length;t+=2)e[t/2]=parseInt(i.slice(t,t+2),16);return e}var iu,Yh,Xs,NS,Sa,QA,XA,OS,FS,ru,PS=_(()=>{"use strict";iu=uf(qA(),1),Yh=uf(YA(),1);(function(i){i[i.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",i[i.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",i[i.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",i[i.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",i[i.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",i[i.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",i[i.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Xs||(Xs={}));(function(i){i[i.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",i[i.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(NS||(NS={}));(function(i){i[i.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",i[i.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",i[i.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",i[i.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",i[i.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Sa||(Sa={}));(function(i){i[i.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",i[i.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",i[i.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",i[i.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",i[i.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(QA||(QA={}));(function(i){i[i.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",i[i.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",i[i.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",i[i.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(XA||(XA={}));(function(i){i.MAINNET="-239",i.TESTNET="-3"})(OS||(OS={}));FS={encode:iN,decode:rN};ru=class{constructor(e){this.nonceLength=24,this.keyPair=e?this.createKeypairFromString(e):this.createKeypair(),this.sessionId=DS(this.keyPair.publicKey)}createKeypair(){return Yh.default.box.keyPair()}createKeypairFromString(e){return{publicKey:Qh(e.publicKey),secretKey:Qh(e.secretKey)}}createNonce(){return Yh.default.randomBytes(this.nonceLength)}encrypt(e,t){let r=new TextEncoder().encode(e),s=this.createNonce(),o=Yh.default.box(r,s,t,this.keyPair.secretKey);return nN(s,o)}decrypt(e,t){let[r,s]=sN(e,this.nonceLength),o=Yh.default.box.open(s,r,t,this.keyPair.secretKey);if(!o)throw new Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${t.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(o)}stringifyKeypair(){return{publicKey:DS(this.keyPair.publicKey),secretKey:DS(this.keyPair.secretKey)}}}});function JA(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(t[r[s]]=i[r[s]]);return t}function it(i,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(f){try{h(r.next(f))}catch(g){l(g)}}function p(f){try{h(r.throw(f))}catch(g){l(g)}}function h(f){f.done?o(f.value):s(f.value).then(u,p)}h((r=r.apply(i,e||[])).next())})}function oN(i){return"jsBridgeKey"in i}function lN(i){return i.slice(-1)==="/"?i.slice(0,-1):i}function iM(i,e){return lN(i)+"/"+e}function cN(i){if(!i)return!1;let e=new URL(i);return e.protocol==="tg:"||e.hostname==="t.me"}function uN(i){return i.replaceAll(".","%2E").replaceAll("-","%2D").replaceAll("_","%5F").replaceAll("&","-").replaceAll("=","__").replaceAll("%","--")}function rM(i,e){return it(this,void 0,void 0,function*(){return new Promise((t,r)=>{var s,o;if(!((s=e?.signal)===null||s===void 0)&&s.aborted){r(new It("Delay aborted"));return}let l=setTimeout(()=>t(),i);(o=e?.signal)===null||o===void 0||o.addEventListener("abort",()=>{clearTimeout(l),r(new It("Delay aborted"))})})})}function vs(i){let e=new AbortController;return i?.aborted?e.abort():i?.addEventListener("abort",()=>e.abort(),{once:!0}),e}function Jh(i,e){var t,r;return it(this,void 0,void 0,function*(){let s=(t=e?.attempts)!==null&&t!==void 0?t:10,o=(r=e?.delayMs)!==null&&r!==void 0?r:200,l=vs(e?.signal);if(typeof i!="function")throw new It(`Expected a function, got ${typeof i}`);let u=0,p;for(;u<s;){if(l.signal.aborted)throw new It(`Aborted after attempts ${u}`);try{return yield i({signal:l.signal})}catch(h){p=h,u++,u<s&&(yield rM(o))}}throw p})}function Lr(...i){try{console.debug("[TON_CONNECT_SDK]",...i)}catch{}}function ko(...i){try{console.error("[TON_CONNECT_SDK]",...i)}catch{}}function pN(...i){try{console.warn("[TON_CONNECT_SDK]",...i)}catch{}}function hN(i,e){let t=null,r=null,s=null,o=null,l=null,u=(g,...b)=>it(this,void 0,void 0,function*(){if(o=g??null,l?.abort(),l=vs(g),l.signal.aborted)throw new It("Resource creation was aborted");r=b??null;let v=i(l.signal,...b);s=v;let w=yield v;if(s!==v&&w!==t)throw yield e(w),new It("Resource creation was aborted by a new resource creation");return t=w,t});return{create:u,current:()=>t??null,dispose:()=>it(this,void 0,void 0,function*(){try{let g=t;t=null;let b=s;s=null;try{l?.abort()}catch{}yield Promise.allSettled([g?e(g):Promise.resolve(),b?e(yield b):Promise.resolve()])}catch{}}),recreate:g=>it(this,void 0,void 0,function*(){let b=t,v=s,w=r,k=o;if(yield rM(g),b===t&&v===s&&w===r&&k===o)return yield u(o,...w??[]);throw new It("Resource recreation was aborted by a new resource creation")})}}function dN(i,e){let t=e?.timeout,r=e?.signal,s=vs(r);return new Promise((o,l)=>it(this,void 0,void 0,function*(){if(s.signal.aborted){l(new It("Operation aborted"));return}let u;typeof t<"u"&&(u=setTimeout(()=>{s.abort(),l(new It(`Timeout after ${t}ms`))},t)),s.signal.addEventListener("abort",()=>{clearTimeout(u),l(new It("Operation aborted"))},{once:!0});let p={timeout:t,abort:s.signal};yield i((...h)=>{clearTimeout(u),o(...h)},()=>{clearTimeout(u),l()},p)}))}function mN(i){return it(this,void 0,void 0,function*(){return yield dN((e,t,r)=>it(this,void 0,void 0,function*(){var s;let l=vs(r.signal).signal;if(l.aborted){t(new It("Bridge connection aborted"));return}let u=new URL(iM(i.bridgeUrl,i.ssePath));u.searchParams.append("client_id",i.sessionId);let p=yield i.bridgeGatewayStorage.getLastEventId();if(p&&u.searchParams.append("last_event_id",p),l.aborted){t(new It("Bridge connection aborted"));return}let h=new EventSource(u.toString());h.onerror=f=>it(this,void 0,void 0,function*(){if(l.aborted){h.close(),t(new It("Bridge connection aborted"));return}try{let g=yield i.errorHandler(h,f);g!==h&&h.close(),g&&g!==h&&e(g)}catch(g){h.close(),t(g)}}),h.onopen=()=>{if(l.aborted){h.close(),t(new It("Bridge connection aborted"));return}e(h)},h.onmessage=f=>{if(l.aborted){h.close(),t(new It("Bridge connection aborted"));return}i.messageHandler(f)},(s=i.signal)===null||s===void 0||s.addEventListener("abort",()=>{h.close(),t(new It("Bridge connection aborted"))})}),{timeout:i.openingDeadlineMS,signal:i.signal})})}function ed(i){return!("connectEvent"in i)}function tM(i,e){return sM(i,[e])}function sM(i,e){return!i||typeof i!="object"?!1:e.every(t=>t in i)}function fN(i){try{return!tM(i,"tonconnect")||!tM(i.tonconnect,"walletInfo")?!1:sM(i.tonconnect.walletInfo,["name","app_name","image","about_url","platforms"])}catch{return!1}}function m0(){if(!(typeof window>"u"))return window}function gN(){let i=m0();if(!i)return[];try{return Object.keys(i)}catch{return[]}}function bN(){if(!(typeof document>"u"))return document}function yN(){var i;let e=(i=m0())===null||i===void 0?void 0:i.location.origin;return e?e+"/tonconnect-manifest.json":""}function _N(){if(xN())return localStorage;if(vN())throw new It("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return qS.getInstance()}function xN(){try{return typeof localStorage<"u"}catch{return!1}}function vN(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}function IN(i){return wN(i)&&i.injected}function SN(i){return IN(i)&&i.embedded}function wN(i){return"jsBridgeKey"in i}function EN(i,e){let t=i.includes("SendTransaction"),r=oM(i,"SendTransaction");if(!t&&!r)throw new Xh("Wallet doesn't support SendTransaction feature.");if(e.requireExtraCurrencies&&(!r||!r.extraCurrencySupported))throw new Xh("Wallet is not able to handle such SendTransaction request. Extra currencies support is required.");if(r&&r.maxMessages!==void 0){if(r.maxMessages<e.requiredMessagesNumber)throw new Xh(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${r.maxMessages}, but ${e.requiredMessagesNumber} is required.`);return}pN("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}function LN(i,e){if(typeof e!="object")return!0;let{sendTransaction:t}=e;if(t){let r=oM(i,"SendTransaction");if(!r||!TN(r,t))return!1}return!0}function oM(i,e){return i.find(t=>t&&typeof t=="object"&&t.name===e)}function TN(i,e){let t=e.minMessages===void 0||e.minMessages<=i.maxMessages,r=!e.extraCurrencyRequired||i.extraCurrencySupported;return!!(t&&r)}function CN(){return{type:"request-version"}}function AN(i){return{type:"response-version",version:i}}function nu(i){return{ton_connect_sdk_lib:i.ton_connect_sdk_lib,ton_connect_ui_lib:i.ton_connect_ui_lib}}function su(i,e){var t,r,s,o,l,u,p,h;let g=((t=e?.connectItems)===null||t===void 0?void 0:t.tonProof)&&"proof"in e.connectItems.tonProof?"ton_proof":"ton_addr";return{wallet_address:(s=(r=e?.account)===null||r===void 0?void 0:r.address)!==null&&s!==void 0?s:null,wallet_type:(o=e?.device.appName)!==null&&o!==void 0?o:null,wallet_version:(l=e?.device.appVersion)!==null&&l!==void 0?l:null,auth_type:g,custom_data:Object.assign({chain_id:(p=(u=e?.account)===null||u===void 0?void 0:u.chain)!==null&&p!==void 0?p:null,provider:(h=e?.provider)!==null&&h!==void 0?h:null},nu(i))}}function MN(i){return{type:"connection-started",custom_data:nu(i)}}function RN(i,e){return Object.assign({type:"connection-completed",is_success:!0},su(i,e))}function BN(i,e,t){return{type:"connection-error",is_success:!1,error_message:e,error_code:t??null,custom_data:nu(i)}}function DN(i){return{type:"connection-restoring-started",custom_data:nu(i)}}function NN(i,e){return Object.assign({type:"connection-restoring-completed",is_success:!0},su(i,e))}function ON(i,e){return{type:"connection-restoring-error",is_success:!1,error_message:e,custom_data:nu(i)}}function JS(i,e){var t,r,s,o;return{valid_until:(t=String(e.validUntil))!==null&&t!==void 0?t:null,from:(o=(r=e.from)!==null&&r!==void 0?r:(s=i?.account)===null||s===void 0?void 0:s.address)!==null&&o!==void 0?o:null,messages:e.messages.map(l=>{var u,p;return{address:(u=l.address)!==null&&u!==void 0?u:null,amount:(p=l.amount)!==null&&p!==void 0?p:null}})}}function FN(i,e,t){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},su(i,e)),JS(e,t))}function PN(i,e,t,r){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:r.boc},su(i,e)),JS(e,t))}function UN(i,e,t,r,s){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:r,error_code:s??null},su(i,e)),JS(e,t))}function HN(i,e,t){return Object.assign({type:"disconnection",scope:t},su(i,e))}var It,US,a0,l0,HS,c0,zS,Xh,jS,u0,p0,h0,GS,wa,ZA,WS,aN,VS,eM,KS,o0,$S,Zh,yl,nM,d0,qS,Js,YS,kN,td,QS,XS,zN,_l,jN,aM=_(()=>{"use strict";PS();PS();It=class i extends Error{constructor(e,t){super(e,t),this.message=`${i.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${e?`
`+e:""}`,Object.setPrototypeOf(this,i.prototype)}get info(){return""}};It.prefix="[TON_CONNECT_SDK_ERROR]";US=class i extends It{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},a0=class i extends It{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},l0=class i extends It{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},HS=class i extends It{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},c0=class i extends It{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},zS=class i extends It{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},Xh=class i extends It{get info(){return"Wallet doesn't support requested feature method."}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},jS=class i extends It{get info(){return"Missing required features. You need to update your wallet."}constructor(e,t){super(e,t),Object.setPrototypeOf(this,i.prototype)}};u0=class i extends It{get info(){return"User rejects the action in the wallet."}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},p0=class i extends It{get info(){return"Request to the wallet contains errors."}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},h0=class i extends It{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},GS=class i extends It{get info(){return"An error occurred while fetching the wallets list."}constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},wa=class i extends It{constructor(...e){super(...e),Object.setPrototypeOf(this,i.prototype)}},ZA={[Xs.UNKNOWN_ERROR]:wa,[Xs.USER_REJECTS_ERROR]:u0,[Xs.BAD_REQUEST_ERROR]:p0,[Xs.UNKNOWN_APP_ERROR]:h0,[Xs.MANIFEST_NOT_FOUND_ERROR]:l0,[Xs.MANIFEST_CONTENT_ERROR]:a0},WS=class{parseError(e){let t=wa;return e.code in ZA&&(t=ZA[e.code]||wa),new t(e.message)}},aN=new WS,VS=class{isError(e){return"error"in e}},eM={[Sa.UNKNOWN_ERROR]:wa,[Sa.USER_REJECTS_ERROR]:u0,[Sa.BAD_REQUEST_ERROR]:p0,[Sa.UNKNOWN_APP_ERROR]:h0},KS=class extends VS{convertToRpcRequest(e){return{method:"sendTransaction",params:[JSON.stringify(e)]}}parseAndThrowError(e){let t=wa;throw e.error.code in eM&&(t=eM[e.error.code]||wa),new t(e.error.message)}convertFromRpcResponse(e){return{boc:e.result}}},o0=new KS,$S=class{constructor(e,t){this.storage=e,this.storeKey="ton-connect-storage_http-bridge-gateway::"+t}storeLastEventId(e){return it(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,e)})}removeLastEventId(){return it(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return it(this,void 0,void 0,function*(){let e=yield this.storage.getItem(this.storeKey);return e||null})}};Zh=class{constructor(e,t,r,s,o){this.bridgeUrl=t,this.sessionId=r,this.listener=s,this.errorsListener=o,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.defaultReconnectDelay=2e3,this.defaultResendDelay=5e3,this.eventSource=hN((l,u)=>it(this,void 0,void 0,function*(){let p={bridgeUrl:this.bridgeUrl,ssePath:this.ssePath,sessionId:this.sessionId,bridgeGatewayStorage:this.bridgeGatewayStorage,errorHandler:this.errorsHandler.bind(this),messageHandler:this.messagesHandler.bind(this),signal:l,openingDeadlineMS:u};return yield mN(p)}),l=>it(this,void 0,void 0,function*(){l.close()})),this.bridgeGatewayStorage=new $S(e,t)}get isReady(){let e=this.eventSource.current();return e?.readyState===EventSource.OPEN}get isClosed(){let e=this.eventSource.current();return e?.readyState!==EventSource.OPEN}get isConnecting(){let e=this.eventSource.current();return e?.readyState===EventSource.CONNECTING}registerSession(e){return it(this,void 0,void 0,function*(){yield this.eventSource.create(e?.signal,e?.openingDeadlineMS)})}send(e,t,r,s){var o;return it(this,void 0,void 0,function*(){let l={};typeof s=="number"?l.ttl=s:(l.ttl=s?.ttl,l.signal=s?.signal,l.attempts=s?.attempts);let u=new URL(iM(this.bridgeUrl,this.postPath));u.searchParams.append("client_id",this.sessionId),u.searchParams.append("to",t),u.searchParams.append("ttl",(l?.ttl||this.defaultTtl).toString()),u.searchParams.append("topic",r);let p=FS.encode(e);yield Jh(h=>it(this,void 0,void 0,function*(){let f=yield this.post(u,p,h.signal);if(!f.ok)throw new It(`Bridge send failed, status ${f.status}`)}),{attempts:(o=l?.attempts)!==null&&o!==void 0?o:Number.MAX_SAFE_INTEGER,delayMs:this.defaultResendDelay,signal:l?.signal})})}pause(){this.eventSource.dispose().catch(e=>ko(`Bridge pause failed, ${e}`))}unPause(){return it(this,void 0,void 0,function*(){yield this.eventSource.recreate(0)})}close(){return it(this,void 0,void 0,function*(){yield this.eventSource.dispose().catch(e=>ko(`Bridge close failed, ${e}`))})}setListener(e){this.listener=e}setErrorsListener(e){this.errorsListener=e}post(e,t,r){return it(this,void 0,void 0,function*(){let s=yield fetch(e,{method:"post",body:t,signal:r});if(!s.ok)throw new It(`Bridge send failed, status ${s.status}`);return s})}errorsHandler(e,t){return it(this,void 0,void 0,function*(){if(this.isConnecting)throw e.close(),new It("Bridge error, failed to connect");if(this.isReady){try{this.errorsListener(t)}catch{}return}if(this.isClosed)return e.close(),Lr(`Bridge reconnecting, ${this.defaultReconnectDelay}ms delay`),yield this.eventSource.recreate(this.defaultReconnectDelay);throw new It("Bridge error, unknown state")})}messagesHandler(e){return it(this,void 0,void 0,function*(){if(e.data===this.heartbeatMessage||(yield this.bridgeGatewayStorage.storeLastEventId(e.lastEventId),this.isClosed))return;let t;try{t=JSON.parse(e.data)}catch(r){throw new It(`Bridge message parse failed, message ${r.data}`)}this.listener(t)})}};yl=class{constructor(e){this.storage=e,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(e){return it(this,void 0,void 0,function*(){if(e.type==="injected")return this.storage.setItem(this.storeKey,JSON.stringify(e));if(!ed(e)){let r={sessionKeyPair:e.session.sessionCrypto.stringifyKeypair(),walletPublicKey:e.session.walletPublicKey,bridgeUrl:e.session.bridgeUrl},s={type:"http",connectEvent:e.connectEvent,session:r,lastWalletEventId:e.lastWalletEventId,nextRpcRequestId:e.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(s))}let t={type:"http",connectionSource:e.connectionSource,sessionCrypto:e.sessionCrypto.stringifyKeypair()};return this.storage.setItem(this.storeKey,JSON.stringify(t))})}removeConnection(){return it(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return it(this,void 0,void 0,function*(){let e=yield this.storage.getItem(this.storeKey);if(!e)return null;let t=JSON.parse(e);if(t.type==="injected")return t;if("connectEvent"in t){let r=new ru(t.session.sessionKeyPair);return{type:"http",connectEvent:t.connectEvent,lastWalletEventId:t.lastWalletEventId,nextRpcRequestId:t.nextRpcRequestId,session:{sessionCrypto:r,bridgeUrl:t.session.bridgeUrl,walletPublicKey:t.session.walletPublicKey}}}return{type:"http",sessionCrypto:new ru(t.sessionCrypto),connectionSource:t.connectionSource}})}getHttpConnection(){return it(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new It("Trying to read HTTP connection source while nothing is stored");if(e.type==="injected")throw new It("Trying to read HTTP connection source while injected connection is stored");return e})}getHttpPendingConnection(){return it(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new It("Trying to read HTTP connection source while nothing is stored");if(e.type==="injected")throw new It("Trying to read HTTP connection source while injected connection is stored");if(!ed(e))throw new It("Trying to read HTTP-pending connection while http connection is stored");return e})}getInjectedConnection(){return it(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new It("Trying to read Injected bridge connection source while nothing is stored");if(e?.type==="http")throw new It("Trying to read Injected bridge connection source while HTTP connection is stored");return e})}storedConnectionType(){return it(this,void 0,void 0,function*(){let e=yield this.storage.getItem(this.storeKey);return e?JSON.parse(e).type:null})}storeLastWalletEventId(e){return it(this,void 0,void 0,function*(){let t=yield this.getConnection();if(t&&t.type==="http"&&!ed(t))return t.lastWalletEventId=e,this.storeConnection(t)})}getLastWalletEventId(){return it(this,void 0,void 0,function*(){let e=yield this.getConnection();if(e&&"lastWalletEventId"in e)return e.lastWalletEventId})}increaseNextRpcRequestId(){return it(this,void 0,void 0,function*(){let e=yield this.getConnection();if(e&&"nextRpcRequestId"in e){let t=e.nextRpcRequestId||0;return e.nextRpcRequestId=t+1,this.storeConnection(e)}})}getNextRpcRequestId(){return it(this,void 0,void 0,function*(){let e=yield this.getConnection();return e&&"nextRpcRequestId"in e&&e.nextRpcRequestId||0})}},nM=2,d0=class i{constructor(e,t){this.storage=e,this.walletConnectionSource=t,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.defaultOpeningDeadlineMS=12e3,this.defaultRetryTimeoutMS=2e3,this.connectionStorage=new yl(e)}static fromStorage(e){return it(this,void 0,void 0,function*(){let r=yield new yl(e).getHttpConnection();return ed(r)?new i(e,r.connectionSource):new i(e,{bridgeUrl:r.session.bridgeUrl})})}connect(e,t){var r;let s=vs(t?.signal);(r=this.abortController)===null||r===void 0||r.abort(),this.abortController=s,this.closeGateways();let o=new ru;this.session={sessionCrypto:o,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},this.connectionStorage.storeConnection({type:"http",connectionSource:this.walletConnectionSource,sessionCrypto:o}).then(()=>it(this,void 0,void 0,function*(){s.signal.aborted||(yield Jh(u=>{var p;return this.openGateways(o,{openingDeadlineMS:(p=t?.openingDeadlineMS)!==null&&p!==void 0?p:this.defaultOpeningDeadlineMS,signal:u?.signal})},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:s.signal}))}));let l="universalLink"in this.walletConnectionSource&&this.walletConnectionSource.universalLink?this.walletConnectionSource.universalLink:this.standardUniversalLink;return this.generateUniversalLink(l,e)}restoreConnection(e){var t,r;return it(this,void 0,void 0,function*(){let s=vs(e?.signal);if((t=this.abortController)===null||t===void 0||t.abort(),this.abortController=s,s.signal.aborted)return;this.closeGateways();let o=yield this.connectionStorage.getHttpConnection();if(!o||s.signal.aborted)return;let l=(r=e?.openingDeadlineMS)!==null&&r!==void 0?r:this.defaultOpeningDeadlineMS;if(ed(o))return this.session={sessionCrypto:o.sessionCrypto,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},yield this.openGateways(o.sessionCrypto,{openingDeadlineMS:l,signal:s?.signal});if(Array.isArray(this.walletConnectionSource))throw new It("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");if(this.session=o.session,this.gateway&&(Lr("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Zh(this.storage,this.walletConnectionSource.bridgeUrl,o.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),!s.signal.aborted){this.listeners.forEach(u=>u(o.connectEvent));try{yield Jh(u=>this.gateway.registerSession({openingDeadlineMS:l,signal:u.signal}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:s.signal})}catch{yield this.disconnect({signal:s.signal});return}}})}sendRequest(e,t){let r={};return typeof t=="function"?r.onRequestSent=t:(r.onRequestSent=t?.onRequestSent,r.signal=t?.signal,r.attempts=t?.attempts),new Promise((s,o)=>it(this,void 0,void 0,function*(){var l;if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new It("Trying to send bridge request without session");let u=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),Lr("Send http-bridge request:",Object.assign(Object.assign({},e),{id:u}));let p=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},e),{id:u})),Qh(this.session.walletPublicKey));try{yield this.gateway.send(p,this.session.walletPublicKey,e.method,{attempts:r?.attempts,signal:r?.signal}),(l=r?.onRequestSent)===null||l===void 0||l.call(r),this.pendingRequests.set(u.toString(),s)}catch(h){o(h)}}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(e){return it(this,void 0,void 0,function*(){return new Promise(t=>it(this,void 0,void 0,function*(){let r=!1,s=null,o=()=>{r||(r=!0,this.removeBridgeAndSession().then(t))};try{this.closeGateways();let l=vs(e?.signal);s=setTimeout(()=>{l.abort()},this.defaultOpeningDeadlineMS),yield this.sendRequest({method:"disconnect",params:[]},{onRequestSent:o,signal:l.signal,attempts:1})}catch(l){Lr("Disconnect error:",l),r||this.removeBridgeAndSession().then(t)}finally{s&&clearTimeout(s),o()}}))})}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}pause(){var e;(e=this.gateway)===null||e===void 0||e.pause(),this.pendingGateways.forEach(t=>t.pause())}unPause(){return it(this,void 0,void 0,function*(){let e=this.pendingGateways.map(t=>t.unPause());this.gateway&&e.push(this.gateway.unPause()),yield Promise.all(e)})}pendingGatewaysListener(e,t,r){return it(this,void 0,void 0,function*(){if(!this.pendingGateways.includes(e)){yield e.close();return}return this.closeGateways({except:e}),this.gateway&&(Lr("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.session.bridgeUrl=t,this.gateway=e,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(r)})}gatewayListener(e){return it(this,void 0,void 0,function*(){let t=JSON.parse(this.session.sessionCrypto.decrypt(FS.decode(e.message).toUint8Array(),Qh(e.from)));if(Lr("Wallet message received:",t),!("event"in t)){let s=t.id.toString(),o=this.pendingRequests.get(s);if(!o){Lr(`Response id ${s} doesn't match any request's id`);return}o(t),this.pendingRequests.delete(s);return}if(t.id!==void 0){let s=yield this.connectionStorage.getLastWalletEventId();if(s!==void 0&&t.id<=s){ko(`Received event id (=${t.id}) must be greater than stored last wallet event id (=${s}) `);return}t.event!=="connect"&&(yield this.connectionStorage.storeLastWalletEventId(t.id))}let r=this.listeners;t.event==="connect"&&(yield this.updateSession(t,e.from)),t.event==="disconnect"&&(Lr("Removing bridge and session: received disconnect event"),yield this.removeBridgeAndSession()),r.forEach(s=>s(t))})}gatewayErrorsListener(e){return it(this,void 0,void 0,function*(){throw new It(`Bridge error ${JSON.stringify(e)}`)})}updateSession(e,t){return it(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:t});let r=e.payload.items.find(o=>o.name==="ton_addr"),s=Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{items:[r]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:e.id,connectEvent:s,nextRpcRequestId:0})})}removeBridgeAndSession(){return it(this,void 0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(e,t){return cN(e)?this.generateTGUniversalLink(e,t):this.generateRegularUniversalLink(e,t)}generateRegularUniversalLink(e,t){let r=new URL(e);return r.searchParams.append("v",nM.toString()),r.searchParams.append("id",this.session.sessionCrypto.sessionId),r.searchParams.append("r",JSON.stringify(t)),r.toString()}generateTGUniversalLink(e,t){let s=this.generateRegularUniversalLink("about:blank",t).split("?")[1],o="tonconnect-"+uN(s),l=this.convertToDirectLink(e),u=new URL(l);return u.searchParams.append("startapp",o),u.toString()}convertToDirectLink(e){let t=new URL(e);return t.searchParams.has("attach")&&(t.searchParams.delete("attach"),t.pathname+="/start"),t.toString()}openGateways(e,t){return it(this,void 0,void 0,function*(){if(Array.isArray(this.walletConnectionSource)){this.pendingGateways.map(r=>r.close().catch()),this.pendingGateways=this.walletConnectionSource.map(r=>{let s=new Zh(this.storage,r.bridgeUrl,e.sessionId,()=>{},()=>{});return s.setListener(o=>this.pendingGatewaysListener(s,r.bridgeUrl,o)),s}),yield Promise.allSettled(this.pendingGateways.map(r=>Jh(s=>{var o;return this.pendingGateways.some(l=>l===r)?r.registerSession({openingDeadlineMS:(o=t?.openingDeadlineMS)!==null&&o!==void 0?o:this.defaultOpeningDeadlineMS,signal:s.signal}):r.close()},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:t?.signal})));return}else return this.gateway&&(Lr("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new Zh(this.storage,this.walletConnectionSource.bridgeUrl,e.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.gateway.registerSession({openingDeadlineMS:t?.openingDeadlineMS,signal:t?.signal})})}closeGateways(e){var t;(t=this.gateway)===null||t===void 0||t.close(),this.pendingGateways.filter(r=>r!==e?.except).forEach(r=>r.close()),this.pendingGateways=[]}};qS=class i{constructor(){this.storage={}}static getInstance(){return i.instance||(i.instance=new i),i.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){var t;return(t=this.storage[e])!==null&&t!==void 0?t:null}key(e){var t;let r=Object.keys(this.storage);return e<0||e>=r.length?null:(t=r[e])!==null&&t!==void 0?t:null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t}};Js=class i{constructor(e,t){this.injectedWalletKey=t,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];let r=i.window;if(!i.isWindowContainsWallet(r,t))throw new zS;this.connectionStorage=new yl(e),this.injectedWallet=r[t].tonconnect}static fromStorage(e){return it(this,void 0,void 0,function*(){let r=yield new yl(e).getInjectedConnection();return new i(e,r.jsBridgeKey)})}static isWalletInjected(e){return i.isWindowContainsWallet(this.window,e)}static isInsideWalletBrowser(e){return i.isWindowContainsWallet(this.window,e)?this.window[e].tonconnect.isWalletBrowser:!1}static getCurrentlyInjectedWallets(){return this.window?gN().filter(([r,s])=>fN(s)).map(([r,s])=>({name:s.tonconnect.walletInfo.name,appName:s.tonconnect.walletInfo.app_name,aboutUrl:s.tonconnect.walletInfo.about_url,imageUrl:s.tonconnect.walletInfo.image,tondns:s.tonconnect.walletInfo.tondns,jsBridgeKey:r,injected:!0,embedded:s.tonconnect.isWalletBrowser,platforms:s.tonconnect.walletInfo.platforms,features:s.tonconnect.walletInfo.features})):[]}static isWindowContainsWallet(e,t){return!!e&&t in e&&typeof e[t]=="object"&&"tonconnect"in e[t]}connect(e){this._connect(nM,e)}restoreConnection(){return it(this,void 0,void 0,function*(){try{Lr("Injected Provider restoring connection...");let e=yield this.injectedWallet.restoreConnection();Lr("Injected Provider restoring connection response",e),e.event==="connect"?(this.makeSubscriptions(),this.listeners.forEach(t=>t(e))):yield this.connectionStorage.removeConnection()}catch(e){yield this.connectionStorage.removeConnection(),console.error(e)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return it(this,void 0,void 0,function*(){return new Promise(e=>{let t=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(e)};try{this.injectedWallet.disconnect(),t()}catch(r){Lr(r),this.sendRequest({method:"disconnect",params:[]},t)}})})}closeAllListeners(){var e;this.listenSubscriptions=!1,this.listeners=[],(e=this.unsubscribeCallback)===null||e===void 0||e.call(this)}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}sendRequest(e,t){var r;return it(this,void 0,void 0,function*(){let s={};typeof t=="function"?s.onRequestSent=t:(s.onRequestSent=t?.onRequestSent,s.signal=t?.signal);let o=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),Lr("Send injected-bridge request:",Object.assign(Object.assign({},e),{id:o}));let l=this.injectedWallet.send(Object.assign(Object.assign({},e),{id:o}));return l.then(u=>Lr("Wallet message received:",u)),(r=s?.onRequestSent)===null||r===void 0||r.call(s),l})}_connect(e,t){return it(this,void 0,void 0,function*(){try{Lr(`Injected Provider connect request: protocolVersion: ${e}, message:`,t);let r=yield this.injectedWallet.connect(e,t);Lr("Injected Provider connect response:",r),r.event==="connect"&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(s=>s(r))}catch(r){Lr("Injected Provider connect error:",r);let s={event:"connect_error",payload:{code:0,message:r?.toString()}};this.listeners.forEach(o=>o(s))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(e=>{Lr("Wallet message received:",e),this.listenSubscriptions&&this.listeners.forEach(t=>t(e)),e.event==="disconnect"&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}};Js.window=m0();YS=class{constructor(){this.localStorage=_N()}getItem(e){return it(this,void 0,void 0,function*(){return this.localStorage.getItem(e)})}removeItem(e){return it(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}setItem(e,t){return it(this,void 0,void 0,function*(){this.localStorage.setItem(e,t)})}};kN=[{app_name:"telegram-wallet",name:"Wallet",image:"https://wallet.tg/images/logo-288.png",about_url:"https://wallet.tg/",universal_url:"https://t.me/wallet?attach=wallet",bridge:[{type:"sse",url:"https://walletbot.me/tonconnect-bridge/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"tonkeeper",name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",deepLink:"tonkeeper-tc://",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"mytonwallet",name:"MyTonWallet",image:"https://static.mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",universal_url:"https://connect.mytonwallet.org",bridge:[{type:"js",key:"mytonwallet"},{type:"sse",url:"https://tonconnectbridge.mytonwallet.org/bridge/"}],platforms:["chrome","windows","macos","linux","ios","android","firefox"]},{app_name:"tonhub",name:"Tonhub",image:"https://tonhub.com/tonconnect_logo.png",about_url:"https://tonhub.com",universal_url:"https://tonhub.com/ton-connect",bridge:[{type:"js",key:"tonhub"},{type:"sse",url:"https://connect.tonhubapi.com/tonconnect"}],platforms:["ios","android"]},{app_name:"bitgetTonWallet",name:"Bitget Wallet",image:"https://raw.githubusercontent.com/bitgetwallet/download/refs/heads/main/logo/png/bitget_wallet_logo_288_mini.png",about_url:"https://web3.bitget.com",deepLink:"bitkeep://",bridge:[{type:"js",key:"bitgetTonWallet"},{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","chrome"],universal_url:"https://bkcode.vip/ton-connect"},{app_name:"okxMiniWallet",name:"OKX Mini Wallet",image:"https://static.okx.com/cdn/assets/imgs/2411/8BE1A4A434D8F58A.png",about_url:"https://www.okx.com/web3",universal_url:"https://t.me/OKX_WALLET_BOT?attach=wallet",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"binanceWeb3TonWallet",name:"Binance Web3 Wallet",image:"https://public.bnbstatic.com/static/binance-w3w/ton-provider/binancew3w.png",about_url:"https://www.binance.com/en/web3wallet",deepLink:"bnc://app.binance.com/cedefi/ton-connect",bridge:[{type:"js",key:"binancew3w"},{type:"sse",url:"https://wallet.binance.com/tonbridge/bridge"}],platforms:["ios","android","macos","windows","linux"],universal_url:"https://app.binance.com/cedefi/ton-connect"},{app_name:"fintopio-tg",name:"Fintopio",image:"https://fintopio.com/tonconnect-icon.png",about_url:"https://fintopio.com",universal_url:"https://t.me/fintopio?attach=wallet",bridge:[{type:"sse",url:"https://wallet-bridge.fintopio.com/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"okxTonWallet",name:"OKX Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",universal_url:"https://www.okx.com/download?appendQuery=true&deeplink=okx://web3/wallet/tonconnect",bridge:[{type:"js",key:"okxTonWallet"},{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"]},{app_name:"hot",name:"HOT",image:"https://raw.githubusercontent.com/hot-dao/media/main/logo.png",about_url:"https://hot-labs.org/",universal_url:"https://t.me/herewalletbot?attach=wallet",bridge:[{type:"sse",url:"https://sse-bridge.hot-labs.org"},{type:"js",key:"hotWallet"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"bybitTonWallet",name:"Bybit Wallet",image:"https://raw.githubusercontent.com/bybit-web3/bybit-web3.github.io/main/docs/images/bybit-logo.png",about_url:"https://www.bybit.com/web3",universal_url:"https://app.bybit.com/ton-connect",deepLink:"bybitapp://",bridge:[{type:"js",key:"bybitTonWallet"},{type:"sse",url:"https://api-node.bybit.com/spot/api/web3/bridge/ton/bridge"}],platforms:["ios","android","chrome"]},{app_name:"dewallet",name:"DeWallet",image:"https://raw.githubusercontent.com/delab-team/manifests-images/main/WalletAvatar.png",about_url:"https://delabwallet.com",universal_url:"https://t.me/dewallet?attach=wallet",bridge:[{type:"sse",url:"https://bridge.dewallet.pro/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"safepalwallet",name:"SafePal",image:"https://s.pvcliping.com/web/public_image/SafePal_x288.png",tondns:"",about_url:"https://www.safepal.com",universal_url:"https://link.safepal.io/ton-connect",deepLink:"safepal-tc://",bridge:[{type:"sse",url:"https://ton-bridge.safepal.com/tonbridge/v1/bridge"},{type:"js",key:"safepalwallet"}],platforms:["ios","android","chrome","firefox"]},{app_name:"GateWallet",name:"GateWallet",image:"https://img.gatedataimg.com/prd-ordinal-imgs/036f07bb8730716e/gateio-0925.png",about_url:"https://www.gate.io/",bridge:[{type:"js",key:"gatetonwallet"},{type:"sse",url:"https://dapp.gateio.services/tonbridge_api/bridge/v1"}],platforms:["ios","android"],universal_url:"https://gateio.go.link/gateio/web3?adj_t=1ff8khdw_1fu4ccc7"},{app_name:"openmask",name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}],platforms:["chrome"]},{app_name:"BitgetWeb3",name:"BitgetWeb3",image:"https://img.bitgetimg.com/image/third/1731638059795.png",about_url:"​https://www.bitget.com",universal_url:"https://t.me/BitgetOfficialBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","windows","macos","linux"]},{app_name:"tobi",name:"Tobi",image:"https://app.tobiwallet.app/icons/logo-288.png",about_url:"https://tobi.fun",universal_url:"https://t.me/TobiCopilotBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-bridge.tobiwallet.app/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"xtonwallet",name:"XTONWallet",image:"https://xtonwallet.com/assets/img/icon-256-back.png",about_url:"https://xtonwallet.com",bridge:[{type:"js",key:"xtonwallet"}],platforms:["chrome","firefox"]},{app_name:"tonwallet",name:"TON Wallet",image:"https://wallet.ton.org/assets/ui/qr-logo.png",about_url:"https://chrome.google.com/webstore/detail/ton-wallet/nphplpgoakhhjchkkhmiggakijnkhfnd",bridge:[{type:"js",key:"tonwallet"}],platforms:["chrome"]}],td=class{constructor(e){var t;this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null,this.walletsListSource=(t=e?.walletsListSource)!==null&&t!==void 0?t:"https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets-v2.json",this.cacheTTLMs=e?.cacheTTLMs}getWallets(){return it(this,void 0,void 0,function*(){return this.cacheTTLMs&&this.walletsListCacheCreationTimestamp&&Date.now()>this.walletsListCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListCache=null),this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.then(()=>{this.walletsListCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null})),this.walletsListCache})}getEmbeddedWallet(){return it(this,void 0,void 0,function*(){let t=(yield this.getWallets()).filter(SN);return t.length===1?t[0]:null})}fetchWalletsList(){return it(this,void 0,void 0,function*(){let e=[];try{if(e=yield(yield fetch(this.walletsListSource)).json(),!Array.isArray(e))throw new GS("Wrong wallets list format, wallets list must be an array.");let s=e.filter(o=>!this.isCorrectWalletConfigDTO(o));s.length&&(ko(`Wallet(s) ${s.map(o=>o?.name||"unknown").join(", ")} config format is wrong. They were removed from the wallets list.`),e=e.filter(o=>this.isCorrectWalletConfigDTO(o)))}catch(r){ko(r),e=kN}let t=[];try{t=Js.getCurrentlyInjectedWallets()}catch(r){ko(r)}return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(e),t)})}walletConfigDTOListToWalletConfigList(e){return e.map(t=>{let r={name:t.name,appName:t.app_name,imageUrl:t.image,aboutUrl:t.about_url,tondns:t.tondns,platforms:t.platforms,features:t.features};return t.bridge.forEach(s=>{if(s.type==="sse"&&(r.bridgeUrl=s.url,r.universalLink=t.universal_url,r.deepLink=t.deepLink),s.type==="js"){let o=s.key;r.jsBridgeKey=o,r.injected=Js.isWalletInjected(o),r.embedded=Js.isInsideWalletBrowser(o)}}),r})}mergeWalletsLists(e,t){return[...new Set(e.concat(t).map(s=>s.name)).values()].map(s=>{let o=e.find(u=>u.name===s),l=t.find(u=>u.name===s);return Object.assign(Object.assign({},o&&Object.assign({},o)),l&&Object.assign({},l))})}isCorrectWalletConfigDTO(e){if(!e||typeof e!="object")return!1;let t="name"in e,r="app_name"in e,s="image"in e,o="about_url"in e,l="platforms"in e;if(!t||!s||!o||!l||!r||!e.platforms||!Array.isArray(e.platforms)||!e.platforms.length||!("bridge"in e)||!Array.isArray(e.bridge)||!e.bridge.length)return!1;let u=e.bridge;if(u.some(f=>!f||typeof f!="object"||!("type"in f)))return!1;let p=u.find(f=>f.type==="sse");if(p&&(!(typeof p=="object"&&"url"in p)||!p.url||!e.universal_url))return!1;let h=u.find(f=>f.type==="js");return!(h&&(typeof h!="object"||!("key"in h)||!h.key))}};QS=class{constructor(){this.window=m0()}dispatchEvent(e,t){var r;return it(this,void 0,void 0,function*(){let s=new CustomEvent(e,{detail:t});(r=this.window)===null||r===void 0||r.dispatchEvent(s)})}addEventListener(e,t,r){var s;return it(this,void 0,void 0,function*(){return(s=this.window)===null||s===void 0||s.addEventListener(e,t,r),()=>{var o;return(o=this.window)===null||o===void 0?void 0:o.removeEventListener(e,t)}})}},XS=class{constructor(e){var t;this.eventPrefix="ton-connect-",this.tonConnectUiVersion=null,this.eventDispatcher=(t=e?.eventDispatcher)!==null&&t!==void 0?t:new QS,this.tonConnectSdkVersion=e.tonConnectSdkVersion,this.init().catch()}get version(){return nu({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}init(){return it(this,void 0,void 0,function*(){try{yield this.setRequestVersionHandler(),this.tonConnectUiVersion=yield this.requestTonConnectUiVersion()}catch{}})}setRequestVersionHandler(){return it(this,void 0,void 0,function*(){yield this.eventDispatcher.addEventListener("ton-connect-request-version",()=>it(this,void 0,void 0,function*(){yield this.eventDispatcher.dispatchEvent("ton-connect-response-version",AN(this.tonConnectSdkVersion))}))})}requestTonConnectUiVersion(){return it(this,void 0,void 0,function*(){return new Promise((e,t)=>it(this,void 0,void 0,function*(){try{yield this.eventDispatcher.addEventListener("ton-connect-ui-response-version",r=>{e(r.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version",CN())}catch(r){t(r)}}))})}dispatchUserActionEvent(e){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch{}}trackConnectionStarted(...e){try{let t=MN(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}trackConnectionCompleted(...e){try{let t=RN(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}trackConnectionError(...e){try{let t=BN(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}trackConnectionRestoringStarted(...e){try{let t=DN(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}trackConnectionRestoringCompleted(...e){try{let t=NN(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}trackConnectionRestoringError(...e){try{let t=ON(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}trackDisconnection(...e){try{let t=HN(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}trackTransactionSentForSignature(...e){try{let t=FN(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}trackTransactionSigned(...e){try{let t=PN(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}trackTransactionSigningFailed(...e){try{let t=UN(this.version,...e);this.dispatchUserActionEvent(t)}catch{}}},zN="3.1.0",_l=class{constructor(e){if(this.walletsList=new td,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:e?.manifestUrl||yN(),storage:e?.storage||new YS},this.walletsRequiredFeatures=e?.walletsRequiredFeatures,this.walletsList=new td({walletsListSource:e?.walletsListSource,cacheTTLMs:e?.walletsListCacheTTLMs}),this.tracker=new XS({eventDispatcher:e?.eventDispatcher,tonConnectSdkVersion:zN}),!this.dappSettings.manifestUrl)throw new US("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new yl(this.dappSettings.storage),e?.disableAutoPauseConnection||this.addWindowFocusAndBlurSubscriptions()}static getWallets(){return this.walletsList.getWallets()}get connected(){return this._wallet!==null}get account(){var e;return((e=this._wallet)===null||e===void 0?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach(t=>t(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(r=>r!==e),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(r=>r!==t))}}connect(e,t){var r,s;let o={};if(typeof t=="object"&&"tonProof"in t&&(o.request=t),typeof t=="object"&&("openingDeadlineMS"in t||"signal"in t||"request"in t)&&(o.request=t?.request,o.openingDeadlineMS=t?.openingDeadlineMS,o.signal=t?.signal),this.connected)throw new HS;let l=vs(o?.signal);if((r=this.abortController)===null||r===void 0||r.abort(),this.abortController=l,l.signal.aborted)throw new It("Connection was aborted");return(s=this.provider)===null||s===void 0||s.closeConnection(),this.provider=this.createProvider(e),l.signal.addEventListener("abort",()=>{var u;(u=this.provider)===null||u===void 0||u.closeConnection(),this.provider=null}),this.tracker.trackConnectionStarted(),this.provider.connect(this.createConnectRequest(o?.request),{openingDeadlineMS:o?.openingDeadlineMS,signal:l.signal})}restoreConnection(e){var t,r;return it(this,void 0,void 0,function*(){this.tracker.trackConnectionRestoringStarted();let s=vs(e?.signal);if((t=this.abortController)===null||t===void 0||t.abort(),this.abortController=s,s.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let[o,l]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);if(s.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let u=null;try{switch(o){case"http":u=yield d0.fromStorage(this.dappSettings.storage);break;case"injected":u=yield Js.fromStorage(this.dappSettings.storage);break;default:if(l)u=this.createProvider(l);else return}}catch{this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),u?.closeConnection(),u=null;return}if(s.signal.aborted){u?.closeConnection(),this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}if(!u){ko("Provider is not restored"),this.tracker.trackConnectionRestoringError("Provider is not restored");return}(r=this.provider)===null||r===void 0||r.closeConnection(),this.provider=u,u.listen(this.walletEventsListener.bind(this));let p=()=>{this.tracker.trackConnectionRestoringError("Connection restoring was aborted"),u?.closeConnection(),u=null};s.signal.addEventListener("abort",p);let h=Jh(g=>it(this,void 0,void 0,function*(){yield u?.restoreConnection({openingDeadlineMS:e?.openingDeadlineMS,signal:g.signal}),s.signal.removeEventListener("abort",p),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:2e3,signal:e?.signal}),f=new Promise(g=>setTimeout(()=>g(),12e3));return Promise.race([h,f])})}sendTransaction(e,t){return it(this,void 0,void 0,function*(){let r={};typeof t=="function"?r.onRequestSent=t:(r.onRequestSent=t?.onRequestSent,r.signal=t?.signal);let s=vs(r?.signal);if(s.signal.aborted)throw new It("Transaction sending was aborted");this.checkConnection();let o=e.messages.length,l=e.messages.some(w=>w.extraCurrency&&Object.keys(w.extraCurrency).length>0);EN(this.wallet.device.features,{requiredMessagesNumber:o,requireExtraCurrencies:l}),this.tracker.trackTransactionSentForSignature(this.wallet,e);let{validUntil:u,messages:p}=e,h=JA(e,["validUntil","messages"]),f=e.from||this.account.address,g=e.network||this.account.chain,b=yield this.provider.sendRequest(o0.convertToRpcRequest(Object.assign(Object.assign({},h),{from:f,network:g,valid_until:u,messages:p.map(w=>{var{extraCurrency:k}=w,E=JA(w,["extraCurrency"]);return Object.assign(Object.assign({},E),{extra_currency:k})})})),{onRequestSent:r.onRequestSent,signal:s.signal});if(o0.isError(b))return this.tracker.trackTransactionSigningFailed(this.wallet,e,b.error.message,b.error.code),o0.parseAndThrowError(b);let v=o0.convertFromRpcResponse(b);return this.tracker.trackTransactionSigned(this.wallet,e,v),v})}disconnect(e){var t;return it(this,void 0,void 0,function*(){if(!this.connected)throw new c0;let r=vs(e?.signal),s=this.abortController;if(this.abortController=r,r.signal.aborted)throw new It("Disconnect was aborted");this.onWalletDisconnected("dapp"),yield(t=this.provider)===null||t===void 0?void 0:t.disconnect({signal:r.signal}),s?.abort()})}pauseConnection(){var e;((e=this.provider)===null||e===void 0?void 0:e.type)==="http"&&this.provider.pause()}unPauseConnection(){var e;return((e=this.provider)===null||e===void 0?void 0:e.type)!=="http"?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){let e=bN();if(e)try{e.addEventListener("visibilitychange",()=>{e.hidden?this.pauseConnection():this.unPauseConnection().catch()})}catch(t){ko("Cannot subscribe to the document.visibilitychange: ",t)}}createProvider(e){let t;return!Array.isArray(e)&&oN(e)?t=new Js(this.dappSettings.storage,e.jsBridgeKey):t=new d0(this.dappSettings.storage,e),t.listen(this.walletEventsListener.bind(this)),t}walletEventsListener(e){switch(e.event){case"connect":this.onWalletConnected(e.payload);break;case"connect_error":this.tracker.trackConnectionError(e.payload.message,e.payload.code);let t=aN.parseError(e.payload);this.onWalletConnectError(t);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(e){var t;let r=e.items.find(u=>u.name==="ton_addr"),s=e.items.find(u=>u.name==="ton_proof");if(!r)throw new It("ton_addr connection item was not found");if(!LN(e.device.features,this.walletsRequiredFeatures)){(t=this.provider)===null||t===void 0||t.disconnect(),this.onWalletConnectError(new jS("Wallet does not support required features",{cause:{connectEvent:e}}));return}let l={device:e.device,provider:this.provider.type,account:{address:r.address,chain:r.network,walletStateInit:r.walletStateInit,publicKey:r.publicKey}};s&&(l.connectItems={tonProof:s}),this.wallet=l,this.tracker.trackConnectionCompleted(l)}onWalletConnectError(e){if(this.statusChangeErrorSubscriptions.forEach(t=>t(e)),Lr(e),e instanceof l0||e instanceof a0)throw ko(e),e}onWalletDisconnected(e){this.tracker.trackDisconnection(this.wallet,e),this.wallet=null}checkConnection(){if(!this.connected)throw new c0}createConnectRequest(e){let t=[{name:"ton_addr"}];return e?.tonProof&&t.push({name:"ton_proof",payload:e.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:t}}};_l.walletsList=new td;_l.isWalletInjected=i=>Js.isWalletInjected(i);_l.isInsideWalletBrowser=i=>Js.isInsideWalletBrowser(i);jN={};for(let i=0;i<=255;i++){let e=i.toString(16);e.length<2&&(e="0"+e),jN[e]=i}});var lM,cM=_(()=>{"use strict";lM={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}}});var uM,pM=_(()=>{"use strict";Yr();Sb();Lh();lS();uM={block:QL({format(i){return{transactions:i.transactions?.map(t=>{if(typeof t=="string")return t;let r=ol(t);return r.typeHex==="0x7e"&&(r.isSystemTx=t.isSystemTx,r.mint=t.mint?Ki(t.mint):void 0,r.sourceHash=t.sourceHash,r.type="deposit"),r}),stateRoot:i.stateRoot}}}),transaction:YL({format(i){let e={};return i.type==="0x7e"&&(e.isSystemTx=i.isSystemTx,e.mint=i.mint?Ki(i.mint):void 0,e.sourceHash=i.sourceHash,e.type="deposit"),e}}),transactionReceipt:V2({format(i){return{l1GasPrice:i.l1GasPrice?Ki(i.l1GasPrice):null,l1GasUsed:i.l1GasUsed?Ki(i.l1GasUsed):null,l1Fee:i.l1Fee?Ki(i.l1Fee):null,l1FeeScalar:i.l1FeeScalar?Number(i.l1FeeScalar):null}}})}});function GN(i,e){return VN(i)?WN(i):j2(i,e)}function WN(i){KN(i);let{sourceHash:e,data:t,from:r,gas:s,isSystemTx:o,mint:l,to:u,value:p}=i,h=[e,r,u??"0x",l?tt(l):"0x",p?tt(p):"0x",s?tt(s):"0x",o?"0x1":"0x",t??"0x"];return Qr(["0x7e",ys(h)])}function VN(i){return i.type==="deposit"||typeof i.sourceHash<"u"}function KN(i){let{from:e,to:t}=i;if(e&&!Bi(e))throw new Gi({address:e});if(t&&!Bi(t))throw new Gi({address:t})}var hM,dM=_(()=>{"use strict";Ns();ms();Vn();vt();fb();oS();hM={transaction:GN}});var xl,f0=_(()=>{"use strict";cM();pM();dM();xl={contracts:lM,formatters:uM,serializers:hM}});var id,mM=_(()=>{"use strict";es();id=er({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}})});var g0,fM=_(()=>{"use strict";es();g0=er({id:97,name:"Binance Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0})});var b0,gM=_(()=>{"use strict";es();b0=er({id:8217,name:"Klaytn",nativeCurrency:{decimals:18,name:"Klaytn",symbol:"KLAY"},rpcUrls:{default:{http:["https://public-en-cypress.klaytn.net"]}},blockExplorers:{default:{name:"KlaytnScope",url:"https://scope.klaytn.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:96002415}}})});var y0,bM=_(()=>{"use strict";es();y0=er({id:1890,name:"LightLink Phoenix Mainnet",network:"lightlink-phoenix",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://replicator.phoenix.lightlink.io/rpc/v1"]}},blockExplorers:{default:{name:"LightLink Phoenix Explorer",url:"https://phoenix.lightlink.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:125499184}},testnet:!1})});var ou,yM=_(()=>{"use strict";es();ou=er({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}})});var _0,_M=_(()=>{"use strict";es();_0=er({id:5e3,name:"Mantle",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Explorer",url:"https://mantlescan.xyz/",apiUrl:"https://api.mantlescan.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:304717}}})});var x0,xM=_(()=>{"use strict";es();x0=er({id:5003,name:"Mantle Sepolia Testnet",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.sepolia.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Testnet Explorer",url:"https://explorer.sepolia.mantle.xyz/",apiUrl:"https://explorer.sepolia.mantle.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:4584012}},testnet:!0})});var v0,I0,vM=_(()=>{"use strict";f0();es();v0=56,I0=er({id:204,name:"opBNB",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{default:{http:["https://opbnb-mainnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opBNB (BSCScan)",url:"https://opbnb.bscscan.com",apiUrl:"https://api-opbnb.bscscan.com/api"}},contracts:{...xl.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:512881},l2OutputOracle:{[v0]:{address:"0x153CAB79f4767E2ff862C94aa49573294B13D169"}},portal:{[v0]:{address:"0x1876EA7702C0ad0C6A2ae6036DE7733edfBca519"}},l1StandardBridge:{[v0]:{address:"0xF05F0e4362859c3331Cb9395CBC201E3Fa6757Ea"}}},sourceId:v0})});var S0,w0,IM=_(()=>{"use strict";f0();es();S0=97,w0=er({id:5611,name:"opBNB Testnet",nativeCurrency:{decimals:18,name:"tBNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://opbnb-testnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opbnbscan",url:"https://testnet.opbnbscan.com"}},contracts:{...xl.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:3705108},l2OutputOracle:{[S0]:{address:"0xFf2394Bb843012562f4349C6632a0EcB92fC8810"}},portal:{[S0]:{address:"0x4386C8ABf2009aC0c263462Da568DD9d46e52a31"}},l1StandardBridge:{[S0]:{address:"0x677311Fd2cCc511Bbc0f581E8d9a07B033D5E840"}}},testnet:!0,sourceId:S0})});var rd,k0,SM=_(()=>{"use strict";f0();es();rd=1,k0=er({...xl,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...xl.contracts,disputeGameFactory:{[rd]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[rd]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[rd]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[rd]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:rd})});var E0,wM=_(()=>{"use strict";es();E0=er({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0})});var kM=_(()=>{"use strict";mM();fM();gM();bM();yM();_M();xM();vM();IM();SM();wM()});var oR=lf(Hr=>{"use strict";var rw=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,e,t){i!=Array.prototype&&i!=Object.prototype&&(i[e]=t.value)},vl=typeof window<"u"&&window===Hr?Hr:typeof global<"u"&&global!=null?global:Hr;function $N(i,e){if(e){var t=vl;i=i.split(".");for(var r=0;r<i.length-1;r++){var s=i[r];s in t||(t[s]={}),t=t[s]}i=i[i.length-1],r=t[i],e=e(r),e!=r&&e!=null&&rw(t,i,{configurable:!0,writable:!0,value:e})}}function qN(i){var e=0;return function(){return e<i.length?{done:!1,value:i[e++]}:{done:!0}}}function MM(){MM=function(){},vl.Symbol||(vl.Symbol=YN)}function RM(i,e){this.a=i,rw(this,"description",{configurable:!0,writable:!0,value:e})}RM.prototype.toString=function(){return this.a};var YN=function(){function i(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new RM("jscomp_symbol_"+(t||"")+"_"+e++,t)}var e=0;return i}();function nw(){MM();var i=vl.Symbol.iterator;i||(i=vl.Symbol.iterator=vl.Symbol("Symbol.iterator")),typeof Array.prototype[i]!="function"&&rw(Array.prototype,i,{configurable:!0,writable:!0,value:function(){return QN(qN(this))}}),nw=function(){}}function QN(i){return nw(),i={next:i},i[vl.Symbol.iterator]=function(){return this},i}function XN(i,e){nw(),i instanceof String&&(i+="");var t=0,r={next:function(){if(t<i.length){var s=t++;return{value:e(s,i[s]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}$N("Array.prototype.entries",function(i){return i||function(){return XN(this,function(e,t){return[e,t]})}});var JN=Hr||self;function rt(i,e,t){i=i.split("."),t=t||JN,i[0]in t||typeof t.execScript>"u"||t.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||e===void 0?t[r]&&t[r]!==Object.prototype[r]?t=t[r]:t=t[r]={}:t[r]=e}function Eo(i){var e=typeof i;if(e=="object")if(i){if(i instanceof Array)return"array";if(i instanceof Object)return e;var t=Object.prototype.toString.call(i);if(t=="[object Window]")return"object";if(t=="[object Array]"||typeof i.length=="number"&&typeof i.splice<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("splice"))return"array";if(t=="[object Function]"||typeof i.call<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("call"))return"function"}else return"null";else if(e=="function"&&typeof i.call>"u")return"object";return e}function EM(i){var e=typeof i;return e=="object"&&i!=null||e=="function"}function ZN(i,e,t){rt(i,e,t)}function eO(i,e){function t(){}t.prototype=e.prototype,i.prototype=new t,i.prototype.constructor=i}var LM="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tO(i,e){for(var t,r,s=1;s<arguments.length;s++){r=arguments[s];for(t in r)i[t]=r[t];for(var o=0;o<LM.length;o++)t=LM[o],Object.prototype.hasOwnProperty.call(r,t)&&(i[t]=r[t])}}var iO=Array.prototype.forEach?function(i,e){Array.prototype.forEach.call(i,e,void 0)}:function(i,e){for(var t=i.length,r=typeof i=="string"?i.split(""):i,s=0;s<t;s++)s in r&&e.call(void 0,r[s],s,i)},ld=Array.prototype.map?function(i,e){return Array.prototype.map.call(i,e,void 0)}:function(i,e){for(var t=i.length,r=Array(t),s=typeof i=="string"?i.split(""):i,o=0;o<t;o++)o in s&&(r[o]=e.call(void 0,s[o],o,i));return r};function rO(i,e,t){return 2>=arguments.length?Array.prototype.slice.call(i,e):Array.prototype.slice.call(i,e,t)}function T0(i,e,t,r){var s="Assertion failed";if(t){s+=": "+t;var o=r}else i&&(s+=": "+i,o=e);throw Error(s,o||[])}function se(i,e,t){for(var r=[],s=2;s<arguments.length;++s)r[s-2]=arguments[s];return i||T0("",null,e,r),i}function nO(i,e,t){for(var r=[],s=2;s<arguments.length;++s)r[s-2]=arguments[s];typeof i!="string"&&T0("Expected string but got %s: %s.",[Eo(i),i],e,r)}function sO(i,e,t){for(var r=[],s=2;s<arguments.length;++s)r[s-2]=arguments[s];Array.isArray(i)||T0("Expected array but got %s: %s.",[Eo(i),i],e,r)}function Tr(i,e){for(var t=[],r=1;r<arguments.length;++r)t[r-1]=arguments[r];throw Error("Failure"+(i?": "+i:""),t)}function Ss(i,e,t,r){for(var s=[],o=3;o<arguments.length;++o)s[o-3]=arguments[o];i instanceof e||T0("Expected instanceof %s but got %s.",[TM(e),TM(i)],t,s)}function TM(i){return i instanceof Function?i.displayName||i.name||"unknown type name":i instanceof Object?i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i):i===null?"null":typeof i}function Ct(i,e){if(this.c=i,this.b=e,this.a={},this.arrClean=!0,0<this.c.length){for(i=0;i<this.c.length;i++){e=this.c[i];var t=e[0];this.a[t.toString()]=new BM(t,e[1])}this.arrClean=!0}}rt("jspb.Map",Ct,void 0);Ct.prototype.g=function(){if(this.arrClean){if(this.b){var i=this.a,e;for(e in i)if(Object.prototype.hasOwnProperty.call(i,e)){var t=i[e].a;t&&t.g()}}}else{for(this.c.length=0,i=ka(this),i.sort(),e=0;e<i.length;e++){var r=this.a[i[e]];(t=r.a)&&t.g(),this.c.push([r.key,r.value])}this.arrClean=!0}return this.c};Ct.prototype.toArray=Ct.prototype.g;Ct.prototype.Mc=function(i,e){for(var t=this.g(),r=[],s=0;s<t.length;s++){var o=this.a[t[s][0].toString()];lu(this,o);var l=o.a;l?(se(e),r.push([o.key,e(i,l)])):r.push([o.key,o.value])}return r};Ct.prototype.toObject=Ct.prototype.Mc;Ct.fromObject=function(i,e,t){e=new Ct([],e);for(var r=0;r<i.length;r++){var s=i[r][0],o=t(i[r][1]);e.set(s,o)}return e};function cd(i){this.a=0,this.b=i}cd.prototype.next=function(){return this.a<this.b.length?{done:!1,value:this.b[this.a++]}:{done:!0,value:void 0}};typeof Symbol<"u"&&(cd.prototype[Symbol.iterator]=function(){return this});Ct.prototype.Jb=function(){return ka(this).length};Ct.prototype.getLength=Ct.prototype.Jb;Ct.prototype.clear=function(){this.a={},this.arrClean=!1};Ct.prototype.clear=Ct.prototype.clear;Ct.prototype.Cb=function(i){i=i.toString();var e=this.a.hasOwnProperty(i);return delete this.a[i],this.arrClean=!1,e};Ct.prototype.del=Ct.prototype.Cb;Ct.prototype.Eb=function(){var i=[],e=ka(this);e.sort();for(var t=0;t<e.length;t++){var r=this.a[e[t]];i.push([r.key,r.value])}return i};Ct.prototype.getEntryList=Ct.prototype.Eb;Ct.prototype.entries=function(){var i=[],e=ka(this);e.sort();for(var t=0;t<e.length;t++){var r=this.a[e[t]];i.push([r.key,lu(this,r)])}return new cd(i)};Ct.prototype.entries=Ct.prototype.entries;Ct.prototype.keys=function(){var i=[],e=ka(this);e.sort();for(var t=0;t<e.length;t++)i.push(this.a[e[t]].key);return new cd(i)};Ct.prototype.keys=Ct.prototype.keys;Ct.prototype.values=function(){var i=[],e=ka(this);e.sort();for(var t=0;t<e.length;t++)i.push(lu(this,this.a[e[t]]));return new cd(i)};Ct.prototype.values=Ct.prototype.values;Ct.prototype.forEach=function(i,e){var t=ka(this);t.sort();for(var r=0;r<t.length;r++){var s=this.a[t[r]];i.call(e,lu(this,s),s.key,this)}};Ct.prototype.forEach=Ct.prototype.forEach;Ct.prototype.set=function(i,e){var t=new BM(i);return this.b?(t.a=e,t.value=e.g()):t.value=e,this.a[i.toString()]=t,this.arrClean=!1,this};Ct.prototype.set=Ct.prototype.set;function lu(i,e){return i.b?(e.a||(e.a=new i.b(e.value)),e.a):e.value}Ct.prototype.get=function(i){if(i=this.a[i.toString()])return lu(this,i)};Ct.prototype.get=Ct.prototype.get;Ct.prototype.has=function(i){return i.toString()in this.a};Ct.prototype.has=Ct.prototype.has;Ct.prototype.Jc=function(i,e,t,r,s){var o=ka(this);o.sort();for(var l=0;l<o.length;l++){var u=this.a[o[l]];e.Va(i),t.call(e,1,u.key),this.b?r.call(e,2,lu(this,u),s):r.call(e,2,u.value),e.Ya()}};Ct.prototype.serializeBinary=Ct.prototype.Jc;Ct.deserializeBinary=function(i,e,t,r,s,o,l){for(;e.oa()&&!e.bb();){var u=e.c;u==1?o=t.call(e):u==2&&(i.b?(se(s),l||(l=new i.b),r.call(e,l,s)):l=r.call(e))}se(o!=null),se(l!=null),i.set(o,l)};function ka(i){i=i.a;var e=[],t;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.push(t);return e}function BM(i,e){this.key=i,this.value=e,this.a=void 0}function DM(i){if(8192>=i.length)return String.fromCharCode.apply(null,i);for(var e="",t=0;t<i.length;t+=8192)e+=String.fromCharCode.apply(null,rO(i,t,t+8192));return e}var ZS={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},L0={"'":"\\'"},NM={},nd=null;function OM(i,e){e===void 0&&(e=0),PM(),e=NM[e];for(var t=[],r=0;r<i.length;r+=3){var s=i[r],o=r+1<i.length,l=o?i[r+1]:0,u=r+2<i.length,p=u?i[r+2]:0,h=s>>2;s=(s&3)<<4|l>>4,l=(l&15)<<2|p>>6,p&=63,u||(p=64,o||(l=64)),t.push(e[h],e[s],e[l]||"",e[p]||"")}return t.join("")}function FM(i){var e=i.length,t=3*e/4;t%3?t=Math.floor(t):"=.".indexOf(i[e-1])!=-1&&(t="=.".indexOf(i[e-2])!=-1?t-2:t-1);var r=new Uint8Array(t),s=0;return oO(i,function(o){r[s++]=o}),r.subarray(0,s)}function oO(i,e){function t(p){for(;r<i.length;){var h=i.charAt(r++),f=nd[h];if(f!=null)return f;if(!/^[\s\xa0]*$/.test(h))throw Error("Unknown base64 encoding at char: "+h)}return p}PM();for(var r=0;;){var s=t(-1),o=t(0),l=t(64),u=t(64);if(u===64&&s===-1)break;e(s<<2|o>>4),l!=64&&(e(o<<4&240|l>>2),u!=64&&e(l<<6&192|u))}}function PM(){if(!nd){nd={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++){var r=i.concat(e[t].split(""));NM[t]=r;for(var s=0;s<r.length;s++){var o=r[s];nd[o]===void 0&&(nd[o]=s)}}}}rt("jspb.ConstBinaryMessage",function(){},void 0);rt("jspb.BinaryMessage",function(){},void 0);rt("jspb.BinaryConstants.FieldType",{yb:-1,ee:1,FLOAT:2,ke:3,te:4,je:5,xb:6,wb:7,BOOL:8,re:9,ie:10,le:11,ce:12,se:13,ge:14,me:15,ne:16,oe:17,pe:18,he:30,ve:31},void 0);rt("jspb.BinaryConstants.WireType",{yb:-1,ue:0,xb:1,de:2,qe:3,fe:4,wb:5},void 0);rt("jspb.BinaryConstants.FieldTypeToWireType",function(i){switch(i){case 5:case 3:case 13:case 4:case 17:case 18:case 8:case 14:case 31:return 0;case 1:case 6:case 16:case 30:return 1;case 9:case 11:case 12:return 2;case 2:case 7:case 15:return 5;default:return-1}},void 0);rt("jspb.BinaryConstants.INVALID_FIELD_NUMBER",-1,void 0);rt("jspb.BinaryConstants.FLOAT32_EPS",1401298464324817e-60,void 0);rt("jspb.BinaryConstants.FLOAT32_MIN",11754943508222875e-54,void 0);rt("jspb.BinaryConstants.FLOAT32_MAX",34028234663852886e22,void 0);rt("jspb.BinaryConstants.FLOAT64_EPS",5e-324,void 0);rt("jspb.BinaryConstants.FLOAT64_MIN",22250738585072014e-324,void 0);rt("jspb.BinaryConstants.FLOAT64_MAX",17976931348623157e292,void 0);rt("jspb.BinaryConstants.TWO_TO_20",1048576,void 0);rt("jspb.BinaryConstants.TWO_TO_23",8388608,void 0);rt("jspb.BinaryConstants.TWO_TO_31",2147483648,void 0);rt("jspb.BinaryConstants.TWO_TO_32",4294967296,void 0);rt("jspb.BinaryConstants.TWO_TO_52",4503599627370496,void 0);rt("jspb.BinaryConstants.TWO_TO_63",9223372036854776e3,void 0);rt("jspb.BinaryConstants.TWO_TO_64",18446744073709552e3,void 0);rt("jspb.BinaryConstants.ZERO_HASH","\0\0\0\0\0\0\0\0",void 0);var Ii=0,ki=0;rt("jspb.utils.getSplit64Low",function(){return Ii},void 0);rt("jspb.utils.getSplit64High",function(){return ki},void 0);function sw(i){var e=i>>>0;i=Math.floor((i-e)/4294967296)>>>0,Ii=e,ki=i}rt("jspb.utils.splitUint64",sw,void 0);function ud(i){var e=0>i;i=Math.abs(i);var t=i>>>0;i=Math.floor((i-t)/4294967296),i>>>=0,e&&(i=~i>>>0,t=(~t>>>0)+1,4294967295<t&&(t=0,i++,4294967295<i&&(i=0))),Ii=t,ki=i}rt("jspb.utils.splitInt64",ud,void 0);function UM(i){var e=0>i;i=2*Math.abs(i),sw(i),i=Ii;var t=ki;e&&(i==0?t==0?t=i=4294967295:(t--,i=4294967295):i--),Ii=i,ki=t}rt("jspb.utils.splitZigzag64",UM,void 0);function HM(i){var e=0>i?1:0;if(i=e?-i:i,i===0)0<1/i?Ii=ki=0:(ki=0,Ii=2147483648);else if(isNaN(i))ki=0,Ii=2147483647;else if(34028234663852886e22<i)ki=0,Ii=(e<<31|2139095040)>>>0;else if(11754943508222875e-54>i)i=Math.round(i/Math.pow(2,-149)),ki=0,Ii=(e<<31|i)>>>0;else{var t=Math.floor(Math.log(i)/Math.LN2);i*=Math.pow(2,-t),i=Math.round(8388608*i),16777216<=i&&++t,ki=0,Ii=(e<<31|t+127<<23|i&8388607)>>>0}}rt("jspb.utils.splitFloat32",HM,void 0);function zM(i){var e=0>i?1:0;if(i=e?-i:i,i===0)ki=0<1/i?0:2147483648,Ii=0;else if(isNaN(i))ki=2147483647,Ii=4294967295;else if(17976931348623157e292<i)ki=(e<<31|2146435072)>>>0,Ii=0;else if(22250738585072014e-324>i)i/=Math.pow(2,-1074),ki=(e<<31|i/4294967296)>>>0,Ii=i>>>0;else{var t=i,r=0;if(2<=t)for(;2<=t&&1023>r;)r++,t/=2;else for(;1>t&&-1022<r;)t*=2,r--;i*=Math.pow(2,-r),ki=(e<<31|r+1023<<20|1048576*i&1048575)>>>0,Ii=4503599627370496*i>>>0}}rt("jspb.utils.splitFloat64",zM,void 0);function Ea(i){var e=i.charCodeAt(4),t=i.charCodeAt(5),r=i.charCodeAt(6),s=i.charCodeAt(7);Ii=i.charCodeAt(0)+(i.charCodeAt(1)<<8)+(i.charCodeAt(2)<<16)+(i.charCodeAt(3)<<24)>>>0,ki=e+(t<<8)+(r<<16)+(s<<24)>>>0}rt("jspb.utils.splitHash64",Ea,void 0);function cu(i,e){return 4294967296*e+(i>>>0)}rt("jspb.utils.joinUint64",cu,void 0);function pd(i,e){var t=e&2147483648;return t&&(i=~i+1>>>0,e=~e>>>0,i==0&&(e=e+1>>>0)),i=cu(i,e),t?-i:i}rt("jspb.utils.joinInt64",pd,void 0);function C0(i,e,t){var r=e>>31;return t(i<<1^r,(e<<1|i>>>31)^r)}rt("jspb.utils.toZigzag64",C0,void 0);function jM(i,e){return A0(i,e,pd)}rt("jspb.utils.joinZigzag64",jM,void 0);function A0(i,e,t){var r=-(i&1);return t((i>>>1|e<<31)^r,e>>>1^r)}rt("jspb.utils.fromZigzag64",A0,void 0);function GM(i){var e=2*(i>>31)+1,t=i>>>23&255;return i&=8388607,t==255?i?NaN:1/0*e:t==0?e*Math.pow(2,-149)*i:e*Math.pow(2,t-150)*(i+Math.pow(2,23))}rt("jspb.utils.joinFloat32",GM,void 0);function WM(i,e){var t=2*(e>>31)+1,r=e>>>20&2047;return i=4294967296*(e&1048575)+i,r==2047?i?NaN:1/0*t:r==0?t*Math.pow(2,-1074)*i:t*Math.pow(2,r-1075)*(i+4503599627370496)}rt("jspb.utils.joinFloat64",WM,void 0);function M0(i,e){return String.fromCharCode(i>>>0&255,i>>>8&255,i>>>16&255,i>>>24&255,e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255)}rt("jspb.utils.joinHash64",M0,void 0);rt("jspb.utils.DIGITS","0123456789abcdef".split(""),void 0);function hd(i,e){function t(s,o){return s=s?String(s):"",o?"0000000".slice(s.length)+s:s}if(2097151>=e)return""+cu(i,e);var r=(i>>>24|e<<8)>>>0&16777215;return e=e>>16&65535,i=(i&16777215)+6777216*r+6710656*e,r+=8147497*e,e*=2,1e7<=i&&(r+=Math.floor(i/1e7),i%=1e7),1e7<=r&&(e+=Math.floor(r/1e7),r%=1e7),t(e,0)+t(r,e)+t(i,1)}rt("jspb.utils.joinUnsignedDecimalString",hd,void 0);function dd(i,e){var t=e&2147483648;return t&&(i=~i+1>>>0,e=~e+(i==0?1:0)>>>0),i=hd(i,e),t?"-"+i:i}rt("jspb.utils.joinSignedDecimalString",dd,void 0);function VM(i,e){Ea(i),i=Ii;var t=ki;return e?dd(i,t):hd(i,t)}rt("jspb.utils.hash64ToDecimalString",VM,void 0);rt("jspb.utils.hash64ArrayToDecimalStrings",function(i,e){for(var t=Array(i.length),r=0;r<i.length;r++)t[r]=VM(i[r],e);return t},void 0);function md(i){function e(l,u){for(var p=0;8>p&&(l!==1||0<u);p++)u=l*s[p]+u,s[p]=u&255,u>>>=8}function t(){for(var l=0;8>l;l++)s[l]=~s[l]&255}se(0<i.length);var r=!1;i[0]==="-"&&(r=!0,i=i.slice(1));for(var s=[0,0,0,0,0,0,0,0],o=0;o<i.length;o++)e(10,i.charCodeAt(o)-48);return r&&(t(),e(1,1)),DM(s)}rt("jspb.utils.decimalStringToHash64",md,void 0);rt("jspb.utils.splitDecimalString",function(i){Ea(md(i))},void 0);function CM(i){return String.fromCharCode(10>i?48+i:87+i)}function AM(i){return 97<=i?i-97+10:i-48}rt("jspb.utils.hash64ToHexString",function(i){var e=Array(18);e[0]="0",e[1]="x";for(var t=0;8>t;t++){var r=i.charCodeAt(7-t);e[2*t+2]=CM(r>>4),e[2*t+3]=CM(r&15)}return e.join("")},void 0);rt("jspb.utils.hexStringToHash64",function(i){i=i.toLowerCase(),se(i.length==18),se(i[0]=="0"),se(i[1]=="x");for(var e="",t=0;8>t;t++)e=String.fromCharCode(16*AM(i.charCodeAt(2*t+2))+AM(i.charCodeAt(2*t+3)))+e;return e},void 0);rt("jspb.utils.hash64ToNumber",function(i,e){Ea(i),i=Ii;var t=ki;return e?pd(i,t):cu(i,t)},void 0);rt("jspb.utils.numberToHash64",function(i){return ud(i),M0(Ii,ki)},void 0);rt("jspb.utils.countVarints",function(i,e,t){for(var r=0,s=e;s<t;s++)r+=i[s]>>7;return t-e-r},void 0);rt("jspb.utils.countVarintFields",function(i,e,t,r){var s=0;if(r*=8,128>r)for(;e<t&&i[e++]==r;)for(s++;;){var o=i[e++];if(!(o&128))break}else for(;e<t;){for(o=r;128<o;){if(i[e]!=(o&127|128))return s;e++,o>>=7}if(i[e++]!=o)break;for(s++;o=i[e++],(o&128)!=0;);}return s},void 0);function KM(i,e,t,r,s){var o=0;if(128>r)for(;e<t&&i[e++]==r;)o++,e+=s;else for(;e<t;){for(var l=r;128<l;){if(i[e++]!=(l&127|128))return o;l>>=7}if(i[e++]!=l)break;o++,e+=s}return o}rt("jspb.utils.countFixed32Fields",function(i,e,t,r){return KM(i,e,t,8*r+5,4)},void 0);rt("jspb.utils.countFixed64Fields",function(i,e,t,r){return KM(i,e,t,8*r+1,8)},void 0);rt("jspb.utils.countDelimitedFields",function(i,e,t,r){var s=0;for(r=8*r+2;e<t;){for(var o=r;128<o;){if(i[e++]!=(o&127|128))return s;o>>=7}if(i[e++]!=o)break;s++;for(var l=0,u=1;o=i[e++],l+=(o&127)*u,u*=128,(o&128)!=0;);e+=l}return s},void 0);rt("jspb.utils.debugBytesToTextFormat",function(i){var e='"';if(i){i=R0(i);for(var t=0;t<i.length;t++)e+="\\x",16>i[t]&&(e+="0"),e+=i[t].toString(16)}return e+'"'},void 0);rt("jspb.utils.debugScalarToTextFormat",function(i){if(typeof i=="string"){i=String(i);for(var e=['"'],t=0;t<i.length;t++){var r=i.charAt(t),s=r.charCodeAt(0),o=t+1,l;(l=ZS[r])||(31<s&&127>s||(s=r,s in L0?r=L0[s]:s in ZS?r=L0[s]=ZS[s]:(l=s.charCodeAt(0),31<l&&127>l?r=s:(256>l?(r="\\x",(16>l||256<l)&&(r+="0")):(r="\\u",4096>l&&(r+="0")),r+=l.toString(16).toUpperCase()),r=L0[s]=r)),l=r),e[o]=l}e.push('"'),i=e.join("")}else i=i.toString();return i},void 0);rt("jspb.utils.stringToByteArray",function(i){for(var e=new Uint8Array(i.length),t=0;t<i.length;t++){var r=i.charCodeAt(t);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");e[t]=r}return e},void 0);function R0(i){return i.constructor===Uint8Array?i:i.constructor===ArrayBuffer?new Uint8Array(i):i.constructor===Array?new Uint8Array(i):i.constructor===String?FM(i):i instanceof Uint8Array?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):(Tr("Type not convertible to Uint8Array."),new Uint8Array(0))}rt("jspb.utils.byteSourceToUint8Array",R0,void 0);function J(i,e,t){this.b=null,this.a=this.c=this.h=0,this.v=!1,i&&this.H(i,e,t)}rt("jspb.BinaryDecoder",J,void 0);var sd=[];J.getInstanceCacheLength=function(){return sd.length};function B0(i,e,t){if(sd.length){var r=sd.pop();return i&&r.H(i,e,t),r}return new J(i,e,t)}J.alloc=B0;J.prototype.Ca=function(){this.clear(),100>sd.length&&sd.push(this)};J.prototype.free=J.prototype.Ca;J.prototype.clone=function(){return B0(this.b,this.h,this.c-this.h)};J.prototype.clone=J.prototype.clone;J.prototype.clear=function(){this.b=null,this.a=this.c=this.h=0,this.v=!1};J.prototype.clear=J.prototype.clear;J.prototype.Y=function(){return this.b};J.prototype.getBuffer=J.prototype.Y;J.prototype.H=function(i,e,t){this.b=R0(i),this.h=e!==void 0?e:0,this.c=t!==void 0?this.h+t:this.b.length,this.a=this.h};J.prototype.setBlock=J.prototype.H;J.prototype.Db=function(){return this.c};J.prototype.getEnd=J.prototype.Db;J.prototype.setEnd=function(i){this.c=i};J.prototype.setEnd=J.prototype.setEnd;J.prototype.reset=function(){this.a=this.h};J.prototype.reset=J.prototype.reset;J.prototype.B=function(){return this.a};J.prototype.getCursor=J.prototype.B;J.prototype.Ma=function(i){this.a=i};J.prototype.setCursor=J.prototype.Ma;J.prototype.advance=function(i){this.a+=i,se(this.a<=this.c)};J.prototype.advance=J.prototype.advance;J.prototype.ya=function(){return this.a==this.c};J.prototype.atEnd=J.prototype.ya;J.prototype.Qb=function(){return this.a>this.c};J.prototype.pastEnd=J.prototype.Qb;J.prototype.getError=function(){return this.v||0>this.a||this.a>this.c};J.prototype.getError=J.prototype.getError;J.prototype.w=function(i){for(var e=128,t=0,r=0,s=0;4>s&&128<=e;s++)e=this.b[this.a++],t|=(e&127)<<7*s;if(128<=e&&(e=this.b[this.a++],t|=(e&127)<<28,r|=(e&127)>>4),128<=e)for(s=0;5>s&&128<=e;s++)e=this.b[this.a++],r|=(e&127)<<7*s+3;if(128>e)return i(t>>>0,r>>>0);Tr("Failed to read varint, encoding is invalid."),this.v=!0};J.prototype.readSplitVarint64=J.prototype.w;J.prototype.ea=function(i){return this.w(function(e,t){return A0(e,t,i)})};J.prototype.readSplitZigzagVarint64=J.prototype.ea;J.prototype.ta=function(i){var e=this.b,t=this.a;this.a+=8;for(var r=0,s=0,o=t+7;o>=t;o--)r=r<<8|e[o],s=s<<8|e[o+4];return i(r,s)};J.prototype.readSplitFixed64=J.prototype.ta;J.prototype.kb=function(){for(;this.b[this.a]&128;)this.a++;this.a++};J.prototype.skipVarint=J.prototype.kb;J.prototype.mb=function(i){for(;128<i;)this.a--,i>>>=7;this.a--};J.prototype.unskipVarint=J.prototype.mb;J.prototype.o=function(){var i=this.b,e=i[this.a],t=e&127;return 128>e?(this.a+=1,se(this.a<=this.c),t):(e=i[this.a+1],t|=(e&127)<<7,128>e?(this.a+=2,se(this.a<=this.c),t):(e=i[this.a+2],t|=(e&127)<<14,128>e?(this.a+=3,se(this.a<=this.c),t):(e=i[this.a+3],t|=(e&127)<<21,128>e?(this.a+=4,se(this.a<=this.c),t):(e=i[this.a+4],t|=(e&15)<<28,128>e?(this.a+=5,se(this.a<=this.c),t>>>0):(this.a+=5,128<=i[this.a++]&&128<=i[this.a++]&&128<=i[this.a++]&&128<=i[this.a++]&&128<=i[this.a++]&&se(!1),se(this.a<=this.c),t)))))};J.prototype.readUnsignedVarint32=J.prototype.o;J.prototype.da=function(){return~~this.o()};J.prototype.readSignedVarint32=J.prototype.da;J.prototype.O=function(){return this.o().toString()};J.prototype.Ea=function(){return this.da().toString()};J.prototype.readSignedVarint32String=J.prototype.Ea;J.prototype.Ia=function(){var i=this.o();return i>>>1^-(i&1)};J.prototype.readZigzagVarint32=J.prototype.Ia;J.prototype.Ga=function(){return this.w(cu)};J.prototype.readUnsignedVarint64=J.prototype.Ga;J.prototype.Ha=function(){return this.w(hd)};J.prototype.readUnsignedVarint64String=J.prototype.Ha;J.prototype.sa=function(){return this.w(pd)};J.prototype.readSignedVarint64=J.prototype.sa;J.prototype.Fa=function(){return this.w(dd)};J.prototype.readSignedVarint64String=J.prototype.Fa;J.prototype.Ja=function(){return this.w(jM)};J.prototype.readZigzagVarint64=J.prototype.Ja;J.prototype.fb=function(){return this.ea(M0)};J.prototype.readZigzagVarintHash64=J.prototype.fb;J.prototype.Ka=function(){return this.ea(dd)};J.prototype.readZigzagVarint64String=J.prototype.Ka;J.prototype.Gc=function(){var i=this.b[this.a];return this.a+=1,se(this.a<=this.c),i};J.prototype.readUint8=J.prototype.Gc;J.prototype.Ec=function(){var i=this.b[this.a],e=this.b[this.a+1];return this.a+=2,se(this.a<=this.c),i<<0|e<<8};J.prototype.readUint16=J.prototype.Ec;J.prototype.m=function(){var i=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,se(this.a<=this.c),(i<<0|e<<8|t<<16|r<<24)>>>0};J.prototype.readUint32=J.prototype.m;J.prototype.ga=function(){var i=this.m(),e=this.m();return cu(i,e)};J.prototype.readUint64=J.prototype.ga;J.prototype.ha=function(){var i=this.m(),e=this.m();return hd(i,e)};J.prototype.readUint64String=J.prototype.ha;J.prototype.Xb=function(){var i=this.b[this.a];return this.a+=1,se(this.a<=this.c),i<<24>>24};J.prototype.readInt8=J.prototype.Xb;J.prototype.Vb=function(){var i=this.b[this.a],e=this.b[this.a+1];return this.a+=2,se(this.a<=this.c),(i<<0|e<<8)<<16>>16};J.prototype.readInt16=J.prototype.Vb;J.prototype.P=function(){var i=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,se(this.a<=this.c),i<<0|e<<8|t<<16|r<<24};J.prototype.readInt32=J.prototype.P;J.prototype.ba=function(){var i=this.m(),e=this.m();return pd(i,e)};J.prototype.readInt64=J.prototype.ba;J.prototype.ca=function(){var i=this.m(),e=this.m();return dd(i,e)};J.prototype.readInt64String=J.prototype.ca;J.prototype.aa=function(){var i=this.m();return GM(i,0)};J.prototype.readFloat=J.prototype.aa;J.prototype.Z=function(){var i=this.m(),e=this.m();return WM(i,e)};J.prototype.readDouble=J.prototype.Z;J.prototype.pa=function(){return!!this.b[this.a++]};J.prototype.readBool=J.prototype.pa;J.prototype.ra=function(){return this.da()};J.prototype.readEnum=J.prototype.ra;J.prototype.fa=function(i){var e=this.b,t=this.a;i=t+i;for(var r=[],s="";t<i;){var o=e[t++];if(128>o)r.push(o);else{if(192>o)continue;if(224>o){var l=e[t++];r.push((o&31)<<6|l&63)}else if(240>o){l=e[t++];var u=e[t++];r.push((o&15)<<12|(l&63)<<6|u&63)}else if(248>o){l=e[t++],u=e[t++];var p=e[t++];o=(o&7)<<18|(l&63)<<12|(u&63)<<6|p&63,o-=65536,r.push((o>>10&1023)+55296,(o&1023)+56320)}}8192<=r.length&&(s+=String.fromCharCode.apply(null,r),r.length=0)}return s+=DM(r),this.a=t,s};J.prototype.readString=J.prototype.fa;J.prototype.Dc=function(){var i=this.o();return this.fa(i)};J.prototype.readStringWithLength=J.prototype.Dc;J.prototype.qa=function(i){if(0>i||this.a+i>this.b.length)return this.v=!0,Tr("Invalid byte length!"),new Uint8Array(0);var e=this.b.subarray(this.a,this.a+i);return this.a+=i,se(this.a<=this.c),e};J.prototype.readBytes=J.prototype.qa;J.prototype.ia=function(){return this.w(M0)};J.prototype.readVarintHash64=J.prototype.ia;J.prototype.$=function(){var i=this.b,e=this.a,t=i[e],r=i[e+1],s=i[e+2],o=i[e+3],l=i[e+4],u=i[e+5],p=i[e+6];return i=i[e+7],this.a+=8,String.fromCharCode(t,r,s,o,l,u,p,i)};J.prototype.readFixedHash64=J.prototype.$;function B(i,e,t){this.a=B0(i,e,t),this.O=this.a.B(),this.b=this.c=-1,this.h=!1,this.v=null}rt("jspb.BinaryReader",B,void 0);var au=[];B.clearInstanceCache=function(){au=[]};B.getInstanceCacheLength=function(){return au.length};function $M(i,e,t){if(au.length){var r=au.pop();return i&&r.a.H(i,e,t),r}return new B(i,e,t)}B.alloc=$M;B.prototype.zb=$M;B.prototype.alloc=B.prototype.zb;B.prototype.Ca=function(){this.a.clear(),this.b=this.c=-1,this.h=!1,this.v=null,100>au.length&&au.push(this)};B.prototype.free=B.prototype.Ca;B.prototype.Fb=function(){return this.O};B.prototype.getFieldCursor=B.prototype.Fb;B.prototype.B=function(){return this.a.B()};B.prototype.getCursor=B.prototype.B;B.prototype.Y=function(){return this.a.Y()};B.prototype.getBuffer=B.prototype.Y;B.prototype.Hb=function(){return this.c};B.prototype.getFieldNumber=B.prototype.Hb;B.prototype.Lb=function(){return this.b};B.prototype.getWireType=B.prototype.Lb;B.prototype.Mb=function(){return this.b==2};B.prototype.isDelimited=B.prototype.Mb;B.prototype.bb=function(){return this.b==4};B.prototype.isEndGroup=B.prototype.bb;B.prototype.getError=function(){return this.h||this.a.getError()};B.prototype.getError=B.prototype.getError;B.prototype.H=function(i,e,t){this.a.H(i,e,t),this.b=this.c=-1};B.prototype.setBlock=B.prototype.H;B.prototype.reset=function(){this.a.reset(),this.b=this.c=-1};B.prototype.reset=B.prototype.reset;B.prototype.advance=function(i){this.a.advance(i)};B.prototype.advance=B.prototype.advance;B.prototype.oa=function(){if(this.a.ya())return!1;if(this.getError())return Tr("Decoder hit an error"),!1;this.O=this.a.B();var i=this.a.o(),e=i>>>3;return i&=7,i!=0&&i!=5&&i!=1&&i!=2&&i!=3&&i!=4?(Tr("Invalid wire type: %s (at position %s)",i,this.O),this.h=!0,!1):(this.c=e,this.b=i,!0)};B.prototype.nextField=B.prototype.oa;B.prototype.Oa=function(){this.a.mb(this.c<<3|this.b)};B.prototype.unskipHeader=B.prototype.Oa;B.prototype.Lc=function(){var i=this.c;for(this.Oa();this.oa()&&this.c==i;)this.C();this.a.ya()||this.Oa()};B.prototype.skipMatchingFields=B.prototype.Lc;B.prototype.lb=function(){this.b!=0?(Tr("Invalid wire type for skipVarintField"),this.C()):this.a.kb()};B.prototype.skipVarintField=B.prototype.lb;B.prototype.gb=function(){if(this.b!=2)Tr("Invalid wire type for skipDelimitedField"),this.C();else{var i=this.a.o();this.a.advance(i)}};B.prototype.skipDelimitedField=B.prototype.gb;B.prototype.hb=function(){this.b!=5?(Tr("Invalid wire type for skipFixed32Field"),this.C()):this.a.advance(4)};B.prototype.skipFixed32Field=B.prototype.hb;B.prototype.ib=function(){this.b!=1?(Tr("Invalid wire type for skipFixed64Field"),this.C()):this.a.advance(8)};B.prototype.skipFixed64Field=B.prototype.ib;B.prototype.jb=function(){var i=this.c;do{if(!this.oa()){Tr("Unmatched start-group tag: stream EOF"),this.h=!0;break}if(this.b==4){this.c!=i&&(Tr("Unmatched end-group tag"),this.h=!0);break}this.C()}while(1)};B.prototype.skipGroup=B.prototype.jb;B.prototype.C=function(){switch(this.b){case 0:this.lb();break;case 1:this.ib();break;case 2:this.gb();break;case 5:this.hb();break;case 3:this.jb();break;default:Tr("Invalid wire encoding for field.")}};B.prototype.skipField=B.prototype.C;B.prototype.Hc=function(i,e){this.v===null&&(this.v={}),se(!this.v[i]),this.v[i]=e};B.prototype.registerReadCallback=B.prototype.Hc;B.prototype.Ic=function(i){return se(this.v!==null),i=this.v[i],se(i),i(this)};B.prototype.runReadCallback=B.prototype.Ic;B.prototype.Yb=function(i,e){se(this.b==2);var t=this.a.c,r=this.a.o();r=this.a.B()+r,this.a.setEnd(r),e(i,this),this.a.Ma(r),this.a.setEnd(t)};B.prototype.readMessage=B.prototype.Yb;B.prototype.Ub=function(i,e,t){se(this.b==3),se(this.c==i),t(e,this),this.h||this.b==4||(Tr("Group submessage did not end with an END_GROUP tag"),this.h=!0)};B.prototype.readGroup=B.prototype.Ub;B.prototype.Gb=function(){se(this.b==2);var i=this.a.o(),e=this.a.B(),t=e+i;return i=B0(this.a.Y(),e,i),this.a.Ma(t),i};B.prototype.getFieldDecoder=B.prototype.Gb;B.prototype.P=function(){return se(this.b==0),this.a.da()};B.prototype.readInt32=B.prototype.P;B.prototype.Wb=function(){return se(this.b==0),this.a.Ea()};B.prototype.readInt32String=B.prototype.Wb;B.prototype.ba=function(){return se(this.b==0),this.a.sa()};B.prototype.readInt64=B.prototype.ba;B.prototype.ca=function(){return se(this.b==0),this.a.Fa()};B.prototype.readInt64String=B.prototype.ca;B.prototype.m=function(){return se(this.b==0),this.a.o()};B.prototype.readUint32=B.prototype.m;B.prototype.Fc=function(){return se(this.b==0),this.a.O()};B.prototype.readUint32String=B.prototype.Fc;B.prototype.ga=function(){return se(this.b==0),this.a.Ga()};B.prototype.readUint64=B.prototype.ga;B.prototype.ha=function(){return se(this.b==0),this.a.Ha()};B.prototype.readUint64String=B.prototype.ha;B.prototype.zc=function(){return se(this.b==0),this.a.Ia()};B.prototype.readSint32=B.prototype.zc;B.prototype.Ac=function(){return se(this.b==0),this.a.Ja()};B.prototype.readSint64=B.prototype.Ac;B.prototype.Bc=function(){return se(this.b==0),this.a.Ka()};B.prototype.readSint64String=B.prototype.Bc;B.prototype.Rb=function(){return se(this.b==5),this.a.m()};B.prototype.readFixed32=B.prototype.Rb;B.prototype.Sb=function(){return se(this.b==1),this.a.ga()};B.prototype.readFixed64=B.prototype.Sb;B.prototype.Tb=function(){return se(this.b==1),this.a.ha()};B.prototype.readFixed64String=B.prototype.Tb;B.prototype.vc=function(){return se(this.b==5),this.a.P()};B.prototype.readSfixed32=B.prototype.vc;B.prototype.wc=function(){return se(this.b==5),this.a.P().toString()};B.prototype.readSfixed32String=B.prototype.wc;B.prototype.xc=function(){return se(this.b==1),this.a.ba()};B.prototype.readSfixed64=B.prototype.xc;B.prototype.yc=function(){return se(this.b==1),this.a.ca()};B.prototype.readSfixed64String=B.prototype.yc;B.prototype.aa=function(){return se(this.b==5),this.a.aa()};B.prototype.readFloat=B.prototype.aa;B.prototype.Z=function(){return se(this.b==1),this.a.Z()};B.prototype.readDouble=B.prototype.Z;B.prototype.pa=function(){return se(this.b==0),!!this.a.o()};B.prototype.readBool=B.prototype.pa;B.prototype.ra=function(){return se(this.b==0),this.a.sa()};B.prototype.readEnum=B.prototype.ra;B.prototype.fa=function(){se(this.b==2);var i=this.a.o();return this.a.fa(i)};B.prototype.readString=B.prototype.fa;B.prototype.qa=function(){se(this.b==2);var i=this.a.o();return this.a.qa(i)};B.prototype.readBytes=B.prototype.qa;B.prototype.ia=function(){return se(this.b==0),this.a.ia()};B.prototype.readVarintHash64=B.prototype.ia;B.prototype.Cc=function(){return se(this.b==0),this.a.fb()};B.prototype.readSintHash64=B.prototype.Cc;B.prototype.w=function(i){return se(this.b==0),this.a.w(i)};B.prototype.readSplitVarint64=B.prototype.w;B.prototype.ea=function(i){return se(this.b==0),this.a.w(function(e,t){return A0(e,t,i)})};B.prototype.readSplitZigzagVarint64=B.prototype.ea;B.prototype.$=function(){return se(this.b==1),this.a.$()};B.prototype.readFixedHash64=B.prototype.$;B.prototype.ta=function(i){return se(this.b==1),this.a.ta(i)};B.prototype.readSplitFixed64=B.prototype.ta;function qi(i,e){se(i.b==2);var t=i.a.o();t=i.a.B()+t;for(var r=[];i.a.B()<t;)r.push(e.call(i.a));return r}B.prototype.gc=function(){return qi(this,this.a.da)};B.prototype.readPackedInt32=B.prototype.gc;B.prototype.hc=function(){return qi(this,this.a.Ea)};B.prototype.readPackedInt32String=B.prototype.hc;B.prototype.ic=function(){return qi(this,this.a.sa)};B.prototype.readPackedInt64=B.prototype.ic;B.prototype.jc=function(){return qi(this,this.a.Fa)};B.prototype.readPackedInt64String=B.prototype.jc;B.prototype.qc=function(){return qi(this,this.a.o)};B.prototype.readPackedUint32=B.prototype.qc;B.prototype.rc=function(){return qi(this,this.a.O)};B.prototype.readPackedUint32String=B.prototype.rc;B.prototype.sc=function(){return qi(this,this.a.Ga)};B.prototype.readPackedUint64=B.prototype.sc;B.prototype.tc=function(){return qi(this,this.a.Ha)};B.prototype.readPackedUint64String=B.prototype.tc;B.prototype.nc=function(){return qi(this,this.a.Ia)};B.prototype.readPackedSint32=B.prototype.nc;B.prototype.oc=function(){return qi(this,this.a.Ja)};B.prototype.readPackedSint64=B.prototype.oc;B.prototype.pc=function(){return qi(this,this.a.Ka)};B.prototype.readPackedSint64String=B.prototype.pc;B.prototype.bc=function(){return qi(this,this.a.m)};B.prototype.readPackedFixed32=B.prototype.bc;B.prototype.cc=function(){return qi(this,this.a.ga)};B.prototype.readPackedFixed64=B.prototype.cc;B.prototype.dc=function(){return qi(this,this.a.ha)};B.prototype.readPackedFixed64String=B.prototype.dc;B.prototype.kc=function(){return qi(this,this.a.P)};B.prototype.readPackedSfixed32=B.prototype.kc;B.prototype.lc=function(){return qi(this,this.a.ba)};B.prototype.readPackedSfixed64=B.prototype.lc;B.prototype.mc=function(){return qi(this,this.a.ca)};B.prototype.readPackedSfixed64String=B.prototype.mc;B.prototype.fc=function(){return qi(this,this.a.aa)};B.prototype.readPackedFloat=B.prototype.fc;B.prototype.$b=function(){return qi(this,this.a.Z)};B.prototype.readPackedDouble=B.prototype.$b;B.prototype.Zb=function(){return qi(this,this.a.pa)};B.prototype.readPackedBool=B.prototype.Zb;B.prototype.ac=function(){return qi(this,this.a.ra)};B.prototype.readPackedEnum=B.prototype.ac;B.prototype.uc=function(){return qi(this,this.a.ia)};B.prototype.readPackedVarintHash64=B.prototype.uc;B.prototype.ec=function(){return qi(this,this.a.$)};B.prototype.readPackedFixedHash64=B.prototype.ec;function od(i,e,t,r,s){this.ma=i,this.Ba=e,this.la=t,this.Na=r,this.na=s}rt("jspb.ExtensionFieldInfo",od,void 0);function qM(i,e,t,r,s,o){this.Za=i,this.za=e,this.Aa=t,this.Wa=r,this.Ab=s,this.Nb=o}rt("jspb.ExtensionFieldBinaryInfo",qM,void 0);od.prototype.F=function(){return!!this.la};od.prototype.isMessageType=od.prototype.F;function We(){}rt("jspb.Message",We,void 0);We.GENERATE_TO_OBJECT=!0;We.GENERATE_FROM_OBJECT=!0;var D0=typeof Uint8Array=="function";We.prototype.Ib=function(){return this.b};We.prototype.getJsPbMessageId=We.prototype.Ib;We.initialize=function(i,e,t,r,s,o){i.f=null,e||(e=t?[t]:[]),i.b=t?String(t):void 0,i.D=t===0?-1:0,i.u=e;e:{if(t=i.u.length,e=-1,t&&(e=t-1,t=i.u[e],!(t===null||typeof t!="object"||Array.isArray(t)||D0&&t instanceof Uint8Array))){i.G=e-i.D,i.i=t;break e}-1<r?(i.G=Math.max(r,e+1-i.D),i.i=null):i.G=Number.MAX_VALUE}if(i.a={},s)for(r=0;r<s.length;r++)e=s[r],e<i.G?(e+=i.D,i.u[e]=i.u[e]||ad):(N0(i),i.i[e]=i.i[e]||ad);if(o&&o.length)for(r=0;r<o.length;r++)ow(i,o[r])};var ad=Object.freeze?Object.freeze([]):[];function N0(i){var e=i.G+i.D;i.u[e]||(i.i=i.u[e]={})}function YM(i,e,t){for(var r=[],s=0;s<i.length;s++)r[s]=e.call(i[s],t,i[s]);return r}We.toObjectList=YM;We.toObjectExtension=function(i,e,t,r,s){for(var o in t){var l=t[o],u=r.call(i,l);if(u!=null){for(var p in l.Ba)if(l.Ba.hasOwnProperty(p))break;e[p]=l.Na?l.na?YM(u,l.Na,s):l.Na(s,u):u}}};We.serializeBinaryExtensions=function(i,e,t,r){for(var s in t){var o=t[s],l=o.Za;if(!o.Aa)throw Error("Message extension present that was generated without binary serialization support");var u=r.call(i,l);if(u!=null)if(l.F())if(o.Wa)o.Aa.call(e,l.ma,u,o.Wa);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else o.Aa.call(e,l.ma,u)}};We.readBinaryExtension=function(i,e,t,r,s){var o=t[e.c];if(o){if(t=o.Za,!o.za)throw Error("Deserializing extension whose generated code does not support binary format");if(t.F()){var l=new t.la;o.za.call(e,l,o.Ab)}else l=o.za.call(e);t.na&&!o.Nb?(e=r.call(i,t))?e.push(l):s.call(i,t,[l]):s.call(i,t,l)}else e.C()};function Bn(i,e){if(e<i.G){e+=i.D;var t=i.u[e];return t===ad?i.u[e]=[]:t}if(i.i)return t=i.i[e],t===ad?i.i[e]=[]:t}We.getField=Bn;We.getRepeatedField=function(i,e){return Bn(i,e)};function QM(i,e){return i=Bn(i,e),i==null?i:+i}We.getOptionalFloatingPointField=QM;function XM(i,e){return i=Bn(i,e),i==null?i:!!i}We.getBooleanField=XM;We.getRepeatedFloatingPointField=function(i,e){var t=Bn(i,e);if(i.a||(i.a={}),!i.a[e]){for(var r=0;r<t.length;r++)t[r]=+t[r];i.a[e]=!0}return t};We.getRepeatedBooleanField=function(i,e){var t=Bn(i,e);if(i.a||(i.a={}),!i.a[e]){for(var r=0;r<t.length;r++)t[r]=!!t[r];i.a[e]=!0}return t};function JM(i){return i==null||typeof i=="string"?i:D0&&i instanceof Uint8Array?OM(i):(Tr("Cannot coerce to b64 string: "+Eo(i)),null)}We.bytesAsB64=JM;function ZM(i){return i==null||i instanceof Uint8Array?i:typeof i=="string"?FM(i):(Tr("Cannot coerce to Uint8Array: "+Eo(i)),null)}We.bytesAsU8=ZM;We.bytesListAsB64=function(i){return eR(i),i.length&&typeof i[0]!="string"?ld(i,JM):i};We.bytesListAsU8=function(i){return eR(i),!i.length||i[0]instanceof Uint8Array?i:ld(i,ZM)};function eR(i){if(i&&1<i.length){var e=Eo(i[0]);iO(i,function(t){Eo(t)!=e&&Tr("Inconsistent type in JSPB repeated field array. Got "+Eo(t)+" expected "+e)})}}function tR(i,e,t){return i=Bn(i,e),i??t}We.getFieldWithDefault=tR;We.getBooleanFieldWithDefault=function(i,e,t){return i=XM(i,e),i??t};We.getFloatingPointFieldWithDefault=function(i,e,t){return i=QM(i,e),i??t};We.getFieldProto3=tR;We.getMapField=function(i,e,t,r){if(i.f||(i.f={}),e in i.f)return i.f[e];var s=Bn(i,e);if(!s){if(t)return;s=[],Lo(i,e,s)}return i.f[e]=new Ct(s,r)};function Lo(i,e,t){return Ss(i,We),e<i.G?i.u[e+i.D]=t:(N0(i),i.i[e]=t),i}We.setField=Lo;We.setProto3IntField=function(i,e,t){return Il(i,e,t,0)};We.setProto3FloatField=function(i,e,t){return Il(i,e,t,0)};We.setProto3BooleanField=function(i,e,t){return Il(i,e,t,!1)};We.setProto3StringField=function(i,e,t){return Il(i,e,t,"")};We.setProto3BytesField=function(i,e,t){return Il(i,e,t,"")};We.setProto3EnumField=function(i,e,t){return Il(i,e,t,0)};We.setProto3StringIntField=function(i,e,t){return Il(i,e,t,"0")};function Il(i,e,t,r){return Ss(i,We),t!==r?Lo(i,e,t):e<i.G?i.u[e+i.D]=null:(N0(i),delete i.i[e]),i}We.addToRepeatedField=function(i,e,t,r){return Ss(i,We),e=Bn(i,e),r!=null?e.splice(r,0,t):e.push(t),i};function iR(i,e,t,r){return Ss(i,We),(t=ow(i,t))&&t!==e&&r!==void 0&&(i.f&&t in i.f&&(i.f[t]=void 0),Lo(i,t,void 0)),Lo(i,e,r)}We.setOneofField=iR;function ow(i,e){for(var t,r,s=0;s<e.length;s++){var o=e[s],l=Bn(i,o);l!=null&&(t=o,r=l,Lo(i,o,void 0))}return t?(Lo(i,t,r),t):0}We.computeOneofCase=ow;We.getWrapperField=function(i,e,t,r){if(i.f||(i.f={}),!i.f[t]){var s=Bn(i,t);(r||s)&&(i.f[t]=new e(s))}return i.f[t]};We.getRepeatedWrapperField=function(i,e,t){return rR(i,e,t),e=i.f[t],e==ad&&(e=i.f[t]=[]),e};function rR(i,e,t){if(i.f||(i.f={}),!i.f[t]){for(var r=Bn(i,t),s=[],o=0;o<r.length;o++)s[o]=new e(r[o]);i.f[t]=s}}We.setWrapperField=function(i,e,t){Ss(i,We),i.f||(i.f={});var r=t&&t.g();return i.f[e]=t,Lo(i,e,r)};We.setOneofWrapperField=function(i,e,t,r){Ss(i,We),i.f||(i.f={});var s=r&&r.g();return i.f[e]=r,iR(i,e,t,s)};We.setRepeatedWrapperField=function(i,e,t){Ss(i,We),i.f||(i.f={}),t=t||[];for(var r=[],s=0;s<t.length;s++)r[s]=t[s].g();return i.f[e]=t,Lo(i,e,r)};We.addToRepeatedWrapperField=function(i,e,t,r,s){rR(i,r,e);var o=i.f[e];return o||(o=i.f[e]=[]),t=t||new r,i=Bn(i,e),s!=null?(o.splice(s,0,t),i.splice(s,0,t.g())):(o.push(t),i.push(t.g())),t};We.toMap=function(i,e,t,r){for(var s={},o=0;o<i.length;o++)s[e.call(i[o])]=t?t.call(i[o],r,i[o]):i[o];return s};function nR(i){if(i.f)for(var e in i.f){var t=i.f[e];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].g();else t&&t.g()}}We.prototype.g=function(){return nR(this),this.u};We.prototype.toArray=We.prototype.g;We.prototype.toString=function(){return nR(this),this.u.toString()};We.prototype.getExtension=function(i){if(this.i){this.f||(this.f={});var e=i.ma;if(i.na){if(i.F())return this.f[e]||(this.f[e]=ld(this.i[e]||[],function(t){return new i.la(t)})),this.f[e]}else if(i.F())return!this.f[e]&&this.i[e]&&(this.f[e]=new i.la(this.i[e])),this.f[e];return this.i[e]}};We.prototype.getExtension=We.prototype.getExtension;We.prototype.Kc=function(i,e){this.f||(this.f={}),N0(this);var t=i.ma;return i.na?(e=e||[],i.F()?(this.f[t]=e,this.i[t]=ld(e,function(r){return r.g()})):this.i[t]=e):i.F()?(this.f[t]=e,this.i[t]=e&&e.g()):this.i[t]=e,this};We.prototype.setExtension=We.prototype.Kc;We.difference=function(i,e){if(!(i instanceof e.constructor))throw Error("Messages have different types.");var t=i.g();e=e.g();var r=[],s=0,o=t.length>e.length?t.length:e.length;for(i.b&&(r[0]=i.b,s=1);s<o;s++)fd(t[s],e[s])||(r[s]=e[s]);return new i.constructor(r)};We.equals=function(i,e){return i==e||!(!i||!e)&&i instanceof e.constructor&&fd(i.g(),e.g())};function ew(i,e){i=i||{},e=e||{};var t={},r;for(r in i)t[r]=0;for(r in e)t[r]=0;for(r in t)if(!fd(i[r],e[r]))return!1;return!0}We.compareExtensions=ew;function fd(i,e){if(i==e)return!0;if(!EM(i)||!EM(e))return typeof i=="number"&&isNaN(i)||typeof e=="number"&&isNaN(e)?String(i)==String(e):!1;if(i.constructor!=e.constructor)return!1;if(D0&&i.constructor===Uint8Array){if(i.length!=e.length)return!1;for(var t=0;t<i.length;t++)if(i[t]!=e[t])return!1;return!0}if(i.constructor===Array){var r=void 0,s=void 0,o=Math.max(i.length,e.length);for(t=0;t<o;t++){var l=i[t],u=e[t];if(l&&l.constructor==Object&&(se(r===void 0),se(t===i.length-1),r=l,l=void 0),u&&u.constructor==Object&&(se(s===void 0),se(t===e.length-1),s=u,u=void 0),!fd(l,u))return!1}return r||s?(r=r||{},s=s||{},ew(r,s)):!0}if(i.constructor===Object)return ew(i,e);throw Error("Invalid type in JSPB array")}We.compareFields=fd;We.prototype.Bb=function(){return O0(this)};We.prototype.cloneMessage=We.prototype.Bb;We.prototype.clone=function(){return O0(this)};We.prototype.clone=We.prototype.clone;We.clone=function(i){return O0(i)};function O0(i){return new i.constructor(tw(i.g()))}We.copyInto=function(i,e){Ss(i,We),Ss(e,We),se(i.constructor==e.constructor,"Copy source and target message should have the same type."),i=O0(i);for(var t=e.g(),r=i.g(),s=t.length=0;s<r.length;s++)t[s]=r[s];e.f=i.f,e.i=i.i};function tw(i){if(Array.isArray(i)){for(var e=Array(i.length),t=0;t<i.length;t++){var r=i[t];r!=null&&(e[t]=typeof r=="object"?tw(se(r)):r)}return e}if(D0&&i instanceof Uint8Array)return new Uint8Array(i);e={};for(t in i)r=i[t],r!=null&&(e[t]=typeof r=="object"?tw(se(r)):r);return e}We.registerMessageType=function(i,e){e.we=i};var Is={dump:function(i){return Ss(i,We,"jspb.Message instance expected"),se(i.getExtension,"Only unobfuscated and unoptimized compilation modes supported."),Is.X(i)}};rt("jspb.debug.dump",Is.dump,void 0);Is.X=function(i){var e=Eo(i);if(e=="number"||e=="string"||e=="boolean"||e=="null"||e=="undefined"||typeof Uint8Array<"u"&&i instanceof Uint8Array)return i;if(e=="array")return sO(i),ld(i,Is.X);if(i instanceof Ct){var t={};i=i.entries();for(var r=i.next();!r.done;r=i.next())t[r.value[0]]=Is.X(r.value[1]);return t}Ss(i,We,"Only messages expected: "+i),e=i.constructor;var s={$name:e.name||e.displayName};for(u in e.prototype){var o=/^get([A-Z]\w*)/.exec(u);if(o&&u!="getExtension"&&u!="getJsPbMessageId"){var l="has"+o[1];(!i[l]||i[l]())&&(l=i[u](),s[Is.$a(o[1])]=Is.X(l))}}if(i.extensionObject_)return s.$extensions="Recursive dumping of extensions not supported in compiled code. Switch to uncompiled or dump extension object directly",s;for(r in e.extensions)if(/^\d+$/.test(r)){l=e.extensions[r];var u=i.getExtension(l);o=void 0,l=l.Ba;var p=[],h=0;for(o in l)p[h++]=o;o=p[0],u!=null&&(t||(t=s.$extensions={}),t[Is.$a(o)]=Is.X(u))}return s};Is.$a=function(i){return i.replace(/^[A-Z]/,function(e){return e.toLowerCase()})};function Be(){this.a=[]}rt("jspb.BinaryEncoder",Be,void 0);Be.prototype.length=function(){return this.a.length};Be.prototype.length=Be.prototype.length;Be.prototype.end=function(){var i=this.a;return this.a=[],i};Be.prototype.end=Be.prototype.end;Be.prototype.l=function(i,e){for(se(i==Math.floor(i)),se(e==Math.floor(e)),se(0<=i&&4294967296>i),se(0<=e&&4294967296>e);0<e||127<i;)this.a.push(i&127|128),i=(i>>>7|e<<25)>>>0,e>>>=7;this.a.push(i)};Be.prototype.writeSplitVarint64=Be.prototype.l;Be.prototype.A=function(i,e){se(i==Math.floor(i)),se(e==Math.floor(e)),se(0<=i&&4294967296>i),se(0<=e&&4294967296>e),this.s(i),this.s(e)};Be.prototype.writeSplitFixed64=Be.prototype.A;Be.prototype.j=function(i){for(se(i==Math.floor(i)),se(0<=i&&4294967296>i);127<i;)this.a.push(i&127|128),i>>>=7;this.a.push(i)};Be.prototype.writeUnsignedVarint32=Be.prototype.j;Be.prototype.M=function(i){if(se(i==Math.floor(i)),se(-2147483648<=i&&2147483648>i),0<=i)this.j(i);else{for(var e=0;9>e;e++)this.a.push(i&127|128),i>>=7;this.a.push(1)}};Be.prototype.writeSignedVarint32=Be.prototype.M;Be.prototype.va=function(i){se(i==Math.floor(i)),se(0<=i&&18446744073709552e3>i),ud(i),this.l(Ii,ki)};Be.prototype.writeUnsignedVarint64=Be.prototype.va;Be.prototype.ua=function(i){se(i==Math.floor(i)),se(-9223372036854776e3<=i&&9223372036854776e3>i),ud(i),this.l(Ii,ki)};Be.prototype.writeSignedVarint64=Be.prototype.ua;Be.prototype.wa=function(i){se(i==Math.floor(i)),se(-2147483648<=i&&2147483648>i),this.j((i<<1^i>>31)>>>0)};Be.prototype.writeZigzagVarint32=Be.prototype.wa;Be.prototype.xa=function(i){se(i==Math.floor(i)),se(-9223372036854776e3<=i&&9223372036854776e3>i),UM(i),this.l(Ii,ki)};Be.prototype.writeZigzagVarint64=Be.prototype.xa;Be.prototype.Ta=function(i){this.W(md(i))};Be.prototype.writeZigzagVarint64String=Be.prototype.Ta;Be.prototype.W=function(i){var e=this;Ea(i),C0(Ii,ki,function(t,r){e.l(t>>>0,r>>>0)})};Be.prototype.writeZigzagVarintHash64=Be.prototype.W;Be.prototype.be=function(i){se(i==Math.floor(i)),se(0<=i&&256>i),this.a.push(i>>>0&255)};Be.prototype.writeUint8=Be.prototype.be;Be.prototype.ae=function(i){se(i==Math.floor(i)),se(0<=i&&65536>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255)};Be.prototype.writeUint16=Be.prototype.ae;Be.prototype.s=function(i){se(i==Math.floor(i)),se(0<=i&&4294967296>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255),this.a.push(i>>>16&255),this.a.push(i>>>24&255)};Be.prototype.writeUint32=Be.prototype.s;Be.prototype.V=function(i){se(i==Math.floor(i)),se(0<=i&&18446744073709552e3>i),sw(i),this.s(Ii),this.s(ki)};Be.prototype.writeUint64=Be.prototype.V;Be.prototype.Qc=function(i){se(i==Math.floor(i)),se(-128<=i&&128>i),this.a.push(i>>>0&255)};Be.prototype.writeInt8=Be.prototype.Qc;Be.prototype.Pc=function(i){se(i==Math.floor(i)),se(-32768<=i&&32768>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255)};Be.prototype.writeInt16=Be.prototype.Pc;Be.prototype.S=function(i){se(i==Math.floor(i)),se(-2147483648<=i&&2147483648>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255),this.a.push(i>>>16&255),this.a.push(i>>>24&255)};Be.prototype.writeInt32=Be.prototype.S;Be.prototype.T=function(i){se(i==Math.floor(i)),se(-9223372036854776e3<=i&&9223372036854776e3>i),ud(i),this.A(Ii,ki)};Be.prototype.writeInt64=Be.prototype.T;Be.prototype.ka=function(i){se(i==Math.floor(i)),se(-9223372036854776e3<=+i&&9223372036854776e3>+i),Ea(md(i)),this.A(Ii,ki)};Be.prototype.writeInt64String=Be.prototype.ka;Be.prototype.L=function(i){se(i===1/0||i===-1/0||isNaN(i)||-34028234663852886e22<=i&&34028234663852886e22>=i),HM(i),this.s(Ii)};Be.prototype.writeFloat=Be.prototype.L;Be.prototype.J=function(i){se(i===1/0||i===-1/0||isNaN(i)||-17976931348623157e292<=i&&17976931348623157e292>=i),zM(i),this.s(Ii),this.s(ki)};Be.prototype.writeDouble=Be.prototype.J;Be.prototype.I=function(i){se(typeof i=="boolean"||typeof i=="number"),this.a.push(i?1:0)};Be.prototype.writeBool=Be.prototype.I;Be.prototype.R=function(i){se(i==Math.floor(i)),se(-2147483648<=i&&2147483648>i),this.M(i)};Be.prototype.writeEnum=Be.prototype.R;Be.prototype.ja=function(i){this.a.push.apply(this.a,i)};Be.prototype.writeBytes=Be.prototype.ja;Be.prototype.N=function(i){Ea(i),this.l(Ii,ki)};Be.prototype.writeVarintHash64=Be.prototype.N;Be.prototype.K=function(i){Ea(i),this.s(Ii),this.s(ki)};Be.prototype.writeFixedHash64=Be.prototype.K;Be.prototype.U=function(i){var e=this.a.length;nO(i);for(var t=0;t<i.length;t++){var r=i.charCodeAt(t);if(128>r)this.a.push(r);else if(2048>r)this.a.push(r>>6|192),this.a.push(r&63|128);else if(65536>r)if(55296<=r&&56319>=r&&t+1<i.length){var s=i.charCodeAt(t+1);56320<=s&&57343>=s&&(r=1024*(r-55296)+s-56320+65536,this.a.push(r>>18|240),this.a.push(r>>12&63|128),this.a.push(r>>6&63|128),this.a.push(r&63|128),t++)}else this.a.push(r>>12|224),this.a.push(r>>6&63|128),this.a.push(r&63|128)}return this.a.length-e};Be.prototype.writeString=Be.prototype.U;function yt(i,e){this.lo=i,this.hi=e}rt("jspb.arith.UInt64",yt,void 0);yt.prototype.cmp=function(i){return this.hi<i.hi||this.hi==i.hi&&this.lo<i.lo?-1:this.hi==i.hi&&this.lo==i.lo?0:1};yt.prototype.cmp=yt.prototype.cmp;yt.prototype.La=function(){return new yt((this.lo>>>1|(this.hi&1)<<31)>>>0,this.hi>>>1>>>0)};yt.prototype.rightShift=yt.prototype.La;yt.prototype.Da=function(){return new yt(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)};yt.prototype.leftShift=yt.prototype.Da;yt.prototype.cb=function(){return!!(this.hi&2147483648)};yt.prototype.msb=yt.prototype.cb;yt.prototype.Ob=function(){return!!(this.lo&1)};yt.prototype.lsb=yt.prototype.Ob;yt.prototype.Ua=function(){return this.lo==0&&this.hi==0};yt.prototype.zero=yt.prototype.Ua;yt.prototype.add=function(i){return new yt((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)};yt.prototype.add=yt.prototype.add;yt.prototype.sub=function(i){return new yt((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)};yt.prototype.sub=yt.prototype.sub;function iw(i,e){var t=i&65535;i>>>=16;var r=e&65535,s=e>>>16;for(e=t*r+65536*(t*s&65535)+65536*(i*r&65535),t=i*s+(t*s>>>16)+(i*r>>>16);4294967296<=e;)e-=4294967296,t+=1;return new yt(e>>>0,t>>>0)}yt.mul32x32=iw;yt.prototype.eb=function(i){var e=iw(this.lo,i);return i=iw(this.hi,i),i.hi=i.lo,i.lo=0,e.add(i)};yt.prototype.mul=yt.prototype.eb;yt.prototype.Xa=function(i){if(i==0)return[];var e=new yt(0,0),t=new yt(this.lo,this.hi);i=new yt(i,0);for(var r=new yt(1,0);!i.cb();)i=i.Da(),r=r.Da();for(;!r.Ua();)0>=i.cmp(t)&&(e=e.add(r),t=t.sub(i)),i=i.La(),r=r.La();return[e,t]};yt.prototype.div=yt.prototype.Xa;yt.prototype.toString=function(){for(var i="",e=this;!e.Ua();){e=e.Xa(10);var t=e[0];i=e[1].lo+i,e=t}return i==""&&(i="0"),i};yt.prototype.toString=yt.prototype.toString;function uu(i){for(var e=new yt(0,0),t=new yt(0,0),r=0;r<i.length;r++){if("0">i[r]||"9"<i[r])return null;t.lo=parseInt(i[r],10),e=e.eb(10).add(t)}return e}yt.fromString=uu;yt.prototype.clone=function(){return new yt(this.lo,this.hi)};yt.prototype.clone=yt.prototype.clone;function Nr(i,e){this.lo=i,this.hi=e}rt("jspb.arith.Int64",Nr,void 0);Nr.prototype.add=function(i){return new Nr((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)};Nr.prototype.add=Nr.prototype.add;Nr.prototype.sub=function(i){return new Nr((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)};Nr.prototype.sub=Nr.prototype.sub;Nr.prototype.clone=function(){return new Nr(this.lo,this.hi)};Nr.prototype.clone=Nr.prototype.clone;Nr.prototype.toString=function(){var i=(this.hi&2147483648)!=0,e=new yt(this.lo,this.hi);return i&&(e=new yt(0,0).sub(e)),(i?"-":"")+e.toString()};Nr.prototype.toString=Nr.prototype.toString;function F0(i){var e=0<i.length&&i[0]=="-";return e&&(i=i.substring(1)),i=uu(i),i===null?null:(e&&(i=new yt(0,0).sub(i)),new Nr(i.lo,i.hi))}Nr.fromString=F0;function M(){this.c=[],this.b=0,this.a=new Be,this.h=[]}rt("jspb.BinaryWriter",M,void 0);function sR(i,e){var t=i.a.end();i.c.push(t),i.c.push(e),i.b+=t.length+e.length}function tr(i,e){return Et(i,e,2),e=i.a.end(),i.c.push(e),i.b+=e.length,e.push(i.b),e}function ir(i,e){var t=e.pop();for(t=i.b+i.a.length()-t,se(0<=t);127<t;)e.push(t&127|128),t>>>=7,i.b++;e.push(t),i.b++}M.prototype.pb=function(i,e,t){sR(this,i.subarray(e,t))};M.prototype.writeSerializedMessage=M.prototype.pb;M.prototype.Pb=function(i,e,t){i!=null&&e!=null&&t!=null&&this.pb(i,e,t)};M.prototype.maybeWriteSerializedMessage=M.prototype.Pb;M.prototype.reset=function(){this.c=[],this.a.end(),this.b=0,this.h=[]};M.prototype.reset=M.prototype.reset;M.prototype.ab=function(){se(this.h.length==0);for(var i=new Uint8Array(this.b+this.a.length()),e=this.c,t=e.length,r=0,s=0;s<t;s++){var o=e[s];i.set(o,r),r+=o.length}return e=this.a.end(),i.set(e,r),r+=e.length,se(r==i.length),this.c=[i],i};M.prototype.getResultBuffer=M.prototype.ab;M.prototype.Kb=function(i){return OM(this.ab(),i)};M.prototype.getResultBase64String=M.prototype.Kb;M.prototype.Va=function(i){this.h.push(tr(this,i))};M.prototype.beginSubMessage=M.prototype.Va;M.prototype.Ya=function(){se(0<=this.h.length),ir(this,this.h.pop())};M.prototype.endSubMessage=M.prototype.Ya;function Et(i,e,t){se(1<=e&&e==Math.floor(e)),i.a.j(8*e+t)}M.prototype.Nc=function(i,e,t){switch(i){case 1:this.J(e,t);break;case 2:this.L(e,t);break;case 3:this.T(e,t);break;case 4:this.V(e,t);break;case 5:this.S(e,t);break;case 6:this.Qa(e,t);break;case 7:this.Pa(e,t);break;case 8:this.I(e,t);break;case 9:this.U(e,t);break;case 10:Tr("Group field type not supported in writeAny()");break;case 11:Tr("Message field type not supported in writeAny()");break;case 12:this.ja(e,t);break;case 13:this.s(e,t);break;case 14:this.R(e,t);break;case 15:this.Ra(e,t);break;case 16:this.Sa(e,t);break;case 17:this.rb(e,t);break;case 18:this.sb(e,t);break;case 30:this.K(e,t);break;case 31:this.N(e,t);break;default:Tr("Invalid field type in writeAny()")}};M.prototype.writeAny=M.prototype.Nc;function aw(i,e,t){t!=null&&(Et(i,e,0),i.a.j(t))}function lw(i,e,t){t!=null&&(Et(i,e,0),i.a.M(t))}M.prototype.S=function(i,e){e!=null&&(se(-2147483648<=e&&2147483648>e),lw(this,i,e))};M.prototype.writeInt32=M.prototype.S;M.prototype.ob=function(i,e){e!=null&&(e=parseInt(e,10),se(-2147483648<=e&&2147483648>e),lw(this,i,e))};M.prototype.writeInt32String=M.prototype.ob;M.prototype.T=function(i,e){e!=null&&(se(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(Et(this,i,0),this.a.ua(e)))};M.prototype.writeInt64=M.prototype.T;M.prototype.ka=function(i,e){e!=null&&(e=F0(e),Et(this,i,0),this.a.l(e.lo,e.hi))};M.prototype.writeInt64String=M.prototype.ka;M.prototype.s=function(i,e){e!=null&&(se(0<=e&&4294967296>e),aw(this,i,e))};M.prototype.writeUint32=M.prototype.s;M.prototype.ub=function(i,e){e!=null&&(e=parseInt(e,10),se(0<=e&&4294967296>e),aw(this,i,e))};M.prototype.writeUint32String=M.prototype.ub;M.prototype.V=function(i,e){e!=null&&(se(0<=e&&18446744073709552e3>e),e!=null&&(Et(this,i,0),this.a.va(e)))};M.prototype.writeUint64=M.prototype.V;M.prototype.vb=function(i,e){e!=null&&(e=uu(e),Et(this,i,0),this.a.l(e.lo,e.hi))};M.prototype.writeUint64String=M.prototype.vb;M.prototype.rb=function(i,e){e!=null&&(se(-2147483648<=e&&2147483648>e),e!=null&&(Et(this,i,0),this.a.wa(e)))};M.prototype.writeSint32=M.prototype.rb;M.prototype.sb=function(i,e){e!=null&&(se(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(Et(this,i,0),this.a.xa(e)))};M.prototype.writeSint64=M.prototype.sb;M.prototype.$d=function(i,e){e!=null&&e!=null&&(Et(this,i,0),this.a.W(e))};M.prototype.writeSintHash64=M.prototype.$d;M.prototype.Zd=function(i,e){e!=null&&e!=null&&(Et(this,i,0),this.a.Ta(e))};M.prototype.writeSint64String=M.prototype.Zd;M.prototype.Pa=function(i,e){e!=null&&(se(0<=e&&4294967296>e),Et(this,i,5),this.a.s(e))};M.prototype.writeFixed32=M.prototype.Pa;M.prototype.Qa=function(i,e){e!=null&&(se(0<=e&&18446744073709552e3>e),Et(this,i,1),this.a.V(e))};M.prototype.writeFixed64=M.prototype.Qa;M.prototype.nb=function(i,e){e!=null&&(e=uu(e),Et(this,i,1),this.a.A(e.lo,e.hi))};M.prototype.writeFixed64String=M.prototype.nb;M.prototype.Ra=function(i,e){e!=null&&(se(-2147483648<=e&&2147483648>e),Et(this,i,5),this.a.S(e))};M.prototype.writeSfixed32=M.prototype.Ra;M.prototype.Sa=function(i,e){e!=null&&(se(-9223372036854776e3<=e&&9223372036854776e3>e),Et(this,i,1),this.a.T(e))};M.prototype.writeSfixed64=M.prototype.Sa;M.prototype.qb=function(i,e){e!=null&&(e=F0(e),Et(this,i,1),this.a.A(e.lo,e.hi))};M.prototype.writeSfixed64String=M.prototype.qb;M.prototype.L=function(i,e){e!=null&&(Et(this,i,5),this.a.L(e))};M.prototype.writeFloat=M.prototype.L;M.prototype.J=function(i,e){e!=null&&(Et(this,i,1),this.a.J(e))};M.prototype.writeDouble=M.prototype.J;M.prototype.I=function(i,e){e!=null&&(se(typeof e=="boolean"||typeof e=="number"),Et(this,i,0),this.a.I(e))};M.prototype.writeBool=M.prototype.I;M.prototype.R=function(i,e){e!=null&&(se(-2147483648<=e&&2147483648>e),Et(this,i,0),this.a.M(e))};M.prototype.writeEnum=M.prototype.R;M.prototype.U=function(i,e){e!=null&&(i=tr(this,i),this.a.U(e),ir(this,i))};M.prototype.writeString=M.prototype.U;M.prototype.ja=function(i,e){e!=null&&(e=R0(e),Et(this,i,2),this.a.j(e.length),sR(this,e))};M.prototype.writeBytes=M.prototype.ja;M.prototype.Rc=function(i,e,t){e!=null&&(i=tr(this,i),t(e,this),ir(this,i))};M.prototype.writeMessage=M.prototype.Rc;M.prototype.Sc=function(i,e,t){e!=null&&(Et(this,1,3),Et(this,2,0),this.a.M(i),i=tr(this,3),t(e,this),ir(this,i),Et(this,1,4))};M.prototype.writeMessageSet=M.prototype.Sc;M.prototype.Oc=function(i,e,t){e!=null&&(Et(this,i,3),t(e,this),Et(this,i,4))};M.prototype.writeGroup=M.prototype.Oc;M.prototype.K=function(i,e){e!=null&&(se(e.length==8),Et(this,i,1),this.a.K(e))};M.prototype.writeFixedHash64=M.prototype.K;M.prototype.N=function(i,e){e!=null&&(se(e.length==8),Et(this,i,0),this.a.N(e))};M.prototype.writeVarintHash64=M.prototype.N;M.prototype.A=function(i,e,t){Et(this,i,1),this.a.A(e,t)};M.prototype.writeSplitFixed64=M.prototype.A;M.prototype.l=function(i,e,t){Et(this,i,0),this.a.l(e,t)};M.prototype.writeSplitVarint64=M.prototype.l;M.prototype.tb=function(i,e,t){Et(this,i,0);var r=this.a;C0(e,t,function(s,o){r.l(s>>>0,o>>>0)})};M.prototype.writeSplitZigzagVarint64=M.prototype.tb;M.prototype.Ed=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)lw(this,i,e[t])};M.prototype.writeRepeatedInt32=M.prototype.Ed;M.prototype.Fd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ob(i,e[t])};M.prototype.writeRepeatedInt32String=M.prototype.Fd;M.prototype.Gd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Et(this,i,0),this.a.ua(r))}};M.prototype.writeRepeatedInt64=M.prototype.Gd;M.prototype.Qd=function(i,e,t,r){if(e!=null)for(var s=0;s<e.length;s++)this.A(i,t(e[s]),r(e[s]))};M.prototype.writeRepeatedSplitFixed64=M.prototype.Qd;M.prototype.Rd=function(i,e,t,r){if(e!=null)for(var s=0;s<e.length;s++)this.l(i,t(e[s]),r(e[s]))};M.prototype.writeRepeatedSplitVarint64=M.prototype.Rd;M.prototype.Sd=function(i,e,t,r){if(e!=null)for(var s=0;s<e.length;s++)this.tb(i,t(e[s]),r(e[s]))};M.prototype.writeRepeatedSplitZigzagVarint64=M.prototype.Sd;M.prototype.Hd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ka(i,e[t])};M.prototype.writeRepeatedInt64String=M.prototype.Hd;M.prototype.Ud=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)aw(this,i,e[t])};M.prototype.writeRepeatedUint32=M.prototype.Ud;M.prototype.Vd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ub(i,e[t])};M.prototype.writeRepeatedUint32String=M.prototype.Vd;M.prototype.Wd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Et(this,i,0),this.a.va(r))}};M.prototype.writeRepeatedUint64=M.prototype.Wd;M.prototype.Xd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.vb(i,e[t])};M.prototype.writeRepeatedUint64String=M.prototype.Xd;M.prototype.Md=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Et(this,i,0),this.a.wa(r))}};M.prototype.writeRepeatedSint32=M.prototype.Md;M.prototype.Nd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Et(this,i,0),this.a.xa(r))}};M.prototype.writeRepeatedSint64=M.prototype.Nd;M.prototype.Od=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Et(this,i,0),this.a.Ta(r))}};M.prototype.writeRepeatedSint64String=M.prototype.Od;M.prototype.Pd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(Et(this,i,0),this.a.W(r))}};M.prototype.writeRepeatedSintHash64=M.prototype.Pd;M.prototype.yd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Pa(i,e[t])};M.prototype.writeRepeatedFixed32=M.prototype.yd;M.prototype.zd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Qa(i,e[t])};M.prototype.writeRepeatedFixed64=M.prototype.zd;M.prototype.Ad=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.nb(i,e[t])};M.prototype.writeRepeatedFixed64String=M.prototype.Ad;M.prototype.Jd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Ra(i,e[t])};M.prototype.writeRepeatedSfixed32=M.prototype.Jd;M.prototype.Kd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Sa(i,e[t])};M.prototype.writeRepeatedSfixed64=M.prototype.Kd;M.prototype.Ld=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.qb(i,e[t])};M.prototype.writeRepeatedSfixed64String=M.prototype.Ld;M.prototype.Cd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.L(i,e[t])};M.prototype.writeRepeatedFloat=M.prototype.Cd;M.prototype.wd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.J(i,e[t])};M.prototype.writeRepeatedDouble=M.prototype.wd;M.prototype.ud=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.I(i,e[t])};M.prototype.writeRepeatedBool=M.prototype.ud;M.prototype.xd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.R(i,e[t])};M.prototype.writeRepeatedEnum=M.prototype.xd;M.prototype.Td=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.U(i,e[t])};M.prototype.writeRepeatedString=M.prototype.Td;M.prototype.vd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ja(i,e[t])};M.prototype.writeRepeatedBytes=M.prototype.vd;M.prototype.Id=function(i,e,t){if(e!=null)for(var r=0;r<e.length;r++){var s=tr(this,i);t(e[r],this),ir(this,s)}};M.prototype.writeRepeatedMessage=M.prototype.Id;M.prototype.Dd=function(i,e,t){if(e!=null)for(var r=0;r<e.length;r++)Et(this,i,3),t(e[r],this),Et(this,i,4)};M.prototype.writeRepeatedGroup=M.prototype.Dd;M.prototype.Bd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.K(i,e[t])};M.prototype.writeRepeatedFixedHash64=M.prototype.Bd;M.prototype.Yd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.N(i,e[t])};M.prototype.writeRepeatedVarintHash64=M.prototype.Yd;M.prototype.ad=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.M(e[t]);ir(this,i)}};M.prototype.writePackedInt32=M.prototype.ad;M.prototype.bd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.M(parseInt(e[t],10));ir(this,i)}};M.prototype.writePackedInt32String=M.prototype.bd;M.prototype.cd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.ua(e[t]);ir(this,i)}};M.prototype.writePackedInt64=M.prototype.cd;M.prototype.md=function(i,e,t,r){if(e!=null){i=tr(this,i);for(var s=0;s<e.length;s++)this.a.A(t(e[s]),r(e[s]));ir(this,i)}};M.prototype.writePackedSplitFixed64=M.prototype.md;M.prototype.nd=function(i,e,t,r){if(e!=null){i=tr(this,i);for(var s=0;s<e.length;s++)this.a.l(t(e[s]),r(e[s]));ir(this,i)}};M.prototype.writePackedSplitVarint64=M.prototype.nd;M.prototype.od=function(i,e,t,r){if(e!=null){i=tr(this,i);for(var s=this.a,o=0;o<e.length;o++)C0(t(e[o]),r(e[o]),function(l,u){s.l(l>>>0,u>>>0)});ir(this,i)}};M.prototype.writePackedSplitZigzagVarint64=M.prototype.od;M.prototype.dd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++){var r=F0(e[t]);this.a.l(r.lo,r.hi)}ir(this,i)}};M.prototype.writePackedInt64String=M.prototype.dd;M.prototype.pd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.j(e[t]);ir(this,i)}};M.prototype.writePackedUint32=M.prototype.pd;M.prototype.qd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.j(parseInt(e[t],10));ir(this,i)}};M.prototype.writePackedUint32String=M.prototype.qd;M.prototype.rd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.va(e[t]);ir(this,i)}};M.prototype.writePackedUint64=M.prototype.rd;M.prototype.sd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++){var r=uu(e[t]);this.a.l(r.lo,r.hi)}ir(this,i)}};M.prototype.writePackedUint64String=M.prototype.sd;M.prototype.hd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.wa(e[t]);ir(this,i)}};M.prototype.writePackedSint32=M.prototype.hd;M.prototype.jd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.xa(e[t]);ir(this,i)}};M.prototype.writePackedSint64=M.prototype.jd;M.prototype.kd=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.W(md(e[t]));ir(this,i)}};M.prototype.writePackedSint64String=M.prototype.kd;M.prototype.ld=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.W(e[t]);ir(this,i)}};M.prototype.writePackedSintHash64=M.prototype.ld;M.prototype.Wc=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(4*e.length),i=0;i<e.length;i++)this.a.s(e[i])};M.prototype.writePackedFixed32=M.prototype.Wc;M.prototype.Xc=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.V(e[i])};M.prototype.writePackedFixed64=M.prototype.Xc;M.prototype.Yc=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++){var t=uu(e[i]);this.a.A(t.lo,t.hi)}};M.prototype.writePackedFixed64String=M.prototype.Yc;M.prototype.ed=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(4*e.length),i=0;i<e.length;i++)this.a.S(e[i])};M.prototype.writePackedSfixed32=M.prototype.ed;M.prototype.fd=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.T(e[i])};M.prototype.writePackedSfixed64=M.prototype.fd;M.prototype.gd=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.ka(e[i])};M.prototype.writePackedSfixed64String=M.prototype.gd;M.prototype.$c=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(4*e.length),i=0;i<e.length;i++)this.a.L(e[i])};M.prototype.writePackedFloat=M.prototype.$c;M.prototype.Uc=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.J(e[i])};M.prototype.writePackedDouble=M.prototype.Uc;M.prototype.Tc=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(e.length),i=0;i<e.length;i++)this.a.I(e[i])};M.prototype.writePackedBool=M.prototype.Tc;M.prototype.Vc=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.R(e[t]);ir(this,i)}};M.prototype.writePackedEnum=M.prototype.Vc;M.prototype.Zc=function(i,e){if(e!=null&&e.length)for(Et(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.K(e[i])};M.prototype.writePackedFixedHash64=M.prototype.Zc;M.prototype.td=function(i,e){if(e!=null&&e.length){i=tr(this,i);for(var t=0;t<e.length;t++)this.a.N(e[t]);ir(this,i)}};M.prototype.writePackedVarintHash64=M.prototype.td;typeof Hr=="object"&&(Hr.debug=Is,Hr.Map=Ct,Hr.Message=We,Hr.BinaryReader=B,Hr.BinaryWriter=M,Hr.ExtensionFieldInfo=od,Hr.ExtensionFieldBinaryInfo=qM,Hr.exportSymbol=ZN,Hr.inherits=eO,Hr.object={extend:tO},Hr.typeOf=Eo)});var c,x,Kt=_(()=>{"use strict";c=uf(oR());(e=>{let i;(r=>{let t;(St=>{var Je,Ye,ot,ee,be,ue,dt,Pt,N,si,zt,ii,hi,Pi,Wi,lr,Cd,Ad,Md,Rd,Bd,Dd,Nd,Od,Fd,Pd,Ud,Hd,zd,jd,Gd,Wd,Vd,Kd,$d,qd,Yd,Qd,Xd,Jd,Zd,em,tm,im,rm,nm,sm,om,am,lm,cm,um,pm,hm,dm,mm,fm,gm,bm,ym,_m,xm,vm,Im,Sm,wm,km,Em,Lm,Tm,Cm,Am,Mm,Rm,Bm,Dm,Nm,Om,Fm,Pm,Um,Hm,zm,jm,Gm,Wm,Vm,Km,$m,qm,Ym,Qm,Xm,Jm,Zm,ef,tf,rf,nf,sf,of;let s;(ji=>(ji[ji.SYS_NORMAL=1]="SYS_NORMAL",ji[ji.UNKNOWN=2]="UNKNOWN",ji[ji.USER_NOT_EXIST=3]="USER_NOT_EXIST",ji[ji.SYS_DATA_ERROR=4]="SYS_DATA_ERROR",ji[ji.WALLET_ADDRESS_ERROR=5]="WALLET_ADDRESS_ERROR",ji[ji.NOT_ENOUGH_ITEM=6]="NOT_ENOUGH_ITEM",ji[ji.NOT_ENOUGH_TOKEN=7]="NOT_ENOUGH_TOKEN",ji[ji.MAX_INVITE=8]="MAX_INVITE",ji[ji.CREATE_ROOM_MAX=9]="CREATE_ROOM_MAX",ji[ji.USER_BAN=10]="USER_BAN",ji[ji.COLLISION_FAIL=11]="COLLISION_FAIL",ji[ji.ROOM_FULL=12]="ROOM_FULL",ji[ji.ROOM_CLOSING=13]="ROOM_CLOSING"))(s=St.MessageCode||(St.MessageCode={}));let o;(ne=>(ne[ne.MSG_HEART_BEAT=10001]="MSG_HEART_BEAT",ne[ne.MSG_REG_HALL=10002]="MSG_REG_HALL",ne[ne.MSG_REG_ROOM=10003]="MSG_REG_ROOM",ne[ne.MSG_REMOVE_HALL=11002]="MSG_REMOVE_HALL",ne[ne.MSG_REMOVE_ROOM=11003]="MSG_REMOVE_ROOM",ne[ne.MSG_USER_REGISTER=101]="MSG_USER_REGISTER",ne[ne.MSG_USER_LOGIN=102]="MSG_USER_LOGIN",ne[ne.MSG_REPEAT_LOGIN_NOTICE=103]="MSG_REPEAT_LOGIN_NOTICE",ne[ne.MSG_REQUEST_ROOM_ADDR=104]="MSG_REQUEST_ROOM_ADDR",ne[ne.MSG_ENTER_ROOM=105]="MSG_ENTER_ROOM",ne[ne.MSG_PLAYER_OPR=106]="MSG_PLAYER_OPR",ne[ne.MSG_PLAYER_STATE=107]="MSG_PLAYER_STATE",ne[ne.MSG_GEN_FOOD=108]="MSG_GEN_FOOD",ne[ne.MSG_UPDATE_ROLE=109]="MSG_UPDATE_ROLE",ne[ne.MSG_NOTICE_ENTER=110]="MSG_NOTICE_ENTER",ne[ne.MSG_BATTLE_END=111]="MSG_BATTLE_END",ne[ne.MSG_EAT_FOOD=112]="MSG_EAT_FOOD",ne[ne.MSG_PLAYER_COLLISION=113]="MSG_PLAYER_COLLISION",ne[ne.MSG_REQUEST_SERVER_TIME=114]="MSG_REQUEST_SERVER_TIME",ne[ne.MSG_REQUEST_ROOM_DATA=115]="MSG_REQUEST_ROOM_DATA",ne[ne.MSG_INVITE_LIST=116]="MSG_INVITE_LIST",ne[ne.MSG_REQUEST_INFO=117]="MSG_REQUEST_INFO",ne[ne.MSG_SHOP_BUY=118]="MSG_SHOP_BUY",ne[ne.MSG_PUSH=119]="MSG_PUSH",ne[ne.MSG_QUERY_TOKEN=120]="MSG_QUERY_TOKEN",ne[ne.MSG_PLAYER_OUT=121]="MSG_PLAYER_OUT",ne[ne.MSG_CHARGE=122]="MSG_CHARGE",ne[ne.MSG_WITHDRAW=123]="MSG_WITHDRAW",ne[ne.MSG_PACK_INFO=124]="MSG_PACK_INFO",ne[ne.MSG_TRANSFER=125]="MSG_TRANSFER",ne[ne.MSG_WITHDRAW_INFO=126]="MSG_WITHDRAW_INFO",ne[ne.MSG_CHARGE_RECORD=127]="MSG_CHARGE_RECORD",ne[ne.MSG_WITHDRAW_RECORD=128]="MSG_WITHDRAW_RECORD",ne[ne.MSG_SNAKE_UPGRADE=129]="MSG_SNAKE_UPGRADE",ne[ne.MSG_SNAKE_FIGHT=130]="MSG_SNAKE_FIGHT",ne[ne.MSG_MAIL_CHECK=131]="MSG_MAIL_CHECK",ne[ne.MSG_MAIL_LIST=132]="MSG_MAIL_LIST",ne[ne.MSG_MAIL_GET=133]="MSG_MAIL_GET",ne[ne.MSG_MAIL_DELETE=134]="MSG_MAIL_DELETE",ne[ne.MSG_NEW_MAIL=135]="MSG_NEW_MAIL",ne[ne.MSG_SYS_NOTICE=136]="MSG_SYS_NOTICE",ne[ne.MSG_CHANGE_INFO=137]="MSG_CHANGE_INFO",ne[ne.MSG_AI_ENTER=138]="MSG_AI_ENTER",ne[ne.MSG_AI_END=139]="MSG_AI_END",ne[ne.MSG_OPEN_BOX=140]="MSG_OPEN_BOX",ne[ne.MSG_REQUEST_PRICE=141]="MSG_REQUEST_PRICE",ne[ne.MSG_REQUEST_RANK=142]="MSG_REQUEST_RANK",ne[ne.MSG_LVUP_NOTICE=143]="MSG_LVUP_NOTICE",ne[ne.MSG_CREATE_CLUB=144]="MSG_CREATE_CLUB",ne[ne.MSG_CLUB_INFO=145]="MSG_CLUB_INFO",ne[ne.MSG_SET_COMMISSION=146]="MSG_SET_COMMISSION",ne[ne.MSG_CLUB_CHANGE_INFO=147]="MSG_CLUB_CHANGE_INFO",ne[ne.MSG_CREATE_CUSTOM_ROOM=148]="MSG_CREATE_CUSTOM_ROOM",ne[ne.MSG_CLUB_ROOM=149]="MSG_CLUB_ROOM",ne[ne.MSG_REQUEST_PROFIT=150]="MSG_REQUEST_PROFIT",ne[ne.MSG_TOKEN_CHANGE_RECORD=151]="MSG_TOKEN_CHANGE_RECORD",ne[ne.MSG_CLUB_MEMBER=152]="MSG_CLUB_MEMBER",ne[ne.MSG_REQUEST_MY_PROFIT=153]="MSG_REQUEST_MY_PROFIT",ne[ne.MSG_REQUEST_PROFIT_LIST=154]="MSG_REQUEST_PROFIT_LIST",ne[ne.MSG_REQUEST_HALL_ADDR=155]="MSG_REQUEST_HALL_ADDR",ne[ne.GM_SEND_SYS_NOTICE=2e3]="GM_SEND_SYS_NOTICE",ne[ne.GM_SEND_SYS_MAIL=2001]="GM_SEND_SYS_MAIL",ne[ne.GM_QUERY_ROLE=2002]="GM_QUERY_ROLE",ne[ne.GM_BAN_ROLE=2003]="GM_BAN_ROLE",ne[ne.GM_QUERY_CLUB=2004]="GM_QUERY_CLUB",ne[ne.GM_ROLE_CLUB_SET=2005]="GM_ROLE_CLUB_SET",ne[ne.GM_CREATE_CLUB=2006]="GM_CREATE_CLUB"))(o=St.MessageType||(St.MessageType={}));let ut=class ut extends c.Message{constructor(n){super();Ie(this,Je,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Je)),!Array.isArray(n)&&typeof n=="object"&&(this.msghead=n.msghead,"msgbody"in n&&n.msgbody!=null&&(this.msgbody=n.msgbody))}get msghead(){return c.Message.getWrapperField(this,u,1)}set msghead(n){c.Message.setWrapperField(this,1,n)}get has_msghead(){return c.Message.getField(this,1)!=null}get msgbody(){return c.Message.getFieldWithDefault(this,2,new Uint8Array(0))}set msgbody(n){c.Message.setField(this,2,n)}get has_msgbody(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new ut({msghead:u.fromObject(n.msghead)});return n.msgbody!=null&&(a.msgbody=n.msgbody),a}toObject(){let n={};return this.msghead!=null&&(n.msghead=this.msghead.toObject()),this.msgbody!=null&&(n.msgbody=this.msgbody),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_msghead&&a.writeMessage(1,this.msghead,()=>this.msghead.serialize(a)),this.has_msgbody&&this.msgbody.length&&a.writeBytes(2,this.msgbody),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ut;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.msghead,()=>d.msghead=u.deserialize(a));break;case 2:d.msgbody=a.readBytes();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ut.deserialize(n)}};Je=new WeakMap;let l=ut;St.CMsgBase=ut;let Ze=class Ze extends c.Message{constructor(n){super();Ie(this,Ye,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Ye)),!Array.isArray(n)&&typeof n=="object"&&(this.msgtype=n.msgtype,this.msgcode=n.msgcode,"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId))}get msgtype(){return c.Message.getField(this,1)}set msgtype(n){c.Message.setField(this,1,n)}get has_msgtype(){return c.Message.getField(this,1)!=null}get msgcode(){return c.Message.getField(this,2)}set msgcode(n){c.Message.setField(this,2,n)}get has_msgcode(){return c.Message.getField(this,2)!=null}get roleId(){return c.Message.getFieldWithDefault(this,3,"")}set roleId(n){c.Message.setField(this,3,n)}get has_roleId(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new Ze({msgtype:n.msgtype,msgcode:n.msgcode});return n.roleId!=null&&(a.roleId=n.roleId),a}toObject(){let n={};return this.msgtype!=null&&(n.msgtype=this.msgtype),this.msgcode!=null&&(n.msgcode=this.msgcode),this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_msgtype&&a.writeInt32(1,this.msgtype),this.has_msgcode&&a.writeInt32(2,this.msgcode),this.has_roleId&&this.roleId.length&&a.writeString(3,this.roleId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ze;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.msgtype=a.readInt32();break;case 2:d.msgcode=a.readInt32();break;case 3:d.roleId=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ze.deserialize(n)}};Ye=new WeakMap;let u=Ze;St.CMsgHead=Ze;let je=class je extends c.Message{constructor(n){super();Ie(this,ot,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,ot)),!Array.isArray(n)&&typeof n=="object"&&(this.name=n.name,this.icon=n.icon,this.type=n.type,this.addr=n.addr)}get name(){return c.Message.getField(this,1)}set name(n){c.Message.setField(this,1,n)}get has_name(){return c.Message.getField(this,1)!=null}get icon(){return c.Message.getField(this,2)}set icon(n){c.Message.setField(this,2,n)}get has_icon(){return c.Message.getField(this,2)!=null}get type(){return c.Message.getField(this,3)}set type(n){c.Message.setField(this,3,n)}get has_type(){return c.Message.getField(this,3)!=null}get addr(){return c.Message.getField(this,4)}set addr(n){c.Message.setField(this,4,n)}get has_addr(){return c.Message.getField(this,4)!=null}static fromObject(n){return new je({name:n.name,icon:n.icon,type:n.type,addr:n.addr})}toObject(){let n={};return this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.type!=null&&(n.type=this.type),this.addr!=null&&(n.addr=this.addr),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_name&&this.name.length&&a.writeString(1,this.name),this.has_icon&&this.icon.length&&a.writeString(2,this.icon),this.has_type&&a.writeInt32(3,this.type),this.has_addr&&this.addr.length&&a.writeString(4,this.addr),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new je;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.name=a.readString();break;case 2:d.icon=a.readString();break;case 3:d.type=a.readInt32();break;case 4:d.addr=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return je.deserialize(n)}};ot=new WeakMap;let p=je;St.CS_GM_CREATE_CLUB=je;let te=class te extends c.Message{constructor(n){super();Ie(this,ee,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,ee)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type)}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){return new te({clubId:n.clubId,type:n.type})}toObject(){let n={};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_clubId&&a.writeInt64(1,this.clubId),this.has_type&&a.writeInt32(2,this.type),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new te;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.clubId=a.readInt64();break;case 2:d.type=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return te.deserialize(n)}};ee=new WeakMap;let h=te;St.SC_GM_CREATE_CLUB=te;let ce=class ce extends c.Message{constructor(n){super();Ie(this,be,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,be)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,this.clubId=n.clubId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get clubId(){return c.Message.getField(this,2)}set clubId(n){c.Message.setField(this,2,n)}get has_clubId(){return c.Message.getField(this,2)!=null}static fromObject(n){return new ce({roleId:n.roleId,clubId:n.clubId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.clubId!=null&&(n.clubId=this.clubId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_clubId&&a.writeInt64(2,this.clubId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ce;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:d.clubId=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ce.deserialize(n)}};be=new WeakMap;let f=ce;St.CS_GM_ROLE_CLUB_SET=ce;let Se=class Se extends c.Message{constructor(n){super();Ie(this,ue,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,ue)),!Array.isArray(n)&&typeof n=="object"&&"clubId"in n&&n.clubId!=null&&(this.clubId=n.clubId)}get clubId(){return c.Message.getFieldWithDefault(this,1,0)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}static fromObject(n){let a=new Se({});return n.clubId!=null&&(a.clubId=n.clubId),a}toObject(){let n={};return this.clubId!=null&&(n.clubId=this.clubId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_clubId&&a.writeInt64(1,this.clubId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Se;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.clubId=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Se.deserialize(n)}};ue=new WeakMap;let g=Se;St.CS_GM_QUERY_CLUB=Se;let Dt=class Dt extends c.Message{constructor(n){super();Ie(this,dt,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8],ve(this,dt)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type,"name"in n&&n.name!=null&&(this.name=n.name),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"creater"in n&&n.creater!=null&&(this.creater=n.creater),"createTime"in n&&n.createTime!=null&&(this.createTime=n.createTime),this.rooms=n.rooms,"createrId"in n&&n.createrId!=null&&(this.createrId=n.createrId))}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}get name(){return c.Message.getFieldWithDefault(this,3,"")}set name(n){c.Message.setField(this,3,n)}get has_name(){return c.Message.getField(this,3)!=null}get icon(){return c.Message.getFieldWithDefault(this,4,"")}set icon(n){c.Message.setField(this,4,n)}get has_icon(){return c.Message.getField(this,4)!=null}get creater(){return c.Message.getFieldWithDefault(this,5,"")}set creater(n){c.Message.setField(this,5,n)}get has_creater(){return c.Message.getField(this,5)!=null}get createTime(){return c.Message.getFieldWithDefault(this,6,0)}set createTime(n){c.Message.setField(this,6,n)}get has_createTime(){return c.Message.getField(this,6)!=null}get rooms(){return c.Message.getFieldWithDefault(this,8,[])}set rooms(n){c.Message.setField(this,8,n)}get createrId(){return c.Message.getFieldWithDefault(this,9,"")}set createrId(n){c.Message.setField(this,9,n)}get has_createrId(){return c.Message.getField(this,9)!=null}static fromObject(n){let a=new Dt({clubId:n.clubId,type:n.type,rooms:n.rooms});return n.name!=null&&(a.name=n.name),n.icon!=null&&(a.icon=n.icon),n.creater!=null&&(a.creater=n.creater),n.createTime!=null&&(a.createTime=n.createTime),n.createrId!=null&&(a.createrId=n.createrId),a}toObject(){let n={rooms:this.rooms};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.creater!=null&&(n.creater=this.creater),this.createTime!=null&&(n.createTime=this.createTime),this.createrId!=null&&(n.createrId=this.createrId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_clubId&&a.writeInt64(1,this.clubId),this.has_type&&a.writeInt32(2,this.type),this.has_name&&this.name.length&&a.writeString(3,this.name),this.has_icon&&this.icon.length&&a.writeString(4,this.icon),this.has_creater&&this.creater.length&&a.writeString(5,this.creater),this.has_createTime&&a.writeInt64(6,this.createTime),this.rooms.length&&a.writeRepeatedString(8,this.rooms),this.has_createrId&&this.createrId.length&&a.writeString(9,this.createrId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Dt;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.clubId=a.readInt64();break;case 2:d.type=a.readInt32();break;case 3:d.name=a.readString();break;case 4:d.icon=a.readString();break;case 5:d.creater=a.readString();break;case 6:d.createTime=a.readInt64();break;case 8:c.Message.addToRepeatedField(d,8,a.readString());break;case 9:d.createrId=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Dt.deserialize(n)}};dt=new WeakMap;let b=Dt;St.SC_GM_QUERY_CLUB=Dt;let Nt=class Nt extends c.Message{constructor(n){super();Ie(this,Pt,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Pt)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Nt({roleId:n.roleId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Nt;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Nt.deserialize(n)}};Pt=new WeakMap;let v=Nt;St.CS_BAN_ROLE=Nt;let Ht=class Ht extends c.Message{constructor(n){super();Ie(this,N,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,N)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,this.type=n.type)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Ht({roleId:n.roleId,type:n.type})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.type!=null&&(n.type=this.type),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_type&&a.writeInt32(2,this.type),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ht;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:d.type=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ht.deserialize(n)}};N=new WeakMap;let w=Ht;St.CS_QUERY_ROLE=Ht;let ti=class ti extends c.Message{constructor(n){super();Ie(this,si,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,si)),!Array.isArray(n)&&typeof n=="object"&&"ro"in n&&n.ro!=null&&(this.ro=n.ro)}get ro(){return c.Message.getWrapperField(this,H,1)}set ro(n){c.Message.setWrapperField(this,1,n)}get has_ro(){return c.Message.getField(this,1)!=null}static fromObject(n){let a=new ti({});return n.ro!=null&&(a.ro=H.fromObject(n.ro)),a}toObject(){let n={};return this.ro!=null&&(n.ro=this.ro.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_ro&&a.writeMessage(1,this.ro,()=>this.ro.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ti;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.ro,()=>d.ro=H.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ti.deserialize(n)}};si=new WeakMap;let k=ti;St.SC_QUERY_ROLE=ti;let Jt=class Jt extends c.Message{constructor(n){super();Ie(this,zt,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,zt)),!Array.isArray(n)&&typeof n=="object"&&("content"in n&&n.content!=null&&(this.content=n.content),"dif"in n&&n.dif!=null&&(this.dif=n.dif),"times"in n&&n.times!=null&&(this.times=n.times))}get content(){return c.Message.getFieldWithDefault(this,1,"")}set content(n){c.Message.setField(this,1,n)}get has_content(){return c.Message.getField(this,1)!=null}get dif(){return c.Message.getFieldWithDefault(this,2,0)}set dif(n){c.Message.setField(this,2,n)}get has_dif(){return c.Message.getField(this,2)!=null}get times(){return c.Message.getFieldWithDefault(this,3,0)}set times(n){c.Message.setField(this,3,n)}get has_times(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new Jt({});return n.content!=null&&(a.content=n.content),n.dif!=null&&(a.dif=n.dif),n.times!=null&&(a.times=n.times),a}toObject(){let n={};return this.content!=null&&(n.content=this.content),this.dif!=null&&(n.dif=this.dif),this.times!=null&&(n.times=this.times),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_content&&this.content.length&&a.writeString(1,this.content),this.has_dif&&a.writeInt32(2,this.dif),this.has_times&&a.writeInt32(3,this.times),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Jt;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.content=a.readString();break;case 2:d.dif=a.readInt32();break;case 3:d.times=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Jt.deserialize(n)}};zt=new WeakMap;let E=Jt;St.CS_SEND_SYS_NOTICE=Jt;let Fi=class Fi extends c.Message{constructor(n){super();Ie(this,ii,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[4,5],ve(this,ii)),!Array.isArray(n)&&typeof n=="object"&&("sendName"in n&&n.sendName!=null&&(this.sendName=n.sendName),"title"in n&&n.title!=null&&(this.title=n.title),"content"in n&&n.content!=null&&(this.content=n.content),this.items=n.items,this.recId=n.recId)}get sendName(){return c.Message.getFieldWithDefault(this,1,"")}set sendName(n){c.Message.setField(this,1,n)}get has_sendName(){return c.Message.getField(this,1)!=null}get title(){return c.Message.getFieldWithDefault(this,2,"")}set title(n){c.Message.setField(this,2,n)}get has_title(){return c.Message.getField(this,2)!=null}get content(){return c.Message.getFieldWithDefault(this,3,"")}set content(n){c.Message.setField(this,3,n)}get has_content(){return c.Message.getField(this,3)!=null}get items(){return c.Message.getFieldWithDefault(this,4,[])}set items(n){c.Message.setField(this,4,n)}get recId(){return c.Message.getFieldWithDefault(this,5,[])}set recId(n){c.Message.setField(this,5,n)}static fromObject(n){let a=new Fi({items:n.items,recId:n.recId});return n.sendName!=null&&(a.sendName=n.sendName),n.title!=null&&(a.title=n.title),n.content!=null&&(a.content=n.content),a}toObject(){let n={items:this.items,recId:this.recId};return this.sendName!=null&&(n.sendName=this.sendName),this.title!=null&&(n.title=this.title),this.content!=null&&(n.content=this.content),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_sendName&&this.sendName.length&&a.writeString(1,this.sendName),this.has_title&&this.title.length&&a.writeString(2,this.title),this.has_content&&this.content.length&&a.writeString(3,this.content),this.items.length&&a.writeRepeatedString(4,this.items),this.recId.length&&a.writeRepeatedString(5,this.recId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Fi;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.sendName=a.readString();break;case 2:d.title=a.readString();break;case 3:d.content=a.readString();break;case 4:c.Message.addToRepeatedField(d,4,a.readString());break;case 5:c.Message.addToRepeatedField(d,5,a.readString());break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Fi.deserialize(n)}};ii=new WeakMap;let F=Fi;St.CS_SEND_SYS_MAIL=Fi;let Mi=class Mi extends c.Message{constructor(n){super();Ie(this,hi,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,hi)),!Array.isArray(n)&&typeof n=="object"&&(this.hallId=n.hallId)}get hallId(){return c.Message.getField(this,1)}set hallId(n){c.Message.setField(this,1,n)}get has_hallId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Mi({hallId:n.hallId})}toObject(){let n={};return this.hallId!=null&&(n.hallId=this.hallId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_hallId&&this.hallId.length&&a.writeString(1,this.hallId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Mi;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.hallId=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Mi.deserialize(n)}};hi=new WeakMap;let O=Mi;St.SS_REG_HALL=Mi;let Ri=class Ri extends c.Message{constructor(n){super();Ie(this,Pi,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[12,19,24,25],ve(this,Pi)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,"userName"in n&&n.userName!=null&&(this.userName=n.userName),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"createTime"in n&&n.createTime!=null&&(this.createTime=n.createTime),"score"in n&&n.score!=null&&(this.score=n.score),"country"in n&&n.country!=null&&(this.country=n.country),"club"in n&&n.club!=null&&(this.club=n.club),"code"in n&&n.code!=null&&(this.code=n.code),"walletAddr"in n&&n.walletAddr!=null&&(this.walletAddr=n.walletAddr),"snakeId"in n&&n.snakeId!=null&&(this.snakeId=n.snakeId),"kills"in n&&n.kills!=null&&(this.kills=n.kills),this.items=n.items,"invite"in n&&n.invite!=null&&(this.invite=n.invite),"source"in n&&n.source!=null&&(this.source=n.source),"num"in n&&n.num!=null&&(this.num=n.num),"stage"in n&&n.stage!=null&&(this.stage=n.stage),"invNum"in n&&n.invNum!=null&&(this.invNum=n.invNum),"exp"in n&&n.exp!=null&&(this.exp=n.exp),this.reward=n.reward,"ticketValue"in n&&n.ticketValue!=null&&(this.ticketValue=n.ticketValue),"lv"in n&&n.lv!=null&&(this.lv=n.lv),"ticketId"in n&&n.ticketId!=null&&(this.ticketId=n.ticketId),this.snake=n.snake,this.attr=n.attr,"recored"in n&&n.recored!=null&&(this.recored=n.recored),"maxKill"in n&&n.maxKill!=null&&(this.maxKill=n.maxKill),"maxAlive"in n&&n.maxAlive!=null&&(this.maxAlive=n.maxAlive),"skin"in n&&n.skin!=null&&(this.skin=n.skin),"ban"in n&&n.ban!=null&&(this.ban=n.ban),"roomNum"in n&&n.roomNum!=null&&(this.roomNum=n.roomNum))}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getFieldWithDefault(this,2,"")}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get icon(){return c.Message.getFieldWithDefault(this,3,"")}set icon(n){c.Message.setField(this,3,n)}get has_icon(){return c.Message.getField(this,3)!=null}get createTime(){return c.Message.getFieldWithDefault(this,4,0)}set createTime(n){c.Message.setField(this,4,n)}get has_createTime(){return c.Message.getField(this,4)!=null}get score(){return c.Message.getFieldWithDefault(this,5,0)}set score(n){c.Message.setField(this,5,n)}get has_score(){return c.Message.getField(this,5)!=null}get country(){return c.Message.getFieldWithDefault(this,6,0)}set country(n){c.Message.setField(this,6,n)}get has_country(){return c.Message.getField(this,6)!=null}get club(){return c.Message.getFieldWithDefault(this,7,"")}set club(n){c.Message.setField(this,7,n)}get has_club(){return c.Message.getField(this,7)!=null}get code(){return c.Message.getFieldWithDefault(this,8,"")}set code(n){c.Message.setField(this,8,n)}get has_code(){return c.Message.getField(this,8)!=null}get walletAddr(){return c.Message.getFieldWithDefault(this,9,"")}set walletAddr(n){c.Message.setField(this,9,n)}get has_walletAddr(){return c.Message.getField(this,9)!=null}get snakeId(){return c.Message.getFieldWithDefault(this,10,0)}set snakeId(n){c.Message.setField(this,10,n)}get has_snakeId(){return c.Message.getField(this,10)!=null}get kills(){return c.Message.getFieldWithDefault(this,11,0)}set kills(n){c.Message.setField(this,11,n)}get has_kills(){return c.Message.getField(this,11)!=null}get items(){return c.Message.getRepeatedWrapperField(this,W,12)}set items(n){c.Message.setRepeatedWrapperField(this,12,n)}get invite(){return c.Message.getFieldWithDefault(this,13,"")}set invite(n){c.Message.setField(this,13,n)}get has_invite(){return c.Message.getField(this,13)!=null}get source(){return c.Message.getFieldWithDefault(this,14,"")}set source(n){c.Message.setField(this,14,n)}get has_source(){return c.Message.getField(this,14)!=null}get num(){return c.Message.getFieldWithDefault(this,15,0)}set num(n){c.Message.setField(this,15,n)}get has_num(){return c.Message.getField(this,15)!=null}get stage(){return c.Message.getFieldWithDefault(this,16,0)}set stage(n){c.Message.setField(this,16,n)}get has_stage(){return c.Message.getField(this,16)!=null}get invNum(){return c.Message.getFieldWithDefault(this,17,0)}set invNum(n){c.Message.setField(this,17,n)}get has_invNum(){return c.Message.getField(this,17)!=null}get exp(){return c.Message.getFieldWithDefault(this,18,0)}set exp(n){c.Message.setField(this,18,n)}get has_exp(){return c.Message.getField(this,18)!=null}get reward(){return c.Message.getFieldWithDefault(this,19,[])}set reward(n){c.Message.setField(this,19,n)}get ticketValue(){return c.Message.getFieldWithDefault(this,20,0)}set ticketValue(n){c.Message.setField(this,20,n)}get has_ticketValue(){return c.Message.getField(this,20)!=null}get lv(){return c.Message.getFieldWithDefault(this,22,0)}set lv(n){c.Message.setField(this,22,n)}get has_lv(){return c.Message.getField(this,22)!=null}get ticketId(){return c.Message.getFieldWithDefault(this,23,0)}set ticketId(n){c.Message.setField(this,23,n)}get has_ticketId(){return c.Message.getField(this,23)!=null}get snake(){return c.Message.getRepeatedWrapperField(this,Z,24)}set snake(n){c.Message.setRepeatedWrapperField(this,24,n)}get attr(){return c.Message.getFieldWithDefault(this,25,[])}set attr(n){c.Message.setField(this,25,n)}get recored(){return c.Message.getFieldWithDefault(this,26,"")}set recored(n){c.Message.setField(this,26,n)}get has_recored(){return c.Message.getField(this,26)!=null}get maxKill(){return c.Message.getFieldWithDefault(this,27,0)}set maxKill(n){c.Message.setField(this,27,n)}get has_maxKill(){return c.Message.getField(this,27)!=null}get maxAlive(){return c.Message.getFieldWithDefault(this,28,0)}set maxAlive(n){c.Message.setField(this,28,n)}get has_maxAlive(){return c.Message.getField(this,28)!=null}get skin(){return c.Message.getFieldWithDefault(this,29,0)}set skin(n){c.Message.setField(this,29,n)}get has_skin(){return c.Message.getField(this,29)!=null}get ban(){return c.Message.getFieldWithDefault(this,30,!1)}set ban(n){c.Message.setField(this,30,n)}get has_ban(){return c.Message.getField(this,30)!=null}get roomNum(){return c.Message.getFieldWithDefault(this,31,0)}set roomNum(n){c.Message.setField(this,31,n)}get has_roomNum(){return c.Message.getField(this,31)!=null}static fromObject(n){let a=new Ri({roleId:n.roleId,items:n.items.map(d=>W.fromObject(d)),reward:n.reward,snake:n.snake.map(d=>Z.fromObject(d)),attr:n.attr});return n.userName!=null&&(a.userName=n.userName),n.icon!=null&&(a.icon=n.icon),n.createTime!=null&&(a.createTime=n.createTime),n.score!=null&&(a.score=n.score),n.country!=null&&(a.country=n.country),n.club!=null&&(a.club=n.club),n.code!=null&&(a.code=n.code),n.walletAddr!=null&&(a.walletAddr=n.walletAddr),n.snakeId!=null&&(a.snakeId=n.snakeId),n.kills!=null&&(a.kills=n.kills),n.invite!=null&&(a.invite=n.invite),n.source!=null&&(a.source=n.source),n.num!=null&&(a.num=n.num),n.stage!=null&&(a.stage=n.stage),n.invNum!=null&&(a.invNum=n.invNum),n.exp!=null&&(a.exp=n.exp),n.ticketValue!=null&&(a.ticketValue=n.ticketValue),n.lv!=null&&(a.lv=n.lv),n.ticketId!=null&&(a.ticketId=n.ticketId),n.recored!=null&&(a.recored=n.recored),n.maxKill!=null&&(a.maxKill=n.maxKill),n.maxAlive!=null&&(a.maxAlive=n.maxAlive),n.skin!=null&&(a.skin=n.skin),n.ban!=null&&(a.ban=n.ban),n.roomNum!=null&&(a.roomNum=n.roomNum),a}toObject(){let n={reward:this.reward,attr:this.attr};return this.roleId!=null&&(n.roleId=this.roleId),this.userName!=null&&(n.userName=this.userName),this.icon!=null&&(n.icon=this.icon),this.createTime!=null&&(n.createTime=this.createTime),this.score!=null&&(n.score=this.score),this.country!=null&&(n.country=this.country),this.club!=null&&(n.club=this.club),this.code!=null&&(n.code=this.code),this.walletAddr!=null&&(n.walletAddr=this.walletAddr),this.snakeId!=null&&(n.snakeId=this.snakeId),this.kills!=null&&(n.kills=this.kills),this.items!=null&&(n.items=this.items.map(a=>a.toObject())),this.invite!=null&&(n.invite=this.invite),this.source!=null&&(n.source=this.source),this.num!=null&&(n.num=this.num),this.stage!=null&&(n.stage=this.stage),this.invNum!=null&&(n.invNum=this.invNum),this.exp!=null&&(n.exp=this.exp),this.ticketValue!=null&&(n.ticketValue=this.ticketValue),this.lv!=null&&(n.lv=this.lv),this.ticketId!=null&&(n.ticketId=this.ticketId),this.snake!=null&&(n.snake=this.snake.map(a=>a.toObject())),this.recored!=null&&(n.recored=this.recored),this.maxKill!=null&&(n.maxKill=this.maxKill),this.maxAlive!=null&&(n.maxAlive=this.maxAlive),this.skin!=null&&(n.skin=this.skin),this.ban!=null&&(n.ban=this.ban),this.roomNum!=null&&(n.roomNum=this.roomNum),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_userName&&this.userName.length&&a.writeString(2,this.userName),this.has_icon&&this.icon.length&&a.writeString(3,this.icon),this.has_createTime&&a.writeInt64(4,this.createTime),this.has_score&&a.writeInt32(5,this.score),this.has_country&&a.writeInt32(6,this.country),this.has_club&&this.club.length&&a.writeString(7,this.club),this.has_code&&this.code.length&&a.writeString(8,this.code),this.has_walletAddr&&this.walletAddr.length&&a.writeString(9,this.walletAddr),this.has_snakeId&&a.writeInt32(10,this.snakeId),this.has_kills&&a.writeInt32(11,this.kills),this.items.length&&a.writeRepeatedMessage(12,this.items,d=>d.serialize(a)),this.has_invite&&this.invite.length&&a.writeString(13,this.invite),this.has_source&&this.source.length&&a.writeString(14,this.source),this.has_num&&a.writeInt32(15,this.num),this.has_stage&&a.writeInt32(16,this.stage),this.has_invNum&&a.writeInt32(17,this.invNum),this.has_exp&&a.writeInt32(18,this.exp),this.reward.length&&a.writeRepeatedString(19,this.reward),this.has_ticketValue&&a.writeDouble(20,this.ticketValue),this.has_lv&&a.writeInt32(22,this.lv),this.has_ticketId&&a.writeInt32(23,this.ticketId),this.snake.length&&a.writeRepeatedMessage(24,this.snake,d=>d.serialize(a)),this.attr.length&&a.writeRepeatedString(25,this.attr),this.has_recored&&this.recored.length&&a.writeString(26,this.recored),this.has_maxKill&&a.writeInt32(27,this.maxKill),this.has_maxAlive&&a.writeInt32(28,this.maxAlive),this.has_skin&&a.writeInt32(29,this.skin),this.has_ban&&a.writeBool(30,this.ban),this.has_roomNum&&a.writeInt32(31,this.roomNum),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ri;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:d.userName=a.readString();break;case 3:d.icon=a.readString();break;case 4:d.createTime=a.readInt64();break;case 5:d.score=a.readInt32();break;case 6:d.country=a.readInt32();break;case 7:d.club=a.readString();break;case 8:d.code=a.readString();break;case 9:d.walletAddr=a.readString();break;case 10:d.snakeId=a.readInt32();break;case 11:d.kills=a.readInt32();break;case 12:a.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,12,W.deserialize(a),W));break;case 13:d.invite=a.readString();break;case 14:d.source=a.readString();break;case 15:d.num=a.readInt32();break;case 16:d.stage=a.readInt32();break;case 17:d.invNum=a.readInt32();break;case 18:d.exp=a.readInt32();break;case 19:c.Message.addToRepeatedField(d,19,a.readString());break;case 20:d.ticketValue=a.readDouble();break;case 22:d.lv=a.readInt32();break;case 23:d.ticketId=a.readInt32();break;case 24:a.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,24,Z.deserialize(a),Z));break;case 25:c.Message.addToRepeatedField(d,25,a.readString());break;case 26:d.recored=a.readString();break;case 27:d.maxKill=a.readInt32();break;case 28:d.maxAlive=a.readInt32();break;case 29:d.skin=a.readInt32();break;case 30:d.ban=a.readBool();break;case 31:d.roomNum=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ri.deserialize(n)}};Pi=new WeakMap;let H=Ri;St.RoleObject=Ri;let Xi=class Xi extends c.Message{constructor(n){super();Ie(this,Wi,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8],ve(this,Wi)),!Array.isArray(n)&&typeof n=="object"&&("mailId"in n&&n.mailId!=null&&(this.mailId=n.mailId),"sendId"in n&&n.sendId!=null&&(this.sendId=n.sendId),"sendName"in n&&n.sendName!=null&&(this.sendName=n.sendName),"title"in n&&n.title!=null&&(this.title=n.title),"content"in n&&n.content!=null&&(this.content=n.content),"sendTime"in n&&n.sendTime!=null&&(this.sendTime=n.sendTime),"read"in n&&n.read!=null&&(this.read=n.read),this.items=n.items,"get"in n&&n.get!=null&&(this.get=n.get))}get mailId(){return c.Message.getFieldWithDefault(this,1,0)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}get sendId(){return c.Message.getFieldWithDefault(this,2,"")}set sendId(n){c.Message.setField(this,2,n)}get has_sendId(){return c.Message.getField(this,2)!=null}get sendName(){return c.Message.getFieldWithDefault(this,3,"")}set sendName(n){c.Message.setField(this,3,n)}get has_sendName(){return c.Message.getField(this,3)!=null}get title(){return c.Message.getFieldWithDefault(this,4,"")}set title(n){c.Message.setField(this,4,n)}get has_title(){return c.Message.getField(this,4)!=null}get content(){return c.Message.getFieldWithDefault(this,5,"")}set content(n){c.Message.setField(this,5,n)}get has_content(){return c.Message.getField(this,5)!=null}get sendTime(){return c.Message.getFieldWithDefault(this,6,0)}set sendTime(n){c.Message.setField(this,6,n)}get has_sendTime(){return c.Message.getField(this,6)!=null}get read(){return c.Message.getFieldWithDefault(this,7,!1)}set read(n){c.Message.setField(this,7,n)}get has_read(){return c.Message.getField(this,7)!=null}get items(){return c.Message.getRepeatedWrapperField(this,W,8)}set items(n){c.Message.setRepeatedWrapperField(this,8,n)}get get(){return c.Message.getFieldWithDefault(this,9,!1)}set get(n){c.Message.setField(this,9,n)}get has_get(){return c.Message.getField(this,9)!=null}static fromObject(n){let a=new Xi({items:n.items.map(d=>W.fromObject(d))});return n.mailId!=null&&(a.mailId=n.mailId),n.sendId!=null&&(a.sendId=n.sendId),n.sendName!=null&&(a.sendName=n.sendName),n.title!=null&&(a.title=n.title),n.content!=null&&(a.content=n.content),n.sendTime!=null&&(a.sendTime=n.sendTime),n.read!=null&&(a.read=n.read),n.get!=null&&(a.get=n.get),a}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),this.sendId!=null&&(n.sendId=this.sendId),this.sendName!=null&&(n.sendName=this.sendName),this.title!=null&&(n.title=this.title),this.content!=null&&(n.content=this.content),this.sendTime!=null&&(n.sendTime=this.sendTime),this.read!=null&&(n.read=this.read),this.items!=null&&(n.items=this.items.map(a=>a.toObject())),this.get!=null&&(n.get=this.get),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_mailId&&a.writeInt32(1,this.mailId),this.has_sendId&&this.sendId.length&&a.writeString(2,this.sendId),this.has_sendName&&this.sendName.length&&a.writeString(3,this.sendName),this.has_title&&this.title.length&&a.writeString(4,this.title),this.has_content&&this.content.length&&a.writeString(5,this.content),this.has_sendTime&&a.writeInt64(6,this.sendTime),this.has_read&&a.writeBool(7,this.read),this.items.length&&a.writeRepeatedMessage(8,this.items,d=>d.serialize(a)),this.has_get&&a.writeBool(9,this.get),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Xi;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.mailId=a.readInt32();break;case 2:d.sendId=a.readString();break;case 3:d.sendName=a.readString();break;case 4:d.title=a.readString();break;case 5:d.content=a.readString();break;case 6:d.sendTime=a.readInt64();break;case 7:d.read=a.readBool();break;case 8:a.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,8,W.deserialize(a),W));break;case 9:d.get=a.readBool();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Xi.deserialize(n)}};Wi=new WeakMap;let Y=Xi;St.MailObject=Xi;let Ji=class Ji extends c.Message{constructor(n){super();Ie(this,lr,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[3],ve(this,lr)),!Array.isArray(n)&&typeof n=="object"&&("id"in n&&n.id!=null&&(this.id=n.id),"unkey"in n&&n.unkey!=null&&(this.unkey=n.unkey),this.attr=n.attr,"skin"in n&&n.skin!=null&&(this.skin=n.skin),"upgrade"in n&&n.upgrade!=null&&(this.upgrade=n.upgrade))}get id(){return c.Message.getFieldWithDefault(this,1,0)}set id(n){c.Message.setField(this,1,n)}get has_id(){return c.Message.getField(this,1)!=null}get unkey(){return c.Message.getFieldWithDefault(this,2,0)}set unkey(n){c.Message.setField(this,2,n)}get has_unkey(){return c.Message.getField(this,2)!=null}get attr(){return c.Message.getFieldWithDefault(this,3,[])}set attr(n){c.Message.setField(this,3,n)}get skin(){return c.Message.getFieldWithDefault(this,4,0)}set skin(n){c.Message.setField(this,4,n)}get has_skin(){return c.Message.getField(this,4)!=null}get upgrade(){return c.Message.getFieldWithDefault(this,5,!1)}set upgrade(n){c.Message.setField(this,5,n)}get has_upgrade(){return c.Message.getField(this,5)!=null}static fromObject(n){let a=new Ji({attr:n.attr});return n.id!=null&&(a.id=n.id),n.unkey!=null&&(a.unkey=n.unkey),n.skin!=null&&(a.skin=n.skin),n.upgrade!=null&&(a.upgrade=n.upgrade),a}toObject(){let n={attr:this.attr};return this.id!=null&&(n.id=this.id),this.unkey!=null&&(n.unkey=this.unkey),this.skin!=null&&(n.skin=this.skin),this.upgrade!=null&&(n.upgrade=this.upgrade),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_id&&a.writeInt32(1,this.id),this.has_unkey&&a.writeInt32(2,this.unkey),this.attr.length&&a.writeRepeatedString(3,this.attr),this.has_skin&&a.writeInt32(4,this.skin),this.has_upgrade&&a.writeBool(5,this.upgrade),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ji;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.id=a.readInt32();break;case 2:d.unkey=a.readInt32();break;case 3:c.Message.addToRepeatedField(d,3,a.readString());break;case 4:d.skin=a.readInt32();break;case 5:d.upgrade=a.readBool();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ji.deserialize(n)}};lr=new WeakMap;let Z=Ji;St.SnakeDto=Ji;let xu=class xu extends c.Message{constructor(n){super();Ie(this,Cd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Cd)),!Array.isArray(n)&&typeof n=="object"&&("itemId"in n&&n.itemId!=null&&(this.itemId=n.itemId),"num"in n&&n.num!=null&&(this.num=n.num),"chainId"in n&&n.chainId!=null&&(this.chainId=n.chainId))}get itemId(){return c.Message.getFieldWithDefault(this,1,0)}set itemId(n){c.Message.setField(this,1,n)}get has_itemId(){return c.Message.getField(this,1)!=null}get num(){return c.Message.getFieldWithDefault(this,2,0)}set num(n){c.Message.setField(this,2,n)}get has_num(){return c.Message.getField(this,2)!=null}get chainId(){return c.Message.getFieldWithDefault(this,3,0)}set chainId(n){c.Message.setField(this,3,n)}get has_chainId(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new xu({});return n.itemId!=null&&(a.itemId=n.itemId),n.num!=null&&(a.num=n.num),n.chainId!=null&&(a.chainId=n.chainId),a}toObject(){let n={};return this.itemId!=null&&(n.itemId=this.itemId),this.num!=null&&(n.num=this.num),this.chainId!=null&&(n.chainId=this.chainId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_itemId&&a.writeInt32(1,this.itemId),this.has_num&&a.writeDouble(2,this.num),this.has_chainId&&a.writeInt32(3,this.chainId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new xu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.itemId=a.readInt32();break;case 2:d.num=a.readDouble();break;case 3:d.chainId=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return xu.deserialize(n)}};Cd=new WeakMap;let W=xu;St.ItemObject=xu;let vu=class vu extends c.Message{constructor(n){super();Ie(this,Ad,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Ad)),!Array.isArray(n)&&typeof n=="object"&&(this.icon=n.icon,this.userName=n.userName,this.country=n.country,"walletAddr"in n&&n.walletAddr!=null&&(this.walletAddr=n.walletAddr),"invite"in n&&n.invite!=null&&(this.invite=n.invite),"source"in n&&n.source!=null&&(this.source=n.source),"randomHex"in n&&n.randomHex!=null&&(this.randomHex=n.randomHex),"time"in n&&n.time!=null&&(this.time=n.time),"r"in n&&n.r!=null&&(this.r=n.r),"s"in n&&n.s!=null&&(this.s=n.s),"v"in n&&n.v!=null&&(this.v=n.v),"clubId"in n&&n.clubId!=null&&(this.clubId=n.clubId))}get icon(){return c.Message.getField(this,1)}set icon(n){c.Message.setField(this,1,n)}get has_icon(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getField(this,2)}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get country(){return c.Message.getField(this,3)}set country(n){c.Message.setField(this,3,n)}get has_country(){return c.Message.getField(this,3)!=null}get walletAddr(){return c.Message.getFieldWithDefault(this,4,"")}set walletAddr(n){c.Message.setField(this,4,n)}get has_walletAddr(){return c.Message.getField(this,4)!=null}get invite(){return c.Message.getFieldWithDefault(this,5,"")}set invite(n){c.Message.setField(this,5,n)}get has_invite(){return c.Message.getField(this,5)!=null}get source(){return c.Message.getFieldWithDefault(this,6,"")}set source(n){c.Message.setField(this,6,n)}get has_source(){return c.Message.getField(this,6)!=null}get randomHex(){return c.Message.getFieldWithDefault(this,7,"")}set randomHex(n){c.Message.setField(this,7,n)}get has_randomHex(){return c.Message.getField(this,7)!=null}get time(){return c.Message.getFieldWithDefault(this,8,0)}set time(n){c.Message.setField(this,8,n)}get has_time(){return c.Message.getField(this,8)!=null}get r(){return c.Message.getFieldWithDefault(this,9,"")}set r(n){c.Message.setField(this,9,n)}get has_r(){return c.Message.getField(this,9)!=null}get s(){return c.Message.getFieldWithDefault(this,10,"")}set s(n){c.Message.setField(this,10,n)}get has_s(){return c.Message.getField(this,10)!=null}get v(){return c.Message.getFieldWithDefault(this,11,"")}set v(n){c.Message.setField(this,11,n)}get has_v(){return c.Message.getField(this,11)!=null}get clubId(){return c.Message.getFieldWithDefault(this,12,0)}set clubId(n){c.Message.setField(this,12,n)}get has_clubId(){return c.Message.getField(this,12)!=null}static fromObject(n){let a=new vu({icon:n.icon,userName:n.userName,country:n.country});return n.walletAddr!=null&&(a.walletAddr=n.walletAddr),n.invite!=null&&(a.invite=n.invite),n.source!=null&&(a.source=n.source),n.randomHex!=null&&(a.randomHex=n.randomHex),n.time!=null&&(a.time=n.time),n.r!=null&&(a.r=n.r),n.s!=null&&(a.s=n.s),n.v!=null&&(a.v=n.v),n.clubId!=null&&(a.clubId=n.clubId),a}toObject(){let n={};return this.icon!=null&&(n.icon=this.icon),this.userName!=null&&(n.userName=this.userName),this.country!=null&&(n.country=this.country),this.walletAddr!=null&&(n.walletAddr=this.walletAddr),this.invite!=null&&(n.invite=this.invite),this.source!=null&&(n.source=this.source),this.randomHex!=null&&(n.randomHex=this.randomHex),this.time!=null&&(n.time=this.time),this.r!=null&&(n.r=this.r),this.s!=null&&(n.s=this.s),this.v!=null&&(n.v=this.v),this.clubId!=null&&(n.clubId=this.clubId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_icon&&this.icon.length&&a.writeString(1,this.icon),this.has_userName&&this.userName.length&&a.writeString(2,this.userName),this.has_country&&a.writeInt32(3,this.country),this.has_walletAddr&&this.walletAddr.length&&a.writeString(4,this.walletAddr),this.has_invite&&this.invite.length&&a.writeString(5,this.invite),this.has_source&&this.source.length&&a.writeString(6,this.source),this.has_randomHex&&this.randomHex.length&&a.writeString(7,this.randomHex),this.has_time&&a.writeInt64(8,this.time),this.has_r&&this.r.length&&a.writeString(9,this.r),this.has_s&&this.s.length&&a.writeString(10,this.s),this.has_v&&this.v.length&&a.writeString(11,this.v),this.has_clubId&&a.writeInt64(12,this.clubId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new vu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.icon=a.readString();break;case 2:d.userName=a.readString();break;case 3:d.country=a.readInt32();break;case 4:d.walletAddr=a.readString();break;case 5:d.invite=a.readString();break;case 6:d.source=a.readString();break;case 7:d.randomHex=a.readString();break;case 8:d.time=a.readInt64();break;case 9:d.r=a.readString();break;case 10:d.s=a.readString();break;case 11:d.v=a.readString();break;case 12:d.clubId=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return vu.deserialize(n)}};Ad=new WeakMap;let le=vu;St.CS_USER_REGISTER=vu;let Iu=class Iu extends c.Message{constructor(n){super();Ie(this,Md,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Md)),!Array.isArray(n)&&typeof n=="object"&&(this.roleInfo=n.roleInfo)}get roleInfo(){return c.Message.getWrapperField(this,H,1)}set roleInfo(n){c.Message.setWrapperField(this,1,n)}get has_roleInfo(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Iu({roleInfo:H.fromObject(n.roleInfo)})}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleInfo&&a.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Iu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.roleInfo,()=>d.roleInfo=H.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Iu.deserialize(n)}};Md=new WeakMap;let oe=Iu;St.SC_USER_REGISTER=Iu;let Su=class Su extends c.Message{constructor(n){super();Ie(this,Rd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Rd)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,"randomHex"in n&&n.randomHex!=null&&(this.randomHex=n.randomHex),"time"in n&&n.time!=null&&(this.time=n.time),"r"in n&&n.r!=null&&(this.r=n.r),"s"in n&&n.s!=null&&(this.s=n.s),"v"in n&&n.v!=null&&(this.v=n.v))}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get randomHex(){return c.Message.getFieldWithDefault(this,2,"")}set randomHex(n){c.Message.setField(this,2,n)}get has_randomHex(){return c.Message.getField(this,2)!=null}get time(){return c.Message.getFieldWithDefault(this,3,0)}set time(n){c.Message.setField(this,3,n)}get has_time(){return c.Message.getField(this,3)!=null}get r(){return c.Message.getFieldWithDefault(this,4,"")}set r(n){c.Message.setField(this,4,n)}get has_r(){return c.Message.getField(this,4)!=null}get s(){return c.Message.getFieldWithDefault(this,5,"")}set s(n){c.Message.setField(this,5,n)}get has_s(){return c.Message.getField(this,5)!=null}get v(){return c.Message.getFieldWithDefault(this,6,"")}set v(n){c.Message.setField(this,6,n)}get has_v(){return c.Message.getField(this,6)!=null}static fromObject(n){let a=new Su({roleId:n.roleId});return n.randomHex!=null&&(a.randomHex=n.randomHex),n.time!=null&&(a.time=n.time),n.r!=null&&(a.r=n.r),n.s!=null&&(a.s=n.s),n.v!=null&&(a.v=n.v),a}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.randomHex!=null&&(n.randomHex=this.randomHex),this.time!=null&&(n.time=this.time),this.r!=null&&(n.r=this.r),this.s!=null&&(n.s=this.s),this.v!=null&&(n.v=this.v),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_randomHex&&this.randomHex.length&&a.writeString(2,this.randomHex),this.has_time&&a.writeInt64(3,this.time),this.has_r&&this.r.length&&a.writeString(4,this.r),this.has_s&&this.s.length&&a.writeString(5,this.s),this.has_v&&this.v.length&&a.writeString(6,this.v),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Su;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:d.randomHex=a.readString();break;case 3:d.time=a.readInt64();break;case 4:d.r=a.readString();break;case 5:d.s=a.readString();break;case 6:d.v=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Su.deserialize(n)}};Rd=new WeakMap;let de=Su;St.CS_USER_LOGIN=Su;let wu=class wu extends c.Message{constructor(n){super();Ie(this,Bd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Bd)),!Array.isArray(n)&&typeof n=="object"&&("roleInfo"in n&&n.roleInfo!=null&&(this.roleInfo=n.roleInfo),"loginToken"in n&&n.loginToken!=null&&(this.loginToken=n.loginToken))}get roleInfo(){return c.Message.getWrapperField(this,H,1)}set roleInfo(n){c.Message.setWrapperField(this,1,n)}get has_roleInfo(){return c.Message.getField(this,1)!=null}get loginToken(){return c.Message.getFieldWithDefault(this,2,"")}set loginToken(n){c.Message.setField(this,2,n)}get has_loginToken(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new wu({});return n.roleInfo!=null&&(a.roleInfo=H.fromObject(n.roleInfo)),n.loginToken!=null&&(a.loginToken=n.loginToken),a}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),this.loginToken!=null&&(n.loginToken=this.loginToken),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleInfo&&a.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(a)),this.has_loginToken&&this.loginToken.length&&a.writeString(2,this.loginToken),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new wu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.roleInfo,()=>d.roleInfo=H.deserialize(a));break;case 2:d.loginToken=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return wu.deserialize(n)}};Bd=new WeakMap;let Ne=wu;St.SC_USER_LOGIN=wu;let ku=class ku extends c.Message{constructor(n){super();Ie(this,Dd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Dd)),!Array.isArray(n)&&typeof n=="object"&&("type"in n&&n.type!=null&&(this.type=n.type),"ticketId"in n&&n.ticketId!=null&&(this.ticketId=n.ticketId),"ticketValue"in n&&n.ticketValue!=null&&(this.ticketValue=n.ticketValue),"roomType"in n&&n.roomType!=null&&(this.roomType=n.roomType),"point"in n&&n.point!=null&&(this.point=n.point),"roomNo"in n&&n.roomNo!=null&&(this.roomNo=n.roomNo))}get type(){return c.Message.getFieldWithDefault(this,1,0)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get ticketId(){return c.Message.getFieldWithDefault(this,2,0)}set ticketId(n){c.Message.setField(this,2,n)}get has_ticketId(){return c.Message.getField(this,2)!=null}get ticketValue(){return c.Message.getFieldWithDefault(this,3,0)}set ticketValue(n){c.Message.setField(this,3,n)}get has_ticketValue(){return c.Message.getField(this,3)!=null}get roomType(){return c.Message.getFieldWithDefault(this,4,0)}set roomType(n){c.Message.setField(this,4,n)}get has_roomType(){return c.Message.getField(this,4)!=null}get point(){return c.Message.getFieldWithDefault(this,5,"")}set point(n){c.Message.setField(this,5,n)}get has_point(){return c.Message.getField(this,5)!=null}get roomNo(){return c.Message.getFieldWithDefault(this,6,"")}set roomNo(n){c.Message.setField(this,6,n)}get has_roomNo(){return c.Message.getField(this,6)!=null}static fromObject(n){let a=new ku({});return n.type!=null&&(a.type=n.type),n.ticketId!=null&&(a.ticketId=n.ticketId),n.ticketValue!=null&&(a.ticketValue=n.ticketValue),n.roomType!=null&&(a.roomType=n.roomType),n.point!=null&&(a.point=n.point),n.roomNo!=null&&(a.roomNo=n.roomNo),a}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.ticketId!=null&&(n.ticketId=this.ticketId),this.ticketValue!=null&&(n.ticketValue=this.ticketValue),this.roomType!=null&&(n.roomType=this.roomType),this.point!=null&&(n.point=this.point),this.roomNo!=null&&(n.roomNo=this.roomNo),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_type&&a.writeInt32(1,this.type),this.has_ticketId&&a.writeInt32(2,this.ticketId),this.has_ticketValue&&a.writeDouble(3,this.ticketValue),this.has_roomType&&a.writeInt32(4,this.roomType),this.has_point&&this.point.length&&a.writeString(5,this.point),this.has_roomNo&&this.roomNo.length&&a.writeString(6,this.roomNo),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ku;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.type=a.readInt32();break;case 2:d.ticketId=a.readInt32();break;case 3:d.ticketValue=a.readDouble();break;case 4:d.roomType=a.readInt32();break;case 5:d.point=a.readString();break;case 6:d.roomNo=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ku.deserialize(n)}};Dd=new WeakMap;let He=ku;St.CS_REQUEST_ROOM_ADDR=ku;let Eu=class Eu extends c.Message{constructor(n){super();Ie(this,Nd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Nd)),!Array.isArray(n)&&typeof n=="object"&&(this.addr=n.addr,"roleInfo"in n&&n.roleInfo!=null&&(this.roleInfo=n.roleInfo),"info"in n&&n.info!=null&&(this.info=n.info))}get addr(){return c.Message.getField(this,1)}set addr(n){c.Message.setField(this,1,n)}get has_addr(){return c.Message.getField(this,1)!=null}get roleInfo(){return c.Message.getWrapperField(this,H,2)}set roleInfo(n){c.Message.setWrapperField(this,2,n)}get has_roleInfo(){return c.Message.getField(this,2)!=null}get info(){return c.Message.getFieldWithDefault(this,3,"")}set info(n){c.Message.setField(this,3,n)}get has_info(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new Eu({addr:n.addr});return n.roleInfo!=null&&(a.roleInfo=H.fromObject(n.roleInfo)),n.info!=null&&(a.info=n.info),a}toObject(){let n={};return this.addr!=null&&(n.addr=this.addr),this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),this.info!=null&&(n.info=this.info),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_addr&&this.addr.length&&a.writeString(1,this.addr),this.has_roleInfo&&a.writeMessage(2,this.roleInfo,()=>this.roleInfo.serialize(a)),this.has_info&&this.info.length&&a.writeString(3,this.info),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Eu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.addr=a.readString();break;case 2:a.readMessage(d.roleInfo,()=>d.roleInfo=H.deserialize(a));break;case 3:d.info=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Eu.deserialize(n)}};Nd=new WeakMap;let Qe=Eu;St.SC_REQUEST_ROOM_ADDR=Eu;let Lu=class Lu extends c.Message{constructor(n){super();Ie(this,Od,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Od)),!Array.isArray(n)&&typeof n=="object"&&("tag"in n&&n.tag!=null&&(this.tag=n.tag),"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId))}get tag(){return c.Message.getFieldWithDefault(this,1,"")}set tag(n){c.Message.setField(this,1,n)}get has_tag(){return c.Message.getField(this,1)!=null}get roleId(){return c.Message.getFieldWithDefault(this,2,"")}set roleId(n){c.Message.setField(this,2,n)}get has_roleId(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Lu({});return n.tag!=null&&(a.tag=n.tag),n.roleId!=null&&(a.roleId=n.roleId),a}toObject(){let n={};return this.tag!=null&&(n.tag=this.tag),this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_tag&&this.tag.length&&a.writeString(1,this.tag),this.has_roleId&&this.roleId.length&&a.writeString(2,this.roleId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Lu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.tag=a.readString();break;case 2:d.roleId=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Lu.deserialize(n)}};Od=new WeakMap;let Xt=Lu;St.CS_ENTER_ROOM=Lu;let Tu=class Tu extends c.Message{constructor(n){super();Ie(this,Fd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ve(this,Fd)),!Array.isArray(n)&&typeof n=="object"&&(this.food=n.food,this.players=n.players,"roomNo"in n&&n.roomNo!=null&&(this.roomNo=n.roomNo))}get food(){return c.Message.getRepeatedWrapperField(this,_e,1)}set food(n){c.Message.setRepeatedWrapperField(this,1,n)}get players(){return c.Message.getRepeatedWrapperField(this,Le,2)}set players(n){c.Message.setRepeatedWrapperField(this,2,n)}get roomNo(){return c.Message.getFieldWithDefault(this,3,"")}set roomNo(n){c.Message.setField(this,3,n)}get has_roomNo(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new Tu({food:n.food.map(d=>_e.fromObject(d)),players:n.players.map(d=>Le.fromObject(d))});return n.roomNo!=null&&(a.roomNo=n.roomNo),a}toObject(){let n={};return this.food!=null&&(n.food=this.food.map(a=>a.toObject())),this.players!=null&&(n.players=this.players.map(a=>a.toObject())),this.roomNo!=null&&(n.roomNo=this.roomNo),n}serialize(n){let a=n||new c.BinaryWriter;if(this.food.length&&a.writeRepeatedMessage(1,this.food,d=>d.serialize(a)),this.players.length&&a.writeRepeatedMessage(2,this.players,d=>d.serialize(a)),this.has_roomNo&&this.roomNo.length&&a.writeString(3,this.roomNo),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Tu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,1,_e.deserialize(a),_e));break;case 2:a.readMessage(d.players,()=>c.Message.addToRepeatedWrapperField(d,2,Le.deserialize(a),Le));break;case 3:d.roomNo=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Tu.deserialize(n)}};Fd=new WeakMap;let Me=Tu;St.SC_ENTER_ROOM=Tu;let Cu=class Cu extends c.Message{constructor(n){super();Ie(this,Pd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Pd)),!Array.isArray(n)&&typeof n=="object"&&("unkey"in n&&n.unkey!=null&&(this.unkey=n.unkey),"itemId"in n&&n.itemId!=null&&(this.itemId=n.itemId),"loc"in n&&n.loc!=null&&(this.loc=n.loc))}get unkey(){return c.Message.getFieldWithDefault(this,1,"")}set unkey(n){c.Message.setField(this,1,n)}get has_unkey(){return c.Message.getField(this,1)!=null}get itemId(){return c.Message.getFieldWithDefault(this,2,0)}set itemId(n){c.Message.setField(this,2,n)}get has_itemId(){return c.Message.getField(this,2)!=null}get loc(){return c.Message.getWrapperField(this,nt,3)}set loc(n){c.Message.setWrapperField(this,3,n)}get has_loc(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new Cu({});return n.unkey!=null&&(a.unkey=n.unkey),n.itemId!=null&&(a.itemId=n.itemId),n.loc!=null&&(a.loc=nt.fromObject(n.loc)),a}toObject(){let n={};return this.unkey!=null&&(n.unkey=this.unkey),this.itemId!=null&&(n.itemId=this.itemId),this.loc!=null&&(n.loc=this.loc.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_unkey&&this.unkey.length&&a.writeString(1,this.unkey),this.has_itemId&&a.writeInt32(2,this.itemId),this.has_loc&&a.writeMessage(3,this.loc,()=>this.loc.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Cu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.unkey=a.readString();break;case 2:d.itemId=a.readInt32();break;case 3:a.readMessage(d.loc,()=>d.loc=nt.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Cu.deserialize(n)}};Pd=new WeakMap;let _e=Cu;St.FoodObject=Cu;let Au=class Au extends c.Message{constructor(n){super();Ie(this,Ud,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[5,10,13,23],ve(this,Ud)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"userName"in n&&n.userName!=null&&(this.userName=n.userName),"snakeId"in n&&n.snakeId!=null&&(this.snakeId=n.snakeId),"speed"in n&&n.speed!=null&&(this.speed=n.speed),this.snake=n.snake,"kills"in n&&n.kills!=null&&(this.kills=n.kills),"state"in n&&n.state!=null&&(this.state=n.state),"score"in n&&n.score!=null&&(this.score=n.score),"wdTime"in n&&n.wdTime!=null&&(this.wdTime=n.wdTime),this.eatenIds=n.eatenIds,"dieTime"in n&&n.dieTime!=null&&(this.dieTime=n.dieTime),"revive"in n&&n.revive!=null&&(this.revive=n.revive),this.food=n.food,"direction"in n&&n.direction!=null&&(this.direction=n.direction),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"oprTime"in n&&n.oprTime!=null&&(this.oprTime=n.oprTime),"aimDir"in n&&n.aimDir!=null&&(this.aimDir=n.aimDir),"length"in n&&n.length!=null&&(this.length=n.length),"enterTime"in n&&n.enterTime!=null&&(this.enterTime=n.enterTime),"exp"in n&&n.exp!=null&&(this.exp=n.exp),"result"in n&&n.result!=null&&(this.result=n.result),"oprIndex"in n&&n.oprIndex!=null&&(this.oprIndex=n.oprIndex),this.attr=n.attr,"skin"in n&&n.skin!=null&&(this.skin=n.skin))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getFieldWithDefault(this,2,"")}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get snakeId(){return c.Message.getFieldWithDefault(this,3,0)}set snakeId(n){c.Message.setField(this,3,n)}get has_snakeId(){return c.Message.getField(this,3)!=null}get speed(){return c.Message.getFieldWithDefault(this,4,0)}set speed(n){c.Message.setField(this,4,n)}get has_speed(){return c.Message.getField(this,4)!=null}get snake(){return c.Message.getRepeatedWrapperField(this,P,5)}set snake(n){c.Message.setRepeatedWrapperField(this,5,n)}get kills(){return c.Message.getFieldWithDefault(this,6,0)}set kills(n){c.Message.setField(this,6,n)}get has_kills(){return c.Message.getField(this,6)!=null}get state(){return c.Message.getFieldWithDefault(this,7,!1)}set state(n){c.Message.setField(this,7,n)}get has_state(){return c.Message.getField(this,7)!=null}get score(){return c.Message.getFieldWithDefault(this,8,0)}set score(n){c.Message.setField(this,8,n)}get has_score(){return c.Message.getField(this,8)!=null}get wdTime(){return c.Message.getFieldWithDefault(this,9,0)}set wdTime(n){c.Message.setField(this,9,n)}get has_wdTime(){return c.Message.getField(this,9)!=null}get eatenIds(){return c.Message.getFieldWithDefault(this,10,[])}set eatenIds(n){c.Message.setField(this,10,n)}get dieTime(){return c.Message.getFieldWithDefault(this,11,0)}set dieTime(n){c.Message.setField(this,11,n)}get has_dieTime(){return c.Message.getField(this,11)!=null}get revive(){return c.Message.getFieldWithDefault(this,12,0)}set revive(n){c.Message.setField(this,12,n)}get has_revive(){return c.Message.getField(this,12)!=null}get food(){return c.Message.getRepeatedWrapperField(this,_e,13)}set food(n){c.Message.setRepeatedWrapperField(this,13,n)}get direction(){return c.Message.getFieldWithDefault(this,14,0)}set direction(n){c.Message.setField(this,14,n)}get has_direction(){return c.Message.getField(this,14)!=null}get frame(){return c.Message.getFieldWithDefault(this,15,0)}set frame(n){c.Message.setField(this,15,n)}get has_frame(){return c.Message.getField(this,15)!=null}get oprTime(){return c.Message.getFieldWithDefault(this,16,0)}set oprTime(n){c.Message.setField(this,16,n)}get has_oprTime(){return c.Message.getField(this,16)!=null}get aimDir(){return c.Message.getFieldWithDefault(this,17,0)}set aimDir(n){c.Message.setField(this,17,n)}get has_aimDir(){return c.Message.getField(this,17)!=null}get length(){return c.Message.getFieldWithDefault(this,18,0)}set length(n){c.Message.setField(this,18,n)}get has_length(){return c.Message.getField(this,18)!=null}get enterTime(){return c.Message.getFieldWithDefault(this,19,0)}set enterTime(n){c.Message.setField(this,19,n)}get has_enterTime(){return c.Message.getField(this,19)!=null}get exp(){return c.Message.getFieldWithDefault(this,20,0)}set exp(n){c.Message.setField(this,20,n)}get has_exp(){return c.Message.getField(this,20)!=null}get result(){return c.Message.getWrapperField(this,l,21)}set result(n){c.Message.setWrapperField(this,21,n)}get has_result(){return c.Message.getField(this,21)!=null}get oprIndex(){return c.Message.getFieldWithDefault(this,22,0)}set oprIndex(n){c.Message.setField(this,22,n)}get has_oprIndex(){return c.Message.getField(this,22)!=null}get attr(){return c.Message.getFieldWithDefault(this,23,[])}set attr(n){c.Message.setField(this,23,n)}get skin(){return c.Message.getFieldWithDefault(this,24,0)}set skin(n){c.Message.setField(this,24,n)}get has_skin(){return c.Message.getField(this,24)!=null}static fromObject(n){let a=new Au({snake:n.snake.map(d=>P.fromObject(d)),eatenIds:n.eatenIds,food:n.food.map(d=>_e.fromObject(d)),attr:n.attr});return n.roleId!=null&&(a.roleId=n.roleId),n.userName!=null&&(a.userName=n.userName),n.snakeId!=null&&(a.snakeId=n.snakeId),n.speed!=null&&(a.speed=n.speed),n.kills!=null&&(a.kills=n.kills),n.state!=null&&(a.state=n.state),n.score!=null&&(a.score=n.score),n.wdTime!=null&&(a.wdTime=n.wdTime),n.dieTime!=null&&(a.dieTime=n.dieTime),n.revive!=null&&(a.revive=n.revive),n.direction!=null&&(a.direction=n.direction),n.frame!=null&&(a.frame=n.frame),n.oprTime!=null&&(a.oprTime=n.oprTime),n.aimDir!=null&&(a.aimDir=n.aimDir),n.length!=null&&(a.length=n.length),n.enterTime!=null&&(a.enterTime=n.enterTime),n.exp!=null&&(a.exp=n.exp),n.result!=null&&(a.result=l.fromObject(n.result)),n.oprIndex!=null&&(a.oprIndex=n.oprIndex),n.skin!=null&&(a.skin=n.skin),a}toObject(){let n={eatenIds:this.eatenIds,attr:this.attr};return this.roleId!=null&&(n.roleId=this.roleId),this.userName!=null&&(n.userName=this.userName),this.snakeId!=null&&(n.snakeId=this.snakeId),this.speed!=null&&(n.speed=this.speed),this.snake!=null&&(n.snake=this.snake.map(a=>a.toObject())),this.kills!=null&&(n.kills=this.kills),this.state!=null&&(n.state=this.state),this.score!=null&&(n.score=this.score),this.wdTime!=null&&(n.wdTime=this.wdTime),this.dieTime!=null&&(n.dieTime=this.dieTime),this.revive!=null&&(n.revive=this.revive),this.food!=null&&(n.food=this.food.map(a=>a.toObject())),this.direction!=null&&(n.direction=this.direction),this.frame!=null&&(n.frame=this.frame),this.oprTime!=null&&(n.oprTime=this.oprTime),this.aimDir!=null&&(n.aimDir=this.aimDir),this.length!=null&&(n.length=this.length),this.enterTime!=null&&(n.enterTime=this.enterTime),this.exp!=null&&(n.exp=this.exp),this.result!=null&&(n.result=this.result.toObject()),this.oprIndex!=null&&(n.oprIndex=this.oprIndex),this.skin!=null&&(n.skin=this.skin),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_userName&&this.userName.length&&a.writeString(2,this.userName),this.has_snakeId&&a.writeInt32(3,this.snakeId),this.has_speed&&a.writeFloat(4,this.speed),this.snake.length&&a.writeRepeatedMessage(5,this.snake,d=>d.serialize(a)),this.has_kills&&a.writeInt32(6,this.kills),this.has_state&&a.writeBool(7,this.state),this.has_score&&a.writeInt32(8,this.score),this.has_wdTime&&a.writeInt64(9,this.wdTime),this.eatenIds.length&&a.writeRepeatedString(10,this.eatenIds),this.has_dieTime&&a.writeInt64(11,this.dieTime),this.has_revive&&a.writeInt32(12,this.revive),this.food.length&&a.writeRepeatedMessage(13,this.food,d=>d.serialize(a)),this.has_direction&&a.writeFloat(14,this.direction),this.has_frame&&a.writeInt64(15,this.frame),this.has_oprTime&&a.writeInt64(16,this.oprTime),this.has_aimDir&&a.writeFloat(17,this.aimDir),this.has_length&&a.writeInt32(18,this.length),this.has_enterTime&&a.writeInt64(19,this.enterTime),this.has_exp&&a.writeInt32(20,this.exp),this.has_result&&a.writeMessage(21,this.result,()=>this.result.serialize(a)),this.has_oprIndex&&a.writeInt32(22,this.oprIndex),this.attr.length&&a.writeRepeatedString(23,this.attr),this.has_skin&&a.writeInt32(24,this.skin),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Au;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:d.userName=a.readString();break;case 3:d.snakeId=a.readInt32();break;case 4:d.speed=a.readFloat();break;case 5:a.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,5,P.deserialize(a),P));break;case 6:d.kills=a.readInt32();break;case 7:d.state=a.readBool();break;case 8:d.score=a.readInt32();break;case 9:d.wdTime=a.readInt64();break;case 10:c.Message.addToRepeatedField(d,10,a.readString());break;case 11:d.dieTime=a.readInt64();break;case 12:d.revive=a.readInt32();break;case 13:a.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,13,_e.deserialize(a),_e));break;case 14:d.direction=a.readFloat();break;case 15:d.frame=a.readInt64();break;case 16:d.oprTime=a.readInt64();break;case 17:d.aimDir=a.readFloat();break;case 18:d.length=a.readInt32();break;case 19:d.enterTime=a.readInt64();break;case 20:d.exp=a.readInt32();break;case 21:a.readMessage(d.result,()=>d.result=l.deserialize(a));break;case 22:d.oprIndex=a.readInt32();break;case 23:c.Message.addToRepeatedField(d,23,a.readString());break;case 24:d.skin=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Au.deserialize(n)}};Ud=new WeakMap;let Le=Au;St.PlayerObject=Au;let Mu=class Mu extends c.Message{constructor(n){super();Ie(this,Hd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Hd)),!Array.isArray(n)&&typeof n=="object"&&"loc"in n&&n.loc!=null&&(this.loc=n.loc)}get loc(){return c.Message.getWrapperField(this,nt,2)}set loc(n){c.Message.setWrapperField(this,2,n)}get has_loc(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Mu({});return n.loc!=null&&(a.loc=nt.fromObject(n.loc)),a}toObject(){let n={};return this.loc!=null&&(n.loc=this.loc.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_loc&&a.writeMessage(2,this.loc,()=>this.loc.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Mu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 2:a.readMessage(d.loc,()=>d.loc=nt.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Mu.deserialize(n)}};Hd=new WeakMap;let P=Mu;St.SnakeObject=Mu;let Ru=class Ru extends c.Message{constructor(n){super();Ie(this,zd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,zd)),!Array.isArray(n)&&typeof n=="object"&&("x"in n&&n.x!=null&&(this.x=n.x),"y"in n&&n.y!=null&&(this.y=n.y))}get x(){return c.Message.getFieldWithDefault(this,1,0)}set x(n){c.Message.setField(this,1,n)}get has_x(){return c.Message.getField(this,1)!=null}get y(){return c.Message.getFieldWithDefault(this,2,0)}set y(n){c.Message.setField(this,2,n)}get has_y(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Ru({});return n.x!=null&&(a.x=n.x),n.y!=null&&(a.y=n.y),a}toObject(){let n={};return this.x!=null&&(n.x=this.x),this.y!=null&&(n.y=this.y),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_x&&a.writeDouble(1,this.x),this.has_y&&a.writeDouble(2,this.y),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ru;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.x=a.readDouble();break;case 2:d.y=a.readDouble();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ru.deserialize(n)}};zd=new WeakMap;let nt=Ru;St.PointObject=Ru;let Bu=class Bu extends c.Message{constructor(n){super();Ie(this,jd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,jd)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"opr"in n&&n.opr!=null&&(this.opr=n.opr),"value"in n&&n.value!=null&&(this.value=n.value),"head"in n&&n.head!=null&&(this.head=n.head),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"curDir"in n&&n.curDir!=null&&(this.curDir=n.curDir),"aimDir"in n&&n.aimDir!=null&&(this.aimDir=n.aimDir),"speed"in n&&n.speed!=null&&(this.speed=n.speed),"oprIndex"in n&&n.oprIndex!=null&&(this.oprIndex=n.oprIndex))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get opr(){return c.Message.getFieldWithDefault(this,2,0)}set opr(n){c.Message.setField(this,2,n)}get has_opr(){return c.Message.getField(this,2)!=null}get value(){return c.Message.getFieldWithDefault(this,3,0)}set value(n){c.Message.setField(this,3,n)}get has_value(){return c.Message.getField(this,3)!=null}get head(){return c.Message.getWrapperField(this,P,4)}set head(n){c.Message.setWrapperField(this,4,n)}get has_head(){return c.Message.getField(this,4)!=null}get frame(){return c.Message.getFieldWithDefault(this,5,0)}set frame(n){c.Message.setField(this,5,n)}get has_frame(){return c.Message.getField(this,5)!=null}get curDir(){return c.Message.getFieldWithDefault(this,6,0)}set curDir(n){c.Message.setField(this,6,n)}get has_curDir(){return c.Message.getField(this,6)!=null}get aimDir(){return c.Message.getFieldWithDefault(this,7,0)}set aimDir(n){c.Message.setField(this,7,n)}get has_aimDir(){return c.Message.getField(this,7)!=null}get speed(){return c.Message.getFieldWithDefault(this,8,0)}set speed(n){c.Message.setField(this,8,n)}get has_speed(){return c.Message.getField(this,8)!=null}get oprIndex(){return c.Message.getFieldWithDefault(this,10,0)}set oprIndex(n){c.Message.setField(this,10,n)}get has_oprIndex(){return c.Message.getField(this,10)!=null}static fromObject(n){let a=new Bu({});return n.roleId!=null&&(a.roleId=n.roleId),n.opr!=null&&(a.opr=n.opr),n.value!=null&&(a.value=n.value),n.head!=null&&(a.head=P.fromObject(n.head)),n.frame!=null&&(a.frame=n.frame),n.curDir!=null&&(a.curDir=n.curDir),n.aimDir!=null&&(a.aimDir=n.aimDir),n.speed!=null&&(a.speed=n.speed),n.oprIndex!=null&&(a.oprIndex=n.oprIndex),a}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.opr!=null&&(n.opr=this.opr),this.value!=null&&(n.value=this.value),this.head!=null&&(n.head=this.head.toObject()),this.frame!=null&&(n.frame=this.frame),this.curDir!=null&&(n.curDir=this.curDir),this.aimDir!=null&&(n.aimDir=this.aimDir),this.speed!=null&&(n.speed=this.speed),this.oprIndex!=null&&(n.oprIndex=this.oprIndex),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_opr&&a.writeInt32(2,this.opr),this.has_value&&a.writeInt32(3,this.value),this.has_head&&a.writeMessage(4,this.head,()=>this.head.serialize(a)),this.has_frame&&a.writeInt64(5,this.frame),this.has_curDir&&a.writeFloat(6,this.curDir),this.has_aimDir&&a.writeFloat(7,this.aimDir),this.has_speed&&a.writeFloat(8,this.speed),this.has_oprIndex&&a.writeInt32(10,this.oprIndex),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Bu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:d.opr=a.readInt32();break;case 3:d.value=a.readInt32();break;case 4:a.readMessage(d.head,()=>d.head=P.deserialize(a));break;case 5:d.frame=a.readInt64();break;case 6:d.curDir=a.readFloat();break;case 7:d.aimDir=a.readFloat();break;case 8:d.speed=a.readFloat();break;case 10:d.oprIndex=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Bu.deserialize(n)}};jd=new WeakMap;let Ee=Bu;St.CS_PLAYER_OPR=Bu;let Du=class Du extends c.Message{constructor(n){super();Ie(this,Gd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,Gd)),!Array.isArray(n)&&typeof n=="object"&&(this.players=n.players,"frame"in n&&n.frame!=null&&(this.frame=n.frame))}get players(){return c.Message.getRepeatedWrapperField(this,Le,1)}set players(n){c.Message.setRepeatedWrapperField(this,1,n)}get frame(){return c.Message.getFieldWithDefault(this,2,0)}set frame(n){c.Message.setField(this,2,n)}get has_frame(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Du({players:n.players.map(d=>Le.fromObject(d))});return n.frame!=null&&(a.frame=n.frame),a}toObject(){let n={};return this.players!=null&&(n.players=this.players.map(a=>a.toObject())),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let a=n||new c.BinaryWriter;if(this.players.length&&a.writeRepeatedMessage(1,this.players,d=>d.serialize(a)),this.has_frame&&a.writeInt64(2,this.frame),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Du;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.players,()=>c.Message.addToRepeatedWrapperField(d,1,Le.deserialize(a),Le));break;case 2:d.frame=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Du.deserialize(n)}};Gd=new WeakMap;let gt=Du;St.SC_PLAYER_STATE=Du;let Nu=class Nu extends c.Message{constructor(n){super();Ie(this,Wd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,Wd)),!Array.isArray(n)&&typeof n=="object"&&(this.food=n.food,"frame"in n&&n.frame!=null&&(this.frame=n.frame))}get food(){return c.Message.getRepeatedWrapperField(this,_e,1)}set food(n){c.Message.setRepeatedWrapperField(this,1,n)}get frame(){return c.Message.getFieldWithDefault(this,2,0)}set frame(n){c.Message.setField(this,2,n)}get has_frame(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Nu({food:n.food.map(d=>_e.fromObject(d))});return n.frame!=null&&(a.frame=n.frame),a}toObject(){let n={};return this.food!=null&&(n.food=this.food.map(a=>a.toObject())),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let a=n||new c.BinaryWriter;if(this.food.length&&a.writeRepeatedMessage(1,this.food,d=>d.serialize(a)),this.has_frame&&a.writeInt64(2,this.frame),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Nu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,1,_e.deserialize(a),_e));break;case 2:d.frame=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Nu.deserialize(n)}};Wd=new WeakMap;let pi=Nu;St.SC_GEN_FOOD=Nu;let Ou=class Ou extends c.Message{constructor(n){super();Ie(this,Vd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Vd)),!Array.isArray(n)&&typeof n=="object"&&"players"in n&&n.players!=null&&(this.players=n.players)}get players(){return c.Message.getWrapperField(this,Le,2)}set players(n){c.Message.setWrapperField(this,2,n)}get has_players(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Ou({});return n.players!=null&&(a.players=Le.fromObject(n.players)),a}toObject(){let n={};return this.players!=null&&(n.players=this.players.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_players&&a.writeMessage(2,this.players,()=>this.players.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ou;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 2:a.readMessage(d.players,()=>d.players=Le.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ou.deserialize(n)}};Vd=new WeakMap;let gi=Ou;St.SS_NOTICE_ENTER=Ou;let Fu=class Fu extends c.Message{constructor(n){super();Ie(this,Kd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8,9],ve(this,Kd)),!Array.isArray(n)&&typeof n=="object"&&("res"in n&&n.res!=null&&(this.res=n.res),"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"rank"in n&&n.rank!=null&&(this.rank=n.rank),"score"in n&&n.score!=null&&(this.score=n.score),"kills"in n&&n.kills!=null&&(this.kills=n.kills),"length"in n&&n.length!=null&&(this.length=n.length),"alive"in n&&n.alive!=null&&(this.alive=n.alive),this.items=n.items,this.token=n.token)}get res(){return c.Message.getFieldWithDefault(this,1,!1)}set res(n){c.Message.setField(this,1,n)}get has_res(){return c.Message.getField(this,1)!=null}get roleId(){return c.Message.getFieldWithDefault(this,2,"")}set roleId(n){c.Message.setField(this,2,n)}get has_roleId(){return c.Message.getField(this,2)!=null}get rank(){return c.Message.getFieldWithDefault(this,3,0)}set rank(n){c.Message.setField(this,3,n)}get has_rank(){return c.Message.getField(this,3)!=null}get score(){return c.Message.getFieldWithDefault(this,4,0)}set score(n){c.Message.setField(this,4,n)}get has_score(){return c.Message.getField(this,4)!=null}get kills(){return c.Message.getFieldWithDefault(this,5,0)}set kills(n){c.Message.setField(this,5,n)}get has_kills(){return c.Message.getField(this,5)!=null}get length(){return c.Message.getFieldWithDefault(this,6,0)}set length(n){c.Message.setField(this,6,n)}get has_length(){return c.Message.getField(this,6)!=null}get alive(){return c.Message.getFieldWithDefault(this,7,0)}set alive(n){c.Message.setField(this,7,n)}get has_alive(){return c.Message.getField(this,7)!=null}get items(){return c.Message.getRepeatedWrapperField(this,W,8)}set items(n){c.Message.setRepeatedWrapperField(this,8,n)}get token(){return c.Message.getFieldWithDefault(this,9,[])}set token(n){c.Message.setField(this,9,n)}static fromObject(n){let a=new Fu({items:n.items.map(d=>W.fromObject(d)),token:n.token});return n.res!=null&&(a.res=n.res),n.roleId!=null&&(a.roleId=n.roleId),n.rank!=null&&(a.rank=n.rank),n.score!=null&&(a.score=n.score),n.kills!=null&&(a.kills=n.kills),n.length!=null&&(a.length=n.length),n.alive!=null&&(a.alive=n.alive),a}toObject(){let n={token:this.token};return this.res!=null&&(n.res=this.res),this.roleId!=null&&(n.roleId=this.roleId),this.rank!=null&&(n.rank=this.rank),this.score!=null&&(n.score=this.score),this.kills!=null&&(n.kills=this.kills),this.length!=null&&(n.length=this.length),this.alive!=null&&(n.alive=this.alive),this.items!=null&&(n.items=this.items.map(a=>a.toObject())),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_res&&a.writeBool(1,this.res),this.has_roleId&&this.roleId.length&&a.writeString(2,this.roleId),this.has_rank&&a.writeInt32(3,this.rank),this.has_score&&a.writeInt32(4,this.score),this.has_kills&&a.writeInt32(5,this.kills),this.has_length&&a.writeInt32(6,this.length),this.has_alive&&a.writeInt32(7,this.alive),this.items.length&&a.writeRepeatedMessage(8,this.items,d=>d.serialize(a)),this.token.length&&a.writeRepeatedString(9,this.token),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Fu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.res=a.readBool();break;case 2:d.roleId=a.readString();break;case 3:d.rank=a.readInt32();break;case 4:d.score=a.readInt32();break;case 5:d.kills=a.readInt32();break;case 6:d.length=a.readInt32();break;case 7:d.alive=a.readInt32();break;case 8:a.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,8,W.deserialize(a),W));break;case 9:c.Message.addToRepeatedField(d,9,a.readString());break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Fu.deserialize(n)}};Kd=new WeakMap;let Si=Fu;St.SC_BATTLE_END=Fu;let Pu=class Pu extends c.Message{constructor(n){super();Ie(this,$d,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,$d)),!Array.isArray(n)&&typeof n=="object"&&(this.fid=n.fid,"head"in n&&n.head!=null&&(this.head=n.head),this.roleId=n.roleId,"frame"in n&&n.frame!=null&&(this.frame=n.frame))}get fid(){return c.Message.getFieldWithDefault(this,1,[])}set fid(n){c.Message.setField(this,1,n)}get head(){return c.Message.getWrapperField(this,P,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get roleId(){return c.Message.getField(this,3)}set roleId(n){c.Message.setField(this,3,n)}get has_roleId(){return c.Message.getField(this,3)!=null}get frame(){return c.Message.getFieldWithDefault(this,4,0)}set frame(n){c.Message.setField(this,4,n)}get has_frame(){return c.Message.getField(this,4)!=null}static fromObject(n){let a=new Pu({fid:n.fid,roleId:n.roleId});return n.head!=null&&(a.head=P.fromObject(n.head)),n.frame!=null&&(a.frame=n.frame),a}toObject(){let n={fid:this.fid};return this.head!=null&&(n.head=this.head.toObject()),this.roleId!=null&&(n.roleId=this.roleId),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let a=n||new c.BinaryWriter;if(this.fid.length&&a.writeRepeatedString(1,this.fid),this.has_head&&a.writeMessage(2,this.head,()=>this.head.serialize(a)),this.has_roleId&&this.roleId.length&&a.writeString(3,this.roleId),this.has_frame&&a.writeInt64(4,this.frame),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Pu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;case 2:a.readMessage(d.head,()=>d.head=P.deserialize(a));break;case 3:d.roleId=a.readString();break;case 4:d.frame=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Pu.deserialize(n)}};$d=new WeakMap;let st=Pu;St.CS_EAT_FOOD=Pu;let Uu=class Uu extends c.Message{constructor(n){super();Ie(this,qd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,7],ve(this,qd)),!Array.isArray(n)&&typeof n=="object"&&(this.fid=n.fid,"head"in n&&n.head!=null&&(this.head=n.head),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"score"in n&&n.score!=null&&(this.score=n.score),"lenght"in n&&n.lenght!=null&&(this.lenght=n.lenght),this.roleId=n.roleId,this.remain=n.remain,"curDir"in n&&n.curDir!=null&&(this.curDir=n.curDir),"aimDir"in n&&n.aimDir!=null&&(this.aimDir=n.aimDir),"speed"in n&&n.speed!=null&&(this.speed=n.speed))}get fid(){return c.Message.getFieldWithDefault(this,1,[])}set fid(n){c.Message.setField(this,1,n)}get head(){return c.Message.getWrapperField(this,P,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get frame(){return c.Message.getFieldWithDefault(this,3,0)}set frame(n){c.Message.setField(this,3,n)}get has_frame(){return c.Message.getField(this,3)!=null}get score(){return c.Message.getFieldWithDefault(this,4,0)}set score(n){c.Message.setField(this,4,n)}get has_score(){return c.Message.getField(this,4)!=null}get lenght(){return c.Message.getFieldWithDefault(this,5,0)}set lenght(n){c.Message.setField(this,5,n)}get has_lenght(){return c.Message.getField(this,5)!=null}get roleId(){return c.Message.getField(this,6)}set roleId(n){c.Message.setField(this,6,n)}get has_roleId(){return c.Message.getField(this,6)!=null}get remain(){return c.Message.getFieldWithDefault(this,7,[])}set remain(n){c.Message.setField(this,7,n)}get curDir(){return c.Message.getFieldWithDefault(this,8,0)}set curDir(n){c.Message.setField(this,8,n)}get has_curDir(){return c.Message.getField(this,8)!=null}get aimDir(){return c.Message.getFieldWithDefault(this,9,0)}set aimDir(n){c.Message.setField(this,9,n)}get has_aimDir(){return c.Message.getField(this,9)!=null}get speed(){return c.Message.getFieldWithDefault(this,10,0)}set speed(n){c.Message.setField(this,10,n)}get has_speed(){return c.Message.getField(this,10)!=null}static fromObject(n){let a=new Uu({fid:n.fid,roleId:n.roleId,remain:n.remain});return n.head!=null&&(a.head=P.fromObject(n.head)),n.frame!=null&&(a.frame=n.frame),n.score!=null&&(a.score=n.score),n.lenght!=null&&(a.lenght=n.lenght),n.curDir!=null&&(a.curDir=n.curDir),n.aimDir!=null&&(a.aimDir=n.aimDir),n.speed!=null&&(a.speed=n.speed),a}toObject(){let n={fid:this.fid,remain:this.remain};return this.head!=null&&(n.head=this.head.toObject()),this.frame!=null&&(n.frame=this.frame),this.score!=null&&(n.score=this.score),this.lenght!=null&&(n.lenght=this.lenght),this.roleId!=null&&(n.roleId=this.roleId),this.curDir!=null&&(n.curDir=this.curDir),this.aimDir!=null&&(n.aimDir=this.aimDir),this.speed!=null&&(n.speed=this.speed),n}serialize(n){let a=n||new c.BinaryWriter;if(this.fid.length&&a.writeRepeatedString(1,this.fid),this.has_head&&a.writeMessage(2,this.head,()=>this.head.serialize(a)),this.has_frame&&a.writeInt64(3,this.frame),this.has_score&&a.writeInt32(4,this.score),this.has_lenght&&a.writeInt32(5,this.lenght),this.has_roleId&&this.roleId.length&&a.writeString(6,this.roleId),this.remain.length&&a.writeRepeatedString(7,this.remain),this.has_curDir&&a.writeFloat(8,this.curDir),this.has_aimDir&&a.writeFloat(9,this.aimDir),this.has_speed&&a.writeFloat(10,this.speed),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Uu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;case 2:a.readMessage(d.head,()=>d.head=P.deserialize(a));break;case 3:d.frame=a.readInt64();break;case 4:d.score=a.readInt32();break;case 5:d.lenght=a.readInt32();break;case 6:d.roleId=a.readString();break;case 7:c.Message.addToRepeatedField(d,7,a.readString());break;case 8:d.curDir=a.readFloat();break;case 9:d.aimDir=a.readFloat();break;case 10:d.speed=a.readFloat();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Uu.deserialize(n)}};qd=new WeakMap;let Oi=Uu;St.SC_EAT_FOOD=Uu;let Hu=class Hu extends c.Message{constructor(n){super();Ie(this,Yd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Yd)),!Array.isArray(n)&&typeof n=="object"&&("target"in n&&n.target!=null&&(this.target=n.target),"head"in n&&n.head!=null&&(this.head=n.head),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"body"in n&&n.body!=null&&(this.body=n.body),"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"thead"in n&&n.thead!=null&&(this.thead=n.thead),"point"in n&&n.point!=null&&(this.point=n.point))}get target(){return c.Message.getFieldWithDefault(this,1,"")}set target(n){c.Message.setField(this,1,n)}get has_target(){return c.Message.getField(this,1)!=null}get head(){return c.Message.getWrapperField(this,P,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get frame(){return c.Message.getFieldWithDefault(this,3,0)}set frame(n){c.Message.setField(this,3,n)}get has_frame(){return c.Message.getField(this,3)!=null}get body(){return c.Message.getFieldWithDefault(this,4,!1)}set body(n){c.Message.setField(this,4,n)}get has_body(){return c.Message.getField(this,4)!=null}get roleId(){return c.Message.getFieldWithDefault(this,5,"")}set roleId(n){c.Message.setField(this,5,n)}get has_roleId(){return c.Message.getField(this,5)!=null}get thead(){return c.Message.getWrapperField(this,P,6)}set thead(n){c.Message.setWrapperField(this,6,n)}get has_thead(){return c.Message.getField(this,6)!=null}get point(){return c.Message.getWrapperField(this,nt,7)}set point(n){c.Message.setWrapperField(this,7,n)}get has_point(){return c.Message.getField(this,7)!=null}static fromObject(n){let a=new Hu({});return n.target!=null&&(a.target=n.target),n.head!=null&&(a.head=P.fromObject(n.head)),n.frame!=null&&(a.frame=n.frame),n.body!=null&&(a.body=n.body),n.roleId!=null&&(a.roleId=n.roleId),n.thead!=null&&(a.thead=P.fromObject(n.thead)),n.point!=null&&(a.point=nt.fromObject(n.point)),a}toObject(){let n={};return this.target!=null&&(n.target=this.target),this.head!=null&&(n.head=this.head.toObject()),this.frame!=null&&(n.frame=this.frame),this.body!=null&&(n.body=this.body),this.roleId!=null&&(n.roleId=this.roleId),this.thead!=null&&(n.thead=this.thead.toObject()),this.point!=null&&(n.point=this.point.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_target&&this.target.length&&a.writeString(1,this.target),this.has_head&&a.writeMessage(2,this.head,()=>this.head.serialize(a)),this.has_frame&&a.writeInt64(3,this.frame),this.has_body&&a.writeBool(4,this.body),this.has_roleId&&this.roleId.length&&a.writeString(5,this.roleId),this.has_thead&&a.writeMessage(6,this.thead,()=>this.thead.serialize(a)),this.has_point&&a.writeMessage(7,this.point,()=>this.point.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Hu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.target=a.readString();break;case 2:a.readMessage(d.head,()=>d.head=P.deserialize(a));break;case 3:d.frame=a.readInt64();break;case 4:d.body=a.readBool();break;case 5:d.roleId=a.readString();break;case 6:a.readMessage(d.thead,()=>d.thead=P.deserialize(a));break;case 7:a.readMessage(d.point,()=>d.point=nt.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Hu.deserialize(n)}};Yd=new WeakMap;let Mr=Hu;St.CS_PLAYER_COLLISION=Hu;let zu=class zu extends c.Message{constructor(n){super();Ie(this,Qd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[4],ve(this,Qd)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"head"in n&&n.head!=null&&(this.head=n.head),this.food=n.food,"taret"in n&&n.taret!=null&&(this.taret=n.taret),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"die"in n&&n.die!=null&&(this.die=n.die))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get head(){return c.Message.getWrapperField(this,P,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get food(){return c.Message.getRepeatedWrapperField(this,_e,4)}set food(n){c.Message.setRepeatedWrapperField(this,4,n)}get taret(){return c.Message.getFieldWithDefault(this,5,"")}set taret(n){c.Message.setField(this,5,n)}get has_taret(){return c.Message.getField(this,5)!=null}get frame(){return c.Message.getFieldWithDefault(this,6,0)}set frame(n){c.Message.setField(this,6,n)}get has_frame(){return c.Message.getField(this,6)!=null}get die(){return c.Message.getFieldWithDefault(this,10,"")}set die(n){c.Message.setField(this,10,n)}get has_die(){return c.Message.getField(this,10)!=null}static fromObject(n){let a=new zu({food:n.food.map(d=>_e.fromObject(d))});return n.roleId!=null&&(a.roleId=n.roleId),n.head!=null&&(a.head=P.fromObject(n.head)),n.taret!=null&&(a.taret=n.taret),n.frame!=null&&(a.frame=n.frame),n.die!=null&&(a.die=n.die),a}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.head!=null&&(n.head=this.head.toObject()),this.food!=null&&(n.food=this.food.map(a=>a.toObject())),this.taret!=null&&(n.taret=this.taret),this.frame!=null&&(n.frame=this.frame),this.die!=null&&(n.die=this.die),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_head&&a.writeMessage(2,this.head,()=>this.head.serialize(a)),this.food.length&&a.writeRepeatedMessage(4,this.food,d=>d.serialize(a)),this.has_taret&&this.taret.length&&a.writeString(5,this.taret),this.has_frame&&a.writeInt64(6,this.frame),this.has_die&&this.die.length&&a.writeString(10,this.die),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new zu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:a.readMessage(d.head,()=>d.head=P.deserialize(a));break;case 4:a.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,4,_e.deserialize(a),_e));break;case 5:d.taret=a.readString();break;case 6:d.frame=a.readInt64();break;case 10:d.die=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return zu.deserialize(n)}};Qd=new WeakMap;let an=zu;St.SC_PLAYER_COLLISION=zu;let ju=class ju extends c.Message{constructor(n){super();Ie(this,Xd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Xd)),!Array.isArray(n)&&typeof n=="object"&&"time"in n&&n.time!=null&&(this.time=n.time)}get time(){return c.Message.getFieldWithDefault(this,1,0)}set time(n){c.Message.setField(this,1,n)}get has_time(){return c.Message.getField(this,1)!=null}static fromObject(n){let a=new ju({});return n.time!=null&&(a.time=n.time),a}toObject(){let n={};return this.time!=null&&(n.time=this.time),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_time&&a.writeInt64(1,this.time),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ju;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.time=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ju.deserialize(n)}};Xd=new WeakMap;let Or=ju;St.SC_REQUEST_SERVER_TIME=ju;let Gu=class Gu extends c.Message{constructor(n){super();Ie(this,Jd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Jd)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Gu({roleId:n.roleId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Gu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Gu.deserialize(n)}};Jd=new WeakMap;let Gr=Gu;St.CS_REQUEST_ROOM_DATA=Gu;let Wu=class Wu extends c.Message{constructor(n){super();Ie(this,Zd,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ve(this,Zd)),!Array.isArray(n)&&typeof n=="object"&&(this.food=n.food,this.players=n.players)}get food(){return c.Message.getRepeatedWrapperField(this,_e,1)}set food(n){c.Message.setRepeatedWrapperField(this,1,n)}get players(){return c.Message.getRepeatedWrapperField(this,Le,2)}set players(n){c.Message.setRepeatedWrapperField(this,2,n)}static fromObject(n){return new Wu({food:n.food.map(d=>_e.fromObject(d)),players:n.players.map(d=>Le.fromObject(d))})}toObject(){let n={};return this.food!=null&&(n.food=this.food.map(a=>a.toObject())),this.players!=null&&(n.players=this.players.map(a=>a.toObject())),n}serialize(n){let a=n||new c.BinaryWriter;if(this.food.length&&a.writeRepeatedMessage(1,this.food,d=>d.serialize(a)),this.players.length&&a.writeRepeatedMessage(2,this.players,d=>d.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Wu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,1,_e.deserialize(a),_e));break;case 2:a.readMessage(d.players,()=>c.Message.addToRepeatedWrapperField(d,2,Le.deserialize(a),Le));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Wu.deserialize(n)}};Zd=new WeakMap;let rs=Wu;St.SC_REQUEST_ROOM_DATA=Wu;let Vu=class Vu extends c.Message{constructor(n){super();Ie(this,em,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,em)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize)}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Vu({pageNo:n.pageNo,pageSize:n.pageSize})}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_pageNo&&a.writeInt32(1,this.pageNo),this.has_pageSize&&a.writeInt32(2,this.pageSize),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Vu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.pageNo=a.readInt32();break;case 2:d.pageSize=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Vu.deserialize(n)}};em=new WeakMap;let Wr=Vu;St.CS_INVITE_LIST=Vu;let Ku=class Ku extends c.Message{constructor(n){super();Ie(this,tm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,tm)),!Array.isArray(n)&&typeof n=="object"&&(this.info=n.info,"inviteCount"in n&&n.inviteCount!=null&&(this.inviteCount=n.inviteCount))}get info(){return c.Message.getFieldWithDefault(this,1,[])}set info(n){c.Message.setField(this,1,n)}get inviteCount(){return c.Message.getFieldWithDefault(this,2,0)}set inviteCount(n){c.Message.setField(this,2,n)}get has_inviteCount(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Ku({info:n.info});return n.inviteCount!=null&&(a.inviteCount=n.inviteCount),a}toObject(){let n={info:this.info};return this.inviteCount!=null&&(n.inviteCount=this.inviteCount),n}serialize(n){let a=n||new c.BinaryWriter;if(this.info.length&&a.writeRepeatedString(1,this.info),this.has_inviteCount&&a.writeInt32(2,this.inviteCount),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ku;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;case 2:d.inviteCount=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ku.deserialize(n)}};tm=new WeakMap;let Vr=Ku;St.SC_INVITE_LIST=Ku;let $u=class $u extends c.Message{constructor(n){super();Ie(this,im,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,im)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,"type"in n&&n.type!=null&&(this.type=n.type))}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getFieldWithDefault(this,2,0)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new $u({roleId:n.roleId});return n.type!=null&&(a.type=n.type),a}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.type!=null&&(n.type=this.type),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_type&&a.writeInt32(2,this.type),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new $u;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:d.type=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return $u.deserialize(n)}};im=new WeakMap;let zn=$u;St.CS_REQUEST_INFO=$u;let qu=class qu extends c.Message{constructor(n){super();Ie(this,rm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,rm)),!Array.isArray(n)&&typeof n=="object"&&(this.roleInfo=n.roleInfo)}get roleInfo(){return c.Message.getWrapperField(this,H,1)}set roleInfo(n){c.Message.setWrapperField(this,1,n)}get has_roleInfo(){return c.Message.getField(this,1)!=null}static fromObject(n){return new qu({roleInfo:H.fromObject(n.roleInfo)})}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleInfo&&a.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new qu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.roleInfo,()=>d.roleInfo=H.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return qu.deserialize(n)}};rm=new WeakMap;let Ln=qu;St.SC_REQUEST_INFO=qu;let Yu=class Yu extends c.Message{constructor(n){super();Ie(this,nm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,nm)),!Array.isArray(n)&&typeof n=="object"&&(this.id=n.id,"symbolId"in n&&n.symbolId!=null&&(this.symbolId=n.symbolId),"num"in n&&n.num!=null&&(this.num=n.num))}get id(){return c.Message.getField(this,1)}set id(n){c.Message.setField(this,1,n)}get has_id(){return c.Message.getField(this,1)!=null}get symbolId(){return c.Message.getFieldWithDefault(this,2,0)}set symbolId(n){c.Message.setField(this,2,n)}get has_symbolId(){return c.Message.getField(this,2)!=null}get num(){return c.Message.getFieldWithDefault(this,3,0)}set num(n){c.Message.setField(this,3,n)}get has_num(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new Yu({id:n.id});return n.symbolId!=null&&(a.symbolId=n.symbolId),n.num!=null&&(a.num=n.num),a}toObject(){let n={};return this.id!=null&&(n.id=this.id),this.symbolId!=null&&(n.symbolId=this.symbolId),this.num!=null&&(n.num=this.num),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_id&&a.writeInt32(1,this.id),this.has_symbolId&&a.writeInt32(2,this.symbolId),this.has_num&&a.writeInt32(3,this.num),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Yu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.id=a.readInt32();break;case 2:d.symbolId=a.readInt32();break;case 3:d.num=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Yu.deserialize(n)}};nm=new WeakMap;let oo=Yu;St.CS_SHOP_BUY=Yu;let Qu=class Qu extends c.Message{constructor(n){super();Ie(this,sm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ve(this,sm)),!Array.isArray(n)&&typeof n=="object"&&(this.cost=n.cost,this.items=n.items,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get cost(){return c.Message.getRepeatedWrapperField(this,W,1)}set cost(n){c.Message.setRepeatedWrapperField(this,1,n)}get items(){return c.Message.getRepeatedWrapperField(this,W,2)}set items(n){c.Message.setRepeatedWrapperField(this,2,n)}get snake(){return c.Message.getWrapperField(this,Z,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new Qu({cost:n.cost.map(d=>W.fromObject(d)),items:n.items.map(d=>W.fromObject(d))});return n.snake!=null&&(a.snake=Z.fromObject(n.snake)),a}toObject(){let n={};return this.cost!=null&&(n.cost=this.cost.map(a=>a.toObject())),this.items!=null&&(n.items=this.items.map(a=>a.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.cost.length&&a.writeRepeatedMessage(1,this.cost,d=>d.serialize(a)),this.items.length&&a.writeRepeatedMessage(2,this.items,d=>d.serialize(a)),this.has_snake&&a.writeMessage(3,this.snake,()=>this.snake.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Qu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,1,W.deserialize(a),W));break;case 2:a.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,2,W.deserialize(a),W));break;case 3:a.readMessage(d.snake,()=>d.snake=Z.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Qu.deserialize(n)}};sm=new WeakMap;let ao=Qu;St.SC_SHOP_BUY=Qu;let Xu=class Xu extends c.Message{constructor(n){super();Ie(this,om,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,om)),!Array.isArray(n)&&typeof n=="object"&&(this.msgList=n.msgList,this.frame=n.frame)}get msgList(){return c.Message.getRepeatedWrapperField(this,l,1)}set msgList(n){c.Message.setRepeatedWrapperField(this,1,n)}get frame(){return c.Message.getField(this,2)}set frame(n){c.Message.setField(this,2,n)}get has_frame(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Xu({msgList:n.msgList.map(d=>l.fromObject(d)),frame:n.frame})}toObject(){let n={};return this.msgList!=null&&(n.msgList=this.msgList.map(a=>a.toObject())),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let a=n||new c.BinaryWriter;if(this.msgList.length&&a.writeRepeatedMessage(1,this.msgList,d=>d.serialize(a)),this.has_frame&&a.writeInt64(2,this.frame),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Xu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.msgList,()=>c.Message.addToRepeatedWrapperField(d,1,l.deserialize(a),l));break;case 2:d.frame=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Xu.deserialize(n)}};om=new WeakMap;let Da=Xu;St.SC_PUSH=Xu;let Ju=class Ju extends c.Message{constructor(n){super();Ie(this,am,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,am)),!Array.isArray(n)&&typeof n=="object"&&(this.token=n.token)}get token(){return c.Message.getFieldWithDefault(this,1,[])}set token(n){c.Message.setField(this,1,n)}static fromObject(n){return new Ju({token:n.token})}toObject(){return{token:this.token}}serialize(n){let a=n||new c.BinaryWriter;if(this.token.length&&a.writeRepeatedString(1,this.token),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ju;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ju.deserialize(n)}};am=new WeakMap;let ln=Ju;St.SC_QUERY_TOKEN=Ju;let Zu=class Zu extends c.Message{constructor(n){super();Ie(this,lm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,lm)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Zu({roleId:n.roleId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Zu;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Zu.deserialize(n)}};lm=new WeakMap;let Cs=Zu;St.SC_PLAYER_OUT=Zu;let ep=class ep extends c.Message{constructor(n){super();Ie(this,cm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,cm)),!Array.isArray(n)&&typeof n=="object"&&"symbolId"in n&&n.symbolId!=null&&(this.symbolId=n.symbolId)}get symbolId(){return c.Message.getFieldWithDefault(this,2,0)}set symbolId(n){c.Message.setField(this,2,n)}get has_symbolId(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new ep({});return n.symbolId!=null&&(a.symbolId=n.symbolId),a}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_symbolId&&a.writeInt32(2,this.symbolId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ep;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 2:d.symbolId=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ep.deserialize(n)}};cm=new WeakMap;let lo=ep;St.CS_CHARGE=ep;let tp=class tp extends c.Message{constructor(n){super();Ie(this,um,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,um)),!Array.isArray(n)&&typeof n=="object"&&("symbolId"in n&&n.symbolId!=null&&(this.symbolId=n.symbolId),"depositAddress"in n&&n.depositAddress!=null&&(this.depositAddress=n.depositAddress),"abi"in n&&n.abi!=null&&(this.abi=n.abi),"chainId"in n&&n.chainId!=null&&(this.chainId=n.chainId))}get symbolId(){return c.Message.getFieldWithDefault(this,1,0)}set symbolId(n){c.Message.setField(this,1,n)}get has_symbolId(){return c.Message.getField(this,1)!=null}get depositAddress(){return c.Message.getFieldWithDefault(this,2,"")}set depositAddress(n){c.Message.setField(this,2,n)}get has_depositAddress(){return c.Message.getField(this,2)!=null}get abi(){return c.Message.getFieldWithDefault(this,3,"")}set abi(n){c.Message.setField(this,3,n)}get has_abi(){return c.Message.getField(this,3)!=null}get chainId(){return c.Message.getFieldWithDefault(this,4,0)}set chainId(n){c.Message.setField(this,4,n)}get has_chainId(){return c.Message.getField(this,4)!=null}static fromObject(n){let a=new tp({});return n.symbolId!=null&&(a.symbolId=n.symbolId),n.depositAddress!=null&&(a.depositAddress=n.depositAddress),n.abi!=null&&(a.abi=n.abi),n.chainId!=null&&(a.chainId=n.chainId),a}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),this.depositAddress!=null&&(n.depositAddress=this.depositAddress),this.abi!=null&&(n.abi=this.abi),this.chainId!=null&&(n.chainId=this.chainId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_symbolId&&a.writeInt32(1,this.symbolId),this.has_depositAddress&&this.depositAddress.length&&a.writeString(2,this.depositAddress),this.has_abi&&this.abi.length&&a.writeString(3,this.abi),this.has_chainId&&a.writeInt32(4,this.chainId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new tp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.symbolId=a.readInt32();break;case 2:d.depositAddress=a.readString();break;case 3:d.abi=a.readString();break;case 4:d.chainId=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return tp.deserialize(n)}};um=new WeakMap;let co=tp;St.SC_CHARGE=tp;let ip=class ip extends c.Message{constructor(n){super();Ie(this,pm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,pm)),!Array.isArray(n)&&typeof n=="object"&&(this.symbolId=n.symbolId,this.amount=n.amount)}get symbolId(){return c.Message.getField(this,1)}set symbolId(n){c.Message.setField(this,1,n)}get has_symbolId(){return c.Message.getField(this,1)!=null}get amount(){return c.Message.getField(this,2)}set amount(n){c.Message.setField(this,2,n)}get has_amount(){return c.Message.getField(this,2)!=null}static fromObject(n){return new ip({symbolId:n.symbolId,amount:n.amount})}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),this.amount!=null&&(n.amount=this.amount),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_symbolId&&a.writeInt32(1,this.symbolId),this.has_amount&&a.writeDouble(2,this.amount),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ip;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.symbolId=a.readInt32();break;case 2:d.amount=a.readDouble();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ip.deserialize(n)}};pm=new WeakMap;let Fo=ip;St.CS_WITHDRAW=ip;let rp=class rp extends c.Message{constructor(n){super();Ie(this,hm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,hm)),!Array.isArray(n)&&typeof n=="object"&&"resp"in n&&n.resp!=null&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,"")}set resp(n){c.Message.setField(this,1,n)}get has_resp(){return c.Message.getField(this,1)!=null}static fromObject(n){let a=new rp({});return n.resp!=null&&(a.resp=n.resp),a}toObject(){let n={};return this.resp!=null&&(n.resp=this.resp),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_resp&&this.resp.length&&a.writeString(1,this.resp),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new rp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.resp=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return rp.deserialize(n)}};hm=new WeakMap;let G=rp;St.SC_WITHDRAW=rp;let np=class np extends c.Message{constructor(n){super();Ie(this,dm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,dm)),!Array.isArray(n)&&typeof n=="object"&&(this.roleInfo=n.roleInfo)}get roleInfo(){return c.Message.getRepeatedWrapperField(this,H,1)}set roleInfo(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new np({roleInfo:n.roleInfo.map(d=>H.fromObject(d))})}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.map(a=>a.toObject())),n}serialize(n){let a=n||new c.BinaryWriter;if(this.roleInfo.length&&a.writeRepeatedMessage(1,this.roleInfo,d=>d.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new np;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.roleInfo,()=>c.Message.addToRepeatedWrapperField(d,1,H.deserialize(a),H));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return np.deserialize(n)}};dm=new WeakMap;let C=np;St.SS_UPDATE_ROLE=np;let sp=class sp extends c.Message{constructor(n){super();Ie(this,mm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,mm)),!Array.isArray(n)&&typeof n=="object"&&(this.ids=n.ids)}get ids(){return c.Message.getFieldWithDefault(this,1,[])}set ids(n){c.Message.setField(this,1,n)}static fromObject(n){return new sp({ids:n.ids})}toObject(){return{ids:this.ids}}serialize(n){let a=n||new c.BinaryWriter;if(this.ids.length&&a.writeRepeatedString(1,this.ids),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new sp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return sp.deserialize(n)}};mm=new WeakMap;let U=sp;St.SS_UPDATE_CALLBACK=sp;let op=class op extends c.Message{constructor(n){super();Ie(this,fm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ve(this,fm)),!Array.isArray(n)&&typeof n=="object"&&(this.items=n.items,this.snake=n.snake)}get items(){return c.Message.getRepeatedWrapperField(this,W,1)}set items(n){c.Message.setRepeatedWrapperField(this,1,n)}get snake(){return c.Message.getRepeatedWrapperField(this,Z,2)}set snake(n){c.Message.setRepeatedWrapperField(this,2,n)}static fromObject(n){return new op({items:n.items.map(d=>W.fromObject(d)),snake:n.snake.map(d=>Z.fromObject(d))})}toObject(){let n={};return this.items!=null&&(n.items=this.items.map(a=>a.toObject())),this.snake!=null&&(n.snake=this.snake.map(a=>a.toObject())),n}serialize(n){let a=n||new c.BinaryWriter;if(this.items.length&&a.writeRepeatedMessage(1,this.items,d=>d.serialize(a)),this.snake.length&&a.writeRepeatedMessage(2,this.snake,d=>d.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new op;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,1,W.deserialize(a),W));break;case 2:a.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,2,Z.deserialize(a),Z));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return op.deserialize(n)}};fm=new WeakMap;let j=op;St.SC_PACK_INFO=op;let ap=class ap extends c.Message{constructor(n){super();Ie(this,gm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,gm)),!Array.isArray(n)&&typeof n=="object"&&(this.toAddress=n.toAddress,this.symbolId=n.symbolId,this.amount=n.amount)}get toAddress(){return c.Message.getField(this,1)}set toAddress(n){c.Message.setField(this,1,n)}get has_toAddress(){return c.Message.getField(this,1)!=null}get symbolId(){return c.Message.getField(this,2)}set symbolId(n){c.Message.setField(this,2,n)}get has_symbolId(){return c.Message.getField(this,2)!=null}get amount(){return c.Message.getField(this,3)}set amount(n){c.Message.setField(this,3,n)}get has_amount(){return c.Message.getField(this,3)!=null}static fromObject(n){return new ap({toAddress:n.toAddress,symbolId:n.symbolId,amount:n.amount})}toObject(){let n={};return this.toAddress!=null&&(n.toAddress=this.toAddress),this.symbolId!=null&&(n.symbolId=this.symbolId),this.amount!=null&&(n.amount=this.amount),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_toAddress&&this.toAddress.length&&a.writeString(1,this.toAddress),this.has_symbolId&&a.writeInt32(2,this.symbolId),this.has_amount&&a.writeDouble(3,this.amount),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ap;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.toAddress=a.readString();break;case 2:d.symbolId=a.readInt32();break;case 3:d.amount=a.readDouble();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ap.deserialize(n)}};gm=new WeakMap;let q=ap;St.CS_TRANSFER=ap;let lp=class lp extends c.Message{constructor(n){super();Ie(this,bm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,bm)),!Array.isArray(n)&&typeof n=="object"&&(this.symbolId=n.symbolId)}get symbolId(){return c.Message.getField(this,1)}set symbolId(n){c.Message.setField(this,1,n)}get has_symbolId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new lp({symbolId:n.symbolId})}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_symbolId&&a.writeInt32(1,this.symbolId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new lp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.symbolId=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return lp.deserialize(n)}};bm=new WeakMap;let D=lp;St.CS_WITHDRAW_INFO=lp;let cp=class cp extends c.Message{constructor(n){super();Ie(this,ym,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,ym)),!Array.isArray(n)&&typeof n=="object"&&"resp"in n&&n.resp!=null&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,"")}set resp(n){c.Message.setField(this,1,n)}get has_resp(){return c.Message.getField(this,1)!=null}static fromObject(n){let a=new cp({});return n.resp!=null&&(a.resp=n.resp),a}toObject(){let n={};return this.resp!=null&&(n.resp=this.resp),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_resp&&this.resp.length&&a.writeString(1,this.resp),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new cp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.resp=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return cp.deserialize(n)}};ym=new WeakMap;let pe=cp;St.SC_WITHDRAW_INFO=cp;let up=class up extends c.Message{constructor(n){super();Ie(this,_m,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,_m)),!Array.isArray(n)&&typeof n=="object"&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,[])}set resp(n){c.Message.setField(this,1,n)}static fromObject(n){return new up({resp:n.resp})}toObject(){return{resp:this.resp}}serialize(n){let a=n||new c.BinaryWriter;if(this.resp.length&&a.writeRepeatedString(1,this.resp),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new up;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return up.deserialize(n)}};_m=new WeakMap;let fe=up;St.SC_CHARGE_RECORD=up;let pp=class pp extends c.Message{constructor(n){super();Ie(this,xm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,xm)),!Array.isArray(n)&&typeof n=="object"&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,[])}set resp(n){c.Message.setField(this,1,n)}static fromObject(n){return new pp({resp:n.resp})}toObject(){return{resp:this.resp}}serialize(n){let a=n||new c.BinaryWriter;if(this.resp.length&&a.writeRepeatedString(1,this.resp),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new pp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return pp.deserialize(n)}};xm=new WeakMap;let we=pp;St.SC_WITHDRAW_RECORD=pp;let hp=class hp extends c.Message{constructor(n){super();Ie(this,vm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,vm)),!Array.isArray(n)&&typeof n=="object"&&(this.unkey=n.unkey)}get unkey(){return c.Message.getField(this,1)}set unkey(n){c.Message.setField(this,1,n)}get has_unkey(){return c.Message.getField(this,1)!=null}static fromObject(n){return new hp({unkey:n.unkey})}toObject(){let n={};return this.unkey!=null&&(n.unkey=this.unkey),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_unkey&&a.writeInt32(1,this.unkey),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new hp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.unkey=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return hp.deserialize(n)}};vm=new WeakMap;let Fe=hp;St.CS_SNAKE_UPGRADE=hp;let dp=class dp extends c.Message{constructor(n){super();Ie(this,Im,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,Im)),!Array.isArray(n)&&typeof n=="object"&&(this.cost=n.cost,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get cost(){return c.Message.getRepeatedWrapperField(this,W,1)}set cost(n){c.Message.setRepeatedWrapperField(this,1,n)}get snake(){return c.Message.getWrapperField(this,Z,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new dp({cost:n.cost.map(d=>W.fromObject(d))});return n.snake!=null&&(a.snake=Z.fromObject(n.snake)),a}toObject(){let n={};return this.cost!=null&&(n.cost=this.cost.map(a=>a.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.cost.length&&a.writeRepeatedMessage(1,this.cost,d=>d.serialize(a)),this.has_snake&&a.writeMessage(3,this.snake,()=>this.snake.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new dp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,1,W.deserialize(a),W));break;case 3:a.readMessage(d.snake,()=>d.snake=Z.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return dp.deserialize(n)}};Im=new WeakMap;let lt=dp;St.SC_SNAKE_UPGRADE=dp;let mp=class mp extends c.Message{constructor(n){super();Ie(this,Sm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Sm)),!Array.isArray(n)&&typeof n=="object"&&(this.unkey=n.unkey)}get unkey(){return c.Message.getField(this,1)}set unkey(n){c.Message.setField(this,1,n)}get has_unkey(){return c.Message.getField(this,1)!=null}static fromObject(n){return new mp({unkey:n.unkey})}toObject(){let n={};return this.unkey!=null&&(n.unkey=this.unkey),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_unkey&&a.writeInt32(1,this.unkey),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new mp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.unkey=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return mp.deserialize(n)}};Sm=new WeakMap;let Ae=mp;St.CS_SNAKE_FIGHT=mp;let fp=class fp extends c.Message{constructor(n){super();Ie(this,wm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,wm)),!Array.isArray(n)&&typeof n=="object"&&(this.mailId=n.mailId)}get mailId(){return c.Message.getField(this,1)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new fp({mailId:n.mailId})}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_mailId&&a.writeInt32(1,this.mailId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new fp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.mailId=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return fp.deserialize(n)}};wm=new WeakMap;let ze=fp;St.CS_MAIL_CHECK=fp;let gp=class gp extends c.Message{constructor(n){super();Ie(this,km,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,km)),!Array.isArray(n)&&typeof n=="object"&&(this.mail=n.mail)}get mail(){return c.Message.getRepeatedWrapperField(this,Y,1)}set mail(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new gp({mail:n.mail.map(d=>Y.fromObject(d))})}toObject(){let n={};return this.mail!=null&&(n.mail=this.mail.map(a=>a.toObject())),n}serialize(n){let a=n||new c.BinaryWriter;if(this.mail.length&&a.writeRepeatedMessage(1,this.mail,d=>d.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new gp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.mail,()=>c.Message.addToRepeatedWrapperField(d,1,Y.deserialize(a),Y));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return gp.deserialize(n)}};km=new WeakMap;let Rt=gp;St.SC_MAIL_LIST=gp;let bp=class bp extends c.Message{constructor(n){super();Ie(this,Em,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Em)),!Array.isArray(n)&&typeof n=="object"&&(this.mailId=n.mailId)}get mailId(){return c.Message.getField(this,1)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new bp({mailId:n.mailId})}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_mailId&&a.writeInt32(1,this.mailId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new bp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.mailId=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return bp.deserialize(n)}};Em=new WeakMap;let Te=bp;St.CS_MAIL_GET=bp;let yp=class yp extends c.Message{constructor(n){super();Ie(this,Lm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[2],ve(this,Lm)),!Array.isArray(n)&&typeof n=="object"&&("mailId"in n&&n.mailId!=null&&(this.mailId=n.mailId),this.items=n.items,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get mailId(){return c.Message.getFieldWithDefault(this,1,0)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}get items(){return c.Message.getRepeatedWrapperField(this,W,2)}set items(n){c.Message.setRepeatedWrapperField(this,2,n)}get snake(){return c.Message.getWrapperField(this,Z,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new yp({items:n.items.map(d=>W.fromObject(d))});return n.mailId!=null&&(a.mailId=n.mailId),n.snake!=null&&(a.snake=Z.fromObject(n.snake)),a}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),this.items!=null&&(n.items=this.items.map(a=>a.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_mailId&&a.writeInt32(1,this.mailId),this.items.length&&a.writeRepeatedMessage(2,this.items,d=>d.serialize(a)),this.has_snake&&a.writeMessage(3,this.snake,()=>this.snake.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new yp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.mailId=a.readInt32();break;case 2:a.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,2,W.deserialize(a),W));break;case 3:a.readMessage(d.snake,()=>d.snake=Z.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return yp.deserialize(n)}};Lm=new WeakMap;let $t=yp;St.SC_MAIL_GET=yp;let _p=class _p extends c.Message{constructor(n){super();Ie(this,Tm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Tm)),!Array.isArray(n)&&typeof n=="object"&&(this.mailId=n.mailId)}get mailId(){return c.Message.getField(this,1)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new _p({mailId:n.mailId})}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_mailId&&a.writeInt32(1,this.mailId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new _p;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.mailId=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return _p.deserialize(n)}};Tm=new WeakMap;let qt=_p;St.CS_MAIL_DELETE=_p;let xp=class xp extends c.Message{constructor(n){super();Ie(this,Cm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Cm)),!Array.isArray(n)&&typeof n=="object"&&(this.msg=n.msg)}get msg(){return c.Message.getField(this,1)}set msg(n){c.Message.setField(this,1,n)}get has_msg(){return c.Message.getField(this,1)!=null}static fromObject(n){return new xp({msg:n.msg})}toObject(){let n={};return this.msg!=null&&(n.msg=this.msg),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_msg&&this.msg.length&&a.writeString(1,this.msg),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new xp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.msg=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return xp.deserialize(n)}};Cm=new WeakMap;let ui=xp;St.SC_SYS_NOTICE=xp;let vp=class vp extends c.Message{constructor(n){super();Ie(this,Am,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Am)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type,this.value=n.value)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get value(){return c.Message.getField(this,2)}set value(n){c.Message.setField(this,2,n)}get has_value(){return c.Message.getField(this,2)!=null}static fromObject(n){return new vp({type:n.type,value:n.value})}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.value!=null&&(n.value=this.value),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_type&&a.writeInt32(1,this.type),this.has_value&&this.value.length&&a.writeString(2,this.value),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new vp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.type=a.readInt32();break;case 2:d.value=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return vp.deserialize(n)}};Am=new WeakMap;let Ti=vp;St.CS_CHANGE_INFO=vp;let Ip=class Ip extends c.Message{constructor(n){super();Ie(this,Mm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Mm)),!Array.isArray(n)&&typeof n=="object"&&("kills"in n&&n.kills!=null&&(this.kills=n.kills),"score"in n&&n.score!=null&&(this.score=n.score))}get kills(){return c.Message.getFieldWithDefault(this,1,0)}set kills(n){c.Message.setField(this,1,n)}get has_kills(){return c.Message.getField(this,1)!=null}get score(){return c.Message.getFieldWithDefault(this,2,0)}set score(n){c.Message.setField(this,2,n)}get has_score(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Ip({});return n.kills!=null&&(a.kills=n.kills),n.score!=null&&(a.score=n.score),a}toObject(){let n={};return this.kills!=null&&(n.kills=this.kills),this.score!=null&&(n.score=this.score),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_kills&&a.writeInt32(1,this.kills),this.has_score&&a.writeInt32(2,this.score),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ip;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.kills=a.readInt32();break;case 2:d.score=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ip.deserialize(n)}};Mm=new WeakMap;let bn=Ip;St.CS_AI_END=Ip;let Sp=class Sp extends c.Message{constructor(n){super();Ie(this,Rm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,Rm)),!Array.isArray(n)&&typeof n=="object"&&(this.items=n.items)}get items(){return c.Message.getRepeatedWrapperField(this,W,1)}set items(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new Sp({items:n.items.map(d=>W.fromObject(d))})}toObject(){let n={};return this.items!=null&&(n.items=this.items.map(a=>a.toObject())),n}serialize(n){let a=n||new c.BinaryWriter;if(this.items.length&&a.writeRepeatedMessage(1,this.items,d=>d.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Sp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,1,W.deserialize(a),W));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Sp.deserialize(n)}};Rm=new WeakMap;let zi=Sp;St.SC_AI_END=Sp;let wp=class wp extends c.Message{constructor(n){super();Ie(this,Bm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Bm)),!Array.isArray(n)&&typeof n=="object"&&(this.boxId=n.boxId)}get boxId(){return c.Message.getField(this,1)}set boxId(n){c.Message.setField(this,1,n)}get has_boxId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new wp({boxId:n.boxId})}toObject(){let n={};return this.boxId!=null&&(n.boxId=this.boxId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_boxId&&a.writeInt32(1,this.boxId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new wp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.boxId=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return wp.deserialize(n)}};Bm=new WeakMap;let Qi=wp;St.CS_OPEN_BOX=wp;let kp=class kp extends c.Message{constructor(n){super();Ie(this,Dm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ve(this,Dm)),!Array.isArray(n)&&typeof n=="object"&&(this.cost=n.cost,this.items=n.items,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get cost(){return c.Message.getRepeatedWrapperField(this,W,1)}set cost(n){c.Message.setRepeatedWrapperField(this,1,n)}get items(){return c.Message.getRepeatedWrapperField(this,W,2)}set items(n){c.Message.setRepeatedWrapperField(this,2,n)}get snake(){return c.Message.getWrapperField(this,Z,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new kp({cost:n.cost.map(d=>W.fromObject(d)),items:n.items.map(d=>W.fromObject(d))});return n.snake!=null&&(a.snake=Z.fromObject(n.snake)),a}toObject(){let n={};return this.cost!=null&&(n.cost=this.cost.map(a=>a.toObject())),this.items!=null&&(n.items=this.items.map(a=>a.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let a=n||new c.BinaryWriter;if(this.cost.length&&a.writeRepeatedMessage(1,this.cost,d=>d.serialize(a)),this.items.length&&a.writeRepeatedMessage(2,this.items,d=>d.serialize(a)),this.has_snake&&a.writeMessage(3,this.snake,()=>this.snake.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new kp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,1,W.deserialize(a),W));break;case 2:a.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,2,W.deserialize(a),W));break;case 3:a.readMessage(d.snake,()=>d.snake=Z.deserialize(a));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return kp.deserialize(n)}};Dm=new WeakMap;let Tn=kp;St.SC_OPEN_BOX=kp;let Ep=class Ep extends c.Message{constructor(n){super();Ie(this,Nm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,Nm)),!Array.isArray(n)&&typeof n=="object"&&(this.price=n.price)}get price(){return c.Message.getFieldWithDefault(this,1,[])}set price(n){c.Message.setField(this,1,n)}static fromObject(n){return new Ep({price:n.price})}toObject(){return{price:this.price}}serialize(n){let a=n||new c.BinaryWriter;if(this.price.length&&a.writeRepeatedString(1,this.price),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ep;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ep.deserialize(n)}};Nm=new WeakMap;let ns=Ep;St.SC_REQUEST_PRICE=Ep;let Lp=class Lp extends c.Message{constructor(n){super();Ie(this,Om,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Om)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Lp({type:n.type})}toObject(){let n={};return this.type!=null&&(n.type=this.type),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_type&&a.writeInt32(1,this.type),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Lp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.type=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Lp.deserialize(n)}};Om=new WeakMap;let jn=Lp;St.CS_RANK_LIST=Lp;let Tp=class Tp extends c.Message{constructor(n){super();Ie(this,Fm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,Fm)),!Array.isArray(n)&&typeof n=="object"&&(this.rank=n.rank)}get rank(){return c.Message.getRepeatedWrapperField(this,Ms,1)}set rank(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new Tp({rank:n.rank.map(d=>Ms.fromObject(d))})}toObject(){let n={};return this.rank!=null&&(n.rank=this.rank.map(a=>a.toObject())),n}serialize(n){let a=n||new c.BinaryWriter;if(this.rank.length&&a.writeRepeatedMessage(1,this.rank,d=>d.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Tp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:a.readMessage(d.rank,()=>c.Message.addToRepeatedWrapperField(d,1,Ms.deserialize(a),Ms));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Tp.deserialize(n)}};Fm=new WeakMap;let As=Tp;St.SC_RANK_LIST=Tp;let Cp=class Cp extends c.Message{constructor(n){super();Ie(this,Pm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Pm)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"userName"in n&&n.userName!=null&&(this.userName=n.userName),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"num"in n&&n.num!=null&&(this.num=n.num),"addr"in n&&n.addr!=null&&(this.addr=n.addr),"country"in n&&n.country!=null&&(this.country=n.country))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getFieldWithDefault(this,2,"")}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get icon(){return c.Message.getFieldWithDefault(this,3,"")}set icon(n){c.Message.setField(this,3,n)}get has_icon(){return c.Message.getField(this,3)!=null}get num(){return c.Message.getFieldWithDefault(this,4,0)}set num(n){c.Message.setField(this,4,n)}get has_num(){return c.Message.getField(this,4)!=null}get addr(){return c.Message.getFieldWithDefault(this,5,"")}set addr(n){c.Message.setField(this,5,n)}get has_addr(){return c.Message.getField(this,5)!=null}get country(){return c.Message.getFieldWithDefault(this,6,0)}set country(n){c.Message.setField(this,6,n)}get has_country(){return c.Message.getField(this,6)!=null}static fromObject(n){let a=new Cp({});return n.roleId!=null&&(a.roleId=n.roleId),n.userName!=null&&(a.userName=n.userName),n.icon!=null&&(a.icon=n.icon),n.num!=null&&(a.num=n.num),n.addr!=null&&(a.addr=n.addr),n.country!=null&&(a.country=n.country),a}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.userName!=null&&(n.userName=this.userName),this.icon!=null&&(n.icon=this.icon),this.num!=null&&(n.num=this.num),this.addr!=null&&(n.addr=this.addr),this.country!=null&&(n.country=this.country),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_userName&&this.userName.length&&a.writeString(2,this.userName),this.has_icon&&this.icon.length&&a.writeString(3,this.icon),this.has_num&&a.writeInt64(4,this.num),this.has_addr&&this.addr.length&&a.writeString(5,this.addr),this.has_country&&a.writeInt32(6,this.country),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Cp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:d.userName=a.readString();break;case 3:d.icon=a.readString();break;case 4:d.num=a.readInt64();break;case 5:d.addr=a.readString();break;case 6:d.country=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Cp.deserialize(n)}};Pm=new WeakMap;let Ms=Cp;St.RankObject=Cp;let Ap=class Ap extends c.Message{constructor(n){super();Ie(this,Um,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[3],ve(this,Um)),!Array.isArray(n)&&typeof n=="object"&&("lv"in n&&n.lv!=null&&(this.lv=n.lv),"exp"in n&&n.exp!=null&&(this.exp=n.exp),this.items=n.items)}get lv(){return c.Message.getFieldWithDefault(this,1,0)}set lv(n){c.Message.setField(this,1,n)}get has_lv(){return c.Message.getField(this,1)!=null}get exp(){return c.Message.getFieldWithDefault(this,2,0)}set exp(n){c.Message.setField(this,2,n)}get has_exp(){return c.Message.getField(this,2)!=null}get items(){return c.Message.getRepeatedWrapperField(this,W,3)}set items(n){c.Message.setRepeatedWrapperField(this,3,n)}static fromObject(n){let a=new Ap({items:n.items.map(d=>W.fromObject(d))});return n.lv!=null&&(a.lv=n.lv),n.exp!=null&&(a.exp=n.exp),a}toObject(){let n={};return this.lv!=null&&(n.lv=this.lv),this.exp!=null&&(n.exp=this.exp),this.items!=null&&(n.items=this.items.map(a=>a.toObject())),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_lv&&a.writeInt32(1,this.lv),this.has_exp&&a.writeInt32(2,this.exp),this.items.length&&a.writeRepeatedMessage(3,this.items,d=>d.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ap;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.lv=a.readInt32();break;case 2:d.exp=a.readInt32();break;case 3:a.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,3,W.deserialize(a),W));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ap.deserialize(n)}};Um=new WeakMap;let Kr=Ap;St.SC_LVUP_NOTICE=Ap;let Mp=class Mp extends c.Message{constructor(n){super();Ie(this,Hm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Hm)),!Array.isArray(n)&&typeof n=="object"&&(this.name=n.name,this.icon=n.icon,this.type=n.type)}get name(){return c.Message.getField(this,1)}set name(n){c.Message.setField(this,1,n)}get has_name(){return c.Message.getField(this,1)!=null}get icon(){return c.Message.getField(this,2)}set icon(n){c.Message.setField(this,2,n)}get has_icon(){return c.Message.getField(this,2)!=null}get type(){return c.Message.getField(this,3)}set type(n){c.Message.setField(this,3,n)}get has_type(){return c.Message.getField(this,3)!=null}static fromObject(n){return new Mp({name:n.name,icon:n.icon,type:n.type})}toObject(){let n={};return this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.type!=null&&(n.type=this.type),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_name&&this.name.length&&a.writeString(1,this.name),this.has_icon&&this.icon.length&&a.writeString(2,this.icon),this.has_type&&a.writeInt32(3,this.type),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Mp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.name=a.readString();break;case 2:d.icon=a.readString();break;case 3:d.type=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Mp.deserialize(n)}};Hm=new WeakMap;let _u=Mp;St.CS_CREATE_CLUB=Mp;let Rp=class Rp extends c.Message{constructor(n){super();Ie(this,zm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,zm)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type)}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Rp({clubId:n.clubId,type:n.type})}toObject(){let n={};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_clubId&&a.writeInt64(1,this.clubId),this.has_type&&a.writeInt32(2,this.type),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Rp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.clubId=a.readInt64();break;case 2:d.type=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Rp.deserialize(n)}};zm=new WeakMap;let y=Rp;St.SC_CREATE_CLUB=Rp;let Bp=class Bp extends c.Message{constructor(n){super();Ie(this,jm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,jm)),!Array.isArray(n)&&typeof n=="object"&&("point"in n&&n.point!=null&&(this.point=n.point),"clubId"in n&&n.clubId!=null&&(this.clubId=n.clubId))}get point(){return c.Message.getFieldWithDefault(this,1,"")}set point(n){c.Message.setField(this,1,n)}get has_point(){return c.Message.getField(this,1)!=null}get clubId(){return c.Message.getFieldWithDefault(this,2,0)}set clubId(n){c.Message.setField(this,2,n)}get has_clubId(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Bp({});return n.point!=null&&(a.point=n.point),n.clubId!=null&&(a.clubId=n.clubId),a}toObject(){let n={};return this.point!=null&&(n.point=this.point),this.clubId!=null&&(n.clubId=this.clubId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_point&&this.point.length&&a.writeString(1,this.point),this.has_clubId&&a.writeInt64(2,this.clubId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Bp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.point=a.readString();break;case 2:d.clubId=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Bp.deserialize(n)}};jm=new WeakMap;let S=Bp;St.CS_CLUB_INFO=Bp;let Dp=class Dp extends c.Message{constructor(n){super();Ie(this,Gm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8,10],ve(this,Gm)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type,"name"in n&&n.name!=null&&(this.name=n.name),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"creater"in n&&n.creater!=null&&(this.creater=n.creater),"createTime"in n&&n.createTime!=null&&(this.createTime=n.createTime),this.rooms=n.rooms,this.community=n.community,"createrId"in n&&n.createrId!=null&&(this.createrId=n.createrId),"myRate"in n&&n.myRate!=null&&(this.myRate=n.myRate))}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}get name(){return c.Message.getFieldWithDefault(this,3,"")}set name(n){c.Message.setField(this,3,n)}get has_name(){return c.Message.getField(this,3)!=null}get icon(){return c.Message.getFieldWithDefault(this,4,"")}set icon(n){c.Message.setField(this,4,n)}get has_icon(){return c.Message.getField(this,4)!=null}get creater(){return c.Message.getFieldWithDefault(this,5,"")}set creater(n){c.Message.setField(this,5,n)}get has_creater(){return c.Message.getField(this,5)!=null}get createTime(){return c.Message.getFieldWithDefault(this,6,0)}set createTime(n){c.Message.setField(this,6,n)}get has_createTime(){return c.Message.getField(this,6)!=null}get rooms(){return c.Message.getFieldWithDefault(this,8,[])}set rooms(n){c.Message.setField(this,8,n)}get community(){return c.Message.getFieldWithDefault(this,10,[])}set community(n){c.Message.setField(this,10,n)}get createrId(){return c.Message.getFieldWithDefault(this,11,"")}set createrId(n){c.Message.setField(this,11,n)}get has_createrId(){return c.Message.getField(this,11)!=null}get myRate(){return c.Message.getFieldWithDefault(this,12,0)}set myRate(n){c.Message.setField(this,12,n)}get has_myRate(){return c.Message.getField(this,12)!=null}static fromObject(n){let a=new Dp({clubId:n.clubId,type:n.type,rooms:n.rooms,community:n.community});return n.name!=null&&(a.name=n.name),n.icon!=null&&(a.icon=n.icon),n.creater!=null&&(a.creater=n.creater),n.createTime!=null&&(a.createTime=n.createTime),n.createrId!=null&&(a.createrId=n.createrId),n.myRate!=null&&(a.myRate=n.myRate),a}toObject(){let n={rooms:this.rooms,community:this.community};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.creater!=null&&(n.creater=this.creater),this.createTime!=null&&(n.createTime=this.createTime),this.createrId!=null&&(n.createrId=this.createrId),this.myRate!=null&&(n.myRate=this.myRate),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_clubId&&a.writeInt64(1,this.clubId),this.has_type&&a.writeInt32(2,this.type),this.has_name&&this.name.length&&a.writeString(3,this.name),this.has_icon&&this.icon.length&&a.writeString(4,this.icon),this.has_creater&&this.creater.length&&a.writeString(5,this.creater),this.has_createTime&&a.writeInt64(6,this.createTime),this.rooms.length&&a.writeRepeatedString(8,this.rooms),this.community.length&&a.writeRepeatedString(10,this.community),this.has_createrId&&this.createrId.length&&a.writeString(11,this.createrId),this.has_myRate&&a.writeFloat(12,this.myRate),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Dp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.clubId=a.readInt64();break;case 2:d.type=a.readInt32();break;case 3:d.name=a.readString();break;case 4:d.icon=a.readString();break;case 5:d.creater=a.readString();break;case 6:d.createTime=a.readInt64();break;case 8:c.Message.addToRepeatedField(d,8,a.readString());break;case 10:c.Message.addToRepeatedField(d,10,a.readString());break;case 11:d.createrId=a.readString();break;case 12:d.myRate=a.readFloat();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Dp.deserialize(n)}};Gm=new WeakMap;let I=Dp;St.SC_CLUB_INFO=Dp;let Np=class Np extends c.Message{constructor(n){super();Ie(this,Wm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Wm)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,this.rate=n.rate)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get rate(){return c.Message.getField(this,2)}set rate(n){c.Message.setField(this,2,n)}get has_rate(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Np({roleId:n.roleId,rate:n.rate})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.rate!=null&&(n.rate=this.rate),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&a.writeString(1,this.roleId),this.has_rate&&a.writeFloat(2,this.rate),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Np;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roleId=a.readString();break;case 2:d.rate=a.readFloat();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Np.deserialize(n)}};Wm=new WeakMap;let m=Np;St.CS_SET_COMMISION=Np;let Op=class Op extends c.Message{constructor(n){super();Ie(this,Vm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Vm)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type,this.value=n.value)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get value(){return c.Message.getField(this,2)}set value(n){c.Message.setField(this,2,n)}get has_value(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Op({type:n.type,value:n.value})}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.value!=null&&(n.value=this.value),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_type&&a.writeInt32(1,this.type),this.has_value&&this.value.length&&a.writeString(2,this.value),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Op;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.type=a.readInt32();break;case 2:d.value=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Op.deserialize(n)}};Vm=new WeakMap;let T=Op;St.CS_CLUB_CHANGE_INFO=Op;let Fp=class Fp extends c.Message{constructor(n){super();Ie(this,Km,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Km)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type,this.ticketId=n.ticketId,this.ticketValue=n.ticketValue,this.map=n.map,this.fruit=n.fruit,this.bgm=n.bgm,this.point=n.point,this.itemId=n.itemId)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get ticketId(){return c.Message.getField(this,2)}set ticketId(n){c.Message.setField(this,2,n)}get has_ticketId(){return c.Message.getField(this,2)!=null}get ticketValue(){return c.Message.getField(this,3)}set ticketValue(n){c.Message.setField(this,3,n)}get has_ticketValue(){return c.Message.getField(this,3)!=null}get map(){return c.Message.getField(this,4)}set map(n){c.Message.setField(this,4,n)}get has_map(){return c.Message.getField(this,4)!=null}get fruit(){return c.Message.getField(this,5)}set fruit(n){c.Message.setField(this,5,n)}get has_fruit(){return c.Message.getField(this,5)!=null}get bgm(){return c.Message.getField(this,6)}set bgm(n){c.Message.setField(this,6,n)}get has_bgm(){return c.Message.getField(this,6)!=null}get point(){return c.Message.getField(this,7)}set point(n){c.Message.setField(this,7,n)}get has_point(){return c.Message.getField(this,7)!=null}get itemId(){return c.Message.getField(this,8)}set itemId(n){c.Message.setField(this,8,n)}get has_itemId(){return c.Message.getField(this,8)!=null}static fromObject(n){return new Fp({type:n.type,ticketId:n.ticketId,ticketValue:n.ticketValue,map:n.map,fruit:n.fruit,bgm:n.bgm,point:n.point,itemId:n.itemId})}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.ticketId!=null&&(n.ticketId=this.ticketId),this.ticketValue!=null&&(n.ticketValue=this.ticketValue),this.map!=null&&(n.map=this.map),this.fruit!=null&&(n.fruit=this.fruit),this.bgm!=null&&(n.bgm=this.bgm),this.point!=null&&(n.point=this.point),this.itemId!=null&&(n.itemId=this.itemId),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_type&&a.writeInt32(1,this.type),this.has_ticketId&&a.writeInt32(2,this.ticketId),this.has_ticketValue&&a.writeDouble(3,this.ticketValue),this.has_map&&this.map.length&&a.writeString(4,this.map),this.has_fruit&&this.fruit.length&&a.writeString(5,this.fruit),this.has_bgm&&this.bgm.length&&a.writeString(6,this.bgm),this.has_point&&this.point.length&&a.writeString(7,this.point),this.has_itemId&&a.writeInt32(8,this.itemId),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Fp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.type=a.readInt32();break;case 2:d.ticketId=a.readInt32();break;case 3:d.ticketValue=a.readDouble();break;case 4:d.map=a.readString();break;case 5:d.fruit=a.readString();break;case 6:d.bgm=a.readString();break;case 7:d.point=a.readString();break;case 8:d.itemId=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Fp.deserialize(n)}};Km=new WeakMap;let $=Fp;St.CS_CREATE_CUSTOM_ROOM=Fp;let Pp=class Pp extends c.Message{constructor(n){super();Ie(this,$m,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[2],ve(this,$m)),!Array.isArray(n)&&typeof n=="object"&&(this.roomNo=n.roomNo,this.cost=n.cost)}get roomNo(){return c.Message.getField(this,1)}set roomNo(n){c.Message.setField(this,1,n)}get has_roomNo(){return c.Message.getField(this,1)!=null}get cost(){return c.Message.getRepeatedWrapperField(this,W,2)}set cost(n){c.Message.setRepeatedWrapperField(this,2,n)}static fromObject(n){return new Pp({roomNo:n.roomNo,cost:n.cost.map(d=>W.fromObject(d))})}toObject(){let n={};return this.roomNo!=null&&(n.roomNo=this.roomNo),this.cost!=null&&(n.cost=this.cost.map(a=>a.toObject())),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_roomNo&&this.roomNo.length&&a.writeString(1,this.roomNo),this.cost.length&&a.writeRepeatedMessage(2,this.cost,d=>d.serialize(a)),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Pp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.roomNo=a.readString();break;case 2:a.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,2,W.deserialize(a),W));break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Pp.deserialize(n)}};$m=new WeakMap;let Q=Pp;St.SC_CREATE_CUSTOM_ROOM=Pp;let Up=class Up extends c.Message{constructor(n){super();Ie(this,qm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,qm)),!Array.isArray(n)&&typeof n=="object"&&(this.rooms=n.rooms,"dailyFight"in n&&n.dailyFight!=null&&(this.dailyFight=n.dailyFight),"totalFight"in n&&n.totalFight!=null&&(this.totalFight=n.totalFight))}get rooms(){return c.Message.getFieldWithDefault(this,1,[])}set rooms(n){c.Message.setField(this,1,n)}get dailyFight(){return c.Message.getFieldWithDefault(this,2,0)}set dailyFight(n){c.Message.setField(this,2,n)}get has_dailyFight(){return c.Message.getField(this,2)!=null}get totalFight(){return c.Message.getFieldWithDefault(this,3,0)}set totalFight(n){c.Message.setField(this,3,n)}get has_totalFight(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new Up({rooms:n.rooms});return n.dailyFight!=null&&(a.dailyFight=n.dailyFight),n.totalFight!=null&&(a.totalFight=n.totalFight),a}toObject(){let n={rooms:this.rooms};return this.dailyFight!=null&&(n.dailyFight=this.dailyFight),this.totalFight!=null&&(n.totalFight=this.totalFight),n}serialize(n){let a=n||new c.BinaryWriter;if(this.rooms.length&&a.writeRepeatedString(1,this.rooms),this.has_dailyFight&&a.writeInt32(2,this.dailyFight),this.has_totalFight&&a.writeInt32(3,this.totalFight),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Up;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;case 2:d.dailyFight=a.readInt32();break;case 3:d.totalFight=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Up.deserialize(n)}};qm=new WeakMap;let he=Up;St.SC_CLUB_ROOM=Up;let Hp=class Hp extends c.Message{constructor(n){super();Ie(this,Ym,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Ym)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize)}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Hp({pageNo:n.pageNo,pageSize:n.pageSize})}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_pageNo&&a.writeInt32(1,this.pageNo),this.has_pageSize&&a.writeInt32(2,this.pageSize),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Hp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.pageNo=a.readInt32();break;case 2:d.pageSize=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Hp.deserialize(n)}};Ym=new WeakMap;let Ce=Hp;St.CS_REQUEST_PROFIT=Hp;let zp=class zp extends c.Message{constructor(n){super();Ie(this,Qm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[4],ve(this,Qm)),!Array.isArray(n)&&typeof n=="object"&&("profitTotal"in n&&n.profitTotal!=null&&(this.profitTotal=n.profitTotal),"profitToday"in n&&n.profitToday!=null&&(this.profitToday=n.profitToday),"total"in n&&n.total!=null&&(this.total=n.total),this.profits=n.profits)}get profitTotal(){return c.Message.getFieldWithDefault(this,1,0)}set profitTotal(n){c.Message.setField(this,1,n)}get has_profitTotal(){return c.Message.getField(this,1)!=null}get profitToday(){return c.Message.getFieldWithDefault(this,2,0)}set profitToday(n){c.Message.setField(this,2,n)}get has_profitToday(){return c.Message.getField(this,2)!=null}get total(){return c.Message.getFieldWithDefault(this,3,0)}set total(n){c.Message.setField(this,3,n)}get has_total(){return c.Message.getField(this,3)!=null}get profits(){return c.Message.getFieldWithDefault(this,4,[])}set profits(n){c.Message.setField(this,4,n)}static fromObject(n){let a=new zp({profits:n.profits});return n.profitTotal!=null&&(a.profitTotal=n.profitTotal),n.profitToday!=null&&(a.profitToday=n.profitToday),n.total!=null&&(a.total=n.total),a}toObject(){let n={profits:this.profits};return this.profitTotal!=null&&(n.profitTotal=this.profitTotal),this.profitToday!=null&&(n.profitToday=this.profitToday),this.total!=null&&(n.total=this.total),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_profitTotal&&a.writeDouble(1,this.profitTotal),this.has_profitToday&&a.writeDouble(2,this.profitToday),this.has_total&&a.writeInt32(3,this.total),this.profits.length&&a.writeRepeatedString(4,this.profits),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new zp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.profitTotal=a.readDouble();break;case 2:d.profitToday=a.readDouble();break;case 3:d.total=a.readInt32();break;case 4:c.Message.addToRepeatedField(d,4,a.readString());break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return zp.deserialize(n)}};Qm=new WeakMap;let ct=zp;St.SC_REQUEST_PROFIT=zp;let jp=class jp extends c.Message{constructor(n){super();Ie(this,Xm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Xm)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize)}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}static fromObject(n){return new jp({pageNo:n.pageNo,pageSize:n.pageSize})}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_pageNo&&a.writeInt32(1,this.pageNo),this.has_pageSize&&a.writeInt32(2,this.pageSize),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new jp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.pageNo=a.readInt32();break;case 2:d.pageSize=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return jp.deserialize(n)}};Xm=new WeakMap;let qe=jp;St.CS_TOKEN_CHANGE_RECORD=jp;let Gp=class Gp extends c.Message{constructor(n){super();Ie(this,Jm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,Jm)),!Array.isArray(n)&&typeof n=="object"&&(this.records=n.records,"total"in n&&n.total!=null&&(this.total=n.total))}get records(){return c.Message.getFieldWithDefault(this,1,[])}set records(n){c.Message.setField(this,1,n)}get total(){return c.Message.getFieldWithDefault(this,2,0)}set total(n){c.Message.setField(this,2,n)}get has_total(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Gp({records:n.records});return n.total!=null&&(a.total=n.total),a}toObject(){let n={records:this.records};return this.total!=null&&(n.total=this.total),n}serialize(n){let a=n||new c.BinaryWriter;if(this.records.length&&a.writeRepeatedString(1,this.records),this.has_total&&a.writeInt32(2,this.total),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Gp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;case 2:d.total=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Gp.deserialize(n)}};Jm=new WeakMap;let li=Gp;St.SC_TOKEN_CHANGE_RECORD=Gp;let Wp=class Wp extends c.Message{constructor(n){super();Ie(this,Zm,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,Zm)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize,this.clubIb=n.clubIb)}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}get clubIb(){return c.Message.getField(this,3)}set clubIb(n){c.Message.setField(this,3,n)}get has_clubIb(){return c.Message.getField(this,3)!=null}static fromObject(n){return new Wp({pageNo:n.pageNo,pageSize:n.pageSize,clubIb:n.clubIb})}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),this.clubIb!=null&&(n.clubIb=this.clubIb),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_pageNo&&a.writeInt32(1,this.pageNo),this.has_pageSize&&a.writeInt32(2,this.pageSize),this.has_clubIb&&a.writeInt64(3,this.clubIb),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Wp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.pageNo=a.readInt32();break;case 2:d.pageSize=a.readInt32();break;case 3:d.clubIb=a.readInt64();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Wp.deserialize(n)}};Zm=new WeakMap;let Xe=Wp;St.CS_CLUB_MEMBER=Wp;let Vp=class Vp extends c.Message{constructor(n){super();Ie(this,ef,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,ef)),!Array.isArray(n)&&typeof n=="object"&&(this.members=n.members,"total"in n&&n.total!=null&&(this.total=n.total))}get members(){return c.Message.getFieldWithDefault(this,1,[])}set members(n){c.Message.setField(this,1,n)}get total(){return c.Message.getFieldWithDefault(this,2,0)}set total(n){c.Message.setField(this,2,n)}get has_total(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Vp({members:n.members});return n.total!=null&&(a.total=n.total),a}toObject(){let n={members:this.members};return this.total!=null&&(n.total=this.total),n}serialize(n){let a=n||new c.BinaryWriter;if(this.members.length&&a.writeRepeatedString(1,this.members),this.has_total&&a.writeInt32(2,this.total),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Vp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;case 2:d.total=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Vp.deserialize(n)}};ef=new WeakMap;let kt=Vp;St.SC_CLUB_MEMBER=Vp;let Kp=class Kp extends c.Message{constructor(n){super();Ie(this,tf,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,tf)),!Array.isArray(n)&&typeof n=="object"&&("profitRatio"in n&&n.profitRatio!=null&&(this.profitRatio=n.profitRatio),"inviteCount"in n&&n.inviteCount!=null&&(this.inviteCount=n.inviteCount))}get profitRatio(){return c.Message.getFieldWithDefault(this,1,0)}set profitRatio(n){c.Message.setField(this,1,n)}get has_profitRatio(){return c.Message.getField(this,1)!=null}get inviteCount(){return c.Message.getFieldWithDefault(this,2,0)}set inviteCount(n){c.Message.setField(this,2,n)}get has_inviteCount(){return c.Message.getField(this,2)!=null}static fromObject(n){let a=new Kp({});return n.profitRatio!=null&&(a.profitRatio=n.profitRatio),n.inviteCount!=null&&(a.inviteCount=n.inviteCount),a}toObject(){let n={};return this.profitRatio!=null&&(n.profitRatio=this.profitRatio),this.inviteCount!=null&&(n.inviteCount=this.inviteCount),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_profitRatio&&a.writeFloat(1,this.profitRatio),this.has_inviteCount&&a.writeInt32(2,this.inviteCount),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Kp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.profitRatio=a.readFloat();break;case 2:d.inviteCount=a.readInt32();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Kp.deserialize(n)}};tf=new WeakMap;let Lt=Kp;St.SC_MY_PROFIT=Kp;let $p=class $p extends c.Message{constructor(n){super();Ie(this,rf,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,rf)),!Array.isArray(n)&&typeof n=="object"&&(this.pageNo=n.pageNo,this.pageSize=n.pageSize,"childAddress"in n&&n.childAddress!=null&&(this.childAddress=n.childAddress))}get pageNo(){return c.Message.getField(this,1)}set pageNo(n){c.Message.setField(this,1,n)}get has_pageNo(){return c.Message.getField(this,1)!=null}get pageSize(){return c.Message.getField(this,2)}set pageSize(n){c.Message.setField(this,2,n)}get has_pageSize(){return c.Message.getField(this,2)!=null}get childAddress(){return c.Message.getFieldWithDefault(this,3,"")}set childAddress(n){c.Message.setField(this,3,n)}get has_childAddress(){return c.Message.getField(this,3)!=null}static fromObject(n){let a=new $p({pageNo:n.pageNo,pageSize:n.pageSize});return n.childAddress!=null&&(a.childAddress=n.childAddress),a}toObject(){let n={};return this.pageNo!=null&&(n.pageNo=this.pageNo),this.pageSize!=null&&(n.pageSize=this.pageSize),this.childAddress!=null&&(n.childAddress=this.childAddress),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_pageNo&&a.writeInt32(1,this.pageNo),this.has_pageSize&&a.writeInt32(2,this.pageSize),this.has_childAddress&&this.childAddress.length&&a.writeString(3,this.childAddress),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new $p;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.pageNo=a.readInt32();break;case 2:d.pageSize=a.readInt32();break;case 3:d.childAddress=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return $p.deserialize(n)}};rf=new WeakMap;let Ut=$p;St.CS_REQUEST_PROFIT_LIST=$p;let qp=class qp extends c.Message{constructor(n){super();Ie(this,nf,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ve(this,nf)),!Array.isArray(n)&&typeof n=="object"&&(this.community=n.community)}get community(){return c.Message.getFieldWithDefault(this,1,[])}set community(n){c.Message.setField(this,1,n)}static fromObject(n){return new qp({community:n.community})}toObject(){return{community:this.community}}serialize(n){let a=n||new c.BinaryWriter;if(this.community.length&&a.writeRepeatedString(1,this.community),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new qp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,a.readString());break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return qp.deserialize(n)}};nf=new WeakMap;let Ft=qp;St.SC_REQUEST_PROFIT_LIST=qp;let Yp=class Yp extends c.Message{constructor(n){super();Ie(this,sf,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,sf)),!Array.isArray(n)&&typeof n=="object"&&(this.address=n.address)}get address(){return c.Message.getField(this,1)}set address(n){c.Message.setField(this,1,n)}get has_address(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Yp({address:n.address})}toObject(){let n={};return this.address!=null&&(n.address=this.address),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_address&&this.address.length&&a.writeString(1,this.address),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Yp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.address=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Yp.deserialize(n)}};sf=new WeakMap;let Tt=Yp;St.CS_REQUEST_HALL_ADDR=Yp;let Qp=class Qp extends c.Message{constructor(n){super();Ie(this,of,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ve(this,of)),!Array.isArray(n)&&typeof n=="object"&&(this.hallAddr=n.hallAddr)}get hallAddr(){return c.Message.getField(this,1)}set hallAddr(n){c.Message.setField(this,1,n)}get has_hallAddr(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Qp({hallAddr:n.hallAddr})}toObject(){let n={};return this.hallAddr!=null&&(n.hallAddr=this.hallAddr),n}serialize(n){let a=n||new c.BinaryWriter;if(this.has_hallAddr&&this.hallAddr.length&&a.writeString(1,this.hallAddr),!n)return a.getResultBuffer()}static deserialize(n){let a=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Qp;for(;a.nextField()&&!a.isEndGroup();)switch(a.getFieldNumber()){case 1:d.hallAddr=a.readString();break;default:a.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Qp.deserialize(n)}};of=new WeakMap;let Bt=Qp;St.SC_REQUEST_HALL_ADDR=Qp})(t=r.socket||(r.socket={}))})(i=e.snake||(e.snake={}))})(x||(x={}))});var Zs,aR=_(()=>{"use strict";Zs=class{constructor(){}};Zs.MONTH="months",Zs.DAYS="days",Zs.HOURS="hours",Zs.MINUTES="minutes",Zs.SECOUNDS="seconds",Zs.MS="ms"});var rr,xi,dn=_(()=>{"use strict";ur();aR();At();rr=class rr{constructor(){}static formatMM(e){if(e<=0)return"00:000";let t,r;t=e/1e3,r=e%1e3;let s="";return t<=9&&(s+="0"),s+=Math.floor(t),s+=":",r<=9?s+="00":r<=99&&(s+="0"),s+=r,s}static format(e,t=":",r=!0){if(e<=0)return r?"00:00:00":"00:00";let s,o,l,u,p;u=e/3600,l=e%3600,p=l/60,s=l%60;let h="";return r&&(u<=9&&(h+="0"),h+=Math.floor(u)+t),p<=9&&(h+="0"),h+=Math.floor(p)+t,Math.ceil(s)<=9&&(h+="0"),h+=Math.ceil(s),h}static formatWithDay(e,t=":",r=!1){if(e<=0)return"00:00";let s,o,l,u,p;o=e/86400,l=e%86400,u=l/3600,l=l%3600,p=l/60,s=l%60;let h="";return o>=1?(h=z.getLanguage(16,Math.floor(o))+" ",u<=9&&(h+="0"),r&&s%2!=0&&(t=ye.getColorText(t,"#412b20")),h+=Math.floor(u)+t,p<=9&&(h+="0"),h+=Math.floor(p)):(u<=9&&(h+="0"),h=Math.floor(u)+t,p<=9&&(h+="0"),h+=Math.floor(p)+t,Math.ceil(s)<=9&&(h+="0"),h+=Math.ceil(s)),h}static formatWithSecondByMs(e){return`${e/1e3}`}static getTimeByMs(e){let t=new Date(e);return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()}static formatWithDayByMs(e,t=":",r=!1){if(e<=0)return"00:00";let s,o,l,u,p,h;l=e/864e5,u=e%864e5,p=u/36e5,u=u%36e5,h=u/6e4,u=u%6e4,o=u/1e3,s=u%1e3;let f="";return l>=1&&(f=z.getLanguage(16,Math.floor(l))+" "),p<=9&&(f+="0"),f+=Math.floor(p)+t,h<=9&&(f+="0"),f+=Math.floor(h)+t,Math.ceil(o)<=9&&(f+="0"),f+=Math.floor(o)+" ",f+=Math.ceil(s),f}static getTimeArray(e,t="HH-MM-SS"){if(e=Math.max(0,e),t.indexOf("-")==-1)return[];let r=[],s=t.split("-");for(let o of s)o=="DD"?r.push(Math.floor(e/rr.OneDaySceond)):o=="HH"?r.push(Math.floor(e%rr.OneDaySceond/rr.OneHourSceond)):o=="MM"?r.push(Math.floor(e%rr.OneHourSceond/rr.OneMiniuteSecond)):o=="SS"&&r.push(e%rr.OneMiniuteSecond);return r}static getServerDate(e){return new Date(e)}static formatTimeStamp(e,t="YY-MT-DD HH:MM:SS",r=!1){let s=rr.getServerDate(e),o="";if(t.indexOf("YY")>=0&&(o=(r?s.getUTCFullYear():s.getFullYear())+"",t=t.replace("YY",o)),t.indexOf("MT")>=0){let l=(r?s.getUTCMonth():s.getMonth())+1;l>9?o=l+"":o="0"+l,t=t.replace("MT",o)}if(t.indexOf("DD")>=0){let l=r?s.getUTCDate():s.getDate();l>9?o=l+"":o="0"+l,t=t.replace("DD",o)}if(t.indexOf("HH")>=0){let l=r?s.getUTCHours():s.getHours();l>9?o=l+"":o="0"+l,t=t.replace("HH",o)}if(t.indexOf("MM")>=0){let l=r?s.getUTCMinutes():s.getMinutes();l>9?o=l+"":o="0"+l,t=t.replace("MM",o)}if(t.indexOf("SS")>=0){let l=r?s.getUTCSeconds():s.getSeconds();l>9?o=l+"":o="0"+l,t=t.replace("SS",o)}return t}static formatTimeStamps(e,t="YY-MT-DD HH:MM:SS"){let r=rr.getServerDate(e),s=t;return s=rr.parseTimeDetail(r,s,"YY",!1),s=rr.parseTimeDetail(r,s,"MT",!1),s=rr.parseTimeDetail(r,s,"DD",!1),s=rr.parseTimeDetail(r,s,"HH",!0),s=rr.parseTimeDetail(r,s,"MM",!0),s=rr.parseTimeDetail(r,s,"SS",!0),s}static parseTimeDetail(e,t,r,s){if(t.indexOf(r)>=0){let o,l;r=="YY"?l=e.getFullYear():r=="MT"?l=e.getMonth()+1:r=="DD"?l=e.getDate():r=="HH"?l=e.getHours():r=="MM"?l=e.getMinutes():r=="SS"&&(l=e.getSeconds()),l>9||!s?o=l.toString():o="0"+l,t=t.replace(r,o)}return t}static getServerTimeStr(){return rr.formatTimeStamp(Laya.timer.currTimer)}static getTimeArr(){return rr.getServerTimeStr().split("/")}static get getDay(){let t=rr.getServerTimeStr().split("/");return parseInt(t[2])}static parseSheetTime(e){let t="";if(e){let r=e.length;for(let s=0;s<r;s++){let o="";e[s]<10?o="0"+e[s]:o=e[s],s!==r-1&&(o=o+":"),t+=o}}return t}static dateStringToTimestamp(e,t){let[r,s,o]=e.split("-").map(Number),l=Number(t),u=new Date(r,s-1,o,l).getTime();return Number(u)}static getTimestamp(e,t,r,s,o){return new Date(e,t-1,r,s,o).getTime()}static getCurrentDayTimestamp(){let e=new Date,t=e.getHours();return e.setHours(t,0,0,0),e.getTime()}static getYearMonthDat(e,t="-"){let r=new Date(e),s=r.getFullYear(),o=r.getMonth()+1<10?"0"+(r.getMonth()+1):""+(r.getMonth()+1),l=r.getDate()<10?"0"+r.getDate():""+r.getDate();return`${s}${t}${o}${t}${l}`}static formatDayAndTime(e,t="-"){let r=new Date(e),s=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0"),u=String(r.getHours()).padStart(2,"0"),p=String(r.getMinutes()).padStart(2,"0");return{date:`${s}${t}${o}${t}${l}`,time:`${u}:${p}`}}static formatTimeExpires(e){return e<60*1e3?z.getLanguage(1214,e):e<60*60*1e3?z.getLanguage(1215,Math.floor(e/6e4)):e<24*60*60*1e3?z.getLanguage(1216,Math.floor(e/36e5)):z.getLanguage(1217,Math.floor(e/(24*60*60*1e3)))}static getTimeDifference(e,t=Zs.MONTH){let r=new Date,o=new Date(e*1e3).getTime()-r.getTime();if(o<0)return{months:0,days:0,hours:0,minutes:0,seconds:0,ms:0};let l=o,u=Math.floor(o/1e3),p=Math.floor(u/60),h=Math.floor(p/60),f=Math.floor(h/24),g=Math.floor(f/30);return t==="months"?(f%=30,h%=24,p%=60,u%=60,l%=1e3):t==="days"?(h%=24,p%=60,u%=60,l%=1e3,g=0):t==="hours"?(p%=60,u%=60,l%=1e3,g=0,f=0):t==="minutes"?(u%=60,l%=1e3,g=0,f=0,h=0):t==="seconds"?(l%=1e3,g=0,f=0,h=0,p=0):t==="ms"&&(g=0,f=0,h=0,p=0,u=0),{months:t==="months"?g:0,days:t==="months"||t==="days"?f:0,hours:t==="months"||t==="days"||t==="hours"?h:0,minutes:t==="months"||t==="days"||t==="hours"||t==="minutes"?p:0,seconds:t!=="ms"?u:0,ms:l}}static checkTimeValid(e){let t=Math.floor(Date.now()/1e3),r=24*60*60;return!(t-e>r)}static formatTimeAgoFromTimestamp(e){let r=new Date().getTime()-e,s=Math.floor(r/(60*1e3)),o="";if(s<60)o=z.getLanguage(17,s);else if(s<24*60){let l=Math.floor(s/60);o=z.getLanguage(15,l)}else{let l=Math.floor(s/1440);o=z.getLanguage(16,l)}return z.getLanguage(18,o)}static formatTimeAgo(e){if(e<60*1e3)return z.getLanguage(40);if(e<60*60*1e3){var t=z.getLanguage(17,Math.floor(e/6e4));return z.getLanguage(18,t)}else if(e<24*60*60*1e3){var t=z.getLanguage(15,Math.floor(e/36e5));return z.getLanguage(18,t)}else{var t=z.getLanguage(16,Math.floor(e/864e5));return z.getLanguage(18,t)}}static formatDateDDMMYYYY(e,t="/"){let r=new Date(e),s=String(r.getDate()).padStart(2,"0"),o=String(r.getMonth()+1).padStart(2,"0"),l=r.getFullYear();return`${s}${t}${o}${t}${l}`}static getRestTime(e){let t=Math.floor(Date.now()/1e3),r=e-t;if(r<=0)return"00:00:00";let s=Math.floor(r/3600);r%=3600;let o=Math.floor(r/60),l=r%60,u=s<10?`0${s}`:`${s}`,p=o<10?`0${o}`:`${o}`,h=l<10?`0${l}`:`${l}`;return`${u}:${p}:${h}`}};rr.OneDaySceond=24*3600,rr.OneHourSceond=3600,rr.OneMiniuteSecond=60;xi=rr});var cw,ci,ws=_(()=>{"use strict";cw=class i{constructor(){this._isLoading=!1}static getInstance(){return i._instance||(i._instance=new i),i._instance}get isLoading(){return this._isLoading}init(){if(!this.txtLoadingView){var e=Laya.loader.getRes("scenes/notice/TxtLoadingView.lh");this.txtLoadingView=e.create()}}showLoading(e=!1){if(console.log("showLoading..."+e),this.txtLoadingView)e?(this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this._isLoading=!1):(this._isLoading=!0,this.showMaskLoading(),Laya.timer.once(3e3,this,this.showLazyLoading)),this.txtLoadingView.m_txtLabel&&(this.txtLoadingView.m_txtLabel.visible=!1);else return}showLoadingByInfo(e=""){console.log("showLoadingByInfo..."+e),this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this.txtLoadingView.zOrder=1000001,this.txtLoadingView.m_txtLabel.text=e,this.txtLoadingView.m_txtLabel.visible=!0}showMaskLoading(){this._isLoading&&(this.txtLoadingView.backLayer.name="backLayer",this.txtLoadingView.backLayer.mouseEnabled=!0,this.txtLoadingView.backLayer.mouseThrough=!1,this.txtLoadingView.backLayer.visible=!0)}showLazyLoading(){this._isLoading&&(console.log("showLazyLoading..."),this.txtLoadingView.visible=!0,this.txtLoadingView.zOrder=1000001,Laya.stage.addChild(this.txtLoadingView),this.txtLoadingView.x=(Laya.stage.width-this.txtLoadingView.width)/2,this.txtLoadingView.y=(Laya.stage.height-this.txtLoadingView.height)/2),Laya.timer.clear(this,this.showLazyLoading)}hideLoading(){if(console.log("hideLoading..."),this._isLoading=!1,this.txtLoadingView)this.txtLoadingView.removeSelf();else return}dispose(){this.txtLoadingView&&(this.txtLoadingView.destroy(),this.txtLoadingView.removeSelf(),this.txtLoadingView=null),this.txtLoadingView.backLayer&&(this.txtLoadingView.backLayer.destroy(),this.txtLoadingView.backLayer.removeSelf(),this.txtLoadingView.backLayer=null)}},ci=cw.getInstance()});var uw,P0,pw=_(()=>{"use strict";To();hf();Yt();yn();uw=class i{constructor(){this.account_contract=null;this.tokenId=0}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){typeof window.ethereum>"u"}async getAccountVoFromServer(){let e=await nr.requestPost("cybertron-sys-api/api/v1/account/find",{address:mt.walletAddress},!1,!1);if(e){let t=new Uo;return Object.assign(t,e),console.log("info========"+JSON.stringify(t)),t}return e}async updateProfile(e,t,r){var s=V.playerDto.sex,o=V.playerDto;let l=await nr.requestPost("wxgame/player/changeInfo",{name:e,sex:s,icon:t,country:r});return l?(o.icon=l.icon,o.country=l.country,o.createTime=l.createTime,o.name=l.name,o.sex=l.sex,o.snakeId=l.snakeId,o.skinId=l.skinId,o.maxKill=l.maxKill,o.maxAlive=l.maxAlive,o.score=l.score,o.lv=l.lv,o.club=l.club,o):null}async getTokenId(){return this.tokenId?this.tokenId:(this.tokenId=await this.account_contract.methods.tokenOfOwnerByIndex(mt.walletAddress,0).call(),this.tokenId=parseInt(this.tokenId+""),this.tokenId)}},P0=uw.getInstance()});var U0,hw,mt,yn=_(()=>{"use strict";To();ri();xt();fv();U0=uf(Ek());yv();r0();KA();aM();kM();Ei();Kt();dn();At();ws();cn();pw();cr();yi();hw=class i{constructor(){this.loginRequestInfo={time:0,randomHex:"",r:"",s:"",v:"",roleId:""};this.tonLoginInfo=null}get getloginRequestInfo(){return this.loginRequestInfo}static getInstance(){return i._instance||(i._instance=new i),i._instance}async init(){if(typeof window.ethereum>"u"||ie.Debug==2){console.log(z.getLanguage(26));return}Wt.sendCustumEvent(10),this.walletClient=tu({transport:Gc(window.ethereum)});var e,t=await i._instance.walletClient.getChainId();e=this.getChain(t),e||(e=id),this.publicClient=$h({chain:e,transport:Fh()}),this.walletClient=tu({chain:e,transport:Gc(window.ethereum)});let r=await i._instance.publicClient.getChainId();console.log("clientChainId",t,r),Wt.sendCustumEvent(12),this.registerProxy(),Wt.sendCustumEvent(17)}async registerProxy(){P0.init()}async getWalletAddress(){if(this.walletAddress)return this.walletAddress;let[e]=await this.walletClient.requestAddresses();return e}async dappLogin(){console.log("dappLogin this.walletAddress: "+this.walletAddress),Wt.sendCustumEvent(13),this.walletAddress=await this.getWalletAddress(),Wt.sendCustumEvent(14),await this.signAndLogin()}async signAndLogin(e=!1){var t=!0;let r=new Date().getTime(),s="",o="",l="",u="";if(ie.Debug!=0)t=!1;else{let f=localStorage.getItem("TOX-COOKIE-CODE"+i._instance.walletAddress);if(!e&&f){f=Rs.decode(f);let g=f.split("&");r=parseFloat(g[0]),s=g[1],o=g[2],l=g[3],u=g[4];let b=xi.checkTimeValid(r);f&&r&&b&&s&&o&&l&&u&&(t=!1),console.log("needSign: "+t)}}if(t){console.log("111");var p=qh().substring(0,32);s=tt(p,{size:32}),r=new Date().getTime();let g=this.walletAddress+s+r,b=new U0.default("SHA-256","TEXT",{encoding:"UTF8"});b.update(g);let v=b.getHash("HEX");if(console.log("进入签名",1),this.walletClient)try{let w=await this.walletClient.signMessage({account:this.walletAddress,message:v});console.log("签名结束",1);let k=w.substring(2);o="0x"+k.substring(0,64),l="0x"+k.substring(64,128),u="0x"+k.substring(128,130)}catch{et.notice(z.getLanguage(62)),Laya.timer.once(1e3,this,this.signAndLogin,[e]);return}}this.loginRequestInfo.time=r,this.loginRequestInfo.randomHex=s,this.loginRequestInfo.r=o,this.loginRequestInfo.s=l,this.loginRequestInfo.v=u,this.loginRequestInfo.roleId=this.walletAddress,Wt.sendCustumEvent(15);var h=Rs.encode(r+"&"+s+"&"+o+"&"+l+"&"+u);localStorage.setItem("TOX-COOKIE-CODE"+i._instance.walletAddress,h),De.connect()}async main(){let e=$h({chain:ou,transport:Fh()}),t=tu({chain:ou,transport:Gc(window.ethereum)}),[r]=await t.requestAddresses(),s=await t.signMessage({account:r,message:"Hello world!"}),o=await e.verifyMessage({address:r,message:"Hello world!",signature:s});console.log("valid: "+o);let l=await fetch("http://localhost:3000/api/login",{method:"POST",body:JSON.stringify({address:t.account.address,signature:s})})}async refreshToken(){let e,t=localStorage.getItem("TOX-COOKIE-CODE"+i._instance.walletAddress);t=Rs.decode(t);let r=t.split("&"),s=parseFloat(r[0]),o=r[1],l=r[2],u=r[3],p=r[4];if(s&&o&&l&&u&&p){let h={debug:ie.Debug,address:this.walletAddress,time:s,randomHex:o,r:l,s:u,v:p};e=await nr.requestPost("wxgame/player/getJwt",h,!1,!1).catch(f=>{}),e&&localStorage.setItem("TOX-COOKIE"+i._instance.walletAddress,e.loginToken)}return e}async checkNickName(e){let t={name:e,address:this.walletAddress};return await nr.requestPost("wxgame/player/nameCheck",t,!1,!1).catch(s=>{ci.hideLoading(),console.log("checkResult 失败")})}waitGetAccount(){Laya.timer.loop(2e3,this,this.getAcccount)}async getAcccount(){console.log("getAcccount");var e=!0;let t=new Date().getTime(),r="",s="",o="",l="";if(ie.Debug!=0)e=!1;else{let f=localStorage.getItem("TOX-COOKIE-CODE"+i._instance.walletAddress);f=Rs.decode(f);let g=f.split("&");t=parseFloat(g[0]),r=g[1],s=g[2],o=g[3],l=g[4],t&&r&&s&&o&&l&&(e=!1),console.log("needSign: "+e)}if(e){var u=qh().substring(0,32);r=tt(u,{size:32}),t=new Date().getTime();let g=this.walletAddress+r+t,b=new U0.default("SHA-256","TEXT",{encoding:"UTF8"});b.update(g);let v=b.getHash("HEX");console.log("进入签名",1);let w=await this.walletClient.signMessage({account:this.walletAddress,message:v});console.log("签名结束",1);let k=w.substring(2);s="0x"+k.substring(0,64),o="0x"+k.substring(64,128),l="0x"+k.substring(128,130)}let p,h={address:this.walletAddress,time:t,randomHex:r,r:s,s:o,v:l};if(p=await nr.requestPost("wxgame/player/getAccount",h,!1,!1).catch(f=>{}),p){Laya.timer.clear(this,this.getAcccount);let f=p.playerDto;localStorage.setItem("TOX-COOKIE"+i._instance.walletAddress,p.loginToken),L.event(A.EVENT_WAIT_PLAYERINFO,f)}}async createAcccount(e,t,r,s,o){console.log("createAcccount");var l=!0;let u=new Date().getTime(),p="",h="",f="",g="";if(ie.Debug!=0)l=!1;else{let k=localStorage.getItem("TOX-COOKIE-CODE"+i._instance.walletAddress);k=Rs.decode(k);let E=k.split("&");u=parseFloat(E[0]),p=E[1],h=E[2],f=E[3],g=E[4],u&&p&&h&&f&&g&&(l=!1)}if(l){var b=qh().substring(0,32);p=tt(b,{size:32}),u=new Date().getTime();let E=this.walletAddress+p+u,F=new U0.default("SHA-256","TEXT",{encoding:"UTF8"});F.update(E);let O=F.getHash("HEX");if(console.log("进入签名",1),this.walletClient){let H=await this.walletClient.signMessage({account:this.walletAddress,message:O});console.log("签名结束",1);let Y=H.substring(2);h="0x"+Y.substring(0,64),f="0x"+Y.substring(64,128),g="0x"+Y.substring(128,130)}}var v=x.snake.socket.MessageType.MSG_USER_REGISTER,w=x.snake.socket.CS_USER_REGISTER.fromObject({icon:r,userName:e,country:s,walletAddr:this.walletAddress,invite:o,time:this.loginRequestInfo.time,randomHex:this.loginRequestInfo.randomHex,r:this.loginRequestInfo.r,s:this.loginRequestInfo.s,v:this.loginRequestInfo.v});return De.send(v,w),null}async newAllowanceAddress(e,t){let r=i._instance.walletAddress,s=e;try{if(console.log("查看是否已经授权, owner:"+r+", spender:"+s+", publicClient.chain.id:"+this.publicClient.chain.id),t==0)return!0;let o=await i._instance.publicClient.readContract({address:t,abi:pr.TOKEN_ERC20ABI,functionName:"allowance",args:[r,s]});if(o=="0"){console.log("未授权，进行授权, owner:"+r+", allowance:"+o+", walletClient.chain.id:"+this.walletClient.chain.id);let l=await i._instance.walletClient.writeContract({address:t,abi:pr.TOKEN_ERC20ABI,functionName:"approve",args:[s,"100000000000000000000000000000000000000000000000"],account:r});console.log("授权hash============"+l);let u=await i._instance.publicClient.waitForTransactionReceipt({hash:l});return console.log(`Tx with hash: ${l}`,u),u&&u.status=="success"?(console.log(`Tx successful with hash: ${l}`),!0):!1}else return console.log("已授权, owner:"+r+", allowance:"+o),!0}catch(o){if(console.log("授权错误====》",o),o instanceof Error){let l=o.message;console.log("授权错误====》",l)}}}async allowanceAddressByTokenAddress(e,t){let r=new window.web3.eth.Contract(pr.TOKEN_ERC20ABI,t);return await r.methods.allowance(this.walletAddress,e).call()=="0"&&(console.log("ERC20 allowance!"),await r.methods.approve(e,"100000000000000000000000000000000000000000000000").send({from:this.walletAddress},(o,l)=>{if(o)return ci.hideLoading(),!1})),!0}async getERC20TokenBalance(e){return window.ethereum,await new window.web3.eth.Contract(pr.TOKEN_ERC20ABI,e).methods.balanceOf(this.walletAddress).call()}async getBalance2(e,t=void 0){let r=this.walletAddress;t&&(r=t);let s;return!e||e==pr.ADDRESS0?s=await i._instance.publicClient.getBalance({address:r}):s=await this.publicClient.readContract({address:e,abi:pr.TOKEN_ERC20ABI,functionName:"balanceOf",args:[r]}),console.log("getBalance2 publicClient.chain.id:"+this.publicClient.chain.id,"代币地址",e,"余额：",s),s}async getBankBalance(e,t,r){if(r=="WBNB"){let s=await i._instance.publicClient.getBalance({address:t});if(s)return s}else{let s=this.getBalance2(e,t);if(s)return s}}async switchChain(e){var t=this.getChainName(e);let r=await i._instance.walletClient.getChainId();if(ie.isInto&&Laya.Browser.onIOS&&r!==e)return et.notice(z.getLanguage(37,t)),!1;try{console.log("switchChain id:"+e),await this.walletClient.switchChain({id:e})}catch(s){if(console.log(s),s instanceof Error){let o=s.message;console.log("切换错误====》",o)}return et.notice(z.getLanguage(37,t)),!1}return await this.resetPublicAndWallet(e),!0}async addChain(e){console.log(e);var t=this.getChain(e);return await this.walletClient.addChain({chain:t})}getChain(e){var t=null;switch(e){case id.id:t=id;break;case g0.id:t=g0;break;case ou.id:t=ou;break;case k0.id:t=k0;break;case E0.id:t=E0;break;case b0.id:t=b0;break;case y0.id:t=y0;break;case I0.id:t=I0;break;case w0.id:t=w0;break;case _0.id:t=_0;break;case x0.id:t=x0;break}return t}getChainName(e){var t="",r=this.getChain(e);return r&&(t=r.name),t}async resetPublicAndWallet(e){console.log("resetPublicAndWallet chain:"+e);var t=this.getChain(e);await i._instance.reInitPublicClient(t),await i._instance.reInitWalletClient(t)}reInitPublicClient(e){console.log("reInitPublicClient chain:"+e),this.publicClient=$h({chain:e,transport:Fh()})}reInitWalletClient(e){console.log("reInitWalletClient chain:"+e),this.walletClient=tu({chain:e,transport:Gc(window.ethereum)})}async getAuthStatus(){let e=i._instance.walletAddress;try{return await i._instance.publicClient.readContract({address:pr.SAT_ADDRESS,abi:pr.SAT_ABI,functionName:"getAuthStatus",args:[e]})}catch(t){if(console.log("授权错误====》",t),t instanceof Error){let r=t.message;console.log("授权错误====》",r)}}}async connectTonWallet(){console.log("connectTonWallet: 开始连接TON钱包");let e=new _l({manifestUrl:"https://snake.cryptoarena.io/tonconnect-manifest2.json"}),t=e.onStatusChange(l=>{if(console.log("钱包状态变化:",l),l&&l.account){let u=l.account.address;console.log("钱包地址:",u)}else console.log("钱包信息不完整或格式不符合预期",l)}),r=await e.getWallets();console.log("connector",e),console.log("unsubscribe",t),console.log("walletsList===========》",r);let s={universalLink:"https://t.me/wallet?attach=wallet",bridgeUrl:"https://walletbot.me/tonconnect-bridge/bridge"},o=e.connect(s);console.log("universalLink",o)}async signTonMessage(e,t){try{let r=crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2),s={method:"ton_signMessage",params:{text:`登录验证: ${r}`}},o=await e.sendRequest(s);console.log("签名结果:",o),alert("签名成功，已完成登录验证"),this.saveTonSignatureResult(t,r,o)}catch(r){console.error("签名失败:",r),alert("签名失败: "+r.message)}}saveTonSignatureResult(e,t,r){this.tonLoginInfo={address:e,message:t,signature:r,timestamp:Date.now()},console.log("已保存TON签名信息:",this.tonLoginInfo)}getTonLoginInfo(){return this.tonLoginInfo}},mt=hw.getInstance()});var lR,zr,nr,To=_(()=>{"use strict";ur();pu();yn();yi();lR=Laya.HttpRequest,zr=class zr{static requestGet(e,t,r=!1){return new Promise((s,o)=>{var l=Laya.Pool.getItem("HttpRequest");l||(l=new lR),l.http.timeout=2e3,l.on(Laya.Event.COMPLETE,null,g),l.on(Laya.Event.ERROR,null,b),l.http.onreadystatechange=()=>{if(l.http.readyState===XMLHttpRequest.DONE){var w=l.http.status;w>=200&&w<400||(o(),v())}};let u=localStorage.getItem("TOX-COOKIE"+mt.walletAddress),p=["Content-Type","application/json"];u&&(p=[...p,"Authorization",u]);let h;e.startsWith("http")?h=e+f(t):h=zr.httpRoot+"/"+e+f(t),zr.httpRoot!="https://api.phantomarena.co"&&console.log("REQUEST_GET "+h,1),l.send(h,null,"get","json",p);function f(w){if(typeof w=="string")return w;let k="";for(let E in w)k+="&"+E+"="+w[E];return k}function g(w){r?w.code==="0"?s(w.data):(Cr.showErrorWord(parseInt(w.code)),o(w.code)):s(w),v()}function b(w,k){o(w),v()}function v(){l.off(Laya.Event.COMPLETE,null,g),l.off(Laya.Event.ERROR,null,b),Laya.Pool.recover("HttpRequest",l)}})}static startHeart(){Laya.stage.on(Laya.Event.BLUR,this,()=>{this.stopHeartInStage=!0,console.log("失去焦点, 停止心跳")}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.stopHeartInStage=!1,console.log("获取焦点, 开始心跳")}),Laya.timer.loop(3e3,this,this.onHeart)}static async onHeart(){console.log("onHeart")}static requestPost(e,t,r=!1,s=!0,o=!1){let l=localStorage.getItem("TOX-COOKIE"+mt.walletAddress);return r&&!l?[]:new Promise((u,p)=>{var h=Laya.Pool.getItem("HttpRequest");h||(h=new lR),h.http.timeout=1e4,h.once(Laya.Event.COMPLETE,null,b),h.once(Laya.Event.ERROR,null,v);let f=[];l&&s&&(f=[...f,"Authorization",l]);var g=zr.seq+1;zr.seq=g,e=="wxgame/sys/ping"?ie.showHeartLog&&console.log(ye.GetLogTime+" "+g+" >>> HTTP_POST "+zr.httpRoot+"/"+e+" "+JSON.stringify(t),l):console.log(ye.GetLogTime+" "+g+" >>> HTTP_POST "+zr.httpRoot+"/"+e+" "+JSON.stringify(t),l),e.startsWith("http")?h.send(e,t,"post","json",f):h.send(zr.httpRoot+"/"+e,t,"post","json",f);async function b(k){if(e=="wxgame/sys/ping"?ie.showHeartLog&&console.log(ye.GetLogTime+" "+g+" <<< hTTP_RCV data: "+JSON.stringify(k),1):console.log(ye.GetLogTime+" "+g+" <<< hTTP_RCV data: "+JSON.stringify(k),1),k.errorCode==0||k.errorCode==="0")u(k);else{if(k.errorCode===18)ye.titickNotEnought();else if(k.errorCode===26)ye.RemError();else if(k.errorCode!==29)if(k.errorCode===30)ye.alertYes(Cr.get(k.errorCode));else if(k.errorCode===32)ye.alertYes(Cr.get(k.errorCode));else if(k.errorCode===2||k.errorCode===21)ye.alertNoAll(Cr.get(k.errorCode));else if(k.errorCode===5)if(ie.Debug==0){localStorage.setItem("TOX-COOKIE"+mt.walletAddress,"");var E=await mt.refreshToken();E&&zr.requestPost(e,t,r,s)}else localStorage.setItem("TOX-COOKIE"+mt.walletAddress,""),Cr.showErrorWord(parseInt(k.errorCode));else k.errorCode===17?ie.Debug==0?(localStorage.setItem("TOX-COOKIE"+mt.walletAddress,""),mt.signAndLogin(),Cr.showErrorWord(parseInt(k.errorCode))):(localStorage.setItem("TOX-COOKIE"+mt.walletAddress,""),Cr.showErrorWord(parseInt(k.errorCode))):k.errorCode===51?ye.commTipWithYes(Cr.get(k.errorCode)):o||Cr.showErrorWord(parseInt(k.errorCode),k.errorParams);p(k.errorCode)}w()}function v(k,E){console.log("errorHandler data: "+k,1),o||Cr.showErrorWord(500),p(k),w()}function w(){h.off(Laya.Event.COMPLETE,null,b),h.off(Laya.Event.ERROR,null,v),Laya.Pool.recover("HttpRequest",h)}})}static async pingServer(e){return new Promise(t=>{if(!e){t(9999);return}e.startsWith("@")&&(e=e.substring(1));let r=e;r.includes("?")&&(r=r.split("?")[0]);let s=()=>{let l=Date.now(),u=!1,p=new XMLHttpRequest;p.onreadystatechange=function(){if(!u&&p.readyState>=1&&p.readyState<4){let h=Date.now()-l;h>0&&(u=!0,t(h))}},p.onload=function(){if(!u){let h=Date.now()-l;u=!0,t(h>0?h:1)}},p.onerror=function(h){if(!u){let f=Date.now()-l;u=!0,t(f>0?f:500)}},p.timeout=5e3,p.ontimeout=function(){u||(u=!0,t(5e3))};try{let h=Date.now(),f=Math.floor(Math.random()*1e4),g=`${r}?_t=${h}&r=${f}`;p.open("GET",g,!0),setTimeout(()=>{try{p.send()}catch{u||(u=!0,t(9999))}},10)}catch{u||(u=!0,t(9999))}setTimeout(()=>{u||(u=!0,t(9999))},5500)};(()=>{let l=Date.now(),u=!1,p=new Image;p.onload=function(){if(!u){let b=Date.now()-l;u=!0,t(b>0?b:1)}},p.onerror=function(){if(!u){let b=Date.now()-l;u=!0,b>0?t(b):s()}},setTimeout(()=>{u||(u=!0,s())},3e3);let h=Date.now(),f=Math.floor(Math.random()*1e4),g=`${r}?_t=${h}&r=${f}&type=image`;p.src=g})()})}};zr.httpRoot=getServer(),zr.needHeart=!0,zr.stopHeartInRoom=!1,zr.stopHeartInStage=!1,zr.lastPreContractstartRoomId=-1,zr.lastPrecontractReadyRoomId=-1,zr.seq=0;nr=zr});var _t,ye,ur=_(()=>{"use strict";Xp();Rr();Fa();dv();pu();At();cn();Yt();cr();Ot();Pr();yi();To();_t=class _t{static getColorText(e,t="#FFFF00"){return'<font color="'+t+'">'+e+"</font>"}static getChildByName(e,t,r="name"){if(e&&e.hasOwnProperty(r)&&e[r]==t)return e;let s=e;if(s){let o=s.numChildren,l;for(let u=0;u<o;++u)if(l=s.getChildAt(u),l instanceof Laya.Sprite&&(l=_t.getChildByName(l,t,r)),l&&l.hasOwnProperty(r)&&l[r]==t)return l}return null}static getChildByAttri(e,t){if(e&&e.hasOwnProperty(t)&&e[t])return e[t];let r=e;if(r){let s=r.numChildren,o;for(let l=0;l<s;++l)if(o=r.getChildAt(l),o instanceof Laya.Sprite){if(o=_t.getChildByAttri(o,t),o)return o}else if(o&&o.hasOwnProperty(t)&&o[t])return o[t]}return null}static logs(e,t=0,r=!0,s=16777215){if(e=_t.GetLogTime+" "+e,r)switch(t){case 0:s=16777215;break;case 1:s=16777215;break;case 2:s=16711680;break;case 3:s=16777215;break;case 4:s=13434777;break;case 5:s=16742399;break}}static get GetLogTime(){let e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()}static get GRAY(){return _t._GRAY||(_t._GRAY=new Laya.ColorFilter([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])),_t._GRAY}static get GRAY1(){if(!_t._GRAY1){let e=[.3086,.16094,.082,0,0,.2086,.26094,.082,0,0,.1086,.36094,.082,0,0,0,0,0,1,0];_t._GRAY1=new Laya.ColorFilter(e)}return _t._GRAY1}static get GLOW(){return _t._GLOW||(_t._GLOW=new Laya.GlowFilter("#ffffff",12,0,0)),_t._GLOW}static get YELLOWGLOW(){return _t._YELLOWGLOW||(_t._YELLOWGLOW=new Laya.GlowFilter("#ffff00",10,0,0)),_t._YELLOWGLOW}static get BLUR(){if(!_t._BLUR){let e=new Laya.BlurFilter;e.strength=5,_t._BLUR=[e]}return _t._BLUR}static get isParseWWhiteUser(){return _t._isParseWWhiteUser}static get isWhiteName(){return ie.isWhiteList}static itemListHandler(e,t){let r=e.dataSource,s=r[0],o=r[1],l=2,u=e.skin;u&&(u.indexOf("xinSmall")!=-1?l=1:u.indexOf("xinBig")!=-1&&(l=3));let p;l==1?p="common/common_clip/clip_xinSmall"+o+".png":l==3?p="common/common_clip/clip_xinBig"+o+".png":p="common/common_clip/clip_xinMiddle"+o+".png",e.skin=p,e.dataSource=s}static setStarList(e,t){e.renderHandler=new Laya.Handler(_t,_t.itemListHandler),e.dataSource=t}static get BLACK(){return _t._BLACK||(_t._BLACK=new Laya.ColorFilter,_t._BLACK.setColor("#000000")),_t._BLACK}static get YELLOW(){return _t._YELLOW||(_t._YELLOW=new Laya.ColorFilter,_t._YELLOW.setColor("#ffe64b")),_t._YELLOW}static get YELLOW1(){return _t._YELLOW1||(_t._YELLOW1=new Laya.ColorFilter,_t._YELLOW1.setColor("#fee14e")),_t._YELLOW1}static get RED1(){return _t._RED1||(_t._RED1=new Laya.ColorFilter,_t._RED1.setColor("#ff4537")),_t._RED1}static get BLUE(){return _t._BLUE||(_t._BLUE=new Laya.ColorFilter,_t._BLUE.setColor("#2f72a7")),_t._BLUE}static setColor(e="#13e2cf"){let t=new Laya.ColorFilter;return t.setColor(e),t}static heroNotEnought(e=1286){Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(e),pt.YES,null)}static popTip(e){Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(e),pt.YES,null)}static onGetHero(e=-1){bt.setCurrentScene(Re.M_SCENE_SHOP,[1,e])}static popToMain(){var e="A network error occurred. Please check your connection and try again.";Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(e),pt.YES,Laya.Handler.create(this,this.setToMainScene))}static setToMainScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}static isFightHero(e){return V.playerDto.fightHeroPk==e||e==V.playerDto.newFightHeroPk}static titickNotEnought(e=-1){var t=2,r=re.getSheetDataByMultiKey(re.m_dicShopMulDic,[t,e]);if(r)Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(1060),pt.CANCEL,Laya.Handler.create(this,this.onGetTitck,[e]));else{var s=re.m_dicItems.get(e);s?et.notice(z.getLanguage(42,z.getLanguage(s.name))):Cr.showErrorWord(18)}}static RemError(){Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(35),pt.YES,null)}static alertYes(e){Fr.AlertByType(pt.BASEALERTVIEW,e,pt.YES,null)}static TransactionErrorTip(){Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(41),pt.YES,null)}static alertNoAll(e){Fr.AlertByType(pt.BASEALERTVIEW,e,pt.NO_ALL)}static onGetTitck(e=-1){bt.setCurrentScene(Re.M_SCENE_SHOP,[2,e])}static moneyNotEnought(e=Gt.TYPE_TOX){var t=re.m_dicItems.get(e),r=z.getLanguage(t.name);et.notice(z.getLanguage(36,r))}static onGetMoney(e){bt.setCurrentScene(Re.M_SCENE_ASSET,[1,e])}static openSquidGame(){Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(6056),pt.CANCEL,Laya.Handler.create(this,this.onOpenSquidGame))}static onOpenSquidGame(){window.location.href="https://squidgamefi.io/?invitationCode=2oi"}static onOpenSwapView(){window.open("https://swap.phantomarena.ai","_blank")}static otherLogin(){Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(32),pt.YES,Laya.Handler.create(this,Wt.reload))}static netError(){Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(44),pt.YES,Laya.Handler.create(this,Wt.reload))}static popMatchErrorToMain(){if(!this.hasPopMatchErrorToMain){var e="A network error occurred. Please check your connection and try again.";Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(e),pt.YES,Laya.Handler.create(this,this.clickPopMatchErrorToMain))}}static clickPopMatchErrorToMain(){this.setToMainScene(),this.hasPopMatchErrorToMain=!1}static commTipWithYes(e){Fr.AlertByType(pt.BASEALERTVIEW,e,pt.YES)}static shakeSprs(e,t=2,r=4,s=32){if(_t.isShake)return;_t.isShake=!0;let o=e.length,l=[];for(let f=0;f<o;f++){let g=e[f];l.push([g.x,g.y])}let u=[0,0],p=0,h=function(){u[p%2]=p++%4<2?0:r,p>t*4+1&&(Laya.timer.clear(Laya.stage,h),p=0,_t.isShake=!1);for(let f=0;f<o;f++){let g=e[f];g.x=u[0]+l[f][0],g.y=u[1]+l[f][1]}};Laya.timer.loop(s,Laya.stage,h)}static shake(e,t=2,r=4,s=32){if(_t.isShake)return;_t.isShake=!0;let o=new Laya.Point(e.x,e.y),l=[0,0],u=0,p=function(){l[u%2]=u++%4<2?0:r,u>t*4+1&&(Laya.timer.clear(Laya.stage,p),u=0,_t.isShake=!1),e.x=l[0]+o.x,e.y=l[1]+o.y};Laya.timer.loop(s,Laya.stage,p)}static async getNpcNames(e=1){var t=z.getLanTypeById(V.m_strLanguage);t.indexOf("-")!=-1&&(t=t.split("-")[0]);var r=`https://wss-room-sg.queengame.io/get-names?lang=${t}&count=${e}`,s=await nr.requestGet(r);return console.log("getNpcNames: ",s),s}};_t._isParseWWhiteUser=!1,_t.isWWhiteUser=!1,_t.hasPopMatchErrorToMain=!1,_t.isShake=!1;ye=_t});var Vt,gd=_(()=>{"use strict";Vt=class extends Laya.Event{constructor(){super()}};Vt.EVENT_GLOBAL_ERROR_CODE="EVENT_GLOBAL_ERROR_CODE",Vt.EVENT_HALL_SOCKET_OPEN="EVENT_HALL_SOCKET_OPEN",Vt.EVENT_HALL_SOCKET_ERROR="EVENT_HALL_SOCKET_ERROR",Vt.EVENT_HALL_SOCKET_CLOSE="EVENT_HALL_SOCKET_CLOSE",Vt.EVENT_HALL_STOP_HEART="EVENT_HALL_STOP_HEART",Vt.EVENT_HALL_SHOW_TIP_DELAY="EVENT_HALL_SHOW_TIP_DELAY",Vt.EVENT_ROOM_SOCKET_OPEN="EVENT_ROOM_SOCKET_OPEN",Vt.EVENT_ROOM_SOCKET_ERROR="EVENT_ROOM_SOCKET_ERROR",Vt.EVENT_ROOM_SOCKET_CLOSE="EVENT_ROOM_SOCKET_CLOSE",Vt.EVENT_ROOM_STOP_HEART="EVENT_ROOM_STOP_HEART",Vt.EVENT_ROOM_SHOW_TIP_DELAY="EVENT_ROOM_SHOW_TIP_DELAY",Vt.EVENT_ROOM_HEART_BEAT="EVENT_ROOM_HEART_BEAT"});var R,Yi=_(()=>{"use strict";R=class{};R.FindView="FindView",R.FindEndView="FindEndView",R.FindAskDialog="FindAskDialog",R.FindRankUpDialog="FindRankUpDialog",R.QuickTipDialog="QuickTipDialog",R.QuickEndView="QuickEndView",R.QuickShareView="QuickShareView",R.QuickOperatorDialog="QuickOperatorDialog",R.MainView="MainView",R.RoleDialog="RoleDialog",R.RemGetDialog="RemGetDialog",R.QuickRechargeDialog="QuickRechargeDialog",R.CreateNameDialog="CreateNameDialog",R.DailyTaskDialog="DailyTaskDialog",R.ActivityTaskDialog="ActivityTaskDialog",R.ShareDialog="ShareDialog",R.InvitationCenterDialog="InvitationCenterDialog",R.DailyTaskDrawDialog="DailyTaskDrawDialog",R.GuideView="GuideView",R.GuideDialogView="GuideDialogView",R.ShareView="ShareView",R.MainTopView="MainTopView",R.GetMoreDialog="GetMoreDialog",R.ShopView="ShopView",R.ItemGetDialog="ItemGetDialog",R.EquipStarUpDialog="EquipStarUpDialog",R.RewardGetDialog="RewardGetDialog",R.AssetNewView="AssetNewView",R.GetTitleDialog="GetTitleDialog",R.NewFunUnLockDialog="NewFunUnLockDialog",R.DialogView="DialogView",R.MallView="MallView",R.MallCardView="MallCardView",R.MallBuyDialog="MallBuyDialog",R.FittingUiView="FittingUiView",R.TaskDialog="TaskDialog",R.CommentDialog="CommentDialog",R.PotraitChangDialog="PotraitChangDialog",R.ClothespressView="ClothespressView",R.ItemSellDialog="ItemSellDialog",R.ItemInfoDialog="ItemInfoDialog",R.OnlineAward="OnlineAward",R.MaillView="MailView",R.MailSendView="MailSendView",R.GameSettingDialog="GameSettingDialog",R.GamesettingSoundView="GamesettingSoundView",R.GameSettingLanguageDialog="GameSettingLanguageDialog",R.GameSettingVersionDialog="GameSettingVersionDialog",R.FriendMainView="FriendMainView",R.FriendSearchView="FriendSearchView",R.FriendGetRewardDialog="FriendGetRewardDialog",R.FriendRewardDialog="FriendRewardDialog",R.PreLoadingView="PreLoadingView",R.RechargeDialog="RechargeDialog",R.WalletChooseHeroDialog="WalletChooseHeroDialog",R.EmployInfoDialog="EmployInfoDialog",R.WalletChoosePropsDialog="WalletChoosePropsDialog",R.FirstRechargeDialog="FirstRechargeDialog",R.FirstWeekRechargeView="FirstWeekRechargeView",R.ClientErrView="ClientErrView",R.RoleUpgradeView="RoleUpgradeView",R.ActiveRechargeView="ActiveRechargeView",R.SmallSaleView="SmallSaleView",R.RechargeSelectDialog="RechargeSelectDialog",R.FBLikeView="FBLikeView",R.TurnSuitPreView="TurnSuitPreView",R.SlotMachineView="SlotMachineView",R.SlotMachineRewardPreDialog="SlotMachineRewardPreDialog",R.SlotMachineResultDialog="SlotMachineResultDialog",R.GashaponView="GashaponView",R.GashaponRewardView="GashaponRewardView",R.ActivityRankRewardView="ActivityRankRewardView",R.AddRechargeView="AddRechargeView",R.CupMatchStartDialog="CupMatchStartDialog",R.CupMatchEndDialog="CupMatchEndDialog",R.CreateLoginView="CreateLoginView",R.SelectHeadDialog="SelectHeadDialog",R.RoleInfoDialog="RoleInfoDialog",R.SelectHeroDialog="SelectHeroDialog",R.CreateSubWalletDialog="CreateSubWalletDialog",R.WalletDialog="WalletDialog",R.WalletTransferDialog="WalletTransferDialog",R.CardPayView="CardPayView",R.SwapView="SwapView",R.GamesettingView="GamesettingView",R.GameSettingGameAccountView="GameSettingGameAccountView",R.NoticeDialog="NoticeDialog",R.HelpDialog="HelpDialog",R.ImgDialog="ImgDialog",R.ChampDetailDialog="ChampDetailDialog",R.ChampRecordDialog="ChampRecordDialog",R.GuildInfoDialog="GuildInfoDialog",R.CreateUnionDialog="CreateUnionDialog",R.UnionInfoView="UnionInfoView",R.UnionEarningView="UnionEarningView",R.UnionRevenueDetailDialog="UnionRevenueDetailDialog",R.UnionSetRevenueDialog="UnionSetRevenueDialog",R.UnionBattleRecordDialog="UnionBattleRecordDialog",R.UnionRevenueRecordDialog="UnionRevenueRecordDialog",R.LoadDialog="LoadDialog",R.ChangeHeadDialog="ChangeHeadDialog",R.CreateRoomDialog="CreateRoomDialog",R.CreateRentalDialog="CreateRentalDialog",R.MyLeasedDialog="MyLeasedDialog",R.MyRentedDialog="MyRentedDialog",R.MyRentalBuyDialog="MyRentalBuyDialog",R.BuyTicketDialog="BuyTicketDialog",R.EnterRoomView="EnterRoomView",R.MatchEndRankView="MatchEndRankView",R.MatchEndTeamRankView="MatchEndTeamRankView",R.MatchReadyView="MatchReadyView",R.MatchEndView="MatchEndView",R.MatchEndRewardTokensDialog="MatchEndRewardTokensDialog",R.HeroGetDialog="HeroGetDialog",R.InputPwdDialog="InputPwdDialog",R.RoomInfoDialog="RoomInfoDialog",R.MailDialog="MailDialog",R.TeamCreateShareDialog="TeamCreateShareDialog",R.TeamShareDialog="TeamShareDialog",R.TeamJoinUsingDialog="TeamJoinUsingDialog",R.MyTeamDialog="MyTeamDialog",R.TeamInfoDialog="TeamInfoDialog",R.MyFriendDialog="MyFriendDialog",R.BuyPropDialog="BuyPropDialog",R.UnionAttrView="UnionAttrView",R.UnionAttrLvUpDialog="UnionAttrLvUpDialog",R.UnionAttributeDetailsDialog="UnionAttributeDetailsDialog",R.NoServerView="NoServerView",R.UnionMemberMoreDialog="UnionMemberMoreDialog",R.HeroUpgradeDialog="HeroUpgradeDialog",R.HeroDetailDialog="HeroDetailDialog",R.SkillTipDialog="SkillTipDialog",R.TransferRecordDialog="TransferRecordDialog",R.JoinRoomDialog="JoinRoomDialog",R.SnakeUpgradeDialog="SnakeUpgradeDialog",R.SnakeUpgradeSuccessDialog="SnakeUpgradeSuccessDialog",R.PlayerUpgradeSuccessDialog="PlayerUpgradeSuccessDialog",R.Knapsack="Knapsack",R.KnapsackTipDialog="KnapsackTipDialog",R.HeroFormationDialog="HeroFormationDialog",R.SignInDialog="SignInDialog",R.InviteRewardDialog="InviteRewardDialog",R.ChallengLoseDialog="ChallengLoseDialog",R.ChallengWinDialog="ChallengWinDialog",R.ChallengBossDialog="ChallengBossDialog",R.ThirbleDropDialog="ThirbleDropDialog",R.LevelDropDialog="LevelDropDialog",R.UseCardDialog="UseCardDialog",R.ArenaView="ArenaView",R.MyBookingView="MyBookingView",R.ArenaLoseDialog="ArenaLoseDialog",R.ArenaBattleDialog="ArenaBattleDialog",R.ArenaWinDialog="ArenaWinDialog",R.ArenaWarNotesView="ArenaWarNotesView",R.ArenaRuleDialog="ArenaRuleDialog",R.EquipSelectDialog="EquipSelectDialog",R.EquipDetailDialog="EquipDetailDialog",R.HireDetailDialog="HireDetailDialog",R.ProxyDetailDialog="ProxyDetailDialog",R.WithDrawRecordDialog="WithDrawRecordDialog",R.NodeRevenueRecordDialog="NodeRevenueRecordDialog",R.RentalRecordDialog="RentalRecordDialog",R.PrivateChatDialog="PrivateChatDialog",R.AirdropRecordDialog="AirdropRecordDialog",R.ActivityInfoDialog="ActivityInfoDialog",R.CharacterStarDialog="CharacterStarDialog",R.LastDrawDialog="LastDrawDialog",R.IgoPageView="IgoPageView",R.IgoJoinDialog="IgoJoinDialog",R.IgoRecordDialog="IgoRecordDialog",R.PveChoosePropsDialog="PveChoosePropsDialog",R.ReferralDialog="ReferralDialog",R.ReferralL2Dialog="ReferralL2Dialog",R.TotalBattlesDialog="TotalBattlesDialog",R.DepositDialog="DepositDialog",R.WithdrawDialog="WithdrawDialog",R.CreateClubDialog="CreateClubDialog",R.CreateClubRoomDialog="CreateClubRoomDialog",R.SettingRateDialog="SettingRateDialog",R.ChangeClubHeadDialog="ChangeClubHeadDialog",R.JoinClubRoomDialog="JoinClubRoomDialog"});var Pe,Ni=_(()=>{"use strict";yi();Yt();Kt();ur();Pe=class i{static encodeMessage(e,t,r){var s=i.createHeadMessage(e,r),o=i.createMessageBase(s,t),l=o.serializeBinary(),u=l.length,p=new Uint8Array([(u&4278190080)>>>24,(u&16711680)>>>16,(u&65280)>>>8,(u&255)>>>0]),h=new Uint8Array(p.byteLength+l.byteLength);return h.set(new Uint8Array(p),0),h.set(new Uint8Array(l),p.byteLength),h}static decodeMessage(e,t){var r=new DataView(e,t+0,t+4).getInt32(0,!1),s=t+4+r,o=e.slice(t+4,t+4+r),l=x.snake.socket.CMsgBase.deserializeBinary(o);return[l,s]}static createHeadMessage(e,t,r,s){t||(r=!0),!s&&V.playerDto&&(s=V.playerDto.pid);var o=x.snake.socket.CMsgHead.fromObject({msgtype:e,msgcode:1,roleId:s});return o}static createMessageBase(e,t){var r=x.snake.socket.CMsgBase.fromObject({msghead:e,msgbody:t});return r}static getMsgBody(e,t=null){var r=null,s=e.msghead.msgtype,o=e.msghead.msgcode;return t||(t=Laya.ClassUtils.getClass(s+"")),t?(r=t.deserializeBinary(e.msgbody).toObject(),ie.Debug==2&&console.log(ye.GetLogTime,"[DataUtil]  ------<<<<<<<< RECV CMD:"+s+", CODE:",o+", DATA:",r)):console.warn(ye.GetLogTime,"[DataUtil]  ------<<<<<<<< RECV CMD:"+s+", CODE:",o+", className解析失败!"),r}}});var eo,dw=_(()=>{"use strict";eo=class{}});var Sl,mw=_(()=>{"use strict";Sl=class{}});var rn,fw,wt,mn=_(()=>{"use strict";jt();rn=class rn{constructor(){this._m_bPlayMusic=!0;this._m_bPlayeSound=!0;this._musicVolume=1;this._soundVolume=1;this.soundName_bg="bgm";this.soundName_hit="hit.mp3";this.soundName_snakeBuy="snakeBuy.mp3";this.soundName_snakeUpdate="snakeUpdate.mp3";this.soundName_win="result_win.mp3";this.soundName_fail="result_fail.mp3";this.soundName_kill_1="kill_1.mp3";this.soundName_kill_2="kill_2.mp3";this.soundName_kill_3="kill_3.mp3";this.soundName_kill_4="kill_4.mp3";this.soundName_kill_5="kill_5.mp3";this.soundName_eat_food_1="eat_food1.mp3";this.soundName_eat_food_2="eat_food2.mp3";this.soundName_eat_food_3="eat_food3.mp3";this.soundName_kill_die="kill_die.mp3";this.soundName32="ui32.ogg"}static getInstance(){return rn._instance||(rn._instance=new rn),rn._instance}get m_bPlayMusic(){return this._m_bPlayMusic}set m_bPlayMusic(e){this._m_bPlayMusic=e,e?this.m_strMusicURL!=null&&this.playMusicByURL(this.m_strMusicURL):this.musicChannel&&this.musicChannel.stop()}getMusicVolume(){return this._musicVolume}setMusicVolume(e){this._musicVolume=e,Laya.SoundManager.setMusicVolume(e),this.saveMusicVolume()}getSoundVolume(){return this._soundVolume}setSoundVolume(e){this._soundVolume=e,Laya.SoundManager.setSoundVolume(e),this.saveSoundVolume()}saveMusicVolume(){Laya.LocalStorage.setItem(rn.COOKIE_CF_MUSIC,this._musicVolume.toString())}saveSoundVolume(){Laya.LocalStorage.setItem(rn.COOKIE_CF_SOUND,this._soundVolume.toString())}loadVolumeSettings(){let e=Laya.LocalStorage.getItem(rn.COOKIE_CF_MUSIC);e!=null&&e!==""&&(this._musicVolume=parseFloat(e),Laya.SoundManager.setMusicVolume(this._musicVolume));let t=Laya.LocalStorage.getItem(rn.COOKIE_CF_SOUND);t!=null&&t!==""&&(this._soundVolume=parseFloat(t),Laya.SoundManager.setSoundVolume(this._soundVolume))}init(){this.loadVolumeSettings();let e=Laya.LocalStorage.getItem(rn.COOKIE_CF_MUSIC);e!=null&&e!=""&&(this.m_bPlayMusic=parseFloat(e)>0);let t=Laya.LocalStorage.getItem(rn.COOKIE_CF_SOUND);t!=null&&t!=""&&(this.m_bPlayeSound=parseFloat(t)>0),this.switchMusic(this.m_bPlayMusic),this.switchSound(this.m_bPlayeSound)}get m_bPlayeSound(){return this._m_bPlayeSound}set m_bPlayeSound(e){this._m_bPlayeSound=e}playMusicByURL(e){this.m_bPlayMusic&&(this.m_strMusicURL,this.m_strMusicURL==e&&this.musicChannel,this.m_strMusicURL=e,Laya.SoundManager.stopMusic(),this.musicChannel=Laya.SoundManager.playMusic(e,0,new Laya.Handler(this,this.onComplete)))}playMusicByName(e,t=".ogg"){let r=ge.getSoundURL(e,t);this.playMusicByURL(r)}playSound(e,t=1){this.m_bPlayeSound&&Laya.SoundManager.playSound(e,t,new Laya.Handler(this,this.onComplete))}playSoundByName(e,t=1){let r=ge.getSoundURLogg(e);this.playSound(r,t)}stopSoundByName(e){let t=ge.getSoundURLogg(e);Laya.SoundManager.stopSound(t)}switchMusic(e){let t=e?this._musicVolume:0;Laya.SoundManager.setMusicVolume(t),rn.getInstance().m_bPlayMusic=e}switchSound(e){let t=e?this._soundVolume:0;Laya.SoundManager.setSoundVolume(t),rn.getInstance().m_bPlayeSound=e}onComplete(){}};rn.COOKIE_CF_MUSIC="COOKIE_CF_MUSIC",rn.COOKIE_CF_SOUND="COOKIE_CF_SOUND";fw=rn,wt=fw.getInstance()});var ae,_r=_(()=>{"use strict";ae=class{};ae.GameConfig={debug:!1,version:"1.0.0",frameRate:"30",defaultVolume:.7,skills:{speedUp:{duration:5,cooldown:10},shield:{duration:3,cooldown:15},magnet:{duration:8,cooldown:20},invisible:{duration:4,cooldown:25}}},ae.uiZOrder={common:1e3,hint:2e3,loading:2001},ae.closeType={cancel:1,close:2,ok:3,keyback:4},ae.JoystickMODE={FIXED:1,MOVED:2},ae.JoystickEventType={JET_TOUCH_BEGIN:1,JET_TOUCH_MOVE:2,JET_TOUCH_END:3},ae.JoystickSize={JoyStickBg:80,JoyStickHandleBg:40},ae.snakeType={SELF:1,OTHERS:2},ae.roomType={1:{1:{1:2,2:3,3:4},2:5,3:6},2:7,3:1,4:8},ae.snakeSpeedRate={default:1,speedUp:2},ae.mapSize={offsetDistance:150,width:64+1280*3+64,height:60+720*4+60,offsetX:64,offsetY:60,movableWidth:3904,movableHeight:2880,defaultMapRes:{width:1280,height:720,resPath:"res/snake/manual/game/img_back.png"}},ae.collision={quadTree:{maxObjects:10,maxLevels:5},snake:{headRadius:18,bodyRadius:14},food:{radius:25,maxRadius:25}},ae.food={size:50,initCount:200,maxCount:300,spawnInterval:1e3},ae.res={snakeRingImg:"res/match2/img_ring.png"},ae.snake={defaultSpeed:6,defaultRotateSpeed:500,defaultLen:20,intervalBoneToDrawSkin:4,defaultRotation:270,defaultRadio:35/2,defaultMoveInterval:.033,defaultInvincibleTime:3,defaultShineInterval:.1,skinFlag:{head:1,body:2},initCount:20,maxCount:20,spawnInterval:1e3,aiMinLen:5,aiMaxLen:80,aiPrefix:"AI",battleCd:10*60*1e3,skinIds:[101,102,103,104,105]},ae.SYNC_CONFIG={MAX_ALLOWED_ERROR:50,CORRECTION_TIME:300,SYNC_INTERVAL:100,PREDICTION_MULTIPLIER:1.2},ae.invincibleRing={margin:2,minScale:.5}});var Ci,wl=_(()=>{"use strict";Ci=class{static clamp(e,t,r){return Math.max(t,Math.min(r,e))}static lerp(e,t,r){return e+(t-e)*r}static angleToRadian(e){return e*Math.PI/180}static radianToAngle(e){return e*180/Math.PI}static randomRange(e,t){return e+Math.random()*(t-e)}static randomInt(e,t){return Math.floor(this.randomRange(e,t+1))}static getDistance(e,t){let r=e.x-t.x,s=e.y-t.y;return Math.sqrt(r*r+s*s)}static getVecDistance(e,t){let r=e.x-t.x,s=e.y-t.y;return Math.sqrt(r*r+s*s)}static distance(e,t,r,s){let o=e-r,l=t-s;return Math.sqrt(o*o+l*l)}static getAngle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}};Ci.PI2=Math.PI*2});var aO,lO,bd,cR=_(()=>{"use strict";aO=20,lO=8,bd=class i{constructor(e,t=0,r){this.bounds=e;this.level=t;this.objects=[];this.nodes=[];this.root=r||this}insert(e){if(this.nodes.length>0){let t=this.getIndex(e);if(t!==void 0&&t!==-1){this.nodes[t].insert(e);return}}this.objects.push(e),this.shouldSplit()&&this.splitAndRedistribute()}retrieve(e){let t=new Set,r=this.getIndexes(e);if(this.nodes.length>0)for(let s of r)s===-1?this.nodes.forEach(o=>{o.retrieve(e).forEach(l=>t.add(l))}):this.nodes[s]?.retrieve(e).forEach(o=>t.add(o));return this.objects.forEach(s=>{s!==e&&t.add(s)}),Array.from(t)}refresh(){let e=[];for(let t=this.objects.length-1;t>=0;t--){let r=this.objects[t];this.isInBounds(r)||(e.push(r),this.objects.splice(t,1))}e.forEach(t=>this.root.insert(t)),this.nodes.forEach(t=>t.refresh())}remove(e){let t=this.objects.indexOf(e);if(t>-1)return this.objects.splice(t,1),!0;if(this.nodes.length>0){for(let r of this.nodes)if(r.remove(e))return!0}return!1}isInBounds(e){return i.checkBounds(this.bounds,e.getBoundingBox())}shouldSplit(){return this.nodes.length===0&&this.objects.length>aO&&this.level<lO}splitAndRedistribute(){this.split();for(let e=this.objects.length-1;e>=0;e--){let t=this.objects[e],r=this.getIndex(t);r!==void 0&&r!==-1&&(this.nodes[r].insert(t),this.objects.splice(e,1))}}split(){if(this.nodes.length>0)return;let e=this.bounds.x,t=this.bounds.y,r=this.bounds.width/2,s=this.bounds.height/2;this.nodes=[new i(new Laya.Rectangle(e+r,t+s,r,s),this.level+1,this.root),new i(new Laya.Rectangle(e,t+s,r,s),this.level+1,this.root),new i(new Laya.Rectangle(e,t,r,s),this.level+1,this.root),new i(new Laya.Rectangle(e+r,t,r,s),this.level+1,this.root)]}getIndex(e){let t=e.getBoundingBox();if(!i.checkBounds(this.bounds,t))return;let r=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,o=t.y<s,l=t.y+t.height>s,u=t.x<r,p=t.x+t.width>r;return u&&p||o&&l?-1:t.x>=r?t.y>=s?0:3:t.y>=s?1:2}getIndexes(e){let t=e.getBoundingBox(),r=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,o=t.y<s,l=t.y+t.height>s,u=t.x<r,p=t.x+t.width>r,h=[];return u&&o&&h.push(2),p&&o&&h.push(3),u&&l&&h.push(1),p&&l&&h.push(0),u&&p&&(o?(h.push(2),h.push(3)):l&&(h.push(1),h.push(0))),o&&l&&(u?(h.push(2),h.push(1)):p&&(h.push(3),h.push(0))),h.length===4&&h.push(-1),h}static checkBounds(e,t){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}raycast(e,t,r){if(!this.intersectsRay(e,t))return!1;for(let s of this.objects)if(r(s)&&this.checkRayCollision(e,t,s.getBoundingBox()))return!0;return this.nodes.some(s=>s.raycast(e,t,r))}intersectsRay(e,t){return i.rayIntersectsAABB(e.x,e.y,t.x-e.x,t.y-e.y,this.bounds)}checkRayCollision(e,t,r){return i.rayIntersectsAABB(e.x,e.y,t.x-e.x,t.y-e.y,r)}static rayIntersectsAABB(e,t,r,s,o){if(e>=o.x&&e<=o.x+o.width&&t>=o.y&&t<=o.y+o.height)return!0;let l=0,u=1;if(Math.abs(r)>1e-6){let p=(o.x-e)/r,h=(o.x+o.width-e)/r;l=Math.max(l,Math.min(p,h)),u=Math.min(u,Math.max(p,h))}else if(e<o.x||e>o.x+o.width)return!1;if(Math.abs(s)>1e-6){let p=(o.y-t)/s,h=(o.y+o.height-t)/s;l=Math.max(l,Math.min(p,h)),u=Math.min(u,Math.max(p,h))}else if(t<o.y||t>o.y+o.height)return!1;return u>=l&&l<=1&&u>=0}clear(){this.objects=[],this.nodes.forEach(e=>e.clear()),this.nodes=[]}drawDebug(e){this.bounds.width<3e3&&(e.drawRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height,this.level%2===0?"#ff0000":"#00ff00",this.level%2===0?"#ff0000":"#00ff00",this.level),e.fillText(`L: ${this.level}`,this.bounds.x+this.bounds.width/2,this.bounds.y+this.bounds.height/2,"16px Arial","#ffffff","center")),this.objects.forEach(t=>{let r=t.getBoundingBox();e.drawRect(r.x,r.y,r.width,r.height,this.level%2===0?"#0000ff":"#00ff00",this.level%2===0?"#ff0000":"#00ff00",this.level),e.fillText(`L: ${this.level}`,r.x+r.width/2,r.y+r.height/2,"14px Arial","#ffffff","center")}),this.nodes.forEach(t=>t.drawDebug(e))}}});var kl,ts,hu=_(()=>{"use strict";_r();cR();kl=class kl{static getInstance(e=null){return kl.instance||(e||(e=new Laya.Rectangle(0,0,ae.mapSize.width,ae.mapSize.height)),kl.instance=new kl(e)),kl.instance}constructor(e){this.quadTree=new bd(e)}addSnake(e){e.forEach(t=>{this.quadTree.insert(t)})}addBodySkin(e){this.quadTree.insert(e)}removeSnake(e){e.forEach(t=>{this.quadTree.remove(t)})}removeBodySkin(e){this.quadTree.remove(e)}refresh(){this.quadTree.refresh()}drawDebug(e){this.quadTree.drawDebug(e)}retrieve(e){return this.quadTree.retrieve(e)}raycast(e,t,r){return this.quadTree.raycast(e,t,r)}getAllCollidables(){return this._getAllFromQuadTree(this.quadTree)}_getAllFromQuadTree(e){let t=[...e.objects];return e.nodes.forEach(r=>{t=t.concat(this._getAllFromQuadTree(r))}),t}};kl.instance=null;ts=kl});var Ke,to=_(()=>{"use strict";Ke=class{};Ke.matchType=0,Ke.MATCH_TYPE_PVP=1,Ke.MATCH_TYPE_PVE=3,Ke.arenaType=0,Ke.ARENA_TYPE_PVP=1,Ke.ARENA_TYPE_JULEBU=2,Ke.ARENA_TYPE_PVE=3,Ke.ARENA_TYPE_TEAM=4,Ke.ROOM_TYPE_AI=1,Ke.ROOM_TYPE_SHEQU=2,Ke.ROOM_TYPE_VIP=3,Ke.ROOM_TYPE_JINGYING=4,Ke.ROOM_TYPE_JULEBU=5,Ke.ROOM_TYPE_CUSTOM=6,Ke.ROOM_TYPE_MATCH=7,Ke.ACTION_CREATE=1,Ke.ACTION_JOIN=2,Ke.ACTION_SIGNUP=3,Ke.ACTION_WATCH=4,Ke.ACTION_CREATE_BOOKING=5,Ke.ACTION_JOIN_BOOKING=6,Ke.STATE_WAIT=0,Ke.STATE_SIGNUP=2,Ke.STATE_GROUPED=3,Ke.STATE_START=10,Ke.CAMERA_IDLE=0,Ke.CAMERA_FOLLOW_ME=1,Ke.CAMERA_MAP_CLICK=2,Ke.CAMERA_DIRECT_OPERATE=3,Ke.CAMERA_FOLLOW_OTHER=4,Ke.MATCHEND_REWARD=1,Ke.MATCHEND_QUAN=2,Ke.MATCHEND_DIEJIA=3,Ke.PREDICT_TYPE_ROLLBACK=1,Ke.PREDICT_TYPE_NO_ROLLBACK=2});var H0,uR=_(()=>{"use strict";H0=class extends Laya.Image{}});var cO,ks,z0=_(()=>{"use strict";jt();uR();({regClass:cO}=Laya),ks=class extends H0{set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&(this.skin=ge.getSnakeBodyIcon(this.roomPlayerDto.skin))}setRotation(t){this.rotation=t}setScale(t){let r=this.width,s=this.height,o=t*2/r,l=t*2/s;this.scaleX=o,this.scaleY=l}setAlpha(t){this.alpha=t}setGray(t){this.gray=t}getRadio(){return this.width*this.scaleX/2}onDisable(){this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(ks.POOL_NAME,this)}};ks.POOL_NAME="MatchSnakeBodySpr",ks=K([cO("Aeyt_emSSaCC6Np5nR_evQ")],ks)});var Es,Ls,yd=_(()=>{"use strict";Es=class Es{constructor(){}static trim(e,t=null){t||(t=[" ","\r",`
`,"	",String.fromCharCode(65279)]);var r,s,o;for(r=e,o=t.length,s=0;s<o;s++)r=Es.getReplace(r,t[s],"");return r}static getReplace(e,t,r){if(!e)return"";var s;return s=e.replace(new RegExp(t,"g"),r),s}static isEmpty(e){return e.length<1?!0:Es.emptyStrDic.hasOwnProperty(e)}static trimLeft(e){var t;t=0;var r;for(r=e.length;Es.isEmpty(e.charAt(t))&&t<r;)t++;return t<r?e.substr(t):""}static trimRight(e){var t;for(t=e.length-1;Es.isEmpty(e.charAt(t))&&t>=0;)t--;var r;return r=e.substring(0,t),t>=0?e.substring(0,t+1):""}static trimSide(e){var t;return t=Es.trimLeft(e),t=Es.trimRight(t),t}static shortStr(e,t){return e.length>t?e.substr(0,t)+"...":e}static shortHeroStr(e,t=10){return Es.abbreviateString(e,t)}static abbreviateString(e,t=11){if(e.length<=t)return e;{let r=Math.floor((t-3)/2);return e.slice(0,r)+"..."+e.slice(-r)}}static caseInsensitiveSearchWithRegex(e,t){return new RegExp(t,"i").test(e)}static formatWalletAddress(e){let s="...";return e.length<=12+10?e:`${e.substring(0,12)}${s}${e.substring(e.length-10)}`}};Es.ANONYMOUS_NAME="***",Es.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"	":!0};Ls=Es});var j0,pR=_(()=>{"use strict";j0=class extends Laya.Sprite{}});var uO,Ts,G0=_(()=>{"use strict";ur();yd();pR();jt();yi();({regClass:uO}=Laya),Ts=class extends j0{constructor(){super();this.isMe=!1;this.inGround=!1;this.speedRate=1;this.moveSpeed=10;this._speed=10;this.biasSpeed=0;this._roleDirection=-1;this.lastX=0}get speed(){return this._speed}set speed(t){this._speed=t,this.biasSpeed=Math.round(this.speed*Math.sin(45*Math.PI/180))}get roleDirection(){return this._roleDirection}set roleDirection(t){t!==-4&&(this._roleDirection=t)}set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&(this.heroSk.skin=ge.getSnakeHeadIcon(this.roomPlayerDto.skin),this.tf_name.text=Ls.abbreviateString(this.roomPlayerDto.userName))}set x(t){super.x=t}get x(){return super.x}set visible(t){super.visible=t,this.smallHeroImg&&(this.smallHeroImg.visible=t)}get visible(){return super.visible}set alpha(t){super.alpha=t,this.smallHeroImg&&(this.smallHeroImg.alpha=t)}onAwake(){}showDamageLabelDetailDelay(t,r,s){Laya.timer.once(r,this,this.showDamageLabelDetail,[t,s],!1)}showDamageLabelDetail(t,r){var s=Laya.Pool.getItemByCreateFun("damageNumber",ge.damageNumPrefab.create,ge.damageNumPrefab);s.init(t,r),this.addChild(s)}setRotation(t){this.heroSk.rotation=t}setScale(t){let r=this.heroSk.width,s=this.heroSk.height,o=t*2/r,l=t*2/s;this.heroSk.scaleX=o,this.heroSk.scaleY=l}setAlpha(t){this.heroSk.alpha=t}setGray(t){this.heroSk.gray=t}getRadio(){return this.heroSk.width*this.heroSk.scaleX/2}onDisable(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(Ts.POOL_NAME,this)}setClientScore(t){this.tf_pos.text=`${t}`}setServerPosLog(t,r,s,o,l){ie.Debug==2&&console.log(ye.GetLogTime+` ${this.roomPlayerDto.roleId} S：(${r.loc.x}, ${r.loc.y}, ${s}, dir：${o}, aimDir：${l}, ${t})`)}showLogInHead(t){this.tf_server_pos.text=`${t}`}destroy(t){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.owner=null,this.roomPlayerDto=null,super.destroy(t)}};Ts.POOL_NAME="MatchSnakeSpr",Ts=K([uO("tWPXV-AGQQ2kGHES5HnI0w")],Ts)});var El,gw,fn,Ll=_(()=>{"use strict";_r();Co();El=class El{get gameMap(){return this._gameMap}set gameMap(e){this._gameMap=e}static getInstance(){return El._instance||(El._instance=new El),El._instance}constructor(){}init(){}destroy(){this._gameMap=null,this.img_smallMap=null}move(e){if(!e)return;let t=ae.mapSize,r=Laya.stage.width,s=Laya.stage.height;var o=0,l=0;e.x>r/2&&e.x<t.width-.5*r?o=-(e.x-r/2):e.x<=r/2?o=0:e.x>=t.width-.5*r&&(o=-(t.width-r)),e.y>s/2&&e.y<t.height-.5*s?l=-(e.y-s/2):e.y<=s/2?l=0:e.y>=t.height-.5*s&&(l=-(t.height-s));var u=bi.distancePoint(o,l,this.gameMap.x,this.gameMap.y);u<200&&(o=bi.lerp(this.gameMap.x,o,.3),l=bi.lerp(this.gameMap.y,l,.3)),this.gameMap.pos(o,l)}};El._instance=null;gw=El,fn=gw.getInstance()});var Ao,kn,_d=_(()=>{"use strict";_r();z0();G0();Kt();wl();Co();ss();Ll();jr();jt();yi();Ao=class Ao{constructor(e,t,r,s,o){this.alpha=.3;this.lastX=0;this.lastY=0;this._manualVisible=!0;this.updateData(e,t,r,s,o)}getCollisionPoint(){var e=new x.snake.socket.PointObject;return e.x=this.logicPos.x,e.y=this.logicPos.y,e}getThead(){var e=new x.snake.socket.SnakeObject,t=new x.snake.socket.PointObject,r=this.owner.getCollisionHeadPosition();return t.x=r.x,t.y=r.y,e.loc=t,e}updateData(e,t,r,s,o){if(this.pos=new Zt(Ao.INIT_POS,Ao.INIT_POS),this.logicPos=new Zt(Ao.INIT_POS,Ao.INIT_POS),this.tag=s,this.owner=o,this.owner.isLogicSnake?this.alpha=1:this.alpha=.3,e===ae.snake.skinFlag.head){let l=Laya.Pool.getItemByCreateFun(Ts.POOL_NAME,ge.roleAniPrefab.create,ge.roleAniPrefab);l.owner=this,this.node=l,l.dataSource=s,this.owner.isLogicSnake||(this.smallHeroImg=new Laya.Image,this.updateSmallHeroImg(),fn.img_smallMap.addChild(this.smallHeroImg))}else{let l=Laya.Pool.getItemByCreateFun(ks.POOL_NAME,ge.matchSnakeBodyPrefab.create,ge.matchSnakeBodyPrefab);this.node=l,l.dataSource=s}this.skinFlag=e,this.node.tag=s,this.owner.isLogicSnake||t.addChild(this.node)}reset(e,t,r,s,o){this.updateData(e,t,r,s,o)}resetForPool(){this.destroy()}destroy(){xe.getInstance().removeBodySkin(this),this.node&&(Laya.Tween.clearAll(this.node),this.node.removeSelf()),this.smallHeroImg&&this.smallHeroImg.removeSelf(),this.pos=null,this.logicPos=null,this.node=null,this.owner=null,this.tag=null}updateSmallHeroImg(){if(this.smallHeroImg)if(this.owner.isSelf){this.smallHeroImg.skin="res/match2/img_dian1.png";var e=15,t=15;this.smallHeroImg.size(e,t),this.smallHeroImg.pivot(e/2,t/2)}else if(this.owner.tag.roleId==xe.getInstance().kingId){this.smallHeroImg.skin="res/match2/img_phb_icon2.png";var r=21,s=19;this.smallHeroImg.size(r,s),this.smallHeroImg.pivot(r/2,s/2)}else{this.smallHeroImg.skin="res/match2/img_dian2.png";var o=4,l=4;this.smallHeroImg.size(o,l),this.smallHeroImg.pivot(o/2,l/2)}}setPosition(e){if(this.smallHeroImg){var t=bi.fromBigToSmall(e.x,e.y),r=t[0],s=t[1];this.smallHeroImg.pos(r,s)}var o,l;if(this.pos.x!=Ao.INIT_POS||this.pos.y!=Ao.INIT_POS)if(this.isHead){var u=bi.distancePoint(e.x,e.y,this.node.x,this.node.y);o=bi.lerp(this.node.x,e.x,this.alpha),l=bi.lerp(this.node.y,e.y,this.alpha)}else o=bi.lerp(this.node.x,e.x,this.alpha),l=bi.lerp(this.node.y,e.y,this.alpha);else o=e.x,l=e.y;this.node.pos(o,l),this.pos.x=o,this.pos.y=l,this.logicPos.x=e.x,this.logicPos.y=e.y,ie.Debug==2&&this.skinFlag===ae.snake.skinFlag.head&&this.owner.isLogicSnake,this.updateFinalVisibility()}getPosition(){return this.pos}getLoogicPosition(){return this.logicPos}gotoDiePos(){return;if(this.smallHeroImg){var e,t,r;this.smallHeroImg.pos(t,r)}}setRotation(e){this.node.setRotation(e)}setLocalZOrder(e){this.node.zOrder=e}updateAlpha(e,t){let r=t==1?1:.75;this.node.setAlpha(r)}updateScale(e,t){let r=e*(1+.1*t);this.setScale(r)}setScale(e){this.node.setScale(e)}getRadio(){return this.node.getRadio()}setGray(e){this.node.setGray(e)}isVisible(){return this.node.visible}getBoundingBox(){let e;return this.isHead?e=this.owner.suctionRadius:e=this.getRadio(),this.owner.isLogicSnake?new Laya.Rectangle(this.logicPos.x-e,this.logicPos.y-e,e*2,e*2):new Laya.Rectangle(this.pos.x-e,this.pos.y-e,e*2,e*2)}getSkinFlag(){return this.skinFlag}checkCollision(e,t,r,s){let o=s?this.getLoogicPosition():this.getPosition();return Ci.distance(o.x,o.y,e,t)<r+this.getRadio()}get isHead(){return this.skinFlag===ae.snake.skinFlag.head}setServerPosLog(e,t,r,s,o){this.skinFlag===ae.snake.skinFlag.head&&this.node.setServerPosLog(e,t,r,s,o)}showLogInHead(e){this.skinFlag===ae.snake.skinFlag.head&&this.node.showLogInHead(e)}setClientScore(e){this.skinFlag===ae.snake.skinFlag.head&&this.node.setClientScore(e)}setVisible(e){this._manualVisible=e,this.updateFinalVisibility(),this.smallHeroImg&&(this.smallHeroImg.visible=e)}updateFinalVisibility(){let e=this.checkInScreen(),t=this._manualVisible&&e;this.node.visible=t}checkInScreen(){let e=fn.gameMap;if(!e)return!1;let t=-e.x,r=-e.y,s=this.pos.x-t,o=this.pos.y-r,l=Laya.stage.width,u=Laya.stage.height,p=this.isHead?this.owner.suctionRadius:this.getRadio()*this.node.scaleX,h=p*1.5;return s+p+h>0&&s-p-h<l&&o+p+h>0&&o-p-h<u}};Ao.INIT_POS=-1e6;kn=Ao});var Tl,bw=_(()=>{"use strict";Kt();_r();xd();Nn();Dn();jr();_d();ss();On();yi();Ot();ur();Tl=class{static checkCollisions(e,t,r,s){var o=!1;if(e.getIsSend(o))return;let l=ae.mapSize;if(e&&e.tag){let E=e.getHeadCollisionBounds(o);if(E&&(E.x<l.offsetX||E.x+E.width>l.width-l.offsetX||E.y<l.offsetY||E.y+E.height>l.height-l.offsetY)){e.isAlive(o)&&(e.readyDie(),e.setIsSend(!0,o));return}if(e.isAlive(o)&&!e.getIsStop(o)){if(!e.getHeadCollisionBounds(o))return;{let H=vi.getAllFoods();var u=[],p=0;if(H.forEach(Y=>{if(!Y.getHaveEaten(s)&&e.checkFoodCollision(Y,o)){ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST 显示蛇 吃 foodId：",Y.foodObject.unkey,"currentFrame:"+Ue.getClientRuningFrame(o),"isLogicSnake:"+o,"hasConfirmed:"+s),Y.beEattenByPlayerSnake(e,o,s),u.push(Y.foodObject.unkey);var Z=Y.getScore();p+=Z}}),u&&u.length>0){var h=new x.snake.socket.SC_EAT_FOOD;h.fid=u,h.score=p;var f=e.getScore(o)+p,g=e.getSkinLength(o),b=e.tag.snakeId,v=xe.getInstance().countSnakeLen(b,g,f,e.intervalBoneToDrawSkin(o));h.lenght=v,h.roleId=e.tag.roleId,h.score=f,h.remain=[],xe.getInstance().eatFoodAndAddScore(h,o),ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST 显示蛇 吃到了食物","roleId:"+e.tag.roleId,"foodIds:["+u+"], totalScore:"+f,"newLen:"+v,"currentFrame:"+Ue.getClientRuningFrame(o),"isLogicSnake:"+o,"hasConfirmed:"+s)}}}let F=xe.getInstance().getBodySkinsWithOutOne(e,o);for(let O of F)if(O.owner.owner!==e&&e.checkBodyCollision(O,o))if(!e.isInvincible(o)&&!O.owner.owner.isInvincible(o)){if(e.isAlive(o)&&O.owner.owner.isAlive(o)&&!e.isViewReadyDie&&!O.owner.owner.isViewReadyDie){var w=!1,k=!O.isHead;if((k||e.len(o)<O.owner.owner.len(o)||e.len(o)==O.owner.owner.len(o)&&e.tag.enterTime>=e.tag.enterTime)&&(w=!0),w){e.readyDie(),e.setIsSend(!0,o);return}}}else console.log(e.tag.roleId+" 或者 "+O.owner.tag.roleId+" 处于无敌状态！")}}static checkCollisionsWithConfirm(e,t,r,s){var o=!0;if(e.getIsSend(o)||!s)return;let l=ae.mapSize;if(e&&e.tag){let W=e.getHeadCollisionBounds(o);if(W&&(W.x<l.offsetX||W.x+W.width>l.width-l.offsetX||W.y<l.offsetY||W.y+W.height>l.height-l.offsetY)){if(e.isAlive(o)){e.sendDie();var u=e.getToServerHead(o),p=x.snake.socket.MessageType.MSG_PLAYER_COLLISION,h=x.snake.socket.CS_PLAYER_COLLISION.fromObject({roleId:e.tag.roleId,head:u,frame:Ue.getClientRuningFrame(o),body:!1});ft.sendData(p,h),e.setIsSend(!0,o)}return}if(e.isAlive(o)&&!e.getIsStop(o)){if(!e.getHeadCollisionBounds(o))return;if(s){let de=vi.getAllFoods();var f=[],g=0;if(de.forEach(Ne=>{if(!Ne.getHaveEaten(s)&&e.checkFoodCollision(Ne,o)){ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST 逻辑蛇 确认帧 吃 foodId：",Ne.foodObject.unkey,"currentFrame:"+Ue.getClientRuningFrame(o),"isLogicSnake:"+o,"hasConfirmed:"+s),Ne.beEattenByPlayerSnake(e,o,s),f.push(Ne.foodObject.unkey);var He=Ne.getScore();g+=He}}),f&&f.length>0){var b=new x.snake.socket.SC_EAT_FOOD;b.fid=f,b.score=g;var v=e.getScore(o)+g,w=e.getSkinLength(o),k=e.tag.snakeId,E=xe.getInstance().countSnakeLen(k,w,v,e.intervalBoneToDrawSkin(o));b.lenght=E,b.roleId=e.tag.roleId,b.score=v,b.remain=[],xe.getInstance().eatFoodAndAddScore(b,o),ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST SEND 112 逻辑蛇 确认帧 吃到了食物","roleId:"+e.tag.roleId,"foodIds:["+f+"], totalScore:"+v,"newLen:"+E,"currentFrame:"+Ue.getClientRuningFrame(o),"isLogicSnake:"+o,"hasConfirmed:"+s);var F=e.tag.roleId,u=e.getToServerHead(o),p=x.snake.socket.MessageType.MSG_EAT_FOOD,O=x.snake.socket.CS_EAT_FOOD.fromObject({roleId:F,fid:f,head:u,frame:Ue.getClientRuningFrame(o)});ft.sendData(p,O)}}}if(!s)return;let le=xe.getInstance().getBodySkinsWithOutOne(e,o);for(let oe of le)if(oe.owner.owner!==e&&e.checkBodyCollision(oe,o))if(!e.isInvincible(o)&&!oe.owner.owner.isInvincible(o)){if(e.isAlive(o)&&oe.owner.owner.isAlive(o)&&!e.isLogicReadyDie&&!oe.owner.owner.isLogicReadyDie){var H=!1,Y=!oe.isHead;if((Y||e.len(o)<oe.owner.owner.len(o)||e.len(o)==oe.owner.owner.len(o)&&e.tag.enterTime>=e.tag.enterTime)&&(H=!0),H){e.sendDie();var Y=!oe.isHead,Z=oe.owner.tag.roleId,u=e.getToServerHead(o),p=x.snake.socket.MessageType.MSG_PLAYER_COLLISION,h=x.snake.socket.CS_PLAYER_COLLISION.fromObject({roleId:e.tag.roleId,target:Z,head:u,frame:Ue.getClientRuningFrame(o),body:Y,point:oe.getCollisionPoint(),thead:oe.getThead()});ft.sendData(p,h),console.warn(ye.GetLogTime+"Snake DIE CMD:113 发送了 玩家 "+h.roleId+" 碰撞 数据",h),e.setIsSend(!0,o);return}}}else console.log(e.tag.roleId+" 或者 "+oe.owner.tag.roleId+" 处于无敌状态！")}}static checkCollisionsWithPve(e,t,r,s){var o=!1;let l=ae.mapSize;if(e&&e.tag){ie.Debug==2&&console.log("碰撞检测",e.tag.roleId);let W=e.getHeadCollisionBounds(o);if(W){var u=l.offsetX,p=l.offsetY;if(e.isAi&&(u+=50,p+=50),W.x<u||W.x+W.width>l.width-u||W.y<p||W.y+W.height>l.height-p){if(e.isAlive(o))if(e.isAi){var h=Zt.create(l.width/2,l.height/2);e.goTargetPos(h)}else e.pveDie();return}}if(e.isAlive(o)&&!e.getIsStop(o)){if(!e.getHeadCollisionBounds(o))return;if(s){let de=r.retrieve(e.getHead(o)).filter(Ne=>Ne instanceof io);var f=[],g=[],b=0;if(de.forEach(Ne=>{if(g.push(Ne.foodObject.unkey),!Ne.getHaveEaten(s)&&e.checkFoodCollision(Ne,o)){Ne.beEattenByPlayerSnake(e,o,s),f.push(Ne.foodObject.unkey);var He=Ne.getScore();b+=He}}),f&&f.length>0){var v=new x.snake.socket.SC_EAT_FOOD;v.fid=f,v.score=b;var w=e.getScore(o)+b,k=e.getSkinLength(o),E=e.tag.snakeId,F=xe.getInstance().countSnakeLen(E,k,w,e.intervalBoneToDrawSkin(o));v.lenght=F,v.roleId=e.tag.roleId,v.score=w,v.remain=[],xe.getInstance().eatFoodAndAddScore(v,o)}}}let le=r.retrieve(e.getHead(o)).filter(oe=>oe instanceof kn);for(let oe of le)if(oe.owner.owner!==e&&e.checkBodyCollision(oe,o))if(!e.isInvincible(o)&&!oe.owner.owner.isInvincible(o)){if(e.isAlive(o)&&oe.owner.owner.isAlive(o)&&!e.isViewReadyDie&&!oe.owner.owner.isViewReadyDie){var O=!1,H=!oe.isHead;if((H||e.len(o)<oe.owner.owner.len(o)||e.len(o)==oe.owner.owner.len(o)&&e.tag.enterTime>=oe.owner.tag.enterTime)&&(O=!0),O){e.pveDie();var Y=oe.owner.owner,Z=re.getSheetDataByMultiKey(re.m_dicSnakeLengthRules,[Y.tag.snakeId,Y.getSkinLength(!1)]),b=Math.ceil(Z.consumePoints/3),v=new x.snake.socket.SC_EAT_FOOD;v.fid=[],v.score=b;var w=Y.getScore(o)+b,k=Y.getSkinLength(o),E=Y.tag.snakeId,F=xe.getInstance().countSnakeLen(E,k,w,Y.intervalBoneToDrawSkin(o));v.lenght=F,v.roleId=Y.tag.roleId,v.score=w,v.remain=[],xe.getInstance().eatFoodAndAddScore(v,o);break}}}else console.log(e.tag.roleId+" 或者 "+oe.owner.tag.roleId+" 处于无敌状态！")}}}});var W0,hR=_(()=>{"use strict";_r();yi();wl();Co();ss();hu();xd();_d();W0=class{constructor(e){this.state="searching";this.target=null;this.dangerDistance=100;this.viewDistance=300;this.ATTACK_OFFSET=30;this.PREDICT_FACTOR=.8;this.SAFE_ANGLE=45;this.DANGER_CHECK_DIST=150;this.snake=e,this.collision=ts.getInstance(null)}update(){if(!this.snake.isAlive(!1))return;if(this.checkImmediateDanger()){this.escapeBehavior(null);return}let e=this.findNearestFood(),t=this.findNearestThreat();switch(this.updateState(e,t),ie.Debug==2&&this.snake.showLogInHead(this.state,!1),this.state){case"searching":this.searchBehavior(e);break;case"pursuing":this.pursueBehavior();break;case"escaping":this.escapeBehavior(t);break;case"attacking":let r=this.findNearestAttackTarget();this.attackBehavior(r);break}}checkImmediateDanger(){let e=this.snake.getCollisionHeadPosition(!1);return this.collision.retrieve(this.snake.getHead(!1)).filter(r=>r instanceof kn&&r.owner.owner!==this.snake&&Ci.getVecDistance(e,r.getPosition())<this.snake.getRadio(!1)*3).length>0}updateState(e,t){let r=this.findNearestAttackTarget(),s=!1;t&&this.isInDangerRange(t)?this.state="escaping":s?(this.state="attacking",this.target=null):e?this.state="pursuing":this.state="searching"}isPathSafe(e){let t=this.predictTargetPosition(e);return!this.collision.raycast(this.snake.getCollisionHeadPosition(!1),t,r=>r instanceof kn&&r.owner.owner!==this.snake)}isInAttackRange(e){return Ci.getVecDistance(this.snake.getCollisionHeadPosition(!1),e.getCollisionHeadPosition(!1))<this.viewDistance}findNearestFood(){let e=this.snake.getHead(!1),t=this.collision.retrieve(e).filter(l=>l instanceof io),r=null,s=this.viewDistance,o=this.snake.getCollisionHeadPosition(!1);for(let l of t){let u=Ci.distance(o.x,o.y,l.getPosition().x,l.getPosition().y);u<s&&(s=u,r=l)}return r}findNearestThreat(){let e=this.snake.getHead(!1),t=this.collision.retrieve(e).filter(l=>l instanceof kn&&l.getSkinFlag()===ae.snake.skinFlag.head).map(l=>l.owner.owner).filter(l=>l!==this.snake&&l.isAlive(!1)&&l.getLength(!1)>=this.snake.getLength(!1)),r=null,s=this.viewDistance,o=this.snake.getCollisionHeadPosition(!1);for(let l of t){let u=Ci.distance(o.x,o.y,l.getCollisionHeadPosition(!1).x,l.getCollisionHeadPosition(!1).y);u<s&&(s=u,r=l)}return r}findNearestAttackTarget(){let e=this.snake.getHead(!1),t=this.collision.retrieve(e).filter(l=>l instanceof kn&&l.getSkinFlag()===ae.snake.skinFlag.head).map(l=>l.owner.owner).filter(l=>l!==this.snake&&l.isAlive(!1)&&!l.isInvincible(!1)&&l.getLength(!1)<this.snake.getLength(!1)),r=null,s=this.viewDistance,o=this.snake.getCollisionHeadPosition(!1);for(let l of t){let u=Ci.distance(o.x,o.y,l.getCollisionHeadPosition(!1).x,l.getCollisionHeadPosition(!1).y);u<s&&(s=u,r=l)}return r}attackBehavior(e){if(!e||!e.isAlive(!1)){this.state="searching";return}let t=this.predictTargetPosition(e),r=this.calculateInterceptPosition(t,e),s=this.getSafeDirection(r);this.goAttackTargetPos(s),Ci.getVecDistance(this.snake.getCollisionHeadPosition(!1),e.getCollisionHeadPosition(!1))>this.viewDistance&&(this.state="searching")}predictTargetPosition(e){let t=e.getCollisionHeadPosition(!1),r=e.getSpeed(!1)*e.getSpeedRate(!1),s=bi.getAngleToVec(e.getCurDir()),o=Ci.getVecDistance(this.snake.getCollisionHeadPosition(!1),t),l=Math.min(2.5,o*this.PREDICT_FACTOR/r);return new Zt(t.x+s.x*r*l,t.y+s.y*r*l)}calculateInterceptPosition(e,t){let r=bi.getAngleToVec(t.getCurDir()),s=new Zt(-r.y,r.x),o=Math.random()>.5?this.ATTACK_OFFSET:-this.ATTACK_OFFSET;return new Zt(e.x+s.x*o,e.y+s.y*o)}getSafeDirection(e){let t=this.getDirectionToTarget(e),r=this.detectFrontalObstacles(t);return r.length===0?t:this.findAlternativeDirection(t,r)||t}detectFrontalObstacles(e){let t=this.snake.getCollisionHeadPosition(!1);return this.collision.retrieve(this.snake.getHead(!1)).filter(r=>{if(r instanceof kn&&r.owner.owner!==this.snake){let s=r.getPosition().sub(t),o=e.getRotationTo(s);return Math.abs(o)<this.SAFE_ANGLE&&s.length()<this.DANGER_CHECK_DIST}return!1})}findAlternativeDirection(e,t){let r=[-45,45];for(let s of r){e.rotate(s);let o=e.normalize();if(!t.some(u=>{let p=u.getPosition().sub(this.snake.getCollisionHeadPosition(!1));return o.getRotationTo(p)<this.SAFE_ANGLE}))return o}return null}goAttackTargetPos(e){this.target=e;let r=this.getDirectionToTarget(this.target).getRotation();this.snake.rotate(r,!1)}searchBehavior(e){e?(this.target=e.getPosition(),this.state="pursuing"):(!this.target||Ci.getVecDistance(this.snake.getCollisionHeadPosition(!1),this.target)<50)&&(this.target=new Zt(Ci.randomRange(0,ae.mapSize.width),Ci.randomRange(0,ae.mapSize.height)))}goTargetPos(e){this.target=e;var r=this.getDirectionToTarget(this.target).getRotation();this.snake.rotate(r,!1),this.state="pursuing"}pursueBehavior(){if(this.target){if(Ci.getVecDistance(this.snake.getCollisionHeadPosition(!1),this.target)<this.snake.getRadio(!1)*8)return;var e=this.getDirectionToTarget(this.target).getRotation();this.snake.rotate(e,!1)}}escapeBehavior(e){if(e){let r=this.getDirectionToTarget(e.getCollisionHeadPosition(!1));r.x*=-1,r.y*=-1;var t=r.getRotation();this.snake.rotate(t,!1)}else{let s=this.snake.getCurDir()+180;s=bi.normalizeAngle(s),this.snake.rotate(s,!1)}}getDirectionToTarget(e){let t=this.snake.getCollisionHeadPosition(!1),r=e.x-t.x,s=e.y-t.y,o=new Zt(r,s);if(Math.abs(o.getRotation()-this.snake.getCurDir())<5){var u=this.snake.getCurDir(),p=bi.getAngleToVec(u);return p}if(o.length()<.1){var u=this.snake.getCurDir(),p=bi.getAngleToVec(u);return p}return o.normalize(),o}isInDangerRange(e){return Ci.getVecDistance(this.snake.getCollisionHeadPosition(!1),e.getCollisionHeadPosition(!1))<this.dangerDistance}destroy(){this.snake=null,this.collision=null,this.target=null}}});var Fn,vd=_(()=>{"use strict";xd();_d();Fn=class i extends Laya.Sprite{constructor(){super(...arguments);this.collidables=[];this.isVisible=!1}static getInstance(){return i._instance||(i._instance=new i,i._instance.zOrder=9999,i._instance.mouseEnabled=!1),i._instance}toggleVisible(){this.isVisible=!this.isVisible,console.log("DebugLayer.toggleVisible",this.isVisible),this.graphics.clear()}updateCollidables(t){this.collidables=t}clearDraw(){this.graphics.clear(),this.graphics.alpha(.5)}draw(){this.isVisible&&(this.graphics.clear(),this.graphics.alpha(.5),this.collidables.forEach(t=>{t instanceof kn?this.drawSnakeBody(t):t instanceof io&&this.drawFood(t)}))}drawSnakeBody(t){let r=t.getPosition(),s=t.getRadio();this.graphics.drawCircle(r.x,r.y,s,"#FF0000",2,.5)}drawFood(t){let r=t.getBoundingBox();this.graphics.drawRect(r.x,r.y,r.width,r.height,"#00FF00",2,.5)}}});var Cl,yw,La,_w=_(()=>{"use strict";hu();vd();Nn();jr();Al();yi();Ll();Cl=class Cl{static getInstance(){return Cl.instance||(Cl.instance=new Cl),Cl.instance}init(e){if(!e)throw new Error("gameLayer Must Be Not Null");xe.getInstance().init(),vi.init();let t=xe.getInstance().container,r=vi.container,s=new Laya.Sprite;e.addChild(r),e.addChild(t),e.addChild(s),s.addChild(Fn.getInstance()),vi.init()}createData(){xe.getInstance().createSnakes(),vi.createFoodsByData()}startGame(){Pn.start()}clearTimer(){}endTimer(){Pn.end()}update(e,t,r){if(xe.getInstance().updateSnakes(Laya.timer.delta,t,r,!0),!t&&(fn.move(xe.getInstance().getSelfSnakePos(t)),ie.needDraw)){let s=Fn.getInstance();s&&(s.clearDraw(),ts.getInstance(null).drawDebug(s.graphics))}}clear(){this.clearTimer()}};Cl.instance=null;yw=Cl,La=yw.getInstance()});var xw,Pn,Al=_(()=>{"use strict";jr();Nn();_r();xr();Ei();Kt();_w();xw=class i{constructor(){this._frameInterval=33;this._currentFrame=0;this.isStart=!1}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){this.stop(),this._currentFrame=0}start(){Laya.timer.loop(this._frameInterval,this,this.update)}stop(){Laya.timer.clear(this,this.update)}end(){this.stop(),this.isStart=!1}update(){this._currentFrame++,this.executeFrame(this._currentFrame)}executeFrame(e,t=!0){xe.getInstance().selfSnake&&xe.getInstance().selfSnake.tag==null||(La.update(e,!1,t),vi.update(Laya.timer.delta),xe.getInstance().update(Laya.timer.delta))}get currentFrame(){return this._currentFrame}sendAiEnter(){var e=x.snake.socket.MessageType.MSG_AI_ENTER;De.send(e,null)}sendAiEnd(e,t){var r=x.snake.socket.MessageType.MSG_AI_END,s=x.snake.socket.CS_AI_END.fromObject({kills:e,score:t});De.send(r,s)}onPveEnd(){var e=new x.snake.socket.SC_BATTLE_END,t=xe.getInstance().selfSnake;e.res=!1,e.roleId=t.tag.roleId,e.score=t.viewSnake.score,e.kills=t.tag.kills,e.length=t.viewSnake.getSkinLength(),e.alive=ae.snake.battleCd/1e3-$e.matchCoolDownTime,e.rank=t.rankNum,e.items=[],console.log("onPveEnd",e),$e.onAiSetMatchEnd(e)}},Pn=xw.getInstance()});var du,dR=_(()=>{"use strict";Co();ur();Kt();_r();ss();Dn();jr();Yt();On();Ot();yi();wl();du=class{constructor(e,t,r,s){this.clientFrame=1;this.serverFrame=1;this.dFrame=0;this.oprIndex=-1;this.serverHeadPoss=[];this.ringCenter=new Zt;this.baseRingSize=100;this.isSend=!1;this.isStop=!1;this.lastRingUpdate=0;this.isOutSide=!1;this.lastX=0;this.lastY=0;this.lastFrame=0;this.lastSendFrame=-1;this.lastDir=-1;this.lastSendDir=-1;this.isLogicSnake=e,this.pnl=t,this.owner=s,this.bodySkinPool=xe.getInstance().getBodySkinPool(),this.updateData(r),this.showLogInHead(e+"")}updateData(e){if(this.skins)for(let t=0;t<this.skins.length;t++){let r=this.skins[t];r&&this.bodySkinPool.returnBodySkin(r)}this.skins=[],this._initData(e),this._initSnake(),this._updateSkinRadio()}_initData(e){this.snakeItem=re.m_dicSnakes.get(e.snakeId),this.radio=this.snakeItem.bodyRadius,this.collisionHeadRadius=this.snakeItem.collisionHeadRadius,this.suctionRadius=this.snakeItem.suctionRadius,this.speed=this.snakeItem.baseSpeed,this.maxLength=this.snakeItem.maxLength,this.maxBoneLength=this.maxLength*this.snakeItem.intervalBoneToDrawSkin,this.tag=e||null,this.score=e.score,this.speedRate=e.speed;var t=e.direction;this.dir=t,this.lastDir=t;var r=e.aimDir;this.aimDir=r,this.rotateSpeed=ae.snake.defaultRotateSpeed;let s=e.attr;for(let w=0;w<s.length;w++)if(s[w]){let k=s[w].split(","),E=k[0],F=k[1];if(E=="1"){var o=parseInt(F),l=e.length;console.log("ATTR: 计算长度：后端len: "+l+", newLen: "+o)}else if(E=="2"){var u=parseInt(F);this.maxLength=u,this.maxBoneLength=this.maxLength*this.snakeItem.intervalBoneToDrawSkin,console.log("ATTR: 计算最大长度：maxLen: "+this.maxLength+", maxLength: "+u)}else if(E=="3"){var p=parseInt(F),h=p/100*this.speed;this.speed+=h,console.log("ATTR: 计算速度：speed: "+this.speed+", addSpeed: "+h)}else if(E!="4"){if(E=="5"){var f=parseInt(F),g=f/100*this.suctionRadius;this.suctionRadius+=g,this.suctionRadius=Math.floor(this.suctionRadius),console.log("ATTR: 计算吸食半径：suctionRadius: "+this.suctionRadius+", addSuctionRadius: "+g)}}}this.boneLength=e.snake.length,this.intervalBoneToDrawSkin=this.snakeItem.intervalBoneToDrawSkin,this.skins=[],this.bones=[],this.alive=!0;var b=e.wdTime-e.oprTime;this.defaultInvincibleTime=Date.now()+b,this.isInvincible=b>0;let v=Math.random()+.5;v=v>1?v-.5:v;for(let w=0;w<this.boneLength;w++){let k=e.snake[w].loc,E=Zt.create(k.x,k.y);this.bones[w]=E}this.isLogicSnake||this.bodyRing||(this.bodyRing=new Laya.Image,this.bodyRing.skin=ae.res.snakeRingImg,this.bodyRing.width=this.bodyRing.height=this.baseRingSize,this.bodyRing.anchorX=this.bodyRing.anchorY=.5,this.bodyRing.visible=!1,this.pnl.addChild(this.bodyRing))}_updateBodyRing(){if(this.lastRingUpdate=Date.now(),!!this.isInvincible&&this.bodyRing){var e=this.getHeadPosition();this.bodyRing.pos(e.x,e.y)}}_initSnake(){console.log(ye.GetLogTime,"初始化蛇的皮肤","isLogicSnake: "+this.isLogicSnake);let e=this.getSkinLength();for(let t=0;t<e;t++){t===0?this.skins[t]=this.bodySkinPool.getBodySkin(ae.snake.skinFlag.head,this.color,this.tag,this):this.skins[t]=this.bodySkinPool.getBodySkin(ae.snake.skinFlag.body,this.color,this.tag,this);let r=t*this.intervalBoneToDrawSkin;if(this.bones[r]){this.skins[t].setPosition(this.bones[r]),xe.getInstance().addBodySkin(this.skins[t]),this.skins[t].setLocalZOrder(-(t+1));let s;r+1<this.bones.length?s=this.bones[r+1]:r-1>=0?s=this.bones[r-1]:s=this.bones[r];let o=this.bones[r].getRotationTo(s),l=ae.snake.defaultRotation-o;this.skins[t].setRotation(l),this.skins[t].setVisible(!0)}else console.error("_initSnake error",e,t),this.skins[t].setVisible(!1)}}move(e,t,r){if(this.alive){if(this.isLogicSnake){if(!t&&this.getIsStop())return}else if(this.getIsStop())return;if(ie.Debug==2){var s=ye.GetLogTime+" C 坐标: ======== "+this.tag.roleId+" frame: "+(Ue.getClientRuningFrame(!0)-1)+", logicPos: "+this.bones[0].x+", "+this.bones[0].y+",  pos: "+this.getHeadPosition().x+", "+this.getHeadPosition().y+",  dir: "+this.dir+", aimDir: "+this.aimDir+", hasConfirmed: "+t+", isLogicSnake: "+this.isLogicSnake;console.debug(s),ie.Debug==2&&!this.isOutSide&&this.isLogicSnake&&t&&!this.owner.isLogicReadyDie&&Ue.checkClientAndServerFrame(Ue.clientRuningFrame,this.tag.roleId,this.bones[0])}if(this.tempBones=null,r)for(let w=0;w<this.speedRate;w++){let k=this.aimDir-this.dir,E=this.rotateSpeed*ae.snake.defaultMoveInterval;if(Math.abs(k)<E)this.dir=this.aimDir;else{k=(k+360)%360,k>180&&(k-=360);var o=Math.abs(k)<E?k:E*(k>0?1:-1);this.dir+=o,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360)}let F=bi.getAngleToVec(this.dir);ie.Debug==3&&console.log(ye.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC BEFORE ==== "+Ue.getClientRuningFrame(!0)+" 当前方向：",this.dir,"向量：",F.x,F.y,"bones[0]：",this.bones[0].x,this.bones[0].y,"speed："+this.speed+", speedRate: "+this.speedRate,"needMove: "+r);var l=this.bones[0].add(F.mul(this.speed)),u=10,p=ae.mapSize;if(l.x<p.offsetX-u||l.x>p.width-p.offsetX+u||l.y<p.offsetY-u||l.y>p.height-p.offsetY+u){this.isOutSide=!0;return}this.bones[0].assign(l);var h=10;ie.Debug==2&&!this.isLogicSnake&&this.lastX!=0&&this.lastY!=0&&this.lastFrame!=0&&(this.dir==180&&(this.lastX-l.x<=0||Math.abs(this.lastX-l.x)>h)||this.dir==0&&(this.lastX-l.x>=0||Math.abs(this.lastX-l.x)>h)||this.dir==270&&(this.lastY-l.y<=0||Math.abs(this.lastY-l.y)>h)||this.dir==90&&(this.lastY-l.y>=0||Math.abs(this.lastY-l.y)>h))&&console.error(ye.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC AFTER =====1 "+Ue.getClientRuningFrame(!0)+" clientLoc1: 0",l.x,l.y,"lastX: "+this.lastX,"lastY: "+this.lastY,"lastFrame: "+this.lastFrame,"needMove: "+r),this.lastX=l.x,this.lastY=l.y,this.lastFrame=Ue.getClientRuningFrame(!0),ie.Debug==2&&console.log(ye.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC AFTER =====1 "+Ue.getClientRuningFrame(!0)+" clientLoc1: 0",l.x,l.y,"needMove: "+r);for(let O=1;O<this.bones.length;O++){let H=this.bones[O-1],Y=this.bones[O],Z=.6,W=Y.add(H.sub(Y).mul(Z));this.bones[O].x=W.x,this.bones[O].y=W.y}w===this.speedRate-1&&(this._processGrowth(),this._moveBody(),this._updateSkinRadio())}else{var l=this.bones[0];if(!this.isLogicSnake&&this.lastX!=0&&this.lastY!=0&&this.lastFrame!=0){let k=bi.getAngleToVec(this.dir);var f=this.speed*this.speedRate,g,b=Ci.distance(l.x,l.y,this.lastX,this.lastY),v;if(b==0?(v=f>>1,g=this.bones[0].add(k.mul(v))):b>f&&(v=(b-f)/2,v=-v,g=this.bones[0].add(k.mul(v))),g){ie.Debug==2&&console.log(ye.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC AFTER =====2 "+Ue.getClientRuningFrame(!0)+" clientLoc1: 0",l.x,l.y,"lastX: "+this.lastX,"lastY: "+this.lastY,"lastFrame: "+this.lastFrame,"needMove: "+r),this.tempBones=[],this.tempBones.push(g);for(let E=1;E<this.bones.length;E++){let F=this.bones[E].add(k.mul(v));this.tempBones.push(F)}}}this.lastX=l.x,this.lastY=l.y,this.lastFrame=Ue.getClientRuningFrame(!0),ie.Debug==2&&console.log(ye.GetLogTime,this.tag.roleId+", isLogicSnake: "+this.isLogicSnake+", hasConfirmed: "+t+": ======= LOC AFTER =====2 "+Ue.getClientRuningFrame(!0)+" clientLoc1: 0",l.x,l.y,"needMove: "+r),this._processGrowth(),this._moveBody(),this._updateSkinRadio()}this.isInvincible&&(this.bodyRing&&(this.bodyRing.visible||(this.bodyRing.visible=!0),this._updateBodyRing()),Date.now()>this.defaultInvincibleTime&&(this.isInvincible=!1,this.bodyRing&&(this.bodyRing.visible=!1)))}}getCurDir(){return this.dir}getAimDir(){return this.aimDir}rorateReadySend(){this.isSelf&&this.lastSendFrame!=Ue.currentFrame&&(this.rotateSend(),this.lastSendFrame=Ue.currentFrame)}showServerPos(e,t,r,s,o){this.getHead().setServerPosLog(e,t,r,s,o)}showLogInHead(e){this.getHead()&&this.getHead().showLogInHead(e)}setClientScore(e){this.getHead()&&this.getHead().setClientScore(e)}setLength(e){this.boneLength=e}setScore(e){this.score=e}_processGrowth(){var e=this.boneLength,t=this.bones.length;if(!(e==t&&e>=this.maxBoneLength)){if(e>t){let f=this.bones[this.bones.length-1];var r;this.tempBones&&(r=this.tempBones[this.tempBones.length-1]);for(var s,o=t+1;o<=e;o++)s=Zt.create(f.x,f.y),this.bones.push(s),r&&this.tempBones.push(Zt.create(r.x,r.y))}else e<t&&this.bones.splice(e);var l=this.getSkinLength(),u=this.skins.length;if(l>u)for(var p=u+1;p<=l;p++){let f=(p-1)*this.intervalBoneToDrawSkin,g=this.bodySkinPool.getBodySkin(ae.snake.skinFlag.body,this.color,this.tag,this);g.setPosition(this.bones[f]),xe.getInstance().addBodySkin(g),g.setLocalZOrder(-(p+1));let b=this.bones[f],v=this.bones[f].getRotationTo(b);g.setRotation(ae.snake.defaultRotation-v),this.skins.push(g)}else if(l<u){for(var p=l+1;p<=u;p++){var h=this.skins[p-1];this.bodySkinPool.returnBodySkin(h)}this.skins.splice(l)}this._updateSkinRadio()}}_moveBody(){let e=this.getSkinLength();for(let t=0;t<e;t++){let r=t*this.intervalBoneToDrawSkin;if(this.skins[t])if(this.bones[r]){this.tempBones?this.skins[t].setPosition(this.tempBones[r]):this.skins[t].setPosition(this.bones[r]);let s;r+1<this.bones.length?s=this.bones[r+1]:r-1>=0?s=this.bones[r-1]:s=this.bones[r];let o=this.bones[r].getRotationTo(s);this.skins[t].setRotation(ae.snake.defaultRotation-o),this.skins[t].setVisible(!0)}else this.skins[t].setVisible(!1)}}_updateSkinRadio(){let e=this.getSkinLength();for(let t=0;t<e;t++)this.skins[t]&&this.skins[t].updateAlpha(this.radio,this.speedRate)}showAddScore(e){this.isSelf&&this.getHead().node.showDamageLabelDetailDelay(e,100,!1)}get isSelf(){return this.tag&&this.tag.roleId==V.playerDto.pid}getHeadCollisionBounds(){let e=this.collisionHeadRadius,t=this.getCollisionHeadPosition();return t?new Laya.Rectangle(t.x-e,t.y-e,e*2,e*2):null}checkBodyCollision(e){let t=this.getCollisionHeadPosition();return t?e.checkCollision(t.x,t.y,this.collisionHeadRadius,this.isLogicSnake):!1}checkFoodCollision(e){let t=this.getCollisionHeadPosition();return t?e.checkCollision(t.x,t.y,this.suctionRadius):!1}rotateControl(e,t=!1){this.lastDir!=e&&(this.lastDir=e)}rotateSend(){if(Ue.clientRuningFrame!=Ue.startFrame){var e=V.playerDto.pid,t=this.getToServerHead(),r=x.snake.socket.MessageType.MSG_PLAYER_OPR,s=x.snake.socket.CS_PLAYER_OPR.fromObject({roleId:e,opr:1,value:this.lastDir,head:t,frame:Ue.getClientCurrentFrame(),curDir:this.getCurDir(),aimDir:this.getAimDir()});ft.sendData(r,s),this.lastDir!=-1&&this.lastSendDir!=this.lastDir&&(s.frame=Ue.getPredictFrameHalf(),Ue.frameNetQueue.addLocalOperation(s),this.lastSendDir=this.lastDir)}}rotate(e,t=!1){this.aimDir=e}updateSpeedRate(e){this.speedRate=e}getCollisionHeadPosition(){return this.getHead()?this.isLogicSnake?this.getHead().getLoogicPosition():this.getHead().getPosition():null}getHeadPosition(){return this.getHead()?this.getHead().getPosition():null}gotoDiePos(){if(this.skins)for(let e=0;e<this.skins.length;e++){let t=this.skins[e];t&&t.gotoDiePos()}}getHead(){return this.skins?this.skins[0]:null}getSpeed(){return this.speed}getSpeedRate(){return this.speedRate}getIsSend(){return this.isSend}setIsSend(e){this.isSend=e}getIsStop(){return this.isStop}setIsStop(e){this.isStop=e}getToServerHead(){var e=new x.snake.socket.SnakeObject,t=new x.snake.socket.PointObject;return t.x=this.bones[0].x,t.y=this.bones[0].y,e.loc=t,e}updateHead106(e,t,r,s,o){if(this.isAlive()&&s){if(this.oprIndex!=-1&&o!=this.oprIndex+1){var l=this.tag.roleId,u="检测到106 操作序号异常（"+l+"），保留控制台日志。"+ye.GetLogTime+" "+l+" 当前序号："+this.oprIndex+" 收到序号："+o+", C: ("+this.bones[0].x+", "+this.bones[0].y+"), "+this.clientFrame+" S:("+t.loc.x+", "+t.loc.y+"), "+e+", hasConfirmed: "+s;console.error(u),ie.Debug==2&&o-this.oprIndex>1&&ye.alertYes(u);return}this.oprIndex=o}}shine(e){let t=this.skins.length;for(let r=0;r<t;r++)this.skins[r].setVisible(!this.skins[r].isVisible())}show(){let e=this.skins.length;for(let t=0;t<e;t++)this.skins[t].setVisible(!0)}getSkins(){return this.skins}getRadio(){return this.radio}setAlive(e){this.alive=e}setGray(e){for(let t=0;t<this.skins.length;t++)this.skins[t].setGray(e)}isAlive(){return this.alive}getLength(){return this.boneLength}getScore(){return this.score}getSkinLength(){return Math.floor(this.boneLength/this.intervalBoneToDrawSkin)}recordBones(){var e=[];for(let t=0;t<this.bones.length;t++){let r=this.bones[t];e.push(r.clone())}return e}getState(){return{dir:this.dir,aimDir:this.aimDir,bones:this.recordBones(),speedRate:this.speedRate,oprIndex:this.oprIndex,alive:this.isAlive()}}restoreState(e){ie.Debug>2&&console.log("============= restoreState: ","roleId:"+this.tag.roleId,"lastOprIndex:"+this.oprIndex,"oprIndex:"+e.oprIndex,"lastLen:"+this.boneLength,"confirmLen:"+e.len,"lastScore:"+this.score,"confirmScore:"+e.score,"lastBoneLen:"+this.bones.length,"confirmBoneLen:"+e.bones.length,"isLogicSnake:"+this.isLogicSnake),this.dir=e.dir,this.aimDir=e.aimDir,this.bones=this.deepCopyBones(e.bones),this.speedRate=e.speedRate,this.oprIndex=e.oprIndex}deepCopyBones(e){var t=[];for(let r=0;r<e.length;r++){let s=e[r];t.push(s.clone())}return t}getDoublePointsProbability(){return this.snakeItem.doublePointsProbability}adjustVisualState(e){this.dir=e.dir,this.aimDir=e.aimDir,this.bones=this.deepCopyBones(e.bones),this.speedRate=e.speedRate,this.oprIndex=e.oprIndex,this.boneLength=e.boneLength,this.score=e.score}destroy(){Laya.timer.clearAll(this),this.isSelf&&(xe.getInstance().skinLen=this.getSkinLength(),xe.getInstance().kills=this.tag.kills),this.skins.forEach(e=>this.bodySkinPool.returnBodySkin(e)),this.skins=[],this.bodyRing&&this.bodyRing.removeSelf(),this.bodyRing=null,this.snakeItem=null,this.tag=null,this.owner=null}}});var Ml,vw=_(()=>{"use strict";dR();mn();jr();Yt();xr();to();Al();Dn();ur();yi();dn();Ml=class{constructor(e,t){this.isViewReadyDie=!1;this.isLogicReadyDie=!1;this.isStartShineed=!1;this.isShineed=!1;this.isConfirmDied=!1;this.dieRuningFrame=0;this.logicDieRuningFrame=0;this.logicDieTime=0;this.viewSnake=new du(!1,e,t,this),$e.matchDto.matchType!=Ke.MATCH_TYPE_PVE&&(this.logicSnake=new du(!0,e,t,this)),this.tag=t}updateData(e){this.logicSnake.updateData(e),this.viewSnake.updateData(e),this.tag=e}getCurDir(){return this.viewSnake.dir}getAimDir(){return this.viewSnake.aimDir}getHead(e){return e?this.logicSnake.getHead():this.viewSnake.getHead()}showLogInHead(e,t){t?this.logicSnake.showLogInHead(e):this.viewSnake.showLogInHead(e)}setClientScore(e,t){t?this.logicSnake.setClientScore(e):this.viewSnake.setClientScore(e)}get isSelf(){return this.tag&&this.tag.roleId==V.playerDto.pid}move(e,t,r,s){if(t){if(r){if(this.dieRuningFrame!=0&&this.isViewReadyDie&&Ue.clientRuningFrame>this.dieRuningFrame+10&&!this.isLogicReadyDie&&this.isAlive(!0)){var o=ye.GetLogTime+" Snake DIE "+this.tag.roleId+" ==== 死亡恢复: clientRuningFrame: "+Ue.clientRuningFrame+", dieRuningFrame: "+this.dieRuningFrame;console.warn(o),this.relive(),this.dieRuningFrame=0}var l=Laya.Browser.now();if(this.logicDieTime!=0&&this.isLogicReadyDie&&l>this.logicDieTime+8e3&&this.isAlive(!0)){var o=ye.GetLogTime+" Snake DIE "+this.tag.roleId+" ==== 死亡异常: now: "+xi.getTimeByMs(l)+", logicDieTime: "+xi.getTimeByMs(this.logicDieTime)+", clientRuningFrame: "+Ue.clientRuningFrame+", logicDieRuningFrame: "+this.logicDieRuningFrame;console.warn(o),ie.vType==0&&ye.alertYes(o)}}this.logicSnake.move(e,r,s)}else this.viewSnake.move(e,r,s),this.updateOther()}setLength(e,t){t?this.logicSnake.setLength(e):this.viewSnake.setLength(e)}setScore(e,t){t?this.logicSnake.setScore(e):this.viewSnake.setScore(e)}showAddScore(e,t){t?this.logicSnake.showAddScore(e):this.viewSnake.showAddScore(e)}rotateControl(e,t=!1){this.viewSnake&&this.viewSnake.rotateControl(e,t)}rotateSend(){this.viewSnake.rotateSend()}rotate(e,t){t?this.logicSnake.rotate(e):this.viewSnake.rotate(e)}updateSpeedRate(e,t){t?this.logicSnake.updateSpeedRate(e):this.viewSnake.updateSpeedRate(e)}getToServerHead(e){return e?this.logicSnake.getToServerHead():this.viewSnake.getToServerHead()}getSpeed(e){return e?this.logicSnake.getSpeed():this.viewSnake.getSpeed()}getSpeedRate(e){return e?this.logicSnake.getSpeedRate():this.viewSnake.getSpeedRate()}getHeadPosition(e){return e?this.logicSnake.getHeadPosition():this.viewSnake.getHeadPosition()}getCollisionHeadPosition(e){return e?this.logicSnake.getCollisionHeadPosition():this.viewSnake.getCollisionHeadPosition()}addKill(e){if(this.tag&&(this.tag.kills+=e),this.isSelf){var t=this.tag.kills>5?5:this.tag.kills;let r=`soundName_kill_${t}`;wt[r]?wt.playSoundByName(wt[r]):console.warn(`音效 ${r} 不存在`),this.getHead(!1).node.showDamageLabelDetailDelay(e,100,!0)}}sendDie(){this.isLogicReadyDie=!0;var e=Laya.Browser.now();console.warn(`Snake DIE ${this.tag.roleId} `,"sendDie now: "+e,this.logicDieTime,"clientRuningFrame: "+Ue.clientRuningFrame,this.logicDieRuningFrame,this.getHeadPosition(!1)),this.logicDieTime=e,this.logicDieRuningFrame=Ue.clientRuningFrame,this.setIsStop(!0,!0)}readyDie(){console.warn(ye.GetLogTime+` Snake DIE ${this.tag.roleId} `,this.isStartShineed,"readyDie "+Ue.clientRuningFrame,this.dieRuningFrame),!this.isStartShineed&&(this.dieRuningFrame=Ue.clientRuningFrame+1,this.isStartShineed=!0,this.isViewReadyDie=!0,this.isShineed=!1,this.setIsStop(!0,!1),this.viewSnake.gotoDiePos(),this.startShine())}startShine(){console.log(`Snake ${this.tag.roleId} `,"startShine"),Laya.timer.clear(this,this.shine),Laya.timer.frameLoop(5,this,this.shine),Laya.timer.once(2e3,this,this.haveShined)}shine(e){this.viewSnake.shine(e),this.logicSnake&&this.logicSnake.shine(e)}haveShined(){console.log(`Snake ${this.tag.roleId} `,"haveShined"),this.isStartShineed=!1,this.isShineed=!0,this.stopShine(),this.isConfirmDied&&this.die()}stopShine(){console.log(`Snake ${this.tag.roleId} `,"stopShine"),this.viewSnake.show(),this.logicSnake&&this.logicSnake.show(),Laya.timer.clear(this,this.shine)}relive(){console.log(`Snake ${this.tag.roleId} `,"relive","this.isConfirmReadyDie: "+this.isLogicReadyDie),this.setIsStop(!1,!1),this.isViewReadyDie=!1,this.setIsSend(!1,!1),this.stopShine()}confirmDie(){console.log(`Snake ${this.tag.roleId} `,"confirmDie","this.isShineed: "+this.isShineed),this.stopShine(),this.die()}die(){console.log(`Snake ${this.tag.roleId} has died.`),this.viewSnake.setAlive(!1),this.logicSnake&&this.logicSnake.setAlive(!1),this.isSelf?(this.viewSnake.setGray(!0),this.logicSnake&&this.logicSnake.setGray(!0),wt.playSoundByName(wt.soundName_kill_die),Laya.timer.once(1e3,this,this.goMatchEnd)):xe.getInstance().removeSnake(this.tag.roleId)}goMatchEnd(){$e.matchDto.matchType==Ke.MATCH_TYPE_PVE?Pn.onPveEnd():(xe.getInstance().removeSnake(this.tag.roleId),$e.onMockMatchEnd())}isAlive(e){return e?this.logicSnake.isAlive():this.viewSnake.isAlive()}getSkinLength(e){return e?this.logicSnake.getSkinLength():this.viewSnake.getSkinLength()}getScore(e){return e?this.logicSnake.getScore():this.viewSnake.getScore()}getHeadCollisionBounds(e){return e?this.logicSnake.getHeadCollisionBounds():this.viewSnake.getHeadCollisionBounds()}isInvincible(e){return e?this.logicSnake.isInvincible:this.viewSnake.isInvincible}len(e){return e?this.logicSnake.boneLength:this.viewSnake.boneLength}intervalBoneToDrawSkin(e){return e?this.logicSnake.intervalBoneToDrawSkin:this.viewSnake.intervalBoneToDrawSkin}getSkins(e){return e?this.logicSnake.getSkins():this.viewSnake.getSkins()}getLength(e){return e?this.logicSnake.getLength():this.viewSnake.getLength()}getRadio(e){return e?this.logicSnake.getRadio():this.viewSnake.getRadio()}checkFoodCollision(e,t){return t?this.logicSnake.checkFoodCollision(e):this.viewSnake.checkFoodCollision(e)}getIsSend(e){return e?this.logicSnake.getIsSend():this.viewSnake.getIsSend()}setIsSend(e,t){t?this.logicSnake.setIsSend(e):this.viewSnake.setIsSend(e)}getIsStop(e){return this.tag?e?this.logicSnake.getIsStop():this.viewSnake.getIsStop():!0}setIsStop(e,t){t?this.logicSnake.setIsStop(e):this.viewSnake.setIsStop(e)}checkBodyCollision(e,t){return t?this.logicSnake.checkBodyCollision(e):this.viewSnake.checkBodyCollision(e)}updateOther(){}destroy(){console.log(`Snake ${this.tag.roleId} has been destroyed.`),Laya.timer.clearAll(this),this.viewSnake.destroy(),this.logicSnake&&this.logicSnake.destroy(),this.viewSnake=null,this.logicSnake=null,this.tag=null}}});var Id,mR=_(()=>{"use strict";Nn();_r();hR();Al();vw();Id=class extends Ml{constructor(t,r){super(t,r);this.isAi=!1;this.tag.roleId&&this.tag.roleId.startsWith(ae.snake.aiPrefix)&&(this.aiController=new W0(this),this.isAi=!0)}pveDie(){this.isSelf?(this.isConfirmDied=!0,this.readyDie()):(this.toFood(),this.die())}toFood(){var t=this.getSkins(!1);for(let r=4;r<t.length;r+=5){let s=t[r],o=(Math.random()-.5)*20,l=(Math.random()-.5)*20,u=s.getPosition().x+o,p=s.getPosition().y+l;vi.addFoodByPosWithDie(u,p)}}goMatchEnd(){Pn.onPveEnd()}updateOther(){this.aiController&&this.aiController.update()}goTargetPos(t){this.aiController&&this.aiController.goTargetPos(t)}destroy(){super.destroy(),this.aiController&&(this.aiController.destroy(),this.aiController=null)}}});var V0,fR=_(()=>{"use strict";_d();V0=class{constructor(e){this.pool=[];this.pnl=e}getBodySkin(e,t,r,s){if(this.pool.length>0){let o=this.pool.pop();return o.reset(e,this.pnl,t,r,s),o}else return new kn(e,this.pnl,t,r,s)}returnBodySkin(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}}});var K0,$0,Iw=_(()=>{"use strict";$r();_r();hu();fR();Yt();xr();Ot();Nn();K0=class{constructor(){this.selfSnake=null;this.isControl=!1}init(){this.container||(this.container=new Laya.Sprite),this.matchHeroSprDic=new ht(!0),this.selfSnake=null,this.collision=ts.getInstance(null),this.bodySkinPool=new V0(this.container)}updateSnake(e,t){return console.log("updateSnake: "+t.roleId,V.playerDto.pid),e.updateData(t),V.playerDto.pid==t.roleId&&(this.selfSnake=e),e}addBodySkin(e){this.collision.addBodySkin(e)}removeBodySkin(e){this.collision.removeBodySkin(e)}updateSnakes(e,t,r,s){this.moveSnakes(e,t,r,s),this.collision.refresh(),this.checkAllSnakeCollision(t,r)}getSnake(e){return this.matchHeroSprDic.get(e)}removeSnake(e){var t=this.matchHeroSprDic.get(e);t?(t.destroy(),this.matchHeroSprDic.remove(e)):console.log("removeSnake error: "+e)}removeAllSnakes(){var e=this.matchHeroSprDic.getValues();for(let t of e)t.destroy();this.matchHeroSprDic=new ht(!0)}moveSnakes(e,t,r,s){var o=this.matchHeroSprDic.getValues();for(let l of o)l.isAlive(t)&&l.move(e,t,r,s)}getSelfSnakePos(e){return this.selfSnake?this.selfSnake.getHeadPosition(e):null}createSnakes(){this.matchHeroSprDic=new ht(!0);let e=$e.matchDto.members.length;for(var t=0;t<e;t++)var r=$e.matchDto.members[t],s=this.createSnake(r)}newAddSnake(e){var t=this.matchHeroSprDic.get(e.roleId);t?this.updateSnake(t,e):t=this.createSnake(e)}restoreSnakes(){this.removeAllSnakes(),this.matchHeroSprDic=new ht(!0);let e=$e.matchDto.members.length;for(var t=0;t<e;t++){var r=$e.matchDto.members[t];try{var s=this.createSnake(r)}catch(o){console.warn(o)}}}getBodySkinsWithOutOne(e,t){var r=[],s=this.matchHeroSprDic.getValues();for(let l of s){var o=l;o.tag&&e.tag.roleId!=o.tag.roleId&&(r=r.concat(o.getSkins(t)))}return r}getBodySkinPool(){return this.bodySkinPool}showLogInHead(e,t){this.selfSnake&&this.selfSnake.tag&&this.selfSnake.showLogInHead(e,t)}countSnakeLen(e,t,r,s){var o=t+1,l=re.getSheetDataByMultiKey(re.m_dicSnakeLengthRules,[e,t+1]);return l&&r>=l.accumulatePoints?this.countSnakeLen(e,o,r,s):t*s}getRoleById(e){return this.matchHeroSprDic?this.matchHeroSprDic.get(e):null}setMyHeroDirection(e){this.selfSnake&&(e!=-4?(this.rorate(ae.snakeType.SELF,e),this.isControl=!0):this.isControl=!1)}eatFoodAndAddScore(e,t){var r=e.fid,s=e.score,o=e.lenght,l=e.roleId,u=this.getRoleById(l);u&&(u.setLength(o,t),vi.eateFoodIds(u,r,s,t),u.setScore(s,t))}clear(){this.removeAllSnakes(),this.container.removeSelf(),this.container=null,this.selfSnake=null,this.matchHeroSprDic=null,this.bodySkinPool.clear(),this.collision=null}};K0._instance=null;$0=K0});var q0,gR=_(()=>{"use strict";Kt();q0=class extends x.snake.socket.ItemObject{}});var Sw,ro,mu=_(()=>{"use strict";fu();Yi();ri();xt();Ta();Sw=class i{constructor(){this._isPop=!1;L.on(A.EVENT_CHECK_REMAIN,this,this.onCheckRemain)}static getInstance(){return i._instance||(i._instance=new i),i._instance}get model(){return sr}get isPop(){return this._isPop}startShow(){console.log("startShow");var e=this.model.hasRemain();!this._isPop&&e&&(this._isPop=!0,e instanceof gn?L.event(A.EVENT_OPEN_MODULE,R.ItemGetDialog):L.event(A.EVENT_OPEN_MODULE,R.HeroGetDialog))}onCheckRemain(e){if(e==R.ItemGetDialog||e==R.HeroGetDialog){var t=this.model.hasRemain();t?t instanceof gn?L.event(A.EVENT_OPEN_MODULE,R.ItemGetDialog):L.event(A.EVENT_OPEN_MODULE,R.HeroGetDialog):this._isPop=!1}}},ro=Sw.getInstance()});var Y0,bR=_(()=>{"use strict";$r();gR();ri();xt();fu();Ta();mu();Ot();Y0=class{constructor(){this.m_dicItemList=new ht,this.m_dicTypeList=new ht,this.m_dicSubTypeList=new ht,this.m_dicBackList=new ht}initData(e){this.m_dicItemList=new ht,this.m_dicTypeList=new ht,this.m_dicSubTypeList=new ht,this.m_dicBackList=new ht;let t;for(let s=0;s<e.length;s++){t=new gn;var r=e[s];t.id=r.itemId,r.pk&&(t.m_iPk=r.pk),t.num=r.num,t.num>0&&this.pushItem(t)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------PackageData: ")}getCountById(e,t=!0){return re.m_dicItems.get(e)==null?0:this.getItemCountById(e,t)}pushItem(e){this.m_dicItemList.set(e.id,e),this.m_dicTypeList.get(e.type)==null&&this.m_dicTypeList.set(e.type,new ht),this.m_dicSubTypeList.get(e.subType)==null&&this.m_dicSubTypeList.set(e.subType,new ht),this.m_dicBackList.get(e.backType)==null&&this.m_dicBackList.set(e.backType,new ht),this.m_dicTypeList.get(e.type).set(e.id,e),this.m_dicSubTypeList.get(e.subType).set(e.id,e),this.m_dicBackList.get(e.backType).set(e.id,e)}removeItem(e){this.m_dicItemList.remove(e.id),this.m_dicTypeList.get(e.type).remove(e.id),this.m_dicSubTypeList.get(e.subType).remove(e.id),this.m_dicBackList.get(e.backType).remove(e.id)}updateData(e,t=!1,r=!0){console.log("updateData: ",e,t,r);let s=[],o=!1,l;for(let u=0;u<e.length;u++){e[u]instanceof Array?(l=new q0,l.itemId=e[u][0],l.num=e[u][1]):l=e[u];let p=this.m_dicItemList.get(l.itemId);p==null&&(p=new gn(l.itemId),this.pushItem(p),p.m_bNew=!0),t?p.num=l.num:(p.newAddCnt=l.num,p.num=p.num+l.num),s.push(p.id),p.num<=0&&this.removeItem(p),p.newAddCnt>0&&sr.needPop&&r&&(sr.addItem(p),o=!0)}o&&sr.needPop&&sr.autoPop&&ro.startShow(),s.length>0&&L.event(A.PACKAGE_UPDATE_ITEM,[s])}getItemById(e){return this.m_dicItemList.get(e)}getItemsBySubType(e){let t=this.m_dicSubTypeList.get(e);return t==null&&(t=[]),t}getListByType(e){let t=[];return this.m_dicTypeList.get(e)&&(t=this.m_dicTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}getBackByType(e){let t=[];return this.m_dicBackList.get(e)&&(t=this.m_dicBackList.get(e).values.slice()),t.sort(this.sortOnQa),t}getListBySubType(e){let t=[];return this.m_dicSubTypeList.get(e)&&(t=this.m_dicSubTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}sortOnQa(e,t){let r=e.itemItem.sort,s=t.itemItem.sort;return r<s?-1:r>s?1:0}sortOnExpTime(e,t){let r=e.expTime,s=t.expTime;return r<s?1:r>s?-1:0}getItemCountById(e,t=!0){let r=this.getItemById(e);return r?r.num:0}}});var Sd,yR=_(()=>{"use strict";At();Ot();Sd=class i{constructor(e=0){this._m_iLevel=0;this.isShopEntry=!1;this.m_bIsSetId=!1;e!=0&&(this.id=e)}get m_iLevel(){return this._m_iLevel>0?this._m_iLevel:1}set m_iLevel(e){this._m_iLevel=e||0}set snakeName(e){this._snakeName=e}get snakeName(){return this._snakeName?this._snakeName:z.getLanguage(this.snakeItem.name)}get id(){return this._m_iId}set id(e){this._m_iId=e,this.m_bIsSetId||(this.m_bIsSetId=!0,this.m_iOriginalId=e),this.setConfigData()}setConfigData(){if(this.id!=0&&(this.snakeItem=re.m_dicSnakes.get(this.id.toString()),!this.snakeItem)){console.log("[          <snakes> find out id:"+this.id+"             ]");return}}copy(){let e=new i(this.id);return e.m_iLevel=this.m_iLevel,e}compareName(){return z.getLanguage(this.snakeItem.name)}compareLevel(){return parseFloat(this.m_iLevel+"")}compareId(){return parseInt(this.id+"")}}});var Q0,_R=_(()=>{"use strict";ri();xt();Ta();mu();$r();yR();Q0=class{constructor(){this.m_dicSnakeList=new ht}initData(e){this.m_dicSnakeList=new ht;let t;for(let s=0;s<e.length;s++){t=new Sd;var r=e[s];t.id=r.id,t.unkey=r.unkey,t.attr=r.attr,t.skin=r.skin,t.upgrade=r.upgrade,t&&this.pushSnake(t)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------SnakePackageData: ")}getCountById(e,t=!0){return this.getSnakeCountById(e,t)}pushSnake(e){this.m_dicSnakeList.set(e.unkey,e)}removeSnake(e){this.m_dicSnakeList.remove(e.unkey)}updateData(e,t=!1,r=!0){console.log("updateData: ",e,t,r);let s=[],o=!1,l;for(let u=0;u<e.length;u++){l=e[u];let p=this.m_dicSnakeList.get(l.unkey);p==null&&(p=new Sd(l.id),p.unkey=l.unkey,this.pushSnake(p)),p.attr=l.attr,p.skin=l.skin,p.upgrade=l.upgrade,s.push(p.unkey),sr.needPop&&r&&(sr.addSnakeItem(p),o=!0)}o&&sr.needPop&&sr.autoPop&&ro.startShow(),s.length>0&&L.event(A.PACKAGE_UPDATE_ITEM,[s])}getSnakeById(e){return this.m_dicSnakeList.get(e)}getSnakeCountById(e,t=!0){return this.getSnakeById(e)?1:0}}});var ww,Ar,Mo=_(()=>{"use strict";bR();xt();ri();_R();ww=class i{constructor(){this.m_packageData=new Y0,this.m_snakePackageData=new Q0}static getInstance(){return i._instance||(i._instance=new i),i._instance}initKnapsackData(e){this.m_packageData.initData(e),L.event(A.EVENT_ITEM_UPDATE)}updateKnapsackItems(e){this.m_packageData.updateData(e)}getAllKnapsackItems(){return this.m_packageData.m_dicItemList?this.m_packageData.m_dicItemList.values:[]}getKnapsackItemById(e){return this.m_packageData.m_dicItemList?this.m_packageData.getItemById(e):null}getKnapsackItemCount(e){return this.m_packageData.getCountById(e)}hasKnapsackItem(e){return this.getKnapsackItemCount(e)>0}initSnakeData(e){this.m_snakePackageData.initData(e),L.event(A.EVENT_SNAKE_UPDATE)}updateSnakeItems(e){this.m_snakePackageData.updateData(e)}getAllSnakeItems(){return this.m_snakePackageData.m_dicSnakeList?this.m_snakePackageData.m_dicSnakeList.values:[]}getSnakeItemById(e){return this.m_snakePackageData.m_dicSnakeList?this.m_snakePackageData.getSnakeById(e):null}getSnakeItemCount(e){return this.m_snakePackageData.getCountById(e)}hasSnakeItem(e){return this.getSnakeItemCount(e)>0}isSnakeItemEnough(e,t){return this.getSnakeItemCount(e)>=t}},Ar=ww.getInstance()});var Rl,kw,xR,vR=_(()=>{"use strict";Kt();_r();ss();bw();Yt();wl();Ot();mR();ur();Iw();Mo();Rl=class Rl extends $0{constructor(){super(...arguments);this.spawnTimer=0;this.snakeUnKey=0}static getInstance(){return Rl._instance||(Rl._instance=new Rl),Rl._instance}createSnake(t){if(this.container==null){console.log(t.roleId+" 无法添加 container is null");return}let r=new Id(this.container,t);if(this.matchHeroSprDic.get(t.roleId))throw new Error(t.roleId+" 被重复添加！");return this.matchHeroSprDic.set(t.roleId,r),console.log("createSnake: "+t.roleId,V.playerDto.pid),V.playerDto.pid==t.roleId&&(this.selfSnake=r),r}rorate(t,r){t===ae.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.rotate(r,!1)}updateSpeedRate(t,r){t===ae.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.updateSpeedRate(r,!1)}checkAllSnakeCollision(t,r){var s=this.matchHeroSprDic.getValues();for(let l of s){var o=l;o&&o.tag&&Tl.checkCollisionsWithPve(o,null,this.collision,r)}}async spawnSnakes(){var t=[],r=ae.snake.initCount-1,s=await ye.getNpcNames(r);for(let u=1;u<=r;u++){var o=s[u-1],l=this.spawnRandomPlayerObject(o,!1,!1);t.push(l)}return t}spawnRandomPlayerObject(t,r=!0,s=!1){let o=ae.mapSize.width,l=ae.mapSize.height;var u=ae.mapSize.offsetDistance,p=Ci.randomRange(u,o-u),h=Ci.randomRange(u,l-u);let f=p,g=o-p,b=h,v=l-h,w=Math.min(f,g,b,v);console.debug("spawnRandomPlayerObject playerName: ",t+", leftDist: ",f+", rightDist: ",g+", topDist: ",b+", bottomDist: ",v+", minDist: ",w);let k;w===f?b<v?k=Math.random()*45:b>v?k=Math.random()*45+315:k=Math.random()*90-45:w===g?b<v?k=135+Math.random()*45:b>v?k=180+Math.random()*45:k=180+Math.random()*90-45:w===b?f<g?k=45+Math.random()*45:f>g?k=90+Math.random()*45:k=90+Math.random()*90-45:f<g?k=270+Math.random()*45:f>g?k=225+Math.random()*45:k=270+Math.random()*90-45,k=(k+360)%360,k=Math.floor(k);var E=this.getPlayerObjectByPos(t,p,h,k,r,s);return E}playerLen(){var t=this.matchHeroSprDic.size;return t}async spawnSnake(){if(!(this.playerLen()>=ae.snake.maxCount)){var t=await ye.getNpcNames(1),r=t[0],s=this.spawnRandomPlayerObject(r,!0,!1);this.createSnake(s)}}update(t){this.spawnTimer+=t,this.spawnTimer>=ae.snake.spawnInterval&&(this.spawnTimer=0,this.spawnSnake())}getPlayerObjectByPos(t,r,s,o,l=!0,u=!1){console.debug("getPlayerObjectByPos: ",t," born: ( "+r,s+" ), dir: "+o);var p=new Zt(r,s),h="",f,g=0,b=0,v=new x.snake.socket.PlayerObject;v.aimDir=v.direction=o,v.speed=1,v.state=!0;var w;if(v.enterTime=Laya.timer.currTimer,v.oprTime=Laya.timer.currTimer,l?v.wdTime=Laya.timer.currTimer+3e3:v.wdTime=Laya.timer.currTimer,u){var k=V.playerDto,E=k.snakeId,F=Ar.getSnakeItemById(E);g=F.id,b=k.skinId,w=F.snakeItem.initLength,h=k.name,f=k.pid,v.roleId=f+"";var O=F.attr;v.attr=O;for(let Ee=0;Ee<O.length;Ee++)if(O[Ee]){let gt=O[Ee].split(","),pi=gt[0],gi=gt[1];if(pi=="1"){var H=parseInt(gi),Y=w;w=H,console.log("ATTR: 计算长度：后端len: "+Y+", newLen: "+H)}}}else{this.snakeUnKey+=1,f=this.snakeUnKey;var Z=re.m_dicSnakes.keys.length,W=Math.floor(Math.random()*Z);g=re.m_dicSnakes.keys[W];var le=ae.snake.skinIds.length,oe=Math.floor(Math.random()*le);b=ae.snake.skinIds[oe],w=Ci.randomInt(ae.snake.aiMinLen,ae.snake.aiMaxLen),v.roleId=ae.snake.aiPrefix+f,h=t}var de=re.m_dicSnakes.get(g);v.userName=h,v.snakeId=g,v.skin=b;var Ne=de.baseSpeed;v.length=w*de.intervalBoneToDrawSkin;var He=re.getSheetDataByMultiKey(re.m_dicSnakeLengthRules,[g,w]);v.score=He.accumulatePoints,v.kills=0;var Qe=[],Xt=v.direction*Math.PI/180;let Me=Zt.create(Math.cos(Xt),-Math.sin(Xt));for(let Ee=0;Ee<v.length;Ee++){let gt;if(Ee===0)gt=p||Zt.create(0,0);else{var _e=Qe[Ee-1],Le=Zt.create(_e.loc.x,_e.loc.y);let pi=.6;gt=Le.add(Me.mul(Ne*pi))}var P=new x.snake.socket.SnakeObject,nt=new x.snake.socket.PointObject;if(gt.x<ae.mapSize.offsetX+de.bodyRadius||gt.x>ae.mapSize.width-(ae.mapSize.offsetX+de.bodyRadius)||gt.y<ae.mapSize.offsetY+de.bodyRadius||gt.y>ae.mapSize.height-(ae.mapSize.offsetY+de.bodyRadius)){v.length=Ee,w=Math.floor(v.length/de.intervalBoneToDrawSkin);var He=re.getSheetDataByMultiKey(re.m_dicSnakeLengthRules,[g,w]);v.score=He.accumulatePoints;continue}nt.x=gt.x,nt.y=gt.y,console.debug("bone: ",Ee," pos: ",gt),P.loc=nt,Qe[Ee]=P}return v.snake=Qe,v}calculateMaxLength(t,r,s,o,l,u,p){let h=ae.mapSize.offsetX+u,f=ae.mapSize.width-ae.mapSize.offsetX-u,g=ae.mapSize.offsetY+u,b=ae.mapSize.height-ae.mapSize.offsetY-u,v=s*Math.PI/180,w=Math.cos(v),k=Math.sin(v),E=-w,F=-k;function O(Ne,He,Qe,Xt){return Ne===0?null:Ne>0?(Xt-He)/Ne:(Qe-He)/Ne}let H=O(E,t,h,f),Y=O(F,r,g,b),Z=[];if(H!==null&&H>0&&Z.push(H),Y!==null&&Y>0&&Z.push(Y),Z.length===0)return 0;let W=Math.min(...Z),le=o*l,oe=Math.floor(W/le);return Math.floor(oe/p)}};Rl._instance=null;kw=Rl,xR=kw});var wd,IR=_(()=>{"use strict";xr();vw();jr();Dn();wd=class extends Ml{constructor(t,r){super(t,r);this.lastSendFrame=-1}rorateReadySend(){this.isSelf&&this.viewSnake&&this.lastSendFrame!=Ue.currentFrame&&(this.rotateSend(),this.lastSendFrame=Ue.currentFrame)}rotateSend(){this.viewSnake.rotateSend()}goMatchEnd(){xe.getInstance().removeSnake(this.tag.roleId),$e.onMockMatchEnd()}adjustVisualState(){this.viewSnake.adjustVisualState(this.logicSnake)}updateOther(){}}});var Bl,Ew,SR,wR=_(()=>{"use strict";Kt();$r();_r();bw();Dn();Yt();xr();On();IR();Iw();Bl=class Bl extends $0{static getInstance(){return Bl._instance||(Bl._instance=new Bl),Bl._instance}createSnake(e){let t=new wd(this.container,e);if(this.matchHeroSprDic.get(e.roleId))throw new Error(e.roleId+" 被重复添加！");return this.matchHeroSprDic.set(e.roleId,t),console.log("createSnake: "+e.roleId,V.playerDto.pid),V.playerDto.pid==e.roleId&&(this.selfSnake=t),t}adjustVisualState(){var e=this.matchHeroSprDic.getValues();for(let t of e)t.tag&&t.adjustVisualState()}rorate(e,t){e===ae.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.rotateControl(t,!0)}rorateReadySend(){this.selfSnake&&(this.selfSnake.tag==null||!this.selfSnake.isAlive(!1))||this.selfSnake.rorateReadySend()}updateSpeedRate(e,t){if(e===ae.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.isAlive(!1)){var r=V.playerDto.pid,s=this.selfSnake.getToServerHead(!1),o=x.snake.socket.MessageType.MSG_PLAYER_OPR,l=x.snake.socket.CS_PLAYER_OPR.fromObject({roleId:r,opr:2,value:t,head:s,frame:Ue.getClientCurrentFrame(),curDir:this.selfSnake.getCurDir(),aimDir:this.selfSnake.getAimDir()});ft.sendData(o,l),l.frame=Ue.getPredictFrameHalf(),Ue.frameNetQueue.addLocalOperation(l)}}checkAllSnakeCollision(e,t){var r=this.matchHeroSprDic.getValues();for(let o of r){var s=o;s&&s.tag&&(e?Tl.checkCollisionsWithConfirm(s,null,this.collision,t):Tl.checkCollisions(s,null,this.collision,t))}}restoreSnakes(){this.removeAllSnakes(),this.matchHeroSprDic=new ht(!0);let e=$e.matchDto.members.length;for(var t=0;t<e;t++){var r=$e.matchDto.members[t];try{var s=this.createSnake(r)}catch(o){console.warn(o)}}}getSnakesState(){let e={snakes:{}};var t=this.matchHeroSprDic.getValues();for(let s of t){var r=s;let o=r.tag.roleId;e.snakes[o]=r.logicSnake.getState()}return e}restoreState(e){for(let r in e.snakes){var t=this.matchHeroSprDic.get(r);t&&t.logicSnake.restoreState(e.snakes[r])}}};Bl._instance=null;Ew=Bl,SR=Ew});var xe,jr=_(()=>{"use strict";to();vR();wR();xe=class{static getInstance(){return Ke.matchType===Ke.MATCH_TYPE_PVE?xR.getInstance():SR.getInstance()}}});var Dl,Lw,Un,Tw=_(()=>{"use strict";hu();vd();Nn();Dn();jr();yi();Ll();On();Dl=class Dl{static getInstance(){return Dl.instance||(Dl.instance=new Dl),Dl.instance}init(e=null){if(!e)throw new Error("gameLayer Must Be Not Null");xe.getInstance().init(),vi.init();let t=xe.getInstance().container,r=vi.container,s=new Laya.Sprite;e.addChild(r),e.addChild(t),e.addChild(s),s.addChild(Fn.getInstance()),vi.init(),this.onConnectRoom()}onConnectRoom(){ft.initSocket()}createData(){xe.getInstance().createSnakes(),vi.createFoodsByData()}startGame(){Ue.start()}clearTimer(){Ue.stop()}endTimer(){Ue.end()}update(e,t,r,s=!0){if(xe.getInstance().updateSnakes(Laya.timer.delta,t,r,s),!t&&(fn.move(xe.getInstance().getSelfSnakePos(t)),ie.needDraw)){let o=Fn.getInstance();o&&(o.clearDraw(),ts.getInstance(null).drawDebug(o.graphics))}}restoreData(){xe.getInstance().restoreSnakes(),vi.restoreFoods()}clear(){this.clearTimer()}};Dl.instance=null;Lw=Dl,Un=Lw.getInstance()});var Cw,kd,Aw=_(()=>{"use strict";Cw=class{constructor(){this.arenaId=0;this.coinType=0;this.members=[];this.item=[];this.remainderCd=0;this.startTime=0;this.nowTime=0;this.matchType=0;this.watch=[];this.anonymous=0}},kd=Cw});var X0,kR=_(()=>{"use strict";Aw();dw();mw();to();ri();xt();yi();Yt();Ot();xr();Kt();On();$r();ur();Nn();jr();Dn();X0=class{constructor(){this.isStart=!1;this.eatFoodDic=new ht;this._operationQueue={};this._localOperationQueue={};this.latestEventFrame=-1}enterRoom(e){var t=e.food,r=e.players;Ue.init();var s=1e12,o=0,l=null;r.sort((h,f)=>h.enterTime-f.enterTime),r.forEach(h=>{if(ie.Debug==2){var f="INIT 坐标: ======== "+h.roleId+" frame: "+h.frame+", pos: "+h.snake[0].loc.x+", "+h.snake[0].loc.y;console.table(f)}h.roleId==V.playerDto.pid&&(l=h,o=l.enterTime,s=l.frame)}),Ue.setStartFrame(s,o);var u=[];r.forEach(h=>{if(h.state){var f=h.frame;if(f==s)u.push(h);else if(f>s){var g=new eo;g.msgtype=x.snake.socket.MessageType.MSG_NOTICE_ENTER,g.msgBody=h,this.addOperation(g)}}});var p=new kd;p.members=u,p.myPlayerObject=l,p.roomId=e.roomNo,p.item=t,p.matchType=Ke.MATCH_TYPE_PVP,$e.matchDto=p,L.event(A.EVENT_PVP_INIT_DATA),$e.stopAll=!1}pushMsg(e){var t=e.frame,r=e.msgList,s=[],o=1e12;if(r.forEach(u=>{var p=u.msghead.msgtype,h=u.msghead.msgcode,f,g=Laya.ClassUtils.getClass(p+"");if(g){var b=Date.now();if(f=g.deserializeBinary(u.msgbody).toObject(),ie.Debug>=1){var v=Date.now();console.log(ye.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+p+", CODE:",h+", DATA:",f," dt:",v-b)}}else ie.Debug>=1&&console.warn(ye.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+p+", CODE:",h+", className解析失败!");if(p==x.snake.socket.MessageType.MSG_PLAYER_COLLISION)this.confirmPlayerCollision(f,!0);else{var w=new eo;w.msgtype=p,w.msgBody=f;var k=f.frame;k<o&&(o=k),s.push(w)}}),s&&s.length){var l=new Sl;l.frame=t,l.minEventFrame=o,l.serverCmdDataDtos=s,this.addFrameOperations(l)}}noticeEnter(e,t){var r=t.players,s=r.frame,o=[],l=s,u=new eo;u.msgtype=e,u.msgBody=r,o.push(u);var p=new Sl;p.frame=s,p.minEventFrame=l,p.serverCmdDataDtos=o,this.addFrameOperations(p)}handleOperationDetail(e,t,r){switch(ie.Debug>2&&console.log("======handleOperationDetail=====",e.msgBody.frame,e,"isLogicSnake: "+t),e.msgtype){case x.snake.socket.MessageType.MSG_PLAYER_OPR:var s=e.msgBody;this.onRevOprPush(s,t,r);break;case x.snake.socket.MessageType.MSG_EAT_FOOD:let l=e.msgBody;break;case x.snake.socket.MessageType.MSG_PLAYER_COLLISION:let u=e.msgBody;break;case x.snake.socket.MessageType.MSG_NOTICE_ENTER:var o=e.msgBody;xe.getInstance().newAddSnake(o);break}}confirmPlayerCollision(e,t){var r=e.roleId,s=e.food,o=e.taret,l=e.head,u=e.frame,p=e.die,h=xe.getInstance().getRoleById(r);if(h&&p!="-1"){var f=xe.getInstance().getRoleById(o);p==r?(h.confirmDie(),f&&f.addKill(1)):(f&&f.confirmDie(),h.addKill(1)),s&&s.length&&vi.addFoods(s)}}addLocalOperation(e){if(Ue.frameNetQueue.isStart){var t=new eo,r=x.snake.socket.MessageType.MSG_PLAYER_OPR;t.msgtype=r,t.msgBody=e;var s=t.msgBody.frame+1;ie.Debug>2&&console.log("addLocalOperation (frame): ",e.frame," (frame+1): "+s,t),this._localOperationQueue[s]||(this._localOperationQueue[s]=[]),this._localOperationQueue[s].push(t)}}addFrameOperations(e){let t=e.frame,r=e.minEventFrame,s=e.serverCmdDataDtos;ie.Debug>2&&console.log(ye.GetLogTime,"addFrameOperations: latestEventFrame: ",this.latestEventFrame,"serverFrame: "+t,"minEventFrame: "+r,s,"confirmedFrame: "+Ue.confirmedFrame,"clientRuningFrame: "+Ue.clientRuningFrame);for(let o of s)this.addOperation(o)}addOperation(e){var t=e.msgBody.frame+1;ie.Debug>2&&console.log("addOperation (frame+1): ",t,e),this._operationQueue[t]||(this._operationQueue[t]=[]),this._operationQueue[t].push(e),t>this.latestEventFrame&&(this.latestEventFrame=t);var r=0;ie.Debug>2&&console.debug("addOperation 收到帧 (frame+1): "+t+", confirmedFrame: "+Ue.confirmedFrame+", rollBackConfirmedFrame: "+Ue.rollBackConfirmedFrame+", tempFrame: "+r+", dFrame: "+(t-Ue.confirmedFrame)),t<=Ue.confirmedFrame&&(r=t),r!=0&&r<Ue.rollBackConfirmedFrame&&(Ue.rollBackConfirmedFrame=r)}addEatOperation(e,t){if(Ue.frameNetQueue.isStart){var r=t+1;ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST  addEatOperation foodId: "+e+", (frame): ",t," (frame+1): "+r),this.eatFoodDic.set(e,r)}}removeEatOperation(e){this.eatFoodDic.remove(e)}onRevOprPush(e,t,r){if(e!=null){var s=xe.getInstance().getRoleById(e.roleId);if(s){if(t&&s.logicSnake.updateHead106(e.frame,e.head,e.speed,r,e.oprIndex),e.opr==1){var o=e.value;s.rotate(o,t)}else if(e.opr==2){var l=e.value;s.updateSpeedRate(l,t)}}else console.log(e.roleId+" snake is null")}}onUpdatePlayerObject(e,t){if(e!=null){var r=xe.getInstance().getRoleById(e.roleId);if(r){if(e.state!=!1)var s=e.eatenIds}else console.log(e.roleId+" snake is null")}}sendRestoreData(){if($e.msgEndbody==null&&xe.getInstance().selfSnake&&xe.getInstance().selfSnake.isAlive(!1)){var e=V.playerDto.pid,t=x.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA,r=x.snake.socket.CS_REQUEST_ROOM_DATA.fromObject({roleId:e});ft.sendData(t,r)}}requestRoomData(e){var t=e.food,r=e.players;Ue.init();var s=1e12,o=0,l=null;r.sort((O,H)=>O.enterTime-H.enterTime),r.forEach(O=>{if(ie.Debug==2){var H="REINIT 坐标: ======== "+O.roleId+" frame: "+O.frame+", pos: "+O.snake[0].loc.x+", "+O.snake[0].loc.y;console.table(H)}if(O.roleId==V.playerDto.pid&&(l=O,o=l.oprTime),O.state){var Y=O.frame;Y<s&&(s=Y)}}),Ue.setStartFrame(s,o);var u=[];r.forEach(O=>{if(O.state){var H=O.frame;if(H==s)u.push(O);else if(H>s){var Y=new eo;Y.msgtype=x.snake.socket.MessageType.MSG_NOTICE_ENTER,Y.msgBody=O,this.addOperation(Y)}}});var p=new kd;if(p.members=u,p.myPlayerObject=l,p.item=t,l&&l.state)this.onRevRestorePush(p);else if(l.result){var h=l.result,f=h.msghead.msgtype,g=h.msghead.msgcode,b,v=Laya.ClassUtils.getClass(f+"");if(v){var w=Date.now();if(b=v.deserializeBinary(h.msgbody).toObject(),ie.Debug>=1){var k=Date.now();console.log(ye.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+f+", CODE:",g+", DATA:",b," dt:",k-w)}}else ie.Debug>=1&&console.warn(ye.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+f+", CODE:",g+", className解析失败!");var E=b;$e.onSetMatchEnd(E,!0)}else{var E=new x.snake.socket.SC_BATTLE_END;E.res=!1,E.roleId=l.roleId,E.score=l.score,E.kills=l.kills;var F=re.m_dicSnakes.get(l.snakeId);E.length=l.length/F.intervalBoneToDrawSkin,E.alive=$e.matchCoolDownTime,E.items=[],$e.onSetMatchEnd(E,!0)}}onRevRestorePush(e){e.matchType=Ke.MATCH_TYPE_PVP,$e.matchDto=e,L.event(A.EVENT_PVP_RESTORE_DATA)}}});var Mw,Ue,Dn=_(()=>{"use strict";ur();On();jr();yi();Tw();kR();Co();ss();_r();$r();Nn();to();Mw=class i{constructor(){this._frameInterval=33;this.startFrameTime=0;this.startFrame=0;this._currentFrame=0;this.clientPredictFrame=0;this.clientRuningFrame=0;this.lastClearupFrame=0;this.confirmedFrame=0;this.rollBackConfirmedFrame=0;this.quickConfirmedFrame=0;this._snakeStates={};this.type=0;this.lastLatestFrame=0;this.frameNetQueue=new X0}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){this.stop(),this.frameNetQueue._operationQueue={},this.frameNetQueue._localOperationQueue={},this.frameNetQueue.eatFoodDic=new ht,this._snakeStates={},this._currentFrame=0,this.startFrame=0,this.startFrameTime=Laya.Browser.now()}setStartFrame(e,t){this.lastLatestFrame=0,this.clientPredictFrame=e,this.clientRuningFrame=e,this.lastClearupFrame=e,this.confirmedFrame=e,this.rollBackConfirmedFrame=this.confirmedFrame+1,this._currentFrame=e,this.startFrame=e,this.frameNetQueue.isStart=!0,this.startFrameTime=t+ft.serverTimeOffset,console.log(ye.GetLogTime,"TEST_TIME: setStartFrame: this.startFrameTime: "+this.startFrameTime,"server enterTime: "+t,"serverTimeOffset: "+ft.serverTimeOffset)}start(){this.saveSnapshot(this.startFrame),Laya.timer.loop(33,this,this.update),this.initTimer()}initTimer(){Laya.timer.frameLoop(2,this,this.onFrameLoop)}clearTimer(){Laya.timer.clear(this,this.onFrameLoop)}onFrameLoop(){xe.getInstance().rorateReadySend()}stop(){Laya.timer.clear(this,this.update),this.clearTimer()}end(){this.stop(),this.frameNetQueue.isStart=!1}update(){if(this.frameNetQueue.isStart==!1)return;ie.Debug==2&&Date.now()%5e3<33&&ft.logLatencyStats();let e=Laya.Browser.now(),t=Math.floor((e-this.startFrameTime)/this._frameInterval);var r=this.startFrame+t;let s=this.frameNetQueue.latestEventFrame;ie.Debug==2&&console.log(ye.GetLogTime," ======================update: ","latestFrame: "+r,"confirmedFrame: "+this.confirmedFrame,"rollBackConfirmedFrame: "+this.rollBackConfirmedFrame,"latestEventFrame: "+s,"startFrame: "+this.startFrame,"addFrame: "+t,"_currentFrame: "+this._currentFrame,"clientConfirmedFrame: "+this.clientRuningFrame,"type: "+this.type,this.confirmedFrame<s),this._currentFrame++;let o=3;var l=Math.min(r,s);if(this.rollBackConfirmedFrame<=l){var u=this.rollBackConfirmedFrame<=l;this.rollbackAndRedo(this.rollBackConfirmedFrame,l);var p=l+1,h=r-1;this.predictFrameToNow(p,h,Ke.PREDICT_TYPE_ROLLBACK),p<=h?(this.render(),this.executeFrame(r,!1),this.type=12):u?p-h>1?(this.clientRuningFrame==h?(this.render(),this.executeFrame(h,!1),this.type=13):this.clientRuningFrame<h&&(this.render(),this.executeFrame(h,!0),this.type=14),this.render(),this.executeFrame(h,!1),this.type=15):this.clientRuningFrame==h?(this.render(),this.executeFrame(h,!1),this.type=16):(this.render(),this.executeFrame(p,!0),this.type=17):(this.render(),this.executeFrame(p,!0),this.type=18)}else{var p=this.clientRuningFrame+1,h=r-1;this.predictFrameToNow(p,h,Ke.PREDICT_TYPE_NO_ROLLBACK),s==-1?(this.render(),this.executeFrame(r,!1),this.type=22):p<=h?p==h?this.type==27||this.type==23||this.type==17?(this.executeFrame(p,!0),this.type=23):(this.render(),this.executeFrame(p,!1),this.type=24):(this.render(),this.executeFrame(h,!1),this.type=25):p-h>1?(this.executeFrame(p,!0),this.type=26):(this.executeFrame(p,!0),this.type=27)}}executeFrame(e,t){xe.getInstance().selfSnake&&(xe.getInstance().selfSnake.getIsStop(!1)||xe.getInstance().selfSnake.tag==null)||(t&&(this.clientRuningFrame=e),Un.update(e,!1,!1,t))}saveSnapshot(e){this._snakeStates[e]==null?this._snakeStates[e]=xe.getInstance().getSnakesState():this._snakeStates[e]=xe.getInstance().getSnakesState()}cleanupOldData(e){if(this.lastClearupFrame!=-1){ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST executeConfirmFrame: 清理旧数据 从 [","lastClearupFrame: "+this.lastClearupFrame,"newSnapshotFrame: "+e+" )");var t=this.frameNetQueue.eatFoodDic.getMap();for(let[s,o]of t)o<e&&(vi.restoreViewFood(s),this.frameNetQueue.eatFoodDic.remove(s));for(var r=this.lastClearupFrame;r<e;r++)delete this.frameNetQueue._localOperationQueue[r];for(var r=this.lastClearupFrame;r<e;r++)delete this.frameNetQueue._operationQueue[r];for(var r=this.lastClearupFrame;r<e;r++)delete this._snakeStates[r]}this.lastClearupFrame=e}get currentFrame(){return this._currentFrame}getClientRuningFrame(e){return this.clientRuningFrame}getPredictFrame(){let e=Laya.Browser.now(),t=Math.floor((e-this.startFrameTime+ft.delaT)/this._frameInterval);return this.startFrame+t}getPredictFrameHalf(){let e=Date.now(),t=ft.delaT,r=e-this.startFrameTime+t,s=Math.floor(r/this._frameInterval);return this.startFrame+s}getClientCurrentFrame(){return this.clientRuningFrame+1}checkClientAndServerFrame(e,t,r){var s=r.x,o=r.y,l=10,u=ae.mapSize;if(!(s<u.offsetX-l||s>u.width-u.offsetX+l||o<u.offsetY-l||o>u.height-u.offsetY+l)){var p=this.frameNetQueue._operationQueue[e];p&&p.length&&p.forEach(h=>{if(h.msgBody.roleId==t){var f=h.msgBody.frame,g=[Zt.create(s,o)],b=h.msgBody.head;!b&&h.msgBody.snake&&(b=h.msgBody.snake[0]);var v=bi.distancePoint(b.loc.x,b.loc.y,g[0].x,g[0].y);if(v>.01){var w=`坐标检测：====== 坐标异常（ ${t}） ${ye.GetLogTime} + " "${t}, checkClientAndServerFrame 前后端位移相差："${v},
                                "C:"${g[0].x}, ${g[0].y}, ${e-1}, "S:", ${b.loc.x}, ${b.loc.y}, ${f}`;ie.Debug==2&&console.debug(w),ye.alertYes(w)}else ie.Debug==2&&console.debug("坐标检测：====== （"+t+"） "+ye.GetLogTime+" "+t," checkClientAndServerFrame 前后端位移相差：",v,"C:",g[0].x,g[0].y,e-1,"S:",b.loc,f);return}})}}rollbackAndRedo(e,t){if(ie.Debug==2&&console.log("rollbackAndRedo: startFrame: "+e+", endFrame: "+t),!(e>t)&&!(xe.getInstance().selfSnake&&xe.getInstance().selfSnake.tag==null)){this._snakeStates[e-1]?xe.getInstance().restoreState(this._snakeStates[e-1]):console.error("不是上次确认帧",e,this._snakeStates);for(var r=e;r<=t;++r){let s=this.frameNetQueue._operationQueue[r]||[];for(let o of s)this.frameNetQueue.handleOperationDetail(o,!0,!0);this.clientRuningFrame=r,Un.update(r,!0,!0),r>=t-2&&this.saveSnapshot(r)}this.cleanupOldData(t-2),this.confirmedFrame=t,this.rollBackConfirmedFrame=this.confirmedFrame+1}}predictFrameToNow(e,t,r){if(ie.Debug==2&&console.log("predictFrameToNow startFrame: "+e+", endFrame: "+t+", predictType: "+r),!(e>t)&&!(xe.getInstance().selfSnake&&(xe.getInstance().selfSnake.getIsStop(!0)||xe.getInstance().selfSnake.tag==null))){for(var s=e;s<=t;++s){let o=this.frameNetQueue._localOperationQueue[s]||[];for(let l of o)this.frameNetQueue.handleOperationDetail(l,!0,!1);this.clientRuningFrame=s,Un.update(s,!0,!1)}this.clientPredictFrame=t}}render(){xe.getInstance().adjustVisualState()}},Ue=Mw.getInstance()});var io,xd=_(()=>{"use strict";_r();wl();ss();Nn();xr();to();yi();Ot();jt();Dn();ur();io=class{constructor(e,t){this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200;this._collisionRadius=ae.collision.food.radius;this.position=Zt.create(t.loc.x,t.loc.y),this.oriPos=Zt.create(t.loc.x,t.loc.y),this.foodObject=t,this.init(e)}init(e){this.sprite=ge.matchSnakeBeanPrefab.create();var t=re.m_dicFoods.get(this.foodObject.itemId);if(this.sprite.init(t),this._collisionRadius=t.collisionRadius,this.sprite.pos(this.position.x,this.position.y),this.sprite.zOrder=0,e.addChild(this.sprite),ie.needDraw){let r=new Laya.Label;r.text=`${this.foodObject.unkey}:(${Math.round(this.position.x)}, ${Math.round(this.position.y)})`,r.color="#FFFFFF",r.fontSize=18,r.font="Arial",r.align="center",r.anchorX=.5,r.anchorY=1,r.stroke=2,r.strokeColor="#000000",r.y=-this.sprite.height/2-2,this.sprite.addChild(r)}}reset(e,t){this.position=Zt.create(t.loc.x,t.loc.y),this.oriPos=Zt.create(t.loc.x,t.loc.y),this.foodObject=t,this.setHaveEaten(!1,!0),this.setHaveEaten(!1,!1);var r=re.m_dicFoods.get(this.foodObject.itemId);this.sprite.init(r),this._collisionRadius=r.collisionRadius,this.sprite.alpha=1,this.sprite.pos(this.position.x,this.position.y),e.addChild(this.sprite)}resetForPool(){this.setHaveEaten(!1,!0),this.setHaveEaten(!1,!1),Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf()}startScalingAnimation(){let e=this.minScale+Math.random()*(this.maxScale-this.minScale),t=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:e,scaleY:e},t,null,Laya.Handler.create(this,()=>{let r=this.minScale+Math.random()*(1-this.minScale),s=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:r,scaleY:r},s,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}getPosition(){return this.position}getScore(){var e=re.m_dicFoods.get(this.foodObject.itemId);return e.points}getHaveEaten(e){return e?this.haveEatenConfirm:this.haveEatenClient}beEattenByPlayerSnake(e,t,r){this.setHaveEaten(!0,r),this.beEatten(e.getHead(t).node.x,e.getHead(t).node.y,r)}setHaveEaten(e,t){t?this.haveEatenConfirm=e:this.haveEatenClient=e}beEatten(e,t,r){var s=this.foodObject.unkey;if(r)ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST beEatten removeEatOperation hasConfirmed: ",r," foodId: "+s),Ue.frameNetQueue.removeEatOperation(s),Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish,[!0]));else if($e.matchDto.matchType==Ke.MATCH_TYPE_PVE)Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish,[!0]));else if(ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST beEatten hasConfirmed: ",r," foodId: "+s," haveEatenConfirm: "+this.getHaveEaten(!0)),!this.getHaveEaten(!0)){var o=Ue.getPredictFrame();Ue.frameNetQueue.addEatOperation(s,o),Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish,[!1]))}this.setHaveEaten(!0,r)}onFinish(e){e?(ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST onFinish hasConfirmed: ",e+"haveEatenConfirm: ",this.haveEatenConfirm," foodId: "+this.foodObject.unkey),this.resetForPool(),vi.removeFood(this)):this.sprite.alpha=.5}restoreView(){ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST restoreView haveEatenConfirm: ",this.haveEatenConfirm," foodId: "+this.foodObject.unkey),this.haveEatenConfirm||(this.haveEatenClient=!1,this.position=Zt.create(this.oriPos.x,this.oriPos.y),this.sprite.alpha=1,this.sprite.pos(this.position.x,this.position.y))}destroy(){Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf(),this.sprite.destroy(),this.sprite=null,this.oriPos=this.position=null}getBoundingBox(){return new Laya.Rectangle(this.position.x-this._collisionRadius,this.position.y-this._collisionRadius,this._collisionRadius*2,this._collisionRadius*2)}checkCollision(e,t,r){let s=this.position;return Ci.distance(s.x,s.y,e,t)<r+this._collisionRadius}}});var J0,ER=_(()=>{"use strict";xd();J0=class{constructor(e){this.container=e;this.pool=[]}getFood(e){let t;return this.pool.length>0?(t=this.pool.pop(),t.reset(this.container,e)):t=new io(this.container,e),t}returnFood(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}}});var Ca,Rw,vi,Nn=_(()=>{"use strict";mn();_r();yi();Ot();xr();Kt();$r();wl();ur();hu();ER();Ca=class Ca{constructor(){this.foods=[];this.foodDic=new ht;this.spawnTimer=0;this.foodUnKey=0}static getInstance(){return Ca._instance||(Ca._instance=new Ca),Ca._instance}init(){this.container||(this.container=new Laya.Sprite),this._collision=ts.getInstance(),this.foodPool=new J0(this.container)}spawnFoods(){var e=[],t=ae.food.initCount;for(let s=1;s<=t;s++){var r=this.spawnRandomFoodObject();e.push(r)}return e}spawnRandomFoodObject(){var e=ae.mapSize.offsetDistance,t=Ci.randomRange(e,ae.mapSize.width-e),r=Ci.randomRange(e,ae.mapSize.height-e),s=this.getFoodObjectByPos(t,r);return s}spawnFood(){if(!(this.foods.length>=ae.food.maxCount)){var e=this.spawnRandomFoodObject();this.addFood(e)}}update(e){this.spawnTimer+=e,this.spawnTimer>=ae.food.spawnInterval&&(this.spawnTimer=0,this.spawnFood())}addFoodByPosWithDie(e,t){if(!(this.foods.length>=ae.food.maxCount)){var r=this.getFoodObjectByPos(e,t);this.addFood(r)}}getFoodObjectByPos(e,t){this.foodUnKey+=1;var r=re.m_dicFoods.keys.length,s=Math.floor(Math.random()*r),o=re.m_dicFoods.keys[s],l=new x.snake.socket.FoodObject;l.itemId=o,l.unkey=this.foodUnKey+"";var u=new x.snake.socket.PointObject;return u.x=e,u.y=t,l.loc=u,l}addFoods(e){e&&e.forEach(t=>this.addFood(t))}addFood(e){if(!e)return;let t=this.foodPool.getFood(e);this._collision.addSnake([t]),this.foods.push(t),this.foodDic.set(e.unkey,t)}getFood(e){return this.foodDic.get(e)}eateFoodIds(e,t,r,s){ie.Debug==2&&e.setClientScore(r,s);var o=r-e.getScore(s);if(o&&e.showAddScore(o,s),e.isSelf&&t&&t.length){var l=Math.floor(Math.random()*3)+1;let u=`soundName_eat_food_${l}`;wt[u]?wt.playSoundByName(wt[u]):console.warn(`音效 ${u} 不存在`)}}removeFood(e){this._collision.removeSnake([e]);let t=this.foods.indexOf(e);t!==-1&&this.foods.splice(t,1),ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST remove foodId: "+e.foodObject.unkey),this.foodDic.remove(e.foodObject.unkey),this.foodPool.returnFood(e)}removeAllFoods(){this._collision.removeSnake(this.foods),this.foods.forEach(e=>e.destroy()),this.foods=[],this.foodDic=new ht,this.foodPool.clear()}getAllFoods(){return this.foods}clear(){this.container.removeSelf(),this.container=null,this.removeAllFoods(),this.foodPool.clear(),this.foodPool=null,Ca._instance=null}restoreViewFood(e){var t=this.getFood(e);t?t.restoreView():ie.Debug==2&&console.log(ye.GetLogTime+" FOOD_TEST restoreViewFood foodId: "+e+" food is null ")}restoreFoods(){this.removeAllFoods(),this.createFoodsByData()}createFoodsByData(){let e=$e.matchDto.item.length;for(var t=0;t<e;t++){var r=$e.matchDto.item[t];this.addFood(r)}}};Ca._instance=null;Rw=Ca,vi=Rw.getInstance()});var Z0,LR=_(()=>{"use strict";ws();dw();mw();Nn();Dn();jr();xt();gd();yi();Yt();xr();ur();Ni();Kt();On();Z0=class{constructor(){this._smoothDelay=0;this._alpha=.2;this.requestTime=0;this.lastheartBeatTime=0;this._heartBeatMissed=0;this._heartBeatMissedMax=5;this._heartBeatInterval=3*1e3;this.init()}updateNetworkLatency(e){let r=Date.now()-e,s=r/2;this._smoothDelay===0?this._smoothDelay=s:this._smoothDelay=this._alpha*s+(1-this._alpha)*this._smoothDelay,ft.delaT=this._smoothDelay,ft._lastRTT=r,ie.Debug&&console.log(`[Latency] RTT: ${r}ms, 平滑延迟: ${this._smoothDelay.toFixed(1)}ms`),r>1e3}init(){L.on(Vt.EVENT_ROOM_SOCKET_OPEN,this,this.onSocketOpen),L.on(Vt.EVENT_ROOM_SOCKET_ERROR,this,this.onScoketError),L.on(Vt.EVENT_ROOM_SOCKET_CLOSE,this,this.onSocketClose),L.on(Vt.EVENT_ROOM_STOP_HEART,this,this.stopHeartbearTimer),L.on(Vt.EVENT_ROOM_SHOW_TIP_DELAY,this,this.onShowTipDelay),L.on(Vt.EVENT_ROOM_HEART_BEAT,this,this.onHeartBeat),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME,this,this.onRecvServerTime),L.on("msg_"+x.snake.socket.MessageType.MSG_ENTER_ROOM,this,this.onGetEnterRoomDataBack),L.on("msg_"+x.snake.socket.MessageType.MSG_PUSH,this,this.onMsgPush),L.on("msg_"+x.snake.socket.MessageType.MSG_NOTICE_ENTER,this,this.onNoticeEnter),L.on("msg_"+x.snake.socket.MessageType.MSG_PLAYER_OUT,this,this.onPlayerOut),L.on("msg_"+x.snake.socket.MessageType.MSG_EAT_FOOD,this,this.onEatFood),L.on("msg_"+x.snake.socket.MessageType.MSG_PLAYER_COLLISION,this,this.onPlayerCollision),L.on("msg_"+x.snake.socket.MessageType.MSG_GEN_FOOD,this,this.onGenFood),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA,this,this.onRequestRoomData),L.on("msg_"+x.snake.socket.MessageType.MSG_BATTLE_END,this,this.onBattleEnd),L.on("msg_"+x.snake.socket.MessageType.MSG_PLAYER_OPR,this,this.onPlayerOpr),L.on("msg_"+x.snake.socket.MessageType.MSG_AI_ENTER,this,this.onAiEnter)}onGetEnterRoomDataBack(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_ENTER_ROOM),s=r;Ue.frameNetQueue.enterRoom(s),this.clearShowTip(),this.heartbeatTimer()}onMsgPush(e,t){if(Ue.frameNetQueue.isStart){var r=Pe.getMsgBody(e,x.snake.socket.SC_PUSH),s=r;Ue.frameNetQueue.pushMsg(s)}}onNoticeEnter(e,t){if(!Ue.frameNetQueue.isStart)return;var r=Pe.getMsgBody(e,x.snake.socket.SS_NOTICE_ENTER);let s=r;var o=e.msghead.msgtype;Ue.frameNetQueue.noticeEnter(o,s)}onPlayerOut(e,t){if(!Ue.frameNetQueue.isStart)return;var r=Pe.getMsgBody(e,x.snake.socket.SC_PLAYER_OUT),o=r.roleId;xe.getInstance().removeSnake(o)}onEatFood(e,t){if(!Ue.frameNetQueue.isStart)return;var r=Pe.getMsgBody(e,x.snake.socket.SC_EAT_FOOD);let s=r}onPlayerCollision(e,t){if(!Ue.frameNetQueue.isStart)return;var r=Pe.getMsgBody(e,x.snake.socket.SC_PLAYER_COLLISION);let s=r;console.warn(ye.GetLogTime+"Snake DIE CMD:113 收到了 玩家 "+s.roleId+" 碰撞 数据返回",s),Ue.frameNetQueue.confirmPlayerCollision(s,!0)}onGenFood(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_GEN_FOOD),s=r,o=s.frame;vi.addFoods(s.food)}onRequestRoomData(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_REQUEST_ROOM_DATA),s=r;console.log("收到了恢复数据返回"),Ue.frameNetQueue.requestRoomData(s)}onBattleEnd(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_BATTLE_END),s=r,o=s.res;$e.onSetMatchEnd(s)}onAiEnter(e,t){console.log("收到了进入AI房间返回")}onPlayerOpr(e,t){var r=Pe.getMsgBody(e,x.snake.socket.CS_PLAYER_OPR);if(Ue.frameNetQueue.isStart){var s=r,o=s.frame,l=[],u=o,p=new eo,h=e.msghead.msgtype;if(p.msgtype=h,p.msgBody=s,l.push(p),ie.Debug==2){var f="S 坐标: ======== "+s.roleId+" frame: "+s.frame+", pos: "+s.head.loc.x+", "+s.head.loc.y;console.table(f)}var g=new Sl;g.frame=o,g.minEventFrame=u,g.serverCmdDataDtos=l,Ue.frameNetQueue.addFrameOperations(g)}}onRequestTime(){this.clientSendTime=Date.now();var e=x.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME,t=null;ft.sendData(e,t)}onGetEnterRoomData(){var e=V.playerDto.pid,t=x.snake.socket.MessageType.MSG_ENTER_ROOM,r=x.snake.socket.CS_ENTER_ROOM.fromObject({roleId:e});ft.sendData(t,r)}onRecvServerTime(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_REQUEST_SERVER_TIME),s=r,o=s.time;this.requestTime++;let l=Date.now();var u=(l+this.clientSendTime)/2,p=u-o;ft.serverTimeOffsets.push(p);var h=(l-this.clientSendTime)/2;if(ft.delaTs.push(h),console.log("TEST_TIME: this.requestTime: "+this.requestTime,"clientRecvTime: "+l,"clientSendTime: "+this.clientSendTime,"clientTimestamp: "+u,"serverTimestamp: "+o,"serverTimeOffset: "+p,"delaT: "+h),this.requestTime>4){ft.serverTimeOffsets.sort((k,E)=>Math.abs(k)-Math.abs(E)),ft.serverTimeOffsets.pop();for(var f=0,g=ft.serverTimeOffsets.length,b=0;b<g;b++)f+=ft.serverTimeOffsets[b];p=Math.round(f/g),ft.serverTimeOffset=p,ft.delaTs.sort((k,E)=>k-E),ft.delaTs.pop();for(var v=0,w=ft.delaTs.length,b=0;b<w;b++)v+=ft.delaTs[b];h=Math.round(v/w),ft.delaT=h,console.log("TEST_TIME: serverTimeOffset: "+ft.serverTimeOffset+", delaT: "+ft.delaT),this.requestTime=0,ft.serverTimeOffsets=[],ft.delaTs=[],this.onGetEnterRoomData()}else this.onRequestTime()}onSocketOpen(){this.onRequestTime()}onScoketError(){this.popToMain()}onSocketClose(){this.popToMain()}popToMain(){ci.hideLoading(),ft.isMatching&&ye.popToMain()}onShowTipDelay(){Laya.timer.once(18e3,this,this.showTip)}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){ye.netError()}stopHeartbearTimer(){Laya.timer.clear(this,this.sendHeartBeat),this._heartBeatMissed=0}heartbeatTimer(){this.stopHeartbearTimer(),Laya.timer.loop(this._heartBeatInterval,this,this.sendHeartBeat)}sendHeartBeat(){Ue.frameNetQueue.isStart&&(this.lastheartBeatTime=Date.now(),ft.sendData(x.snake.socket.MessageType.MSG_HEART_BEAT,null),this._heartBeatMissed+=1,this._heartBeatMissed>=this._heartBeatMissedMax&&(console.log("发送大厅心跳超过最大次数,关闭Socket",this._heartBeatMissed),this.stopHeartbearTimer(),ft.close(),ye.popMatchErrorToMain()))}onHeartBeat(){this._heartBeatMissed=-1,this.lastheartBeatTime>0&&this.updateNetworkLatency(this.lastheartBeatTime)}}});var Bw,ft,On=_(()=>{"use strict";ur();Kt();Ni();xr();LR();xt();gd();Yt();Ot();yi();Bw=class i{constructor(){this.m_strHttpHost=getWSServer();this.serverTimeOffset=0;this.serverTimeOffsets=[];this.delaT=0;this.delaTs=[];this._lastRTT=0;this._headerLength=4;this._packetLength=-1;this._isMatching=!1;new Z0,this._byte=new Laya.Byte,this._byte.endian="bigEndian",this._socket=new Laya.Socket,this._socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this._socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this._socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this._socket.on(Laya.Event.ERROR,this,this.onConnectError)}static getInstance(){return i._instance==null&&(i._instance=new i),i._instance}get isMatching(){return this._isMatching}set isMatching(e){this._isMatching=e,e||(this.connected=!1)}close(){this._socket&&this._socket.close()}initSocket(){this.isMatching=!0,console.log("GlobalDataManager.nodeId===============>",V.nodeId);let e=null,t=V.nodeId;if(t&&re.m_dicNodes&&re.m_dicNodes.values){for(let o=0;o<re.m_dicNodes.values.length;o++)if(re.m_dicNodes.values[o].id===t){e=re.m_dicNodes.values[o];break}}let r=null;if(e&&e.socketUrl&&(r=e.socketUrl),ie.vType==0)s=$e.roomDto.connectAddr;else var s=r||$e.roomDto.connectAddr;this.m_strHttpHost=s,this.connect()}onSocketOpen(){this.connected=!0,this.emit(Vt.EVENT_ROOM_SOCKET_OPEN)}onConnectError(e){this.connected=!1,this.emit(Vt.EVENT_ROOM_SOCKET_ERROR)}onSocketClose(e){this.connected=!1,this.emit(Vt.EVENT_ROOM_SOCKET_CLOSE)}connect(){this.isMatching&&(this.connected||(this._socket.connectByUrl(this.m_strHttpHost),this.emit(Vt.EVENT_ROOM_SHOW_TIP_DELAY)))}sendData(e,t,r=!0){if(!(!this.isMatching&&r)&&this.connected){var s=t?t.serializeBinary():null;console.log(ye.GetLogTime,"[RoomWebSocket]  ------>>>>>>>> SEND CMD:"+e,t?t.toObject():null);var o=Pe.encodeMessage(e,s,"");this._socket.send(o.buffer)}}async onMessageReveived(e){if(!(e instanceof ArrayBuffer)){console.warn(ye.GetLogTime,"[RoomWebSocket]: no ArrayBuffer data",e);return}let t=new Uint8Array(e);for(this._byte.writeArrayBuffer(t.buffer),this._byte.pos=0;this._byte.bytesAvailable>0;){if(this._packetLength===-1)if(this._byte.bytesAvailable>=this._headerLength)this._packetLength=this._byte.getUint32();else break;if(this._byte.bytesAvailable>=this._packetLength){let r=this._byte.readUint8Array(this._headerLength,this._packetLength);this.processPacket(r),this._packetLength=-1}else break}if(this._byte.pos>0){let r=this._byte.bytesAvailable;if(r>0){let s=this._byte.readUint8Array(0,r);this._byte.clear(),this._byte.writeArrayBuffer(s.buffer)}else this._byte.clear()}}processPacket(e){try{var t=x.snake.socket.CMsgBase.deserializeBinary(e),r=t.msghead.msgtype;this.emitter(r,t)}catch{}}emitter(e,t){var r=t.msghead.msgcode;r!=x.snake.socket.MessageCode.SYS_NORMAL&&this.emit(Vt.EVENT_GLOBAL_ERROR_CODE,r),e!=x.snake.socket.MessageType.MSG_HEART_BEAT?this.emit("msg_"+e,t,r):this.emit(Vt.EVENT_ROOM_HEART_BEAT,t,r)}emit(e,...t){L.event(e,t)}logLatencyStats(){console.log(`[FrameSync] 当前平滑延迟: ${this.delaT.toFixed(1)}ms, 最新RTT: ${this._lastRTT}ms`)}clearAll(){Laya.timer.clearAll(this),this.close(),this.emit(Vt.EVENT_ROOM_STOP_HEART)}},ft=Bw.getInstance()});var Dw,no,e_=_(()=>{"use strict";xt();ri();Dw=class i{constructor(){this._notices=[];this._isPlaying=!1;this._currentIndex=0;this._textField=null;this._container=null;this._speed=2;this._noticePlayCounts=new Map;this._isInMainScene=!1;this._maxPlayCount=1;this._hasFullyEntered=!1}static getInstance(){return this._instance||(this._instance=new i),this._instance}init(e,t,r=2){this._container=e,this._textField=t,this._speed=r,this._configureTextField(),this._textField.visible=!1,this._container.scrollRect=new Laya.Rectangle(0,0,this._container.width,this._container.height),this._isInMainScene=!0,this.checkAndPlayStoredNotices()}_configureTextField(){this._textField&&(this._textField.overflow=Laya.Text.VISIBLE,this._textField.wordWrap=!1)}addNotice(e){if(!e||e.trim()==="")return;let t=this._notices.length===0;this._noticePlayCounts.has(e)||this._noticePlayCounts.set(e,0),this._notices.indexOf(e)===-1&&this._notices.push(e),t&&this._notices.length>0&&this._isInMainScene&&L.event(A.EVENT_NEW_NOTICE_ADDED),this._isInMainScene&&!this._isPlaying&&this._container&&this.play()}addNotices(e){if(!(!e||e.length===0))for(let t of e)this.addNotice(t)}clearNotices(){this._notices=[],this._isPlaying=!1,this._currentIndex=0,this._noticePlayCounts.clear(),this._textField&&(this._textField.visible=!1),Laya.timer.clearAll(this)}play(){this._notices.length===0||!this._container||(this._isPlaying=!0,this.showCurrentNotice())}showCurrentNotice(){if(this._notices.length===0){this._isPlaying=!1;return}let e=this._notices[this._currentIndex];this._textField.text=e,this._textField.width=this._textField.textWidth,this._textField.visible=!0,this._hasFullyEntered=!1,Laya.timer.frameOnce(1,this,()=>{this._textField.width=this._textField.textWidth,this._textField.x=this._container.width,Laya.timer.frameLoop(1,this,this.scrollText)})}scrollText(){if(this._textField.x-=this._speed,!this._hasFullyEntered&&this._textField.x+this._textField.width<=this._container.width&&(this._hasFullyEntered=!0),this._hasFullyEntered&&this._textField.x+this._textField.width<=0){Laya.timer.clear(this,this.scrollText);let e=this._notices[this._currentIndex];if(this._isInMainScene){let r=this._noticePlayCounts.get(e)||0;r++,this._noticePlayCounts.set(e,r)}let t=this._noticePlayCounts.get(e)||0;this._isInMainScene&&t>=this._maxPlayCount?(this._notices.splice(this._currentIndex,1),this._noticePlayCounts.delete(e),this._currentIndex>=this._notices.length&&(this._currentIndex=0)):this._currentIndex=(this._currentIndex+1)%this._notices.length,this._notices.length>0?this.showCurrentNotice():(this._isPlaying=!1,this._textField.visible=!1,this._isInMainScene&&L.event(A.EVENT_MARQUEE_EMPTY))}}pause(){Laya.timer.clear(this,this.scrollText),this._isPlaying=!1}resume(){!this._isPlaying&&this._notices.length>0&&this.play()}setSpeed(e){this._speed=e}setInMainScene(e){if(this._isInMainScene!==e)if(this._isInMainScene=e,e){if(this._notices.length>0){for(let t of this._notices)this._noticePlayCounts.set(t,0);L.event(A.EVENT_NEW_NOTICE_ADDED)}this.checkAndPlayStoredNotices()}else this.pause()}checkAndPlayStoredNotices(){this._notices.length>0&&this._isInMainScene&&!this._isPlaying&&this._container&&this.play()}getStoredNotices(){return[...this._notices]}getNoticePlayCount(e){return this._noticePlayCounts.get(e)||0}setMaxPlayCount(e){e>0&&(this._maxPlayCount=e)}hasNotices(){return this._notices.length>0}},no=Dw.getInstance()});var t_,TR=_(()=>{"use strict";pu();At();ws();Vi();cn();yn();ri();xt();gd();yi();Yt();Yi();ur();Ni();Ei();Kt();On();e_();Mo();Dn();t_=class{constructor(){this.connectTime=0;this.connectTimeMax=5;this.preTime=1e3;this.isOtherLogin=!1;this._heartBeatInterval=5e3;this.isFirst=!0;this.init()}init(){L.on(Vt.EVENT_GLOBAL_ERROR_CODE,this,this.onShowGlobalErrorCode),L.on(Vt.EVENT_HALL_SOCKET_OPEN,this,this.onSocketOpen),L.on(Vt.EVENT_HALL_SOCKET_ERROR,this,this.onScoketError),L.on(Vt.EVENT_HALL_SOCKET_CLOSE,this,this.onSocketClose),L.on(Vt.EVENT_HALL_STOP_HEART,this,this.stopHeartbearTimer),L.on(Vt.EVENT_HALL_SHOW_TIP_DELAY,this,this.onShowTipDelay),L.on("msg_"+x.snake.socket.MessageType.MSG_USER_LOGIN,this,this.onUserLogin),L.on("msg_"+x.snake.socket.MessageType.MSG_REPEAT_LOGIN_NOTICE,this,this.onOtherUserLogin),L.on("msg_"+x.snake.socket.MessageType.MSG_LVUP_NOTICE,this,this.onLvUpNotice),L.on("msg_"+x.snake.socket.MessageType.MSG_UPDATE_ROLE,this,this.onUpdateRole),L.on("msg_"+x.snake.socket.MessageType.MSG_SYS_NOTICE,this,this.onSysNotice),L.on("msg_"+x.snake.socket.MessageType.MSG_PACK_INFO,this,this.onPackInfo)}onSocketOpen(){console.log("socket connect success"),this.startHeartBeat(),Laya.timer.clear(this,this.onReconnect),this.connectTime=0,mt.walletAddress&&(console.log(ye.GetLogTime,"[HallMessageHandle] Sending login request after connecting to hall server"),this.onLogin())}onScoketError(){this.startReconnect()}onSocketClose(){this.startReconnect()}startReconnect(){if(!this.isOtherLogin)if(console.log("websocket----closed connectTime:"+this.connectTime+", connectTimeMax: "+this.connectTimeMax),this.connectTime<=this.connectTimeMax){var e=this.connectTime*this.preTime;Laya.timer.once(e,this,this.onReconnect)}else ci.hideLoading(),this.showTip()}onReconnect(){this.reconnect(),this.connectTime++}reconnect(){if(console.log(ye.GetLogTime,"[HallWebSocket]  reconnect 开始重连服务器"),De.connected)return;let e=String(this.connectTime)+"/"+String(this.connectTimeMax)+" "+z.getLanguage("正在尝试重连");ci.showLoadingByInfo(e),De.connectWebSocket(),console.log(ye.GetLogTime,"[HallWebSocket]  reconnect -------->",e)}onShowTipDelay(){Laya.timer.once(1e4,this,this.showTip)}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){ye.netError()}onLogin(){var e=x.snake.socket.MessageType.MSG_USER_LOGIN;let t=mt.getloginRequestInfo;var r=x.snake.socket.CS_USER_LOGIN.fromObject(t);De.send(e,r)}onUserLogin(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_USER_LOGIN);console.log("登录返回信息",r),t==x.snake.socket.MessageCode.USER_NOT_EXIST?(console.log("have no regist"),Wt.sendCustumEvent(23),at.intance.openModule(R.CreateLoginView)):t==x.snake.socket.MessageCode.SYS_NORMAL&&(ci.hideLoading(),console.log("have regist"),V.updatePlayerInfo(r.roleInfo),this.isFirst&&(L.event(A.EVENT_ENTER_MAIN),this.isFirst=!1)),this.connectTime=0,this.clearShowTip(),this.heartbeatTimer()}onOtherUserLogin(e,t){this.isOtherLogin=!0,De.clearAll(),De.close(),ft.isOtherLogin=!0,ft.clearAll(),ft.close(),ye.otherLogin(),console.log("WS----------------------------otherLogin")}onShowGlobalErrorCode(e){if(e!=x.snake.socket.MessageCode.SYS_NORMAL){console.log(ye.GetLogTime,"[HallMessageHandle]  msgcode--------------->",e);let t=Cr.get(e);if(ie.vType!=2){if(e!==x.snake.socket.MessageCode.NOT_ENOUGH_TOKEN&&e!==x.snake.socket.MessageCode.CREATE_ROOM_MAX&&e!==x.snake.socket.MessageCode.USER_NOT_EXIST){let r=z.getLanguage(e+1e4);ye.commTipWithYes(r)}}else ye.commTipWithYes(t)}}stopHeartbearTimer(){Laya.timer.clear(this,this.sendHeartBeat)}heartbeatTimer(){this.stopHeartbearTimer(),Laya.timer.loop(this._heartBeatInterval,this,this.sendHeartBeat)}startHeartBeat(){this.sendHeartBeat(),Laya.timer.loop(3e4,this,this.sendHeartBeat)}sendHeartBeat(){De.send(x.snake.socket.MessageType.MSG_HEART_BEAT,null,!1)}onLvUpNotice(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_LVUP_NOTICE);let s=r;Ue.frameNetQueue.isStart||at.intance.openModule(R.PlayerUpgradeSuccessDialog,s),console.log("收到升级通知:",s)}onUpdateRole(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SS_UPDATE_ROLE);if(console.log("收到更新角色信息:",r),!r.roleInfo||r.roleInfo.length===0){console.log("收到的角色信息为空");return}V.updatePlayerInfo(r.roleInfo[0])}onSysNotice(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_SYS_NOTICE);t===x.snake.socket.MessageCode.SYS_NORMAL&&r&&r.msg&&(console.log("收到系统公告:",r.msg),r.msg=`${r.msg}`,r.msg&&r.msg.trim()!==""&&no.addNotice(r.msg),L.event(A.EVENT_NEW_NOTICE,r.msg))}onPackInfo(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_PACK_INFO);t===x.snake.socket.MessageCode.SYS_NORMAL&&(Ar.initKnapsackData(r.items),Ar.initSnakeData(r.snake))}}});var CR={};cf(CR,{default:()=>De});var Nw,De,Ei=_(()=>{"use strict";xt();ur();TR();Kt();Ni();gd();yi();yn();Nw=class i{constructor(){this._socket=null;this.wsUrl=getWSServer();this.isFirstConnection=!0;this._headerLength=4;this._packetLength=-1;new t_,this._byte=new Laya.Byte,this._byte.endian="bigEndian",this._socket=new Laya.Socket,this._socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this._socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this._socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this._socket.on(Laya.Event.ERROR,this,this.onSocketError),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_HALL_ADDR,this,this.onHallAddrResponse)}static getInstance(){return i._instance==null&&(i._instance=new i),i._instance}connect(){console.log(ye.GetLogTime,"[HallWebSocket] Try to connect url = "+this.wsUrl,mt.walletAddress),!this.connected&&(this.connectWebSocket(),this.emit(Vt.EVENT_HALL_SHOW_TIP_DELAY))}connectWebSocket(){this._socket.connectByUrl(this.wsUrl)}onSocketOpen(){this.connected=!0,console.log(ye.GetLogTime,"[HallWebSocket] ----onOpen------------> connected"),this.isFirstConnection&&mt.walletAddress?(this.requestHallAddr(),this.isFirstConnection=!1,console.log(ye.GetLogTime,"[HallWebSocket] Requesting hall address before login")):this.emit(Vt.EVENT_HALL_SOCKET_OPEN)}requestHallAddr(){console.log(ye.GetLogTime,"[HallWebSocket] Requesting hall address for wallet: "+mt.walletAddress);var e=x.snake.socket.CS_REQUEST_HALL_ADDR.fromObject({address:mt.walletAddress});this.send(x.snake.socket.MessageType.MSG_REQUEST_HALL_ADDR,e)}onHallAddrResponse(e,t){if(t==x.snake.socket.MessageCode.SYS_NORMAL){var r=Pe.getMsgBody(e,x.snake.socket.SC_REQUEST_HALL_ADDR);if(r&&r.hallAddr){console.log(ye.GetLogTime,"[HallWebSocket] Received hall address: "+r.hallAddr);var s=this.connected;this.close(),this.wsUrl=r.hallAddr,console.log(ye.GetLogTime,"[HallWebSocket] Switching to new hall address: "+this.wsUrl),this.isFirstConnection=!1,this.connectWebSocket()}}else console.log(ye.GetLogTime,"[HallWebSocket] Failed to get hall address, continue with current connection"),this.emit(Vt.EVENT_HALL_SOCKET_OPEN)}onSocketError(e){this.connected=!1,console.log(ye.GetLogTime,"[HallWebSocket] ----onError------------>",e),this.emit(Vt.EVENT_HALL_SOCKET_ERROR)}onSocketClose(){this.connected=!1,console.log(ye.GetLogTime,"[HallWebSocket] ----onClose------------>",this._socket),this.emit(Vt.EVENT_HALL_SOCKET_CLOSE)}close(){this.connected=!1,console.log(ye.GetLogTime,"[HallWebSocket] ----WS:close"),this._socket&&this._socket.close(),L.off("msg_"+x.snake.socket.MessageType.MSG_REQUEST_HALL_ADDR,this,this.onHallAddrResponse)}clearAll(){Laya.timer.clearAll(this),this.close(),this.emit(Vt.EVENT_HALL_STOP_HEART)}send(e,t,r=!0){if(this.connected){var s=t?t.serializeBinary():null;e!=x.snake.socket.MessageType.MSG_HEART_BEAT&&console.log(ye.GetLogTime,"[HallWebSocket]  ------>>>>>>>> SEND CMD:"+e,t?t.toObject():null);var o=Pe.encodeMessage(e,s,"");this._socket.send(o.buffer)}else console.log(ye.GetLogTime,"[HallWebSocket]  ------>>>>>>>> SENDE RROR CMD:"+e,t?t.toObject():null)}onMessageReveived(e=null){if(!(e instanceof ArrayBuffer)){console.warn(ye.GetLogTime,"[HallWebSocket]: no ArrayBuffer data",e);return}let t=new Uint8Array(e);for(this._byte.writeArrayBuffer(t.buffer),this._byte.pos=0;this._byte.bytesAvailable>0;){if(this._packetLength===-1)if(this._byte.bytesAvailable>=this._headerLength)this._packetLength=this._byte.getUint32();else break;if(this._byte.bytesAvailable>=this._packetLength){let r=this._byte.readUint8Array(this._headerLength,this._packetLength);this.processPacket(r),this._packetLength=-1}else break}if(this._byte.pos>0){let r=this._byte.bytesAvailable;if(r>0){let s=this._byte.readUint8Array(0,r);this._byte.clear(),this._byte.writeArrayBuffer(s.buffer)}else this._byte.clear()}}processPacket(e){try{var t=x.snake.socket.CMsgBase.deserializeBinary(e),r=t.msghead.msgtype;r!=x.snake.socket.MessageType.MSG_HEART_BEAT&&(ie.Debug==2||ie.Debug==1&&console.log(ye.GetLogTime,"[HallWebSocket]: onMessage",r.toString(),t)),this.emitter(r,t)}catch(s){console.log(ye.GetLogTime,"[HallWebSocket] onSocketError e:"+s)}}emitter(e,t){var r=t.msghead.msgcode;r!=x.snake.socket.MessageCode.SYS_NORMAL&&this.emit(Vt.EVENT_GLOBAL_ERROR_CODE,r),this.emit("msg_"+e,t,r)}emit(e,...t){L.event(e,t)}},De=Nw.getInstance()});var Ow,re,Ot=_(()=>{"use strict";$r();ck();uk();ov();pk();hk();dk();mk();fk();gk();bk();yk();_k();xk();vk();Ik();sv();jt();yi();Sk();wk();kk();Yt();Ow=class i{constructor(){if(i._instance)throw new Error("SheetDataManager是单例,不可new.");i._instance=this}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){let e=Laya.Browser.now();this.m_dicItems=this.initConfigObject("item",ff),this.m_dicShops=new ht,this.m_dicShopMulDic=this.initConfig("shop",["type","icon"],gf,!0,Laya.Handler.create(this,this.onSetShopItem,null,!1)),this.m_dicSnakes=this.initConfigObject("snake",Ef),this.m_dicFoods=this.initConfigObject("foods",kf),this.m_dicClub=this.initConfig("club",["id"],Af),this.m_dicArenaDic=new ht,this.m_dicArenaNumMulDic=new ht,this.m_dicArenaMulDic=this.initConfig("arena",["type","lv","coinType"],yf,!0,Laya.Handler.create(this,this.onSetArena,null,!1)),this.m_dicArenaTypes=this.initConfig("arenaType",["id"],wf),this.m_dicSnakeLengthRules=this.initConfig("snakeLengthRules",["snakeId","segments"],Lf);var t=this.initConfig("node",["id"],Sf);this.m_dicNodes=this.initNodes(t),this.intiDefaultNodeId(),this.m_dicHead=this.initConfig("head",["id"],bf),this.m_dicCountry=this.initConfig("country",["id"],_f),this.m_dicCurrencyAddressMulDic=new ht,this.m_dicCurrencyAddress=this.initConfig("currencyAddress",["sn"],xf,!0,Laya.Handler.create(this,this.onSetCurrencyAddress,null,!1)),this.m_dicLanguage=this.initConfig("language",["id"],Na),this.m_dicCoinAddress=this.initConfig("coinAddress",["id"],If),this.m_dicLevel=this.initConfigObject("level",Tf),this.m_dicACoin=this.initConfigObject("aCoin",vf),this.m_dicGenerate=this.initConfigObject("general",mf),this.m_dicRoom=this.initConfig("room",["id"],Cf),console.log("-----------------------sheetdata-time2:"+(Laya.Browser.now()-e))}getCharacterStars(e){e>4&&(e=4);for(let t of this.m_dicCharacterStars.values)if(t.starLv>e)return t;return null}getArenaTypesInSub(){var e=[];for(let t of this.m_dicArenaTypes.values)t.inSub==1&&e.push(t);return e}getArenaTypesInSubByType(e){for(let t of this.m_dicArenaTypes.values)if(t.arenaType==e)return t;return[]}getArenaTypesInSubByItemId(e,t){for(let r of this.m_dicArenaDic.values)if(r.type==e&&r.item[0]==t)return r}onSetShopItem(e){this.m_dicShops.set(e.id,e)}onSetCurrencyAddress(e){var t=e.token.toLowerCase();this.m_dicCurrencyAddressMulDic.set(this.getCompoundKey([e.isSN,t,e.chainId]),e)}onSetArena(e){this.m_dicArenaDic.set(e.id,e),this.m_dicArenaNumMulDic.set(this.getCompoundKey([e.type,e.lv,e.coinType]),e)}preInit(){}getGeneralValueById(e){return this.m_dicGenerate&&this.m_dicGenerate.get(e)?this.m_dicGenerate.get(e).value:0}initNodes(e){var t=new ht;for(let s=0;s<e.values.length;s++){var r=e.values[s];r.open==1&&(ie.vType==2?r.type==2&&(t.set(r.id,r),r.testUrl()):(r.type==1||r.type==0&&ie.vType==0)&&(t.set(r.id,r),r.testUrl()))}return t}getNodeByType(e){for(let t=0;t<this.m_dicNodes.values.length;t++)if(this.m_dicNodes.values[t].id==e)return this.m_dicNodes.values[t]}intiDefaultNodeId(){for(let e=0;e<this.m_dicNodes.values.length;e++)if(this.m_dicNodes.values[e].type==ie.vType){if(V.nodeId=this.m_dicNodes.values[e].id,this.m_dicNodes.values[e].wsUrl){let t=this.m_dicNodes.values[e].wsUrl;!t.startsWith("ws://")&&!t.startsWith("wss://")&&(t="ws://"+t),Promise.resolve().then(()=>(Ei(),CR)).then(r=>{let s=r.default;console.log("设置默认节点服务器URL:",t),s.wsUrl=t})}break}}testNodes(){var e=this.m_dicNodes;for(let r=0;r<e.values.length;r++){var t=e.values[r];t.testUrl()}}getNodeByAddr(e){var t=this.m_dicNodes;for(let s=0;s<t.values.length;s++){var r=t.values[s];if(r&&r.socketUrl==e)return r}return null}getCurrencyAddress(e){let r=i._instance.m_dicCurrencyAddress.values;for(let o=0;o<r.length;o++){var s=r[o];if(ie.vType==s.isSN&&e==s.id)return s.token}}getNodeRevenueCurrency(e){let r=i._instance.m_dicCurrencyAddress.values;for(let o=0;o<r.length;o++){var s=r[o];if(ie.vType==s.isSN&&e==s.id&&s.nodeRevenueAddress)return s}return null}getNodeCurrencyByTokenAndChainId(e,t){e=e.toLowerCase();var r=i._instance.getSheetDataByMultiKey(i._instance.m_dicCurrencyAddressMulDic,[ie.vType,e,t]);return r}getRentCurrency(e){let r=i._instance.m_dicCurrencyAddress.values;for(let o=0;o<r.length;o++){var s=r[o];if(ie.vType==s.isSN&&e==s.id&&s.rentNftAddress)return s}return null}getCurrencyByChainType(e,t){let s=i._instance.m_dicCurrencyAddress.values;for(let l=0;l<s.length;l++){var o=s[l];if(ie.vType==o.isSN&&e==o.id&&t==o.chainType)return o}}getCurrency(e,t){let s=i._instance.m_dicCurrencyAddress.values;for(let l=0;l<s.length;l++){var o=s[l];if(ie.vType==o.isSN&&e==o.id&&t==o.chainId)return o}}getTokensByChainId(e,t){let s=i._instance.m_dicCurrencyAddress.values;var o=[];for(let u=0;u<s.length;u++){var l=s[u];t==1?ie.vType==l.isSN&&l.openRecharge==1&&e==l.chainId&&o.push(l):t==2&&ie.vType==l.isSN&&l.openExtract==1&&e==l.chainId&&o.push(l)}return o}getNetAddress(e){let r=i._instance.m_dicCoinAddress.values;for(let o=0;o<r.length;o++){var s=r[o];if(ie.vType==s.type&&e==s.tokenid)return s.tokenAddress}}getACoin(e,t){let s=i._instance.m_dicACoin.values;for(let l=0;l<s.length;l++){var o=s[l];if(e==o.token&&t==o.currency)return o}}static getArrFromDictionary(e,t,r){let s=[];for(let o=0;o<e.values.length;o++)e.values[o][t]+""==r+""&&s.push(e.values[o]);return s}getArrFromDicItemByKey(e,t){let r=[];for(let s=0;s<this.m_dicItems.values.length;s++)this.m_dicItems.values[s][e]+""==t+""&&r.push(this.m_dicItems.values[s]);return r}initConfigObject(e,t=null,r=null){let s="config/"+e+".json";console.log("initConfigObject： url: "+s);let o=ge.getResByURL(s).data;return new Ol(o,t)}initConfig(e,t,r=null,s=!1,o=null){let l="config/"+e+".json";console.log("initConfig url: "+l);let u=ge.getResByURL(l).data,p=new ht;if(!u)return console.log("ERROR : SheetDataManager -->initConfig()  url:"+l),p;let h;for(let f=0;f<u.length;f++){let g=this.compoundKey(u[f],t);r?(h=new r,h.init==null&&console.log("ERROR :BaseItem> SheetDataManager -->initConfig()  url:"+l),h.init(u[f]),p.set(g,h),o&&o.runWith(h)):(p.set(g,u[f]),o&&o.runWith(u[f]))}if(s){let f=ge.setResURL(l);Laya.Loader.clearRes(f)}return p}compoundKey(e,t){let r="",s=t.length;if(s>1)for(let o=0;o<s;o++)r+=e[t[o]],o!=s-1&&(r+="_");else r=e[t[0]];return r}getCompoundKey(e){let t="",r=e.length;if(r>1)for(let s=0;s<r;s++)t+=e[s],s!=r-1&&(t+="_");else t=e[0];return t}initConfig2(e,t,r,s=!0){let o="config/"+e+".json",l=ge.getResByURL(o).data,u=new ht;if(!l)return console.log("ERROR : SheetDataManager -->initConfig2()  url:"+o),u;let p;for(let h=0;h<l.length;h++){let f=l[h][t],g;u.get(f)==null?(g=[],u.set(f,g)):g=u.get(f),p=new r,p.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig2()  url:"+o),p.init(l[h]),g.push(p)}if(s&&e!="items"){let h=ge.setResURL(o);Laya.Loader.clearRes(h)}return u}getItemsBy(e,t){let r=this.getArrFromDicItemByKey("itm_type",e),s=[];for(let o of r)o.child_type.toString()==t.toString()&&s.push(o);return s}getSheetDataByMultiKey(e,t){let r=this.getCompoundKey(t);return e.get(r)}getLevelById(e){for(let t of this.m_dicLevel.values)if(t.id==e)return t}getClubById(e){for(let t of this.m_dicClub.values)if(t.id==e)return t}},re=Ow.getInstance()});function i_(i,e){var t;e===void 0&&(e="0");var r=0,s=-1;i[0]=="-"&&(i=i.substring(1),Uw(i)||(r++,s=1,i.length)),e[0]=="-"&&(e=e.substring(1),Uw(e)||(r++,s=2,e.length)),i=nn(i),e=nn(e),t=Ww(nn(i),nn(e)),i=t[0],e=t[1],r==1&&(s===1?i=Fw(i):s===2&&(e=Fw(e)));var o=NR(i,e);return r?r==2?"-"+nn(o):i.length<o.length?nn(o.substring(1)):"-"+nn(Fw(o)):nn(o)}function Fw(i){if(Uw(i))return i;for(var e="",t=i.length,r=i.split(".")[1],s=r?r.length:0,o=0;o<t;o++)i[o]>="0"&&i[o]<="9"?e+=9-parseInt(i[o]):e+=i[o];var l=s>0?"0."+new Array(s).join("0")+"1":"1";return NR(e,l)}function nn(i){var e=i.split(".");for(e[0]||(e[0]="0");e[0][0]=="0"&&e[0].length>1;)e[0]=e[0].substring(1);return e[0]+(e[1]?"."+e[1]:"")}function Ww(i,e){var t=i.split("."),r=e.split("."),s=t[0].length,o=r[0].length;return s>o?r[0]=new Array(Math.abs(s-o)+1).join("0")+(r[0]?r[0]:""):t[0]=new Array(Math.abs(s-o)+1).join("0")+(t[0]?t[0]:""),s=t[1]?t[1].length:0,o=r[1]?r[1].length:0,(s||o)&&(s>o?r[1]=(r[1]?r[1]:"")+new Array(Math.abs(s-o)+1).join("0"):t[1]=(t[1]?t[1]:"")+new Array(Math.abs(s-o)+1).join("0")),i=t[0]+(t[1]?"."+t[1]:""),e=r[0]+(r[1]?"."+r[1]:""),[i,e]}function NR(i,e){var t;t=Ww(i,e),i=t[0],e=t[1];for(var r="",s=0,o=i.length-1;o>=0;o--){if(i[o]==="."){r="."+r;continue}var l=parseInt(i[o])+parseInt(e[o])+s;r=l%10+r,s=Math.floor(l/10)}return s?s.toString()+r:r}function Uw(i){return/^0[0]*[.]{0,1}[0]*$/.test(i)}function AR(i){return(typeof i=="number"||typeof i=="bigint")&&(i=i.toString()),i[0]=="-"?i.substring(1):i}function Ed(i,e,t){if(e===void 0&&(e=0),t===void 0&&(t=or.HALF_EVEN),t===or.UNNECESSARY)throw new Error("UNNECESSARY Rounding Mode has not yet been implemented");(typeof i=="number"||typeof i=="bigint")&&(i=i.toString());var r=!1;i[0]==="-"&&(r=!0,i=i.substring(1));var s=i.split("."),o=s[0],l=s[1];if(e<0){if(e=-e,o.length<=e)return"0";var u=o.substr(0,o.length-e);return i=u+"."+o.substr(o.length-e)+l,u=Ed(i,0,t),(r?"-":"")+u+new Array(e+1).join("0")}if(e==0)return o.length,MR(s[1],o,r,t)&&(o=Pw(o)),(r&&parseInt(o)?"-":"")+o;if(s[1]){if(s[1].length<e)return(r?"-":"")+o+"."+s[1]+new Array(e-s[1].length+1).join("0")}else return(r?"-":"")+o+"."+new Array(e+1).join("0");l=s[1].substring(0,e);var p=s[1].substring(e);return p&&MR(p,l,r,t)&&(l=Pw(l),l.length>e)?(r?"-":"")+Pw(o,parseInt(l[0]))+"."+l.substring(1):(r&&(parseInt(o)||parseInt(l))?"-":"")+o+"."+l}function MR(i,e,t,r){if(!i||i===new Array(i.length+1).join("0")||r===or.DOWN||!t&&r===or.FLOOR||t&&r===or.CEILING)return!1;if(r===or.UP||t&&r===or.FLOOR||!t&&r===or.CEILING)return!0;var s="5"+new Array(i.length).join("0");if(i>s)return!0;if(i<s)return!1;switch(r){case or.HALF_DOWN:return!1;case or.HALF_UP:return!0;case or.HALF_EVEN:default:return parseInt(e[e.length-1])%2==1}}function Pw(i,e){e===void 0&&(e=0),e||(e=1),typeof i=="number"&&i.toString();for(var t=i.length-1,r="",s=t;s>=0;s--){var o=parseInt(i[s])+e;o==10?(e=1,o=0):e=0,r+=o}return e&&(r+=e),r.split("").reverse().join("")}function Aa(i){var e=i[0]==="-";for(e&&(i=i.substr(1));i[0]=="0";)i=i.substr(1);if(i.indexOf(".")!=-1)for(;i[i.length-1]=="0";)i=i.substr(0,i.length-1);return i==""||i=="."?i="0":i[i.length-1]=="."&&(i=i.substr(0,i.length-1)),i[0]=="."&&(i="0"+i),e&&i!="0"&&(i="-"+i),i}function Hw(i,e){i=i.toString(),e=e.toString();var t=0;i[0]=="-"&&(t++,i=i.substr(1)),e[0]=="-"&&(t++,e=e.substr(1)),i=Aa(i),e=Aa(e);var r=0,s=0;i.indexOf(".")!=-1&&(r=i.length-i.indexOf(".")-1),e.indexOf(".")!=-1&&(s=e.length-e.indexOf(".")-1);var o=r+s;if(i=Aa(i.replace(".","")),e=Aa(e.replace(".","")),i.length<e.length){var l=i;i=e,e=l}if(e=="0")return"0";for(var u=e.length,p=0,h=[],f=u-1,g="",b=0;b<u;b++)h[b]=i.length-1;for(var b=0;b<2*i.length;b++){for(var v=0,w=e.length-1;w>=f&&w>=0;w--)h[w]>-1&&h[w]<i.length&&(v+=parseInt(i[h[w]--])*parseInt(e[w]));v+=p,p=Math.floor(v/10),g=v%10+g,f--}return g=Aa(pO(g,o)),t==1&&(g="-"+g),g}function pO(i,e){return e==0?i:(i=e>=i.length?new Array(e-i.length+1).join("0")+i:i,i.substr(0,i.length-e)+"."+i.substr(i.length-e,e))}function zw(i,e,t,r){if(t===void 0&&(t=8),r===void 0&&(r=or.HALF_EVEN),e==0)throw new Error("Cannot divide by 0");if(i=i.toString(),e=e.toString(),i=i.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),e=e.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),i==0)return"0";var s=0;e[0]=="-"&&(e=e.substring(1),s++),i[0]=="-"&&(i=i.substring(1),s++);var o=e.indexOf(".")>0?e.length-e.indexOf(".")-1:-1;if(e=nn(e.replace(".","")),o>=0){var l=i.indexOf(".")>0?i.length-i.indexOf(".")-1:-1;if(l==-1)i=nn(i+new Array(o+1).join("0"));else if(o>l)i=i.replace(".",""),i=nn(i+new Array(o-l+1).join("0"));else if(o<l){i=i.replace(".","");var u=i.length-l+o;i=nn(i.substring(0,u)+"."+i.substring(u))}else o==l&&(i=nn(i.replace(".","")))}var p=0,h=e.length,f="",g=i.indexOf(".")>-1&&i.indexOf(".")<h?i.substring(0,h+1):i.substring(0,h);if(i=i.indexOf(".")>-1&&i.indexOf(".")<h?i.substring(h+1):i.substring(h),g.indexOf(".")>-1){var b=g.length-g.indexOf(".")-1;g=g.replace(".",""),h>g.length&&(b+=h-g.length,g=g+new Array(h-g.length+1).join("0")),p=b,f="0."+new Array(b).join("0")}for(t=t+2;p<=t;){for(var v=0;parseInt(g)>=parseInt(e);)g=i_(g,"-"+e),v++;f+=v,i?(i[0]=="."&&(f+=".",p++,i=i.substring(1)),g=g+i.substring(0,1),i=i.substring(1)):(p||(f+="."),p++,g=g+"0")}return(s==1?"-":"")+nn(Ed(f,t-2,r))}function jw(i,e){return i=i.toString(),e=e.toString(),e=Gw(e),i_(i,e)}function Gw(i){return i[0]=="-"?i=i.substr(1):i="-"+i,i}function RR(i,e){if(e==0)throw new Error("Cannot divide by 0");i=i.toString(),e=e.toString(),BR(i),BR(e);var t="";i[0]=="-"&&(t="-",i=i.substr(1)),e[0]=="-"&&(e=e.substr(1));var r=jw(i,Hw(e,Ed(zw(i,e),0,or.FLOOR)));return t+r}function BR(i){if(i.indexOf(".")!=-1)throw new Error("Modulus of non-integers not supported")}function DR(i,e){var t,r,s=!1;if(t=[i,e].map(function(l){return Aa(l)}),i=t[0],e=t[1],i[0]=="-"&&e[0]!="-")return-1;if(i[0]!="-"&&e[0]=="-")return 1;if(i[0]=="-"&&e[0]=="-"&&(i=i.substr(1),e=e.substr(1),s=!0),r=Ww(i,e),i=r[0],e=r[1],i.localeCompare(e)==0)return 0;for(var o=0;o<i.length;o++)if(i[o]!=e[o])return i[o]>e[o]?s?-1:1:s?1:-1;return 0}var or,is,Vw=_(()=>{"use strict";(function(i){i[i.CEILING=0]="CEILING",i[i.DOWN=1]="DOWN",i[i.FLOOR=2]="FLOOR",i[i.HALF_DOWN=3]="HALF_DOWN",i[i.HALF_EVEN=4]="HALF_EVEN",i[i.HALF_UP=5]="HALF_UP",i[i.UNNECESSARY=6]="UNNECESSARY",i[i.UP=7]="UP"})(or||(or={}));is=function(){function i(e){e===void 0&&(e="0"),this.value=i.validate(e)}return i.validate=function(e){if(e){if(e=e.toString(),isNaN(e))throw Error("Parameter is not a number: "+e);e[0]=="+"&&(e=e.substring(1))}else e="0";if(e.startsWith(".")?e="0"+e:e.startsWith("-.")&&(e="-0"+e.substr(1)),/e/i.test(e)){var t=e.split(/[eE]/),r=t[0],s=t[1];r=nn(r);var o="";r[0]=="-"&&(o="-",r=r.substring(1)),r.indexOf(".")>=0?(s=parseInt(s)+r.indexOf("."),r=r.replace(".","")):s=parseInt(s)+r.length,r.length<s?e=o+r+new Array(s-r.length+1).join("0"):r.length>=s&&s>0?e=o+nn(r.substring(0,s))+(r.length>s?"."+r.substring(s):""):e=o+"0."+new Array(-s+1).join("0")+r}return e},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e){this.value=i.validate(e)},i.getPrettyValue=function(e,t,r){t===void 0&&(t=3),r===void 0&&(r=","),e=i.validate(e);var s=e.charAt(0)=="-";s&&(e=e.substring(1));var o=e.indexOf(".");o=o>0?o:e.length;for(var l="",u=o;u>0;)u<t?(t=u,u=0):u-=t,l=e.substring(u,u+t)+(u<o-t&&u>=0?r:"")+l;return(s?"-":"")+l+e.substring(o)},i.prototype.getPrettyValue=function(e,t){return e===void 0&&(e=3),t===void 0&&(t=","),i.getPrettyValue(this.value,e,t)},i.round=function(e,t,r){if(t===void 0&&(t=0),r===void 0&&(r=or.HALF_EVEN),e=i.validate(e),isNaN(t))throw Error("Precision is not a number: "+t);return Ed(e,t,r)},i.prototype.round=function(e,t){if(e===void 0&&(e=0),t===void 0&&(t=or.HALF_EVEN),isNaN(e))throw Error("Precision is not a number: "+e);return new i(Ed(this.value,e,t))},i.abs=function(e){return e=i.validate(e),AR(e)},i.prototype.abs=function(){return new i(AR(this.value))},i.floor=function(e){return e=i.validate(e),e.indexOf(".")===-1?e:i.round(e,0,or.FLOOR)},i.prototype.floor=function(){return this.value.indexOf(".")===-1?new i(this.value):new i(this.value).round(0,or.FLOOR)},i.ceil=function(e){return e=i.validate(e),e.indexOf(".")===-1?e:i.round(e,0,or.CEILING)},i.prototype.ceil=function(){return this.value.indexOf(".")===-1?new i(this.value):new i(this.value).round(0,or.CEILING)},i.add=function(e,t){return e=i.validate(e),t=i.validate(t),i_(e,t)},i.prototype.add=function(e){return new i(i_(this.value,e.getValue()))},i.subtract=function(e,t){return e=i.validate(e),t=i.validate(t),jw(e,t)},i.prototype.subtract=function(e){return new i(jw(this.value,e.getValue()))},i.multiply=function(e,t){return e=i.validate(e),t=i.validate(t),Hw(e,t)},i.prototype.multiply=function(e){return new i(Hw(this.value,e.getValue()))},i.divide=function(e,t,r,s){return e=i.validate(e),t=i.validate(t),zw(e,t,r,s)},i.prototype.divide=function(e,t,r){return new i(zw(this.value,e.getValue(),t,r))},i.modulus=function(e,t){return e=i.validate(e),t=i.validate(t),RR(e,t)},i.prototype.modulus=function(e){return new i(RR(this.value,e.getValue()))},i.compareTo=function(e,t){return e=i.validate(e),t=i.validate(t),DR(e,t)},i.prototype.compareTo=function(e){return DR(this.value,e.getValue())},i.negate=function(e){return e=i.validate(e),Gw(e)},i.prototype.negate=function(){return new i(Gw(this.value))},i.stripTrailingZero=function(e){return e=i.validate(e),Aa(e)},i.prototype.stripTrailingZero=function(){return new i(Aa(this.value))},i.RoundingModes=or,i}()});var Mt,Qt,En=_(()=>{"use strict";Ei();Fa();Vw();Yt();yn();On();yi();Ot();At();Mt=class Mt{static get IsSetRelease(){return Mt._IsSetRelease}static get IsSetGuid(){return Mt._IsSetGuid}static initParms(){if(Laya.Browser.window.location){let r=Laya.Browser.window.location.href,s=this.getURLParameters(r);if(Mt.m_obj=s,console.log("1initgame-->urldata:",Mt.m_obj),Mt.m_obj.server&&Mt.m_obj.server!=""&&(De.wsUrl=Mt.m_obj.server),Mt.m_obj.socket&&Mt.m_obj.socket!=""){var e=Mt.m_obj.socket;ft.m_strHttpHost=e}if(Mt.m_obj.debug&&ie.vType==0&&(ie.Debug=parseInt(Mt.m_obj.debug)),Mt.m_obj.address&&Mt.m_obj.address!=""&&ie.vType==0&&(console.log("walletAddress: "+Mt.m_obj.address),mt.walletAddress=Mt.m_obj.address),Mt.m_obj.from&&Mt.m_obj.from=="into"&&(ie.isInto=!0),Mt.m_obj.isFull&&Mt.m_obj.isFull=="1"&&(ie.isFull=!0),Mt.m_obj.justFull&&Mt.m_obj.justFull=="1"&&(ie.justFull=!0),Mt.m_obj.white&&Mt.m_obj.white=="1"&&(ie.isWhite=!0),Mt.m_obj.needDraw&&Mt.m_obj.needDraw=="1"&&(ie.needDraw=!0),Mt.m_obj.log){var t=parseInt(Mt.m_obj.log);t>0&&initEruda(t)}Mt.m_obj.res&&Mt.m_obj.res!="0"&&(ie.Res=parseInt(Mt.m_obj.res)),Mt.m_obj.bookingId&&Mt.m_obj.bookingId!="0"&&(ie.bookingId=parseInt(Mt.m_obj.bookingId),Mt.m_obj.teamId&&Mt.m_obj.teamId!="0"&&(ie.teamId=parseInt(Mt.m_obj.teamId))),Mt.m_obj.referral&&Mt.m_obj.referral!=""&&(ie.referral=Mt.m_obj.referral)}}static processLangParameter(){if(Mt.m_obj&&Mt.m_obj.lang&&Mt.m_obj.lang!=""){let e=Mt.m_obj.lang,t=z.getLanIdByType(e);t<1&&(t=1),ie.ignoreLang=!0,V.m_strLanguage=t}}static getURLParameters(e){let t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,(r,s,o)=>t[s]=decodeURIComponent(o)),t}static cheakStr(e){let t=new RegExp("[A-Za-z0-9_-\\s]","g"),r=e.match(t);return!!(r&&r.length==e.length)}static isNumber(e){return/^(?!0\d)\d*\.?\d*$/.test(e)}static roundToTwoDecimals(e){return e%1===0?e.toString():Number(e.toFixed(2)).toString()}static filterObjectsByNewFightFlag(e){return e.filter(t=>t.newFightFlag!==1)}static addIndexToObjects(e){return e.forEach((t,r)=>{t.index=r}),e}static findFirstTypeAndNotGold(e){for(let t=0;t<e.length;t++)if(e[t].id>=3001&&e[t].id<=3021&&e[t].id!==3005)return e[t]}static getCurrencyIdByName(e){let t=Gt.TYPE_TOX;switch(e){case"TOX":t=Gt.TYPE_TOX;break;case"ETH":t=Gt.TYPE_ETH;break;case"BTC":t=Gt.TYPE_BTC;break;case"USDT":t=Gt.TYPE_USDT;break;case"BTOX":t=Gt.TYPE_BTOX;break;case"GALA":t=Gt.TYPE_GALA;break;case"BNRY":t=Gt.TYPE_BNRY;break;case"KLAY":t=Gt.TYPE_KLAY;break;case"BNB":t=Gt.TYPE_BNB;break;case"GGG":t=Gt.TYPE_GGG;break}return t}static formatNumber(e,t=7){let r=e.toString(),s=r.indexOf(".");return s!==-1&&r.length-s>t?(r=r.slice(0,s+t),parseFloat(r)):e}static truncateToTwoDecimalPlaces(e){let t=e.toString(),r=t.indexOf(".");if(r===-1)return e;let s=t.substring(0,r+5);return parseFloat(s)}static getKeyByValue(e,t){return Object.keys(e).find(r=>e[r]===t)}static powerOf10(e,t){return e*Math.pow(10,t)}static isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}static getDaysInMonth(e,t){return t===2?this.isLeapYear(e)?29:28:[4,6,9,11].includes(t)?30:31}static shortenString(e,t,r){return e.length<=t+r?e:e.substr(0,t)+"..."+e.substr(-r)}static multiplyBigDecimals(e,t){let s=Math.pow(10,1e4),o=parseFloat(String(e))*parseFloat(String(t));return Math.round(o*s)/s}static arraysEqual(e,t){return e.length===t.length&&e.every((r,s)=>r===t[s])}static categorizeArrays(e,t){let r=[];for(let s of t){let o=s[0],l=s[1],u=e.find(h=>h[0]===o),p=u?u[1]:0;r.push([o,p,l])}return r}static setMap(e,t){if(e.has(t[0])){let r=e.get(t[0]);r+=t[1],e.set(t[0],r)}else e.set(t[0],t[1]);return console.log(e),e}static getfrom(){return Mt.m_obj.from}static parseTokenData(e){try{return e.map(t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(r){return console.error("解析token字符串失败:",r),t}return t})}catch(t){return console.error("解析token数据时发生错误:",t),[]}}static multiplyWithPrecision(e,t){let r=new is(e),s=new is(t);return r.multiply(s).getValue()}static addWithPrecision(e,t){let r=new is(e),s=new is(t);return r.add(s).getValue()}static subtractWithPrecision(e,t){let r=new is(e),s=new is(t);return r.subtract(s).getValue()}static divideWithPrecision(e,t,r=10){if(t===0)return console.error("除数不能为零"),"0";let s=new is(e),o=new is(t);return s.divide(o,r).getValue()}static truncateString(e,t){return e.length>t?e.substring(0,t)+"...":e}static truncateUnicodeString(e,t){if(!e)return"";let r=Array.from(e);return r.length>t?r.slice(0,t).join("")+"...":e}static getLevelByExp(e){let t=re.m_dicLevel,r=1;for(let s=0;s<t.values.length;s++){let o=t.values[s];if(e>=o.totalExp)r=o.id;else break}return r}static fitTextToLabel(e,t,r=!0){if(!e||!t)return e;let s=t.text,o=g=>(t.text=g,t.textField.textWidth),l=t.width;if(o(e)<=l)return t.text=s,e;let u=Array.from(e),p=0,h=u.length,f=0;for(;p<h;){f=Math.floor((p+h)/2);let g=u.slice(0,f).join("");o(r?g+"...":g)<=l?p=f+1:h=f}return f=p-1,f<0&&(f=0),t.text=s,u.slice(0,f).join("")+(f<u.length&&r?"...":"")}};Mt._IsSetRelease=!1,Mt._IsSetGuid=!1;Qt=Mt});var Kw,fi,Hn=_(()=>{"use strict";ri();xt();Ei();Kt();En();Ni();Kw=class i{static getInstance(){return this._instance||(this._instance=new i),this._instance}constructor(){this.init()}init(){L.on("msg_"+x.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo)}destroy(){L.off("msg_"+x.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo),i._instance=null}requestCoinInfo(){let e=x.snake.socket.MessageType.MSG_QUERY_TOKEN;De.send(e)}onRequestInfo(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_QUERY_TOKEN);if(t==x.snake.socket.MessageCode.SYS_NORMAL){let s=Qt.parseTokenData(r.token);this._tokenData=s,L.event(A.UPDATE_TOKEN_BALANCE,[s])}}getTokenData(){return this._tokenData}getTokenDataBySyId(e){if(!this._tokenData||this._tokenData.length===0){console.warn("未查到缓存的资产信息,请先获取");return}return this._tokenData.find(t=>t.symbolId===e)}calculateTotalValue(){try{return this._tokenData.reduce((e,t)=>{let r=t.balance,s=t.price;return isNaN(r)||isNaN(s)?e:e+r*s},0)}catch(e){return console.error("计算资产总额时发生错误:",e),0}}},fi=Kw.getInstance()});var ar,r_=_(()=>{"use strict";ar=class{constructor(){}};ar.TYPE_Consumption=1,ar.TYPE_Equipment=2,ar.TYPE_Currency=3,ar.TYPE_Hero=4,ar.TYPE_Fragment=5,ar.TYPE_CARD=6,ar.TYPE_TOKEN=100,ar.CHOOSE_Wallet=1,ar.CHOOSE_PutOn=2,ar.ITEM_PT=1086,ar.ITEM_PT_EXP=1091,ar.ITEM_SNAKE=3026});var gn,fu=_(()=>{"use strict";At();jt();Ot();Hn();r_();gn=class i{constructor(e=0){this._m_iLevel=0;this._m_arrDisc=[];this.newAddCnt=0;this.isScholarship=!1;this.isLvUp=!1;this.needTip=!0;this.m_bSalon=!1;this.m_bIsSetId=!1;e!=0&&(this.id=e)}get m_iLevel(){return this._m_iLevel>0?this._m_iLevel:1}set m_iLevel(e){this._m_iLevel=e||0}get m_iPk(){return this._m_iPk}set m_iPk(e){this._m_iPk=e}copyItem(){let e=new i;return e.id=this.id,e.m_iOriginalId=this.m_iOriginalId,e}get m_bTry(){return this.id==this.m_iOriginalId?this._m_bSet=!1:this._m_bSet=!0,this._m_bSet}set itemName(e){this._itemName=e}get itemName(){return this._itemName?this._itemName:z.getLanguage(this.itemItem.name)}set m_bTry(e){this._m_bSet=e}get id(){return this._m_iId}set id(e){this._m_iId=e,this.m_bIsSetId||(this.m_bIsSetId=!0,this.m_iOriginalId=e),this.setConfigData()}setConfigData(){if(this.id!=0){if(this.type==ar.TYPE_TOKEN){this.quality=1;let e=fi.getTokenDataBySyId(this.id);e?(this.itemName=e.symbol,this.iconURL=ge.getCurrencyIcon(e.symbolId)):(this.iconURL="",this.itemName="");return}if(this.itemItem=re.m_dicItems.get(this.id.toString()),!this.itemItem){console.log("[          <items> find out id:"+this.id+"             ]");return}if(this.subType=parseInt(this.itemItem.subType+""),this.backType=parseInt(this.itemItem.backPack+""),this.type=parseInt(this.itemItem.type+""),this.itemItem.buy_price){this.m_iPrice=this.itemItem.buy_price[0][1];let e=this.itemItem.buy_price[0][0],t=re.m_dicItems.get(e);t&&(this.m_strBuyIcon=ge.getItemIcon(t.icon))}this.itemItem.sell_price&&(this.m_iSellPrice=parseFloat(this.itemItem.sell_price[0][1])),this.quality=this.itemItem.quality,this.setQualityData()}}setQualityData(){this.m_arrQualityData=this.itemItem.starArr}set iconURL(e){this._iconURL=e}get iconURL(){return this.type==ar.TYPE_TOKEN?this._iconURL:ge.getItemIcon(this.itemItem.icon)}copy(){let e=new i(this.id);return e.m_iLevel=this.m_iLevel,e}compareName(){return z.getLanguage(this.itemItem.name)}compareQuality(){return parseFloat(this.quality+"")}compareSellPrice(){return parseFloat(this.itemItem.sell_price[1]+"")}compareNum(){return parseFloat(this.num+"")}compareLevel(){return parseFloat(this.m_iLevel+"")}compareTypeId(){return parseInt(this.id+"")}}});var $w,qw,sr,Ta=_(()=>{"use strict";fu();mu();$w=class i{constructor(e){this._list=[];this.needPop=!0;this.autoPop=!0}static getInstance(){return i._instance||(i._instance=new i(new qw)),i._instance}get service(){return ro}addItem(e,t=!1){let r=new gn;r.id=e.id,r.newAddCnt=e.newAddCnt,r.m_iLevel=e.m_iLevel,r.isLvUp=e.isLvUp,r.m_bNew=e.m_bNew,this._list.push(r),t&&this.service.startShow()}addSnakeItem(e,t=!1){let r={};r.id=e.id,r.newAddCnt=e.newAddCnt,r.lv=e.lv,r.isLvUp=e.isLvUp,r.m_bNew=e.m_bNew,this._list.push(r),t&&this.service.startShow()}addItems(e,t=!1){this._list=this._list.concat(e),t&&this.service.startShow()}hasRemain(){return this._list.length>0?this._list[0]:null}get needListener(){return this._list.length>=2}addConsumeByServer(e){this._list.push(e)}addConsume(e,t){this._list.push([e,t])}getNextItem(){return this._list.length>0?this._list[0]:null}getOneItem(){return this._list.length>0?this._list.shift():null}},qw=class{},sr=$w.getInstance()});var Yw,V,Yt=_(()=>{"use strict";ri();Fa();hf();ss();cn();lk();Ta();mu();xt();Mo();Yw=class i{constructor(){this.timeZoneOff=0;this.hearIntervalSceond=10*60;this.nodeId=1001;this.currentNodeUrl="https://wss-room-sg.queengame.io/test-ping";this._timeStamp=0;this._m_strLanguage=1;this.isLanChanged=!1;this.clubType=0;this.clubCreater="";this.lastTimestamp=0;this._m_serverTime=0;this.redDotData=[];this.friendNum=0;this.headId=10001;this.countryId=1010;this.colorId=1;this._guildIcon=2006;this.tokenData=void 0;this.rechargeEnd=!1}async initData(){}get m_serverTime(){let e=Date.now();return this._m_serverTime+(e-this.lastTimestamp)}set m_serverTime(e){this._m_serverTime=e,this.lastTimestamp=Date.now()}get guildIcon(){return this._guildIcon}set guildIcon(e){this._guildIcon=e}get m_strLanguage(){return this._m_strLanguage}set m_strLanguage(e){this._m_strLanguage=e}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){ak.register(Zt,()=>new Zt,5,200)}onLanChange(e){let t=parseInt(e[0]),r=parseInt(e[1]);switch(t){case 1:r==1&&Wt.reload();break;case 2:break}}get timeStamp(){return this._timeStamp+(Laya.Browser.now()-this.recordStampTime)/1e3}set timeStamp(e){this.recordStampTime=Laya.Browser.now(),this._timeStamp=e}updatePlayerInfo(e){this.playerDto||(this.playerDto=new Uo),this.playerDto.pid=e.roleId,this.playerDto.name=e.userName,this.playerDto.icon=e.icon,this.playerDto.exp=e.exp,this.playerDto.code=e.code,this.playerDto.country=e.country,this.playerDto.invite=e.invite,this.playerDto.invNum=e.invNum,this.playerDto.lv=e.lv,this.playerDto.snakeId=e.snakeId,this.playerDto.skinId=e.skinId,this.playerDto.score=e.score,this.playerDto.createTime=e.createTime,this.playerDto.maxKill=e.maxKill,this.playerDto.maxAlive=e.maxAlive,this.playerDto.skinId=e.skin,this.playerDto.club=e.club,Ar.initKnapsackData(e.items),Ar.initSnakeData(e.snake),L.event(A.ROLE_INFO_CHANGE)}getConsumeValue(e){e=parseInt(e.toString());var t=this.playerDto.coins[e];return t>0?t:0}moneyInfoHander(e,t=!0,r=!0){let s=!1,o=!1,l=0;for(let u of e)o=!1,u[0]==Gt.TYPE_EXP?(l=parseInt(u[1]+"")-this.playerDto.exp,this.playerDto.exp=parseInt(u[1]+""),o=l>0):(l=parseFloat(u[1]+"")-this.playerDto.coins[u[0]],this.playerDto.coins[u[0]]=parseFloat(u[1]+""),o=l>0),o&&sr.needPop&&r&&(s=!0,sr.addConsumeByServer([u[0],l]));t&&L.event(A.ROLE_INFO_CHANGE),s&&sr.autoPop&&ro.startShow()}getRedDotById(e){return!!(this.redDotData&&this.redDotData.indexOf(e)>-1)}},V=Yw.getInstance()});var Qw,z,At=_(()=>{"use strict";sv();$r();ok();Yt();Ot();yi();Qw=class i{constructor(){this._lanTypesById=new ht,this._lanTypesByType=new ht,this._configData=new ht,this._configData1=new ht}static getInstance(){return i._instance||(i._instance=new i),i._instance}initLanTypes(e){this._lanTypesById=new ht,this._lanTypesByType=new ht;for(let t in e){let r=new Na;if(r.init(e[t]),parseInt(r.if_open)!=1)continue;let s=r.id,o=r.type;this._lanTypesById.set(s,r),o&&o!=""&&this._lanTypesByType.set(o,r)}}getLanTypes(){return this._lanTypesById}getLanIdByType(e){if(this._lanTypesByType){let t=this._lanTypesByType.get(e);if(t)return parseInt(t.id.toString())}return 1}getLanTypeById(e){if(this._lanTypesById){let t=this._lanTypesById.get(e);if(t)return t.type}return"en"}initConfigLan(e){this._configData=e}initConfigLan1(e){this._configData1=e}initUILan(e){Laya.Text.langPacks={};let t;for(t in e){let r=e[t].value;Laya.Text.langPacks[t]=r}}changeBrToN(e){let t=/<br>/g;for(;e.indexOf("<br>")!=-1;)e=e.replace(t,`
`);return e}replacePlaceholder(e,t){if(e=="")return"";let r=/{(\d+)}/g;return t.length>0&&(e=e.replace(r,function(){return t[arguments[1]]})),this.replaceLanByBR(e)}replaceLanByBR(e){return e+""}getEnglishLanguage(e,...t){return this.getEnglishLanguageReplace(e,t)}getEnglishLanguageReplace(e,t){if(this._configData1&&this._configData1[e]){let r=this._configData1[e].value;if(r&&r!="")return this.replacePlaceholder(r,t)}return this.replacePlaceholder(e+"",t)}getLanguage(e,...t){return this.getLanguageReplace(e,t)}getLanguageReplace(e,t){if(this._configData&&this._configData[e]){let r=this._configData[e].value;if(r&&r!="")return this.replacePlaceholder(r,t)}return this.replacePlaceholder(e+"",t)}getLanguageMulti(e,t){if(console.log("getLanguageMulti",t),this._configData&&this._configData[e]){let r=this._configData[e].value;if(r&&r!="")return this.replacePlaceholderMulti(r,t)}return this.replacePlaceholder(e+"",t)}replacePlaceholderMulti(e,t){if(e=="")return"";let r=/{(\d+)}/g;return t.length>0&&(e=e.replace(r,function(){var s=t[arguments[1]];if(typeof s=="object")s=JSON.parse(s),s=i.getInstance().parseObj(s);else if(typeof s=="string")try{s=JSON.parse(s),typeof s=="object"&&(s=i.getInstance().parseObj(s))}catch{}return s})),this.replaceLanByBR(e)}parseObj(e){if(e.hasOwnProperty("tableType")){if(e.tableType==1){var t=re.m_dicItems.get(e.id);t&&(e=i.getInstance().getLanguage(t.name))}else if(e.tableType==2){var r=re.m_dicArenaDic.get(e.id);r&&(e=i.getInstance().getLanguage(r.name))}}else e=i.getInstance().getMultiLan(e);return e}getUILang(e,t=null,r=null,s=null,o=null){if(e=Laya.Text.langPacks&&Laya.Text.langPacks[e]?Laya.Text.langPacks[e]:e,arguments.length>1)for(let l=0,u=arguments.length;l<u;l++)e=e.replace("{"+l+"}",arguments[l+1]);return e}getMultiLan(e){var t=parseInt(V.m_strLanguage.toString()),r;return e&&(r=e[t],r||(r=e[Oa.Lan_en])),r}FGM_GetLanguage(){let e=function(r){console.log("initGame->-----------------------------FGM_GetLanguage:=="+r),r&&(ie.User_Lan=r)},t=Laya.LocalStorage.getItem(ie.COOKIE_CF_LAN);!t||t==""?e(this.language):e(t)}get language(){return"en"}FGM_SetLanguage(e){e&&e!=""&&Laya.LocalStorage.setItem(ie.COOKIE_CF_LAN,e)}dispose(){}},z=Qw.getInstance()});var Xw,Cr,pu=_(()=>{"use strict";cr();At();Xw=class i{constructor(){this._curErrTxt=""}static getInstance(){return i._instance||(i._instance=new i),i._instance}initErrData(e){this.errData=e}get(e){return this.errData[e]?this.errData[e].words:(console.warn("服务端错误码语言包未配表 错误码："+e),e)}showErrorWord(e,...t){var r=this.getLanguage2(e,t);et.notice(r)}getLanguage2(e,t){if(this.errData&&this.errData[e]){let r=this.errData[e].words;if(r&&r!="")return this._curErrTxt=z.replacePlaceholder(r,t),this._curErrTxt}return this._curErrTxt=z.replacePlaceholder(e+"",t),this._curErrTxt}showErrByString(e,t="#ff0000"){this._curErrTxt=e;let r=new Laya.Label(this._curErrTxt);r.width=500,r.align="center",r.height=40,r.fontSize=26,r.color=t,r.mouseEnabled=!1,r.strokeColor="#000000",r.stroke=.5,Laya.stage.addChild(r),r.x=(Laya.stage.width-r.width)/2,r.y=(Laya.stage.height-r.height)/2,Laya.Tween.to(r,{y:r.y-100,alpha:0},500,null,Laya.Handler.create(this,this.completeHandler,[r]),1e3)}completeHandler(e){e&&e.parent&&e.parent.removeChild(e)}dispose(){this.errData=null}},Cr=Xw.getInstance()});var mr,Jw,ge,jt=_(()=>{"use strict";$r();pf();xt();ri();pu();At();ws();cn();lv();Yt();Ot();yi();En();mr=class mr{constructor(){this.resArr=["gameIcon/snakeMatch/snakes/img_head101.png","gameIcon/snakeMatch/snakes/img_head102.png","gameIcon/snakeMatch/snakes/img_head103.png","gameIcon/snakeMatch/snakes/img_body101.png","gameIcon/snakeMatch/snakes/img_body102.png","gameIcon/snakeMatch/snakes/img_body103.png",{url:"scenes/mainView/MainScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBodySpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBeanSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchReadyView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/DamageNumber.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtLoadingView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtNoticeView.lh",type:Laya.Loader.HIERARCHY},"gameIcon/spine/img_ziyousai.png","gameIcon/spine/img_she.png","gameIcon/spine/img_qianbao.png","gameIcon/spine/img_gonghui.png","gameIcon/spine/img_gonghui2.png","gameIcon/spine/img_cion4.png","gameIcon/spine/img_cion5.png","gameIcon/spine/img_cion2.png","gameIcon/spine/img_cion1.png","gameIcon/spine/img_anniu3.png","gameIcon/spine/img_anniu2.png","gameIcon/spine/img_anniu1.png","gameIcon/spine/img_jlb.png","gameIcon/spine/img_jingjisai.png","gameIcon/spine/shop/egg/img_egg.png","res/common/comm_bg/img_tcbg.png","res/common/comm_bg/img_bg_1560.jpg","res/common/comm_bg/img_top_kuanping.png","res/common/comm/img_anniu1_1.png","res/common/comm/img_jiantou.png","res/common/comm/icon_zhuanshi.png","res/common/comm/img_zsdi.png","res/common/comm/img_tab1.png","res/common/comm/img_tab2.png","res/common/comm/img_gb.png","res/common/comm/img_tabbg.png","res/common/comm_bg/img_tkbg.png"];this.m_arrPreResource=["config/spot.json"];this.m_arrInitResource=["config/general.json","config/head.json","config/country.json","config/shop.json","config/snake.json","config/foods.json","config/item.json","config/arena.json","config/arenaType.json","config/snakeLengthRules.json","config/node.json","config/currencyAddress.json","config/aCoin.json","config/coinAddress.json","config/language.json","config/level.json","config/room.json","config/club.json"];this.m_objModuleReource={MainScene:["res/atlas/main.atlas"],ShopScene:[],MailScene:[],SettingScene:[],RoleInfoScene:[],RankSceneBase:[],RankScene:[],ClubScene:[],AssetNewScene:[],CommentDialog:["res/atlas/comment.atlas"],GuideView:["res/atlas/guide.atlas","res/atlas/ShopView.atlas","config/newplayer.json"],SelectHeadDialog:[],KnapsackScene:["res/atlas/mainUI1.atlas"]};this.m_objModuleViews={BaseAlertDialog:"scenes/baseAlert/BaseAlertDialog.lh",NoServerView:"scenes/createRole/NoServer.lh",CreateLoginView:"scenes/createRole/CreateLoginView.lh",ChangeHeadDialog:"scenes/createRole/ChangeHeadDialog.lh",HeroGetDialog:"scenes/shop/HeroGetDialog.lh",BuyTicketDialog:"scenes/shop/BuyTicketDialog.lh",ItemGetDialog:"scenes/item/ItemGetDialog.lh",EquipStarUpDialog:"scenes/item/EquipStarUpDialog.lh",RewardGetDialog:"scenes/item/RewardGetDialog.lh",KnapsackTipDialog:"scenes/item/KnapsackTipDialog.lh",SelectHeadDialog:"scenes/createRole/SelectHeadDialog.lh",TxtNoticeView:"scenes/notice/TxtNoticeView.lh",NoticeDialog:"scenes/notice/NoticeDialog.lh",HelpDialog:"scenes/notice/HelpDialog.lh",ImgDialog:"scenes/notice/ImgDialog.lh",ChampDetailDialog:"scenes/asset/ChampDetailDialog.lh",ChampRecordDialog:"scenes/asset/ChampRecordDialog.lh",RoleInfoDialog:"scenes/createRole/RoleInfoDialog.lh",RemGetDialog:"scenes/createRole/RemGetDialog.lh",CreateRoomDialog:"scenes/mainView/CreateRoomDialog.lh",CreateRentalDialog:"scenes/shop/CreateRentalDialog.lh",MyLeasedDialog:"scenes/shop/MyLeasedDialog.lh",MyRentedDialog:"scenes/shop/MyRentedDialog.lh",MyRentalBuyDialog:"scenes/shop/MyRentalBuyDialog.lh",EnterRoomView:"scenes/mainView/EnterRoomView.lh",InputPwdDialog:"scenes/mainView/InputPwdDialog.lh",RoomInfoDialog:"scenes/mainView/RoomInfoDialog.lh",HeroDetailDialog:"scenes/hero/HeroDetailDialog.lh",MatchEndRankView:"scenes/match/MatchEndRankView.lh",MatchEndTeamRankView:"scenes/match/MatchEndTeamRankView.lh",MatchEndRewardTokensDialog:"scenes/match/MatchEndRewardTokensDialog.lh",MyBookingView:"scenes/airdrop/MyBookingView.lh",UnionMemberView:"scenes/union/UnionMemberView.lh",UnionListView:"scenes/union/UnionListView.lh",CreateSubUnionView:"scenes/union/CreateSubUnionView.lh",ChangeUnionIconDialog:"scenes/union/ChangeUnionIconDialog.lh",MySubUnionView:"scenes/union/MySubUnionView.lh",UnionMemberApplyView:"scenes/union/UnionMemberApplyView.lh",UnionReferralView:"scenes/union/UnionReferralView.lh",UnionTransferView:"scenes/union/UnionTransferView.lh",TicketTransferView:"scenes/union/TicketTransferView.lh",HeroTransferView:"scenes/hero/HeroTransferView.lh",BanAccountView:"scenes/match/BanAccountView.lh",MatchReadyView:"scenes/match/MatchReadyView.lh",MatchEndView:"scenes/match/MatchEndView.lh",GameSettingLanguageDialog:"scenes/gameSetting/GameSettingLanguageDialog.lh",SkillTipDialog:"scenes/hero/SkillTipDialog.lh",TransferRecordDialog:"scenes/hero/TransferRecordDialog.lh",InviteConfimDialog:"scenes/airdrop/InviteConfimDialog.lh",ApplyConfimDialog:"scenes/airdrop/ApplyConfimDialog.lh",CreateSubWalletDialog:"scenes/scholarship/CreateSubWalletDialog.lh",WalletChooseHeroDialog:"scenes/scholarship/WalletChooseHeroDialog.lh",WalletChoosePropsDialog:"scenes/scholarship/WalletChoosePropsDialog.lh",EmployInfoDialog:"scenes/scholarship/EmployInfoDialog.lh",HireDetailDialog:"scenes/asset/HireDetailDialog.lh",ProxyDetailDialog:"scenes/asset/ProxyDetailDialog.lh",WithDrawRecordDialog:"scenes/asset/WithDrawRecordDialog.lh",NodeRevenueRecordDialog:"scenes/asset/NodeRevenueRecordDialog.lh",WithdrawDialog:"scenes/asset/WithdrawDialog.lh",DepositDialog:"scenes/asset/DepositDialog.lh",CreateClubDialog:"scenes/club/CreateClubDialog.lh",CreateClubRoomDialog:"scenes/club/CreateClubRoomDialog.lh",SettingRateDialog:"scenes/club/SettingRateDialog.lh",ReferralDialog:"scenes/createRole/ReferralDialog.lh",BuyPropDialog:"scenes/shop/BuyPropDialog.lh",JoinRoomDialog:"scenes/mainView/JoinRoomDialog.lh",SnakeUpgradeDialog:"scenes/knapsack/SnakeUpgradeDialog.lh",SnakeUpgradeSuccessDialog:"scenes/knapsack/SnakeUpgradeSuccessDialog.lh",PlayerUpgradeSuccessDialog:"scenes/mainView/PlayerUpgradeSuccessDialog.lh",ChangeClubHeadDialog:"scenes/club/ChangeClubHeadDialog.lh",JoinClubRoomDialog:"scenes/club/JoinClubRoomDialog.lh"};this.m_objConfigReource={};this.m_commonResource=new ht;this.loadingView=Laya.Browser.window.loadingView;this.ii=100;this.baseUrl="https://cdn.snake.ai/snake/"}static getInstance(){return mr._instance==null&&(mr._instance=new mr),mr._instance}init(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),this.initGameLanguage()}initGameLanguage(){mr.GameLanguage_URL="config/language.json",Laya.loader.load(mr.GameLanguage_URL,Laya.Handler.create(this,this.initGameResource))}initGameResource(e){if(e==null)return;let t=mr.getInstance().getResBySetURL(mr.GameLanguage_URL);z.initLanTypes(t.data),Qt.processLangParameter(),Laya.loader.clearRes(mr.GameLanguage_URL),this.onConfigLoaded()}onError(e){}onConfigLoaded(){let e=new uo;e.ID=4,e.Event="加载语言包信息",Wt.sendCustumEvent(4,null,e),ie.ignoreLang||(V.m_strLanguage=z.getLanIdByType(ie.User_Lan)),this.m_UILang="config/lang_english"+V.m_strLanguage+".json",this.m_NomalLang="config/english"+V.m_strLanguage+".json",this.m_NomalLang1="config/english1.json",this.m_ErrorLang="config/error"+V.m_strLanguage+".json",this.m_arrPreResource.push(this.m_UILang),this.m_arrPreResource.push(this.m_NomalLang),this.m_arrPreResource.push(this.m_NomalLang1),this.m_arrPreResource.push(this.m_ErrorLang),this.initResourceURL(this.m_arrPreResource,!0),this.initResourceURL(this.m_arrInitResource,!0),this.addFont1()}addFont1(){Laya.loader.load("res/font/CookieRun Regular.otf",Laya.Loader.TTF).then(()=>{this.loadDemoResource()})}loadDemoResource(){Laya.loader.load(this.resArr,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{ci.init(),this.damageNumPrefab=Laya.loader.getRes("scenes/match/DamageNumber.lh"),this.aniSkPrefab=Laya.loader.getRes("scenes/hero/AniSk.lh"),this.roleAniPrefab=Laya.loader.getRes("scenes/match/MatchSnakeSpr.lh"),this.matchSnakeBodyPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBodySpr.lh"),this.matchSnakeBeanPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBeanSpr.lh");var e=this.roleAniPrefab.create();console.log(" ================ roleAniPrefab: "+e);var t=this.matchSnakeBodyPrefab.create();console.log(" ================ snakeBodyPrefab: "+t),this.onLoadThreeDimen()})}onLoadThreeDimen(){Laya.loader.load(this.m_arrPreResource,Laya.Handler.create(this,this.onPreAssetLoaded),Laya.Handler.create(this,this.onPreAssetPress2,null,!1))}onPreAssetPress1(e){this.va=(e*100*.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetPress2(e){this.va=(e*100*.5+.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetLoaded(e){if(!e)return;let t=Laya.Browser.now();df.initSpotCfgData(),this.initResourceURL(this.m_objModuleReource),this.initResourceURL(this.m_objConfigReource),Wt.sendCustumEvent(5),re.preInit(),this.setGlobalLanguage(),Wt.sendCustumEvent(6),L.event(A.EVENT_BACK_TO_LOGIN),this.loadingView&&this.loadingView.loading(100),console.log("-----------------------preload-time:"+(Laya.Browser.now()-t))}setGlobalLanguage(){let e=mr._instance.getResByURL(this.m_NomalLang);z.initConfigLan(e.data);let t=mr._instance.getResByURL(this.m_NomalLang1);z.initConfigLan1(t.data);let r=mr._instance.getResByURL(this.m_UILang);z.initUILan(r.data);let s=mr._instance.getResByURL(this.m_ErrorLang);Cr.initErrData(s.data),this.clearResUrlByRoot(this.m_UILang,!0),this.clearResUrlByRoot(this.m_NomalLang,!0),this.clearResUrlByRoot(this.m_NomalLang1,!0),this.clearResUrlByRoot(this.m_ErrorLang,!0)}initResourceURL(e,t=!1){if(e instanceof Array)this.setResURLArr(e,t);else if(e instanceof Object)for(let r in e)this.setResURLArr(e[r],t)}setResURLArr(e,t){let r,s;for(let o=0;o<e.length;o++)t?(this.m_commonResource.set(e[o],!0),s=this.setResURL(e[o]),r=this.getTypeFromUrl(s),e[o]={url:s,type:r,size:1,priority:1}):this.m_commonResource.get(e[o])?(e.splice(o,1),o--):(s=this.setResURL(e[o]),r=this.getTypeFromUrl(s),e[o]={url:s,type:r,size:1,priority:1})}getTypeFromUrl(e){let{ext:t,typeId:r,main:s,loaderType:o}=Laya.Loader.getURLInfo(e);mr._extReg.lastIndex=e.lastIndexOf(".");let l=mr._extReg.exec(e);return l&&l.length>1?l[1].toLowerCase():"text"}setResURL(e){return e}clearResUrlByRoot(e,t=!1){let r=e;Laya.loader.clearRes(r)}hasFormatEffectUrl(e){return e.indexOf("effect/")>=0}setItemResURL(e){return e&&e.hasOwnProperty("item_img")?this.setResURL("icon/"+e.item_img+".png"):""}setThreeDimenUrl(e){return e?this.setResURL("threeDimen/"+e):""}getThreeDimenUrl(e){let t=this.setResURL("threeDimen/"+e);return Laya.Loader.getRes(t)}getResByURL(e){let t=mr.getInstance().setResURL(e);return Laya.Loader.getRes(t)}getResBySetURL(e){return Laya.Loader.getRes(e)}loadModuleUrl(e,t=null,r=null,s=1,o=!0){console.log("loadModuleUrl m_strName: "+e),this.ii++;let l=mr.getInstance().m_objModuleReource[e];if(l==null||l.length<1){t.run();return}Laya.loader.load(l,Laya.Handler.create(this,this.loadItemComplete,[t,l]),Laya.Handler.create(this,this.onLoadProgress,[e],!1),r,s,o,this.ii.toString())}loadItemComplete(e,t){this.usedUrlDic||(this.usedUrlDic=new ht);for(let r in t){let s=t[r].url,o=this.usedUrlDic.get(s);o?this.usedUrlDic.set(s,++o):this.usedUrlDic.set(s,1)}e.run()}clearModuleUrl(e){console.log("clearModuleUrl m_strName: "+e);let t=mr.getInstance().m_objModuleReource[e];for(let r in t){let s=t[r].url;if(this.usedUrlDic){let o=this.usedUrlDic.get(s);o-=1,o<1?(this.usedUrlDic.remove(s),Laya.loader.clearRes(s)):this.usedUrlDic.set(s,o)}}}onLoadProgress(e,t){}loadResource(e,t=null,r=null,s=null,o=1,l=!0){Laya.loader.load(e,t,r,s,o,l)}getNodeIcon(e){return this.setResURL("gameIcon/node/img_"+e+".png")}getCountryIcon(e){return this.setResURL("gameIcon/country/img_"+e+".png")}getSnakeHeadIcon(e){return(e==0||e=="0")&&console.error("id is 0"),this.setResURL("gameIcon/snakeMatch/snakes/img_head"+e+".png")}getCurrencyIcon(e){return`https://static.cryptoarena.io/images/token/token_${e}.png`}getSnakeBodyIcon(e){return this.setResURL("gameIcon/snakeMatch/snakes/img_body"+e+".png")}getFoodIcon(e){return this.setResURL("gameIcon/snakeMatch/foods/img_"+e+".png")}getShopItemIcon(e){return this.setResURL("res/shop/img_"+e+".png")}getItemIcon(e){return`https://static.cryptoarena.io/images/item/img_${e}.png`}getSnakeIcon(e){return`https://static.cryptoarena.io/images/snake/snake_${e}.png`}getItemBgIcon(e){return this.setResURL("gameIcon/items/itemBg/img_"+e+".png")}getItemBigIcon(e){return this.setResURL("gameIcon/items/itemBig/img_"+e+".png")}getItemBigBigIcon(e){return this.setResURL("gameIcon/items/itemBigBig/img_"+e+".jpg")}getItemQualityIcon(e){return this.setResURL("gameIcon/items/itemQuality/img_"+e+".png")}getMoneyIcon(e){return this.setResURL("gameIcon/items/money/img_"+e+".png")}getMatchSkillIcon(e){return this.setResURL("gameIcon/skill/matchSkills/img_"+e+".png")}getSnakeAniJson(e){return this.setResURL(`gameIcon/spine/shop/snake${e}/img_she_${e}.json`)}getPlayerIcon(e){return parseInt(e)>0?this.setResURL("gameIcon/head/headCircle/img_"+e+".png"):e}getClubIcon(e){return`https://static.cryptoarena.io/images/club/img_clubIcon_${e}.png`}getSoundURL(e,t=".ogg"){let r;return r=this.setResURL("mp3/"+e+t),r}getSoundURLogg(e){let t;return t=this.setResURL("mp3/"+e),t}getMapImg(e){return"gameIcon/map/"+e+"/img_map.jpg"}getHeroSkRes(){}getMapPrefab(e){return"gameIcon/map/map_"+e+".lh"}clearCache(){}};mr._extReg=/\.(\w+)\??/g;Jw=mr,ge=Jw.getInstance()});var at,Vi=_(()=>{"use strict";oi();ri();$r();jt();ws();xt();at=class i extends Laya.DialogManager{constructor(){super();this.views=new ht;this.m_arrLoadingArr=[];if(i._instance)throw new Error("LayerManager是单例,不可new.");i._instance=this,Laya.Dialog.manager=this}static get intance(){return i._instance||(i._instance=new i),i._instance}openModule(t,r=null){L.event(A.EVENT_OPEN_MODULE,[t,r])}hasOpenView(t){return this.views.get(t)!=null}getOpenView(t){return this.views.get(t)}disposeView(t,r){if(this.getOpenView(t)){let s=this.getOpenView(t);if(s instanceof Array)for(let o=0;o<s.length;o++)s[o].close(r);else s.close(r)}}init(){L.on(A.EVENT_OPEN_MODULE,this,this.onModulePanel),L.on(A.EVENT_CLOSE_MODULE,this,this.disposeView)}initMainView(){}onModulePanel(t,r=null){console.log("ModuleManager.onModulePanel moudleName:"+t),this.m_arrLoadingArr.indexOf(t)==-1&&(this.getOpenView(t)||(ci.showLoading(!1),this.m_arrLoadingArr.push(t),ge.loadModuleUrl(t,Laya.Handler.create(this,this.onLoaded,[t,r]))))}onLoaded(t,r=null){let s=this.m_arrLoadingArr.indexOf(t);s!=-1&&this.m_arrLoadingArr.splice(s,1);let o;var l=ge.m_objModuleViews[t];console.log("onLoaded: ",t,l),Laya.loader.load(l).then(u=>{if(o=u.create(),r&&o.setOpenData(r),o.m_strName=t,this.getOpenView(t)){console.log("Module already open, skipping creation:",t),o.hideLoadingBySelf||ci.hideLoading();return}if(o instanceof Laya.Box)o=o,me.instence.addToLayer(o,o.m_iLayerType),me.instence.setPosition(o,o.m_iPositionType,o.m_ioffsetX,o.m_ioffsetY),this.addViewToModuleManger(o);else if(o instanceof Laya.Dialog){let p=o;p.m_iLayerType==me.M_POP?(p.isModal=!0,p.isShowEffect=!0,this.open(p,!1,!0)):(p.isShowEffect=!1,this.open(p)),this.addViewToModuleManger(p)}o&&L.event(A.EVENT_MODULE_ADDED,o),o.hideLoadingBySelf||ci.hideLoading()}).catch(u=>{console.error("onLoaded 加载失败",u)})}addViewToModuleManger(t){let r=t.m_strName;this.views.get(r)?this.views.get(r)instanceof Array?this.views.get(r).push(t):this.views.set(r,[this.views.get(r),t]):this.views.set(r,t),this.on(Laya.Event.CLOSE,this,this.removeViewFromModuleManger)}removeViewFromModuleManger(t){if(!t||!this.views)return;let r=t.m_strName;console.log("removeViewFromModuleManger viewName: "+r),t.off(Laya.Event.CLOSE,this,this.removeViewFromModuleManger);let s=this.views.get(r);if(s instanceof Array){let o=s.indexOf(t);o!=-1&&(s.splice(o,1),s.length==0&&this.views.remove(r))}else this.views.remove(r)}closeAll(){super.closeAll()}doClose(t){super.doClose(t),this.event(Laya.Event.CLOSE,t)}}});var Zw,$e,xr=_(()=>{"use strict";Vi();Yi();ri();xt();$r();yd();jt();mn();Yt();Ta();mu();On();to();_r();Co();ss();Nn();jr();z0();G0();Ll();Dn();Zw=class i{constructor(){this._inited=!1;this.stopAll=!1;this.roomWatcher=!1;this.matchWatcher=!1;this.heroReadyDic=new ht;this.hasDieEnd=!1;this.frameIndex=0;this.rotateSpeed=500;this.speedRate=1;this.speed=6;this.time=0;this.dir=0;this.aimDir=0;this.bones=[Zt.create(0,0)];this.init()}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){this._inited||(this._inited=!0)}get roomDto(){return this._roomDto}set roomDto(e){if(console.log("roomDto: ",e),this._roomDto=e,e){var t=V.playerDto.pid;if(e.watch){let r=e.watch.some(s=>s===t);this.roomWatcher=r}}}setRoomAnonymousLabel(e,t=-1){return t==-1&&(t=i._instance.roomDto.anonymous),t==1?Ls.ANONYMOUS_NAME:e}setMatchAnonymousLabel(e,t=-1){return t==-1&&(t=i._instance.matchDto.anonymous),!this.matchWatcher&&t==1?Ls.ANONYMOUS_NAME:e}setMatchAnonymousImg(e,t=-1){return t==-1&&(t=i._instance.matchDto.anonymous),!this.matchWatcher&&t==1?null:e}get matchDto(){return this._matchDto}set matchDto(e){if(console.log("matchDto: ",e),this._matchDto=e,e){var t=V.playerDto.pid;if(e.watch){let r=e.watch.some(s=>s===t);this.matchWatcher=r}e.startTime-e.nowTime>0?this.stopAll=!0:this.stopAll=!1}else this.stopAll=!1}setMatchRes(){this.heroReadyDic=new ht;var e=this.roomDto.members.length,t=[],r=this.currArenaItem.mapid;if(this.heroReadyDic.get("map_"+r)==null){var r=i._instance.currArenaItem.mapid,s=ge.getMapImg(r);t.push(s);var o=ge.getMapPrefab(r);t.push(o),this.heroReadyDic.set("map_"+r,!0)}for(var l=0;l<e;l++){var u=this.roomDto.members[l];this.heroReadyDic.get(u.heroId+"_"+u.heroColor)==null&&this.heroReadyDic.set(u.heroId+"_"+u.heroColor,!0)}t.length>0&&Laya.loader.load(t,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{})}onPreAssetPress1(e){}onAiSetMatchEnd(e){this.msgEndbody=e,L.event(A.EVENT_GameScene_Gray),ft.isMatching=!1,i._instance.stopAll=!0,at.intance.openModule(R.MatchEndView,[Ke.MATCH_TYPE_PVE,e])}onSetMatchEnd(e,t=!1){Ue.frameNetQueue.isStart=!1,this.msgEndbody=e,this.hasDieEnd||t?(L.event(A.EVENT_GameScene_Gray),this.onGoMatchEndRank(this.msgEndbody),this.hasDieEnd=!1):Laya.timer.once(4e3,this,this.checkSnake)}onMockMatchEnd(){Laya.timer.clear(this,this.checkSnake),this.msgEndbody?(L.event(A.EVENT_GameScene_Gray),this.onGoMatchEndRank(this.msgEndbody)):this.hasDieEnd=!0}checkSnake(){xe.getInstance().selfSnake&&xe.getInstance().selfSnake.isAlive(!1)&&(xe.getInstance().selfSnake.die(),L.event(A.EVENT_GameScene_Gray),this.onGoMatchEndRank(this.msgEndbody))}onGoMatchEndRank(e){ft.isMatching=!1,i._instance.stopAll=!0,at.intance.openModule(R.MatchEndView,[Ke.MATCH_TYPE_PVP,e])}clearData(){console.log("clearData "),this.roomDto=null,this.matchDto=null,this.msgEndbody=null,this.hasDieEnd=!1,this.heroReadyDic=null,this.currArenaItem=null,this.roomWatcher=!1,this.matchWatcher=!1,ft.close(),xe.getInstance().clear(),vi.clear(),Laya.Pool.clearBySign(Ts.POOL_NAME),Laya.Pool.clearBySign(ks.POOL_NAME),fn.destroy(),wt.playMusicByName(wt.soundName_bg,".mp3"),sr.needPop=!0,ro.startShow()}initMove(){return;var e,t,r,s}toAimDir(e){this.time=0,this.aimDir=e;var t=bi.getAngleToVec(e);console.log("TEST==== 目标方向：",e,"向量：",t.x,t.y);for(var r=0;r<560;r++)this.move(null)}move(e){this.time++,this.frameIndex++;for(let s=0;s<this.speedRate;s++){let o=this.aimDir-this.dir,l=this.rotateSpeed*ae.snake.defaultMoveInterval;if(Math.abs(o)<l)this.dir=this.aimDir;else{o=(o+360)%360,o>180&&(o-=360);var t=Math.abs(o)<l?o:l*(o>0?1:-1);this.dir+=t,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360)}let u=this.dir*Math.PI/180,p=Zt.create(Math.cos(u),Math.sin(u));var r=this.bones[0].add(p.mul(this.speed));this.bones[0].assign(r),console.log("TEST==== 移动蛇头坐标：","第"+this.time+"次",this.bones[0].x,this.bones[0].y,"frameIndex: "+this.frameIndex)}}},$e=Zw.getInstance()});var bi,Co=_(()=>{"use strict";ss();xr();Ot();_r();bi=class i{constructor(){}static judgePosition(e,t){let r=Math.atan2(t,e)*180/Math.PI;return r<0&&(r+=360),Math.floor(r)}static normalizeAngle(e){return e=e%360,e<0&&(e+=360),e}static distancePoint(e,t,r,s){return Math.sqrt((e-r)*(e-r)+(t-s)*(t-s))}get2D_Distance(e,t){return Math.sqrt(Math.pow(Math.abs(e),2)+Math.pow(Math.abs(t),2))}static rollCharacterByDir(e,t,r,s){let o=r;return i.rollCharacter(e,t,o,s)}static rollCharacter(e,t,r,s){let o=r*(Math.PI/180);var l=e+s*Math.cos(o),u=t+s*Math.sin(o),p=$e.currArenaItem.mapid,h=re.m_dicMaps.get(p),f=h.offset;return l<f?l=f:l>h.width-f&&(l=h.width-f),u<f?u=f:u>h.height-f&&(u=h.height-f),console.log(`新的坐标：X=${l}, Y=${u}`),[l,u]}static getRandomPointInMap(){var e=$e.currArenaItem.mapid,t=re.m_dicMaps.get(e),r=t.width,s=t.height,o=t.offset;let l=Math.floor(Math.random()*(r-2*o))+o,u=Math.floor(Math.random()*(s-2*o))+o;return{x:l,y:u}}static createDirectPath(e,t,r,s=40,o=25){for(var l=[],u=r*Math.PI/180,p=1;p<s;++p){var h=e,f=t+o*p,g=-(f-t)*Math.sin(u)+e,b=(f-t)*Math.cos(u)+t;l.push(g,b)}return l}static pointsBack(e,t){if(t<=0||!e||e.length<4)return e;for(var r=0,s=-1,o=-1,l=0;l<e.length;l+=2){var u=e[l],p=e[l+1];s>0&&o>0&&(r+=this.distancePoint(s,o,u,p)),s=u,o=p}if(r<t)return null;for(var h=e.concat(),f=0,g=0;h&&h.length>=4&&f<t;){var b=h.pop(),v=h.pop(),w=h[h.length-1],k=h[h.length-2];if(f+=this.distancePoint(k,w,v,b),g=f-t,g>0){var E=Math.atan2(w-b,k-v),F=E*180/Math.PI+90;E=F*Math.PI/180;var O=w+g,H=-(O-w)*Math.sin(E)+k,Y=(O-w)*Math.cos(E)+w;h.push(H,Y)}}return h}static createLinePath(e,t,r,s,o=25,l=0){var u=[],p=Math.atan2(s-t,r-e);p=(p*180/Math.PI-90)*Math.PI/180;for(var h=this.distancePoint(e,t,r,s)-l,f=0,g=0;h>f;){var b=e,v=t+o*g,w=-(v-t)*Math.sin(p)+e,k=(v-t)*Math.cos(p)+t;f=this.distancePoint(e,t,w,k),h>f&&u.push(w,k),g++}return l==0&&u.push(r,s),u}static rolePosTransform(e,t,r){var s=new Laya.Matrix;return s.rotate(Math.PI/180*(e.modelAngle-90)),s.translate(t.x,t.y),s.transformPoint(r)}static pointtInPolygon(e,t){for(var r=0,s=0;s<t.length;s++){var o=t[s],l=t[(s+1)%t.length];if(o.y!=l.y&&!(e.y<Math.min(o.y,l.y))&&!(e.y>=Math.max(o.y,l.y))){var u=(e.y-o.y)*(l.x-o.x)/(l.y-o.y)+o.x;u>e.x&&r++}}return r%2==1}static pointInPie(e,t,r,s,o,l){var u=Math.atan2(l.y-t,l.x-e)*180/Math.PI,p=this.distancePoint(e,t,l.x,l.y);return u>=r&&u<=s&&p<=o}static getRandInRound(e,t){return Math.floor(Math.random()*(t-e+1))+e}static getUnitVector(e){let r=e*(Math.PI/180),s=1*Math.cos(r),o=1*Math.sin(r);return new Laya.Point(s,o)}static getAngleToVec(e){let t=e*Math.PI/180,r=Math.cos(t),s=Math.sin(t);return Zt.create(r,s)}static subtract(e,t){let r=new Laya.Point;return r.x=e.x-t.x,r.y=e.y-t.y,r}static getDistance(e,t){let r=e.x-t.x,s=e.y-t.y;return Math.sqrt(r*r+s*s)}static calculateDistance(e,t){let r=e.x-t.x,s=e.y-t.y;return Math.sqrt(r*r+s*s)}static lerp(e,t,r){return e+(t-e)*r}static fromBigToSmall(e,t){var r=e*185/ae.mapSize.width,s=t*185/ae.mapSize.height;return[r,s]}}});xt();ri();Co();xr();jr();var{regClass:hO}=Laya,Ai=Laya.InputManager,Ld=class extends Laya.Script{constructor(){super(...arguments);this.currRockerBar=null;this.maxDistance=80;this.isMouseDown=!1;this.mouseDownPosition=new Laya.Point;this._currentMouse=new Laya.Point;this.initRockerBarPosition=new Laya.Point;this.key1Pressed=!1;this.key2Pressed=!1;this.key3Pressed=!1;this.key4Pressed=!1;this.key5Pressed=!1;this.key6Pressed=!1;this.key7Pressed=!1;this.key8Pressed=!1;this.keySpacePressed=!1;this.directionOffset=0;this.isKeyRun=!1}onEnable(){Laya.InputManager.multiTouchEnabled=!0}onStart(){this.currRockerBar=this.owner.getChildByName("freebar"),this.freetrack=this.owner.getChildByName("freetrack"),this.img_arrow_left=this.freetrack.getChildByName("img_arrow_left"),this.img_arrow_right=this.freetrack.getChildByName("img_arrow_right"),this.img_arrow_up=this.freetrack.getChildByName("img_arrow_up"),this.img_arrow_down=this.freetrack.getChildByName("img_arrow_down"),Laya.Browser.onPC?this.freetrack.visible=!0:this.img_arrow_left.visible=this.img_arrow_right.visible=this.img_arrow_up.visible=this.img_arrow_down.visible=!1,this.initialise()}initialise(){this.initRockerBarPosition.setTo(this.currRockerBar.x,this.currRockerBar.y),this.currRockerBar.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}onSkillKeyDown(t,r,s){switch(t.stopPropagation(),r){case 1:this.key1Pressed=s;break;case 2:this.key2Pressed=s;break;case 3:this.key3Pressed=s;break}}onMouseDown(t){$e.stopAll||(t.stopPropagation(),this.isMouseDown=!0,this.currRockerBar.selected=!0,Laya.Browser.onPC||(this.freetrack.visible=!0),this.mouseDownPosition.setTo(this.owner.mouseX,this.owner.mouseY),console.log("onMouseDown this.owner.mouse: ",this.owner.mouseX,this.owner.mouseY),this.isKeyRun=!1,this.touchId=t.touchId)}onMouseUp(t){!this.isMouseDown||t.touchId!==this.touchId||this.endClick(t)}endClick(t){this.isMouseDown=!1,this.currRockerBar.x=this.initRockerBarPosition.x,this.currRockerBar.y=this.initRockerBarPosition.y,this.currRockerBar.selected=!1,this.setDir(-4),this.touchId=-1}onMouseMove(t){if(!this.isMouseDown||!this.currRockerBar||t.touchId!==this.touchId)return;t.stopPropagation(),this._currentMouse.setTo(t.stageX,t.stageY);let r=this.owner.globalToLocal(this._currentMouse,!1),s=r.x-this.mouseDownPosition.x,o=r.y-this.mouseDownPosition.y;if(Math.sqrt(s**2+o**2)<this.maxDistance)this.currRockerBar.x=this.initRockerBarPosition.x+s,this.currRockerBar.y=this.initRockerBarPosition.y+o;else{let u=Math.atan2(s,o);this.currRockerBar.x=Math.sin(u)*this.maxDistance+this.initRockerBarPosition.x,this.currRockerBar.y=Math.cos(u)*this.maxDistance+this.initRockerBarPosition.y}if(Math.abs(s)>this.directionOffset||Math.abs(o)>this.directionOffset){let u=bi.judgePosition(s,o);this.setDir(u)}}onUpdate(){$e.stopAll||this.getKeyboardPressed()}setDir(t){this.lastDirection!=t&&(xe.getInstance().setMyHeroDirection(t),this.lastDirection=t)}getKeyboardPressed(){if(Ai.hasKeyDown(Laya.Keyboard.W)&&Ai.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(225)):Ai.hasKeyDown(Laya.Keyboard.W)&&Ai.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(315)):Ai.hasKeyDown(Laya.Keyboard.S)&&Ai.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(135)):Ai.hasKeyDown(Laya.Keyboard.S)&&Ai.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(45)):Ai.hasKeyDown(Laya.Keyboard.W)?(this.isKeyRun=!0,this.setDir(270)):Ai.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(0)):Ai.hasKeyDown(Laya.Keyboard.S)?(this.isKeyRun=!0,this.setDir(90)):Ai.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(180)):this.isKeyRun&&this.setDir(-4),Ai.hasKeyDown(Laya.Keyboard.H)||Ai.hasKeyDown(Laya.Keyboard.NUMPAD_1)){if(this.key1Pressed)return;this.key1Pressed=!0,L.event(A.EVENT_CLICK_NUM,1),Laya.timer.once(500,this,this.notKey1Pressed)}if(Ai.hasKeyDown(Laya.Keyboard.J)||Ai.hasKeyDown(Laya.Keyboard.NUMPAD_2)){if(this.key2Pressed)return;this.key2Pressed=!0,L.event(A.EVENT_CLICK_NUM,2),Laya.timer.once(500,this,this.notKey2Pressed)}if(Ai.hasKeyDown(Laya.Keyboard.K)||Ai.hasKeyDown(Laya.Keyboard.NUMPAD_3)){if(this.key3Pressed)return;this.key3Pressed=!0,L.event(A.EVENT_CLICK_NUM,3),Laya.timer.once(500,this,this.notKey3Pressed)}if(Ai.hasKeyDown(Laya.Keyboard.L)||Ai.hasKeyDown(Laya.Keyboard.NUMPAD_4)){if(this.key4Pressed)return;this.key4Pressed=!0,L.event(A.EVENT_CLICK_NUM,4),Laya.timer.once(500,this,this.notKey4Pressed)}if(Ai.hasKeyDown(Laya.Keyboard.M)||Ai.hasKeyDown(Laya.Keyboard.NUMPAD_5)){if(this.key5Pressed)return;this.key5Pressed=!0,L.event(A.EVENT_CLICK_NUM,5),Laya.timer.once(500,this,this.notKey5Pressed)}if(Ai.hasKeyDown(Laya.Keyboard.N)||Ai.hasKeyDown(Laya.Keyboard.NUMPAD_6)){if(this.key6Pressed)return;this.key6Pressed=!0,L.event(A.EVENT_CLICK_NUM,6),Laya.timer.once(500,this,this.notKey6Pressed)}if(Ai.hasKeyDown(Laya.Keyboard.B)||Ai.hasKeyDown(Laya.Keyboard.NUMPAD_7)){if(this.key7Pressed)return;this.key7Pressed=!0,L.event(A.EVENT_CLICK_NUM,7),Laya.timer.once(500,this,this.notKey7Pressed)}if(Ai.hasKeyDown(Laya.Keyboard.V)||Ai.hasKeyDown(Laya.Keyboard.NUMPAD_8)){if(this.key8Pressed)return;this.key8Pressed=!0,L.event(A.EVENT_CLICK_NUM,8),Laya.timer.once(500,this,this.notKey8Pressed)}if(Ai.hasKeyDown(Laya.Keyboard.SPACE)){if(this.keySpacePressed)return;this.keySpacePressed=!0,L.event(A.EVENT_CLICK_SPACE,!0)}else this.keySpacePressed&&(L.event(A.EVENT_CLICK_SPACE,!1),this.notKeySpacePressed(),Laya.timer.clear(this,this.notKeySpacePressed))}notKey1Pressed(){this.key1Pressed=!1}notKey2Pressed(){this.key2Pressed=!1}notKey3Pressed(){this.key3Pressed=!1}notKey4Pressed(){this.key4Pressed=!1}notKey5Pressed(){this.key5Pressed=!1}notKey6Pressed(){this.key6Pressed=!1}notKey7Pressed(){this.key7Pressed=!1}notKey8Pressed(){this.key8Pressed=!1}notKeySpacePressed(){this.keySpacePressed=!1}getKeyPressed(t){var r=t.toParentPoint(new Laya.Point(t.x,t.y));return r.x>t.x&&r.x<t.x+t.width&&r.y>t.y&&r.y<t.y+t.height}getDistance(t,r,s,o){let l=t-s,u=r-o;return Math.sqrt(l*l+u*u)}onDisable(){Laya.InputManager.multiTouchEnabled=!1}};Ld=K([hO("7cTqWb35RwygSkuWy4QkgQ")],Ld);var Ro=class Ro extends Laya.ColorFilter{constructor(e=null){super(e)}static addClickFilter(e){let t=e.filters||[];t.push(Ro.clickFilter),e.filters=t}static addHoverFilter(e){let t=e.filters||[];t.push(Ro.hoverFilter),e.filters=t}static clearClickFilter(e){let t=e.filters;if(t!=null&&t.length>0){for(let r=t.length-1;r>-1;r--)t[r]instanceof Ro&&t.splice(r,1);e.filters=t}}static clearHoverFilter(e){this.clearClickFilter(e)}};Ro.clickFilter=new Ro([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]),Ro.hoverFilter=new Ro([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]);var sn=Ro;mn();var{regClass:dO,property:mO}=Laya,gu=class extends Laya.Script{constructor(){super();this.noSound=!1}onEnable(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onUp)}onDown(){this.noSound||wt.playSoundByName(wt.soundName_hit),sn.addClickFilter(this.owner)}onUp(){sn.clearClickFilter(this.owner)}onDisable(){sn.clearClickFilter(this.owner),this.owner.off(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onUp)}};K([mO({type:"boolean"})],gu.prototype,"noSound",2),gu=K([dO("cL1AmqOiTHmtQWKayPNcTA")],gu);dn();var{regClass:fO,property:Qde}=Laya,Bo=class extends Laya.Script{constructor(){super(...arguments);this.currentValue=0;this.targetValue=100;this.duration=2;this.dataMode=1}onAwake(){}startIncrement(t,r=2,s=1){this.targetValue=t,this.duration=r,this.dataMode=s,this.currentValue=0,this.updateText(),Laya.Tween.to(this,{currentValue:this.targetValue,update:new Laya.Handler(this,this.updateText)},this.duration*1e3,Laya.Ease.linearIn,null,null,!0)}updateText(){this.dataMode==1?this.owner.value=Math.round(this.currentValue).toString():this.dataMode==3?this.owner.value=xi.format(this.currentValue,":",!1):this.owner.value=this.currentValue.toFixed(2)}onDestroy(){Laya.Tween.clearAll(this)}};Bo=K([fO("Uq3IEB9CSNSU6R4gjfo1lw")],Bo);oi();Vi();cn();mn();vd();Al();Ll();jr();_r();ri();xt();Yt();Yi();Ot();dn();Ta();xr();var n_=class extends Laya.Scene{};_w();var{regClass:gO}=Laya,s_=class extends n_{constructor(){super(...arguments);this.liveNum=0;this.lastSeedRate=0;this.SnakeAINum=5;this.snakeAIArr=[]}onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onOpened(t){var r=$e.matchDto.startTime-$e.matchDto.nowTime;r>0&&at.intance.openModule(R.MatchReadyView);var s=$e.matchDto.arenaId,o=re.m_dicArenaDic.get(s);$e.currArenaItem=o,this.list_rank.array=[];var l=this.map_1001;fn.gameMap=l,fn.img_smallMap=this.img_smallMap,Wt.sendCustumEvent(42),this.arenaNo.text="",this.init(),this.onInitEnd(this),this.playMusic(),this.closeReady()}closeReady(){at.intance.disposeView(R.MatchReadyView)}playMusic(){wt.playMusicByURL("mp3/battle.mp3"),sr.needPop=!1}init(){this.registerEvents(),this.btn_addSpeed.on(Laya.Event.MOUSE_DOWN,this,this.onTouchSpeedDown),this.btn_addSpeed.on(Laya.Event.MOUSE_UP,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_OUT,this,this.onTouchSpeedUp),La.init(this.gameLayer),La.createData(),La.startGame()}onTouchSpeedDown(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedDown "+t.type)}this.lastSeedRate!=ae.snakeSpeedRate.speedUp&&(this.lastSeedRate=ae.snakeSpeedRate.speedUp,xe.getInstance().updateSpeedRate(ae.snakeType.SELF,ae.snakeSpeedRate.speedUp))}onTouchSpeedUp(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedUp "+t.type),sn.clearClickFilter(t.target)}this.lastSeedRate!=ae.snakeSpeedRate.default&&(this.lastSeedRate=ae.snakeSpeedRate.default,xe.getInstance().updateSpeedRate(ae.snakeType.SELF,ae.snakeSpeedRate.default))}onSpaceClick(t){t?(this.onTouchSpeedDown(null),sn.addClickFilter(this.btn_addSpeed)):(this.onTouchSpeedUp(null),sn.clearClickFilter(this.btn_addSpeed))}onInitEnd(t){t.startGameLoop(),t.updateBattleCD()}startGameLoop(){Laya.timer.frameLoop(10,this,this.gameLoop)}registerEvents(){L.on(A.LENGTH_CHANGE,this,this.updateLength),L.on(A.KILL_SNAKE,this,this.updateKills)}removeEvents(){L.off(A.LENGTH_CHANGE,this,this.updateLength),L.off(A.KILL_SNAKE,this,this.updateKills)}gameLoop(){xe.getInstance().selfSnake&&xe.getInstance().selfSnake.tag&&(this.updateLength(xe.getInstance().selfSnake.getSkinLength(!1)),this.updateKills(xe.getInstance().selfSnake.tag.kills),this.updateSnakeLengthRule()),xe.getInstance().matchHeroSprDic&&(this.list_rank.array=this.getSortPlayer(xe.getInstance().matchHeroSprDic.values),this.tf_remainer.text=this.liveNum+"")}updateSnakeLengthRule(){var t=xe.getInstance().selfSnake.tag.snakeId,r=xe.getInstance().selfSnake.getSkinLength(!1),s=re.getSheetDataByMultiKey(re.m_dicSnakeLengthRules,[t,r]),o=re.getSheetDataByMultiKey(re.m_dicSnakeLengthRules,[t,r+1]),l=xe.getInstance().selfSnake.getScore(!1);if(s&&o){var u=l-s.accumulatePoints,p=o.accumulatePoints-s.accumulatePoints;this.text_score.text=`${u}/${p}`;var h=u/p*-180;h<-180?h=-180:h>0&&(h=0),this.img_socre_mask.rotation>h?Laya.Tween.to(this.img_socre_mask,{rotation:h},100):(Laya.Tween.clearAll(this.img_socre_mask),this.img_socre_mask.rotation=h,this.img_socre_mask.rotation=h)}}updateKills(t){this.text_kill.text=`${t}`}updateLength(t){this.text_length.text=`${t}`}getSortPlayer(t){let s=t.slice().sort((u,p)=>p.getScore(!1)-u.getScore(!1)),o=[];this.liveNum=0;let l=1;return s.forEach(u=>{u.rankNum=l,u.tag!=null&&this.liveNum++,u.tag!=null&&(l<=10?o.push(u):u.tag.roleId===V.playerDto.pid&&(o.length>=10?o.splice(-1,1,u):o.push(u))),l++}),o}updateBattleCD(){$e.matchCoolDownTime=Math.round($e.matchDto.remainderCd/1e3),$e.matchCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):Laya.timer.clear(this,this.onSetCoolTime)}onSetCoolTime(){this.tf_reduceTime.text=xi.format($e.matchCoolDownTime,":",!1),$e.matchCoolDownTime>=0?(this.tf_reduceTime.text=xi.format($e.matchCoolDownTime,":",!1),$e.matchCoolDownTime<=10&&this.scaleEffect(),$e.stopAll||$e.matchCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),Pn.onPveEnd())}scaleEffect(){var t=this;Laya.Tween.to(this.tf_reduceTime,{scaleX:1.3,scaleY:1.3},200,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.Tween.to(t.tf_reduceTime,{scaleX:1,scaleY:1},200,Laya.Ease.linearInOut)}))}onGameSceneGray(){this.matchBox.gray=!0,Laya.timer.once(1e3,this,this.stopUpdate)}stopUpdate(){La.endTimer()}onEnable(){L.on(A.EVENT_GameScene_Gray,this,this.onGameSceneGray),L.on(A.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown)}onKeyDown(t){t.keyCode===Laya.Keyboard.X&&Fn.getInstance().toggleVisible()}onWindowFocus(){}onDisable(){this.stopUpdate(),L.off(A.EVENT_GameScene_Gray,this,this.onGameSceneGray),L.off(A.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.off(Laya.Event.KEY_DOWN,this,this.onKeyDown),this.removeEvents(),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),La.clear(),$e.clearData()}};s_=K([gO("xqHhdUJURkuoCmI0OKh8Kg")],s_);jt();var o_=class extends Laya.Image{};var{regClass:bO}=Laya,a_=class extends o_{constructor(){super(...arguments);this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200}init(t){this.skin=ge.getFoodIcon(t.icon)}startScalingAnimation(){let t=this.minScale+Math.random()*(this.maxScale-this.minScale),r=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:t,scaleY:t},r,null,Laya.Handler.create(this,()=>{let s=this.minScale+Math.random()*(1-this.minScale),o=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:s,scaleY:s},o,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}onDisable(){Laya.Tween.clearAll(this)}};a_=K([bO("j4yWA5APT7ipho7IOx4ryg")],a_);z0();G0();Ll();oi();ri();xt();dn();_r();vd();Tw();var l_=class extends Laya.Scene{};jr();Yt();xr();Ot();mn();Ta();Dn();On();Vi();Yi();var{regClass:yO}=Laya,c_=class extends l_{constructor(){super(...arguments);this.liveNum=0;this.lastSeedRate=0;this.SnakeAINum=5;this.snakeAIArr=[]}onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onOpened(t){this.list_rank.array=[];var r=this.map_1001;fn.gameMap=r,fn.img_smallMap=this.img_smallMap,this.init(),this.playMusic()}playMusic(){wt.playMusicByURL("mp3/battle.mp3"),sr.needPop=!1}init(){this.registerEvents(),this.btn_addSpeed.on(Laya.Event.MOUSE_DOWN,this,this.onTouchSpeedDown),this.btn_addSpeed.on(Laya.Event.MOUSE_UP,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_OUT,this,this.onTouchSpeedUp),Un.init(this.gameLayer)}onTouchSpeedDown(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedDown "+t.type)}this.lastSeedRate!=ae.snakeSpeedRate.speedUp&&(this.lastSeedRate=ae.snakeSpeedRate.speedUp,xe.getInstance().updateSpeedRate(ae.snakeType.SELF,ae.snakeSpeedRate.speedUp))}onTouchSpeedUp(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedUp "+t.type),sn.clearClickFilter(t.target)}this.lastSeedRate!=ae.snakeSpeedRate.default&&(this.lastSeedRate=ae.snakeSpeedRate.default,xe.getInstance().updateSpeedRate(ae.snakeType.SELF,ae.snakeSpeedRate.default))}onSpaceClick(t){t?(this.onTouchSpeedDown(null),sn.addClickFilter(this.btn_addSpeed)):(this.onTouchSpeedUp(null),sn.clearClickFilter(this.btn_addSpeed))}startGameLoop(){Laya.timer.frameLoop(10,this,this.gameLoop)}registerEvents(){L.on(A.LENGTH_CHANGE,this,this.updateLength),L.on(A.KILL_SNAKE,this,this.updateKills)}removeEvents(){L.off(A.LENGTH_CHANGE,this,this.updateLength),L.off(A.KILL_SNAKE,this,this.updateKills)}gameLoop(){xe.getInstance().selfSnake&&xe.getInstance().selfSnake.tag&&(this.updateLength(xe.getInstance().selfSnake.getSkinLength(!0)),this.updateKills(xe.getInstance().selfSnake.tag.kills),this.updateSnakeLengthRule()),xe.getInstance().matchHeroSprDic&&(this.list_rank.array=this.getSortPlayer(xe.getInstance().matchHeroSprDic.values),this.tf_remainer.text=this.liveNum+"")}updateSnakeLengthRule(){var t=xe.getInstance().selfSnake.tag.snakeId,r=xe.getInstance().selfSnake.getSkinLength(!0),s=re.getSheetDataByMultiKey(re.m_dicSnakeLengthRules,[t,r]),o=re.getSheetDataByMultiKey(re.m_dicSnakeLengthRules,[t,r+1]),l=xe.getInstance().selfSnake.getScore(!0);if(s&&o){var u=l-s.accumulatePoints,p=o.accumulatePoints-s.accumulatePoints;this.text_score.text=`${u}/${p}`;var h=u/p*-180;h<-180?h=-180:h>0&&(h=0),this.img_socre_mask.rotation>h?Laya.Tween.to(this.img_socre_mask,{rotation:h},100):(Laya.Tween.clearAll(this.img_socre_mask),this.img_socre_mask.rotation=h,this.img_socre_mask.rotation=h)}}updateKills(t){this.text_kill.text=`${t}`}updateLength(t){this.text_length.text=`${t}`}onInitData(){var t=$e.matchDto.roomId;t?this.arenaNo.text=t+"":this.arenaNo.text="",Un.createData(),Un.startGame(),this.startGameLoop(),this.updateBattleCD(),at.intance.disposeView(R.MatchReadyView,"must")}onRestoreData(){Un.clearTimer(),Un.restoreData(),Un.startGame()}getSortPlayer(t){let s=t.slice().sort((u,p)=>p.getScore(!0)-u.getScore(!0)),o=[];this.liveNum=0;let l=1;return s.forEach(u=>{u.rankNum=l,u.tag!=null&&this.liveNum++,u.tag!=null&&(l<=10?o.push(u):u.tag.roleId===V.playerDto.pid&&(o.length>=10?o.splice(-1,1,u):o.push(u))),l++}),o}updateBattleCD(){$e.matchCoolDownTime=Math.round(($e.matchDto.myPlayerObject.oprTime-$e.matchDto.myPlayerObject.enterTime)/1e3),this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)}onSetCoolTime(){this.tf_reduceTime.text=xi.format($e.matchCoolDownTime,":",!1),$e.stopAll||$e.matchCoolDownTime++}onGameSceneGray(){this.matchBox.gray=!0,Laya.timer.once(1e3,this,this.stopUpdate)}stopUpdate(){ft.close(),Un.endTimer()}onEnable(){L.on(A.EVENT_PVP_INIT_DATA,this,this.onInitData),L.on(A.EVENT_PVP_RESTORE_DATA,this,this.onRestoreData),L.on(A.EVENT_GameScene_Gray,this,this.onGameSceneGray),L.on(A.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown)}onKeyDown(t){t.keyCode===Laya.Keyboard.X&&Fn.getInstance().toggleVisible()}onWindowFocus(){Ue.frameNetQueue.sendRestoreData()}onDisable(){this.stopUpdate(),L.off(A.EVENT_PVP_INIT_DATA,this,this.onInitData),L.off(A.EVENT_PVP_RESTORE_DATA,this,this.onRestoreData),L.off(A.EVENT_GameScene_Gray,this,this.onGameSceneGray),L.off(A.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.off(Laya.Event.KEY_DOWN,this,this.onKeyDown),this.removeEvents(),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),Un.clear(),$e.clearData()}};c_=K([yO("0r0gyiRERf6yXTGaGqWBvg")],c_);jt();Vi();Yi();var u_=class extends Laya.Box{};var{regClass:_O}=Laya,p_=class extends u_{constructor(){super()}set dataSource(t){super.dataSource=t,this.setData(t),this.addEvent()}addEvent(){this.btn_deposit.on(Laya.Event.CLICK,this,this.onDeposit),this.btn_withdraw.on(Laya.Event.CLICK,this,this.onWithdraw)}setData(t){if(t){this.data=t,this.tf_coinNum.text=`${t.balance}`,this.tf_freeze.text=`${t.frozen}`,this.tf_prize.text=`${t.price}`;let r=Number(t.valuation).toFixed(2);r.endsWith("0")&&(r=Number(t.valuation).toFixed(1),r.endsWith("0")&&(r=Number(t.valuation).toFixed(0))),this.tf_valu.text=r,this.img_coin.skin=ge.getCurrencyIcon(t.symbolId),this.img_coin.visible=!0,this.tf_coin.text=t.symbol,t.withdraw?this.btn_withdraw.visible=!0:this.btn_withdraw.visible=!1,t.recharge?this.btn_deposit.visible=!0:this.btn_deposit.visible=!1}else this.visible=!1}onDeposit(){at.intance.openModule(R.DepositDialog,this.data)}onWithdraw(){at.intance.openModule(R.WithdrawDialog,this.data)}};p_=K([_O("oDHEPtPLT9SboHGJIeNVbA")],p_);var h_=class extends Laya.Scene{};Rr();oi();Kt();Ei();ri();var Li=class{static startCircleAnimation(e,t=Laya.stage.width/2,r=Laya.stage.height/2,s=200,o=5e3,l=!0,u=0,p){Laya.Tween.clearTween(e);let h=e.x,f=e.y,g=0,b=l?1:-1,v=0,w=.5,k=2e3,E=0,F=()=>{E+=16;let O=1+Math.sin(E*Math.PI*2/k)*w;g+=360/o*16*O*b;let H=g*Math.PI/180;e.x=t+Math.cos(H)*s,e.y=r+Math.sin(H)*s,Math.abs(g)>=360&&(g=g%360,v++,u>0&&v>=u&&(Laya.timer.clear(e,F),e.x=h,e.y=f,p&&p.run()))};Laya.timer.frameLoop(1,e,F)}static stopCircleAnimation(e){Laya.timer.clearAll(e),Laya.Tween.clearTween(e)}static startCircleAnimationWithSpeedControl(e,t=Laya.stage.width/2,r=Laya.stage.height/2,s=200,o=5e3,l=!0,u=0,p=.5,h=2e3,f){Laya.Tween.clearTween(e);let g=e.x,b=e.y,v=0,w=l?1:-1,k=0,E=0,F=()=>{E+=16;let O=1+Math.sin(E*Math.PI*2/h)*p;v+=360/o*16*O*w;let H=v*Math.PI/180;e.x=t+Math.cos(H)*s,e.y=r+Math.sin(H)*s,Math.abs(v)>=360&&(v=v%360,k++,u>0&&k>=u&&(Laya.timer.clear(e,F),e.x=g,e.y=b,f&&f.run()))};Laya.timer.frameLoop(1,e,F)}static startRotationAnimation(e,t=2e3,r=!0){this.stopRotationAnimation(e);let s="rotation_"+Date.now().toString(),o=r?1:-1,l=360/t*16*o,u=()=>{e.rotation=(e.rotation+l)%360},p="updateRotation_"+s;return e[p]=u,e.rotationAnimationId=s,Laya.timer.frameLoop(1,e,u),s}static stopRotationAnimation(e){if(e.rotationAnimationId){let t="updateRotation_"+e.rotationAnimationId,r=e[t];r?Laya.timer.clear(e,r):Laya.timer.clearAll(e),delete e.rotationAnimationId,r&&delete e[t]}}static startElasticPopupAnimation(e,t=150,r=1.1,s=100,o=.95,l=80,u){Laya.Tween.clearAll(e),e.scale(0,0),e.visible=!0,Laya.Tween.to(e,{scaleX:r,scaleY:r},t,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:o,scaleY:o},s,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},l,Laya.Ease.linearNone,u)}))}))}static stopElasticPopupAnimation(e){Laya.Tween.clearAll(e)}static startLinearShrinkAnimation(e,t=80,r){Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0},t,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{e.visible=!1,r&&r.run()}))}static startJellyScaleAnimation(e,t=1.2,r=120,s=.85,o=90,l=80,u){Laya.Tween.clearAll(e),e.scale(1,1),e.visible=!0,Laya.Tween.to(e,{scaleX:t,scaleY:t},r,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:s,scaleY:s},o,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},l,Laya.Ease.linearNone,u)}))}))}static playSpineAnimation(e,t=!1,r){let s=e.getChildByName("box_sk");return s?(s.play(null,t),r&&(s.once(Laya.Event.COMPLETE,null,()=>{r()}),t&&r()),!0):(console.warn("未找到box_sk Spine组件"),!1)}};Hn();Pr();xt();Ni();var{regClass:xO}=Laya,Do=class extends h_{constructor(){super(...arguments);this.m_currentTabIndex=0;this.assetChangeData=[];this.currentAssetChangePage=1;this.isLoadingAssetChange=!1;this.hasMoreAssetChange=!0;this.assetChangePageSize=20}onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onEnable(){this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.list_Record.visible=!1,this.list_RecordLiquit.visible=!1,this.btn_back_Record.on(Laya.Event.CLICK,this,this.openRecord,[!1]),this.btn_detail.on(Laya.Event.CLICK,this,this.openRecord,[!0]),L.on(A.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),L.on(A.UPDATE_ASSETS,this,this.onUpdateAssets),L.on("msg_"+x.snake.socket.MessageType.MSG_CHARGE_RECORD,this,this.onChargeRecord),L.on("msg_"+x.snake.socket.MessageType.MSG_WITHDRAW_RECORD,this,this.onWithdrawRecord),L.on("msg_"+x.snake.socket.MessageType.MSG_TOKEN_CHANGE_RECORD,this,this.onAssetChangeRecord),this.list_asset.visible=!1,fi.requestCoinInfo(),Li.startJellyScaleAnimation(this.tf_tittle);for(let t=0;t<3;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t,!1]);this.list_RecordLiquit.scrollBar.on(Laya.Event.CHANGE,this,this.onRecordListScroll)}onDisable(){L.off(A.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),L.off(A.UPDATE_ASSETS,this,this.onUpdateAssets),L.off("msg_"+x.snake.socket.MessageType.MSG_CHARGE_RECORD,this,this.onChargeRecord),L.off("msg_"+x.snake.socket.MessageType.MSG_WITHDRAW_RECORD,this,this.onWithdrawRecord),L.off("msg_"+x.snake.socket.MessageType.MSG_TOKEN_CHANGE_RECORD,this,this.onAssetChangeRecord),this.btn_detail.off(Laya.Event.CLICK,this,this.openRecord,[!0]),this.btn_back_Record.off(Laya.Event.CLICK,this,this.openRecord),this.list_RecordLiquit.scrollBar.off(Laya.Event.CHANGE,this,this.onRecordListScroll)}onUpdateAssets(){fi.requestCoinInfo()}onTokenBalanceUpdate(t){this.showAssetData(t)}showAssetData(t){this.list_asset.array=t,this.list_asset.visible=!0;let r=this.calculateTotalValue(t).toFixed(2);r.endsWith("0")&&(r=this.calculateTotalValue(t).toFixed(1),r.endsWith("0")&&(r=this.calculateTotalValue(t).toFixed(0))),this.tf_total.text=`${r} USDT`}calculateTotalValue(t){try{return t.reduce((r,s)=>{let o=s.balance,l=s.price;return isNaN(o)||isNaN(l)?r:r+s.valuation},0)}catch(r){return console.error("计算资产总额时发生错误:",r),0}}setToMainScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}openRecord(t){this.box_record.visible=t,this.box_all.visible=!t,t?this.onTabClick(this.m_currentTabIndex,!0):this.list_Record.visible=!1}onTabClick(t,r=!1){if(this.m_currentTabIndex===t&&!r)return;this.m_currentTabIndex=t;let s=3,o="res/common/comm/img_tab1.png",l="res/common/comm/img_tab2.png",u="#427030",p="#1449cb";for(let h=0;h<s;h++){let f=this[`tab${h}`],g=f.getChildByName("tf_tit"),b=t===h;if(f.skin=b?o:l,g.strokeColor=b?u:p,b)switch(Do.isDepositRecord=t===0,t){case 0:this.list_RecordLiquit.visible=!1,De.send(x.snake.socket.MessageType.MSG_CHARGE_RECORD);break;case 1:this.list_RecordLiquit.visible=!1,De.send(x.snake.socket.MessageType.MSG_WITHDRAW_RECORD);break;case 2:this.list_Record.visible=!1,this.resetAssetChangeList();break}}}onChargeRecord(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_CHARGE_RECORD);r==x.snake.socket.MessageCode.SYS_NORMAL&&(this.list_Record.array=s.resp||[],this.list_Record.visible=!0)}onWithdrawRecord(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_WITHDRAW_RECORD);r==x.snake.socket.MessageCode.SYS_NORMAL&&(this.list_Record.array=s.resp||[],this.list_Record.visible=!0)}resetAssetChangeList(){this.currentAssetChangePage=1,this.isLoadingAssetChange=!1,this.hasMoreAssetChange=!0,this.assetChangeData=[],this.getAssetChangeData()}getAssetChangeData(){this.isLoadingAssetChange=!0;let t=new x.snake.socket.CS_TOKEN_CHANGE_RECORD({pageNo:this.currentAssetChangePage,pageSize:this.assetChangePageSize}),r=x.snake.socket.MessageType.MSG_TOKEN_CHANGE_RECORD;De.send(r,t)}onAssetChangeRecord(t,r){if(this.isLoadingAssetChange=!1,r==x.snake.socket.MessageCode.SYS_NORMAL){let s=Pe.getMsgBody(t,x.snake.socket.SC_TOKEN_CHANGE_RECORD);if(s&&s.records&&s.records.length>0){let o=s.records.map(l=>l);this.assetChangeData=this.assetChangeData.concat(o),this.list_RecordLiquit.array=this.assetChangeData,this.list_RecordLiquit.visible=!0}else this.hasMoreAssetChange=!1,this.currentAssetChangePage===1&&(this.list_RecordLiquit.array=[],this.list_RecordLiquit.visible=!0)}else this.currentAssetChangePage>1&&this.currentAssetChangePage--}onRecordListScroll(){if(this.m_currentTabIndex!==2||this.isLoadingAssetChange||!this.hasMoreAssetChange)return;let t=this.list_RecordLiquit.scrollBar,r=t.value,s=t.max;s>0&&r>=s*.8&&this.loadNextAssetChangePage()}loadNextAssetChangePage(){this.isLoadingAssetChange=!0,this.currentAssetChangePage++,this.getAssetChangeData()}};Do.isDepositRecord=!0,Do=K([xO("vDn8r-QeS5KzEmJcMsoY8w")],Do);At();jt();dn();var d_=class extends Laya.Box{};var{regClass:vO}=Laya,m_=class extends d_{constructor(){super()}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}console.log("data",e);let t=JSON.parse(e),{createTime:r,coinType:s,assetsChange:o,businessType:l}=t,{date:u,time:p}=xi.formatDayAndTime(r);this.tf_time.text=`${u}  ${p}`,this.img_coinType.skin=ge.getMoneyIcon(s),this.tf_amounte.text=`${o}`,this.tf_token.text=`${t.symbol}`,this.tf_operate.text=z.getLanguage(l);let h=this.parent?.parent?.array?.indexOf(e)??0;this.img_bg.visible=h%2===1}};m_=K([vO("lRu3eTzdRxW0heIDaqtjEg")],m_);r0();Xp();xt();Kt();Ei();var f_=class extends Laya.Dialog{};En();dv();ws();Yt();yn();r0();xt();fv();ri();ur();At();ws();Yt();yn();cr();var ek=class i{constructor(){this.assets_contract=null;this.startRecharge=!1}static getInstance(){return i._instance||(i._instance=new i),i._instance}async init(){typeof window.ethereum>"u"||(L.on(A.EVENT_RECHARGE_GET,this,this.rechargeEnd),this.assets_contract=new window.web3.eth.Contract(pr.WITHDRAW_AND_RECHARGE_ABI,pr.WITHDRAW_AND_RECHARGE_ADDRESS))}async depositWallet(e,t){if(ci.showLoading(!0),!await mt.allowanceAddressByTokenAddress(pr.WITHDRAW_AND_RECHARGE_ADDRESS,e)){ci.hideLoading(),et.notice(z.getLanguage(23));return}return t=window.web3.utils.toWei(t+""),await this.assets_contract.methods.recharge(e.toLowerCase(),t).send({from:mt.walletAddress},(s,o)=>{if(s)return ci.hideLoading(),!1}),!0}async rechargeToken(e){try{let{amount:t,token:r,rechargeAddress:s,decimals:o=18,abi:l}=e;if(r!==pr.ADDRESS0&&!await mt.newAllowanceAddress(s,r))return ci.hideLoading(),et.notice(z.getLanguage(23)),!1;let u=pS(t+"",o),p="depositToken",h;!r||r==pr.ADDRESS0?h=await mt.walletClient.writeContract({account:mt.walletAddress,address:s,abi:l,functionName:"depositETH",value:u,args:[100001]}):h=await mt.walletClient.writeContract({account:mt.walletAddress,address:s,abi:l,functionName:p,args:[r,u,100001]}),this.startRecharge=!0,Laya.timer.once(6e4,this,this.clearRecharge);let f,g=!1;if(f=await mt.publicClient.waitForTransactionReceipt({hash:h,pollingInterval:1e3}),f&&f.status=="success"||g){if(!this.startRecharge)return;Laya.timer.clear(this,this.clearRecharge),console.log(`Tx successful with hash: ${h}`);let v=[await mt.walletClient.getChainId(),h];return ci.hideLoading(),h}else{ci.hideLoading(),ye.TransactionErrorTip();return}}catch(t){ci.hideLoading(),console.log(t),t instanceof Error?t.message.includes("does not match the target chain for the transaction")?L.event(A.CHANGE_ASSET_CHAIN):console.log("Error message does not contain the specified character."):console.log("An error occurred, but it is not an instance of Error.")}}async getReward(e,t){}rechargeEnd(){V.rechargeEnd=!1,Laya.timer.clear(this,this.getReward)}clearRecharge(){this.startRecharge=!1,ci.hideLoading(),et.notice(z.getLanguage(45)),this.rechargeEnd()}},OR=ek.getInstance();Ni();At();var{regClass:IO}=Laya,g_=class extends f_{constructor(){super();this.btnLock=!1}onEnable(){L.on("msg_"+x.snake.socket.MessageType.MSG_CHARGE,this,this.onRequestChargeInfo),this.btn_confirm.on(Laya.Event.CLICK,this,this.onbtnConfirm),this.rechargeCode.on(Laya.Event.INPUT,this,this.testRechargeCodeInput)}setOpenData(t){this.tf_adress.text=Qt.shortenString(mt.walletAddress,6,4),this.data=t,this.tf_web.text=t.chainName,this.tf_token.text=t.symbol,console.log("data",t),this.requestChargeInfo()}requestChargeInfo(){let t=x.snake.socket.MessageType.MSG_CHARGE,r=this.data.symbolId,s=x.snake.socket.CS_CHARGE.fromObject({symbolId:r});De.send(t,s)}onRequestChargeInfo(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_CHARGE);r==x.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CHARGE",s),this.rechargeData=s,this.setDepositData(s))}async setDepositData(t){let r=await mt.walletClient.getChainId(),s=Number(t.chainId);try{if(r!==s&&!await mt.switchChain(s)){await mt.addChain(s)&&this.setDepositData(t);return}let o=await mt.getBalance2(this.data.tokenAddress),l=this.data.decimals,u=Qo(o,l);this.tf_rest.text=`${Qt.truncateToTwoDecimalPlaces(Number(u))}`,console.log("tokenBalance",o)}catch(o){console.log("切换失败，请手动切换",o)}}async onbtnConfirm(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(2e3,this,()=>{this.btnLock=!1}),this.testRechargeCodeInput();let t=Number(this.tf_rest.text),r=Number(this.rechargeCode.text),s=await mt.walletClient.getChainId(),o=Number(this.data.chainId);try{if(s!==o&&!await mt.switchChain(o)){await mt.addChain(o)&&this.onbtnConfirm();return}}catch(h){console.log("切换失败，请手动切换",h)}if(!r){Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(53),pt.YES);return}if(t<r){Fr.AlertByType(pt.BASEALERTVIEW,z.getLanguage(54),pt.YES);return}ci.showLoadingByInfo();let l=JSON.parse(this.rechargeData.abi);console.log(l);let u={amount:r,token:this.data.tokenAddress,rechargeAddress:this.rechargeData.depositAddress,decimals:this.data.decimals,abi:l};await OR.rechargeToken(u)&&(this.getRestCoin(this.data.tokenAddress),V.rechargeEnd=!0)}testRechargeCodeInput(){let t=this.rechargeCode.text;if(t){if(!/^[0-9]+\.?[0-9]*$/.test(t)){let s="";for(let o=0;o<t.length;o++){let l=t.charAt(o);(l>="0"&&l<="9"||l==="."&&s.indexOf(".")===-1)&&(s+=l)}this.rechargeCode.text=s}t.length>1&&t.startsWith("0")&&t.charAt(1)!=="."&&(this.rechargeCode.text=t.substring(1))}}async getRestCoin(t){try{let r=await mt.getBalance2(t);if(r){let s=Qo(r,this.data.decimals);this.tf_rest.text=`${Qt.truncateToTwoDecimalPlaces(Number(s))}`}ci.hideLoading()}catch(r){console.error("获取余额失败",r),ci.hideLoading()}}onDisable(){L.off("msg_"+x.snake.socket.MessageType.MSG_CHARGE,this,this.onRequestChargeInfo),this.rechargeCode.off(Laya.Event.INPUT,this,this.testRechargeCodeInput)}};g_=K([IO("O0v8EHpMT0-wWgB8t3D14A")],g_);var b_=class extends Laya.Dialog{};var{regClass:SO}=Laya,y_=class extends b_{constructor(){super()}onEnable(){this.list_champ.visible=!1}onDisable(){}};y_=K([SO("y0xiZs-qSDWRAXN_oE10yg")],y_);jt();dn();var __=class extends Laya.Box{};var{regClass:wO}=Laya,x_=class extends __{constructor(){super()}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}let t=JSON.parse(e),{createTime:r,coinType:s,amount:o}=t,{date:l,time:u}=xi.formatDayAndTime(r);this.tf_time.text=`${l}  ${u}`,this.img_coinType.skin=ge.getMoneyIcon(s),this.tf_amounte.text=`${o}`,this.tf_token.text=`${t.symbol}`,this.tf_operate.text=Do.isDepositRecord?"Deposit":"Withdraw";let p=this.parent?.parent?.array?.indexOf(e)??0;this.img_bg.visible=p%2===1}};x_=K([wO("tbS8gPlOTWuMdXb9g8wZAg")],x_);var v_=class extends Laya.Dialog{};xt();Kt();Ei();oi();En();ri();At();ws();yn();cr();Ni();var{regClass:kO}=Laya,I_=class extends v_{constructor(){super();this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER;this.btnLock=!1;this.withDrawData=null;this.withdrawText=null}onEnable(){L.on("msg_"+x.snake.socket.MessageType.MSG_WITHDRAW,this,this.onRequestWithdraw),L.on("msg_"+x.snake.socket.MessageType.MSG_WITHDRAW_INFO,this,this.onRequestChargeInfo),L.on(A.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),this.btn_withdraw.on(Laya.Event.CLICK,this,this.onBtnWithdraw),this.withdrawText=this.withdrawCode.prompt,this.withdrawCode.on(Laya.Event.INPUT,this,this.testRechargeCodeInput)}setOpenData(t){this.data=t,this.showWithDrawData(t),this.requestChargeInfo(),console.log("data",t)}async showWithDrawData(t){let r=mt.walletAddress;this.tf_address.text=Qt.shortenString(r,6,4),this.tf_token.text=t.symbol,this.tf_web.text=t.chainName,this.tf_appAmount.text=`${t.balance}`}requestChargeInfo(){let t=x.snake.socket.MessageType.MSG_WITHDRAW_INFO,r=this.data.symbolId,s=x.snake.socket.CS_WITHDRAW_INFO.fromObject({symbolId:r});De.send(t,s)}async onBtnWithdraw(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(2e3,this,()=>{this.btnLock=!1}),this.testWithdrawCodeInput();let t=Number(this.withdrawCode.text);if(!t){et.notice(z.getLanguage(63));return}let r=Number(this.tf_appAmount.text);if(t>r){et.notice(z.getLanguage(64));return}if(t>this.withDrawData.maxLimit){et.notice(z.getLanguage(65));return}else if(t<this.withDrawData.minLimit){et.notice(z.getLanguage(66));return}ci.showLoadingByInfo();let s=x.snake.socket.MessageType.MSG_WITHDRAW,o=x.snake.socket.CS_WITHDRAW.fromObject({symbolId:this.data.symbolId,amount:t});De.send(s,o)}onRequestWithdraw(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_WITHDRAW);if(r==x.snake.socket.MessageCode.SYS_NORMAL){et.notice(z.getLanguage(67)),console.log("SC_WITHDRAW MsgBody",s);let o=JSON.parse(s.resp);console.log("resp",o),ci.hideLoading(),L.event(A.UPDATE_ASSETS)}}onRechargewithdrawCodeInput(){let t=Number(this.withdrawCode.text),r=Qt.isNumber(this.withdrawCode.text);(t<0||!r)&&this.withdrawCode.text!==this.withdrawText&&(this.withdrawCode.text="0");let s=Qt.multiplyWithPrecision(this.withDrawData.feeRate/100,t);this.tf_arrive.text=`${Qt.subtractWithPrecision(t,Number(s))}`}testWithdrawCodeInput(){let t=this.withdrawCode.text;if(t&&!/^[0-9]+\.?[0-9]*$/.test(t)){this.withdrawCode.text="",et.notice(z.getLanguage(1802));return}}onRequestChargeInfo(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_WITHDRAW_INFO);if(r==x.snake.socket.MessageCode.SYS_NORMAL){console.log("CS_WITHDRAW_INFO",s);let o=JSON.parse(s.resp);this.withDrawData=o,console.log("resp",o),this.showWithdrawData()}}showWithdrawData(){this.tf_fee.text=`${this.withDrawData.feeRate}%`}onDisable(){L.off("msg_"+x.snake.socket.MessageType.MSG_WITHDRAW,this,this.onRequestWithdraw),L.off("msg_"+x.snake.socket.MessageType.MSG_WITHDRAW_INFO,this,this.onRequestChargeInfo),L.off(A.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),this.withdrawCode.off(Laya.Event.INPUT,this,this.onRechargewithdrawCodeInput),this.btn_withdraw.off(Laya.Event.CLICK,this,this.onBtnWithdraw)}onTokenBalanceUpdate(t){if(!this.data||!t)return;let r=t.find(s=>s.symbolId===this.data.symbolId);r&&(this.data.balance=r.balance,this.tf_appAmount.text=`${r.balance}`)}testRechargeCodeInput(){let t=this.withdrawCode.text;if(t){if(!/^[0-9]+\.?[0-9]*$/.test(t)){let l="";for(let u=0;u<t.length;u++){let p=t.charAt(u);(p>="0"&&p<="9"||p==="."&&l.indexOf(".")===-1)&&(l+=p)}this.withdrawCode.text=l}t.length>1&&t.startsWith("0")&&t.charAt(1)!=="."&&(this.withdrawCode.text=t.substring(1))}let r=Number(this.withdrawCode.text),s=Qt.multiplyWithPrecision(this.withDrawData.feeRate/100,r);this.tf_arrive.text=`${Qt.subtractWithPrecision(r,Number(s))}`}};I_=K([kO("-G96ocIBRFacV4Xozyt5NQ")],I_);Rr();oi();Pr();ri();xt();Mo();Ot();Kt();Ei();var S_=class extends Laya.Scene{};Ni();var{regClass:EO}=Laya,w_=class extends S_{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1;this.shopId=1}onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onOpened(t){t&&t.length>0?(this.type=t[0],t[1]!=null&&(this.selectItemId=t[1]),this.onClickTab(this.type)):(this.selectItemId=1,this.onClickTab(this.selectItemId)),this.initBagInfo()}onEnable(){this.snakeList.visible=!1,this.propList.visible=!1;for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);Li.startJellyScaleAnimation(this.tf_tittle),L.on("msg_"+x.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),L.on(A.EVENT_ITEM_UPDATE,this,this.onPackInfo),L.on(A.EVENT_SNAKE_UPDATE,this,this.onSnakePackInfo),L.on(A.UPDATE_BAG_INFO,this,this.initBagInfo)}setTab(t){for(let r=1;r<3;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}async onClickTab(t){this.currTab!=t&&(this.type=t,this.setTab(t),t==1?(this.box_nft.visible=!0,this.box_prop.visible=!1,this.tf_nft.stroke=5,this.tf_nft.fontSize=32,this.tf_props.stroke=0,this.tf_props.fontSize=25):t==2&&(this.box_prop.visible=!0,this.box_nft.visible=!1,this.tf_nft.stroke=0,this.tf_nft.fontSize=25,this.tf_props.stroke=5,this.tf_props.fontSize=32))}setToMainScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}onTabClick(t){let s="res/shop/img_Button_1.png",o="res/shop/img_btlv.png",l="res/shop/img_bt1_2.png",u="res/shop/img_Button_4.png",p="#009815";for(let f=1;f<3;f++){let g=this[`btn${f}`],b=g.getChildByName("tf_tit"),v=t===f,w=f===0;this.selectItemId=t,g.skin=w?v?s:l:v?o:u,b.stroke=v?5:0,b.strokeColor=p}}onBuySuccess(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_SHOP_BUY);r==x.snake.socket.MessageCode.SYS_NORMAL?s&&s.items&&Laya.Scene.open("dialog/TipsDialog",!1,{content:"购买成功!",autoClose:!0}):Laya.Scene.open("dialog/TipsDialog",!1,{content:"购买失败，请稍后重试",autoClose:!0})}onRecruit(t=1){let r=x.snake.socket.MessageType.MSG_SHOP_BUY;var s=re.m_dicSnakes.get(this.shopId);if(console.log(s),this.shopId){let o=x.snake.socket.CS_SHOP_BUY.fromObject({id:this.shopId});De.send(r,o)}}initBagInfo(){let t=x.snake.socket.MessageType.MSG_PACK_INFO;De.send(t)}onPackInfo(){var t=Ar.getAllKnapsackItems();let r=t.filter(s=>s.id!==10001&&s.num>0);this.propList.array=r,this.propList.visible=!0}onSnakePackInfo(){let t=Ar.getAllSnakeItems();console.log("蛇信息返回处理",t);let r={id:-999,isShopEntry:!0};this.snakeList.array=[...t,r],this.snakeList.visible=!0}onDisable(){for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab);L.off("msg_"+x.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),L.off(A.EVENT_ITEM_UPDATE,this,this.onPackInfo),L.off(A.EVENT_SNAKE_UPDATE,this,this.onSnakePackInfo),L.off(A.UPDATE_BAG_INFO,this,this.initBagInfo)}};w_=K([EO("fGHujQp_QpOG4OhbMXNszQ")],w_);At();jt();Vi();Yi();var k_=class extends Laya.Box{};Kt();Ei();Rr();Pr();Ot();xt();Yt();Ni();cr();var{regClass:LO}=Laya,E_=class extends k_{constructor(){super()}onEnable(){this.btn_upgrade.on(Laya.Event.CLICK,this,this.toUpGradeDialog),this.btn_battle.on(Laya.Event.CLICK,this,this.onBattleClick)}onDisable(){this.btn_upgrade.off(Laya.Event.CLICK,this,this.toUpGradeDialog),this.btn_battle.off(Laya.Event.CLICK,this,this.onBattleClick),this.box_emply.off(Laya.Event.CLICK,this,this.toShopScene),L.off("msg_"+x.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback)}set dataSource(t){if(super.dataSource=t,!t)return;if(t.isShopEntry){this.box_emply.visible=!0,this.box_nft.visible=!1,this.box_emply.hasListener(Laya.Event.CLICK)||this.box_emply.on(Laya.Event.CLICK,this,this.toShopScene);return}this.box_emply.visible=!1,this.box_nft.visible=!0,this.nftItem=t;let r=re.m_dicItems.get(this.nftItem.id);this.tf_name.text=z.getLanguage(r.name),this.img_icon.skin=ge.getSnakeIcon(this.nftItem.skin||101);let s=!this.nftItem.upgrade;this.btn_upgrade.visible=!s;let o=V.playerDto.snakeId==this.nftItem.unkey;this.Img_battleState.visible=o,this.btn_battle.visible=!o,s?this.btn_battle.x=58:(this.btn_battle.x=6,this.btn_upgrade.x=o?58:111)}toUpGradeDialog(){at.intance.openModule(R.SnakeUpgradeDialog,this.nftItem)}onBattleClick(){if(!this.nftItem)return;let t=x.snake.socket.MessageType.MSG_SNAKE_FIGHT;L.off("msg_"+x.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback),L.on("msg_"+x.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback);let r=x.snake.socket.CS_SNAKE_FIGHT.fromObject({unkey:this.nftItem.unkey});De.send(t,r)}onBattleCallback(t,r){if(r==x.snake.socket.MessageCode.SYS_NORMAL){var s=Pe.getMsgBody(t,x.snake.socket.CS_SNAKE_FIGHT);console.log(s),et.notice(z.getLanguage(75)),V.playerDto.snakeId=s.unkey,L.off("msg_"+x.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback);let o=x.snake.socket.MessageType.MSG_PACK_INFO;De.send(o)}}toShopScene(){bt.setCurrentScene(Re.M_SCENE_SHOP)}};E_=K([LO("GyHLyzIaRva11NfPDbiBfw")],E_);At();jt();Ot();var L_=class extends Laya.Box{};var{regClass:TO}=Laya,T_=class extends L_{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toShowBuyDialog)}set dataSource(t){if(super.dataSource=t,this.propItem=t,!this.propItem){this.visible=!1;return}this.visible=!0;let r=re.m_dicItems.get(this.propItem.id);if(!r){this.visible=!1;return}this.updateUI(r)}updateUI(t){this.tf_name.text=z.getLanguage(t.name),this.tf_num.text=`x${this.propItem.num}`,this.img_icon.skin=ge.getItemIcon(t.icon)}toShowBuyDialog(){console.log("点击事件")}};T_=K([TO("TqPcmjhTSVerr9-YhbASXA")],T_);At();oi();Vi();ri();xt();Mo();Yi();Ot();Kt();Ei();var C_=class extends Laya.Dialog{};Ni();mn();jt();var{regClass:CO}=Laya,A_=class extends C_{constructor(){super();this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER}onEnable(){this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:1},200,Laya.Ease.linearIn),this.btn_upgrade.on(Laya.Event.CLICK,this,this.onUpdateClick),L.on("msg_"+x.snake.socket.MessageType.MSG_SNAKE_UPGRADE,this,this.onUpgradeCallback)}setOpenData(t){t&&(this.nftItem=t,this.initProp())}initProp(){let t=[1201,1202,1203,1204,1205],r=!0;for(let s=0;s<t.length;s++){let o=re.m_dicItems.get(t[s]);if(o){let l=this["item_"+s];if(l){let u=l.getChildByName("tf_name"),p=l.getChildByName("img_icon"),h=Ar.getKnapsackItemCount(t[s]);u.text=`${z.getLanguage(o.name)} x${h}`,p.skin=ge.getItemIcon(o.icon),console.log("num",h),h<1&&(r=!1)}}}}onUpdateClick(){this.close();let t=x.snake.socket.MessageType.MSG_SNAKE_UPGRADE,r=x.snake.socket.CS_SNAKE_UPGRADE.fromObject({unkey:this.nftItem.unkey});De.send(t,r)}onUpgradeCallback(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_SNAKE_UPGRADE);if(r==x.snake.socket.MessageCode.SYS_NORMAL){wt.playSoundByName(wt.soundName_snakeUpdate),s&&(L.event(A.UPDATE_BAG_INFO),at.intance.openModule(R.SnakeUpgradeSuccessDialog,s));let o=x.snake.socket.MessageType.MSG_PACK_INFO;De.send(o)}}onDisable(){L.off("msg_"+x.snake.socket.MessageType.MSG_SNAKE_UPGRADE,this,this.onUpgradeCallback)}};A_=K([CO("K6ZKHKhaTvCBmQcFdrneHQ")],A_);At();oi();var M_=class extends Laya.Dialog{};var{regClass:AO}=Laya,R_=class extends M_{constructor(){super();this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER}onEnable(){this.alertTitle.text=z.getLanguage(74),this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:1},200,Laya.Ease.linearIn),this.initProp()}setOpenData(t){if(t){let r=t.snake.attr;for(let s=0;s<r.length;s++)if(r[s]){let o=r[s].split(","),l=o[0],u=o[1];this["upgradeAwarditem_"+l].getChildByName("tf_award").text=u}}}onDisable(){}initProp(){Li.startElasticPopupAnimation(this.img_di,150,1.1,100,.95,80),this.box_snake.source="gameIcon/spine/snakeUpgrade/img_shengj.json",this.box_snake.on(Laya.Event.COMPLETE,this,this.onAnimationComplete),Laya.timer.once(1300,this,this.onAnimationComplete)}onAnimationComplete(){this.box_snake.off(Laya.Event.COMPLETE,this,this.onAnimationComplete),this.box_snake.animationName==="animation1"&&this.box_snake.play("animation2",!0)}};R_=K([AO("OjPqAteAQeOIAjHFO-yihA")],R_);Xp();oi();var B_=class extends Laya.Dialog{};var{regClass:MO}=Laya,D_=class extends B_{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0;this.m_iLayerType=me.M_TOP}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(t){let r=t.target;r.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):(r.name=="cancleBtn"||r.name=="btn_close")&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(t){t&&(this._okHandler=t.okHandler,this._cancelHandler=t.cancelHandler,this.destroyDoCancel=t.destroyDoCancel,t.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):t.flag&pt.YES&&!(t.flag&pt.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="OK"):t.flag&pt.NO&&!(t.flag&pt.YES)?this.okBtn.visible=!1:t.flag&pt.YES&&t.flag&pt.NO,t.data&&this.alertDesc&&(t.data instanceof Array?(this.alertTitle.text=t.data[0],this.alertDesc.text=t.data[1]):this.alertDesc.text=t.data),t.initHandler&&t.initHandler.runWith(this))}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(t){this.canClose&&super.close(t)}};D_=K([MO("8G0DBvD7T_2CVupdfQXrBw")],D_);oi();To();var N_=class extends Laya.Dialog{};At();Yt();Kt();Ei();var{regClass:RO}=Laya,O_=class extends N_{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER;this.headId=0;this.headNew=0}setOpenData(t){t&&t.length>0&&(this.headId=t[0],this.headNew=t[0])}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onChangeClubHead),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.btn_close.on(Laya.Event.CLICK,this,this.close),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(t){if(t!=-1){let r=this.list_head.selectedItem;this.headNew=r}}createHeadList(){let t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16];this.list_head.array=t,this.list_head.visible=!0;let r=-1,s=0;for(let o of t){if(o==this.headId){r=s;break}s++}this.list_head.selectedIndex=r}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=z.getUILang("Upload picture"),s=z.getUILang("Select Image"),o=z.getUILang("Save changes");openUploadPic(this,t,r,s,o)}async openPicEnd(t,r){if(r.length>500){let s=await nr.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);s&&(V.headId=s.imgUrl,console.log(s.imgUrl))}}onChangeClubHead(){if(this.headId===this.headNew){this.close();return}this.sendChangeInfoRequest(this.headNew)}sendChangeInfoRequest(t){let r=x.snake.socket.MessageType.MSG_CLUB_CHANGE_INFO,s=x.snake.socket.CS_CLUB_CHANGE_INFO.fromObject({type:1,value:t.toString()});De.send(r,s),this.close()}onDisable(){this.btn_confirm.off(Laya.Event.CLICK,this,this.onChangeClubHead),this.btn_custom.off(Laya.Event.CLICK,this,this.onBtnChangePic)}};O_=K([RO("HBE3SmMAQpGmkMrOFuAVQQ")],O_);jt();var F_=class extends Laya.Box{};var{regClass:BO}=Laya,P_=class extends F_{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.playerDto=t,this.playerDto&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(t){parseInt(t)>0?this.img_head.skin=ge.getClubIcon(t):this.setImage(t)}async setCurrentOutPut(){if(!this.playerDto)return;let t=this.playerDto.icon;parseInt(t)>0?this.img_head.skin=ge.getClubIcon(t):this.setImage(t)}setImage(t){this.clearImage();var r=this;Laya.loader.load(t,Laya.Handler.create(this,()=>{r.destroyed||(this.img_head.skin=t)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(t=!0){this.clearImage(),super.destroy(t)}toDetail(){!this.playerDto||this.playerDto.needTip}};P_=K([BO("koRLgfbMQ127yxRmmRHybg")],P_);var U_=class extends Laya.Box{};var{regClass:DO}=Laya,H_=class extends U_{set dataSource(t){super.dataSource=t,this.headItem=t,this.headItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let t=this.headItem;this.clubBigIcon.headSkin=t}onChange(t){}};H_=K([DO("uklnPq1ZQmOhfyUyF_6oWQ")],H_);At();jt();Ot();var z_=class extends Laya.Box{};var{regClass:NO}=Laya,j_=class extends z_{set dataSource(t){if(super.dataSource=t,t){console.log("ClubPropListItem",t);let r=re.m_dicItems.get(t.id);this.img_icon.skin=ge.getItemIcon(r.icon),this.tf_data.text=`${z.getLanguage(r.name)}X${t.count}`}}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};j_=K([NO("S77mjsF1RLqmnYyXCTSkVw")],j_);Hn();dn();var G_=class extends Laya.Box{};Vi();Yi();var{regClass:OO}=Laya,W_=class extends G_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.on(Laya.Event.CLICK,this,this.onItemClick)}onDisable(){this.off(Laya.Event.CLICK,this,this.onItemClick)}onItemClick(){if(this.referralData){let t=[this.referralData.id,this.referralData.endTime,this.referralData.symbolId,this.referralData.cost,this.referralData.map,this.referralData.fruit,this.referralData.bgm];at.intance.openModule(R.JoinClubRoomDialog,t)}}set dataSource(t){if(!t)return;let r=t.split(",");super.dataSource=t,this.referralData={id:r[0],endTime:r[1],symbolId:r[2],cost:r[3],map:r[4],fruit:r[5],bgm:r[6],playerNum:r[7]},this.tf_roomId.text=this.referralData.id;let s=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=s%2===1,this.updateEndTimeDisplay();let o=fi.getTokenDataBySyId(Number(this.referralData.symbolId));o?this.tf_tickets.text=`${parseFloat(this.referralData.cost)} ${o.symbol}`:this.tf_tickets.text=`${parseFloat(this.referralData.cost)}`,this.tf_playerNum.text=`${r[7]}/3`}updateEndTimeDisplay(){this.referralData&&this.referralData.endTime&&(this.tf_endTime.text=xi.getRestTime(Math.floor(this.referralData.endTime/1e3)))}};W_=K([OO("euaIDdILQNabNW0qaF17nA")],W_);At();oi();Pr();Rr();cr();var V_=class extends Laya.Scene{};Yt();Yi();Vi();Ei();Kt();Ni();dn();xt();Hn();Ot();var tk=class i{constructor(){this.m_clubData=null;this.m_roomData=[];this.m_memberData=[];this.m_communityData=[];this.m_profitRatio=0}static getInstance(){return i._instance||(i._instance=new i),i._instance}setClubData(e){e&&(this.m_clubData=e,e.rooms&&(this.m_roomData=e.rooms),e.members&&(this.m_memberData=e.members),e.community&&(this.m_communityData=e.community))}getClubData(){return this.m_clubData}getRoomData(){return this.m_roomData}setRoomData(e){e&&(this.m_roomData=e)}getMemberData(){return this.m_memberData}setMemberData(e){e&&(this.m_memberData=e)}getCommunityData(){return this.m_communityData}setCommunityData(e){e&&(this.m_communityData=e)}setProfitRatio(e){this.m_profitRatio=e}getProfitRatio(){return this.m_profitRatio}clearClubData(){this.m_clubData=null,this.m_roomData=[],this.m_memberData=[],this.m_communityData=[],this.m_profitRatio=0}updateClubIcon(e){this.m_clubData&&(this.m_clubData.icon=e)}updateClubName(e){this.m_clubData&&(this.m_clubData.name=e)}},No=tk.getInstance();yi();var{regClass:FO}=Laya,K_=class extends V_{constructor(){super(...arguments);this.countdownTimer=null;this.roomData=[];this.memberData=[];this.profitData=[];this.roomRefreshTimer=null;this.currentProfitPage=1;this.isLoadingProfits=!1;this.hasMoreProfits=!0;this.profitPageSize=20;this.isEnteringRoom=!1;this.currentMemberPage=1;this.isLoadingMembers=!1;this.hasMoreMembers=!0;this.memberPageSize=20;this.memberTotal=0;this.myMemberData=[];this.currentMyMemberPage=1;this.isLoadingMyMembers=!1;this.hasMoreMyMembers=!0;this.myMemberPageSize=20;this.isSearchMode=!1}onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onEnable(){this.clubRoomList.visible=!1,this.memberMyList.visible=!1,this.memberClubList.visible=!1,this.profitList.visible=!1;let t=this.btn_3;t&&(t.getChildByName("tf_tittle").text=z.getLanguage(61));let r=5;for(let o=0;o<r;o++)this["btn_"+o].on(Laya.Event.CLICK,this,this.onTabClick,[o]);this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene);let s=2;for(let o=0;o<s;o++)this["btnMember"+o].on(Laya.Event.CLICK,this,this.onMembersTabClick,[o]);this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_createRoom.on(Laya.Event.CLICK,this,this.onCreateRoom),this.btn_playNow.on(Laya.Event.CLICK,this,this.onGoRoom),L.on("msg_"+x.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),L.on("msg_"+x.snake.socket.MessageType.MSG_CLUB_CHANGE_INFO,this,this.onClubChangeInfoResponse),L.on("msg_"+x.snake.socket.MessageType.MSG_CLUB_ROOM,this,this.onClubRoomResponse),L.on("msg_"+x.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_PROFIT,this,this.onProfitDataResponse),L.on("msg_"+x.snake.socket.MessageType.MSG_CLUB_MEMBER,this,this.onClubMemberResponse),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_MY_PROFIT,this,this.onMyProfitResponse),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_PROFIT_LIST,this,this.onMyMemberListResponse),this.btn_changeName.on(Laya.Event.CLICK,this,this.onBtnChangeNameClick),this.btn_confirm.on(Laya.Event.CLICK,this,this.sendChangeInfoRequest),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeClubHead),this.btn_inviteFriend.on(Laya.Event.CLICK,this,this.onInviteFriend),this.btnSetting.on(Laya.Event.CLICK,this,this.onAddressSearch),this.requestClubInfo(),this.initProfitsList(),fi.getTokenData()?this.startCountdownTimer():this.requestCoinInfo(),this.startRoomRefreshTimer(),this.getMyCommunityProfit(),this.resetMyMemberList(),this.profitList.scrollBar.on(Laya.Event.CHANGE,this,this.onProfitListScroll),this.memberClubList.scrollBar.on(Laya.Event.CHANGE,this,this.onMemberListScroll),this.memberMyList.scrollBar.on(Laya.Event.CHANGE,this,this.onMyMemberListScroll),Li.startJellyScaleAnimation(this.tf_tittle)}setToMainScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}onOpened(t){}removeEvent(){for(let s=0;s<5;s++)this["btn_"+s].off(Laya.Event.CLICK,this,this.onTabClick,[s]);let r=2;for(let s=0;s<r;s++)this["btnMember"+s].off(Laya.Event.CLICK,this,this.onMembersTabClick,[s]);this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_createRoom.off(Laya.Event.CLICK,this,this.onCreateRoom),this.btn_playNow.off(Laya.Event.CLICK,this,this.onGoRoom),this.btn_changeName.off(Laya.Event.CLICK,this,this.onBtnChangeNameClick),this.btn_confirm.off(Laya.Event.CLICK,this,this.sendChangeInfoRequest),this.btnSetting.off(Laya.Event.CLICK,this,this.onAddressSearch),L.off("msg_"+x.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),L.off("msg_"+x.snake.socket.MessageType.MSG_CLUB_CHANGE_INFO,this,this.onClubChangeInfoResponse),L.off("msg_"+x.snake.socket.MessageType.MSG_CLUB_ROOM,this,this.onClubRoomResponse),L.off("msg_"+x.snake.socket.MessageType.MSG_REQUEST_PROFIT,this,this.onProfitDataResponse),L.off("msg_"+x.snake.socket.MessageType.MSG_CLUB_MEMBER,this,this.onClubMemberResponse),L.off("msg_"+x.snake.socket.MessageType.MSG_REQUEST_MY_PROFIT,this,this.onMyProfitResponse),L.off("msg_"+x.snake.socket.MessageType.MSG_REQUEST_PROFIT_LIST,this,this.onMyMemberListResponse),Laya.stage.off("MSG_CLUB_INFO",this,this.onClubInfoResponse),this.clearCountdownTimer(),Laya.timer.clear(this,this.requestClubRooms),this.profitList.scrollBar.off(Laya.Event.CHANGE,this,this.onProfitListScroll),this.memberClubList.scrollBar.off(Laya.Event.CHANGE,this,this.onMemberListScroll),this.memberMyList.scrollBar.off(Laya.Event.CHANGE,this,this.onMyMemberListScroll)}startCountdownTimer(){this.clearCountdownTimer(),this.countdownTimer=Laya.timer.loop(1e3,this,this.updateAllCountdowns)}clearCountdownTimer(){this.countdownTimer&&(Laya.timer.clear(this,this.updateAllCountdowns),this.countdownTimer=null)}updateAllCountdowns(){for(let t=0;t<this.clubRoomList.cells.length;t++){let r=this.clubRoomList.cells[t];r&&r.updateEndTimeDisplay()}}onTabClick(t){for(let s=0;s<5;s++){let l=this[`btn_${s}`].getChildByName("tf_tittle"),u=t===s;l.stroke=u?4:0,this["btn_"+s].getChildByName("selectBox1").visible=u,this["btn_"+s].getChildByName("selectBox2").visible=!u}switch(t){case 0:this.box_room.visible=!0,this.box_member.visible=!1,this.box_myProfits.visible=!1,this.box_profile.visible=!1,this.startCountdownTimer(),this.requestClubRooms();break;case 1:this.box_room.visible=!1,this.box_member.visible=!0,this.box_myProfits.visible=!1,this.box_profile.visible=!1,this.clearCountdownTimer();break;case 2:this.box_room.visible=!1,this.box_member.visible=!1,this.box_myProfits.visible=!0,this.box_profile.visible=!1,this.clearCountdownTimer(),this.resetProfitList();break;case 3:this.box_room.visible=!1,this.box_member.visible=!1,this.box_myProfits.visible=!1,this.box_profile.visible=!0,this.clearCountdownTimer();break;default:break}}onMembersTabClick(t){for(let s=0;s<2;s++){let o=this["btnMember"+s],l=t===s;o.getChildByName("tab1").visible=l,o.getChildByName("tab2").visible=!l;let u=o.getChildByName("tf_tit");u.stroke=l?5:0,u.fontSize=l?26:24,u.color=l?"#ffffff":"#7bc6fb"}switch(t){case 0:this.myCommuityBox.visible=!0,this.clubBox.visible=!1;break;case 1:this.myCommuityBox.visible=!1,this.clubBox.visible=!0,this.resetMemberList();break}}onCopy(){let t=this.tf_clubId.text;doCopy(t),et.notice(z.getLanguage(19))}initMemberList(){}initProfitsList(){this.profitData=[],this.profitList.array=this.profitData,this.profitList.visible=!0,this.resetProfitList()}resetProfitList(){this.currentProfitPage=1,this.isLoadingProfits=!1,this.hasMoreProfits=!0,this.profitData=[],this.getProfitData()}onProfitListScroll(){if(this.isLoadingProfits||!this.hasMoreProfits)return;let t=this.profitList.scrollBar,r=t.value,s=t.max;s>0&&r>=s*.8&&this.loadNextProfitPage()}loadNextProfitPage(){this.isLoadingProfits=!0,this.currentProfitPage++,this.getProfitData()}getProfitData(){this.isLoadingProfits=!0;let t=new x.snake.socket.CS_REQUEST_PROFIT({pageNo:this.currentProfitPage,pageSize:this.profitPageSize}),r=x.snake.socket.MessageType.MSG_REQUEST_PROFIT;De.send(r,t)}onProfitDataResponse(t,r){if(this.isLoadingProfits=!1,r==x.snake.socket.MessageCode.SYS_NORMAL){let s=Pe.getMsgBody(t,x.snake.socket.SC_REQUEST_PROFIT);if(this.tf_totalIncome.text=`${s.profitTotal} USDT`,this.tf_totalIncomeToday.text=`${s.profitToday} USDT`,this.tf_battles.text=`${s.total}`,s&&s.profits&&s.profits.length>0){let o=this.profitData.length,l=s.profits.map((u,p)=>u+","+(o+p));this.profitData=this.profitData.concat(l),this.profitList.array=this.profitData}else this.hasMoreProfits=!1}else this.currentProfitPage>1&&this.currentProfitPage--}initProfile(){this.tf_createerName.text=V.playerDto.name}onCreateRoom(){at.intance.openModule(R.CreateClubRoomDialog)}onDisable(){this.removeEvent(),this.clearRoomRefreshTimer(),this.clearCountdownTimer(),No.clearClubData(),Laya.timer.clear(this,()=>{this.isEnteringRoom=!1})}requestClubInfo(){let t=new x.snake.socket.CS_CLUB_INFO,r="1_00",s=V.nodeId,o=re.getNodeByType(s);o&&ie.vType!==0&&(r=o.point),t.point=r;let l=x.snake.socket.MessageType.MSG_CLUB_INFO;De.send(l,t)}onClubInfoResponse(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_CLUB_INFO);if(r==x.snake.socket.MessageCode.SYS_NORMAL){this.clubData=s,this.roomData=s.rooms,this.community=s.community;let o=s.myRate;No.setClubData(s),this.updateClubInfo(s),this.resetMemberList(),V.clubCreater=s.createrId,s.createrId==V.playerDto.pid?(this.btn_createRoom.visible=!0,this.btn_changeHead.visible=!0,this.btn_playNow.y=225,this.btn_inviteFriend.y=335,this.btn_changeName.visible=!0):(this.btn_createRoom.visible=!1,this.btn_changeHead.visible=!1,this.btn_playNow.y=114,this.btn_inviteFriend.y=224,this.btn_changeName.visible=!1),this.btn_playNow.visible=!0,this.btn_inviteFriend.visible=!0}}updateClubInfo(t){let r=re.getClubById(t.type);V.clubType=t.type,this.tf_clubId.text=`${t.clubId}`,r&&(this.tf_clubType.text=z.getLanguage(r.name)),this.tf_createerName.text=`${t.creater}`,this.tf_createName.text=`${xi.getYearMonthDat(t.createTime,"/")}`,this.tf_clubName.text=`${t.name}`,this.clubIcon.headSkin=t.icon}onChangeClubHead(){at.intance.openModule(R.ChangeClubHeadDialog,[parseInt(this.clubData.icon)])}onInviteFriend(){let t=V.playerDto.code,r=getVAddress(),s=V.m_strLanguage,o=z.getLanTypeById(s),l=`${r}?referral=${t}&lang=${o}`;doCopy(l),et.notice(z.getLanguage(19))}onClubChangeInfoResponse(t,r){var s=Pe.getMsgBody(t,x.snake.socket.CS_CLUB_CHANGE_INFO);r==x.snake.socket.MessageCode.SYS_NORMAL&&(s.type==1?this.clubData&&(this.clubIcon.headSkin=s.value,No.updateClubIcon(s.value)):s.type==2&&this.clubData&&(this.tf_clubName.text=s.value,this.nameBox.visible=!0,this.changeNameBox.visible=!1,No.updateClubName(s.value)))}startRoomRefreshTimer(){this.clearRoomRefreshTimer(),this.roomRefreshTimer=Laya.timer.loop(1e4,this,this.requestClubRooms),this.requestClubRooms()}clearRoomRefreshTimer(){this.roomRefreshTimer&&(Laya.timer.clear(this,this.requestClubRooms),this.roomRefreshTimer=null)}requestClubRooms(){let t=x.snake.socket.MessageType.MSG_CLUB_ROOM;De.send(t)}onClubRoomResponse(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_CLUB_ROOM);r==x.snake.socket.MessageCode.SYS_NORMAL&&(this.roomData=s.rooms,No.setRoomData(s.rooms),this.clubRoomList.array=this.roomData,this.tf_roomCount.text=`${this.roomData.length}`,this.clubRoomList.visible=!0,this.tf_battleCount.text=`${s.dailyFight}`,this.tf_battles.text=`${s.totalFight}`)}onRequestInfo(t,r){r==x.snake.socket.MessageCode.SYS_NORMAL&&this.startCountdownTimer()}requestCoinInfo(){let t=x.snake.socket.MessageType.MSG_QUERY_TOKEN;De.send(t)}onGoRoom(){if(this.isEnteringRoom)return;if(!this.roomData||this.roomData.length===0){et.notice(z.getLanguage(57));return}let t=fi.getTokenData();if(!t||t.length===0){et.notice(z.getLanguage(57));return}let r=this.roomData.filter(u=>{let p=u.split(","),h=parseInt(p[2]),f=parseFloat(p[3]),g=t.find(b=>b.symbolId===h);return g&&g.balance>=f});if(r.length===0){et.notice(z.getLanguage(68));return}this.isEnteringRoom=!0;let s=Math.floor(Math.random()*r.length),l=r[s].split(",");at.intance.openModule(R.JoinClubRoomDialog,l),Laya.timer.once(3e3,this,()=>{this.isEnteringRoom=!1})}onBtnChangeNameClick(){this.nameBox.visible=!1,this.changeNameBox.visible=!0,this.input_name.text=this.tf_clubName.text}sendChangeInfoRequest(){let t=x.snake.socket.MessageType.MSG_CLUB_CHANGE_INFO,r=x.snake.socket.CS_CLUB_CHANGE_INFO.fromObject({type:2,value:this.input_name.text});De.send(t,r)}resetMemberList(){this.currentMemberPage=1,this.isLoadingMembers=!1,this.hasMoreMembers=!0,this.memberData=[],this.requestClubMembers()}onMemberListScroll(){if(this.isLoadingMembers||!this.hasMoreMembers)return;let t=this.memberClubList.scrollBar,r=t.value,s=t.max;s>0&&r>=s*.8&&this.loadNextMemberPage()}loadNextMemberPage(){this.isLoadingMembers=!0,this.currentMemberPage++,this.requestClubMembers()}requestClubMembers(){if(!this.clubData||!this.clubData.clubId)return;this.isLoadingMembers=!0;let t=new x.snake.socket.CS_CLUB_MEMBER({pageNo:this.currentMemberPage,pageSize:this.memberPageSize,clubIb:this.clubData.clubId}),r=x.snake.socket.MessageType.MSG_CLUB_MEMBER;De.send(r,t)}getMyCommunityProfit(){let t=x.snake.socket.MessageType.MSG_REQUEST_MY_PROFIT;De.send(t)}onClubMemberResponse(t,r){if(this.isLoadingMembers=!1,r==x.snake.socket.MessageCode.SYS_NORMAL){let s=Pe.getMsgBody(t,x.snake.socket.SC_CLUB_MEMBER);if(s.total!==void 0&&(this.memberTotal=s.total,this.tf_memberNum.text=`${this.memberTotal}`),s&&s.members&&s.members.length>0){let o=this.memberData.length,l=s.members.map((u,p)=>u+","+(o+p));this.memberData=this.memberData.concat(l),this.memberClubList.array=this.memberData,this.memberClubList.visible=!0}else this.hasMoreMembers=!1}else this.currentMemberPage>1&&this.currentMemberPage--}onMyProfitResponse(t,r){if(r==x.snake.socket.MessageCode.SYS_NORMAL){let s=Pe.getMsgBody(t,x.snake.socket.SC_MY_PROFIT);if(No.setProfitRatio(s.profitRatio),this.tf_Commission){let l=(s.profitRatio*100).toFixed(2);l.endsWith("0")&&(l=l.slice(0,-1),l.endsWith(".0")&&(l=l.slice(0,-2))),this.tf_Commission.text=l+"%"}this.tf_numberOfFriend&&(this.tf_numberOfFriend.text=s.inviteCount.toString())}}resetMyMemberList(){this.currentMyMemberPage=1,this.isLoadingMyMembers=!1,this.hasMoreMyMembers=!0,this.myMemberData=[],this.isSearchMode=!1,this.getMemberMyList()}onMyMemberListScroll(){if(this.isLoadingMyMembers||!this.hasMoreMyMembers)return;let t=this.memberMyList.scrollBar,r=t.value,s=t.max;s>0&&r>=s*.8&&this.loadNextMyMemberPage()}loadNextMyMemberPage(){this.isSearchMode=!1,this.isLoadingMyMembers=!0,this.currentMyMemberPage++,this.getMemberMyList()}getMemberMyList(){this.isLoadingMyMembers=!0;let t=new x.snake.socket.CS_REQUEST_PROFIT_LIST({pageNo:this.currentMyMemberPage,pageSize:this.myMemberPageSize}),r=x.snake.socket.MessageType.MSG_REQUEST_PROFIT_LIST;De.send(r,t)}onMyMemberListResponse(t,r){if(this.isLoadingMyMembers=!1,r==x.snake.socket.MessageCode.SYS_NORMAL){let s=Pe.getMsgBody(t,x.snake.socket.SC_REQUEST_PROFIT_LIST);if(s&&s.community&&s.community.length>0){this.currentMyMemberPage===1&&this.isSearchMode&&(this.myMemberData=[]);let o=this.myMemberData.length,l=s.community.map((u,p)=>u+","+(o+p));this.myMemberData=this.myMemberData.concat(l),this.memberMyList.array=this.myMemberData,this.memberMyList.visible=!0,this.currentMyMemberPage===1&&this.isSearchMode&&(this.isSearchMode=!1)}else this.hasMoreMyMembers=!1,this.isSearchMode&&(this.myMemberData=[],this.memberMyList.array=this.myMemberData,this.isSearchMode=!1)}else this.currentMyMemberPage>1&&this.currentMyMemberPage--,this.isSearchMode&&(this.isSearchMode=!1)}onAddressSearch(){let t=this.input_address.text;this.currentMyMemberPage=1,this.isLoadingMyMembers=!1,this.hasMoreMyMembers=!0,this.myMemberData=[],this.isSearchMode=!0,this.searchMemberByAddress(t)}searchMemberByAddress(t){this.isLoadingMyMembers=!0;let r;t===""?r=new x.snake.socket.CS_REQUEST_PROFIT_LIST({pageNo:this.currentMyMemberPage,pageSize:this.myMemberPageSize}):r=new x.snake.socket.CS_REQUEST_PROFIT_LIST({pageNo:this.currentMyMemberPage,pageSize:this.myMemberPageSize,childAddress:t});let s=x.snake.socket.MessageType.MSG_REQUEST_PROFIT_LIST;De.send(s,r)}};K_=K([FO("ONHYlGbrToqo_uNbZuaf3A")],K_);At();var $_=class extends Laya.Box{};var{regClass:PO}=Laya,q_=class extends $_{set dataSource(t){super.dataSource=t,t&&(this.tf_data.text=z.getLanguage(t.name))}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};q_=K([PO("lH_RWSpjQtuPd9t0m34t5A")],q_);Rr();At();oi();Pr();xt();Yt();Ot();Ei();Kt();Ni();cr();var Y_=class extends Laya.Dialog{};var{regClass:UO}=Laya,Q_=class extends Y_{constructor(){super();this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER;this.clubType=1;this.isCreating=!1}onEnable(){this.btn_create.on(Laya.Event.CLICK,this,this.onCreate),L.on("msg_"+x.snake.socket.MessageType.MSG_CREATE_CLUB,this,this.onCreateSuccess),this.list_clubType.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_clubType.selectHandler=new Laya.Handler(this,this.handleSelectToken),this.ClubBox.on(Laya.Event.CLICK,this,this.showSelecePanel),this.btn_hideBox.on(Laya.Event.CLICK,this,this.onCloseTab),this.initCreateClubData()}initCreateClubData(){let t=re.m_dicClub.values;this.list_clubType.array=t,this.list_clubType.selectedIndex=0}onCreate(){if(this.isCreating)return;this.isCreating=!0;let t=x.snake.socket.MessageType.MSG_CREATE_CLUB,r=x.snake.socket.CS_CREATE_CLUB.fromObject({name:"CLUB",icon:"1",type:this.clubType});De.send(t,r),Laya.timer.once(3e3,this,()=>{this.isCreating=!1})}onCreateSuccess(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_CREATE_CLUB);r==x.snake.socket.MessageCode.SYS_NORMAL?(et.notice(z.getLanguage(79)),console.log("SC_WITHDRAW MsgBody",s),V.playerDto.club=`${s.clubId}`,bt.setCurrentScene(Re.M_SCENE_CLUB,s),this.close()):r==x.snake.socket.MessageCode.NOT_ENOUGH_TOKEN?et.notice(z.getLanguage(72)):et.notice(z.getLanguage(80))}onTokenItemRender(t,r){t&&t.onChange&&t.onChange(this.list_clubType.selectedIndex==r)}handleSelectToken(t){if(t!=-1){let r=this.list_clubType.selectedItem;this.tf_clubType.text=z.getLanguage(r.name),this.tf_maxMember.text=`${r.maxMember}`,this.tf_MaxRoom.text=`${r.maxRoom}`,this.tf_referrCommission.text=`${r.ownerCommission}`,this.tf_referralCommission.text=`${r.referalCommission}`,this.tf_points.text=`${r.fightReward}`,this.tf_dayCard.text=`${r.dailyRoom}`,this.tf_weekCard.text=`${r.weeklyRoom}`,this.tf_price.text=`${r.price} USDT`,this.clubType=r.id}this.img_club_pad.visible=!1,this.btn_hideBox.visible=!1}showSelecePanel(){this.img_club_pad.visible=!0,this.btn_hideBox.visible=!0}onCloseTab(){this.img_club_pad.visible&&(this.btn_hideBox.visible=!1,this.img_club_pad.visible=!1)}onDisable(){this.btn_create.off(Laya.Event.CLICK,this,this.onCreate),L.off("msg_"+x.snake.socket.MessageType.MSG_CREATE_CLUB,this,this.onCreateSuccess),this.ClubBox.off(Laya.Event.CLICK,this,this.showSelecePanel),this.btn_hideBox.off(Laya.Event.CLICK,this,this.onCloseTab),Laya.timer.clear(this,()=>{this.isCreating=!1})}};Q_=K([UO("7vh7JPfDTn2jn2qa3Tzn4A")],Q_);Rr();At();jt();oi();Pr();ri();xt();yi();Yt();Mo();Ot();Hn();Ei();Kt();En();Ni();cr();var X_=class extends Laya.Dialog{};var{regClass:HO}=Laya,J_=class extends X_{constructor(){super();this.roomMoney=0;this.isCreating=!1;this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER}onEnable(){this.btn_create.on(Laya.Event.CLICK,this,this.onCreate),this.btn_shop.on(Laya.Event.CLICK,this,this.onGoShop),this.CardBox.on(Laya.Event.CLICK,this,this.showSelecePanel),this.TokenBox.on(Laya.Event.CLICK,this,this.showTokenPanel),this.btn_hideBox.on(Laya.Event.CLICK,this,this.onCloseTab),this.btn_tip.on(Laya.Event.CLICK,this,this.onShowTip),this.ticketInput.on(Laya.Event.INPUT,this,this.testTicketMoneyInput),L.on(`msg_${x.snake.socket.MessageType.MSG_QUERY_TOKEN}`,this,this.onRequestInfo),L.on(A.EVENT_ITEM_UPDATE,this,this.onPackInfo),L.on("msg_"+x.snake.socket.MessageType.MSG_CREATE_CUSTOM_ROOM,this,this.onCreateRoomResponse),this.list_item.renderHandler=Laya.Handler.create(this,this.onTimeItemRender,null,!1),this.list_item.selectHandler=new Laya.Handler(this,this.handleSelectTime),this.list_token.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_token.selectHandler=new Laya.Handler(this,this.handleSelectToken),this.initBagInfo(),this.img_tel.visible=!1,this.btn_hideBox.visible=!1,fi.getTokenData()?this.showTokenArray(fi.getTokenData()):this.requestCoinInfo()}onTimeItemRender(t,r){t&&t.onChange&&(t.onChange(this.list_item.selectedIndex==r),this.img_card_pad.visible=!1,this.btn_hideBox.visible=!1)}handleSelectTime(t){if(t!=-1){let r=this.list_item.selectedItem,s=re.m_dicItems.get(r.id);switch(this.img_card.skin=ge.getItemIcon(s.icon),this.tf_cardName.text=`${z.getLanguage(s.name)} X${r.count}`,s.id){case 1101:this.tf_maxTime.text="1 Hour";break;case 1102:this.tf_maxTime.text="1 Day";break;case 1103:this.tf_maxTime.text="1 Week";break;default:this.tf_cardName.text=`${z.getLanguage(s.name)} X${r.count}`}console.log(r)}}onCreate(){if(this.isCreating)return;if(this.roomMoney<=0){et.notice(z.getLanguage(58));return}this.isCreating=!0;let t=this.list_item.selectedItem.id,r="1_00",s=V.nodeId,o=re.getNodeByType(s);o&&ie.vType!==0&&(r=o.point);let l=new x.snake.socket.CS_CREATE_CUSTOM_ROOM({type:2,ticketId:this.list_token.selectedItem,ticketValue:this.roomMoney,map:"default",fruit:"apple",bgm:"bgm1",point:r,itemId:t}),u=x.snake.socket.MessageType.MSG_CREATE_CUSTOM_ROOM;De.send(u,l),Laya.timer.once(3e3,this,()=>{this.isCreating=!1})}onGoShop(){this.close(),bt.setCurrentScene(Re.M_SCENE_SHOP,[2])}initBagInfo(){let t=x.snake.socket.MessageType.MSG_PACK_INFO;De.send(t)}onPackInfo(){let t=[1101,1102,1103],r=[],s=!1;t.forEach(l=>{r.push({id:l,count:0})}),Ar.getAllKnapsackItems().forEach(l=>{let u=t.indexOf(l.id);u!==-1&&(r[u].count=l.num||0)});let o=r.filter(l=>l.count>0);s=o.length>0,s?(this.btn_create.disabled=!1,this.tf_itemNo.visible=!1,this.btn_shop.visible=!1,this.CardBox.visible=!0):(this.btn_create.disabled=!0,this.tf_itemNo.visible=!0,this.btn_shop.visible=!0,this.CardBox.visible=!1),this.list_item.array=o,this.showDefaultCard(o)}onCreateRoomResponse(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_CREATE_CUSTOM_ROOM);if(r===x.snake.socket.MessageCode.SYS_NORMAL){et.notice(z.getLanguage(56));let o=x.snake.socket.MessageType.MSG_CLUB_ROOM;De.send(o),this.close()}else r===x.snake.socket.MessageCode.CREATE_ROOM_MAX&&et.notice(z.getLanguage(59))}onDisable(){this.btn_create.off(Laya.Event.CLICK,this,this.onCreate),this.btn_shop.off(Laya.Event.CLICK,this,this.onGoShop),this.btn_hideBox.off(Laya.Event.CLICK,this,this.onCloseTab),this.btn_tip.off(Laya.Event.CLICK,this,this.onShowTip),L.off(A.EVENT_ITEM_UPDATE,this,this.onPackInfo),L.off("msg_"+x.snake.socket.MessageType.MSG_CREATE_CUSTOM_ROOM,this,this.onCreateRoomResponse),Laya.timer.clear(this,()=>{this.isCreating=!1})}onCloseTab(){this.img_card_pad.visible&&(this.btn_hideBox.visible=!1,this.img_card_pad.visible=!1),this.img_tel.visible&&(this.btn_hideBox.visible=!1,this.img_tel.visible=!1),this.img_token_pad.visible&&(this.btn_hideBox.visible=!1,this.img_token_pad.visible=!1)}showSelecePanel(){this.img_card_pad.visible=!0,this.btn_hideBox.visible=!0}showTokenPanel(){this.img_token_pad.visible=!0,this.btn_hideBox.visible=!0}showDefaultCard(t){let r=t.findIndex(s=>s.count>0);r!==-1&&(this.list_item.selectedIndex=r,this.handleSelectTime(r))}onShowTip(){this.img_tel.visible=!0,this.btn_hideBox.visible=!0}requestCoinInfo(){let t=x.snake.socket.MessageType.MSG_QUERY_TOKEN;De.send(t)}onRequestInfo(t,r){let s=Pe.getMsgBody(t,x.snake.socket.SC_QUERY_TOKEN);if(r==x.snake.socket.MessageCode.SYS_NORMAL){let o=Qt.parseTokenData(s.token);this.showTokenArray(o)}}showTokenArray(t){let r=[];t.forEach(s=>{r.push(s.symbolId)}),this.list_token.array=r,this.list_token.selectedIndex=0}onTokenItemRender(t,r){t&&t.onChange&&t.onChange(this.list_token.selectedIndex==r)}handleSelectToken(t){if(t!=-1){let r=fi.getTokenData()[t];r&&(this.tf_tokenName.text=r.symbol)}this.img_token_pad.visible=!1,this.btn_hideBox.visible=!1}testTicketMoneyInput(){let t=this.ticketInput.text;if(t){if(!/^[0-9]+\.?[0-9]*$/.test(t)){let s="";for(let o=0;o<t.length;o++){let l=t.charAt(o);(l>="0"&&l<="9"||l==="."&&s.indexOf(".")===-1)&&(s+=l)}this.ticketInput.text=s}t.length>1&&t.startsWith("0")&&t.charAt(1)!=="."&&(this.ticketInput.text=t.substring(1)),this.roomMoney=Number(this.ticketInput.text)}}};J_=K([HO("Trnh8WLVQT-6W4h3KUeNgA")],J_);oi();var Z_=class extends Laya.Dialog{};Ei();Kt();jt();Hn();Rr();Pr();Aw();to();Nn();Al();jr();_r();xr();var e1=class{constructor(){this.connectAddr="ws://175.27.154.72:10001";this.groupApplyList=[];this.groupData=[];this.watch=[]}};xt();Ei();Kt();Ni();cr();Vi();Yi();Yt();Ot();yi();At();var ik=class i{static getInstance(){return i._instance==null&&(i._instance=new i),i._instance}constructor(){this.init()}init(){L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,this,this.onRequestRoomAddr)}onRequestRoomAddr(e,t){var r=Pe.getMsgBody(e,x.snake.socket.SC_REQUEST_ROOM_ADDR);if(t==x.snake.socket.MessageCode.SYS_NORMAL){var s=r.addr;if(console.log("onRequestRoomAddr: "+s),s){var o=s.lastIndexOf("#");o!=-1&&(s=s.slice(0,o))}var l=new e1;l.connectAddr=s,$e.roomDto=l,at.intance.closeAll(),bt.isCloseAll=!1,at.intance.openModule(R.MatchReadyView),bt.setCurrentScene(Re.M_SCENE_SNAKE_MATCH)}else t==x.snake.socket.MessageCode.NOT_ENOUGH_TOKEN&&et.notice(z.getLanguage(72))}goPvpArenaScene(e,t,r){this.closePvpMatchScene(),Ke.matchType=Ke.MATCH_TYPE_PVP,Ke.arenaType=Ke.ARENA_TYPE_PVP;var s=x.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR;let o="1_00",l=V.nodeId,u=re.getNodeByType(l);u&&ie.vType!==0&&(o=u.point);var p=x.snake.socket.CS_REQUEST_ROOM_ADDR.fromObject({type:1,ticketId:t,ticketValue:r,roomType:e,point:o});De.send(s,p)}goCLubArenaScene(e,t,r,s){this.closePvpMatchScene(),Ke.matchType=Ke.MATCH_TYPE_PVP,Ke.arenaType=Ke.ARENA_TYPE_JULEBU;var o=x.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR;let l="1_00",u=V.nodeId,p=re.getNodeByType(u);p&&ie.vType!==0&&(l=p.point);var h=x.snake.socket.CS_REQUEST_ROOM_ADDR.fromObject({ticketId:t,ticketValue:r,roomType:e,point:"1_00",roomNo:s});De.send(o,h)}async goAiArenaScene(){this.closePveMatchScene(),at.intance.closeAll(),bt.isCloseAll=!1,at.intance.openModule(R.MatchReadyView),Ke.matchType=Ke.MATCH_TYPE_PVE,Ke.arenaType=Ke.ARENA_TYPE_PVE;var e=new kd;e.members=await xe.getInstance().spawnSnakes();var t=xe.getInstance().spawnRandomPlayerObject("",!0,!0);e.members.push(t),e.myPlayerObject=t,e.item=vi.spawnFoods(),e.matchType=Ke.MATCH_TYPE_PVE,e.remainderCd=ae.snake.battleCd,$e.matchDto=e,Pn.sendAiEnter(),bt.setCurrentScene(Re.M_SCENE_AI_ARENA)}closePvpMatchScene(){bt.currSceneName==Re.M_SCENE_SNAKE_MATCH&&(bt.m_sceneCurrent.close(),bt.m_sceneCurrent=null)}closePveMatchScene(){bt.currSceneName==Re.M_SCENE_AI_ARENA&&(bt.m_sceneCurrent.close(),bt.m_sceneCurrent=null)}},Ma=ik.getInstance();var{regClass:zO}=Laya,t1=class extends Z_{constructor(){super();this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER}onEnable(){this.initEvents(),this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:.7},200,Laya.Ease.linearIn)}onDisable(){this.removeEvents()}initEvents(){this.btn_font.on(Laya.Event.CLICK,this,this.onEnterMatch),this.backLayer.on(Laya.Event.CLICK,this,this.closeDialog)}removeEvents(){this.btn_font.off(Laya.Event.CLICK,this,this.onEnterMatch),this.backLayer.off(Laya.Event.CLICK,this,this.closeDialog)}onEnterMatch(){if(!this.roomInfo)return;let t=parseInt(this.roomInfo[2]),r=parseFloat(this.roomInfo[3]),s=this.roomInfo[0];Ma.goCLubArenaScene(7,t,r,s)}requestCoinInfo(){let t=x.snake.socket.MessageType.MSG_QUERY_TOKEN;De.send(t)}setOpenData(t){if(t){console.log(t),this.roomInfo=t;let r=parseInt(t[2]),s=parseFloat(t[3]);this.img_coin.skin=ge.getCurrencyIcon(r),this.tf_number.text=String(s);let o=fi.getTokenData().find(l=>l.symbolId==r);fi.getTokenData()&&o&&(this.tf_coin.text=o.symbol)}}closeDialog(){this.close()}};t1=K([zO("ONfjH328RXe-7G3_K7WK1Q")],t1);jt();var i1=class extends Laya.Box{};var{regClass:jO}=Laya,r1=class extends i1{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}onDisable(){}set dataSource(t){if(!t)return;super.dataSource=t,this.referralData=t,console.log("MemberClubListItem",t);let r=t.split(",");this.tf_name.text=r[3],this.PlayerIcon.headSkin=r[2],this.tf_memberLevel.text=r[4],this.tf_match.text=r[5],this.img_flag.skin=ge.getCountryIcon(r[1]);let s=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=s%2===1}};r1=K([jO("3U7la1usRgKQbfApkNfiHQ")],r1);jt();Vi();Yi();var n1=class extends Laya.Box{};xt();ri();En();var{regClass:GO}=Laya,s1=class extends n1{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btnSetting.on(Laya.Event.CLICK,this,this.onOpenSettingDialog),L.on(A.EVENT_CHANGE_CLUB_RATE,this,this.onUpdateRate)}onDisable(){L.off(A.EVENT_CHANGE_CLUB_RATE,this,this.onUpdateRate)}set dataSource(t){if(!t)return;super.dataSource=t;let r=t.split(",");this.referralData=r,console.log("MemberMyListItem",t),this.img_flag.skin=ge.getCountryIcon(r[1]),this.tf_name.text=r[3],this.PlayerIcon.headSkin=r[2],this.tf_memberLevel.text=r[4],this.tf_referrals.text=r[5];let s=Qt.multiplyWithPrecision(r[6],100);this.tf_rate.text=`${s}%`;let o=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=o%2===1}onOpenSettingDialog(){at.intance.openModule(R.SettingRateDialog,this.referralData)}onUpdateRate(t){if(t&&this.referralData&&t.roleId===this.referralData[0]){this.referralData[6]=t.rateValue;let r=t.rateValue*100,s=Math.round(r*1e3)/1e3,o=parseFloat(s.toFixed(3)).toString();this.tf_rate.text=`${o}%`}}};s1=K([GO("_-8v_mmLR1CuN--HtoX-Uw")],s1);jt();Hn();var o1=class extends Laya.Box{};var{regClass:WO}=Laya,a1=class extends o1{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}onDisable(){}set dataSource(e){if(!e)return;let t=e.split(",");super.dataSource=e,this.img_flag.skin=ge.getCountryIcon(t[1]),this.tf_name.text=`${t[3]}`,this.PlayerIcon.headSkin=t[2];let r=parseInt(t[4]);if(fi.getTokenData()){let v=fi.getTokenData().find(w=>w.symbolId==r);this.tf_income.text=`${t[5]} ${v.symbol}`}this.tf_rate.text=`${t[6]}`;let s=t.length>7?parseInt(t[7]):0;this.img_bg.visible=s%2===1;let o=t[0],l=parseInt(o),u=new Date(String(l).length>10?l:l*1e3),p=String(u.getMonth()+1).padStart(2,"0"),h=String(u.getDate()).padStart(2,"0"),f=String(u.getHours()).padStart(2,"0"),g=String(u.getMinutes()).padStart(2,"0"),b=String(u.getSeconds()).padStart(2,"0");this.tf_time.text=`${p}/${h} ${f}:${g}:${b}`}};a1=K([WO("gevXZPT3TWCi4DUrM__uOg")],a1);oi();var l1=class extends Laya.Dialog{};xt();ri();Ni();Ei();Kt();En();At();var{regClass:VO}=Laya,c1=class extends l1{constructor(){super();this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER;this.addL=1;this.maxValue=5;this.minValue=15}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_ok.on(Laya.Event.CLICK,this,this.onComfirm),this.btn_close.on(Laya.Event.CLICK,this,this.close),L.on("msg_"+x.snake.socket.MessageType.MSG_SET_COMMISSION,this,this.onSetCommissionResponse)}setOpenData(t){if(this.data=t,!t)return;let r=t[6];this.PlayerIcon.headSkin=t[2];let s=No.getProfitRatio();this.maxValue=parseFloat((s*100).toFixed(3)),this.addL=parseFloat(Qt.multiplyWithPrecision(parseFloat(r),100)),this.minValue=this.addL;let o=this.addL%1===0?this.addL.toFixed(0):this.addL.toFixed(1);this.tf_rateNum.text=`${o} %`,console.log("data",t);let l=t[3];this.tf_msg.text=z.getLanguage(77,l,o),this.tf_tip1.text=z.getLanguage(76,o,this.maxValue),this.tf_tip2.text=z.getLanguage(78)}onComfirm(){let t=x.snake.socket.MessageType.MSG_SET_COMMISSION,r=Number(Qt.divideWithPrecision(this.addL,100)),s=x.snake.socket.CS_SET_COMMISION.fromObject({roleId:this.data[0],rate:r});De.send(t,s)}onSetCommissionResponse(t,r){L.off("msg_"+x.snake.socket.MessageType.MSG_SET_COMMISSION,this,this.onSetCommissionResponse);var s=Pe.getMsgBody(t,x.snake.socket.CS_SET_COMMISION);if(r==x.snake.socket.MessageCode.SYS_NORMAL){let o={roleId:this.data[0],rateValue:s.rate};L.event(A.EVENT_CHANGE_CLUB_RATE,o),this.close()}}handleClickBtn(t){switch(t){case this.btn_reduce:this.addL>this.minValue&&(this.addL=parseFloat((this.addL-.1).toFixed(1))),this.setItemNum();break;case this.btn_plus:this.addL<this.maxValue&&(this.addL=parseFloat((this.addL+.1).toFixed(1))),this.setItemNum();break}}setItemNum(){let t=this.addL%1===0?this.addL.toFixed(0):this.addL.toFixed(1);this.tf_rateNum.text=`${t} %`}onDisable(){this.btn_ok.off(Laya.Event.CLICK,this,this.onComfirm),this.btn_close.off(Laya.Event.CLICK,this,this.close),L.off("msg_"+x.snake.socket.MessageType.MSG_SET_COMMISSION,this,this.onSetCommissionResponse)}};c1=K([VO("T4HZSfZ-Ry6DwwvmwW29RA")],c1);oi();ri();xt();To();var u1=class extends Laya.Dialog{};At();Yt();Ot();Kt();Ei();Ni();var{regClass:KO}=Laya,p1=class extends u1{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER;this.dialogType=0}setOpenData(t){t&&t.length>0&&(this.dialogType=t[0])}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.btn_close.on(Laya.Event.CLICK,this,this.close),L.on("msg_"+x.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(t){if(t!=-1){let r=this.list_head.selectedItem;V.headId=r.id,this.playerIcon.headSkin=V.headId}}createHeadList(){let t=re.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let r=-1,s=0;this.playerIcon.headSkin=V.headId;for(let o of t.values){if(o.id==V.headId){r=s;break}s++}this.list_head.selectedIndex=r}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=z.getUILang("Upload picture"),s=z.getUILang("Select Image"),o=z.getUILang("Save changes");openUploadPic(this,t,r,s,o)}async openPicEnd(t,r){if(r.length>500){let s=await nr.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);s&&(V.headId=s.imgUrl,t.playerIcon.headSkin=s.imgUrl,console.log(s.imgUrl))}}onRegister(){let t=V.headId;this.dialogType===1?this.sendChangeInfoRequest(t):L.event(A.EVENT_MODIFY_HEAD,[t]),this.close()}sendChangeInfoRequest(t){let r=x.snake.socket.MessageType.MSG_CHANGE_INFO,s=x.snake.socket.CS_CHANGE_INFO.fromObject({type:1,value:t.toString()});De.send(r,s),V.headId=t}onChangeInfoResponse(t,r){var s=Pe.getMsgBody(t,x.snake.socket.CS_CHANGE_INFO);r==x.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CHANGE_INFO",s),V.playerDto.icon=s.value,L.event(A.ROLE_INFO_CHANGE),this.close())}onDisable(){L.off("msg_"+x.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),this.btn_confirm.off(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.off(Laya.Event.CLICK,this,this.onBtnChangePic)}};p1=K([KO("BmtPy79ySCyg4IuEQC4zsQ")],p1);var h1=class extends Laya.ComboBox{};var{regClass:$O}=Laya,d1=class extends h1{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e)}onEnable(){this.list=this.comboList,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1)}set dataSource(e){super.dataSource=e;var t=e;if(t){this.list.repeatY=t.length,this.list.width=this.width;var r=[];t.forEach(s=>{s instanceof Array?r.push(s[1]):r.push(s)}),this.labels=r.join(","),console.log("comboData.length: "+t.length,this.labels)}}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),r=t.y+this._button.height;r=r+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?r:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,r),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};d1=K([$O("AqEOSlrnRkmI9RUPCJUVqQ")],d1);var m1=class extends Laya.List{};var{regClass:qO}=Laya,f1=class extends m1{};f1=K([qO("7DDHp602Rs6dL3bjAu4ArA")],f1);At();jt();var g1=class extends Laya.Box{};var{regClass:YO}=Laya,b1=class extends g1{addEvent(){}set dataSource(t){super.dataSource=t;var r=t;r&&(this.addEvent(),t.id==999?(this.img_icon.visible=!1,this.tf_name.text="All"):(this.img_icon.visible=!0,this.img_icon.skin=ge.getCountryIcon(r.id),this.tf_name.text=z.getLanguage(r.name)))}onChange(t){t?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};b1=K([YO("LJ8PUf7kRCGUr4eT8Mhy3g")],b1);oi();Vi();Yi();hf();ri();xt();To();Kt();var y1=class extends Laya.Dialog{};var bu=class extends Laya.Event{constructor(){super()}};bu.INIT_CREATELOGIN_EVENT="CreateLoginEvent:INIT_CREATELOGIN_EVENT";At();jt();ws();cn();Yt();yn();cr();Ei();En();Ot();Ni();yi();var{regClass:QO}=Laya,_1=class extends y1{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_PANEL;this.m_iPositionType=me.CENTER}onEnable(){L.on(bu.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),L.on("msg_"+x.snake.socket.MessageType.MSG_USER_REGISTER,this,this.onWaitPlayerInfoBack),L.on(A.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),L.on(A.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack),this.box_change.on(Laya.Event.CLICK,this,this.onChangeHead),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),L.on("msg_"+x.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),this.btn_register.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_register]),this.initCountry(),this.initCreateLoginView(),this.initReferral(),Wt.sendCustumEvent(23)}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,r){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=r,this.onHideCountry())}handleClickBtn(t){switch(t){case this.btn_register:this.onRegister();break;case this.btn_setting:at.intance.openModule(R.GameSettingLanguageDialog);break}}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,r){t.onChange(this.list_country.selectedIndex==r)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let r=this.list_country.selectedItem;V.countryId=r.id,this.img_flag.skin=ge.getCountryIcon(r.id),this.tf_country.text=z.getLanguage(r.name)}}createCountryList(){let t=re.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let r=-1,s=0;for(let o of t.values){if(o.id==V.countryId){r=s;break}s++}this.list_country.selectedIndex=r}onChangeHeadBack(t,r){this.input_name.text=t,V.headId=r,this.playerIcon.headSkin=r}onChangeModifyHead(t){V.headId=t,this.playerIcon.headSkin=t}onChangeHead(){at.intance.openModule(R.ChangeHeadDialog,[0])}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=z.getUILang("Upload picture"),s=z.getUILang("Select Image"),o=z.getUILang("Save changes");openUploadPic(this,t,r,s,o)}async openPicEnd(t,r){if(r.length>500){let s=await nr.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);s&&(V.headId=s.imgUrl,t.playerIcon.headSkin=s.imgUrl,console.log(s.imgUrl))}}async onRegister(){let t=this.input_name.text,r=1;if(t=t.trim(),t==""){et.notice(z.getLanguage(25));return}if(V.countryId==-1){et.notice(z.getLanguage(33));return}let s=new URL(window.location.href),l=new URLSearchParams(s.search).get("referral");if(l||(l=new URLSearchParams(s.hash.substring(1)).get("referral")),!l){let p=window.location.href.match(/referral=([^&]+)/);p&&p[1]&&(l=p[1])}console.log("referral: ",l),await mt.createAcccount(t,r,V.headId.toString(),V.countryId,l)}onWaitPlayerInfoBack(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_USER_REGISTER);if(r==x.snake.socket.MessageCode.SYS_NORMAL&&s){ci.hideLoading();var o=s.roleInfo,l=new Uo;l.pid=o.roleId,l.name=o.userName,l.lv=o.lv,l.icon=o.icon,l.exp=o.score,l.code=o.code,l.country=o.country,l.invite=o.invite,l.snakeId=o.snakeId,l.skinId=o.skin,l.createTime=o.createTime,l.maxKill=o.maxKill,l.maxAlive=o.maxAlive,l.score=o.score,l.club=o.club,V.playerDto=l,this.close(),L.event(A.EVENT_ENTER_MAIN)}}requestInvitePlayerInfo(t){let r=x.snake.socket.MessageType.MSG_REQUEST_INFO,s=x.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t,type:2});De.send(r,s)}initReferral(){let t=new URL(window.location.href),s=new URLSearchParams(t.search).get("referral");if(s)this.requestInvitePlayerInfo(s);else{let l=new URLSearchParams(t.hash.substring(1)).get("referral");if(l)this.requestInvitePlayerInfo(l);else{let p=window.location.href.match(/referral=([^&]+)/);p&&p[1]?this.requestInvitePlayerInfo(p[1]):this.box_code.visible=!1}}}initCreateLoginView(){}onDisable(){this.removeEvent()}removeEvent(){L.off(bu.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),L.off(A.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),L.off(A.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack),L.off("msg_"+x.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse)}onRequestInfo(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_REQUEST_INFO);if(r==x.snake.socket.MessageCode.SYS_NORMAL){var o=s.roleInfo;this.tf_inviteName.text=Qt.truncateUnicodeString(o.userName,9),this.playerIcon2.headSkin=o.icon,o.club?(this.requestClubInfo(o.club),this.clubBox.visible=!0,this.nameBox.x=320):(this.clubBox.visible=!1,this.nameBox.x=89),console.log("玩家信息",o)}}requestClubInfo(t){let r="1_00",s=V.nodeId,o=re.getNodeByType(s);o&&ie.vType!==0&&(r=o.point);let l=x.snake.socket.CS_CLUB_INFO.fromObject({point:r,clubId:Number(t)}),u=x.snake.socket.MessageType.MSG_CLUB_INFO;De.send(u,l)}onClubInfoResponse(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_CLUB_INFO);r==x.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CLUB_INFO",s),this.img_clubIcon.skin=ge.getClubIcon(s.icon),this.tf_clubName.text=Qt.truncateUnicodeString(s.name,7))}};_1=K([QO("1K2SyFxcQY-12SasSSRXyQ")],_1);oi();xt();Yt();Kt();Ei();var x1=class extends Laya.Dialog{};Ni();var{regClass:XO}=Laya,v1=class extends x1{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER;this.currentPage=1;this.isLoading=!1;this.hasMoreData=!0;this.pageSize=20;this.inviteTotal=0}onEnable(){this.list_rental.visible=!1,L.on("msg_"+x.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onRequestInfo),this.list_rental.scrollBar.on(Laya.Event.END,this,this.onScrollEnd),this.currentPage=1,this.isLoading=!1,this.hasMoreData=!0,this.initContainer()}initContainer(){if(this.isLoading||!this.hasMoreData)return;this.isLoading=!0;let t=V.playerDto;var r=x.snake.socket.MessageType.MSG_INVITE_LIST,s=x.snake.socket.CS_INVITE_LIST.fromObject({pageNo:this.currentPage,pageSize:this.pageSize});De.send(r,s)}onScrollEnd(){var t=this.list_rental.scrollBar;t.value>=t.max-t.height&&this.hasMoreData&&!this.isLoading&&(this.currentPage++,this.initContainer())}onRequestInfo(t,r){this.isLoading=!1;var s=Pe.getMsgBody(t,x.snake.socket.SC_INVITE_LIST);if(r==x.snake.socket.MessageCode.SYS_NORMAL){var o=s.info;if(this.inviteTotal=s.inviteCount||0,this.currentPage==1)this.list_rental.array=o;else{var l=this.list_rental.array||[];this.list_rental.array=l.concat(o)}this.list_rental.visible=!0,this.hasMoreData=this.list_rental.array.length<this.inviteTotal}}onDisable(){L.off("msg_"+x.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onRequestInfo),this.list_rental&&this.list_rental.scrollBar&&this.list_rental.scrollBar.off(Laya.Event.END,this,this.onScrollEnd)}};v1=K([XO("ULWdMgcOTD-Y9ATVEVTfpg")],v1);At();jt();Vi();Yi();Ot();En();dn();var I1=class extends Laya.Box{};var{regClass:JO}=Laya,S1=class extends I1{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}set dataSource(t){if(!t)return;super.dataSource=t,this.referralData=t;let[r,s,,o,l,u]=t.split(","),p={headId:r,nickName:s,country:Number(o),battle:l,online:u};this.tf_name.text=p.nickName,this.playerIcon.headSkin=p.headId;let h=re.m_dicCountry.get(p.country);h&&(this.img_country.skin=ge.getCountryIcon(h.id),this.tf_country.text=Qt.truncateString(z.getLanguage(h.name),9)),this.tf_battle.text=p.battle;let f=p.online==="0";this.tf_online.text=f?"online":xi.formatTimeAgoFromTimestamp(Number(p.online)),this.tf_online.color=f?"#12f801":"#ffffff"}onBtn12(){this.referralData.remNum>0&&at.intance.openModule(R.ReferralL2Dialog,this.referralData)}};S1=K([JO("UE9rYjENQbOU-0ZTLzyHGw")],S1);oi();mn();var w1=class extends Laya.Dialog{};var{regClass:ZO}=Laya,k1=class extends w1{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER}onEnable(){wt.playSoundByName(wt.soundName32)}onDisable(){}};k1=K([ZO("szfg-Zt_RRWZ_nHMppjUMA")],k1);At();var E1=class extends Laya.Box{};var{regClass:eF}=Laya,L1=class extends E1{set dataSource(e){super.dataSource=e;var t=e;t&&(this.img_icon.skin="res/role/img_icon_"+t[0]+".png",this.tf_name.text=z.getUILang(t[1]),this.tf_num.text=t[2])}};L1=K([eF("WJ5TDeRBSkC9yMqJ72B0Ow")],L1);var T1=class extends Laya.Box{};var{regClass:tF}=Laya,C1=class extends T1{set dataSource(t){super.dataSource=t,this.headItem=t,this.headItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let t=this.headItem.id;this.playerIcon.headSkin=t}onChange(t){}};C1=K([tF("AwN_JFPwQsKswm1N53Bmkg")],C1);oi();Vi();Rr();Yi();ri();xt();Ei();Kt();var A1=class extends Laya.Scene{};At();jt();Yt();yn();cr();Ot();Pr();Ni();dn();En();yi();var{regClass:iF}=Laya,M1=class extends A1{constructor(t){super()}onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onEnable(){this.tf_tittle.text=z.getLanguage(60),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.on(Laya.Event.CLICK,this,this.onCopy2),this.btn_copy3.on(Laya.Event.CLICK,this,this.onCopy3),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.on(Laya.Event.CLICK,this,this.onDetail),this.btn_changeName.on(Laya.Event.CLICK,this,this.onBtnChangeNameClick),this.btn_confirm.on(Laya.Event.CLICK,this,this.sendChangeInfoRequest),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),L.on(A.ROLE_INFO_CHANGE,this,this.updateRoleInfo),L.on("msg_"+x.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),L.on("msg_"+x.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),L.on("msg_"+x.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onInviteListResponse),this.updateRoleInfo(),Li.startJellyScaleAnimation(this.tf_tittle)}updateRoleInfo(){let t="1",r=V.playerDto;if(!r){console.warn("Player data is not available");return}this.requestPlayerInfo(r.pid),this.requestInviteList(),this.updateBasicInfo(r),this.updateReferralInfo(r),this.updateCountryInfo(r.country),this.updateWalletAddress(),this.updatePlayerIcon(r.icon||t),this.showClubInfo()}requestPlayerInfo(t){let r=x.snake.socket.MessageType.MSG_REQUEST_INFO,s=x.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t,type:1});De.send(r,s)}requestInviteList(){let t=x.snake.socket.MessageType.MSG_INVITE_LIST,r=x.snake.socket.CS_INVITE_LIST.fromObject({pageNo:1,pageSize:1});De.send(t,r)}updateBasicInfo(t){this.tf_name.text=Qt.fitTextToLabel(t.name,this.tf_name),this.tf_roleId.text=t.pid,this.tf_createTime.text=`${xi.formatDateDDMMYYYY(t.createTime)}`,this.tf_kill.text=`${t.maxKill}`,this.tf_longTime.text=`<span style="color:#6aeb2b;font-size:46px;">${t.maxAlive}</span><span style="color:#6aeb2b;font-size:10px;vertical-align:bottom;">s</span>`,this.tf_level.text=`${t.lv}`}updateReferralInfo(t){t.code?(this.tf_myCode.text=t.code,this.btn_copy2.disabled=!1):(this.tf_myCode.text="",this.btn_copy2.disabled=!0)}updateCountryInfo(t){let r=re.m_dicCountry.get(t);r&&(this.tf_country.text=z.getLanguage(r.name),this.img_country.skin=ge.getCountryIcon(r.id))}updateWalletAddress(){let t=mt.walletAddress;this.tf_address.text=Qt.shortenString(t,6,4)}updatePlayerIcon(t){this.playerIcon.headSkin=t}onChangeHead(){at.intance.openModule(R.ChangeHeadDialog,[1])}onCopy(){let t=mt.walletAddress;doCopy(t),et.notice(z.getLanguage(19))}onCopy2(){let t=this.tf_myCode.text,r=getVAddress(),s=V.m_strLanguage,o=z.getLanTypeById(s),l=`${r}?referral=${t}&lang=${o}`;doCopy(l),et.notice(z.getLanguage(19))}onCopy3(){let t=this.tf_roleId.text;doCopy(t),et.notice(z.getLanguage(19))}onRequestInfo(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_REQUEST_INFO);if(r==x.snake.socket.MessageCode.SYS_NORMAL&&s.roleInfo){var o=s.roleInfo;s.roleInfo.roleId==V.playerDto.pid?(this.tf_totalNum.text=`${o.num}`,this.tf_totalKill.text=`${o.kills}`,this.tf_kill.text=`${o.maxKill}`,this.tf_longTime.text=`<span style="color:#6aeb2b;font-size:46px;">${o.maxAlive}</span><span style="color:#6aeb2b;font-size:32px;vertical-align:bottom;">s</span>`,o.invite?this.requestPlayerInfo(o.invite):(this.InviterPlayerIcon.visible=!1,this.tf_myReferee.text="None")):(this.tf_myReferee.text=o.userName,this.InviterPlayerIcon.visible=!0,this.InviterPlayerIcon.headSkin=o.icon)}}onInviteListResponse(t,r){if(r==x.snake.socket.MessageCode.SYS_NORMAL){var s=Pe.getMsgBody(t,x.snake.socket.SC_INVITE_LIST);s&&(this.ally_num.text=`${s.inviteCount||0}`)}}onDisable(){L.off(A.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.off(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.off(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.off(Laya.Event.CLICK,this,this.onDetail),L.off("msg_"+x.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),L.off("msg_"+x.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse),L.off("msg_"+x.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),L.off("msg_"+x.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onInviteListResponse),L.offAllCaller(this)}onDetail(){at.intance.openModule(R.ReferralDialog)}setToMainScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}onBtnChangeNameClick(){this.nameBox.visible=!1,this.changeNameBox.visible=!0,this.input_name.text=V.playerDto.name}sendChangeInfoRequest(){let t=x.snake.socket.MessageType.MSG_CHANGE_INFO,r=x.snake.socket.CS_CHANGE_INFO.fromObject({type:2,value:this.input_name.text});De.send(t,r)}onChangeInfoResponse(t,r){if(r==x.snake.socket.MessageCode.SYS_NORMAL){var s=Pe.getMsgBody(t,x.snake.socket.CS_CHANGE_INFO);this.nameBox.visible=!0,this.changeNameBox.visible=!1,s.type==1?this.updatePlayerIcon(s.value):(this.tf_name.text=Qt.fitTextToLabel(s.value,this.tf_name),V.playerDto.name=s.value)}else this.nameBox.visible=!0,this.changeNameBox.visible=!1;L.event(A.ROLE_INFO_CHANGE)}showClubInfo(){V.playerDto.club&&(this.requestClubInfo(V.playerDto.club),L.on("msg_"+x.snake.socket.MessageType.MSG_CLUB_INFO,this,this.onClubInfoResponse))}requestClubInfo(t){let r="1_00",s=V.nodeId,o=re.getNodeByType(s);o&&ie.vType!==0&&(r=o.point);let l=x.snake.socket.CS_CLUB_INFO.fromObject({point:r,clubId:Number(t)}),u=x.snake.socket.MessageType.MSG_CLUB_INFO;De.send(u,l)}onClubInfoResponse(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_CLUB_INFO);r==x.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CLUB_INFO",s),this.tf_clubName.text=Qt.truncateUnicodeString(s.name,30))}};M1=K([iF("Ra6hof-DS3-o_gxRa_2t0g")],M1);oi();Fa();ri();xt();To();var R1=class extends Laya.Dialog{};pu();At();jt();Yt();pw();cr();Ot();var{regClass:rF}=Laya,B1=class extends R1{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER}setOpenData(t){}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.input_name.prompt=z.getLanguage(25),this.initContainer();let t=re.getGeneralValueById(13);this.tf_nameGold.text=t[1],this.img_nameGold.skin=ge.getMoneyIcon(t[0]),console.log(t)}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList(),this.initCountry()}handleSelectHead(t){if(t!=-1){let r=this.list_head.selectedItem;V.headId=r.id,this.playerIcon.headSkin=V.headId}}createHeadList(){let t=re.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let r=-1,s=0;V.headId=V.playerDto.icon,this.playerIcon.headSkin=V.headId,this.input_name.text=V.playerDto.name;for(let o of t.values){if(o.id==V.headId){r=s;break}s++}this.list_head.selectedIndex=r}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,r){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=r,this.onHideCountry())}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,r){t.onChange(this.list_country.selectedIndex==r)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let r=this.list_country.selectedItem;V.countryId=r.id,this.img_flag.skin=ge.getCountryIcon(r.id),this.tf_country.text=z.getLanguage(r.name)}}createCountryList(){let t=re.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let r=-1,s=0;V.countryId=V.playerDto.country;for(let o of t.values){if(o.id==V.countryId){r=s;break}s++}this.list_country.selectedIndex=r}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=z.getUILang("Upload picture"),s=z.getUILang("Select Image"),o=z.getUILang("Save changes");openUploadPic(this,t,r,s,o)}async openPicEnd(t,r){if(r.length>500){let s=await nr.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);s&&(V.headId=s.imgUrl,t.playerIcon.headSkin=s.imgUrl,t.list_head.selectedIndex=-1,console.log(s.imgUrl))}}onRegister(){let t=this.input_name.text;if(t=t.trim(),t==""){et.notice(z.getLanguage(25));return}if(V.playerDto.name!==t&&V.getConsumeValue(Gt.TYPE_GOLD)<Number(this.tf_nameGold.text)){et.notice(Cr.get(51));return}V.headId!=-1?this.onModify(t,V.headId,V.countryId):et.notice(z.getLanguage(28))}async onModify(t,r,s){if(t==""){et.notice(z.getLanguage(25));return}let o=await P0.updateProfile(t,r.toString(),s);this.destroyed||(o?(V.playerDto=o,this.close(),L.event(A.ROLE_INFO_CHANGE)):et.notice(z.getLanguage(29)))}};B1=K([rF("3CibwwHGSPG2Qkeq4rbMag")],B1);var D1=class extends Laya.ComboBox{};var{regClass:nF}=Laya,N1=class extends D1{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e),this._button.labelAlign="center"}onEnable(){this.list=this.comboList}set dataSource(e){super.dataSource=e;var t=e;t&&(this.labels=t.join(","),console.log("comboData.length: "+t.length),this.list.repeatY=t.length,this.list.width=this.width,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1))}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),r=t.y+this._button.height;r=r+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?r:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,r),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};N1=K([nF("Fns-7UW3RpSb95NWnjiDFQ")],N1);At();oi();Vi();cn();mn();Yt();Yi();yv();yd();cr();var O1=class extends Laya.Dialog{};var{regClass:sF}=Laya,Ra=class extends Laya.Script{constructor(){super();this._isLeft=!1}onAwake(){}get isLeft(){return this._isLeft}set isLeft(t){this._isLeft=t,this.btn_bg=this.owner.getChildByName("btn_bg"),this.label_left=this.owner.getChildByName("label_left"),this.label_right=this.owner.getChildByName("label_right"),this.isLeft?(this.btn_bg.x=4,this.label_left.color="#213343",this.label_right.color="#52a5e0"):(this.btn_bg.x=this.owner.width-this.btn_bg.width-4,this.label_left.color="#52a5e0",this.label_right.color="#213343")}};Ra=K([sF("-1MGS4JRSMOn_RKPUuuV9Q")],Ra);var{regClass:oF}=Laya,F1=class extends O1{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER;this.totalLans=[1,6,7];this.currLan=0}onEnable(){this.musicSwitchButton=this.box_music.getComponent(Ra),this.soundSwitchButton=this.box_sound.getComponent(Ra),this.initContainer(),this.box_music.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_music]),this.box_sound.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_sound]),this.btn_copy.clickHandler=new Laya.Handler(this,this.onClickHandler,[this.btn_copy]),this.btn_referral.on(Laya.Event.CLICK,this,this.onClickHandler,[this.btn_referral]);for(let r=0;r<this.totalLans.length;r++){var t=this.totalLans[r];this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t])}}onClickHandler(t){switch(t){case this.box_music:this.musicSwitchButton.isLeft=!this.musicSwitchButton.isLeft,wt.switchMusic(this.musicSwitchButton.isLeft);break;case this.box_sound:this.soundSwitchButton.isLeft=!this.soundSwitchButton.isLeft,wt.switchSound(this.soundSwitchButton.isLeft);break;case this.btn_referral:at.intance.openModule(R.InviteRewardDialog);break;case this.btn_copy:{let r=this.inviteUrl;doCopy(r),et.notice(z.getLanguage(19))}break}}initContainer(){this.musicSwitchButton.isLeft=wt.m_bPlayMusic,this.soundSwitchButton.isLeft=wt.m_bPlayeSound,this.currLan=V.m_strLanguage,this.setTab(V.m_strLanguage),this.inviteUrl=Rs.getInviteUrl(),this.label_url.text=Ls.shortStr(this.inviteUrl,50)}onClickTab(t){if(this.currLan==t)return;this.currLan=t,this.setTab(t);let r=z.getLanTypeById(t);z.FGM_SetLanguage(r),Wt.reload()}setTab(t){for(let s=0;s<this.totalLans.length;s++){var r=this.totalLans[s];t==r?(this["btn_"+r].getChildByName("btn_yellowBg").visible=!0,this["btn_"+r].getChildByName("Label").color="#213343"):(this["btn_"+r].getChildByName("btn_yellowBg").visible=!1,this["btn_"+r].getChildByName("Label").color="#52a5e0")}}webCopyString(t){let r=t,s=window.document.createElement("textarea");s.value=r,s.setAttribute("readonly",""),s.style.contain="strict",s.style.position="absolute",s.style.left="-9999px",s.style.fontSize="12pt";let o=window.getSelection(),l=!1;o.rangeCount>0&&(l=o.getRangeAt(0)),window.document.body.appendChild(s),s.select(),s.selectionStart=0,s.selectionEnd=r.length;let u=!1;try{u=window.document.execCommand("copy")}catch(p){console.error(p)}return window.document.body.removeChild(s),l&&(o.removeAllRanges(),o.addRange(l)),u}};F1=K([oF("yJfJZzgZRluE_rgB44yTvg")],F1);oi();var P1=class extends Laya.Dialog{};Ot();Ei();Kt();xt();Ni();jt();Hn();var{regClass:aF}=Laya,rk=3,FR={selected:["res/main/join/img_tbl1.png","res/main/join/img_tbm1.png","res/main/join/img_tbr1.png"],unselected:["res/main/join/img_tbl2.png","res/main/join/img_tbm2.png","res/main/join/img_tbr2.png"]},PR={selected:"#0c6917",unselected:"#405073"},lF=[2,3,4],U1=class extends P1{constructor(){super();this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER;this.isEntering=!1}onEnable(){this.initEvents(),this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:.7},200,Laya.Ease.linearIn),fi.getTokenData()?this.onTabClick(0):this.requestCoinInfo()}onDisable(){this.removeEvents(),Laya.timer.clear(this,()=>{this.isEntering=!1})}initEvents(){for(let t=0;t<rk;t++)this[`tab${t}`].on(Laya.Event.CLICK,this,this.onTabClick,[t]);L.on(`msg_${x.snake.socket.MessageType.MSG_QUERY_TOKEN}`,this,this.onRequestInfo),this.img_di1.on(Laya.Event.CLICK,this,this.onCheakTab),this.btn_hideBox.on(Laya.Event.CLICK,this,this.onCloseTab),this.btn_font.on(Laya.Event.CLICK,this,this.onEnterMatch),this.list_token.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_token.selectHandler=new Laya.Handler(this,this.handleSelectToken)}removeEvents(){L.off(`msg_${x.snake.socket.MessageType.MSG_QUERY_TOKEN}`,this,this.onRequestInfo),this.img_di1.off(Laya.Event.CLICK,this,this.onCheakTab),this.btn_hideBox.off(Laya.Event.CLICK,this,this.onCloseTab),this.btn_font.off(Laya.Event.CLICK,this,this.onEnterMatch);for(let t=0;t<rk;t++)this[`tab${t}`].off(Laya.Event.CLICK,this,this.onTabClick);this.list_token.renderHandler=null,this.list_token.selectHandler=null}onEnterMatch(){this.isEntering||this.roomData&&(this.isEntering=!0,Ma.goPvpArenaScene(this.roomData.id,this.roomData.ticketType[this.roomIndex],this.roomData.ticketAmount[this.roomIndex]),Laya.timer.once(3e3,this,()=>{this.isEntering=!1}))}onCheakTab(){fi.getTokenData()&&(this.img_token_pad.visible=!0,this.btn_hideBox.visible=!0)}onCloseTab(){this.img_token_pad.visible&&(this.btn_hideBox.visible=!1,this.img_token_pad.visible=!1)}onTabClick(t){fi.getTokenData()&&(this.updateTabsAppearance(t),this.roomType=lF[t],this.updateRoomData())}updateTabsAppearance(t){for(let r=0;r<rk;r++){let s=this[`tab${r}`],o=s.getChildByName("tf_tit"),l=t===r;s.skin=l?FR.selected[r]:FR.unselected[r],o.strokeColor=l?PR.selected:PR.unselected}}updateRoomData(){let r=(re.m_dicRoom?.values).filter(s=>s.roomType==this.roomType);r.length!==0&&(this.roomData=r[0],this.list_token.array=this.roomData.ticketType,this.list_token.selectedIndex=0,this.updateTokenInfo(0))}updateTokenInfo(t){this.roomIndex=t;let r=fi.getTokenData().find(s=>s.symbolId==this.roomData.ticketType[t]);r&&(this.tf_coin.text=r.symbol,this.img_coin.skin=ge.getCurrencyIcon(this.roomData.ticketType[t]),this.tf_number.text=String(this.roomData.ticketAmount[t]))}onTokenItemRender(t,r){t&&t.onChange&&(t.onChange(this.list_token.selectedIndex==r),this.img_token_pad.visible=!1,this.btn_hideBox.visible=!1)}handleSelectToken(t){t!=-1&&this.updateTokenInfo(t)}requestCoinInfo(){let t=x.snake.socket.MessageType.MSG_QUERY_TOKEN;De.send(t)}onRequestInfo(t,r){let s=Pe.getMsgBody(t,x.snake.socket.SC_QUERY_TOKEN);r==x.snake.socket.MessageCode.SYS_NORMAL&&this.onTabClick(0)}setOpenData(t){}};U1=K([aF("NM3GHDnJRD6AnD7XkkQaig")],U1);oi();Rr();ri();xt();var H1=class extends Laya.Scene{};Kt();Vi();Yi();At();cn();Yt();yn();cr();Ot();Pr();jt();Ni();e_();ri();xt();e_();var Td=class{static pushNotice(e){L.event(A.EVENT_NEW_NOTICE,e)}static startAutoPush(e=6e4){let t=["测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试","欢迎来到nake游戏，祝您游戏愉快！","新版本V1.2.5已发布，增加了新的游戏玩法和优化了游戏体验。","游戏将于明日凌晨2:00-4:00进行维护，请提前做好准备。","服务器即将进行维护，预计停机时间2小时。"];Laya.timer.loop(e,null,()=>{let r=Math.floor(Math.random()*t.length),s=t[r];this.pushNotice(s)})}static stopAutoPush(){Laya.timer.clearAll(null)}static clearAllNotices(){no.clearNotices()}};Ei();Mo();En();var{regClass:cF}=Laya,Oo=class extends H1{constructor(){super(...arguments);this.isAnimationRunning=!1;this.lastPingTime=0;this.pingInProgress=!1;this.pingAbortControllers=[];this.shouldAbortPing=!1;this.currIconAni=1}onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP,V.playerDto.club==""?this.btn_guild.visible=!1:(this.btn_guild.visible=!0,this.btn_guildCreate.visible=!1),this.initSpineEvent(),this.initMarquee(),this.initBagInfo()}async onOpened(t){this.startBackgroundAnimation(),this.mouseThrough=this.mouseThrough=!0,this.headBox.mouseThrough=!0;let r=this.getChildByName("mcMain");if(r&&(r.mouseThrough=!0),this.updateTopInfo(),this.updateModeBoxLayout(),Wt.sendCustumEvent(34),!!V.playerDto){var o=null;showChatBtn(!0,mt.walletAddress,o),Oo.hasTestedNodesThisSession?this.checkCurrentNode():(console.log("本次游戏启动，测试节点延迟并选择最佳节点"),Oo.hasTestedNodesThisSession=!0,this.testNodeDelays()),no.setInMainScene(!0)}}startBtnAni(){this.currIconAni>5&&(this.currIconAni=1),this["spine_"+this.currIconAni].play(0,!1),this["spine_"+this.currIconAni].visible=!0,this.currIconAni++,Laya.timer.once(2e3,this,this.startBtnAni)}updateTopInfo(){let t=V.playerDto;if(!t)return;this.tf_roleName.text=Qt.fitTextToLabel(t.name,this.tf_roleName),t.needTip=!0,this.playerIcon.dataSource=t,this.tf_lv.text=`${t.lv}`;let r=re.getLevelById(t.lv);this.prog_exp.value=t.exp/r.needExp,console.log("playerDto.exp / levelItem.needExp："+t.exp/r.needExp);let s=new Date(V.m_serverTime);console.log("server time toLocaleString："+s.toLocaleString()),console.log("server time offset date："+V.timeZoneOff/60/60)}onGetRoleInfo(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_REQUEST_INFO);if(r==x.snake.socket.MessageCode.SYS_NORMAL){var o=s.roleInfo;console.log("玩家信息",o)}}onEnable(){for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);for(let t=1;t<=4;t++)this[`btn_join_${t}`].on(Laya.Event.CLICK,this,this.joinRoomClick,[t]);this.playerIcon.on(Laya.Event.CLICK,this,this.onClickHead),this.btn_shop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_shop]),this.btn_guild.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_guild]),this.btn_guildCreate.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_guildCreate]),this.btn_backpack.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_backpack]),this.btn_asset.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_asset]),this.btn_mail.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_mail]),this.btn_setting.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_setting]),this.btn_rank.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_rank]),this.btn_node.on(Laya.Event.CLICK,this,this.showNodeBox),this.backLayer.on(Laya.Event.CLICK,this,this.hideNodeBox),this.btn_1.on(Laya.Event.CLICK,this,this.showJoinBox),this.btn_closeJoin.on(Laya.Event.CLICK,this,this.hideJoinBox),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onGetRoleInfo),L.on(A.ROLE_INFO_CHANGE,this,this.updateTopInfo),L.on(A.EVENT_ITEM_UPDATE,this,this.onPackInfo),L.on(A.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),L.on(A.EVENT_CHANGE_NODE,this,this.onChangeNode),L.on(A.EVENT_NEW_NOTICE,this,this.onReceiveNewNotice),L.on(A.EVENT_MARQUEE_EMPTY,this,this.onMarqueeEmpty),L.on(A.EVENT_NEW_NOTICE_ADDED,this,this.onNewNoticeAdded),L.on(A.ROLE_INFO_CHANGE,this,this.updateModeBoxLayout),this.initNodeList(),Laya.timer.loop(15e3,this,this.startPing),this.updateModeBoxLayout(),console.log("GlobalDataManager.playerDto.club："+V.playerDto.club)}onClickTab(t){t==2}onReceiveNewNotice(t){console.log("主界面接收到新公告事件:",t)}initSpineEvent(){let t;t=this.btn_guild,this.initSpineLoadEvent(this.AniSk_guild,this.btn_guild),this.initSpineLoadEvent(this.AniSk_shop,this.btn_shop),this.initSpineLoadEvent(this.AniSk_backpack,this.btn_backpack),this.initSpineLoadEvent(this.AniSk_asset,this.btn_asset),this.initSpineLoadEvent(this.AniSk_rank,this.btn_rank),this.initSpineLoadEvent(this.AniSk_btn1,this.btn_1),this.initSpineLoadEvent(this.AniSk_btn2,this.btn_2)}async onclickBtnHandler(t){switch(this.abortAllPingTests(),t){case this.btn_shop:bt.setCurrentScene(Re.M_SCENE_SHOP);break;case this.btn_backpack:bt.setCurrentScene(Re.M_SCENE_KNAPSACK);break;case this.btn_setting:bt.setCurrentScene(Re.M_SCENE_SETTING);break;case this.btn_asset:bt.setCurrentScene(Re.M_SCENE_ASSET);break;case this.btn_rank:bt.setCurrentScene(Re.M_SCENE_RANK);break;case this.btn_guild:console.log("GlobalDataManager.playerDto.club："+V.playerDto.club),bt.setCurrentScene(Re.M_SCENE_CLUB);break;case this.btn_guildCreate:console.log("GlobalDataManager.playerDto.club："+V.playerDto.club),at.intance.openModule(R.CreateClubDialog);break;case this.btn_mail:bt.setCurrentScene(Re.M_SCENE_MAIL);break;default:et.notice(z.getLanguage(52));break}}onHideList(){Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList)}async onClickHead(){this.abortAllPingTests(),bt.setCurrentScene(Re.M_SCENE_ROLE)}onDisable(){for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab);for(let t=1;t<=4;t++)this[`btn_join_${t}`].off(Laya.Event.CLICK,this,this.joinRoomClick);this.playerIcon.off(Laya.Event.CLICK,this,this.onClickHead),this.btn_node.off(Laya.Event.CLICK,this,this.showNodeBox),this.backLayer.off(Laya.Event.CLICK,this,this.hideNodeBox),this.btn_1.off(Laya.Event.CLICK,this,this.showJoinBox),this.btn_closeJoin.off(Laya.Event.CLICK,this,this.hideJoinBox),L.off("msg_"+x.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onGetRoleInfo),L.off(A.ROLE_INFO_CHANGE,this,this.updateTopInfo),L.off(A.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),L.off(A.EVENT_CHANGE_NODE,this,this.onChangeNode),L.off(A.EVENT_ITEM_UPDATE,this,this.onPackInfo),L.off(A.ROLE_INFO_CHANGE,this,this.updateModeBoxLayout),L.off(A.EVENT_NEW_NOTICE,this,this.onReceiveNewNotice),L.off(A.EVENT_MARQUEE_EMPTY,this,this.onMarqueeEmpty),L.off(A.EVENT_NEW_NOTICE_ADDED,this,this.onNewNoticeAdded),this.stopBackgroundAnimation(),this.destroySpineEventListeners(),this.destroySpineAnimations(),Laya.timer.clearAll(this),no.setInMainScene(!1),Td.stopAutoPush(),Laya.timer.clear(this,this.startPing),showChatBtn(!1),L.offAllCaller(this),Laya.Tween.clearAll(this)}destroySpineAnimations(){for(let t=1;t<8;t++){let r=this["spine_"+t];r&&(r.stop(),r.removeSelf())}}onEnterMatchRoom(t){t?Laya.timer.once(2e3,this,this.startBtnAni):Laya.timer.clear(this,this.startBtnAni)}startBackgroundAnimation(){!this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!0,Li.startCircleAnimation(this.bgAni,Laya.stage.width/2,Laya.stage.height/2,30,3500,!0,0,null))}stopBackgroundAnimation(){this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!1,Li.stopCircleAnimation(this.bgAni))}onSpineReady(t){if(!t){console.warn("Button component is null in onSpineReady");return}t==this.btn_guildCreate&&console.log("spine == this.btn_guildCreate"),t.skin="",t==this.btn_guild&&(V.playerDto.club==""||V.playerDto.club)}getSpineNode(t){return t?t.box_sk?t.box_sk:(console.warn("Spine skeleton node is null in AniSk component"),null):(console.warn("AniSk component is null"),null)}initSpineLoadEvent(t,r){if(!t||!r){console.warn("Invalid parameters in initSpineLoadEvent");return}let s;if(t===this.AniSk_guild2)s=this.AniSk_guild2;else if(t===this.AniSk_guild)s=this.AniSk_guild;else if(this.isAniSk(t))s=this.getSpineNode(t);else{console.warn("Unknown spine animation type");return}s&&(s.off(Laya.Event.READY,this,this.onSpineReady),s.on(Laya.Event.READY,this,this.onSpineReady,[r]))}destroySpineEventListeners(){let t;t=this.btn_guild,[{anisk:this.AniSk_guild,button:t},{anisk:this.AniSk_shop,button:this.btn_shop},{anisk:this.AniSk_backpack,button:this.btn_backpack},{anisk:this.AniSk_asset,button:this.btn_asset},{anisk:this.AniSk_rank,button:this.btn_rank},{anisk:this.AniSk_btn1,button:this.btn_1},{anisk:this.AniSk_btn2,button:this.btn_2}].forEach(({anisk:s,button:o})=>{if(s&&o)if(this.isAniSk(s)){let l=this.getSpineNode(s);l&&l.off(Laya.Event.READY,this,this.onSpineReady)}else s===this.AniSk_guild2?this.AniSk_guild2&&this.AniSk_guild2.off(Laya.Event.READY,this,this.onSpineReady):s===this.AniSk_guild&&this.AniSk_guild&&this.AniSk_guild.off(Laya.Event.READY,this,this.onSpineReady)})}isAniSk(t){return t&&"box_sk"in t}showNodeBox(){if(!this.nodeBox){console.warn("nodeBox is not defined in MainScene");return}if(!this.btn_node){console.warn("btn_node is not defined in MainScene");return}this.executePing(!0),this.backLayer.visible=!0,this.nodeBox.scaleX=0,this.nodeBox.scaleY=0,this.nodeBox.visible=!1;let t=this.btn_node.localToGlobal(new Laya.Point(this.btn_node.width/2,this.btn_node.height/2));t.x+=90,t.y+=20;let r=this.nodeBox.parent;if(!r){console.warn("nodeBox parent is null");return}let s=r.globalToLocal(t);this.nodeBox.pos(s.x,s.y),Li.startElasticPopupAnimation(this.nodeBox,150,1.1,100,.95,80,Laya.Handler.create(this,()=>{console.log("NodeBox show animation complete")}))}hideNodeBox(){if(!this.nodeBox){console.warn("nodeBox is not defined in MainScene for hiding");return}Li.startLinearShrinkAnimation(this.nodeBox,80,Laya.Handler.create(this,()=>{this.backLayer.visible=!1,console.log("NodeBox hide animation complete")}))}initNodeList(){let t=re.m_dicNodes.values,r=V.nodeId,s;for(let o=0;o<t.length;o++)if(t[o].id===r){s=t[o];break}if(s){let o=re.m_dicCountry.get(s.area);o&&(this.tf_nowNodeFlag.skin=ge.getNodeIcon(o.id),this.tf_nowNodeFlag2.skin=ge.getCountryIcon(o.id)),this.tf_nowNode.text=z.getLanguage(s.name),this.tf_nowNode2.text=z.getLanguage(s.name);let l=t.filter(p=>p.id!==r);this.NodeList.array=l;let u=s.url;V.currentNodeUrl=u}else this.NodeList.array=t}showJoinBox(){this.abortAllPingTests(),this.joinBox.scaleX=0,this.joinBox.scaleY=0,this.btn_closeJoin.visible=!1,this.img_guangTop.visible=!0,this.backLayer.visible=!0,this.backLayer.off(Laya.Event.CLICK,this,this.hideNodeBox),this.joinBox.visible=!0,this.updateModeBoxLayout(),Laya.Tween.to(this.joinBox,{scaleX:1.15,scaleY:1.15},200,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.joinBox,{scaleX:1,scaleY:1},60,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.btn_closeJoin.visible=!0,this.backLayer.on(Laya.Event.CLICK,this,this.hideNodeBox)}))}))}joinRoomClick(t){switch(this.abortAllPingTests(),this.hideJoinBox(),t){case 1:at.intance.openModule(R.JoinRoomDialog,t);break;case 2:V.playerDto.club!==""&&V.playerDto.club!==void 0?bt.setCurrentScene(Re.M_SCENE_CLUB):at.intance.openModule(R.CreateClubDialog);break;case 3:Ma.goAiArenaScene();break;case 4:break}}hideJoinBox(){this.btn_closeJoin.visible=!1,Laya.Tween.to(this.joinBox,{scaleX:1.15,scaleY:1.15},50,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.joinBox,{scaleX:.2,scaleY:.2},200,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.joinBox.visible=!1,this.backLayer.visible=!1,this.img_guangTop.visible=!1}))}))}startPing(t=!1){setTimeout(()=>{if(window.requestIdleCallback)window.requestIdleCallback(()=>this.executePing(t),{timeout:1e3});else{let s=0,o=l=>{requestAnimationFrame(()=>{++s>=3?l():o(l)})};o(()=>this.executePing(t))}},t?1e3:2e3)}executePing(t=!1){if(this.shouldAbortPing||this.pingInProgress)return;let r=Date.now();if(!t&&r-this.lastPingTime<15e3){this.nodeBox&&this.nodeBox.visible&&!this.shouldAbortPing&&this.updateNodeListDelays();return}this.lastPingTime=r,this.pingInProgress=!0;let s=V.currentNodeUrl||"https://wss-room-sg.queengame.io/test-ping";this.pingServerLite(s).then(o=>{L.event(A.EVENT_Game_Delay,o),(this.nodeBox&&this.nodeBox.visible||t)&&!this.shouldAbortPing&&this.updateNodeListDelays()}).catch(o=>{L.event(A.EVENT_Game_Delay,9999);let l=V.nodeId,u=re.m_dicNodes.get(l);u&&u.setDelay(9999),(this.nodeBox&&this.nodeBox.visible||t)&&!this.shouldAbortPing&&this.updateNodeListDelays()}).finally(()=>{this.pingInProgress=!1})}pingServerLite(t){return new Promise((r,s)=>{if(this.shouldAbortPing||!t)return;let o=new AbortController;this.pingAbortControllers.push(o);let l=o.signal,p=setTimeout(()=>{let v=this.pingAbortControllers.indexOf(o);v!==-1&&this.pingAbortControllers.splice(v,1),o.abort(),s(new Error("请求超时"))},3e3),h=Date.now(),f=Math.floor(Math.random()*1e5),g=`${t}?_t=${h}&r=${f}`,b=Date.now();try{fetch(g,{method:"GET",mode:"no-cors",cache:"no-cache",signal:l}).then(()=>{let v=this.pingAbortControllers.indexOf(o);v!==-1&&this.pingAbortControllers.splice(v,1);let w=Date.now()-b;clearTimeout(p),r(w)}).catch(v=>{let w=this.pingAbortControllers.indexOf(o);if(w!==-1&&this.pingAbortControllers.splice(w,1),v.name==="AbortError"){if(this.shouldAbortPing){s(new Error("用户操作中断"));return}this.pingWithImage(t).then(k=>r(k)).catch(()=>s(v))}else s(v)})}catch(v){let w=this.pingAbortControllers.indexOf(o);if(w!==-1&&this.pingAbortControllers.splice(w,1),clearTimeout(p),this.shouldAbortPing){s(new Error("用户操作中断"));return}this.pingWithImage(t).then(k=>r(k)).catch(()=>s(v))}})}pingWithImage(t){return new Promise((r,s)=>{if(this.shouldAbortPing){s(new Error("用户操作中断"));return}let o=new Image,l=Date.now(),u=!1,p=2e3,h=setTimeout(()=>{u||(u=!0,s(new Error("图片加载超时")))},p),f=()=>{clearTimeout(h),o.onload=null,o.onerror=null;try{delete o.src}catch{o.src=""}};o.onload=()=>{if(!u){u=!0,f();let E=Date.now()-l;r(E)}},o.onerror=()=>{if(!u){u=!0,f();let E=Date.now()-l;E<800?r(E):s(new Error("图片加载失败"))}};let g=Date.now(),b=Math.floor(Math.random()*1e5),v=`${t}?_t=${g}&r=${b}&type=image`;o.src=v;let w=()=>this.shouldAbortPing&&!u?(u=!0,f(),s(new Error("用户操作中断")),!0):!1;w();let k=setInterval(()=>{(w()||u)&&clearInterval(k)},100);setTimeout(()=>{clearInterval(k),u||(u=!0,f(),s(new Error("图片加载未完成")))},p+200)})}updateNodeListDelays(){if(this.shouldAbortPing){console.log("有用户操作正在进行，中断节点列表更新");return}if(!this.NodeList||!this.NodeList.array||this.NodeList.array.length===0)return;let t=this.NodeList.array,r=6e3,s=Date.now(),o=0,l=t.length,u=t.map((p,h)=>new Promise(f=>{let g=100+Math.floor(h*700/t.length);setTimeout(()=>{if(this.shouldAbortPing){console.log(`节点${p.id}测试被用户操作中断`),f();return}if(Date.now()-s>r){f();return}p&&p.url?this.pingServerLite(p.url).then(b=>{p.setDelay(b),this.updateNodeItemDelay(h,b)}).catch(b=>{b?.message==="用户操作中断"?console.log(`节点 ${p.id} 测试被用户中断`):(p.setDelay(9999),this.updateNodeItemDelay(h,9999))}).finally(()=>{o++,f()}):(o++,f())},g)}));Promise.all(u).then(()=>{}),setTimeout(()=>{o<l&&!this.shouldAbortPing&&this.abortAllPingTests()},r+1e3)}async testNodeDelays(){if(this.shouldAbortPing){console.log("有用户操作正在进行，跳过节点测试");return}if(await new Promise(h=>setTimeout(h,1e3)),this.shouldAbortPing){console.log("延迟后检测到用户操作，跳过节点测试");return}let t=re.m_dicNodes.values;if(!t||t.length===0){console.log("节点列表为空，无法进行延迟测试");return}let r=[],s=3,o=500,l=0,u=Math.ceil(t.length/s),p=h=>new Promise(f=>{if(this.shouldAbortPing){console.log("批次处理中检测到用户操作，中断当前批次"),f();return}let g=0;h.forEach(b=>{b&&b.url&&b.open===1?setTimeout(()=>{if(this.shouldAbortPing){g++,g>=h.length&&f();return}this.pingServerLite(b.url).then(v=>{if(r.push({nodeId:b.id,url:b.url,delay:v,name:b.name}),b.setDelay(v),this.NodeList&&this.NodeList.array&&this.NodeList.array.length>0){let k=this.NodeList.array.findIndex(E=>E.id===b.id);k!==-1&&this.updateNodeItemDelay(k,v)}}).catch(v=>{if(!this.shouldAbortPing&&(r.push({nodeId:b.id,url:b.url,delay:9999,name:b.name}),b.setDelay(9999),this.NodeList&&this.NodeList.array&&this.NodeList.array.length>0)){let k=this.NodeList.array.findIndex(E=>E.id===b.id);k!==-1&&this.updateNodeItemDelay(k,9999)}}).finally(()=>{g++,g>=h.length&&f()})},Math.random()*100):(g++,g>=h.length&&f())}),h.length===0&&f()});for(let h=0;h<t.length;h+=s){if(this.shouldAbortPing){console.log("批次循环中检测到用户操作，中断剩余批次处理");break}let f=t.slice(h,h+s);await p(f),l++,h+s<t.length&&!this.shouldAbortPing&&await new Promise(g=>setTimeout(g,o))}if(console.log(`节点批次处理完成: ${l}/${u}`),this.shouldAbortPing){console.log("用户已中断节点测试，保持当前节点不变");return}if(r.length>0){r.sort((f,g)=>f.delay-g.delay);let h=r[0];if(h.delay<9999)console.log(`选择最佳节点: ${h.nodeId}(${h.name})，延迟: ${h.delay}ms`),V.nodeId=h.nodeId,V.currentNodeUrl=h.url,this.initNodeList(),L.event(A.EVENT_Game_Delay,h.delay),L.event(A.EVENT_CHANGE_NODE);else{console.warn("所有节点测试都失败，使用默认节点1001"),V.nodeId=1001;let f=t.find(g=>g.id===1001);f&&f.url?V.currentNodeUrl=f.url:V.currentNodeUrl="https://wss-room-sg.queengame.io/test-ping",this.initNodeList(),L.event(A.EVENT_CHANGE_NODE)}}}initMarquee(){if(!this.runBox||!this.tf_run1){console.warn("跑马灯组件不存在，无法初始化");return}no.init(this.runBox,this.tf_run1,2),no.setMaxPlayCount(2),no.hasNotices()?this.marqueeBox.visible=!0:this.marqueeBox.visible=!1}updateNodeItemDelay(t,r){let s=this.NodeList.getCell(t);s&&s.setDelay&&s.setDelay(r)}onMarqueeEmpty(){this.marqueeBox&&(this.marqueeBox.visible=!1)}onNewNoticeAdded(){this.marqueeBox&&(this.marqueeBox.visible=!0)}initBagInfo(){let t=x.snake.socket.MessageType.MSG_PACK_INFO;De.send(t)}onPackInfo(){let t=Ar.getAllKnapsackItems().find(r=>r.id===10001);t&&(console.log(t),this.tf_score.text=`${parseFloat(t.num.toFixed(4)).toString()}`)}updateModeBoxLayout(){let t=V.playerDto.club!==""&&V.playerDto.club!==void 0;if(this.modeBox_2&&(this.modeBox_2.visible=t),!t&&this.middleBox){let u=this.middleBox.width/2-841/2+255/2;this.modeBox_1&&(this.modeBox_1.x=u),this.modeBox_3&&(this.modeBox_3.x=u+255+38),this.modeBox_4&&(this.modeBox_4.x=u+(255+38)*2)}else this.modeBox_1&&(this.modeBox_1.x=130.5),this.modeBox_2&&(this.modeBox_2.x=415.5),this.modeBox_3&&(this.modeBox_3.x=703.5),this.modeBox_4&&(this.modeBox_4.x=988.5)}abortAllPingTests(){this.shouldAbortPing=!0,this.pingAbortControllers.length>0&&(console.log(`中断${this.pingAbortControllers.length}个正在进行的ping测试`),this.pingAbortControllers.forEach(t=>{try{t.abort()}catch{}}),this.pingAbortControllers=[]),this.pingInProgress=!1,setTimeout(()=>{this.shouldAbortPing=!1},1e3)}onChangeNode(){this.initNodeList(),this.executePing(!0)}checkCurrentNode(){let t=V.nodeId,r=re.m_dicNodes.get(t);if(!r||!r.url){this.testNodeDelays();return}(!V.currentNodeUrl||V.currentNodeUrl!==r.url)&&(V.currentNodeUrl=r.url),this.executePing(!0)}};Oo.M_B_FIRST_Open=!0,Oo.hasTestedNodesThisSession=!1,Oo=K([cF("pxhiJrX5SkKKvyFr8uIlNA")],Oo);var so=class{constructor(){}};so.GREEN="#2ac84b",so.YELLOW="#e8c833",so.RED="#e04343";ri();xt();Ot();var z1=class extends Laya.Box{};var{regClass:uF}=Laya,j1=class extends z1{constructor(){super()}onEnable(){L.on(A.EVENT_Game_Delay,this,this.onGameDelay),this.tf_delay&&(this.tf_delay.text="-",this.tf_delay.color&&(this.tf_delay.color="#FFFFFF"),this.img_delay&&(this.img_delay.skin="res/common/comm/img_xh1.png"))}onGameDelay(e){if(!this.tf_delay||!this.img_delay){console.error("NetDelaySign组件未完全初始化");return}var t=re.getGeneralValueById(6),r=t?t[0]:200,s=t?t[1]:500;e===1e4?(this.tf_delay.text="-",this.tf_delay.color="#FFFFFF",this.img_delay.skin="res/common/comm/img_xh1.png"):e>=9999?(this.tf_delay.text="Timeout",this.tf_delay.color=so.RED,this.img_delay.skin="res/common/comm/img_xh1.png",console.log("NetDelaySign显示超时状态")):e>s?(this.tf_delay.text=e+"ms",this.tf_delay.color=so.RED,this.img_delay.skin="res/common/comm/img_xh1.png"):e>r?(this.tf_delay.text=e+"ms",this.tf_delay.color=so.YELLOW,this.img_delay.skin="res/common/comm/img_xh2.png"):(this.tf_delay.text=e+"ms",this.tf_delay.color=so.GREEN,this.img_delay.skin="res/common/comm/img_xh3.png")}onDisable(){L.off(A.EVENT_Game_Delay,this,this.onGameDelay)}};j1=K([uF("AhgzWGWoRFetvSMsEOSkSg")],j1);var G1=class extends Laya.Box{};At();jt();Ot();Yt();xt();ri();var{regClass:pF}=Laya,W1=class extends G1{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.changeNode)}set dataSource(t){if(super.dataSource=t,!t)return;this.nodeItem=t,this.tf_country.text=z.getLanguage(t.name);let r=re.m_dicCountry.get(t.area);this.img_flag.skin=ge.getCountryIcon(r.id),t.dT!==void 0?this.setDelay(t.dT):this.tf_delay.text=""}changeNode(){if(V.nodeId=this.nodeItem.id,V.currentNodeUrl=this.nodeItem.url,console.log("新节点",V.nodeId),this.nodeItem){let t=this.nodeItem.getDisplayDelay();L.event(A.EVENT_Game_Delay,t)}L.event(A.EVENT_CHANGE_NODE)}setDelay(t){if(!this.tf_delay)return;this.nodeItem&&this.nodeItem.setDelay(t);let r=this.nodeItem?this.nodeItem.getDisplayDelay():t;r===1e4?(this.tf_delay.text="-",this.tf_delay.color="#FFFFFF",this.img_delay.skin="res/common/comm/img_xh1.png"):r>=9999?(this.tf_delay.text="Timeout",this.tf_delay.color="#FF0000",this.img_delay.skin="res/common/comm/img_xh1.png"):r>500?(this.tf_delay.text=r+"ms",this.tf_delay.color="#FF0000",this.img_delay.skin="res/common/comm/img_xh1.png"):r>200?(this.tf_delay.text=r+"ms",this.tf_delay.color="#FFFF00",this.img_delay.skin="res/common/comm/img_xh2.png"):(this.tf_delay.text=r+"ms",this.tf_delay.color="#00FF00",this.img_delay.skin="res/common/comm/img_xh3.png")}};W1=K([pF("PayHrcvHRHadv1wSa6XTzA")],W1);jt();var V1=class extends Laya.Box{};var{regClass:hF}=Laya,K1=class extends V1{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.playerDto=t,this.playerDto&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(t){parseInt(t)>0?this.img_head.skin=ge.getPlayerIcon(t):this.setImage(t)}async setCurrentOutPut(){if(!this.playerDto)return;let t=this.playerDto.icon;parseInt(t)>0?this.img_head.skin=ge.getPlayerIcon(t):this.setImage(t)}setImage(t){this.clearImage();var r=this;Laya.loader.load(t,Laya.Handler.create(this,()=>{r.destroyed||(this.img_head.skin=t)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(t=!0){this.clearImage(),super.destroy(t)}toDetail(){!this.playerDto||this.playerDto.needTip}};K1=K([hF("OPT5t2CoSmuYp2zUJWwUWA")],K1);jt();oi();Ot();var $1=class extends Laya.Dialog{};var{regClass:dF}=Laya,q1=class extends $1{constructor(){super();this.m_iLayerType=me.M_TOP;this.m_iPositionType=me.CENTER}onEnable(){Laya.Tween.to(this.backLayer,{alpha:1},200,Laya.Ease.linearIn),Li.startElasticPopupAnimation(this.allBox,150,1.1,100,.95,80),this.btn_ok.on(Laya.Event.CLICK,this,this.close)}setOpenData(t){if(t){console.log("收到升级通知:",t);let r=t.items[0],s=r.itemId,o=r.num,l=re.m_dicItems.get(s);this.img_icon.skin=ge.getItemIcon(l.icon),this.tf_num.text=`+${o}`}}onDisable(){}};q1=K([dF("gNPNtfC8SYW_NR7gSnpNlg")],q1);jt();Hn();var Y1=class extends Laya.Box{};var{regClass:mF}=Laya,Q1=class extends Y1{set dataSource(t){if(super.dataSource=t,t){let r=fi.getTokenDataBySyId(t);this.tf_data.text=r.symbol,this.img_coin.skin=ge.getCurrencyIcon(r.symbolId)}}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};Q1=K([mF("7DyPeY0BQZaSycl2nmV5qg")],Q1);var X1=class extends Laya.Box{};var{regClass:fF}=Laya,Nl=class extends X1{constructor(){super();this.isReady=!1;this.needChangeAni=!0;this.loop=!0;this.isInited=!1}onEnable(){this.sk=this.box_sk,this.sk.on(Laya.Event.READY,this,this.onSkReady),this.sk.loop=this.loop,console.log("onEnable: + this.animationName： "+this.animationName),this.animationName&&(this.sk.animationName=this.animationName),this.spineTemplet?(this.sk.templet=this.spineTemplet,console.log("onEnable: + this.spineTemplet ")):this.templateUrl?Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(t=>{this.destroyed||(this.sk.templet=t,console.log("this.templateUrl: "+this.templateUrl))}):this.animationName||(this.sk.animationName="animation"),this.isInited=!0}onSkReady(){this.isReady=!0,console.log("onSkReady this.visible: "+this.visible)}play(t,r,s,o,l,u,p){if(!this.isReady){console.log("动画未准备好，不能play");return}this.sk.play(t,r,s,o,l,u,p)}stop(){if(!this.isReady){console.log("动画未准备好，不能stop");return}this.sk.stop()}init(t,r="animation",s=!0){console.log("init: ",r,t),this.animationName=r,this.spineTemplet=t,this.loop=s,this.visible=!0,this.isInited&&(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=this.spineTemplet)}initUrl(t,r="animation",s=!0){console.log("initUrl: ",t),this.animationName=r,this.templateUrl=t,this.loop=s,this.visible=!0,this.isInited&&Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(o=>{this.destroyed||(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=o,console.log("this.templateUrl: "+this.templateUrl))})}onDisable(){Laya.Pool.recover(Nl.aniSkPrefab,this),this.box_sk.off(Laya.Event.READY,this,this.onSkReady),this.sk.templet=null}};Nl.aniSkPrefab="aniSkPrefab",Nl=K([fF("2rJV0EbMT9K2L6-6HOpDHw")],Nl);Vi();Yi();Fa();At();Yt();var Ba=class i{static toFixed(e,t){if(e.toString().indexOf(".")==-1)return e;{let r=e.toFixed(t);return parseFloat(r)}}static toFixedWithPercent(e,t,r="+"){let s;return e.toString().indexOf(".")==-1?s=r+e*100+"%":(t=t-2,t<0&&(t=0),s=r+(e*100).toFixed(t)+"%"),s}static getGoldStr(e){let t;return e>999999?t=parseInt(String(e/1e5))+"m":t=e,t}static numStringFormat(e){let t=e;return V.m_strLanguage==2?e.length>4&&(t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1 ")):t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1,"),t}static numSimple(e){let t=e,r=parseInt(parseInt(t)/1e3+"");return r>0?r+"k":i.numStringFormat(t)}static numStringFormat2(e){let t;if(e>999999)t=i.getNumStr(e,1e6,"M");else if(e>999)t=i.getNumStr(e,1e3,"K");else return e+"";return t}static getNumStr(e,t,r){return parseInt(Math.floor(e/t)+"")+r}static getTimeStr(e){let t;return e<3600?t=z.getLanguage(9024,Math.ceil(e/60)):e<3600*24?t=z.getLanguage(9025,Math.ceil(e/3600)):t=z.getLanguage(9025,Math.ceil(e/(3600*24))),t}static isInteger(e){return e%1===0}static isNumber(e){return typeof e=="number"}static formatNumber(e,t=8){return Number.isInteger(e)?e:parseFloat(e.toFixed(t))}static formatNumberStr(e,t=2){return Number.isInteger(e)?e:parseFloat(e.toFixed(t)).toString()}static filterNumFormat(e,t=2,r=!1,s=!1){if(!e)return e;if(e<1e3&&e>0)if(s){var o=Math.floor(Number(parseFloat(e*10**t+"").toPrecision(16)))/10**t;return parseFloat(o.toFixed(t)).toString()}else return parseFloat(e.toFixed(t)).toString();if(e==="0.00")return e;var l=[{value:1,symbol:""},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}];r&&(l=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}]);var u=/\.0+$|(\.[0-9]*[1-9])0+$/,p;for(p=l.length-1;p>0&&!(e>=l[p].value);p--);let h=(e/l[p].value).toString();return h.indexOf(".")>-1&&(t>0?h=h.substr(0,h.indexOf(".")+t+1):h=h.substr(0,h.indexOf(".")+t)),h.replace(u,"$1")+l[p].symbol}static fromWei(e,t,r=0){if(!e)return 0;let s=e.length-t+r;if(s<=0)return 0;let o=e.toString().slice(0,s);if(r){let l=o.length-r;if(l<=0){let u="0.";for(let p=0;p<Math.abs(l);p++)u+="0";o=u+o}else o=o.slice(0,o.length-r)+"."+o.slice(o.length-r)}return o}static getNumberSuffix(e){let t=parseInt(e,10);return isNaN(t)?e:(t%1e9).toString()}};var J1=class extends Laya.Box{};var{regClass:gF}=Laya,Z1=class extends J1{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(!this.itemVo)return;this.itemVo.id==Gt.TYPE_QUAN_MNT?(this.tf_quanId.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk):this.tf_quanId.visible=!1;let t=this.itemVo.itemItem;at.intance.hasOpenView(R.PveChoosePropsDialog)&&(this.txt_num.visible=!1),this.itemVo?(this.showAdd?this.txt_num.text=""+Ba.formatNumber(this.itemVo.newAddCnt,8):this.itemVo.num?this.txt_num.text=""+Ba.formatNumber(this.itemVo.num,8):this.txt_num.text=""+Ba.formatNumber(this.itemVo.newAddCnt,8),this.img_icon.skin=this.itemVo.iconURL,this.img_box.skin="gameIcon/items/itemBg/img_"+this.itemVo.quality+".png"):(this.txt_num.text="",this.img_icon.skin=null,this.img_box.skin="gameIcon/items/itemBg/img_0.png"),this.tf_isSch.visible=this.itemVo.isScholarship}};Z1=K([gF("LzxJYKybT_m3CJav3RyDmg")],Z1);At();oi();Ot();var ex=class extends Laya.Dialog{};var{regClass:bF}=Laya,tx=class extends ex{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER}setOpenData(t){if(t){this.itemVo=t;let r=this.itemVo.id,s=re.m_dicItems.get(r);this.item.dataSource=this.itemVo,this.tf_name.text=this.itemVo.itemName,s?(this.txt_type.text=z.getLanguage(6060)+z.getLanguage(s.type),this.txt_desc.text=z.getLanguage(s.des),this.txt_desc.visible=s.des!==0):(this.txt_type.text="",this.txt_desc.text="")}}removeEvent(){}};tx=K([bF("or8jNdIhRpSbAG2JBhH-wA")],tx);oi();fu();var ix=class extends Laya.Dialog{};mn();var{regClass:yF}=Laya,rx=class extends ix{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER}onEnable(){wt.playSoundByName(wt.soundName32)}setOpenData(t){t&&(this.reward=t);var r=[],s=this.reward;s.forEach(h=>{if(h.itemId&&h.itemId>0){var f=new gn(h.itemId);f.newAddCnt=h.num,h.itemId==3011&&(f.itemItem.icon=h.itemId),r.push(f)}});var o=this.list_reward.spaceX,l=this.list_reward.itemTemplate.width,u=r.length;this.list_reward.repeatX=u;var p=u*l+o*(u-1);this.list_reward.width=p,this.list_reward.x=this.width-p>>1,this.list_reward.array=r}};rx=K([yF("xwYUFnd4S3uJGIJSjjbRag")],rx);var nx=class extends Laya.Scene{};oi();Vi();Rr();Yi();pf();ri();xt();En();ur();To();At();jt();ws();cn();mn();Yt();yn();xr();cr();On();Ot();Pr();yi();Kt();var nk=class i{constructor(){this.comIdMap=new Map}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){this.comIdMap.set(x.snake.socket.MessageType.MSG_PLAYER_OPR,"CS_"),this.comIdMap.set(x.snake.socket.MessageType.MSG_AI_ENTER,"CS_"),this.comIdMap.set(x.snake.socket.MessageType.MSG_NOTICE_ENTER,"SS_");for(let t in x.snake.socket.MessageType)if(isNaN(Number(t))){let r=x.snake.socket.MessageType[t],s="";var e=this.comIdMap.get(r);if(e)if(!e.endsWith("_"))s=e;else{let l=this.comIdMap.get(r),u=t.substring(4);s=l+u}else{let l="SC_",u=t.substring(4);s=l+u}let o=x.snake.socket[s];o&&Laya.ClassUtils.regClass(r+"",o)}}},UR=nk.getInstance();var{regClass:_F}=Laya,yu=class extends nx{constructor(){super(...arguments);this.isLogout=!1;this.m_nProgress=0}onAwake(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),Laya.loader.load(["res/loading/progress_load1.png","res/loading/progress_load1$bar.png"]).then(()=>{this.createUI(),this.initBasic()})}onError(t){console.log("加载失败: "+t)}createUI(){wt.init(),wt.playMusicByName(wt.soundName_bg,".mp3"),L.on(A.EVENT_BACK_TO_LOGIN,this,this.backToLogin),L.on(A.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),L.on(A.EVENT_ENTER_MAIN,this,this.loginCallBack),this.btn_teleLogin.on(Laya.Event.CLICK,this,this.teleLogin),z.FGM_GetLanguage();var t=getGameVersion();this.txtLoad.text=t,console.log("VERSION: "+t);let r=new uo;r.ID=1,r.Event="加载版本信息 "+t,Wt.sendCustumEvent(1,null,r)}initBasic(){UR.init(),me.instence.init(),ge.init(),Qt.initParms(),bt.init(),at.intance.init(),this.initLoad()}initLoad(){this.onAssetLoaded()}onAssetLoaded(){this.loadingProcess=.05,this.m_nProgress=.05,Li.startRotationAnimation(this.img_circle,2e3,!0),Laya.timer.once(500,this,()=>{this.loadFirstBatch()});let t=Laya.timer.loop(1e3,this,this.onLoading,[this.m_nProgress])}loadFirstBatch(){this.m_nProgress=.15,this.loadingProcess=.15,Laya.timer.once(800,this,()=>{this.loadSecondBatch()})}loadSecondBatch(){this.m_nProgress=.3,this.loadingProcess=.3,Laya.timer.once(1e3,this,()=>{this.loadThirdBatch()})}loadThirdBatch(){V.init(),this.m_nProgress=.5,this.loadingProcess=.5,Laya.timer.once(1e3,this,()=>{this.loadFinalBatch()})}loadFinalBatch(){let t=new uo;t.ID=3,t.Event="加载资源信息",Wt.sendCustumEvent(3,null,t),this.m_nProgress=.8,this.loadingProcess=.8}set loadingProcess(t){if(!(this.mcProcess&&t<this.mcProcess.value)){t>1&&(t=1),t<.05&&(t=.05),this.mcProcess.value=t,this.txtProcess.text=Math.floor(t*100)+"%";var r=t*this.mcProcess.width-70;r<0&&(r=0)}}backToLogin(){Laya.timer.clear(this,this.onLoading),this.m_nProgress=0,Laya.loader.load(ge.m_arrInitResource,Laya.Handler.create(this,this.getLoginData),Laya.Handler.create(this,this.onLoading2,null,!1))}getLoginData(){Wt.sendCustumEvent(7),this.readyInitGame()}readyInitGame(){if(this.isLogout){L.event(A.EVENT_LOADING_SUC);return}this.mcProcess&&(this.loadingProcess=.9,Laya.timer.once(500,this,()=>{this.loadingProcess=1,Laya.timer.once(300,this,()=>{re.init(),ie.isWhite?this.loginGame():this.onGetNotice()})}))}async onGetNotice(){Laya.loader.maxLoader=50,this.loginGame()}async loginGame(){L.event(A.EVENT_LOADED_COMPLETE),await mt.init(),await mt.dappLogin(),$e.initMove()}async loginGameEnd(t){if(ci.showLoading(!0),Wt.sendCustumEvent(8),Wt.sendCustumEvent(22),!t){at.intance.openModule(R.NoServerView);return}t.loginState==1?(console.log("have no regist"),Wt.sendCustumEvent(23),at.intance.openModule(R.CreateLoginView)):(Wt.sendCustumEvent(30),t.playerDto?(Wt.sendCustumEvent(31),console.log("registed "+t.playerDto.name),V.playerDto=t.playerDto,this.loginCallBack()):(Wt.sendCustumEvent(32),console.log("getRegisted error"),et.notice(z.getLanguage(29))))}async loginCallBack(){console.log("loginCallBack++++++++++++++++++++++++++++++++"),ie.vType==2&&ie.Debug==0&&(Laya.Browser.window.console.log=function(){}),V.initData(),ci.hideLoading();var t=V.playerDto;if(t.roomId>0){let r=await nr.requestPost("wxgame/room/info",{roomId:t.roomId});$e.roomDto=r.roomDto,r.roomDto?t.roomState==10?ft.initSocket():at.intance.openModule(R.EnterRoomView):et.notice(z.getLanguage(29))}else ye.logs("进入主界面",5),Wt.sendCustumEvent(33),Li.stopCircleAnimation(this.img_circle),bt.setCurrentScene(Re.M_SCENE_MAIN)}onLoading(t){let r=this.mcProcess?this.mcProcess.value:0,s=.01;this.m_nProgress<.15?s=.02:this.m_nProgress<.3?s=.015:this.m_nProgress<.5?s=.01:this.m_nProgress<.8?s=.005:s=.001,this.m_nProgress+=s,this.m_nProgress<r&&(this.m_nProgress=r),this.m_nProgress>.8&&(this.m_nProgress=.8),this.mcProcess&&t>this.mcProcess.value&&(this.loadingProcess=this.m_nProgress)}onLoading2(t){this.mcProcess&&(this.loadingProcess=0+t*1.1)}removeEvent(){L.off(A.EVENT_BACK_TO_LOGIN,this,this.backToLogin),L.off(A.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),L.off(A.EVENT_ENTER_MAIN,this,this.loginCallBack)}teleLogin(){console.log("teleLogin++++++++++++++++++++++++++++++++"),mt.connectTonWallet()}};yu.m_iState=1,yu=K([_F("xmaaYG8AQ1yC07pr_JvyPA")],yu);oi();var sx=class extends Laya.Box{};var{regClass:xF}=Laya,ox=class extends sx{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER}onEnable(){console.log("OpenScene onEnable："+this.m_strName)}getName(){console.log(this.m_strName)}onDisable(){}};ox=K([xF("sQS5mrqRQLWcBk-SgfBGJw")],ox);var ax=class extends Laya.Box{};Ot();jt();var{regClass:vF}=Laya,lx=class extends ax{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toRead)}set dataSource(t){if(super.dataSource=t,this.rewardItem=t,!this.rewardItem){this.visible=!1;return}let r=re.m_dicItems.get(this.rewardItem.itemId);if(!r){this.visible=!1;return}r.icon<1e3?this.img_icon.skin=ge.getSnakeIcon(r.icon):this.img_icon.skin=ge.getItemIcon(r.icon),this.tf_num.text=`x${this.rewardItem.num}`}toRead(){}};lx=K([vF("cVATpJOeQgeVQnaU8vno-g")],lx);oi();xt();Kt();Pr();Rr();dn();var cx=class extends Laya.Scene{};cr();At();Ei();Ni();var{regClass:IF}=Laya,ux=class extends cx{onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onOpened(t){}onEnable(){this.mailList.visible=!1,this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),L.on("msg_"+x.snake.socket.MessageType.MSG_MAIL_LIST,this,this.onGetRoleInfo),L.on("msg_"+x.snake.socket.MessageType.MSG_MAIL_DELETE,this,this.onDeleteResult),L.on("msg_"+x.snake.socket.MessageType.MSG_MAIL_CHECK,this,this.onReadResult),Li.startJellyScaleAnimation(this.tf_tittle),this.requestAllMailData(),this.mailList.selectHandler=new Laya.Handler(this,this.handleSelectMail),this.btn_delete.on(Laya.Event.CLICK,this,this.deleteMail),this.btn_receive.on(Laya.Event.CLICK,this,this.onReceiveClick),L.on("msg_"+x.snake.socket.MessageType.MSG_MAIL_GET,this,this.onMailGetBack)}requestAllMailData(t=1){let r=x.snake.socket.MessageType.MSG_MAIL_LIST;De.send(r)}onGetRoleInfo(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_MAIL_LIST);r==x.snake.socket.MessageCode.SYS_NORMAL&&s&&(this.mailList.array=s.mail,this.mailList.visible=!0,this.mailData=s.mail,this.checkReadNum(),s.mail.length>0?(this.box_1.visible=!1,this.box_2.visible=!0,this.mailList.selectedIndex=0):(this.box_1.visible=!0,this.box_2.visible=!1))}checkReadNum(){let r=`${this.mailData.filter(s=>s.read===!0).length}/${this.mailData.length}`;this.tf_read.text=z.getLanguage(20,r)}handleSelectMail(t){this.mailIndex=t;let r=this.mailData[t];this.tf_des.text=r.content;let s=xi.formatDayAndTime(r.sendTime);if(this.tf_time.text=`${s.date} ${s.time}`,this.tf_title.text=r.title,this.tf_from.text=z.getLanguage(21,r.sendName),r.items&&r.items.length>0?(this.rewardList.array=r.items,this.rewardList.visible=!0,this.btn_receive.visible=!r.get):(this.rewardList.visible=!1,this.btn_receive.visible=!1),r.read==!1){let o=x.snake.socket.MessageType.MSG_MAIL_CHECK,l=x.snake.socket.CS_MAIL_CHECK.fromObject({mailId:r.mailId});De.send(o,l)}}onDeleteResult(t,r){r===x.snake.socket.MessageCode.SYS_NORMAL&&(this.mailList.array=this.mailData,this.mailData.length===0&&(this.box_1.visible=!0,this.box_2.visible=!1),et.notice(z.getLanguage(69)),this.mailData.splice(this.mailIndex,1),this.mailList.array=this.mailData,this.checkReadNum(),this.handleSelectMail(this.mailIndex))}onReadResult(t,r){if(r===x.snake.socket.MessageCode.SYS_NORMAL){let s=this.mailData[this.mailIndex];this.mailList.array=this.mailData,s.read=!0,this.checkReadNum()}}deleteMail(){if(this.mailIndex>=0&&this.mailData&&this.mailData.length>0){let t=this.mailData[this.mailIndex],r=x.snake.socket.MessageType.MSG_MAIL_DELETE,s=x.snake.socket.CS_MAIL_DELETE.fromObject({mailId:t.mailId});De.send(r,s)}}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}setToMainScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}onReceiveClick(){if(this.mailIndex==-1)return;let t=x.snake.socket.MessageType.MSG_MAIL_GET,r=this.mailData[this.mailIndex],s=x.snake.socket.CS_MAIL_GET.fromObject({mailId:r.mailId});De.send(t,s)}onMailGetBack(t,r){if(r==x.snake.socket.MessageCode.SYS_NORMAL){et.notice(z.getLanguage(70));var s=Pe.getMsgBody(t,x.snake.socket.SC_MAIL_GET);console.log(s);let o=this.mailList.array.find(l=>l.mailId===s.mailId);o&&(o.get=!0,this.handleSelectMail(this.mailIndex))}}onDisable(){L.off("msg_"+x.snake.socket.MessageType.MSG_MAIL_LIST,this,this.onGetRoleInfo),L.off("msg_"+x.snake.socket.MessageType.MSG_MAIL_DELETE,this,this.onDeleteResult),L.off("msg_"+x.snake.socket.MessageType.MSG_MAIL_CHECK,this,this.onReadResult),L.off("msg_"+x.snake.socket.MessageType.MSG_MAIL_GET,this,this.onMailGetBack),this.removeEvent(),this.btn_delete.off(Laya.Event.CLICK,this,this.deleteMail),this.btn_receive.off(Laya.Event.CLICK,this,this.onReceiveClick)}};ux=K([IF("25JYfnFtTzq1ju1OR6_GLQ")],ux);dn();var px=class extends Laya.Box{};var{regClass:SF}=Laya,hx=class extends px{constructor(){super()}onEnable(){}set dataSource(t){super.dataSource=t,this.mailItem=t,this.mailItem&&(this.tf_title.text=this.mailItem.title,this.tf_from.text=this.mailItem.sendName,this.img_red.visible=!this.mailItem.read,this.tf_time.text=xi.formatTimeAgoFromTimestamp(this.mailItem.sendTime))}};hx=K([SF("3h2PsGTIQV6ilXcpYeJ0cQ")],hx);Co();var dx=class extends Laya.Box{};var{regClass:wF}=Laya,on=class extends dx{init(e,t,r=28){var s,o;switch(o=bi.getRandInRound(-30,30),t?s=on.TYPE_Kill:s=on.TYPE_Normal,t?this.pos(o,-180):this.pos(o,-110),this.alpha=1,this.scale(1,1),this.tf_damage.visible=!1,this.box_crit.visible=!1,s){case on.TYPE_Normal:this.tf_damage.text="+"+e,this.showNormalDamageEffect();break;case on.TYPE_Kill:this.showCriticalDamageEffect();break}}showNormalDamageEffect(){this.tf_damage.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,this.onComplete))}showCriticalDamageEffect(){this.box_crit.visible=!0,this.scale(.2,.2),Laya.Tween.to(this,{scaleX:1.3,scaleY:1.3,alpha:1,y:this.y-70},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1,alpha:0},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}))}onComplete(){this.removeSelf()}onDisable(){Laya.Pool.recover("damageNumber",this)}};on.WHITE="#FFFFFF",on.ORANGE="#FFA500",on.RED="#FF0000",on.GREEN="#119c09",on.BLUE="#78cefd",on.TYPE_Normal="Normal",on.TYPE_Kill="Kill",on=K([wF("nHp6WKzZRIWvyhguidEfqg")],on);var mx=class extends Laya.Dialog{};xr();var{regClass:kF}=Laya,fx=class extends mx{constructor(){super()}onEnable(){this.list.visible=!1;var e=$e.msgEndbody,t=e.token;this.list.renderHandler=new Laya.Handler(this,(r,s)=>{r.setDataIndex(s)}),this.list.array=t,this.list.visible=!0,!t||t.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};fx=K([kF("JH3DtUPTS_2FR6dTzhLHMw")],fx);At();jt();Ot();dn();var gx=class extends Laya.Box{};var{regClass:EF}=Laya,bx=class extends gx{constructor(){super()}addEvent(){}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.setData(e),this.addEvent()}setData(e){var t=e.split(","),r=t[1],s=t[2],o=t[3],l=t[4];this.tf_time.text=xi.formatTimeStamp(Number.parseFloat(t[0]),"HH:MM:SS"),this.img_country.skin=ge.getCountryIcon(r),this.tf_nickName.text=s;let u=re.m_dicItems.get(o),p=z.getLanguage(u.name);this.tf_token.text=l+" "+p}setDataIndex(e){this.bg.skin=e%2===0?"res/common/comm/img_wzbg_1.png":"res/common/comm/img_wzbg_2.png"}};bx=K([EF("po6_Uf6sTlaC-xEazLOk5Q")],bx);oi();Rr();ur();fu();Kt();$r();var yx=class extends Laya.Dialog{};At();cn();mn();xr();Pr();to();xt();Ni();Al();Hn();r_();Vi();Yi();Yt();var{regClass:LF}=Laya,_x=class extends yx{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_PANEL;this.m_iPositionType=me.CENTER}onEnable(){L.on("msg_"+x.snake.socket.MessageType.MSG_AI_END,this,this.onAiEnd),wt.playSoundByName(wt.soundName_win),this.btn_fightAgain.on(Laya.Event.CLICK,this,this.goFightAgain),this.btn_home.on(Laya.Event.CLICK,this,this.setToAirdropScene),this.btn_help.on(Laya.Event.CLICK,this,this.onNext),Wt.sendCustumEvent(43)}onHelp(){ye.commTipWithYes(z.getLanguage("HELP"))}onNext(){this.setToAirdropScene()}setToAirdropScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}setOpenData(t){var r=t[0];this.list_reward.visible=!1;var s,o;this.list_reward.vScrollBarSkin="",this.roomGameOverPush=$e.msgEndbody,this.tf_rank.text=`${this.roomGameOverPush.rank}`,this.tf_score.text=`${this.roomGameOverPush.score}`,this.fontClip_kill.getComponent(Bo).startIncrement(this.roomGameOverPush.kills,1,1),this.fontClip_length.getComponent(Bo).startIncrement(this.roomGameOverPush.length,1,1),this.fontClip_challengeDuration.getComponent(Bo).startIncrement(this.roomGameOverPush.alive,1,3),r==Ke.MATCH_TYPE_PVP?(s=this.roomGameOverPush.items,o=this.roomGameOverPush.token,this.onSetReward(s,o)):Pn.sendAiEnd(this.roomGameOverPush.kills,this.roomGameOverPush.score);let h=fi.getTokenDataBySyId(10);console.log("tokenData===========>",h)}onSetReward(t,r){var s=[],o=new ht;t&&t.length>0&&t.forEach(g=>{var b=o.get(g.itemId);b?b.newAddCnt=b.newAddCnt+g.num:(b=new gn(g.itemId),b.newAddCnt=g.num,s.push(b),o.set(g.itemId,b))}),r&&r.length>0&&r.forEach(g=>{var b=g.split(","),v=b[1],w=b[2],k=b[3],E=b[4],F=parseInt(k),O=parseFloat(E),H=o.get(F);H?H.newAddCnt=H.newAddCnt+O:(H=new gn,H.type=ar.TYPE_TOKEN,H.m_iId=F,H.newAddCnt=O,s.push(H),o.set(F,H))});var l=this.list_reward.spaceX,u=this.list_reward.itemTemplate.width,p=s.length,h=p*u+l*(p-1);this.list_reward.repeatX=p,this.list_reward.width=h,this.list_reward.x=this.box_outside.width-this.list_reward.width>>1,this.list_reward.array=s,this.list_reward.visible=!0,!this.list_reward.array||this.list_reward.array.length<=0?this.noDataBox1.visible=!0:this.noDataBox1.visible=!1;let f=-1;this.list_reward.selectedIndex=f}onAiEnd(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_AI_END),o=s,l=o.items;this.onSetReward(l,[])}goFightAgain(){Ke.arenaType==Ke.ARENA_TYPE_PVP?at.intance.openModule(R.JoinRoomDialog,1):Ke.arenaType==Ke.ARENA_TYPE_JULEBU?V.playerDto.club!==""&&V.playerDto.club!==void 0?bt.setCurrentScene(Re.M_SCENE_CLUB):at.intance.openModule(R.CreateClubDialog):Ke.arenaType==Ke.ARENA_TYPE_PVE&&Ma.goAiArenaScene()}onDisable(){this.removeEvent()}removeEvent(){L.off("msg_"+x.snake.socket.MessageType.MSG_AI_END,this,this.onAiEnd)}};_x=K([LF("y-nP_lRrQVef9uttVJ0rDw")],_x);to();yd();xr();var xx=class extends Laya.Box{};var{regClass:TF}=Laya,vx=class extends xx{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){this.snake=t,!(!this.snake||!this.snake.tag)&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.snake.tag&&(this.tf_rank.text=this.snake.rankNum+".  "+Ls.abbreviateString(this.snake.tag.userName));var t=0;$e.matchDto.matchType==Ke.MATCH_TYPE_PVE?t=this.snake.getScore(!1):t=this.snake.getScore(!0),this.snake.rankNum==1?this.tf_kill.text=`<font><img src='res/match2/img_phb_icon2.png'/>${t}</font>`:this.tf_kill.text=`<font>${t}</font>`,this.snake.isSelf?(this.tf_rank.color="#ffe155",this.tf_kill.color="#ffe155"):(this.tf_rank.color="#ffffff",this.tf_kill.color="#ffffff")}};vx=K([TF("XTVFXeI_R768e0Elv_ePAA")],vx);At();oi();var Ix=class extends Laya.Dialog{};var{regClass:CF}=Laya,Sx=class extends Ix{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=me.M_PANEL;this.m_iPositionType=me.CENTER;this.canClose=!1}onEnable(){this.tf_tittle.text=z.getLanguage(47)}onDisable(){}};Sx=K([CF("8HZEMq_0TP2txNQ9o3uv3w")],Sx);Vi();Yi();Fa();r_();var wx=class extends Laya.Box{};var{regClass:AF}=Laya,kx=class extends wx{constructor(){super();this.showAdd=!1;this.isAddEvent=!1;this.oriScale=1}onEnable(){this.oriScale=this.knapsackItem.img_icon.scaleX}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(this.itemVo)if(this.itemVo.id==Gt.TYPE_REWARD_TOKEN)this.img_tokens.visible=!0,this.knapsackItem.visible=!1;else{this.img_tokens.visible=!1,this.knapsackItem.visible=!0,this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=this.itemVo;var t=this.oriScale;this.itemVo.type==ar.TYPE_TOKEN&&(t=this.oriScale*.8),this.knapsackItem.img_icon.scale(t,t)}}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.id==Gt.TYPE_REWARD_TOKEN?at.intance.openModule(R.MatchEndRewardTokensDialog):this.itemVo.type===ar.TYPE_Equipment?at.intance.openModule(R.EquipDetailDialog,this.itemVo):at.intance.openModule(R.KnapsackTipDialog,this.itemVo))}};kx=K([AF("WXpxCvqlQ2mKdcJCYlqOeg")],kx);jt();var Ex=class extends Laya.Box{};var{regClass:MF}=Laya,Lx=class extends Ex{constructor(){super();this.isBig=!1}set dataSource(t){super.dataSource=t,this.skillItem=t,this.skillItem&&(this.txt_num.text="",this.img_icon.skin=ge.getMatchSkillIcon(this.skillItem.icon))}};Lx=K([MF("iwuFUCOEQRyOjxpy6IkQ2Q")],Lx);ri();xt();var Tx=class extends Laya.Button{};var{regClass:RF}=Laya,Cx=class extends Tx{constructor(){super();this.isAddEvent=!1;this.isCanClick=!0;this.skillCooldown=5e3;this.thisGlobalCooldown=1e4;this.globalCooldown=1e4;this.remainingSkillCooldown=0;this.remainingGlobalCooldown=0;this.reduceCooldown=0}onEnable(){this.addEvent()}addEvent(){this.isAddEvent||(L.on(A.EVENT_CLICK_NUM,this,this.onNumberClick),L.on(A.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),L.on(A.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),L.on(A.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),this.isAddEvent=!0,this.on(Laya.Event.CLICK,this,this.onSkillButtonClick),this.on(Laya.Event.MOUSE_UP,this,this.onSkillButtonUp))}onNumberClick(t){t==this.keyNum&&this.onSkillButtonClick(null)}set dataSource(t){super.dataSource=t,this.skillItem=t[0],this.itemItem=t[1],this.equipPos=t[2],this.count=t[3],this.skillItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.skillItem&&(this.skillIconItem.isBig=this.skillItem.icon=="1001",this.skillIconItem.dataSource=this.skillItem,this.itemItem?(this.txt_num.visible=!0,this.updateCount(),this.skillCooldown=this.itemItem.cd*1e3):(this.txt_num.visible=!1,this.skillCooldown=this.skillItem.cd),this.thisGlobalCooldown=this.skillItem.commCd,Laya.timer.frameLoop(1,this,this.updateCooldown))}onSkillButtonUp(t){t&&t.stopPropagation(),sn.clearClickFilter(this)}onSkillButtonClick(t){t&&t.stopPropagation()}updateSkillCooldown(t){this.remainingSkillCooldown=t}updateItemRemainCooldown(t){var r=t[0];console.log("updateItemRemainCooldown _skillId: "+r),this.itemItem&&r==this.skillItem.id&&(this.count=t[1],this.updateCount(),this.updateSkillCooldown(this.skillCooldown))}updateCount(){this.txt_num.text=this.count+"",this.disabled=!this.count}updateReduceCooldown(t,r){console.log("updateReduceCooldown skillType: "+t),this.skillItem&&t==this.skillItem.type&&(this.reduceCooldown=this.skillCooldown*r)}updateGlobalCooldown(t){this.itemItem||(this.globalCooldown=t,this.remainingGlobalCooldown=t)}updateCooldown(){if(this.remainingSkillCooldown+this.reduceCooldown>0){this.remainingSkillCooldown-=Laya.timer.delta;let t=(this.remainingSkillCooldown+this.reduceCooldown)/1e3;this.txt_time.text=t.toFixed(1),this.updateCooldownMask(this.skillCooldownMask,(this.remainingSkillCooldown+this.reduceCooldown)/this.skillCooldown,"#000000"),this.img_djs.visible=!0,this.txt_time.visible=!0}else this.img_djs.visible=!1,this.txt_time.visible=!1;this.remainingGlobalCooldown+this.reduceCooldown>0?(this.remainingGlobalCooldown-=Laya.timer.delta,this.updateCooldownMask(this.globalCooldownMask,(this.remainingGlobalCooldown+this.reduceCooldown)/this.globalCooldown,"#00000036"),this.globalCooldownMask.visible=!0):this.globalCooldownMask.visible=!1,this.skillIconItem.gray=this.remainingSkillCooldown+this.reduceCooldown>0||this.remainingGlobalCooldown+this.reduceCooldown>0}updateCooldownMask(t,r,s){let o=this.width/2,l=this.width/2,u=this.height/2;t.graphics.clear(),t.graphics.drawPie(l,u,o,-90+360*(1-r),270,s)}onDisable(){L.off(A.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),L.off(A.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),L.off(A.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),L.offAllCaller(this),Laya.timer.clearAll(this)}};Cx=K([RF("x6t-z1VuR52yXWju0qxGBg")],Cx);cn();var Ax=class extends Laya.Dialog{};var{regClass:BF}=Laya,Mx=class extends Ax{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink)}onLink(t){console.log("点击了超链接："+t)}onRefresh(){Wt.reload()}setOpenData(t){if(t){var r=t[0];if(t.length>2?(this.alertTitle.text=t[1],this.alertDesc.text=t[2]):this.alertDesc.text=t[1],r==1){this.canClose=!1;var s=this.getChildByName("close");s.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1;this.alertDesc.height=this.alertDesc.textField.textHeight+20}}onDisable(){}close(t){this.canClose&&super.close(t)}};Mx=K([BF("xATCTfSDSkaGtuYn669ofQ")],Mx);var Rx=class extends Laya.Dialog{};var{regClass:DF}=Laya,Bx=class extends Rx{constructor(){super()}onEnable(){this.img_show.on(Laya.Event.CLICK,this,this.close)}setOpenData(e){e&&(this.img_show.skin=e)}onDisable(){}};Bx=K([DF("RUMV5hpfRdCRzhO9yBDCzg")],Bx);At();cn();var Dx=class extends Laya.Dialog{};var{regClass:NF}=Laya,Nx=class extends Dx{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink),this.btn_left.on(Laya.Event.CLICK,this,this.onChangePage,[!1]),this.btn_right.on(Laya.Event.CLICK,this,this.onChangePage,[!0])}onLink(t){console.log("点击了超链接："+t)}onRefresh(){Wt.reload()}setOpenData(t){if(t){var r=t[0],s=t[1];if(this.list=s.list,this.pageNo=1,this.pageTotal=this.list.length,this.pageTotal<2&&(this.box_page.visible=!1),this.updatePageList(),r==1){this.canClose=!1;var o=this.getChildByName("close");o.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1}}async onChangePage(t){if(t)this.pageNo++;else{if(this.pageNo<=1)return;this.pageNo--}this.updatePageList()}updatePageList(){this.txt_page.text=this.pageNo+"/"+this.pageTotal,this.btn_left.disabled=this.pageNo<=1,this.btn_right.disabled=this.pageNo>=this.pageTotal,this.setNoticeDetail()}setNoticeDetail(){if(this.pageNo){var t=this.list[this.pageNo-1];t&&(this.alertTitle.text=z.getMultiLan(t.title),this.alertDesc.text=z.getMultiLan(t.contents))}}onDisable(){}close(t){this.canClose&&super.close(t)}};Nx=K([NF("iB7UvqEcQ1GFKaVEIy6Bmw")],Nx);var Ox=class extends Laya.Box{};var{regClass:OF}=Laya,Fx=class extends Ox{};Fx=K([OF("ON5bkSuKSE2gwPDUnRGmrw")],Fx);var Px=class extends Laya.Box{};var{regClass:FF}=Laya,Ux=class extends Px{onEnable(){}notice(e){this.zOrder=1e7;let t=e;this.label_tf.text=t,this.label_tf.x=68,this.image_bg.width=68*2+this.label_tf.textField.textWidth,t.length/45>1&&(this.image_bg.height=this.label_tf.textField.textHeight+55),this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}onDisable(){console.log("txtNotice recover"),Laya.Pool.recover("txtNotice",this)}};Ux=K([FF("Nm27xWbYSG6mj-EXqPOZ_A")],Ux);At();jt();En();cr();var Hx=class extends Laya.Box{};var{regClass:PF}=Laya,zx=class extends Hx{constructor(){super()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.copyAddress)}set dataSource(t){if(super.dataSource=t,!t){this.visible=!1;return}this.tf_address.text=Qt.shortenString(t.addr,6,4),this.PlayerIcon.headSkin=t.icon,this.tf_name.text=Qt.fitTextToLabel(t.userName,this.tf_name),this.tf_num.text=t.num,this.address=t.addr;let r=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=r%2===1,this.tf_rank.text=`${r+1}`,this.img_flag.skin=ge.getCountryIcon(t.country),r<3?(this.img_title.visible=!0,this.tf_rank.visible=!1,this.img_title.skin=`res/rank/img_b${r+1}.png`):(this.img_title.visible=!1,this.tf_rank.visible=!0)}copyAddress(){this.address&&(doCopy(this.address),et.notice(z.getLanguage(19)))}};zx=K([PF("ILpWxZ9qRRiahqxWqEMA9g")],zx);oi();Pr();Rr();var jx=class extends Laya.Scene{};Kt();Ei();xt();Ni();var{regClass:UF}=Laya,Gx=class extends jx{constructor(){super(...arguments);this.currentTabIndex=0;this.allRankData=new Map}onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onEnable(){this.RankList.visible=!1;for(let t=0;t<3;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),Li.startJellyScaleAnimation(this.tf_tittle),L.on("msg_"+x.snake.socket.MessageType.MSG_REQUEST_RANK,this,this.onRankListReceived),this.onTabClick(0)}setTab(t){for(let r=1;r<3;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}setToMainScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<3;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),L.off("msg_"+x.snake.socket.MessageType.MSG_REQUEST_RANK,this,this.onRankListReceived)}onTabClick(t){this.currentTabIndex=t;let r=3,s="res/common/comm/img_tab1.png",o="res/common/comm/img_tab2.png",l="#427030",u="#1449cb";for(let p=0;p<r;p++){let h=this[`tab${p}`],f=h.getChildByName("tf_tit"),g=t===p;switch(h.skin=g?s:o,f.strokeColor=g?l:u,t){case 0:this.box_daily.visible=!0,this.box_dailybest.visible=!1,this.box_over.visible=!1;break;case 1:this.box_daily.visible=!1,this.box_dailybest.visible=!0,this.box_over.visible=!1;break;case 2:this.box_daily.visible=!1,this.box_dailybest.visible=!1,this.box_over.visible=!0;break}if(g){let b=t+1;if(this.allRankData.has(b)){let v=this.allRankData.get(b);this.displayRankData(t,v)}else this.requestRankData(b)}}}requestRankData(t){let r=x.snake.socket.MessageType.MSG_REQUEST_RANK,s=x.snake.socket.CS_RANK_LIST.fromObject({type:t});De.send(r,s)}onRankListReceived(t){let r=Pe.getMsgBody(t,x.snake.socket.SC_RANK_LIST);if(console.log(r),!r||!r.rank||r.rank.length===0){this.showEmptyRankTip(),this.noDataBox.visible=!0;return}else this.RankList.visible=!0,this.noDataBox.visible=!1;this.allRankData.set(this.currentTabIndex+1,r.rank),this.displayRankData(this.currentTabIndex,r.rank)}displayRankData(t,r){this.RankList.array=r,this.RankList.visible=!0,this.RankList.refresh(),this.RankList.scrollTo(0)}clearRankList(){[this.box_daily.getChildByName("list_rank"),this.box_dailybest.getChildByName("list_rank"),this.box_over.getChildByName("list_rank")].forEach(r=>{r&&(r.array=[],r.refresh())})}showEmptyRankTip(){this.RankList.visible=!1,this.noDataBox.visible=!0}onDisable(){this.removeEvent()}};Gx=K([UF("kxqXjP8sR7OnW67fK0960g")],Gx);oi();Pr();mn();Rr();Yt();Ot();var Wx=class extends Laya.Scene{};var{regClass:HF}=Laya,Vx=class extends Wx{onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onOpened(t){}onEnable(){for(let t=0;t<3;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_music_plus.on(Laya.Event.CLICK,this,this.onClickMusicPlus,[!0]),this.btn_music_reduce.on(Laya.Event.CLICK,this,this.onClickMusicPlus,[!1]),this.btn_sound_plus.on(Laya.Event.CLICK,this,this.onClickSoundPlus,[!0]),this.btn_sound_reduce.on(Laya.Event.CLICK,this,this.onClickSoundPlus,[!1]),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_privacy.on(Laya.Event.CLICK,this,this.onPrivacyClick),this.btn_service.on(Laya.Event.CLICK,this,this.onServiceClick),this.initSettingData(),this.initLanguageData(),Li.startJellyScaleAnimation(this.tf_tittle)}setTab(t){for(let r=1;r<3;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}initSettingData(){let t=wt.getMusicVolume();this.prog_music.value=t;let r=wt.getSoundVolume();this.prog_sound.value=r}setToMainScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}onTabClick(t){let s="res/common/comm/img_tab1.png",o="res/common/comm/img_tab2.png",l="#427030",u="#1449cb";for(let p=0;p<3;p++){let h=this[`tab${p}`],f=h.getChildByName("tf_tit"),g=t===p;switch(h.skin=g?s:o,f.strokeColor=g?l:u,t){case 0:this.box_genred.visible=!0,this.box_language.visible=!1,this.box_saciel.visible=!1;break;case 1:this.box_genred.visible=!1,this.box_language.visible=!0,this.box_saciel.visible=!1;break;case 2:this.box_genred.visible=!1,this.box_language.visible=!1,this.box_saciel.visible=!0;break}}}onClickMusicPlus(t){let r=wt.getMusicVolume(),s=.1;t?r=Math.min(1,r+s):r=Math.max(0,r-s),this.prog_music.value=r,wt.setMusicVolume(r)}onClickSoundPlus(t){let r=wt.getSoundVolume(),s=.1;t?r=Math.min(1,r+s):r=Math.max(0,r-s),this.prog_sound.value=r,wt.setSoundVolume(r)}initLanguageData(){let t=re.m_dicLanguage.values;if(t){let r=t.filter(o=>o.if_open===1);this.list_language.array=r,this.list_language.renderHandler=new Laya.Handler(this,this.handleSelectLanguage),this.list_language.mouseHandler=Laya.Handler.create(this,this.onLanguageItemMouse,null,!1);let s=r.findIndex(o=>o.id===V.m_strLanguage);this.list_language.selectedIndex=s||0}}handleSelectLanguage(t,r){t.onChange(this.list_language.selectedIndex==r)}onLanguageItemMouse(t,r){t.type===Laya.Event.CLICK&&(this.list_language.selectedIndex=r)}onPrivacyClick(){window.open("https://drive.google.com/file/d/1JHQmFHsoM2m4qynP0tT2rycXHIm8xX-G/view","_blank")}onServiceClick(){window.open("https://drive.google.com/file/d/1ktcZ2P7lMKEJDsymetdqUzvWKbF0VR2n/view","_blank")}onDisable(){for(let t=0;t<3;t++)this[`tab${t}`].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_music_plus.off(Laya.Event.CLICK,this,this.onClickMusicPlus,[!0]),this.btn_music_reduce.off(Laya.Event.CLICK,this,this.onClickMusicPlus,[!1]),this.btn_sound_plus.off(Laya.Event.CLICK,this,this.onClickSoundPlus,[!0]),this.btn_sound_reduce.off(Laya.Event.CLICK,this,this.onClickSoundPlus,[!1]),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.list_language&&this.list_language.mouseHandler.clear(),Laya.timer.clearAll(this)}};Vx=K([HF("MqlTAbYeQPe4_9ujUdePSg")],Vx);var Kx=class extends Laya.Box{};At();cn();var{regClass:zF}=Laya,$x=class extends Kx{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.checkSelect)}set dataSource(t){if(this.languageData=t,!t){this.visible=!1;return}this.languageData=t,this.tf_language.text=t.language}checkSelect(){let t=this.languageData.id,r=z.getLanTypeById(t);z.FGM_SetLanguage(r);let s=window.location.href,o=new URL(s);o.searchParams.has("lang")?(o.searchParams.delete("lang"),window.location.href=o.toString()):Wt.reload(),this.event("checkSelect",this.languageData)}onChange(t){console.log("isSelect",t),t?(this.img_btn.skin="res/setup/img_bt1.png",this.tf_language.fontSize=25,this.tf_language.color="#FFFFFF",this.tf_language.stroke=2,this.tf_language.strokeColor="#D26E02"):(this.img_btn.skin="res/setup/img_bt2.png",this.tf_language.fontSize=25,this.tf_language.color="#B8E5FE",this.tf_language.stroke=0)}onDisable(){this.languageData=null}};$x=K([zF("SnCse2C4Qiq0GdwkQNE3PA")],$x);oi();var qx=class extends Laya.Dialog{};ri();xt();Vw();Kt();Ei();At();cr();Ot();jt();Hn();Ni();var{regClass:jF}=Laya,Yx=class extends qx{constructor(){super();this.m_iLayerType=me.M_POP;this.m_iPositionType=me.CENTER;this.addL=1;this.isButtonLocked=!1;this.buttonLockTime=2e3}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_buy.on(Laya.Event.CLICK,this,this.onRecruit),L.on("msg_"+x.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),L.on(A.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus)}setOpenData(t){if(t){this.shopItem=t;let r=re.m_dicItems.get(this.shopItem.itemId);if(!r)return;this.alertTitle.text=z.getLanguage(r.name),this.tf_price.text=`${this.shopItem.cost} USDT`,this.img_icon.skin=ge.getItemIcon(r.icon),this.tf_des.text=z.getLanguage(r.des)}}handleClickBtn(t){switch(t){case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}onRefreshItemStatus(){this.close()}setItemNum(){this.tf_num.text=this.addL+"";let t=new is(Number(this.shopItem.cost)),r=new is(this.addL),s=t.multiply(r).getValue();this.tf_price.text=`${s} USDT`}changeItemNum(){var t=parseInt(this.tf_num.text);(!t||t<1)&&(t=1),this.addL=t,this.setItemNum()}onRecruit(){if(this.isButtonLocked)return;this.isButtonLocked=!0;let t=x.snake.socket.MessageType.MSG_SHOP_BUY;if(this.shopItem.id){let r=x.snake.socket.CS_SHOP_BUY.fromObject({id:this.shopItem.id,symbolId:10,num:this.addL});De.send(t,r)}Laya.timer.once(this.buttonLockTime,this,()=>{this.isButtonLocked=!1})}onBuySuccess(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_SHOP_BUY);r==x.snake.socket.MessageCode.SYS_NORMAL?s&&s.items&&(et.notice(z.getLanguage(71)),fi.requestCoinInfo(),this.close()):r==x.snake.socket.MessageCode.MAX_INVITE?et.notice(z.getLanguage(72)):et.notice(z.getLanguage(73))}onDisable(){this.btn_plus.clickHandler=null,this.btn_reduce.clickHandler=null,this.tf_num.off(Laya.Event.BLUR,this,this.changeItemNum),this.btn_buy.off(Laya.Event.CLICK,this,this.onRecruit),L.off(A.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus),L.off("msg_"+x.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),Laya.timer.clearAll(this)}};Yx=K([jF("LRfHnCX4RROGq5Y2JkrAZw")],Yx);yi();Ot();ri();xt();var Qx=class extends Laya.Box{};var{regClass:GF}=Laya,Xx=class extends Qx{constructor(){super(...arguments);this.coins=[[3022,2],[3001,2],[3011,2],[3013,4],[3010,2],[3007,4],[3006,6],[3015,2],[3016,2],[3005,0]]}onEnable(){let t=(Laya.stage.width-ie.DESIGN_WIDTH)/2;this.img_coinsBg.right-=t,console.log("dWidth: "+t),this.updateLocalAssets(),L.on(A.ROLE_INFO_CHANGE,this,this.updateLocalAssets),L.on(A.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),this.coins=re.getGeneralValueById(19),this.list_coin.array=this.coins}onDisable(){L.off(A.ROLE_INFO_CHANGE,this,this.updateLocalAssets),L.off(A.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets)}updateLocalAssets(){this.list_coin.refresh()}};Xx=K([GF("7P9MlqipSaG6QoKpQowDbQ")],Xx);var Jx=class extends Laya.Box{};Vi();Yi();At();jt();Ot();var{regClass:WF}=Laya,Zx=class extends Jx{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toShowBuyDialog)}set dataSource(t){if(super.dataSource=t,this.shopItem=t,!this.shopItem)return;this.tf_const.text=`${this.shopItem.cost} USDT`;let r=re.m_dicItems.get(this.shopItem.itemId);if(!r)return;this.tf_name.text=z.getLanguage(r.name);let s=this.tf_name.height,o=this.tf_name.fontSize;this.tf_name.y=s>o?226:244,this.img_icon.skin=ge.getItemIcon(r.icon)}toShowBuyDialog(){at.intance.openModule(R.BuyPropDialog,this.shopItem)}};Zx=K([WF("awS07ko0RBaxCnxXWqiR4g")],Zx);oi();Rr();xt();Ei();Kt();var ev=class extends Laya.Scene{};cr();Ot();Hn();ri();Pr();Ni();jt();Yt();Mo();At();mn();var{regClass:VF}=Laya,tv=class extends ev{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1;this.shopId=1;this.isButtonLocked=!1;this.buttonLockTime=2e3}onAwake(){this.m_iLayerType=me.M_POP,this.m_iPositionType=me.UP}onOpened(t){t&&t.length>0?(this.type=t[0],t[1]!=null&&(this.selectItemId=t[1]),this.onClickTab(this.type)):(this.selectItemId=1,this.onTabClick(this.selectItemId))}onEnable(){fi.requestCoinInfo(),Li.startJellyScaleAnimation(this.tf_tittle),this.tf_diamon.text=`${parseFloat(V.playerDto.score.toFixed(4)).toString()}`;for(let t=0;t<4;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);this.initShopList(),L.on("msg_"+x.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_left.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!0]),this.btn_right.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!1]),this.btn_buy.on(Laya.Event.CLICK,this,this.onRecruit),L.on(A.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate)}setTab(t){for(let r=1;r<3;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}async onClickTab(t){this.currTab!=t&&(this.type=t,this.setTab(t),t==1?(this.box_middle.visible=!0,this.tabBox.visible=!0,this.box_shop.visible=!1,this.tf_nft2.stroke=5,this.tf_nft2.fontSize=32,this.tf_props2.stroke=0,this.tf_props2.fontSize=25):t==2&&(this.box_middle.visible=!1,this.tabBox.visible=!1,this.box_shop.visible=!0,this.tf_nft2.stroke=0,this.tf_nft2.fontSize=25,this.tf_props2.stroke=5,this.tf_props2.fontSize=32))}setToMainScene(){bt.setCurrentScene(Re.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.btn_left.off(Laya.Event.CLICK,this,this.clickLeftAndRight,[!0]),this.btn_right.off(Laya.Event.CLICK,this,this.clickLeftAndRight,[!1]),this.btn_buy.off(Laya.Event.CLICK,this,this.onRecruit),L.off("msg_"+x.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),L.off(A.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate)}clearAllTimer(){Laya.timer.clearAll(this),this.isButtonLocked=!1}onTabClick(t){let s="res/shop/img_Button_1.png",o="res/shop/img_btlv.png",l="res/shop/img_bt1_2.png",u="res/shop/img_Button_4.png",p="#0785f5";this.snake_sk&&(this.snake_sk.visible=!1),this.clearAllTimer();for(let g=0;g<4;g++){let b=this[`tab${g}`],v=b.getChildByName("tf_tit"),w=t===g,k=g===0;this.selectItemId=t,b.skin=k?w?s:l:w?o:u,v.stroke=w?5:0,v.strokeColor=p;let E=1001,F=101;switch(t){case 0:E=null,F=101,w&&(this.snake_sk.source="gameIcon/spine/shop/snake1/img_she_1.json",this.snake_sk.visible=!0,this.snake_sk&&this.snake_sk.templet&&this.snake_sk.play("animation",!0),this.eggBox.visible=!1);break;case 1:E=1001,F=102,w&&(this.img_egg.visible=!1,this.egg_sk.visible=!0,this.egg_sk&&this.egg_sk.templet&&this.egg_sk.play("animation1",!0),this.eggBox.visible=!0);break;case 2:E=1002,F=103,w&&(this.img_egg.visible=!0,this.egg_sk.visible=!1,this.img_egg.skin="res/shop/img_dan_2.png",this.eggBox.visible=!0);break;case 3:F=null,E=null,F=104,w&&(this.img_egg.visible=!0,this.egg_sk.visible=!1,this.img_egg.skin="res/shop/img_dan_3.png",this.img_egg.visible=!0);break;default:break}if(this.shopId=E,F&&w){var f=re.m_dicSnakes.get(F);let O=this.attribute_1.getChildByName("tf_value"),H=this.attribute_2.getChildByName("tf_value"),Y=this.attribute_3.getChildByName("tf_value"),Z=this.attribute_4.getChildByName("tf_value"),W=this.attribute_5.getChildByName("tf_value");f&&(F>=103?(O.text="?",H.text="?",Y.text="?",Z.text="?",W.text="?"):(O.text=`${f.initLength}`,H.text=`${f.maxLength}`,Y.text=`${f.suctionRadius}`,Z.text=`${f.baseSpeed}`,W.text=`${f.accelerationFactor}`))}if(E){let O=re.m_dicShops.get(E);O?(this.tf_price.text=`${O.cost} USDT`,this.btn_buy.visible=!0):this.btn_buy.visible=!1}else this.btn_buy.visible=!1;this.selectItemId<=0?this.btn_left.disabled=!0:this.btn_left.disabled=!1,this.selectItemId>=3?this.btn_right.disabled=!0:this.btn_right.disabled=!1}}clickLeftAndRight(t){t&&this.selectItemId>0&&(this.selectItemId--,this.onTabClick(this.selectItemId)),!t&&this.selectItemId<3&&(this.selectItemId++,this.onTabClick(this.selectItemId))}initShopList(){let t=[],r=re.m_dicShops;r&&r.values&&(t=Array.from(r.values).filter(o=>o.type===2),this.shopList.array=t);let s=Ar.getKnapsackItemById(10001);s?this.tf_diamon.text=`${parseFloat(s.num.toFixed(4)).toString()}`:this.tf_diamon.text="0"}onBuySuccess(t,r){var s=Pe.getMsgBody(t,x.snake.socket.SC_SHOP_BUY);if(r==x.snake.socket.MessageCode.SYS_NORMAL){if(s&&s.items&&(console.log("buySNake============>",s),wt.playSoundByName(wt.soundName_snakeBuy),s.snake&&s.snake.skin)){let o=s.snake.skin-100;this.egg_sk&&this.egg_sk.templet&&this.egg_sk.play("animation2",!1),this.btn_buy.visible=!1;let l=ge.getSnakeAniJson(`${o}`);this.snake_sk.source=l,Laya.timer.once(500,this,()=>{this.snake_sk.visible=!0,this.snake_sk&&this.snake_sk.templet&&this.snake_sk.play("animation",!0)}),Laya.timer.once(7e3,this,()=>{this.selectItemId==1&&(this.snake_sk&&(this.snake_sk.visible=!1),this.egg_sk&&this.egg_sk.templet&&this.egg_sk.play("animation1",!0),this.btn_buy.visible=!0)}),fi.requestCoinInfo()}}else r==x.snake.socket.MessageCode.NOT_ENOUGH_TOKEN?et.notice(z.getLanguage(72)):et.notice(z.getLanguage(73))}onRecruit(){if(this.isButtonLocked)return;this.isButtonLocked=!0,Laya.timer.once(this.buttonLockTime,this,()=>{this.isButtonLocked=!1});let t=x.snake.socket.MessageType.MSG_SHOP_BUY;var r=re.m_dicSnakes.get(this.shopId);if(console.log(r),this.shopId){let s=x.snake.socket.CS_SHOP_BUY.fromObject({id:this.shopId,symbolId:10,num:1});De.send(t,s)}}onTokenBalanceUpdate(t){this.showAssetData(t)}showAssetData(t){let r=t.find(o=>o.symbolId===10),s=r?r.balance:0;this.tf_usdt.text=Ba.filterNumFormat(s,2,!0)}onDisable(){this.removeEvent(),this.isButtonLocked=!1}};tv=K([VF("IPCUkD5kRse3Gz5tw0Aovw")],tv);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@tonconnect/sdk/lib/esm/index.mjs:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
//# sourceMappingURL=bundle.js.map
